!function(e,t){for(var i in t)e[i]=t[i]}(exports,function(e){var t={};function i(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=96)}([function(e,t,i){"use strict";const s=i(208);e.exports=function e(t,i,s={}){for(const[a,r]of Object.entries(i)){const i=Object.assign(s,{[a]:class extends t{constructor(e){super(e),this.constructor=i,this.__proto__=i.prototype,this.name=a,this.message=e}}})[a];e(i,r,s)}return s}(Error,s)},function(e,t,i){"use strict";const s=i(73),{isNode:a,keys:r,values:o,deepExtend:n,extend:c,clone:d,flatten:h,unique:l,indexBy:u,sortBy:p,groupBy:f,aggregate:m,uuid:v,unCamelCase:y,precisionFromString:g,throttle:b,capitalize:w,now:k,timeout:x,TimedOut:T,buildOHLCVC:O,decimalToPrecision:_,defaultFetch:S}=s,{ExchangeError:C,BadSymbol:I,InvalidAddress:M,NotSupported:F,AuthenticationError:E,DDoSProtection:A,RequestTimeout:B,ExchangeNotAvailable:P,RateLimitExceeded:q}=i(0),{TRUNCATE:V,ROUND:L,DECIMAL_PLACES:D,NO_PADDING:R}=s.precisionConstants,G=i(3);e.exports=class{describe(){return{id:void 0,name:void 0,countries:void 0,enableRateLimit:!1,rateLimit:2e3,certified:!1,pro:!1,has:{loadMarkets:!0,cancelAllOrders:!1,cancelOrder:!0,cancelOrders:!1,CORS:!1,createDepositAddress:!1,createLimitOrder:!0,createMarketOrder:!0,createOrder:!0,deposit:!1,editOrder:"emulated",fetchBalance:!0,fetchBidsAsks:!1,fetchClosedOrders:!1,fetchCurrencies:!1,fetchDepositAddress:!1,fetchDeposits:!1,fetchFundingFees:!1,fetchL2OrderBook:!0,fetchLedger:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:"emulated",fetchOpenOrders:!1,fetchOrder:!1,fetchOrderBook:!0,fetchOrderBooks:!1,fetchOrders:!1,fetchOrderTrades:!1,fetchStatus:"emulated",fetchTicker:!0,fetchTickers:!1,fetchTime:!1,fetchTrades:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTradingLimits:!1,fetchTransactions:!1,fetchWithdrawals:!1,privateAPI:!0,publicAPI:!0,signIn:!1,withdraw:!1},urls:{logo:void 0,api:void 0,www:void 0,doc:void 0,fees:void 0},api:void 0,requiredCredentials:{apiKey:!0,secret:!0,uid:!1,login:!1,password:!1,twofa:!1,privateKey:!1,walletAddress:!1,token:!1},markets:void 0,currencies:{},timeframes:void 0,fees:{trading:{tierBased:void 0,percentage:void 0,taker:void 0,maker:void 0},funding:{tierBased:void 0,percentage:void 0,withdraw:{},deposit:{}}},status:{status:"ok",updated:void 0,eta:void 0,url:void 0},exceptions:void 0,httpExceptions:{422:C,418:A,429:q,404:P,409:P,410:P,500:P,501:P,502:P,520:P,521:P,522:P,525:P,526:P,400:P,403:P,405:P,503:P,530:P,408:B,504:B,401:E,511:E},dontGetUsedBalanceFromStaleCache:!1,commonCurrencies:{XBT:"BTC",BCC:"BCH",DRK:"DASH",BCHABC:"BCH",BCHSV:"BSV"},precisionMode:D,paddingMode:R,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}}}constructor(e={}){Object.assign(this,s),this.options={},this.fetchOptions={},this.userAgents={chrome:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36",chrome39:"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36"},this.headers={},this.proxy="",this.origin="*",this.minFundingAddressLength=1,this.substituteCommonCurrencyCodes=!0,this.fetchImplementation=S,this.timeout=1e4,this.verbose=!1,this.debug=!1,this.userAgent=void 0,this.twofa=void 0,this.apiKey=void 0,this.secret=void 0,this.uid=void 0,this.login=void 0,this.password=void 0,this.privateKey=void 0,this.walletAddress=void 0,this.token=void 0,this.balance={},this.orderbooks={},this.tickers={},this.orders=void 0,this.trades={},this.transactions={},this.ohlcvs={},this.myTrades=void 0,this.requiresWeb3=!1,this.requiresEddsa=!1,this.precision={},this.enableLastJsonResponse=!0,this.enableLastHttpResponse=!0,this.enableLastResponseHeaders=!0,this.last_http_response=void 0,this.last_json_response=void 0,this.last_response_headers=void 0;const t=(e=this)=>{if(null!==e){const i=Object.getOwnPropertyNames(e);for(let e=0;e<i.length;e++){const t=i[e];this[y(t)]=this[t]}t(Object.getPrototypeOf(e))}};t();const i=Object.entries(this.describe()).concat(Object.entries(e));for(let e=0;e<i.length;e++){const[t,s]=i[e];s&&Object.getPrototypeOf(s)===Object.prototype?this[t]=n(this[t],s):this[t]=s}const r={keepAlive:!0};!this.httpAgent&&S.http&&a&&(this.httpAgent=new S.http.Agent(r)),!this.httpsAgent&&S.https&&a&&(this.httpsAgent=new S.https.Agent(r));const o=Object.keys(this.has);for(let e=0;e<o.length;e++){const t=o[e];this["has"+w(t)]=!!this.has[t]}this.api&&this.defineRestApi(this.api,"request"),this.initRestRateLimiter(),this.markets&&this.setMarkets(this.markets)}defaults(){return{}}nonce(){return this.seconds()}encodeURIComponent(...e){return encodeURIComponent(...e)}checkRequiredCredentials(e=!0){const t=Object.keys(this.requiredCredentials);for(let i=0;i<t.length;i++){const s=t[i];if(this.requiredCredentials[s]&&!this[s]){if(e)throw new E(this.id+" requires `"+s+"` credential");return e}}return!0}checkAddress(e){if(void 0===e)throw new M(this.id+" address is undefined");if(1===l(e).length||e.length<this.minFundingAddressLength||e.includes(" "))throw new M(this.id+" address is invalid or has less than "+this.minFundingAddressLength.toString()+' characters: "'+this.json(e)+'"');return e}initRestRateLimiter(){if(void 0===this.rateLimit)throw new Error(this.id+".rateLimit property is not configured");this.tokenBucket=this.extend({delay:1,capacity:1,defaultCost:1,maxCapacity:1e3},this.tokenBucket),this.throttle=b(this.tokenBucket),this.executeRestRequest=(e,t="GET",i,s)=>{const r=this.fetchImplementation,o={method:t,headers:i,body:s,timeout:this.timeout};this.agent?o.agent=this.agent:this.httpAgent&&0===e.indexOf("http://")?o.agent=this.httpAgent:this.httpsAgent&&0===e.indexOf("https://")&&(o.agent=this.httpsAgent);const n=r(e,this.extend(o,this.fetchOptions)).catch(i=>{if(a)throw new P([this.id,t,e,i.type,i.message].join(" "));throw i}).then(a=>this.handleRestResponse(a,e,t,i,s));return x(this.timeout,n).catch(i=>{if(i instanceof T)throw new B(this.id+" "+t+" "+e+" request timed out ("+this.timeout+" ms)");throw i})}}setSandboxMode(e){if(e){if(!("test"in this.urls))throw new F(this.id+" does not have a sandbox URL");"string"==typeof this.urls.api?(this.urls.api_backup=this.urls.api,this.urls.api=this.urls.test):(this.urls.api_backup=d(this.urls.api),this.urls.api=d(this.urls.test))}else"api_backup"in this.urls&&("string"==typeof this.urls.api?this.urls.api=this.urls.api_backup:this.urls.api=d(this.urls.api_backup))}defineRestApi(e,t,i=[]){const s=Object.keys(e);for(let a=0;a<s.length;a++){const r=s[a],o=e[r];if(Array.isArray(o)){const e=r.toUpperCase(),s=r.toLowerCase(),a=this.capitalize(s);for(let r=0;r<o.length;r++){const n=o[r].trim(),c=n.split(/[^a-zA-Z0-9]/),d=c.map(this.capitalize).join(""),h=c.map(e=>e.trim().toLowerCase()).filter(e=>e.length>0).join("_"),l=[i[0]].concat(i.slice(1).map(this.capitalize)).join(""),u=[i[0]].concat(i.slice(1).map(e=>e.trim()).filter(e=>e.length>0)).join("_"),p=l+a+this.capitalize(d),f=u+"_"+s+"_"+h,m=i.length>1?i:i[0],v=async i=>this[t](n,m,e,i||{});this[p]=v,this[f]=v}}else this.defineRestApi(o,t,i.concat([r]))}}print(...e){console.log(...e)}setHeaders(e){return e}fetch(e,t="GET",i,s){return a&&this.userAgent&&("string"==typeof this.userAgent?i=c({"User-Agent":this.userAgent},i):"object"==typeof this.userAgent&&"User-Agent"in this.userAgent&&(i=c(this.userAgent,i))),"function"==typeof this.proxy?(e=this.proxy(e),a&&(i=c({Origin:this.origin},i))):"string"==typeof this.proxy&&(this.proxy.length&&a&&(i=c({Origin:this.origin},i)),e=this.proxy+e),i=c(this.headers,i),i=this.setHeaders(i),this.verbose&&this.print("fetch:\n",this.id,t,e,"\nRequest:\n",i,"\n",s,"\n"),this.executeRestRequest(e,t,i,s)}async fetch2(e,t="public",i="GET",s={},a,r){this.enableRateLimit&&await this.throttle(this.rateLimit);const o=this.sign(e,t,i,s,a,r);return this.fetch(o.url,o.method,o.headers,o.body)}request(e,t="public",i="GET",s={},a,r){return this.fetch2(e,t,i,s,a,r)}parseJson(e){try{if(this.isJsonEncodedObject(e))return JSON.parse(e)}catch(e){return}}throwExactlyMatchedException(e,t,i){if(t in e)throw new e[t](i)}throwBroadlyMatchedException(e,t,i){const s=this.findBroadlyMatchedKey(e,t);if(void 0!==s)throw new e[s](i)}findBroadlyMatchedKey(e,t){const i=Object.keys(e);for(let e=0;e<i.length;e++){const s=i[e];if(t.indexOf(s)>=0)return s}}handleErrors(e,t,i,s,a,r,o,n,c){}handleHttpStatusCode(e,t,i,s,a){const r=e.toString();if(r in this.httpExceptions){throw new(0,this.httpExceptions[r])([this.id,s,i,e,t,a].join(" "))}}getResponseHeaders(e){const t={};return e.headers.forEach((e,i)=>{i=i.split("-").map(e=>w(e)).join("-"),t[i]=e}),t}handleRestResponse(e,t,i="GET",s,a){return e.text().then(r=>{const o=this.parseJson(r),n=this.getResponseHeaders(e);return this.enableLastResponseHeaders&&(this.last_response_headers=n),this.enableLastHttpResponse&&(this.last_http_response=r),this.enableLastJsonResponse&&(this.last_json_response=o),this.verbose&&this.print("handleRestResponse:\n",this.id,i,t,e.status,e.statusText,"\nResponse:\n",n,"\n",r,"\n"),this.handleErrors(e.status,e.statusText,t,i,n,r,o,s,a),this.handleHttpStatusCode(e.status,e.statusText,t,i,r),o||r})}setMarkets(e,t){const i=Object.values(e).map(e=>n({limits:this.limits,precision:this.precision},this.fees.trading,e));if(this.markets=u(i,"symbol"),this.marketsById=u(e,"id"),this.markets_by_id=this.marketsById,this.symbols=Object.keys(this.markets).sort(),this.ids=Object.keys(this.markets_by_id).sort(),t)this.currencies=n(t,this.currencies);else{let e=i.filter(e=>"base"in e).map(e=>({id:e.baseId||e.base,numericId:void 0!==e.baseNumericId?e.baseNumericId:void 0,code:e.base,precision:e.precision?e.precision.base||e.precision.amount:8})),t=i.filter(e=>"quote"in e).map(e=>({id:e.quoteId||e.quote,numericId:void 0!==e.quoteNumericId?e.quoteNumericId:void 0,code:e.quote,precision:e.precision?e.precision.quote||e.precision.price:8}));e=p(e,"code"),t=p(t,"code"),this.baseCurrencies=u(e,"code"),this.quoteCurrencies=u(t,"code");const s=e.concat(t),a=f(s,"code"),r=Object.keys(a).map(e=>a[e].reduce((e,t)=>e.precision>t.precision?e:t,a[e][0])),o=p(h(r),"code");this.currencies=n(u(o,"code"),this.currencies)}return this.currencies_by_id=u(this.currencies,"id"),this.markets}async loadMarketsHelper(e=!1,t={}){if(!e&&this.markets)return this.markets_by_id?this.markets:this.setMarkets(this.markets);let i=void 0;this.has.fetchCurrencies&&(i=await this.fetchCurrencies());const s=await this.fetchMarkets(t);return this.setMarkets(s,i)}loadMarkets(e=!1,t={}){return(e&&!this.reloadingMarkets||!this.marketsLoading)&&(this.reloadingMarkets=!0,this.marketsLoading=this.loadMarketsHelper(e,t).then(e=>(this.reloadingMarkets=!1,e),e=>{throw this.reloadingMarkets=!1,e})),this.marketsLoading}async loadAccounts(e=!1,t={}){if(e)this.accounts=await this.fetchAccounts(t);else{if(this.accounts)return this.accounts;this.accounts=await this.fetchAccounts(t)}return this.accountsById=this.indexBy(this.accounts,"id"),this.accounts}fetchBidsAsks(e,t={}){throw new F(this.id+" fetchBidsAsks not supported yet")}async fetchOHLCVC(e,t="1m",i,s,a={}){if(!this.has.fetchTrades)throw new F(this.id+" fetchOHLCV() not supported yet");await this.loadMarkets();const r=await this.fetchTrades(e,i,s,a);return O(r,t,i,s)}async fetchOHLCV(e,t="1m",i,s,a={}){if(!this.has.fetchTrades)throw new F(this.id+" fetchOHLCV() not supported yet");await this.loadMarkets();const r=await this.fetchTrades(e,i,s,a);return O(r,t,i,s).map(e=>e.slice(0,-1))}parseTradingViewOHLCV(e,t,i="1m",s,a){const r=this.convertTradingViewToOHLCV(e);return this.parseOHLCVs(r,t,i,s,a)}convertTradingViewToOHLCV(e,t="t",i="o",s="h",a="l",r="c",o="v",n=!1){const c=[];for(let d=0;d<e[t].length;d++)c.push([n?e[t][d]:1e3*e[t][d],e[i][d],e[s][d],e[a][d],e[r][d],e[o][d]]);return c}convertOHLCVToTradingView(e,t="t",i="o",s="h",a="l",r="c",o="v",n=!1){const c={};c[t]=[],c[i]=[],c[s]=[],c[a]=[],c[r]=[],c[o]=[];for(let d=0;d<e.length;d++)c[t].push(n?e[d][0]:parseInt(e[d][0]/1e3)),c[i].push(e[d][1]),c[s].push(e[d][2]),c[a].push(e[d][3]),c[r].push(e[d][4]),c[o].push(e[d][5]);return c}fetchTicker(e,t={}){throw new F(this.id+" fetchTicker not supported yet")}fetchTickers(e,t={}){throw new F(this.id+" fetchTickers not supported yet")}fetchOrder(e,t,i={}){throw new F(this.id+" fetchOrder not supported yet")}fetchUnifiedOrder(e,t={}){return this.fetchOrder(this.safeValue(e,"id"),this.safeValue(e,"symbol"),t)}createOrder(e,t,i,s,a,r={}){throw new F(this.id+" createOrder not supported yet")}cancelOrder(e,t,i={}){throw new F(this.id+" cancelOrder not supported yet")}cancelUnifiedOrder(e,t={}){return this.cancelOrder(this.safeValue(e,"id"),this.safeValue(e,"symbol"),t)}fetchOrders(e,t,i,s={}){throw new F(this.id+" fetchOrders not supported yet")}fetchOpenOrders(e,t,i,s={}){throw new F(this.id+" fetchOpenOrders not supported yet")}fetchClosedOrders(e,t,i,s={}){throw new F(this.id+" fetchClosedOrders not supported yet")}fetchMyTrades(e,t,i,s={}){throw new F(this.id+" fetchMyTrades not supported yet")}fetchTransactions(e,t,i,s={}){throw new F(this.id+" fetchTransactions not supported yet")}fetchDeposits(e,t,i,s={}){throw new F(this.id+" fetchDeposits not supported yet")}fetchWithdrawals(e,t,i,s={}){throw new F(this.id+" fetchWithdrawals not supported yet")}fetchCurrencies(e={}){return new Promise((e,t)=>e(this.currencies))}fetchMarkets(e={}){return new Promise((e,t)=>e(Object.values(this.markets)))}async fetchOrderStatus(e,t,i={}){return(await this.fetchOrder(e,t,i)).status}account(){return{free:void 0,used:void 0,total:void 0}}commonCurrencyCode(e){return this.substituteCommonCurrencyCodes?this.safeString(this.commonCurrencies,e,e):e}currencyId(e){if(void 0===this.currencies)throw new C(this.id+" currencies not loaded");if(e in this.currencies)return this.currencies[e].id;const t={},i=Object.keys(this.commonCurrencies);for(let e=0;e<i.length;e++){const s=i[e];t[this.commonCurrencies[s]]=s}return this.safeString(t,e,e)}currency(e){if(void 0===this.currencies)throw new C(this.id+" currencies not loaded");if("string"==typeof e&&e in this.currencies)return this.currencies[e];throw new C(this.id+" does not have currency code "+e)}market(e){if(void 0===this.markets)throw new C(this.id+" markets not loaded");if("string"==typeof e&&e in this.markets)return this.markets[e];throw new I(this.id+" does not have market symbol "+e)}marketId(e){const t=this.market(e);return void 0!==t?t.id:e}marketIds(e){return e.map(e=>this.marketId(e))}symbol(e){return this.market(e).symbol||e}url(e,t={}){let i=this.implodeParams(e,t);const s=this.omit(t,this.extractParams(e));return Object.keys(s).length&&(i+="?"+this.urlencode(s)),i}parseBidAsk(e,t=0,i=1){return[parseFloat(e[t]),parseFloat(e[i])]}parseBidsAsks(e,t=0,i=1){return Object.values(e||[]).map(e=>this.parseBidAsk(e,t,i))}async fetchL2OrderBook(e,t,i={}){const s=await this.fetchOrderBook(e,t,i);return c(s,{bids:p(m(s.bids),0,!0),asks:p(m(s.asks),0)})}parseOrderBook(e,t,i="bids",s="asks",a=0,r=1){return{bids:p(i in e?this.parseBidsAsks(e[i],a,r):[],0,!0),asks:p(s in e?this.parseBidsAsks(e[s],a,r):[],0),timestamp:t,datetime:this.iso8601(t),nonce:void 0}}parseBalance(e){const t=Object.keys(this.omit(e,["info","free","used","total"]));e.free={},e.used={},e.total={};for(let i=0;i<t.length;i++){const s=t[i];void 0===e[s].total&&void 0!==e[s].free&&void 0!==e[s].used&&(e[s].total=this.sum(e[s].free,e[s].used)),void 0===e[s].free&&void 0!==e[s].total&&void 0!==e[s].used&&(e[s].free=this.sum(e[s].total,-e[s].used)),void 0===e[s].used&&void 0!==e[s].total&&void 0!==e[s].free&&(e[s].used=this.sum(e[s].total,-e[s].free)),e.free[s]=e[s].free,e.used[s]=e[s].used,e.total[s]=e[s].total}return e}async fetchPartialBalance(e,t={}){return(await this.fetchBalance(t))[e]}fetchFreeBalance(e={}){return this.fetchPartialBalance("free",e)}fetchUsedBalance(e={}){return this.fetchPartialBalance("used",e)}fetchTotalBalance(e={}){return this.fetchPartialBalance("total",e)}async fetchStatus(e={}){if(this.has.fetchTime){const t=await this.fetchTime(e);this.status=this.extend(this.status,{updated:t})}return this.status}async fetchTradingFees(e={}){throw new F(this.id+" fetchTradingFees not supported yet")}async fetchTradingFee(e,t={}){if(!this.has.fetchTradingFees)throw new F(this.id+" fetchTradingFee not supported yet");return await this.fetchTradingFees(t)}async loadTradingLimits(e,t=!1,i={}){if(this.has.fetchTradingLimits&&(t||!("limitsLoaded"in this.options))){const t=await this.fetchTradingLimits(e);for(let i=0;i<e.length;i++){const s=e[i];this.markets[s]=this.deepExtend(this.markets[s],t[s])}this.options.limitsLoaded=this.milliseconds()}return this.markets}filterBySinceLimit(e,t,i,s="timestamp",a=!1){const r=null!=t;return r&&(e=e.filter(e=>e[s]>=t)),null!=i&&(e=a&&!r?e.slice(-i):e.slice(0,i)),e}filterByValueSinceLimit(e,t,i,s,a,r="timestamp",o=!1){const n=null!=i,c=null!=s;return(n||c)&&(e=e.filter(e=>(!n||e[t]===i)&&(!c||e[r]>=s))),null!=a&&(e=o&&!c?e.slice(-a):e.slice(0,a)),e}filterBySymbolSinceLimit(e,t,i,s){return this.filterByValueSinceLimit(e,"symbol",t,i,s)}filterByCurrencySinceLimit(e,t,i,s){return this.filterByValueSinceLimit(e,"currency",t,i,s)}filterByArray(e,t,i,s=!0){if(e=Object.values(e),null==i)return s?u(e,t):e;const a=[];for(let s=0;s<e.length;s++)i.includes(e[s][t])&&a.push(e[s]);return s?u(a,t):a}parseTrades(e,t,i,s,a={}){let r=Object.values(e||[]).map(e=>this.extend(this.parseTrade(e,t),a));r=p(r,"timestamp");const o=void 0!==t?t.symbol:void 0;return this.filterBySymbolSinceLimit(r,o,i,s)}parseTransactions(e,t,i,s,a={}){let r=Object.values(e||[]).map(e=>this.extend(this.parseTransaction(e,t),a));r=this.sortBy(r,"timestamp");const o=void 0!==t?t.code:void 0;return this.filterByCurrencySinceLimit(r,o,i,s)}parseLedger(e,t,i,s,a={}){let r=[];const o=Object.values(e||[]);for(let e=0;e<o.length;e++){const i=this.parseLedgerEntry(o[e],t);if(Array.isArray(i))for(let e=0;e<i.length;e++)r.push(this.extend(i[e],a));else r.push(this.extend(i,a))}r=this.sortBy(r,"timestamp");const n=void 0!==t?t.code:void 0;return this.filterByCurrencySinceLimit(r,n,i,s)}parseOrders(e,t,i,s,a={}){let r=Array.isArray(e)?Object.values(e).map(e=>this.extend(this.parseOrder(e,t),a)):Object.entries(e).map(([e,i])=>this.extend(this.parseOrder(this.extend({id:e},i),t),a));r=p(r,"timestamp");const o=void 0!==t?t.symbol:void 0;return this.filterBySymbolSinceLimit(r,o,i,s)}safeCurrency(e,t){return void 0===e&&void 0!==t?t:void 0!==this.currencies_by_id&&e in this.currencies_by_id?this.currencies_by_id[e]:{id:e,code:void 0===e?e:this.commonCurrencyCode(e.toUpperCase())}}safeCurrencyCode(e,t){return(t=this.safeCurrency(e,t)).code}safeMarket(e,t,i){if(void 0!==e)if(void 0!==this.markets_by_id&&e in this.markets_by_id)t=this.markets_by_id[e];else if(void 0!==i){const[t,s]=e.split(i),a=this.safeCurrencyCode(t),r=this.safeCurrencyCode(s);return{id:e,symbol:a+"/"+r,base:a,quote:r,baseId:t,quoteId:s}}return void 0!==t?t:{id:e,symbol:e,base:void 0,quote:void 0,baseId:void 0,quoteId:void 0}}safeSymbol(e,t,i){return(t=this.safeMarket(e,t,i)).symbol}filterBySymbol(e,t){return void 0!==t?e.filter(e=>e.symbol===t):e}parseOHLCV(e,t){return Array.isArray(e)?e.slice(0,6):e}parseOHLCVs(e,t,i="1m",s,a){e=Object.values(e||[]);const r=[];for(let i=0;i<e.length&&!(a&&r.length>=a);i++){const a=this.parseOHLCV(e[i],t);s&&a[0]<s||r.push(a)}return this.sortBy(r,0)}editLimitBuyOrder(e,t,...i){return this.editLimitOrder(e,t,"buy",...i)}editLimitSellOrder(e,t,...i){return this.editLimitOrder(e,t,"sell",...i)}editLimitOrder(e,t,...i){return this.editOrder(e,t,"limit",...i)}async editOrder(e,t,...i){if(!this.enableRateLimit)throw new C(this.id+" editOrder() requires enableRateLimit = true");return await this.cancelOrder(e,t),this.createOrder(t,...i)}createLimitOrder(e,...t){return this.createOrder(e,"limit",...t)}createMarketOrder(e,...t){return this.createOrder(e,"market",...t)}createLimitBuyOrder(e,...t){return this.createOrder(e,"limit","buy",...t)}createLimitSellOrder(e,...t){return this.createOrder(e,"limit","sell",...t)}createMarketBuyOrder(e,t,i={}){return this.createOrder(e,"market","buy",t,void 0,i)}createMarketSellOrder(e,t,i={}){return this.createOrder(e,"market","sell",t,void 0,i)}costToPrecision(e,t){return _(t,L,this.markets[e].precision.price,this.precisionMode,this.paddingMode)}priceToPrecision(e,t){return _(t,L,this.markets[e].precision.price,this.precisionMode,this.paddingMode)}amountToPrecision(e,t){return _(t,V,this.markets[e].precision.amount,this.precisionMode,this.paddingMode)}feeToPrecision(e,t){return _(t,L,this.markets[e].precision.price,this.precisionMode,this.paddingMode)}currencyToPrecision(e,t){return _(t,L,this.currencies[e].precision,this.precisionMode,this.paddingMode)}calculateFee(e,t,i,s,a,r="taker",o={}){const n=this.markets[e],c=n[r],d=parseFloat(this.costToPrecision(e,s*a));return{type:r,currency:n.quote,rate:c,cost:parseFloat(this.feeToPrecision(e,c*d))}}checkRequiredDependencies(){}soliditySha3(e){const t=[];for(let i=0;i<e.length;i++){const s=e[i];if(Number.isInteger(s)||s.match(/^[0-9]+$/))t.push(this.numberToBE(this.numberToString(s),32));else{const e=this.remove0xPrefix(s);40===e.length&&e.toLowerCase().match(/^[0-9a-f]+$/)?t.push(this.base16ToBinary(e)):t.push(this.stringToBinary(e))}}const i=this.binaryConcatArray(t);return"0x"+this.hash(i,"keccak","hex")}remove0xPrefix(e){return"0x"===e.slice(0,2)?e.slice(2):e}hashMessage(e){const t=this.base16ToBinary(this.remove0xPrefix(e)),i=this.stringToBinary("Ethereum Signed Message:\n"+t.sigBytes);return"0x"+this.hash(this.binaryConcat(i,t),"keccak","hex")}signHash(e,t){const i=this.ecdsa(e.slice(-64),t.slice(-64),"secp256k1",void 0);return{r:"0x"+i.r,s:"0x"+i.s,v:27+i.v}}signMessage(e,t){return this.signHash(this.hashMessage(e),t.slice(-64))}signMessageString(e,t){const i=this.signMessage(e,t);return i.r+this.remove0xPrefix(i.s)+this.binaryToBase16(this.numberToBE(i.v))}oath(){if(void 0!==this.twofa)return this.totp(this.twofa);throw new C(this.id+" this.twofa has not been set")}integerDivide(e,t){return new G(e).div(new G(t))}integerModulo(e,t){return new G(e).mod(new G(t))}integerPow(e,t){return new G(e).pow(new G(t))}}},function(e,t,i){"use strict";const s={ROUND:0,TRUNCATE:1,ROUND_UP:2,ROUND_DOWN:3,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,TICK_SIZE:2,NO_PADDING:0,PAD_WITH_ZERO:1};function a(e){if("string"==typeof e)return e;const t=e.toString();if(Math.abs(e)<1){const i=t.split("e-"),s=i[0].replace(".",""),a=parseInt(i[1]),r="-"===t[0];if(a)return e=(r?"-":"")+"0."+new Array(a).join("0")+s.substring(r)}else{const e=t.split("e");if(e[1]){let t=parseInt(e[1]);const i=e[0].split(".");return i[1]&&(t-=i[1].length),i[0]+i[1]+new Array(t+1).join("0")}}return t}const r=[],o=(e,t=0)=>{if(e=a(e),t>0){const i=r[t]||(r[t]=new RegExp("([-]*\\d+\\.\\d{"+t+"})(\\d)")),[,s]=e.toString().match(i)||[null,e];return s.toString()}return parseInt(e).toString()};function n(e){const t=e.replace(/0+$/g,"").split(".");return t.length>1?t[1].length:0}const c=(e,t,i,s=0,r=0)=>{if(2===s&&i<=0)throw new Error("TICK_SIZE cant be used with negative or zero numPrecisionDigits");if(i<0){const a=Math.pow(10,-i);if(0===t)return(a*c(e/a,t,0,s,r)).toString();if(1===t)return(e-e%a).toString()}if(2===s){const s=n(c(i,0,22,0,0));let a=e%i;a=Number(c(a,0,8,0,0));return 0!==n(c(a/i,0,Math.max(s,8),0,0))&&(0===t?e>0?a>=i/2?e=e-a+i:e-=a:e=a>=i/2?Number(e)-a:Number(e)-a-i:1===t&&(e-=a)),c(e,0,s,0,r)}const o=a(e),d="-"===o[0],h=d?1:0,l=o.length;for(var u=0;u<l&&"."!==o[u];u++);const p=u<o.length,f=new Uint8Array(l-h+(p?0:1));f[0]=48;let m=f.length,v=-1,y=-1;for(var g=1,b=h;b<l;b++,g++){const e=o.charCodeAt(b);if(46===e)m=g--;else{if(e<48||e>57)throw new Error(`${o}: invalid number (contains an illegal character '${o[g-1]}')`);f[g]=e,48!==e&&v<0&&(v=g)}}v<0&&(v=1);let w=0===s?m:v,k=w+i;y=-1;let x=!0,T=d;for(let e=f.length-1,s=0;e>=0;e--){let a=f[e];if(0!==e){if(a+=s,e>=w+i){a=0===t&&a>=53&&!(53===a&&s)?58:48}a>57?(a=48,s=1):s=0}else s&&(a=49);f[e]=a,48!==a&&(x=!1,v=e,y=y<0?e+1:y)}1===s&&(w=v,k=w+i),x&&(T=!1);const O=v>=m||x?m-1:v,_=y<m?m:y,S=T?1:0,C=S+(m-O),I=Math.max(_-m,0),M=_-O,F=0===r?M:k-O,E=Math.max(F-M,0),A=C+1+I,B=A+E,P=I+E===0,q=new Uint8Array(C+(P?0:1)+I+E);for(T&&(q[0]=45),g=S,b=O;g<C;g++,b++)q[g]=f[b];for(P||(q[C]=46),g=C+1,b=m;g<A;g++,b++)q[g]=f[b];for(g=A;g<B;g++)q[g]=48;return String.fromCharCode(...q)};e.exports={toWei:function(e,t=18){if(void 0===e)return e;const i=parseFloat(e).toExponential(),[s,r]=i.split("e"),o=parseInt(r)+t;return a(Math.floor(parseFloat(s+"e"+o)))},fromWei:function(e,t=18){if(void 0===e)return e;const i=Math.floor(e).toExponential(),[s,a]=i.split("e"),r=parseInt(a)-t;return parseFloat(s+"e"+r)},numberToString:a,precisionFromString:n,decimalToPrecision:c,truncate_to_string:o,truncate:(e,t=0)=>parseFloat(o(e,t)),precisionConstants:s,ROUND:0,TRUNCATE:1,ROUND_UP:2,ROUND_DOWN:3,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,TICK_SIZE:2,NO_PADDING:0,PAD_WITH_ZERO:1}},function(e,t,i){(function(e){!function(e,t){"use strict";function s(e,t){if(!e)throw new Error(t||"Assertion failed")}function a(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}function r(e,t,i){if(r.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(i=t,t=10),this._init(e||0,t||10,i||"be"))}var o;"object"==typeof e?e.exports=r:t.BN=r,r.BN=r,r.wordSize=26;try{o=i(14).Buffer}catch(e){}function n(e,t,i){for(var a=0,r=Math.min(e.length,i),o=0,n=t;n<r;n++){var c,d=e.charCodeAt(n)-48;a<<=4,a|=c=d>=49&&d<=54?d-49+10:d>=17&&d<=22?d-17+10:d,o|=c}return s(!(240&o),"Invalid character in "+e),a}function c(e,t,i,a){for(var r=0,o=0,n=Math.min(e.length,i),c=t;c<n;c++){var d=e.charCodeAt(c)-48;r*=a,o=d>=49?d-49+10:d>=17?d-17+10:d,s(d>=0&&o<a,"Invalid character"),r+=o}return r}function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}r.isBN=function(e){return e instanceof r||null!==e&&"object"==typeof e&&e.constructor.wordSize===r.wordSize&&Array.isArray(e.words)},r.max=function(e,t){return e.cmp(t)>0?e:t},r.min=function(e,t){return e.cmp(t)<0?e:t},r.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),s(t===(0|t)&&t>=2&&t<=36);var a=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&a++,16===t?this._parseHex(e,a):this._parseBase(e,t,a),"-"===e[0]&&(this.negative=1),this._strip(),"le"===i&&this._initArray(this.toArray(),t,i)},r.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(s(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},r.prototype._initArray=function(e,t,i){if(s("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var r,o,n=0;if("be"===i)for(a=e.length-1,r=0;a>=0;a-=3)o=e[a]|e[a-1]<<8|e[a-2]<<16,this.words[r]|=o<<n&67108863,this.words[r+1]=o>>>26-n&67108863,(n+=24)>=26&&(n-=26,r++);else if("le"===i)for(a=0,r=0;a<e.length;a+=3)o=e[a]|e[a+1]<<8|e[a+2]<<16,this.words[r]|=o<<n&67108863,this.words[r+1]=o>>>26-n&67108863,(n+=24)>=26&&(n-=26,r++);return this._strip()},r.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,a,r=0;for(i=e.length-6,s=0;i>=t;i-=6)a=n(e,i,i+6),this.words[s]|=a<<r&67108863,this.words[s+1]|=a>>>26-r&4194303,(r+=24)>=26&&(r-=26,s++);i+6!==t&&(a=n(e,t,i+6),this.words[s]|=a<<r&67108863,this.words[s+1]|=a>>>26-r&4194303),this._strip()},r.prototype._parseBase=function(e,t,i){this.words=[0],this.length=1;for(var s=0,a=1;a<=67108863;a*=t)s++;s--,a=a/t|0;for(var r=e.length-i,o=r%s,n=Math.min(r,r-o)+i,d=0,h=i;h<n;h+=s)d=c(e,h,h+s,t),this.imuln(a),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(0!==o){var l=1;for(d=c(e,h,e.length,t),h=0;h<o;h++)l*=t;this.imuln(l),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}},r.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},r.prototype._move=function(e){e.words=this.words,e.length=this.length,e.negative=this.negative,e.red=this.red},r.prototype.clone=function(){var e=new r(null);return this.copy(e),e},r.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},r.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for?r.prototype[Symbol.for("nodejs.util.inspect.custom")]=d:r.prototype.inspect=d;var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];r.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var a=0,r=0,o=0;o<this.length;o++){var n=this.words[o],c=(16777215&(n<<a|r)).toString(16);i=0!==(r=n>>>24-a&16777215)||o!==this.length-1?h[6-c.length]+c+i:c+i,(a+=2)>=26&&(a-=26,o--)}for(0!==r&&(i=r.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var d=l[e],p=u[e];i="";var f=this.clone();for(f.negative=0;!f.isZero();){var m=f.modrn(p).toString(e);i=(f=f.idivn(p)).isZero()?m+i:h[d-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}s(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},r.prototype.toJSON=function(){return this.toString(16,2)},o&&(r.prototype.toBuffer=function(e,t){return this.toArrayLike(o,e,t)}),r.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function p(e,t,i){i.negative=t.negative^e.negative;var s=e.length+t.length|0;i.length=s,s=s-1|0;var a=0|e.words[0],r=0|t.words[0],o=a*r,n=67108863&o,c=o/67108864|0;i.words[0]=n;for(var d=1;d<s;d++){for(var h=c>>>26,l=67108863&c,u=Math.min(d,t.length-1),p=Math.max(0,d-e.length+1);p<=u;p++){var f=d-p|0;h+=(o=(a=0|e.words[f])*(r=0|t.words[p])+l)/67108864|0,l=67108863&o}i.words[d]=0|l,c=0|h}return 0!==c?i.words[d]=0|c:i.length--,i._strip()}r.prototype.toArrayLike=function(e,t,i){this._strip();var a=this.byteLength(),r=i||Math.max(1,a);s(a<=r,"byte array longer than desired length"),s(r>0,"Requested array length <= 0");var o=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,r);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,a),o},r.prototype._toArrayLikeLE=function(e,t){for(var i=0,s=0,a=0,r=0;a<this.length;a++){var o=this.words[a]<<r|s;e[i++]=255&o,i<e.length&&(e[i++]=o>>8&255),i<e.length&&(e[i++]=o>>16&255),6===r?(i<e.length&&(e[i++]=o>>24&255),s=0,r=0):(s=o>>>24,r+=2)}if(i<e.length)for(e[i++]=s;i<e.length;)e[i++]=0},r.prototype._toArrayLikeBE=function(e,t){for(var i=e.length-1,s=0,a=0,r=0;a<this.length;a++){var o=this.words[a]<<r|s;e[i--]=255&o,i>=0&&(e[i--]=o>>8&255),i>=0&&(e[i--]=o>>16&255),6===r?(i>=0&&(e[i--]=o>>24&255),s=0,r=0):(s=o>>>24,r+=2)}if(i>=0)for(e[i--]=s;i>=0;)e[i--]=0},Math.clz32?r.prototype._countBits=function(e){return 32-Math.clz32(e)}:r.prototype._countBits=function(e){var t=e,i=0;return t>=4096&&(i+=13,t>>>=13),t>=64&&(i+=7,t>>>=7),t>=8&&(i+=4,t>>>=4),t>=2&&(i+=2,t>>>=2),i+t},r.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,i=0;return 0==(8191&t)&&(i+=13,t>>>=13),0==(127&t)&&(i+=7,t>>>=7),0==(15&t)&&(i+=4,t>>>=4),0==(3&t)&&(i+=2,t>>>=2),0==(1&t)&&i++,i},r.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var i=this._zeroBits(this.words[t]);if(e+=i,26!==i)break}return e},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},r.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},r.prototype.ior=function(e){return s(0==(this.negative|e.negative)),this.iuor(e)},r.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},r.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},r.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]&e.words[i];return this.length=t.length,this._strip()},r.prototype.iand=function(e){return s(0==(this.negative|e.negative)),this.iuand(e)},r.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},r.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},r.prototype.iuxor=function(e){var t,i;this.length>e.length?(t=this,i=e):(t=e,i=this);for(var s=0;s<i.length;s++)this.words[s]=t.words[s]^i.words[s];if(this!==t)for(;s<t.length;s++)this.words[s]=t.words[s];return this.length=t.length,this._strip()},r.prototype.ixor=function(e){return s(0==(this.negative|e.negative)),this.iuxor(e)},r.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},r.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},r.prototype.inotn=function(e){s("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var a=0;a<t;a++)this.words[a]=67108863&~this.words[a];return i>0&&(this.words[a]=~this.words[a]&67108863>>26-i),this._strip()},r.prototype.notn=function(e){return this.clone().inotn(e)},r.prototype.setn=function(e,t){s("number"==typeof e&&e>=0);var i=e/26|0,a=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<a:this.words[i]&~(1<<a),this._strip()},r.prototype.iadd=function(e){var t,i,s;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(i=this,s=e):(i=e,s=this);for(var a=0,r=0;r<s.length;r++)t=(0|i.words[r])+(0|s.words[r])+a,this.words[r]=67108863&t,a=t>>>26;for(;0!==a&&r<i.length;r++)t=(0|i.words[r])+a,this.words[r]=67108863&t,a=t>>>26;if(this.length=i.length,0!==a)this.words[this.length]=a,this.length++;else if(i!==this)for(;r<i.length;r++)this.words[r]=i.words[r];return this},r.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},r.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i,s,a=this.cmp(e);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(i=this,s=e):(i=e,s=this);for(var r=0,o=0;o<s.length;o++)r=(t=(0|i.words[o])-(0|s.words[o])+r)>>26,this.words[o]=67108863&t;for(;0!==r&&o<i.length;o++)r=(t=(0|i.words[o])+r)>>26,this.words[o]=67108863&t;if(0===r&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this._strip()},r.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,i){var s,a,r,o=e.words,n=t.words,c=i.words,d=0,h=0|o[0],l=8191&h,u=h>>>13,p=0|o[1],f=8191&p,m=p>>>13,v=0|o[2],y=8191&v,g=v>>>13,b=0|o[3],w=8191&b,k=b>>>13,x=0|o[4],T=8191&x,O=x>>>13,_=0|o[5],S=8191&_,C=_>>>13,I=0|o[6],M=8191&I,F=I>>>13,E=0|o[7],A=8191&E,B=E>>>13,P=0|o[8],q=8191&P,V=P>>>13,L=0|o[9],D=8191&L,R=L>>>13,G=0|n[0],j=8191&G,N=G>>>13,H=0|n[1],U=8191&H,z=H>>>13,K=0|n[2],W=8191&K,X=K>>>13,Y=0|n[3],Q=8191&Y,Z=Y>>>13,J=0|n[4],$=8191&J,ee=J>>>13,te=0|n[5],ie=8191&te,se=te>>>13,ae=0|n[6],re=8191&ae,oe=ae>>>13,ne=0|n[7],ce=8191&ne,de=ne>>>13,he=0|n[8],le=8191&he,ue=he>>>13,pe=0|n[9],fe=8191&pe,me=pe>>>13;i.negative=e.negative^t.negative,i.length=19;var ve=(d+(s=Math.imul(l,j))|0)+((8191&(a=(a=Math.imul(l,N))+Math.imul(u,j)|0))<<13)|0;d=((r=Math.imul(u,N))+(a>>>13)|0)+(ve>>>26)|0,ve&=67108863,s=Math.imul(f,j),a=(a=Math.imul(f,N))+Math.imul(m,j)|0,r=Math.imul(m,N);var ye=(d+(s=s+Math.imul(l,U)|0)|0)+((8191&(a=(a=a+Math.imul(l,z)|0)+Math.imul(u,U)|0))<<13)|0;d=((r=r+Math.imul(u,z)|0)+(a>>>13)|0)+(ye>>>26)|0,ye&=67108863,s=Math.imul(y,j),a=(a=Math.imul(y,N))+Math.imul(g,j)|0,r=Math.imul(g,N),s=s+Math.imul(f,U)|0,a=(a=a+Math.imul(f,z)|0)+Math.imul(m,U)|0,r=r+Math.imul(m,z)|0;var ge=(d+(s=s+Math.imul(l,W)|0)|0)+((8191&(a=(a=a+Math.imul(l,X)|0)+Math.imul(u,W)|0))<<13)|0;d=((r=r+Math.imul(u,X)|0)+(a>>>13)|0)+(ge>>>26)|0,ge&=67108863,s=Math.imul(w,j),a=(a=Math.imul(w,N))+Math.imul(k,j)|0,r=Math.imul(k,N),s=s+Math.imul(y,U)|0,a=(a=a+Math.imul(y,z)|0)+Math.imul(g,U)|0,r=r+Math.imul(g,z)|0,s=s+Math.imul(f,W)|0,a=(a=a+Math.imul(f,X)|0)+Math.imul(m,W)|0,r=r+Math.imul(m,X)|0;var be=(d+(s=s+Math.imul(l,Q)|0)|0)+((8191&(a=(a=a+Math.imul(l,Z)|0)+Math.imul(u,Q)|0))<<13)|0;d=((r=r+Math.imul(u,Z)|0)+(a>>>13)|0)+(be>>>26)|0,be&=67108863,s=Math.imul(T,j),a=(a=Math.imul(T,N))+Math.imul(O,j)|0,r=Math.imul(O,N),s=s+Math.imul(w,U)|0,a=(a=a+Math.imul(w,z)|0)+Math.imul(k,U)|0,r=r+Math.imul(k,z)|0,s=s+Math.imul(y,W)|0,a=(a=a+Math.imul(y,X)|0)+Math.imul(g,W)|0,r=r+Math.imul(g,X)|0,s=s+Math.imul(f,Q)|0,a=(a=a+Math.imul(f,Z)|0)+Math.imul(m,Q)|0,r=r+Math.imul(m,Z)|0;var we=(d+(s=s+Math.imul(l,$)|0)|0)+((8191&(a=(a=a+Math.imul(l,ee)|0)+Math.imul(u,$)|0))<<13)|0;d=((r=r+Math.imul(u,ee)|0)+(a>>>13)|0)+(we>>>26)|0,we&=67108863,s=Math.imul(S,j),a=(a=Math.imul(S,N))+Math.imul(C,j)|0,r=Math.imul(C,N),s=s+Math.imul(T,U)|0,a=(a=a+Math.imul(T,z)|0)+Math.imul(O,U)|0,r=r+Math.imul(O,z)|0,s=s+Math.imul(w,W)|0,a=(a=a+Math.imul(w,X)|0)+Math.imul(k,W)|0,r=r+Math.imul(k,X)|0,s=s+Math.imul(y,Q)|0,a=(a=a+Math.imul(y,Z)|0)+Math.imul(g,Q)|0,r=r+Math.imul(g,Z)|0,s=s+Math.imul(f,$)|0,a=(a=a+Math.imul(f,ee)|0)+Math.imul(m,$)|0,r=r+Math.imul(m,ee)|0;var ke=(d+(s=s+Math.imul(l,ie)|0)|0)+((8191&(a=(a=a+Math.imul(l,se)|0)+Math.imul(u,ie)|0))<<13)|0;d=((r=r+Math.imul(u,se)|0)+(a>>>13)|0)+(ke>>>26)|0,ke&=67108863,s=Math.imul(M,j),a=(a=Math.imul(M,N))+Math.imul(F,j)|0,r=Math.imul(F,N),s=s+Math.imul(S,U)|0,a=(a=a+Math.imul(S,z)|0)+Math.imul(C,U)|0,r=r+Math.imul(C,z)|0,s=s+Math.imul(T,W)|0,a=(a=a+Math.imul(T,X)|0)+Math.imul(O,W)|0,r=r+Math.imul(O,X)|0,s=s+Math.imul(w,Q)|0,a=(a=a+Math.imul(w,Z)|0)+Math.imul(k,Q)|0,r=r+Math.imul(k,Z)|0,s=s+Math.imul(y,$)|0,a=(a=a+Math.imul(y,ee)|0)+Math.imul(g,$)|0,r=r+Math.imul(g,ee)|0,s=s+Math.imul(f,ie)|0,a=(a=a+Math.imul(f,se)|0)+Math.imul(m,ie)|0,r=r+Math.imul(m,se)|0;var xe=(d+(s=s+Math.imul(l,re)|0)|0)+((8191&(a=(a=a+Math.imul(l,oe)|0)+Math.imul(u,re)|0))<<13)|0;d=((r=r+Math.imul(u,oe)|0)+(a>>>13)|0)+(xe>>>26)|0,xe&=67108863,s=Math.imul(A,j),a=(a=Math.imul(A,N))+Math.imul(B,j)|0,r=Math.imul(B,N),s=s+Math.imul(M,U)|0,a=(a=a+Math.imul(M,z)|0)+Math.imul(F,U)|0,r=r+Math.imul(F,z)|0,s=s+Math.imul(S,W)|0,a=(a=a+Math.imul(S,X)|0)+Math.imul(C,W)|0,r=r+Math.imul(C,X)|0,s=s+Math.imul(T,Q)|0,a=(a=a+Math.imul(T,Z)|0)+Math.imul(O,Q)|0,r=r+Math.imul(O,Z)|0,s=s+Math.imul(w,$)|0,a=(a=a+Math.imul(w,ee)|0)+Math.imul(k,$)|0,r=r+Math.imul(k,ee)|0,s=s+Math.imul(y,ie)|0,a=(a=a+Math.imul(y,se)|0)+Math.imul(g,ie)|0,r=r+Math.imul(g,se)|0,s=s+Math.imul(f,re)|0,a=(a=a+Math.imul(f,oe)|0)+Math.imul(m,re)|0,r=r+Math.imul(m,oe)|0;var Te=(d+(s=s+Math.imul(l,ce)|0)|0)+((8191&(a=(a=a+Math.imul(l,de)|0)+Math.imul(u,ce)|0))<<13)|0;d=((r=r+Math.imul(u,de)|0)+(a>>>13)|0)+(Te>>>26)|0,Te&=67108863,s=Math.imul(q,j),a=(a=Math.imul(q,N))+Math.imul(V,j)|0,r=Math.imul(V,N),s=s+Math.imul(A,U)|0,a=(a=a+Math.imul(A,z)|0)+Math.imul(B,U)|0,r=r+Math.imul(B,z)|0,s=s+Math.imul(M,W)|0,a=(a=a+Math.imul(M,X)|0)+Math.imul(F,W)|0,r=r+Math.imul(F,X)|0,s=s+Math.imul(S,Q)|0,a=(a=a+Math.imul(S,Z)|0)+Math.imul(C,Q)|0,r=r+Math.imul(C,Z)|0,s=s+Math.imul(T,$)|0,a=(a=a+Math.imul(T,ee)|0)+Math.imul(O,$)|0,r=r+Math.imul(O,ee)|0,s=s+Math.imul(w,ie)|0,a=(a=a+Math.imul(w,se)|0)+Math.imul(k,ie)|0,r=r+Math.imul(k,se)|0,s=s+Math.imul(y,re)|0,a=(a=a+Math.imul(y,oe)|0)+Math.imul(g,re)|0,r=r+Math.imul(g,oe)|0,s=s+Math.imul(f,ce)|0,a=(a=a+Math.imul(f,de)|0)+Math.imul(m,ce)|0,r=r+Math.imul(m,de)|0;var Oe=(d+(s=s+Math.imul(l,le)|0)|0)+((8191&(a=(a=a+Math.imul(l,ue)|0)+Math.imul(u,le)|0))<<13)|0;d=((r=r+Math.imul(u,ue)|0)+(a>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,s=Math.imul(D,j),a=(a=Math.imul(D,N))+Math.imul(R,j)|0,r=Math.imul(R,N),s=s+Math.imul(q,U)|0,a=(a=a+Math.imul(q,z)|0)+Math.imul(V,U)|0,r=r+Math.imul(V,z)|0,s=s+Math.imul(A,W)|0,a=(a=a+Math.imul(A,X)|0)+Math.imul(B,W)|0,r=r+Math.imul(B,X)|0,s=s+Math.imul(M,Q)|0,a=(a=a+Math.imul(M,Z)|0)+Math.imul(F,Q)|0,r=r+Math.imul(F,Z)|0,s=s+Math.imul(S,$)|0,a=(a=a+Math.imul(S,ee)|0)+Math.imul(C,$)|0,r=r+Math.imul(C,ee)|0,s=s+Math.imul(T,ie)|0,a=(a=a+Math.imul(T,se)|0)+Math.imul(O,ie)|0,r=r+Math.imul(O,se)|0,s=s+Math.imul(w,re)|0,a=(a=a+Math.imul(w,oe)|0)+Math.imul(k,re)|0,r=r+Math.imul(k,oe)|0,s=s+Math.imul(y,ce)|0,a=(a=a+Math.imul(y,de)|0)+Math.imul(g,ce)|0,r=r+Math.imul(g,de)|0,s=s+Math.imul(f,le)|0,a=(a=a+Math.imul(f,ue)|0)+Math.imul(m,le)|0,r=r+Math.imul(m,ue)|0;var _e=(d+(s=s+Math.imul(l,fe)|0)|0)+((8191&(a=(a=a+Math.imul(l,me)|0)+Math.imul(u,fe)|0))<<13)|0;d=((r=r+Math.imul(u,me)|0)+(a>>>13)|0)+(_e>>>26)|0,_e&=67108863,s=Math.imul(D,U),a=(a=Math.imul(D,z))+Math.imul(R,U)|0,r=Math.imul(R,z),s=s+Math.imul(q,W)|0,a=(a=a+Math.imul(q,X)|0)+Math.imul(V,W)|0,r=r+Math.imul(V,X)|0,s=s+Math.imul(A,Q)|0,a=(a=a+Math.imul(A,Z)|0)+Math.imul(B,Q)|0,r=r+Math.imul(B,Z)|0,s=s+Math.imul(M,$)|0,a=(a=a+Math.imul(M,ee)|0)+Math.imul(F,$)|0,r=r+Math.imul(F,ee)|0,s=s+Math.imul(S,ie)|0,a=(a=a+Math.imul(S,se)|0)+Math.imul(C,ie)|0,r=r+Math.imul(C,se)|0,s=s+Math.imul(T,re)|0,a=(a=a+Math.imul(T,oe)|0)+Math.imul(O,re)|0,r=r+Math.imul(O,oe)|0,s=s+Math.imul(w,ce)|0,a=(a=a+Math.imul(w,de)|0)+Math.imul(k,ce)|0,r=r+Math.imul(k,de)|0,s=s+Math.imul(y,le)|0,a=(a=a+Math.imul(y,ue)|0)+Math.imul(g,le)|0,r=r+Math.imul(g,ue)|0;var Se=(d+(s=s+Math.imul(f,fe)|0)|0)+((8191&(a=(a=a+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;d=((r=r+Math.imul(m,me)|0)+(a>>>13)|0)+(Se>>>26)|0,Se&=67108863,s=Math.imul(D,W),a=(a=Math.imul(D,X))+Math.imul(R,W)|0,r=Math.imul(R,X),s=s+Math.imul(q,Q)|0,a=(a=a+Math.imul(q,Z)|0)+Math.imul(V,Q)|0,r=r+Math.imul(V,Z)|0,s=s+Math.imul(A,$)|0,a=(a=a+Math.imul(A,ee)|0)+Math.imul(B,$)|0,r=r+Math.imul(B,ee)|0,s=s+Math.imul(M,ie)|0,a=(a=a+Math.imul(M,se)|0)+Math.imul(F,ie)|0,r=r+Math.imul(F,se)|0,s=s+Math.imul(S,re)|0,a=(a=a+Math.imul(S,oe)|0)+Math.imul(C,re)|0,r=r+Math.imul(C,oe)|0,s=s+Math.imul(T,ce)|0,a=(a=a+Math.imul(T,de)|0)+Math.imul(O,ce)|0,r=r+Math.imul(O,de)|0,s=s+Math.imul(w,le)|0,a=(a=a+Math.imul(w,ue)|0)+Math.imul(k,le)|0,r=r+Math.imul(k,ue)|0;var Ce=(d+(s=s+Math.imul(y,fe)|0)|0)+((8191&(a=(a=a+Math.imul(y,me)|0)+Math.imul(g,fe)|0))<<13)|0;d=((r=r+Math.imul(g,me)|0)+(a>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,s=Math.imul(D,Q),a=(a=Math.imul(D,Z))+Math.imul(R,Q)|0,r=Math.imul(R,Z),s=s+Math.imul(q,$)|0,a=(a=a+Math.imul(q,ee)|0)+Math.imul(V,$)|0,r=r+Math.imul(V,ee)|0,s=s+Math.imul(A,ie)|0,a=(a=a+Math.imul(A,se)|0)+Math.imul(B,ie)|0,r=r+Math.imul(B,se)|0,s=s+Math.imul(M,re)|0,a=(a=a+Math.imul(M,oe)|0)+Math.imul(F,re)|0,r=r+Math.imul(F,oe)|0,s=s+Math.imul(S,ce)|0,a=(a=a+Math.imul(S,de)|0)+Math.imul(C,ce)|0,r=r+Math.imul(C,de)|0,s=s+Math.imul(T,le)|0,a=(a=a+Math.imul(T,ue)|0)+Math.imul(O,le)|0,r=r+Math.imul(O,ue)|0;var Ie=(d+(s=s+Math.imul(w,fe)|0)|0)+((8191&(a=(a=a+Math.imul(w,me)|0)+Math.imul(k,fe)|0))<<13)|0;d=((r=r+Math.imul(k,me)|0)+(a>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,s=Math.imul(D,$),a=(a=Math.imul(D,ee))+Math.imul(R,$)|0,r=Math.imul(R,ee),s=s+Math.imul(q,ie)|0,a=(a=a+Math.imul(q,se)|0)+Math.imul(V,ie)|0,r=r+Math.imul(V,se)|0,s=s+Math.imul(A,re)|0,a=(a=a+Math.imul(A,oe)|0)+Math.imul(B,re)|0,r=r+Math.imul(B,oe)|0,s=s+Math.imul(M,ce)|0,a=(a=a+Math.imul(M,de)|0)+Math.imul(F,ce)|0,r=r+Math.imul(F,de)|0,s=s+Math.imul(S,le)|0,a=(a=a+Math.imul(S,ue)|0)+Math.imul(C,le)|0,r=r+Math.imul(C,ue)|0;var Me=(d+(s=s+Math.imul(T,fe)|0)|0)+((8191&(a=(a=a+Math.imul(T,me)|0)+Math.imul(O,fe)|0))<<13)|0;d=((r=r+Math.imul(O,me)|0)+(a>>>13)|0)+(Me>>>26)|0,Me&=67108863,s=Math.imul(D,ie),a=(a=Math.imul(D,se))+Math.imul(R,ie)|0,r=Math.imul(R,se),s=s+Math.imul(q,re)|0,a=(a=a+Math.imul(q,oe)|0)+Math.imul(V,re)|0,r=r+Math.imul(V,oe)|0,s=s+Math.imul(A,ce)|0,a=(a=a+Math.imul(A,de)|0)+Math.imul(B,ce)|0,r=r+Math.imul(B,de)|0,s=s+Math.imul(M,le)|0,a=(a=a+Math.imul(M,ue)|0)+Math.imul(F,le)|0,r=r+Math.imul(F,ue)|0;var Fe=(d+(s=s+Math.imul(S,fe)|0)|0)+((8191&(a=(a=a+Math.imul(S,me)|0)+Math.imul(C,fe)|0))<<13)|0;d=((r=r+Math.imul(C,me)|0)+(a>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,s=Math.imul(D,re),a=(a=Math.imul(D,oe))+Math.imul(R,re)|0,r=Math.imul(R,oe),s=s+Math.imul(q,ce)|0,a=(a=a+Math.imul(q,de)|0)+Math.imul(V,ce)|0,r=r+Math.imul(V,de)|0,s=s+Math.imul(A,le)|0,a=(a=a+Math.imul(A,ue)|0)+Math.imul(B,le)|0,r=r+Math.imul(B,ue)|0;var Ee=(d+(s=s+Math.imul(M,fe)|0)|0)+((8191&(a=(a=a+Math.imul(M,me)|0)+Math.imul(F,fe)|0))<<13)|0;d=((r=r+Math.imul(F,me)|0)+(a>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,s=Math.imul(D,ce),a=(a=Math.imul(D,de))+Math.imul(R,ce)|0,r=Math.imul(R,de),s=s+Math.imul(q,le)|0,a=(a=a+Math.imul(q,ue)|0)+Math.imul(V,le)|0,r=r+Math.imul(V,ue)|0;var Ae=(d+(s=s+Math.imul(A,fe)|0)|0)+((8191&(a=(a=a+Math.imul(A,me)|0)+Math.imul(B,fe)|0))<<13)|0;d=((r=r+Math.imul(B,me)|0)+(a>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,s=Math.imul(D,le),a=(a=Math.imul(D,ue))+Math.imul(R,le)|0,r=Math.imul(R,ue);var Be=(d+(s=s+Math.imul(q,fe)|0)|0)+((8191&(a=(a=a+Math.imul(q,me)|0)+Math.imul(V,fe)|0))<<13)|0;d=((r=r+Math.imul(V,me)|0)+(a>>>13)|0)+(Be>>>26)|0,Be&=67108863;var Pe=(d+(s=Math.imul(D,fe))|0)+((8191&(a=(a=Math.imul(D,me))+Math.imul(R,fe)|0))<<13)|0;return d=((r=Math.imul(R,me))+(a>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,c[0]=ve,c[1]=ye,c[2]=ge,c[3]=be,c[4]=we,c[5]=ke,c[6]=xe,c[7]=Te,c[8]=Oe,c[9]=_e,c[10]=Se,c[11]=Ce,c[12]=Ie,c[13]=Me,c[14]=Fe,c[15]=Ee,c[16]=Ae,c[17]=Be,c[18]=Pe,0!==d&&(c[19]=d,i.length++),i};function m(e,t,i){i.negative=t.negative^e.negative,i.length=e.length+t.length;for(var s=0,a=0,r=0;r<i.length-1;r++){var o=a;a=0;for(var n=67108863&s,c=Math.min(r,t.length-1),d=Math.max(0,r-e.length+1);d<=c;d++){var h=r-d,l=(0|e.words[h])*(0|t.words[d]),u=67108863&l;n=67108863&(u=u+n|0),a+=(o=(o=o+(l/67108864|0)|0)+(u>>>26)|0)>>>26,o&=67108863}i.words[r]=n,s=o,o=a}return 0!==s?i.words[r]=s:i.length--,i._strip()}function v(e,t,i){return m(e,t,i)}function y(e,t){this.x=e,this.y=t}Math.imul||(f=p),r.prototype.mulTo=function(e,t){var i=this.length+e.length;return 10===this.length&&10===e.length?f(this,e,t):i<63?p(this,e,t):i<1024?m(this,e,t):v(this,e,t)},y.prototype.makeRBT=function(e){for(var t=new Array(e),i=r.prototype._countBits(e)-1,s=0;s<e;s++)t[s]=this.revBin(s,i,e);return t},y.prototype.revBin=function(e,t,i){if(0===e||e===i-1)return e;for(var s=0,a=0;a<t;a++)s|=(1&e)<<t-a-1,e>>=1;return s},y.prototype.permute=function(e,t,i,s,a,r){for(var o=0;o<r;o++)s[o]=t[e[o]],a[o]=i[e[o]]},y.prototype.transform=function(e,t,i,s,a,r){this.permute(r,e,t,i,s,a);for(var o=1;o<a;o<<=1)for(var n=o<<1,c=Math.cos(2*Math.PI/n),d=Math.sin(2*Math.PI/n),h=0;h<a;h+=n)for(var l=c,u=d,p=0;p<o;p++){var f=i[h+p],m=s[h+p],v=i[h+p+o],y=s[h+p+o],g=l*v-u*y;y=l*y+u*v,v=g,i[h+p]=f+v,s[h+p]=m+y,i[h+p+o]=f-v,s[h+p+o]=m-y,p!==n&&(g=c*l-d*u,u=c*u+d*l,l=g)}},y.prototype.guessLen13b=function(e,t){var i=1|Math.max(t,e),s=1&i,a=0;for(i=i/2|0;i;i>>>=1)a++;return 1<<a+1+s},y.prototype.conjugate=function(e,t,i){if(!(i<=1))for(var s=0;s<i/2;s++){var a=e[s];e[s]=e[i-s-1],e[i-s-1]=a,a=t[s],t[s]=-t[i-s-1],t[i-s-1]=-a}},y.prototype.normalize13b=function(e,t){for(var i=0,s=0;s<t/2;s++){var a=8192*Math.round(e[2*s+1]/t)+Math.round(e[2*s]/t)+i;e[s]=67108863&a,i=a<67108864?0:a/67108864|0}return e},y.prototype.convert13b=function(e,t,i,a){for(var r=0,o=0;o<t;o++)r+=0|e[o],i[2*o]=8191&r,r>>>=13,i[2*o+1]=8191&r,r>>>=13;for(o=2*t;o<a;++o)i[o]=0;s(0===r),s(0==(-8192&r))},y.prototype.stub=function(e){for(var t=new Array(e),i=0;i<e;i++)t[i]=0;return t},y.prototype.mulp=function(e,t,i){var s=2*this.guessLen13b(e.length,t.length),a=this.makeRBT(s),r=this.stub(s),o=new Array(s),n=new Array(s),c=new Array(s),d=new Array(s),h=new Array(s),l=new Array(s),u=i.words;u.length=s,this.convert13b(e.words,e.length,o,s),this.convert13b(t.words,t.length,d,s),this.transform(o,r,n,c,s,a),this.transform(d,r,h,l,s,a);for(var p=0;p<s;p++){var f=n[p]*h[p]-c[p]*l[p];c[p]=n[p]*l[p]+c[p]*h[p],n[p]=f}return this.conjugate(n,c,s),this.transform(n,c,u,r,s,a),this.conjugate(u,r,s),this.normalize13b(u,s),i.negative=e.negative^t.negative,i.length=e.length+t.length,i._strip()},r.prototype.mul=function(e){var t=new r(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},r.prototype.mulf=function(e){var t=new r(null);return t.words=new Array(this.length+e.length),v(this,e,t)},r.prototype.imul=function(e){return this.clone().mulTo(e,this)},r.prototype.imuln=function(e){var t=e<0;t&&(e=-e),s("number"==typeof e),s(e<67108864);for(var i=0,a=0;a<this.length;a++){var r=(0|this.words[a])*e,o=(67108863&r)+(67108863&i);i>>=26,i+=r/67108864|0,i+=o>>>26,this.words[a]=67108863&o}return 0!==i&&(this.words[a]=i,this.length++),t?this.ineg():this},r.prototype.muln=function(e){return this.clone().imuln(e)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),i=0;i<t.length;i++){var s=i/26|0,a=i%26;t[i]=e.words[s]>>>a&1}return t}(e);if(0===t.length)return new r(1);for(var i=this,s=0;s<t.length&&0===t[s];s++,i=i.sqr());if(++s<t.length)for(var a=i.sqr();s<t.length;s++,a=a.sqr())0!==t[s]&&(i=i.mul(a));return i},r.prototype.iushln=function(e){s("number"==typeof e&&e>=0);var t,i=e%26,a=(e-i)/26,r=67108863>>>26-i<<26-i;if(0!==i){var o=0;for(t=0;t<this.length;t++){var n=this.words[t]&r,c=(0|this.words[t])-n<<i;this.words[t]=c|o,o=n>>>26-i}o&&(this.words[t]=o,this.length++)}if(0!==a){for(t=this.length-1;t>=0;t--)this.words[t+a]=this.words[t];for(t=0;t<a;t++)this.words[t]=0;this.length+=a}return this._strip()},r.prototype.ishln=function(e){return s(0===this.negative),this.iushln(e)},r.prototype.iushrn=function(e,t,i){var a;s("number"==typeof e&&e>=0),a=t?(t-t%26)/26:0;var r=e%26,o=Math.min((e-r)/26,this.length),n=67108863^67108863>>>r<<r,c=i;if(a-=o,a=Math.max(0,a),c){for(var d=0;d<o;d++)c.words[d]=this.words[d];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,d=0;d<this.length;d++)this.words[d]=this.words[d+o];else this.words[0]=0,this.length=1;var h=0;for(d=this.length-1;d>=0&&(0!==h||d>=a);d--){var l=0|this.words[d];this.words[d]=h<<26-r|l>>>r,h=l&n}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},r.prototype.ishrn=function(e,t,i){return s(0===this.negative),this.iushrn(e,t,i)},r.prototype.shln=function(e){return this.clone().ishln(e)},r.prototype.ushln=function(e){return this.clone().iushln(e)},r.prototype.shrn=function(e){return this.clone().ishrn(e)},r.prototype.ushrn=function(e){return this.clone().iushrn(e)},r.prototype.testn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,a=1<<t;return!(this.length<=i)&&!!(this.words[i]&a)},r.prototype.imaskn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var a=67108863^67108863>>>t<<t;this.words[this.length-1]&=a}return this._strip()},r.prototype.maskn=function(e){return this.clone().imaskn(e)},r.prototype.iaddn=function(e){return s("number"==typeof e),s(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},r.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},r.prototype.isubn=function(e){if(s("number"==typeof e),s(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},r.prototype.addn=function(e){return this.clone().iaddn(e)},r.prototype.subn=function(e){return this.clone().isubn(e)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(e,t,i){var a,r,o=e.length+i;this._expand(o);var n=0;for(a=0;a<e.length;a++){r=(0|this.words[a+i])+n;var c=(0|e.words[a])*t;n=((r-=67108863&c)>>26)-(c/67108864|0),this.words[a+i]=67108863&r}for(;a<this.length-i;a++)n=(r=(0|this.words[a+i])+n)>>26,this.words[a+i]=67108863&r;if(0===n)return this._strip();for(s(-1===n),n=0,a=0;a<this.length;a++)n=(r=-(0|this.words[a])+n)>>26,this.words[a]=67108863&r;return this.negative=1,this._strip()},r.prototype._wordDiv=function(e,t){var i=(this.length,e.length),s=this.clone(),a=e,o=0|a.words[a.length-1];0!==(i=26-this._countBits(o))&&(a=a.ushln(i),s.iushln(i),o=0|a.words[a.length-1]);var n,c=s.length-a.length;if("mod"!==t){(n=new r(null)).length=c+1,n.words=new Array(n.length);for(var d=0;d<n.length;d++)n.words[d]=0}var h=s.clone()._ishlnsubmul(a,1,c);0===h.negative&&(s=h,n&&(n.words[c]=1));for(var l=c-1;l>=0;l--){var u=67108864*(0|s.words[a.length+l])+(0|s.words[a.length+l-1]);for(u=Math.min(u/o|0,67108863),s._ishlnsubmul(a,u,l);0!==s.negative;)u--,s.negative=0,s._ishlnsubmul(a,1,l),s.isZero()||(s.negative^=1);n&&(n.words[l]=u)}return n&&n._strip(),s._strip(),"div"!==t&&0!==i&&s.iushrn(i),{div:n||null,mod:s}},r.prototype.divmod=function(e,t,i){return s(!e.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===e.negative?(n=this.neg().divmod(e,t),"mod"!==t&&(a=n.div.neg()),"div"!==t&&(o=n.mod.neg(),i&&0!==o.negative&&o.iadd(e)),{div:a,mod:o}):0===this.negative&&0!==e.negative?(n=this.divmod(e.neg(),t),"mod"!==t&&(a=n.div.neg()),{div:a,mod:n.mod}):0!=(this.negative&e.negative)?(n=this.neg().divmod(e.neg(),t),"div"!==t&&(o=n.mod.neg(),i&&0!==o.negative&&o.isub(e)),{div:n.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new r(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new r(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new r(this.modrn(e.words[0]))}:this._wordDiv(e,t);var a,o,n},r.prototype.div=function(e){return this.divmod(e,"div",!1).div},r.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},r.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},r.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var i=0!==t.div.negative?t.mod.isub(e):t.mod,s=e.ushrn(1),a=e.andln(1),r=i.cmp(s);return r<0||1===a&&0===r?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},r.prototype.modrn=function(e){var t=e<0;t&&(e=-e),s(e<=67108863);for(var i=(1<<26)%e,a=0,r=this.length-1;r>=0;r--)a=(i*a+(0|this.words[r]))%e;return t?-a:a},r.prototype.modn=function(e){return this.modrn(e)},r.prototype.idivn=function(e){var t=e<0;t&&(e=-e),s(e<=67108863);for(var i=0,a=this.length-1;a>=0;a--){var r=(0|this.words[a])+67108864*i;this.words[a]=r/e|0,i=r%e}return this._strip(),t?this.ineg():this},r.prototype.divn=function(e){return this.clone().idivn(e)},r.prototype.egcd=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a=new r(1),o=new r(0),n=new r(0),c=new r(1),d=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++d;for(var h=i.clone(),l=t.clone();!t.isZero();){for(var u=0,p=1;0==(t.words[0]&p)&&u<26;++u,p<<=1);if(u>0)for(t.iushrn(u);u-- >0;)(a.isOdd()||o.isOdd())&&(a.iadd(h),o.isub(l)),a.iushrn(1),o.iushrn(1);for(var f=0,m=1;0==(i.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(i.iushrn(f);f-- >0;)(n.isOdd()||c.isOdd())&&(n.iadd(h),c.isub(l)),n.iushrn(1),c.iushrn(1);t.cmp(i)>=0?(t.isub(i),a.isub(n),o.isub(c)):(i.isub(t),n.isub(a),c.isub(o))}return{a:n,b:c,gcd:i.iushln(d)}},r.prototype._invmp=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a,o=new r(1),n=new r(0),c=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var d=0,h=1;0==(t.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(t.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var l=0,u=1;0==(i.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(i.iushrn(l);l-- >0;)n.isOdd()&&n.iadd(c),n.iushrn(1);t.cmp(i)>=0?(t.isub(i),o.isub(n)):(i.isub(t),n.isub(o))}return(a=0===t.cmpn(1)?o:n).cmpn(0)<0&&a.iadd(e),a},r.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),i=e.clone();t.negative=0,i.negative=0;for(var s=0;t.isEven()&&i.isEven();s++)t.iushrn(1),i.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;i.isEven();)i.iushrn(1);var a=t.cmp(i);if(a<0){var r=t;t=i,i=r}else if(0===a||0===i.cmpn(1))break;t.isub(i)}return i.iushln(s)},r.prototype.invm=function(e){return this.egcd(e).a.umod(e)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(e){return this.words[0]&e},r.prototype.bincn=function(e){s("number"==typeof e);var t=e%26,i=(e-t)/26,a=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=a,this;for(var r=a,o=i;0!==r&&o<this.length;o++){var n=0|this.words[o];r=(n+=r)>>>26,n&=67108863,this.words[o]=n}return 0!==r&&(this.words[o]=r,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)t=1;else{i&&(e=-e),s(e<=67108863,"Number is too big");var a=0|this.words[0];t=a===e?0:a<e?-1:1}return 0!==this.negative?0|-t:t},r.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},r.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,i=this.length-1;i>=0;i--){var s=0|this.words[i],a=0|e.words[i];if(s!==a){s<a?t=-1:s>a&&(t=1);break}}return t},r.prototype.gtn=function(e){return 1===this.cmpn(e)},r.prototype.gt=function(e){return 1===this.cmp(e)},r.prototype.gten=function(e){return this.cmpn(e)>=0},r.prototype.gte=function(e){return this.cmp(e)>=0},r.prototype.ltn=function(e){return-1===this.cmpn(e)},r.prototype.lt=function(e){return-1===this.cmp(e)},r.prototype.lten=function(e){return this.cmpn(e)<=0},r.prototype.lte=function(e){return this.cmp(e)<=0},r.prototype.eqn=function(e){return 0===this.cmpn(e)},r.prototype.eq=function(e){return 0===this.cmp(e)},r.red=function(e){return new O(e)},r.prototype.toRed=function(e){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},r.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(e){return this.red=e,this},r.prototype.forceRed=function(e){return s(!this.red,"Already a number in reduction context"),this._forceRed(e)},r.prototype.redAdd=function(e){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},r.prototype.redIAdd=function(e){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},r.prototype.redSub=function(e){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},r.prototype.redISub=function(e){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},r.prototype.redShl=function(e){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},r.prototype.redMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},r.prototype.redIMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},r.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(e){return s(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new r(t,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function T(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function O(e){if("string"==typeof e){var t=r._prime(e);this.m=t.p,this.prime=t}else s(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function _(e){O.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new r(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,i=e;do{this.split(i,this.tmp),t=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(t>this.n);var s=t<this.n?-1:i.ucmp(this.p);return 0===s?(i.words[0]=0,i.length=1):s>0?i.isub(this.p):i._strip(),i},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},a(w,b),w.prototype.split=function(e,t){for(var i=Math.min(e.length,9),s=0;s<i;s++)t.words[s]=e.words[s];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=4194303&a,s=10;s<e.length;s++){var r=0|e.words[s];e.words[s-10]=(4194303&r)<<4|a>>>22,a=r}a>>>=22,e.words[s-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},w.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,i=0;i<e.length;i++){var s=0|e.words[i];t+=977*s,e.words[i]=67108863&t,t=64*s+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},a(k,b),a(x,b),a(T,b),T.prototype.imulK=function(e){for(var t=0,i=0;i<e.length;i++){var s=19*(0|e.words[i])+t,a=67108863&s;s>>>=26,e.words[i]=a,t=s}return 0!==t&&(e.words[e.length++]=t),e},r._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new w;else if("p224"===e)t=new k;else if("p192"===e)t=new x;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new T}return g[e]=t,t},O.prototype._verify1=function(e){s(0===e.negative,"red works only with positives"),s(e.red,"red works only with red numbers")},O.prototype._verify2=function(e,t){s(0==(e.negative|t.negative),"red works only with positives"),s(e.red&&e.red===t.red,"red works only with red numbers")},O.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(e.umod(this.m)._forceRed(this)._move(e),e)},O.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},O.prototype.add=function(e,t){this._verify2(e,t);var i=e.add(t);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},O.prototype.iadd=function(e,t){this._verify2(e,t);var i=e.iadd(t);return i.cmp(this.m)>=0&&i.isub(this.m),i},O.prototype.sub=function(e,t){this._verify2(e,t);var i=e.sub(t);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},O.prototype.isub=function(e,t){this._verify2(e,t);var i=e.isub(t);return i.cmpn(0)<0&&i.iadd(this.m),i},O.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},O.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},O.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},O.prototype.isqr=function(e){return this.imul(e,e.clone())},O.prototype.sqr=function(e){return this.mul(e,e)},O.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(s(t%2==1),3===t){var i=this.m.add(new r(1)).iushrn(2);return this.pow(e,i)}for(var a=this.m.subn(1),o=0;!a.isZero()&&0===a.andln(1);)o++,a.iushrn(1);s(!a.isZero());var n=new r(1).toRed(this),c=n.redNeg(),d=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new r(2*h*h).toRed(this);0!==this.pow(h,d).cmp(c);)h.redIAdd(c);for(var l=this.pow(h,a),u=this.pow(e,a.addn(1).iushrn(1)),p=this.pow(e,a),f=o;0!==p.cmp(n);){for(var m=p,v=0;0!==m.cmp(n);v++)m=m.redSqr();s(v<f);var y=this.pow(l,new r(1).iushln(f-v-1));u=u.redMul(y),l=y.redSqr(),p=p.redMul(l),f=v}return u},O.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},O.prototype.pow=function(e,t){if(t.isZero())return new r(1).toRed(this);if(0===t.cmpn(1))return e.clone();var i=new Array(16);i[0]=new r(1).toRed(this),i[1]=e;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],e);var a=i[0],o=0,n=0,c=t.bitLength()%26;for(0===c&&(c=26),s=t.length-1;s>=0;s--){for(var d=t.words[s],h=c-1;h>=0;h--){var l=d>>h&1;a!==i[0]&&(a=this.sqr(a)),0!==l||0!==o?(o<<=1,o|=l,(4===++n||0===s&&0===h)&&(a=this.mul(a,i[o]),n=0,o=0)):n=0}c=26}return a},O.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},O.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},r.mont=function(e){return new _(e)},a(_,O),_.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},_.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},_.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var i=e.imul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=i.isub(s).iushrn(this.shift),r=a;return a.cmp(this.m)>=0?r=a.isub(this.m):a.cmpn(0)<0&&(r=a.iadd(this.m)),r._forceRed(this)},_.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new r(0)._forceRed(this);var i=e.mul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=i.isub(s).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},_.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,i(69)(e))},function(e,t,i){const s=i(72);e.exports=async(e,t,i,a=!1)=>{if(!s.exchanges.includes(e))throw"Exchange is not supported";try{let r,o=s[e];return r=new o(a?{options:{defaultMarket:"future"}}:{}),await r.fetchOHLCV(t,i)}catch(e){throw"Ticker is not supported"}}},function(e,t,i){"undefined"!=typeof process&&"renderer"===process.type?e.exports=i(107):e.exports=i(109)},function(e,t){e.exports.linebrk=function(e,t){for(var i="",s=0;s+t<e.length;)i+=e.substring(s,s+t)+"\n",s+=t;return i+e.substring(s,e.length)},e.exports.get32IntFromBuffer=function(e,t){t=t||0;var i;if((i=e.length-t)>0){if(i>=4)return e.readUInt32BE(t);for(var s=0,a=t+i,r=0;a>t;a--,r+=2)s+=e[a-1]*Math.pow(16,r);return s}return NaN},e.exports._={isObject:function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)},isString:function(e){return"string"==typeof e||e instanceof String},isNumber:function(e){return"number"==typeof e||!isNaN(parseFloat(e))&&isFinite(e)},omit:function(e,t){var i={};for(var s in e)e.hasOwnProperty(s)&&s!==t&&(i[s]=e[s]);return i}},e.exports.trimSurroundingText=function(e,t,i){var s=0,a=e.length,r=e.indexOf(t);r>=0&&(s=r+t.length);var o=e.indexOf(i,r);return o>=0&&(a=o),e.substring(s,a)}},function(e,t,i){"use strict";var s=t;s.inherits=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e},s.version="6.5.0",s.utils=i(18),s.curve=i(35),s.curves=i(82),s.ec=i(201),s.eddsa=i(205)},function(e,t){e.exports=e=>{let t=[];return t.open=[],t.high=[],t.low=[],t.close=[],t.volume=[],0==e.length||e.forEach(e=>{t.open.push(e[1]),t.high.push(e[2]),t.low.push(e[3]),t.close.push(e[4]),t.volume.push(e[5])}),t}},function(e,t,i){"use strict";i.r(t),i.d(t,"CandleData",(function(){return o})),i.d(t,"CandleList",(function(){return n})),i.d(t,"sma",(function(){return m})),i.d(t,"SMA",(function(){return f})),i.d(t,"ema",(function(){return y})),i.d(t,"EMA",(function(){return v})),i.d(t,"wma",(function(){return b})),i.d(t,"WMA",(function(){return g})),i.d(t,"wema",(function(){return k})),i.d(t,"WEMA",(function(){return w})),i.d(t,"macd",(function(){return T})),i.d(t,"MACD",(function(){return x})),i.d(t,"rsi",(function(){return M})),i.d(t,"RSI",(function(){return I})),i.d(t,"bollingerbands",(function(){return B})),i.d(t,"BollingerBands",(function(){return A})),i.d(t,"adx",(function(){return G})),i.d(t,"ADX",(function(){return R})),i.d(t,"atr",(function(){return N})),i.d(t,"ATR",(function(){return j})),i.d(t,"truerange",(function(){return D})),i.d(t,"TrueRange",(function(){return L})),i.d(t,"roc",(function(){return U})),i.d(t,"ROC",(function(){return H})),i.d(t,"kst",(function(){return K})),i.d(t,"KST",(function(){return z})),i.d(t,"psar",(function(){return X})),i.d(t,"PSAR",(function(){return W})),i.d(t,"stochastic",(function(){return Q})),i.d(t,"Stochastic",(function(){return Y})),i.d(t,"williamsr",(function(){return J})),i.d(t,"WilliamsR",(function(){return Z})),i.d(t,"adl",(function(){return ee})),i.d(t,"ADL",(function(){return $})),i.d(t,"obv",(function(){return ie})),i.d(t,"OBV",(function(){return te})),i.d(t,"trix",(function(){return ae})),i.d(t,"TRIX",(function(){return se})),i.d(t,"forceindex",(function(){return oe})),i.d(t,"ForceIndex",(function(){return re})),i.d(t,"cci",(function(){return ce})),i.d(t,"CCI",(function(){return ne})),i.d(t,"awesomeoscillator",(function(){return he})),i.d(t,"AwesomeOscillator",(function(){return de})),i.d(t,"vwap",(function(){return ue})),i.d(t,"VWAP",(function(){return le})),i.d(t,"volumeprofile",(function(){return fe})),i.d(t,"VolumeProfile",(function(){return pe})),i.d(t,"mfi",(function(){return ye})),i.d(t,"MFI",(function(){return ve})),i.d(t,"stochasticrsi",(function(){return be})),i.d(t,"StochasticRSI",(function(){return ge})),i.d(t,"averagegain",(function(){return _})),i.d(t,"AverageGain",(function(){return O})),i.d(t,"averageloss",(function(){return C})),i.d(t,"AverageLoss",(function(){return S})),i.d(t,"sd",(function(){return E})),i.d(t,"SD",(function(){return F})),i.d(t,"highest",(function(){return ke})),i.d(t,"Highest",(function(){return we})),i.d(t,"lowest",(function(){return Te})),i.d(t,"Lowest",(function(){return xe})),i.d(t,"sum",(function(){return _e})),i.d(t,"Sum",(function(){return Oe})),i.d(t,"FixedSizeLinkedList",(function(){return r})),i.d(t,"renko",(function(){return Ce})),i.d(t,"HeikinAshi",(function(){return Ie})),i.d(t,"heikinashi",(function(){return Me})),i.d(t,"bullish",(function(){return pt})),i.d(t,"bearish",(function(){return Gt})),i.d(t,"abandonedbaby",(function(){return Nt})),i.d(t,"doji",(function(){return Ge})),i.d(t,"bearishengulfingpattern",(function(){return mt})),i.d(t,"bullishengulfingpattern",(function(){return Pe})),i.d(t,"darkcloudcover",(function(){return Ut})),i.d(t,"downsidetasukigap",(function(){return Ue})),i.d(t,"dragonflydoji",(function(){return Kt})),i.d(t,"gravestonedoji",(function(){return Xt})),i.d(t,"bullishharami",(function(){return Ve})),i.d(t,"bearishharami",(function(){return yt})),i.d(t,"bullishharamicross",(function(){return De})),i.d(t,"bearishharamicross",(function(){return bt})),i.d(t,"eveningdojistar",(function(){return kt})),i.d(t,"eveningstar",(function(){return Tt})),i.d(t,"morningdojistar",(function(){return Ne})),i.d(t,"morningstar",(function(){return Ae})),i.d(t,"bullishmarubozu",(function(){return Ke})),i.d(t,"bearishmarubozu",(function(){return _t})),i.d(t,"piercingline",(function(){return Xe})),i.d(t,"bullishspinningtop",(function(){return Qt})),i.d(t,"bearishspinningtop",(function(){return Jt})),i.d(t,"threeblackcrows",(function(){return Ct})),i.d(t,"threewhitesoldiers",(function(){return Qe})),i.d(t,"bullishhammerstick",(function(){return Je})),i.d(t,"bearishhammerstick",(function(){return it})),i.d(t,"bullishinvertedhammerstick",(function(){return et})),i.d(t,"bearishinvertedhammerstick",(function(){return at})),i.d(t,"hammerpattern",(function(){return ot})),i.d(t,"hammerpatternunconfirmed",(function(){return ct})),i.d(t,"hangingman",(function(){return Mt})),i.d(t,"hangingmanunconfirmed",(function(){return Et})),i.d(t,"shootingstar",(function(){return Bt})),i.d(t,"shootingstarunconfirmed",(function(){return qt})),i.d(t,"tweezertop",(function(){return Lt})),i.d(t,"tweezerbottom",(function(){return ht})),i.d(t,"fibonacciretracement",(function(){return $t})),i.d(t,"ichimokucloud",(function(){return ti})),i.d(t,"IchimokuCloud",(function(){return ei})),i.d(t,"keltnerchannels",(function(){return ri})),i.d(t,"KeltnerChannels",(function(){return ai})),i.d(t,"KeltnerChannelsInput",(function(){return ii})),i.d(t,"KeltnerChannelsOutput",(function(){return si})),i.d(t,"chandelierexit",(function(){return di})),i.d(t,"ChandelierExit",(function(){return ci})),i.d(t,"ChandelierExitInput",(function(){return oi})),i.d(t,"ChandelierExitOutput",(function(){return ni})),i.d(t,"crossUp",(function(){return li})),i.d(t,"CrossUp",(function(){return hi})),i.d(t,"crossDown",(function(){return pi})),i.d(t,"CrossDown",(function(){return ui})),i.d(t,"setConfig",(function(){return d})),i.d(t,"getConfig",(function(){return h}));class s{constructor(e,t,i){this.next=i,i&&(i.prev=this),this.prev=t,t&&(t.next=this),this.data=e}}class a{constructor(){this._length=0}get head(){return this._head&&this._head.data}get tail(){return this._tail&&this._tail.data}get current(){return this._current&&this._current.data}get length(){return this._length}push(e){this._tail=new s(e,this._tail),0===this._length&&(this._head=this._tail,this._current=this._head,this._next=this._head),this._length++}pop(){var e=this._tail;if(0!==this._length)return this._length--,0===this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._tail=e.prev,this._tail.next=void 0,this._current===e&&(this._current=this._tail,this._next=void 0),e.data)}shift(){var e=this._head;if(0!==this._length)return this._length--,0===this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._head=this._head.next,this._current===e&&(this._current=this._head,this._next=this._current.next),e.data)}unshift(e){this._head=new s(e,void 0,this._head),0===this._length&&(this._tail=this._head,this._next=this._head),this._length++}unshiftCurrent(){var e=this._current;return e===this._head||this._length<2?e&&e.data:(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.next=this._head,e.prev=void 0,this._head.prev=e,this._head=e,e.data)}removeCurrent(){var e=this._current;if(0!==this._length)return this._length--,0===this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):e===this._head?(this._head=e.next,this._head.prev=void 0,this._current=this._head):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.data)}resetCursor(){return this._current=this._next=this._head,this}next(){var e=this._next;if(void 0!==e)return this._next=e.next,this._current=e,e.data}}class r extends a{constructor(e,t,i,s){if(super(),this.size=e,this.maintainHigh=t,this.maintainLow=i,this.maintainSum=s,this.totalPushed=0,this.periodHigh=0,this.periodLow=1/0,this.periodSum=0,!e||"number"!=typeof e)throw"Size required and should be a number.";this._push=this.push,this.push=function(e){this.add(e),this.totalPushed++}}add(e){this.length===this.size?(this.lastShift=this.shift(),this._push(e),this.maintainHigh&&this.lastShift==this.periodHigh&&this.calculatePeriodHigh(),this.maintainLow&&this.lastShift==this.periodLow&&this.calculatePeriodLow(),this.maintainSum&&(this.periodSum=this.periodSum-this.lastShift)):this._push(e),this.maintainHigh&&this.periodHigh<=e&&(this.periodHigh=e),this.maintainLow&&this.periodLow>=e&&(this.periodLow=e),this.maintainSum&&(this.periodSum=this.periodSum+e)}*iterator(){for(this.resetCursor();this.next();)yield this.current}calculatePeriodHigh(){for(this.resetCursor(),this.next()&&(this.periodHigh=this.current);this.next();)this.periodHigh<=this.current&&(this.periodHigh=this.current)}calculatePeriodLow(){for(this.resetCursor(),this.next()&&(this.periodLow=this.current);this.next();)this.periodLow>=this.current&&(this.periodLow=this.current)}}class o{}class n{constructor(){this.open=[],this.high=[],this.low=[],this.close=[],this.volume=[],this.timestamp=[]}}let c={};function d(e,t){c[e]=t}function h(e){return c[e]}function l(e){let t=h("precision");return t?parseFloat(e.toPrecision(t)):e}class u{}class p{constructor(e){this.format=e.format||l}static reverseInputs(e){e.reversedInput&&(e.values&&e.values.reverse(),e.open&&e.open.reverse(),e.high&&e.high.reverse(),e.low&&e.low.reverse(),e.close&&e.close.reverse(),e.volume&&e.volume.reverse(),e.timestamp&&e.timestamp.reverse())}getResult(){return this.result}}class f extends p{constructor(e){super(e),this.period=e.period,this.price=e.values;this.generator=function*(e){var t,i=new a,s=0,r=1,o=yield;for(i.push(0);;)r<e?(r++,i.push(o),s+=o):(t=(s=s-i.shift()+o)/e,i.push(o)),o=yield t}(this.period),this.generator.next(),this.result=[],this.price.forEach(e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}function m(e){p.reverseInputs(e);var t=new f(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}f.calculate=m;class v extends p{constructor(e){super(e);var t,i=e.period,s=e.values,a=2/(i+1);this.result=[],t=new f({period:i,values:[]});this.generator=function*(){for(var e,i=yield;;)void 0!==e&&void 0!==i?(e=(i-e)*a+e,i=yield e):(i=yield,(e=t.nextValue(i))&&(i=yield e))}(),this.generator.next(),this.generator.next(),s.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}function y(e){p.reverseInputs(e);var t=new v(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}v.calculate=y;class g extends p{constructor(e){super(e);var t=e.period,i=e.values;this.result=[],this.generator=function*(){let e=new a,i=t*(t+1)/2;for(;;)if(e.length<t)e.push(yield);else{e.resetCursor();let a=0;for(let s=1;s<=t;s++)a+=e.next()*s/i;var s=yield a;e.shift(),e.push(s)}}(),this.generator.next(),i.forEach((e,t)=>{var i=this.generator.next(e);null!=i.value&&this.result.push(this.format(i.value))})}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}function b(e){p.reverseInputs(e);var t=new g(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}g.calculate=b;class w extends p{constructor(e){super(e);var t,i=e.period,s=e.values,a=1/i;this.result=[],t=new f({period:i,values:[]});this.generator=function*(){for(var e,i=yield;;)void 0!==e&&void 0!==i?(e=(i-e)*a+e,i=yield e):(i=yield,void 0!==(e=t.nextValue(i))&&(i=yield e))}(),this.generator.next(),this.generator.next(),s.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}function k(e){p.reverseInputs(e);var t=new w(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}w.calculate=k;class x extends p{constructor(e){super(e);var t=e.SimpleMAOscillator?f:v,i=e.SimpleMASignal?f:v,s=new t({period:e.fastPeriod,values:[],format:e=>e}),a=new t({period:e.slowPeriod,values:[],format:e=>e}),r=new i({period:e.signalPeriod,values:[],format:e=>e}),o=this.format;this.result=[],this.generator=function*(){for(var t,i,n,c,d,h,l=0;;)l<e.slowPeriod?(t=yield,d=s.nextValue(t),h=a.nextValue(t),l++):(d&&h&&(i=d-h,n=r.nextValue(i)),c=i-n,t=yield{MACD:o(i),signal:n?o(n):void 0,histogram:isNaN(c)?void 0:o(c)},d=s.nextValue(t),h=a.nextValue(t))}(),this.generator.next(),e.values.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(t.value)})}nextValue(e){return this.generator.next(e).value}}function T(e){p.reverseInputs(e);var t=new x(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}x.calculate=T;class O extends p{constructor(e){super(e);let t=e.values,i=e.period,s=this.format;this.generator=function*(e){var t,i,a=yield,r=1,o=0,n=a;for(a=yield;;)(i=(i=a-n)>0?i:0)>0&&(o+=i),r<e?r++:t=void 0===t?o/e:(t*(e-1)+i)/e,n=a,t=void 0!==t?s(t):void 0,a=yield t}(i),this.generator.next(),this.result=[],t.forEach(e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)})}nextValue(e){return this.generator.next(e).value}}function _(e){p.reverseInputs(e);var t=new O(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}O.calculate=_;class S extends p{constructor(e){super(e);let t=e.values,i=e.period,s=this.format;this.generator=function*(e){var t,i,a=yield,r=1,o=0,n=a;for(a=yield;;)(i=(i=n-a)>0?i:0)>0&&(o+=i),r<e?r++:t=void 0===t?o/e:(t*(e-1)+i)/e,n=a,t=void 0!==t?s(t):void 0,a=yield t}(i),this.generator.next(),this.result=[],t.forEach(e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)})}nextValue(e){return this.generator.next(e).value}}function C(e){p.reverseInputs(e);var t=new S(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}S.calculate=C;class I extends p{constructor(e){super(e);var t=e.period,i=e.values,s=new O({period:t,values:[]}),a=new S({period:t,values:[]});this.generator=function*(e){for(var t,i,r,o,n=yield;;)t=s.nextValue(n),i=a.nextValue(n),void 0!==t&&void 0!==i&&(0===i?o=100:0===t?o=0:(r=t/i,r=isNaN(r)?0:r,o=parseFloat((100-100/(1+r)).toFixed(2)))),n=yield o}(),this.generator.next(),this.result=[],i.forEach(e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)})}nextValue(e){return this.generator.next(e).value}}function M(e){p.reverseInputs(e);var t=new I(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}I.calculate=M;class F extends p{constructor(e){super(e);var t=e.period,i=e.values,s=new f({period:t,values:[],format:e=>e});this.result=[],this.generator=function*(){var e,i,a,o=new r(t);for(e=yield;;){if(o.push(e),i=s.nextValue(e)){let e=0;for(let t of o.iterator())e+=Math.pow(t-i,2);a=Math.sqrt(e/t)}e=yield a}}(),this.generator.next(),i.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return this.format(t.value)}}function E(e){p.reverseInputs(e);var t=new F(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}F.calculate=E;class A extends p{constructor(e){super(e);var t,i,s=e.period,a=e.values,r=e.stdDev,o=this.format;this.result=[],t=new f({period:s,values:[],format:e=>e}),i=new F({period:s,values:[],format:e=>e}),this.generator=function*(){var e,s,a,n;for(s=yield;;){if(a=t.nextValue(s),n=i.nextValue(s),a){let t=o(a),i=o(a+n*r),c=o(a-n*r);e={middle:t,upper:i,lower:c,pb:o((s-c)/(i-c))}}s=yield e}}(),this.generator.next(),a.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(t.value)})}nextValue(e){return this.generator.next(e).value}}function B(e){p.reverseInputs(e);var t=new A(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}A.calculate=B;class P extends p{constructor(e){super(e),this.period=e.period,this.price=e.values;this.generator=function*(e){new a;for(var t=0,i=1,s=yield,r=0;;)i<e?(i++,t+=s,r=void 0):i==e?(i++,r=t+=s):r=r-r/e+s,s=yield r}(this.period),this.generator.next(),this.result=[],this.price.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}P.calculate=function(e){p.reverseInputs(e);var t=new P(e).result;e.reversedInput&&t.reverse();return p.reverseInputs(e),t};class q extends p{constructor(e){super(e);var t=e.low,i=e.high,s=this.format;if(t.length!=i.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=function*(){for(var e,t,i=yield;;){if(t){let a=i.high-t.high,r=t.low-i.low;e=s(r>a&&r>0?r:0)}t=i,i=yield e}}(),this.generator.next(),t.forEach((e,s)=>{var a=this.generator.next({high:i[s],low:t[s]});void 0!==a.value&&this.result.push(a.value)})}static calculate(e){p.reverseInputs(e);var t=new q(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}nextValue(e){return this.generator.next(e).value}}class V extends p{constructor(e){super(e);var t=e.low,i=e.high,s=this.format;if(t.length!=i.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=function*(){for(var e,t,i=yield;;){if(t){let a=i.high-t.high,r=t.low-i.low;e=s(a>r&&a>0?a:0)}t=i,i=yield e}}(),this.generator.next(),t.forEach((e,s)=>{var a=this.generator.next({high:i[s],low:t[s]});void 0!==a.value&&this.result.push(a.value)})}static calculate(e){p.reverseInputs(e);var t=new V(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}nextValue(e){return this.generator.next(e).value}}class L extends p{constructor(e){super(e);var t=e.low,i=e.high,s=e.close,a=this.format;if(t.length!=i.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=function*(){for(var e,t,i=yield;;)void 0===e&&(e=i.close,i=yield t),t=Math.max(i.high-i.low,isNaN(Math.abs(i.high-e))?0:Math.abs(i.high-e),isNaN(Math.abs(i.low-e))?0:Math.abs(i.low-e)),e=i.close,null!=t&&(t=a(t)),i=yield t}(),this.generator.next(),t.forEach((e,a)=>{var r=this.generator.next({high:i[a],low:t[a],close:s[a]});null!=r.value&&this.result.push(r.value)})}nextValue(e){return this.generator.next(e).value}}function D(e){p.reverseInputs(e);var t=new L(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}L.calculate=D;class R extends p{constructor(e){super(e);var t=e.low,i=e.high,s=e.close,a=e.period,r=this.format,o=new V({high:[],low:[]}),n=new q({high:[],low:[]}),c=new P({period:a,values:[],format:e=>e}),d=new P({period:a,values:[],format:e=>e}),h=new P({period:a,values:[],format:e=>e}),l=new w({period:a,values:[],format:e=>e}),u=new L({low:[],high:[],close:[]});if(t.length!==i.length||i.length!==s.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){var e,t,i,s,a=yield;for(0,0,0;;){let r=u.nextValue(a),p=o.nextValue(a),f=n.nextValue(a);if(void 0===r){a=yield;continue}let m=h.nextValue(r),v=c.nextValue(p),y=d.nextValue(f);if(null!=m&&null!=v&&null!=y){e=100*v/m,t=100*y/m,i=Math.abs(e-t)/(e+t)*100,s=l.nextValue(i)}a=yield{adx:s,pdi:e,mdi:t}}}(),this.generator.next(),t.forEach((e,a)=>{var o=this.generator.next({high:i[a],low:t[a],close:s[a]});null!=o.value&&null!=o.value.adx&&this.result.push({adx:r(o.value.adx),pdi:r(o.value.pdi),mdi:r(o.value.mdi)})})}nextValue(e){let t=this.generator.next(e).value;if(null!=t&&null!=t.adx)return{adx:this.format(t.adx),pdi:this.format(t.pdi),mdi:this.format(t.mdi)}}}function G(e){p.reverseInputs(e);var t=new R(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}R.calculate=G;class j extends p{constructor(e){super(e);var t=e.low,i=e.high,s=e.close,a=e.period,r=this.format;if(t.length!==i.length||i.length!==s.length)throw"Inputs(low,high, close) not of equal size";var o=new L({low:[],high:[],close:[]}),n=new w({period:a,values:[],format:e=>e});this.result=[],this.generator=function*(){for(var e,t,i=yield;;)e=void 0===(t=o.nextValue({low:i.low,high:i.high,close:i.close}))?void 0:n.nextValue(t),i=yield e}(),this.generator.next(),t.forEach((e,a)=>{var o=this.generator.next({high:i[a],low:t[a],close:s[a]});void 0!==o.value&&this.result.push(r(o.value))})}nextValue(e){return this.generator.next(e).value}}function N(e){p.reverseInputs(e);var t=new j(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}j.calculate=N;class H extends p{constructor(e){super(e);var t=e.period,i=e.values;this.result=[],this.generator=function*(){let e=1;for(var i,s=new r(t),a=yield;;)s.push(a),e<t?e++:i=(a-s.lastShift)/s.lastShift*100,a=yield i}(),this.generator.next(),i.forEach(e=>{var t=this.generator.next(e);null==t.value||isNaN(t.value)||this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e);if(null!=t.value&&!isNaN(t.value))return this.format(t.value)}}function U(e){p.reverseInputs(e);var t=new H(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}H.calculate=U;class z extends p{constructor(e){super(e);let t=e.values,i=e.ROCPer1,s=e.ROCPer2,a=e.ROCPer3,r=e.ROCPer4,o=e.SMAROCPer1,n=e.SMAROCPer2,c=e.SMAROCPer3,d=e.SMAROCPer4,h=e.signalPeriod,l=new H({period:i,values:[]}),u=new H({period:s,values:[]}),p=new H({period:a,values:[]}),m=new H({period:r,values:[]}),v=new f({period:o,values:[],format:e=>e}),y=new f({period:n,values:[],format:e=>e}),g=new f({period:c,values:[],format:e=>e}),b=new f({period:d,values:[],format:e=>e}),w=new f({period:h,values:[],format:e=>e});var k=this.format;this.result=[];let x=Math.max(i+o,s+n,a+c,r+d);this.generator=function*(){let e,t,i,s,a,r,o,n=1,c=yield;for(;;){let d=l.nextValue(c),h=u.nextValue(c),f=p.nextValue(c),T=m.nextValue(c);t=void 0!==d?v.nextValue(d):void 0,i=void 0!==h?y.nextValue(h):void 0,s=void 0!==f?g.nextValue(f):void 0,a=void 0!==T?b.nextValue(T):void 0,n<x?n++:e=1*t+2*i+3*s+4*a,r=void 0!==e?w.nextValue(e):void 0,o=void 0!==e?{kst:k(e),signal:r?k(r):void 0}:void 0,c=yield o}}(),this.generator.next(),t.forEach(e=>{let t=this.generator.next(e);null!=t.value&&this.result.push(t.value)})}nextValue(e){let t=this.generator.next(e);if(null!=t.value)return t.value}}function K(e){p.reverseInputs(e);var t=new z(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}z.calculate=K;class W extends p{constructor(e){super(e);let t=e.high||[],i=e.low||[];this.result=[],this.generator=function*(e,t){let i,s,a,r,o=!0,n=e,c=yield;for(;;)i?(a+=n*(s-a),o?(a=Math.min(a,r.low,c.low),i.high>s&&(s=i.high,n=Math.min(n+e,t))):(a=Math.max(a,r.high,c.high),i.low<s&&(s=i.low,n=Math.min(n+e,t))),(o&&i.low<a||!o&&i.high>a)&&(n=e,a=s,o=!o,s=o?i.high:i.low)):(a=c.low,s=c.high),r=c,i&&(c=i),i=yield a}(e.step,e.max),this.generator.next(),i.forEach((e,s)=>{var a=this.generator.next({high:t[s],low:i[s]});void 0!==a.value&&this.result.push(a.value)})}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}function X(e){p.reverseInputs(e);var t=new W(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}W.calculate=X;class Y extends p{constructor(e){super(e);let t=e.low,i=e.high,s=e.close,a=e.period,o=e.signalPeriod,n=this.format;if(t.length!==i.length||i.length!==s.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){let e,t,i=1,s=new r(a,!0,!1),c=new r(a,!1,!0),d=new f({period:o,values:[],format:e=>e});for(var h=yield;;){if(s.push(h.high),c.push(h.low),i<a){i++,h=yield;continue}let r=c.periodLow;e=(h.close-r)/(s.periodHigh-r)*100,e=isNaN(e)?0:e,t=d.nextValue(e),h=yield{k:n(e),d:void 0!==t?n(t):void 0}}}(),this.generator.next(),t.forEach((e,a)=>{var r=this.generator.next({high:i[a],low:t[a],close:s[a]});void 0!==r.value&&this.result.push(r.value)})}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}function Q(e){p.reverseInputs(e);var t=new Y(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}Y.calculate=Q;class Z extends p{constructor(e){super(e);let t=e.low,i=e.high,s=e.close,a=e.period,o=this.format;if(t.length!==i.length||i.length!==s.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){let e,t,i=1,s=new r(a,!0,!1),n=new r(a,!1,!0);var c=yield;let d;for(;;)s.push(c.high),n.push(c.low),i<a?(i++,c=yield):(e=n.periodLow,t=s.periodHigh,d=o((t-c.close)/(t-e)*-100),c=yield d)}(),this.generator.next(),t.forEach((e,a)=>{var r=this.generator.next({high:i[a],low:t[a],close:s[a]});void 0!==r.value&&this.result.push(r.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return this.format(t.value)}}function J(e){p.reverseInputs(e);var t=new Z(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}Z.calculate=J;class $ extends p{constructor(e){super(e);var t=e.high,i=e.low,s=e.close,a=e.volume;if(i.length!==t.length||t.length!==s.length||t.length!==a.length)throw"Inputs(low,high, close, volumes) not of equal size";this.result=[],this.generator=function*(){var e,t=0;for(e=yield;;){let i=(e.close-e.low-(e.high-e.close))/(e.high-e.low);i=isNaN(i)?1:i,t+=i*e.volume,e=yield Math.round(t)}}(),this.generator.next(),t.forEach((e,t)=>{var r={high:e,low:i[t],close:s[t],volume:a[t]},o=this.generator.next(r);null!=o.value&&this.result.push(o.value)})}nextValue(e){return this.generator.next(e).value}}function ee(e){p.reverseInputs(e);var t=new $(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}$.calculate=ee;class te extends p{constructor(e){super(e);var t=e.close,i=e.volume;this.result=[],this.generator=function*(){var e,t,i=0;for((e=yield).close&&"number"==typeof e.close&&(t=e.close,e=yield);;)t<e.close?i+=e.volume:e.close<t&&(i-=e.volume),t=e.close,e=yield i}(),this.generator.next(),t.forEach((e,s)=>{let a={close:t[s],volume:i[s]},r=this.generator.next(a);null!=r.value&&this.result.push(r.value)})}nextValue(e){return this.generator.next(e).value}}function ie(e){p.reverseInputs(e);var t=new te(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}te.calculate=ie;class se extends p{constructor(e){super(e);let t=e.values,i=e.period,s=this.format,a=new v({period:i,values:[],format:e=>e}),r=new v({period:i,values:[],format:e=>e}),o=new v({period:i,values:[],format:e=>e}),n=new H({period:1,values:[],format:e=>e});this.result=[],this.generator=function*(){let e=yield;for(;;){let t=a.nextValue(e),i=t?r.nextValue(t):void 0,c=i?o.nextValue(i):void 0,d=c?n.nextValue(c):void 0;e=yield d?s(d):void 0}}(),this.generator.next(),t.forEach(e=>{let t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)})}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}function ae(e){p.reverseInputs(e);var t=new se(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}se.calculate=ae;class re extends p{constructor(e){super(e);var t=e.close,i=e.volume,s=e.period||1;if(i.length!==t.length)throw"Inputs(volume, close) not of equal size";let a=new v({values:[],period:s});this.result=[],this.generator=function*(){var e=yield,t=yield;let i;for(;;)i=(t.close-e.close)*t.volume,e=t,t=yield a.nextValue(i)}(),this.generator.next(),i.forEach((e,s)=>{var a=this.generator.next({close:t[s],volume:i[s]});null!=a.value&&this.result.push(a.value)})}nextValue(e){let t=this.generator.next(e).value;if(null!=t)return t}}function oe(e){p.reverseInputs(e);var t=new re(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}re.calculate=oe;class ne extends p{constructor(e){super(e);var t=e.low,i=e.high,s=e.close,a=e.period;this.format;var o=new r(a),n=new f({period:a,values:[],format:e=>e});if(t.length!==i.length||i.length!==s.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){for(var e=yield;;){let t=(e.high+e.low+e.close)/3;o.push(t);let i,s=n.nextValue(t),r=null,c=0;if(null!=s){for(let e of o.iterator())c+=Math.abs(e-s);r=c/a,i=(t-s)/(.015*r)}e=yield i}}(),this.generator.next(),t.forEach((e,a)=>{var r=this.generator.next({high:i[a],low:t[a],close:s[a]});null!=r.value&&this.result.push(r.value)})}nextValue(e){let t=this.generator.next(e).value;if(null!=t)return t}}function ce(e){p.reverseInputs(e);var t=new ne(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}ne.calculate=ce;class de extends p{constructor(e){super(e);var t=e.high,i=e.low,s=e.fastPeriod,a=e.slowPeriod,r=new f({values:[],period:a}),o=new f({values:[],period:s});this.result=[],this.generator=function*(){var e,t,i,s,a;for(t=yield;;)i=(t.high+t.low)/2,s=r.nextValue(i),a=o.nextValue(i),void 0!==s&&void 0!==a&&(e=a-s),t=yield e}(),this.generator.next(),t.forEach((e,t)=>{var s={high:e,low:i[t]},a=this.generator.next(s);null!=a.value&&this.result.push(this.format(a.value))})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return this.format(t.value)}}function he(e){p.reverseInputs(e);var t=new de(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}de.calculate=he;class le extends p{constructor(e){super(e);var t=e.low,i=e.high,s=e.close,a=e.volume;this.format;if(t.length!==i.length||i.length!==s.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){var e=yield;let t=0,i=0;for(;;){let s=(e.high+e.low+e.close)/3;t+=e.volume*s,i+=e.volume,e=yield t/i}}(),this.generator.next(),t.forEach((e,r)=>{var o=this.generator.next({high:i[r],low:t[r],close:s[r],volume:a[r]});null!=o.value&&this.result.push(o.value)})}nextValue(e){let t=this.generator.next(e).value;if(null!=t)return t}}function ue(e){p.reverseInputs(e);var t=new le(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}le.calculate=ue;class pe extends p{constructor(e){super(e);var t=e.high,i=e.low,s=e.close,a=e.open,r=e.volume,o=e.noOfBars;if(i.length!==t.length||t.length!==s.length||t.length!==r.length)throw"Inputs(low,high, close, volumes) not of equal size";this.result=[];var n,c,d,h,l=Math.max(...t,...i,...s,...a),u=Math.min(...t,...i,...s,...a),p=(l-u)/o,f=u;for(let e=0;e<o;e++){let e=f,o=e+p;f=o;let l=0,u=0,m=0;for(let p=0;p<t.length;p++){let f=i[p],v=t[p],y=a[p],g=s[p],b=r[p];c=o,h=v,((n=e)<=(d=f)&&c>=d||d<=n&&h>=n)&&(m+=b,y>g?u+=b:l+=b)}this.result.push({rangeStart:e,rangeEnd:o,bullishVolume:l,bearishVolume:u,totalVolume:m})}}nextValue(e){throw"Next value not supported for volume profile"}}function fe(e){p.reverseInputs(e);var t=new pe(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}pe.calculate=fe;class me extends p{constructor(e){super(e),this.result=[],this.generator=function*(){let e=yield;for(;;)e=yield(e.high+e.low+e.close)/3}(),this.generator.next(),e.low.forEach((t,i)=>{var s=this.generator.next({high:e.high[i],low:e.low[i],close:e.close[i]});this.result.push(s.value)})}nextValue(e){return this.generator.next(e).value}}me.calculate=function(e){p.reverseInputs(e);var t=new me(e).result;e.reversedInput&&t.reverse();return p.reverseInputs(e),t};class ve extends p{constructor(e){super(e);var t=e.high,i=e.low,s=e.close,a=e.volume,o=e.period,n=new me({low:[],high:[],close:[]}),c=new r(o,!1,!1,!0),d=new r(o,!1,!1,!0);if(i.length!==t.length||t.length!==s.length||t.length!==a.length)throw"Inputs(low,high, close, volumes) not of equal size";this.result=[],this.generator=function*(){var e,t,i,s,a=0;let r=null,h=null;for((t=yield).close,t=yield;;){var{high:l,low:u,close:p,volume:f}=t,m=0,v=0;r=n.nextValue({high:l,low:u,close:p}),a=r*f,null!=r&&null!=h&&(r>h?m=a:v=a,c.push(m),d.push(v),i=c.periodSum,s=d.periodSum,c.totalPushed>=o&&c.totalPushed>=o&&(e=100-100/(1+i/s))),h=r,t=yield e}}(),this.generator.next(),t.forEach((e,t)=>{var r={high:e,low:i[t],close:s[t],volume:a[t]},o=this.generator.next(r);null!=o.value&&this.result.push(parseFloat(o.value.toFixed(2)))})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return parseFloat(t.value.toFixed(2))}}function ye(e){p.reverseInputs(e);var t=new ve(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}ve.calculate=ye;class ge extends p{constructor(e){super(e);let t=e.values,i=e.rsiPeriod,s=e.stochasticPeriod,a=e.kPeriod,r=e.dPeriod;this.format;this.result=[],this.generator=function*(){let e,t,o,n,c=new I({period:i,values:[]}),d=new Y({period:s,high:[],low:[],close:[],signalPeriod:a}),h=new f({period:r,values:[],format:e=>e});for(var l=yield;;){if(e=c.nextValue(l),void 0!==e){var u={high:e,low:e,close:e};t=d.nextValue(u),void 0!==t&&void 0!==t.d&&(o=h.nextValue(t.d),void 0!==o&&(n={stochRSI:t.k,k:t.d,d:o}))}l=yield n}}(),this.generator.next(),t.forEach((e,t)=>{var i=this.generator.next(e);void 0!==i.value&&this.result.push(i.value)})}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}function be(e){p.reverseInputs(e);var t=new ge(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}ge.calculate=be;class we extends p{constructor(e){super(e);var t=e.values,i=e.period;this.result=[];var s=new r(i,!0,!1,!1);this.generator=function*(){var e,t;for(e=yield;;)s.push(e),s.totalPushed>=i&&(t=s.periodHigh),e=yield t}(),this.generator.next(),t.forEach((e,t)=>{var i=this.generator.next(e);null!=i.value&&this.result.push(i.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function ke(e){p.reverseInputs(e);var t=new we(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}we.calculate=ke;class xe extends p{constructor(e){super(e);var t=e.values,i=e.period;this.result=[];var s=new r(i,!1,!0,!1);this.generator=function*(){var e,t;for(e=yield;;)s.push(e),s.totalPushed>=i&&(t=s.periodLow),e=yield t}(),this.generator.next(),t.forEach((e,t)=>{var i=this.generator.next(e);null!=i.value&&this.result.push(i.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function Te(e){p.reverseInputs(e);var t=new xe(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}xe.calculate=Te;class Oe extends p{constructor(e){super(e);var t=e.values,i=e.period;this.result=[];var s=new r(i,!1,!1,!0);this.generator=function*(){var e,t;for(e=yield;;)s.push(e),s.totalPushed>=i&&(t=s.periodSum),e=yield t}(),this.generator.next(),t.forEach((e,t)=>{var i=this.generator.next(e);null!=i.value&&this.result.push(i.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function _e(e){p.reverseInputs(e);var t=new Oe(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}Oe.calculate=_e;class Se extends p{constructor(e){super(e);this.format;let t=e.useATR,i=e.brickSize||0;if(t){let t=N(Object.assign({},e));i=t[t.length-1]}if(this.result=new n,0===i)return void console.error("Not enough data to calculate brickSize for renko when using ATR");let s=0,a=0,r=1/0,o=0,c=0,d=0;this.generator=function*(){let e=yield;for(;;){if(0===s){s=e.close,a=e.high,r=e.low,o=e.close,c=e.volume,d=e.timestamp,e=yield;continue}let t=Math.abs(e.close-o),n=Math.abs(e.close-s);if(t>=i&&n>=i){let d=t>n?s:o,h={open:d,high:a>e.high?a:e.high,low:r<e.Low?r:e.low,close:d>e.close?d-i:d+i,volume:c+e.volume,timestamp:e.timestamp};s=h.open,a=h.close,r=h.close,o=h.close,c=0,e=yield h}else a=a>e.high?a:e.high,r=r<e.Low?r:e.low,c+=e.volume,d=e.timestamp,e=yield}}(),this.generator.next(),e.low.forEach((t,i)=>{var s=this.generator.next({open:e.open[i],high:e.high[i],low:e.low[i],close:e.close[i],volume:e.volume[i],timestamp:e.timestamp[i]});s.value&&(this.result.open.push(s.value.open),this.result.high.push(s.value.high),this.result.low.push(s.value.low),this.result.close.push(s.value.close),this.result.volume.push(s.value.volume),this.result.timestamp.push(s.value.timestamp))})}nextValue(e){return console.error("Cannot calculate next value on Renko, Every value has to be recomputed for every change, use calcualte method"),null}}function Ce(e){p.reverseInputs(e);var t=new Se(e).result;return e.reversedInput&&(t.open.reverse(),t.high.reverse(),t.low.reverse(),t.close.reverse(),t.volume.reverse(),t.timestamp.reverse()),p.reverseInputs(e),t}Se.calculate=Ce;class Ie extends p{constructor(e){super(e);this.format;this.result=new n;let t=null,i=0,s=1/0,a=0,r=0,o=0;this.generator=function*(){let e=yield,n=null;for(;;){if(null===t)t=(e.close+e.open)/2,i=e.high,s=e.low,a=(e.close+e.open+e.high+e.low)/4,r=e.volume||0,o=e.timestamp||0,n={open:t,high:i,low:s,close:a,volume:e.volume||0,timestamp:e.timestamp||0};else{let r=(e.close+e.open+e.high+e.low)/4,o=(t+a)/2,c=Math.max(o,r,e.high),d=Math.min(e.low,o,r);n={close:r,open:o,high:c,low:d,volume:e.volume||0,timestamp:e.timestamp||0},a=r,t=o,i=c,s=d}e=yield n}}(),this.generator.next(),e.low.forEach((t,i)=>{var s=this.generator.next({open:e.open[i],high:e.high[i],low:e.low[i],close:e.close[i],volume:e.volume?e.volume[i]:e.volume,timestamp:e.timestamp?e.timestamp[i]:e.timestamp});s.value&&(this.result.open.push(s.value.open),this.result.high.push(s.value.high),this.result.low.push(s.value.low),this.result.close.push(s.value.close),this.result.volume.push(s.value.volume),this.result.timestamp.push(s.value.timestamp))})}nextValue(e){return this.generator.next(e).value}}function Me(e){p.reverseInputs(e);var t=new Ie(e).result;return e.reversedInput&&(t.open.reverse(),t.high.reverse(),t.low.reverse(),t.close.reverse(),t.volume.reverse(),t.timestamp.reverse()),p.reverseInputs(e),t}Ie.calculate=Me;class Fe{constructor(){}approximateEqual(e,t){return 1*parseFloat(Math.abs(e-t).toPrecision(4))<=1*parseFloat((.001*e).toPrecision(4))}logic(e){throw"this has to be implemented"}getAllPatternIndex(e){if(e.close.length<this.requiredCount)return console.warn("Data count less than data required for the strategy ",this.name),[];e.reversedInput&&(e.open.reverse(),e.high.reverse(),e.low.reverse(),e.close.reverse());let t=this.logic;return this._generateDataForCandleStick(e).map((e,i)=>t.call(this,e)?i:void 0).filter(e=>e)}hasPattern(e){if(e.close.length<this.requiredCount)return console.warn("Data count less than data required for the strategy ",this.name),!1;return e.reversedInput&&(e.open.reverse(),e.high.reverse(),e.low.reverse(),e.close.reverse()),this.logic.call(this,this._getLastDataForCandleStick(e))}_getLastDataForCandleStick(e){let t=this.requiredCount;if(e.close.length===t)return e;{let i={open:[],high:[],low:[],close:[]},s=0,a=e.close.length-t;for(;s<t;)i.open.push(e.open[a+s]),i.high.push(e.high[a+s]),i.low.push(e.low[a+s]),i.close.push(e.close[a+s]),s++;return i}}_generateDataForCandleStick(e){let t=this.requiredCount;return e.close.map((function(i,s){let a=0,r={open:[],high:[],low:[],close:[]};for(;a<t;)r.open.push(e.open[s+a]),r.high.push(e.high[s+a]),r.low.push(e.low[s+a]),r.close.push(e.close[s+a]),a++;return r})).filter((i,s)=>s<=e.close.length-t)}}class Ee extends Fe{constructor(){super(),this.name="MorningStar",this.requiredCount=3}logic(e){let t=e.open[0],i=e.close[0],s=(e.high[0],e.low[0]),a=(e.open[1],e.close[1]),r=e.high[1],o=e.low[1],n=e.open[2],c=e.close[2];e.high[2],e.low[2];return i<t&&(s>o&&s>r)&&(r<s&&o<s&&n>r&&a<n)&&n<c&&c>(t+i)/2}}function Ae(e){return(new Ee).hasPattern(e)}class Be extends Fe{constructor(){super(),this.name="BullishEngulfingPattern",this.requiredCount=2}logic(e){let t=e.open[0],i=e.close[0],s=(e.high[0],e.low[0],e.open[1]),a=e.close[1];e.high[1],e.low[1];return i<t&&t>s&&i>s&&t<a}}function Pe(e){return(new Be).hasPattern(e)}class qe extends Fe{constructor(){super(),this.requiredCount=2,this.name="BullishHarami"}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=(e.low[0],e.open[1]),r=e.close[1],o=e.high[1],n=e.low[1];return t>a&&i<a&&i<r&&t>n&&s>o}}function Ve(e){return(new qe).hasPattern(e)}class Le extends Fe{constructor(){super(),this.requiredCount=2,this.name="BullishHaramiCross"}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=(e.low[0],e.open[1]),r=e.close[1],o=e.high[1],n=e.low[1],c=t>a&&i<a&&i<r&&t>n&&s>o,d=this.approximateEqual(a,r);return c&&d}}function De(e){return(new Le).hasPattern(e)}class Re extends Fe{constructor(){super(),this.name="Doji",this.requiredCount=1}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=e.low[0],r=this.approximateEqual(t,i),o=r&&this.approximateEqual(t,s),n=r&&this.approximateEqual(i,a);return r&&o==n}}function Ge(e){return(new Re).hasPattern(e)}class je extends Fe{constructor(){super(),this.name="MorningDojiStar",this.requiredCount=3}logic(e){let t=e.open[0],i=e.close[0],s=(e.high[0],e.low[0]),a=e.open[1],r=e.close[1],o=e.high[1],n=e.low[1],c=e.open[2],d=e.close[2],h=(e.high[2],e.low[2],(t+i)/2),l=i<t,u=(new Re).hasPattern({open:[a],close:[r],high:[o],low:[n]});return l&&u&&c<d&&(o<s&&n<s&&c>o&&r<c)&&d>h}}function Ne(e){return(new je).hasPattern(e)}class He extends Fe{constructor(){super(),this.requiredCount=3,this.name="DownsideTasukiGap"}logic(e){let t=e.open[0],i=e.close[0],s=(e.high[0],e.low[0]),a=e.open[1],r=e.close[1],o=e.high[1],n=(e.low[1],e.open[2]),c=e.close[2];e.high[2],e.low[2];return i<t&&r<a&&c>n&&o<s&&(a>n&&r<n&&c>a&&c<i)}}function Ue(e){return(new He).hasPattern(e)}class ze extends Fe{constructor(){super(),this.name="BullishMarubozu",this.requiredCount=1}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=e.low[0];return this.approximateEqual(i,s)&&this.approximateEqual(a,t)&&t<i&&t<s}}function Ke(e){return(new ze).hasPattern(e)}class We extends Fe{constructor(){super(),this.requiredCount=2,this.name="PiercingLine"}logic(e){let t=e.open[0],i=e.close[0],s=(e.high[0],e.low[0]),a=e.open[1],r=e.close[1];e.high[1];return e.low[1]<s&&i<t&&(s>a&&r>(t+i)/2)&&r>a}}function Xe(e){return(new We).hasPattern(e)}class Ye extends Fe{constructor(){super(),this.name="ThreeWhiteSoldiers",this.requiredCount=3}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=(e.low[0],e.open[1]),r=e.close[1],o=e.high[1],n=(e.low[1],e.open[2]),c=e.close[2],d=e.high[2];e.low[2];return o>s&&d>o&&(t<i&&a<r&&n<c)&&(i>a&&a<s&&o>n&&n<r)}}function Qe(e){return(new Ye).hasPattern(e)}class Ze extends Fe{constructor(){super(),this.name="BullishHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=e.low[0],r=i>t;return r=r&&this.approximateEqual(i,s),r=r&&i-t<=2*(t-a),r}}function Je(e){return(new Ze).hasPattern(e)}class $e extends Fe{constructor(){super(),this.name="BullishInvertedHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=e.low[0],r=i>t;return r=r&&this.approximateEqual(t,a),r=r&&i-t<=2*(s-i),r}}function et(e){return(new $e).hasPattern(e)}class tt extends Fe{constructor(){super(),this.name="BearishHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=e.low[0],r=t>i;return r=r&&this.approximateEqual(t,s),r=r&&t-i<=2*(i-a),r}}function it(e){return(new tt).hasPattern(e)}class st extends Fe{constructor(){super(),this.name="BearishInvertedHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=e.low[0],r=t>i;return r=r&&this.approximateEqual(i,a),r=r&&t-i<=2*(s-t),r}}function at(e){return(new st).hasPattern(e)}class rt extends Fe{constructor(){super(),this.name="HammerPattern",this.requiredCount=5}logic(e){let t=this.downwardTrend(e);return t=t&&this.includesHammer(e),t=t&&this.hasConfirmation(e),t}downwardTrend(e,t=!0){let i=t?3:4,s=_({values:e.close.slice(0,i),period:i-1});return C({values:e.close.slice(0,i),period:i-1})>s}includesHammer(e,t=!0){let i=t?3:4,s=t?4:void 0,a={open:e.open.slice(i,s),close:e.close.slice(i,s),low:e.low.slice(i,s),high:e.high.slice(i,s)},r=it(a);return r=r||at(a),r=r||Je(a),r=r||et(a),r}hasConfirmation(e){e.open[3];let t=e.close[3],i=(e.low[3],e.high[3],e.open[4]),s=e.close[4];e.low[4],e.high[4];return i<s&&t<s}}function ot(e){return(new rt).hasPattern(e)}class nt extends rt{constructor(){super(),this.name="HammerPatternUnconfirmed"}logic(e){let t=this.downwardTrend(e,!1);return t=t&&this.includesHammer(e,!1),t}}function ct(e){return(new nt).hasPattern(e)}class dt extends Fe{constructor(){super(),this.name="TweezerBottom",this.requiredCount=5}logic(e){return this.downwardTrend(e)&&e.low[3]==e.low[4]}downwardTrend(e){let t=_({values:e.close.slice(0,3),period:2});return C({values:e.close.slice(0,3),period:2})>t}}function ht(e){return(new dt).hasPattern(e)}let lt=[new Be,new He,new qe,new Le,new je,new Ee,new ze,new We,new Ye,new Ze,new $e,new rt,new nt,new dt];class ut extends Fe{constructor(){super(),this.name="Bullish Candlesticks"}hasPattern(e){return lt.reduce((function(t,i){let s=i.hasPattern(e);return t||s}),!1)}}function pt(e){return(new ut).hasPattern(e)}class ft extends Fe{constructor(){super(),this.name="BearishEngulfingPattern",this.requiredCount=2}logic(e){let t=e.open[0],i=e.close[0],s=(e.high[0],e.low[0],e.open[1]),a=e.close[1];e.high[1],e.low[1];return i>t&&t<s&&i<s&&t>a}}function mt(e){return(new ft).hasPattern(e)}class vt extends Fe{constructor(){super(),this.requiredCount=2,this.name="BearishHarami"}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=(e.low[0],e.open[1]),r=e.close[1],o=e.high[1],n=e.low[1];return t<a&&i>a&&i>r&&t<n&&s>o}}function yt(e){return(new vt).hasPattern(e)}class gt extends Fe{constructor(){super(),this.requiredCount=2,this.name="BearishHaramiCross"}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=(e.low[0],e.open[1]),r=e.close[1],o=e.high[1],n=e.low[1],c=t<a&&i>a&&i>r&&t<n&&s>o,d=this.approximateEqual(a,r);return c&&d}}function bt(e){return(new gt).hasPattern(e)}class wt extends Fe{constructor(){super(),this.name="EveningDojiStar",this.requiredCount=3}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=(e.low[0],e.open[1]),r=e.close[1],o=e.high[1],n=e.low[1],c=e.open[2],d=e.close[2],h=(e.high[2],e.low[2],(t+i)/2),l=i>t,u=(new Re).hasPattern({open:[a],close:[r],high:[o],low:[n]});return l&&u&&(o>s&&n>s&&c<n&&r>c)&&c>d&&d<h}}function kt(e){return(new wt).hasPattern(e)}class xt extends Fe{constructor(){super(),this.name="EveningStar",this.requiredCount=3}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=(e.low[0],e.open[1],e.close[1]),r=e.high[1],o=e.low[1],n=e.open[2],c=e.close[2];e.high[2],e.low[2];return i>t&&(s<o&&s<r)&&(r>s&&o>s&&n<o&&a>n)&&n>c&&c<(t+i)/2}}function Tt(e){return(new xt).hasPattern(e)}class Ot extends Fe{constructor(){super(),this.name="BearishMarubozu",this.requiredCount=1}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=e.low[0];return this.approximateEqual(t,s)&&this.approximateEqual(a,i)&&t>i&&t>a}}function _t(e){return(new Ot).hasPattern(e)}class St extends Fe{constructor(){super(),this.name="ThreeBlackCrows",this.requiredCount=3}logic(e){let t=e.open[0],i=e.close[0],s=(e.high[0],e.low[0]),a=e.open[1],r=e.close[1],o=(e.high[1],e.low[1]),n=e.open[2],c=e.close[2],d=(e.high[2],e.low[2]);return s>o&&o>d&&(t>i&&a>r&&n>c)&&(t>a&&a>i&&a>n&&n>r)}}function Ct(e){return(new St).hasPattern(e)}class It extends Fe{constructor(){super(),this.name="HangingMan",this.requiredCount=5}logic(e){let t=this.upwardTrend(e);return t=t&&this.includesHammer(e),t=t&&this.hasConfirmation(e),t}upwardTrend(e,t=!0){let i=t?3:4;return _({values:e.close.slice(0,i),period:i-1})>C({values:e.close.slice(0,i),period:i-1})}includesHammer(e,t=!0){let i=t?3:4,s=t?4:void 0,a={open:e.open.slice(i,s),close:e.close.slice(i,s),low:e.low.slice(i,s),high:e.high.slice(i,s)},r=it(a);return r=r||Je(a),r}hasConfirmation(e){e.open[3];let t=e.close[3],i=(e.low[3],e.high[3],e.open[4]),s=e.close[4];e.low[4],e.high[4];return i>s&&t>s}}function Mt(e){return(new It).hasPattern(e)}class Ft extends It{constructor(){super(),this.name="HangingManUnconfirmed"}logic(e){let t=this.upwardTrend(e,!1);return t=t&&this.includesHammer(e,!1),t}}function Et(e){return(new Ft).hasPattern(e)}class At extends Fe{constructor(){super(),this.name="ShootingStar",this.requiredCount=5}logic(e){let t=this.upwardTrend(e);return t=t&&this.includesHammer(e),t=t&&this.hasConfirmation(e),t}upwardTrend(e,t=!0){let i=t?3:4;return _({values:e.close.slice(0,i),period:i-1})>C({values:e.close.slice(0,i),period:i-1})}includesHammer(e,t=!0){let i=t?3:4,s=t?4:void 0,a={open:e.open.slice(i,s),close:e.close.slice(i,s),low:e.low.slice(i,s),high:e.high.slice(i,s)},r=at(a);return r=r||et(a),r}hasConfirmation(e){e.open[3];let t=e.close[3],i=(e.low[3],e.high[3],e.open[4]),s=e.close[4];e.low[4],e.high[4];return i>s&&t>s}}function Bt(e){return(new At).hasPattern(e)}class Pt extends At{constructor(){super(),this.name="ShootingStarUnconfirmed"}logic(e){let t=this.upwardTrend(e,!1);return t=t&&this.includesHammer(e,!1),t}}function qt(e){return(new Pt).hasPattern(e)}class Vt extends Fe{constructor(){super(),this.name="TweezerTop",this.requiredCount=5}logic(e){return this.upwardTrend(e)&&e.high[3]==e.high[4]}upwardTrend(e){return _({values:e.close.slice(0,3),period:2})>C({values:e.close.slice(0,3),period:2})}}function Lt(e){return(new Vt).hasPattern(e)}let Dt=[new ft,new vt,new gt,new wt,new xt,new Ot,new St,new tt,new st,new It,new Ft,new At,new Pt,new Vt];class Rt extends Fe{constructor(){super(),this.name="Bearish Candlesticks"}hasPattern(e){return Dt.reduce((function(t,i){return t||i.hasPattern(e)}),!1)}}function Gt(e){return(new Rt).hasPattern(e)}class jt extends Fe{constructor(){super(),this.name="AbandonedBaby",this.requiredCount=3}logic(e){let t=e.open[0],i=e.close[0],s=(e.high[0],e.low[0]),a=e.open[1],r=e.close[1],o=e.high[1],n=e.low[1],c=e.open[2],d=e.close[2],h=e.high[2],l=e.low[2],u=i<t,p=(new Re).hasPattern({open:[a],close:[r],high:[o],low:[n]});return u&&p&&(o<s&&l>o&&d>c)&&h<t}}function Nt(e){return(new jt).hasPattern(e)}class Ht extends Fe{constructor(){super(),this.name="DarkCloudCover",this.requiredCount=2}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=(e.low[0],e.open[1]),r=e.close[1];e.high[1],e.low[1];return i>t&&r<a&&(a>s&&r<(i+t)/2&&r>t)}}function Ut(e){return(new Ht).hasPattern(e)}class zt extends Fe{constructor(){super(),this.requiredCount=1,this.name="DragonFlyDoji"}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=e.low[0],r=this.approximateEqual(t,i),o=r&&this.approximateEqual(t,s),n=r&&this.approximateEqual(i,a);return r&&o&&!n}}function Kt(e){return(new zt).hasPattern(e)}class Wt extends Fe{constructor(){super(),this.requiredCount=1,this.name="GraveStoneDoji"}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=e.low[0],r=this.approximateEqual(t,i),o=r&&this.approximateEqual(t,s),n=r&&this.approximateEqual(i,a);return r&&n&&!o}}function Xt(e){return(new Wt).hasPattern(e)}class Yt extends Fe{constructor(){super(),this.name="BullishSpinningTop",this.requiredCount=1}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=e.low[0],r=Math.abs(i-t),o=Math.abs(s-i),n=Math.abs(t-a);return r<o&&r<n}}function Qt(e){return(new Yt).hasPattern(e)}class Zt extends Fe{constructor(){super(),this.name="BearishSpinningTop",this.requiredCount=1}logic(e){let t=e.open[0],i=e.close[0],s=e.high[0],a=e.low[0],r=Math.abs(i-t),o=Math.abs(s-t),n=Math.abs(s-a);return r<o&&r<n}}function Jt(e){return(new Zt).hasPattern(e)}function $t(e,t){let i,s=[0,23.6,38.2,50,61.8,78.6,100,127.2,161.8,261.8,423.6];return i=e<t?s.map((function(i){let s=t-Math.abs(e-t)*i/100;return s>0?s:0})):s.map((function(i){let s=t+Math.abs(e-t)*i/100;return s>0?s:0})),i}class ei extends p{constructor(e){super(e),this.result=[];var t=Object.assign({},{conversionPeriod:9,basePeriod:26,spanPeriod:52,displacement:26},e),i=new r(2*t.conversionPeriod,!0,!0,!1),s=new r(2*t.basePeriod,!0,!0,!1),a=new r(2*t.spanPeriod,!0,!0,!1);this.generator=function*(){let e,r,o=Math.max(t.conversionPeriod,t.basePeriod,t.spanPeriod,t.displacement),n=1;for(r=yield;;){if(i.push(r.high),i.push(r.low),s.push(r.high),s.push(r.low),a.push(r.high),a.push(r.low),n<o)n++;else{let t=(i.periodHigh+i.periodLow)/2,r=(s.periodHigh+s.periodLow)/2;e={conversion:t,base:r,spanA:(t+r)/2,spanB:(a.periodHigh+a.periodLow)/2}}r=yield e}}(),this.generator.next(),e.low.forEach((t,i)=>{var s=this.generator.next({high:e.high[i],low:e.low[i]});s.value&&this.result.push(s.value)})}nextValue(e){return this.generator.next(e).value}}function ti(e){p.reverseInputs(e);var t=new ei(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}ei.calculate=ti;class ii extends u{constructor(){super(...arguments),this.maPeriod=20,this.atrPeriod=10,this.useSMA=!1,this.multiplier=1}}class si extends u{}class ai extends p{constructor(e){super(e);var t,i=new(e.useSMA?f:v)({period:e.maPeriod,values:[],format:e=>e}),s=new j({period:e.atrPeriod,high:[],low:[],close:[],format:e=>e});this.result=[],this.generator=function*(){var a;for(t=yield;;){var{close:r}=t,o=i.nextValue(r),n=s.nextValue(t);null!=o&&null!=n&&(a={middle:o,upper:o+e.multiplier*n,lower:o-e.multiplier*n}),t=yield a}}(),this.generator.next(),e.high.forEach((t,i)=>{var s={high:t,low:e.low[i],close:e.close[i]},a=this.generator.next(s);null!=a.value&&this.result.push(a.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function ri(e){p.reverseInputs(e);var t=new ai(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}ai.calculate=ri;class oi extends u{constructor(){super(...arguments),this.period=22,this.multiplier=3}}class ni extends u{}class ci extends p{constructor(e){super(e);var t=e.high,i=e.low,s=e.close;this.result=[];var a=new j({period:e.period,high:[],low:[],close:[],format:e=>e}),o=new r(2*e.period,!0,!0,!1);this.generator=function*(){for(var t,i,s=yield;;){var{high:r,low:n}=s;o.push(r),o.push(n),i=a.nextValue(s),o.totalPushed>=2*e.period&&null!=i&&(t={exitLong:o.periodHigh-i*e.multiplier,exitShort:o.periodLow+i*e.multiplier}),s=yield t}}(),this.generator.next(),t.forEach((e,t)=>{var a={high:e,low:i[t],close:s[t]},r=this.generator.next(a);null!=r.value&&this.result.push(r.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function di(e){p.reverseInputs(e);var t=new ci(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}ci.calculate=di;class hi extends p{constructor(e){super(e),this.lineA=e.lineA,this.lineB=e.lineB;var t=[],i=[];this.generator=function*(){for(var e=yield,s=!1;;){t.unshift(e.valueA),i.unshift(e.valueB),s=e.valueA>e.valueB;for(var a=1;!0===s&&t[a]>=i[a];)t[a]>i[a]?s=!1:t[a]<i[a]?s=!0:t[a]===i[a]&&(a+=1);!0===s&&(t=[e.valueA],i=[e.valueB]),e=yield s}}(),this.generator.next(),this.result=[],this.lineA.forEach((e,t)=>{var i=this.generator.next({valueA:this.lineA[t],valueB:this.lineB[t]});void 0!==i.value&&this.result.push(i.value)})}static reverseInputs(e){e.reversedInput&&(e.lineA&&e.lineA.reverse(),e.lineB&&e.lineB.reverse())}nextValue(e,t){return this.generator.next({valueA:e,valueB:t}).value}}function li(e){p.reverseInputs(e);var t=new hi(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}hi.calculate=li;class ui extends p{constructor(e){super(e),this.lineA=e.lineA,this.lineB=e.lineB;var t=[],i=[];this.generator=function*(){for(var e=yield,s=!1;;){t.unshift(e.valueA),i.unshift(e.valueB),s=e.valueA<e.valueB;for(var a=1;!0===s&&t[a]<=i[a];)t[a]<i[a]?s=!1:t[a]>i[a]?s=!0:t[a]===i[a]&&(a+=1);!0===s&&(t=[e.valueA],i=[e.valueB]),e=yield s}}(),this.generator.next(),this.result=[],this.lineA.forEach((e,t)=>{var i=this.generator.next({valueA:this.lineA[t],valueB:this.lineB[t]});void 0!==i.value&&this.result.push(i.value)})}static reverseInputs(e){e.reversedInput&&(e.lineA&&e.lineA.reverse(),e.lineB&&e.lineB.reverse())}nextValue(e,t){return this.generator.next({valueA:e,valueB:t}).value}}function pi(e){p.reverseInputs(e);var t=new ui(e).result;return e.reversedInput&&t.reverse(),p.reverseInputs(e),t}ui.calculate=pi},function(module,exports,__webpack_require__){
/*!
 * depd
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */
var callSiteToString=__webpack_require__(46).callSiteToString,eventListenerCount=__webpack_require__(46).eventListenerCount,relative=__webpack_require__(11).relative;module.exports=depd;var basePath=process.cwd();function containsNamespace(e,t){for(var i=e.split(/[ ,]+/),s=String(t).toLowerCase(),a=0;a<i.length;a++){var r=i[a];if(r&&("*"===r||r.toLowerCase()===s))return!0}return!1}function convertDataDescriptorToAccessor(e,t,i){var s=Object.getOwnPropertyDescriptor(e,t),a=s.value;return s.get=function(){return a},s.writable&&(s.set=function(e){return a=e}),delete s.value,delete s.writable,Object.defineProperty(e,t,s),s}function createArgumentsString(e){for(var t="",i=0;i<e;i++)t+=", arg"+i;return t.substr(2)}function createStackString(e){var t=this.name+": "+this.namespace;this.message&&(t+=" deprecated "+this.message);for(var i=0;i<e.length;i++)t+="\n    at "+callSiteToString(e[i]);return t}function depd(e){if(!e)throw new TypeError("argument namespace is required");var t=callSiteLocation(getStack()[1])[0];function i(e){log.call(i,e)}return i._file=t,i._ignored=isignored(e),i._namespace=e,i._traced=istraced(e),i._warned=Object.create(null),i.function=wrapfunction,i.property=wrapproperty,i}function isignored(e){return!!process.noDeprecation||containsNamespace(process.env.NO_DEPRECATION||"",e)}function istraced(e){return!!process.traceDeprecation||containsNamespace(process.env.TRACE_DEPRECATION||"",e)}function log(e,t){var i=0!==eventListenerCount(process,"deprecation");if(i||!this._ignored){var s,a,r,o,n=0,c=!1,d=getStack(),h=this._file;for(t?(o=t,(r=callSiteLocation(d[1])).name=o.name,h=r[0]):r=o=callSiteLocation(d[n=2]);n<d.length;n++)if((a=(s=callSiteLocation(d[n]))[0])===h)c=!0;else if(a===this._file)h=this._file;else if(c)break;var l=s?o.join(":")+"__"+s.join(":"):void 0;if(void 0===l||!(l in this._warned)){this._warned[l]=!0;var u=e;if(u||(u=r!==o&&r.name?defaultMessage(r):defaultMessage(o)),i){var p=DeprecationError(this._namespace,u,d.slice(n));process.emit("deprecation",p)}else{var f=(process.stderr.isTTY?formatColor:formatPlain).call(this,u,s,d.slice(n));process.stderr.write(f+"\n","utf8")}}}}function callSiteLocation(e){var t=e.getFileName()||"<anonymous>",i=e.getLineNumber(),s=e.getColumnNumber();e.isEval()&&(t=e.getEvalOrigin()+", "+t);var a=[t,i,s];return a.callSite=e,a.name=e.getFunctionName(),a}function defaultMessage(e){var t=e.callSite,i=e.name;i||(i="<anonymous@"+formatLocation(e)+">");var s=t.getThis(),a=s&&t.getTypeName();return"Object"===a&&(a=void 0),"Function"===a&&(a=s.name||a),a&&t.getMethodName()?a+"."+i:i}function formatPlain(e,t,i){var s=(new Date).toUTCString()+" "+this._namespace+" deprecated "+e;if(this._traced){for(var a=0;a<i.length;a++)s+="\n    at "+callSiteToString(i[a]);return s}return t&&(s+=" at "+formatLocation(t)),s}function formatColor(e,t,i){var s="[36;1m"+this._namespace+"[22;39m [33;1mdeprecated[22;39m [0m"+e+"[39m";if(this._traced){for(var a=0;a<i.length;a++)s+="\n    [36mat "+callSiteToString(i[a])+"[39m";return s}return t&&(s+=" [36m"+formatLocation(t)+"[39m"),s}function formatLocation(e){return relative(basePath,e[0])+":"+e[1]+":"+e[2]}function getStack(){var e=Error.stackTraceLimit,t={},i=Error.prepareStackTrace;Error.prepareStackTrace=prepareObjectStackTrace,Error.stackTraceLimit=Math.max(10,e),Error.captureStackTrace(t);var s=t.stack.slice(1);return Error.prepareStackTrace=i,Error.stackTraceLimit=e,s}function prepareObjectStackTrace(e,t){return t}function wrapfunction(fn,message){if("function"!=typeof fn)throw new TypeError("argument fn must be a function");var args=createArgumentsString(fn.length),deprecate=this,stack=getStack(),site=callSiteLocation(stack[1]);site.name=fn.name;var deprecatedfn=eval("(function ("+args+') {\n"use strict"\nlog.call(deprecate, message, site)\nreturn fn.apply(this, arguments)\n})');return deprecatedfn}function wrapproperty(e,t,i){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("argument obj must be object");var s=Object.getOwnPropertyDescriptor(e,t);if(!s)throw new TypeError("must call property on owner object");if(!s.configurable)throw new TypeError("property must be configurable");var a=this,r=callSiteLocation(getStack()[1]);r.name=t,"value"in s&&(s=convertDataDescriptorToAccessor(e,t,i));var o=s.get,n=s.set;"function"==typeof o&&(s.get=function(){return log.call(a,i,r),o.apply(this,arguments)}),"function"==typeof n&&(s.set=function(){return log.call(a,i,r),n.apply(this,arguments)}),Object.defineProperty(e,t,s)}function DeprecationError(e,t,i){var s,a=new Error;return Object.defineProperty(a,"constructor",{value:DeprecationError}),Object.defineProperty(a,"message",{configurable:!0,enumerable:!1,value:t,writable:!0}),Object.defineProperty(a,"name",{enumerable:!1,configurable:!0,value:"DeprecationError",writable:!0}),Object.defineProperty(a,"namespace",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(a,"stack",{configurable:!0,enumerable:!1,get:function(){return void 0!==s?s:s=createStackString.call(this,i)},set:function(e){s=e}}),a}},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("buffer")},function(e,t,i){"use strict";
/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(41).Buffer,a=i(63),r=i(26),o=i(10)("express"),n=i(33),c=i(42).mime,d=i(64),h=i(68),l=i(39),u=i(58);function p(e){return function(t,i){var a=s.isBuffer(t)?t:s.from(t,i);return d(a,e)}}function f(e){return l.parse(e,{allowPrototypes:!0})}function m(){return{}}t.etag=p({weak:!1}),t.wetag=p({weak:!0}),t.isAbsolute=function(e){return"/"===e[0]||(":"===e[1]&&("\\"===e[2]||"/"===e[2])||("\\\\"===e.substring(0,2)||void 0))},t.flatten=o.function(n,"utils.flatten: use array-flatten npm module instead"),t.normalizeType=function(e){return~e.indexOf("/")?function(e,t){for(var i=e.split(/ *; */),s={value:i[0],quality:1,params:{},originalIndex:t},a=1;a<i.length;++a){var r=i[a].split(/ *= */);"q"===r[0]?s.quality=parseFloat(r[1]):s.params[r[0]]=r[1]}return s}(e):{value:c.lookup(e),params:{}}},t.normalizeTypes=function(e){for(var i=[],s=0;s<e.length;++s)i.push(t.normalizeType(e[s]));return i},t.contentDisposition=o.function(a,"utils.contentDisposition: use content-disposition npm module instead"),t.compileETag=function(e){var i;if("function"==typeof e)return e;switch(e){case!0:i=t.wetag;break;case!1:break;case"strong":i=t.etag;break;case"weak":i=t.wetag;break;default:throw new TypeError("unknown value for etag function: "+e)}return i},t.compileQueryParser=function(e){var t;if("function"==typeof e)return e;switch(e){case!0:t=u.parse;break;case!1:t=m;break;case"extended":t=f;break;case"simple":t=u.parse;break;default:throw new TypeError("unknown value for query parser function: "+e)}return t},t.compileTrust=function(e){return"function"==typeof e?e:!0===e?function(){return!0}:"number"==typeof e?function(t,i){return i<e}:("string"==typeof e&&(e=e.split(/ *, */)),h.compile(e||[]))},t.setCharset=function(e,t){if(!e||!t)return e;var i=r.parse(e);return i.parameters.charset=t,r.format(i)}},function(e,t){e.exports=require("fs")},function(e,t,i){"use strict";var s,a=i(14),r=a.Buffer,o={};for(s in a)a.hasOwnProperty(s)&&"SlowBuffer"!==s&&"Buffer"!==s&&(o[s]=a[s]);var n=o.Buffer={};for(s in r)r.hasOwnProperty(s)&&"allocUnsafe"!==s&&"allocUnsafeSlow"!==s&&(n[s]=r[s]);if(o.Buffer.prototype=r.prototype,n.from&&n.from!==Uint8Array.from||(n.from=function(e,t,i){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return r(e,t,i)}),n.alloc||(n.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var s=r(e);return t&&0!==t.length?"string"==typeof i?s.fill(t,i):s.fill(t):s.fill(0),s}),!o.kStringMaxLength)try{o.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}o.constants||(o.constants={MAX_LENGTH:o.kMaxLength},o.kStringMaxLength&&(o.constants.MAX_STRING_LENGTH=o.kStringMaxLength)),e.exports=o},function(e,t,i){"use strict";var s=t,a=i(3);function r(e,t){var i=[];return t>0&&i.push(e>>>24),t>1&&i.push(e>>>16&255),t>2&&i.push(e>>>8&255),t>3&&i.push(255&e),i}function o(e){return 1===e.length?"0"+e:e}function n(e){for(var t="",i=0;i<e.length;i++)t+=o(e[i].toString(16));return t}s.assert=function(e,t){if(!e)throw new Error(t)},s.getNAF=function(e,t){for(var i=[],s=1<<t+1,a=e.clone();a.cmpn(1)>=0;){var r;if(a.isOdd()){var o=a.andln(s-1);r=o>(s>>1)-1?(s>>1)-o:o,a.isubn(r)}else r=0;i.push(r);for(var n=0!==a.cmpn(0)&&0===a.andln(s-1)?t+1:1,c=1;c<n;c++)i.push(0);a.iushrn(n)}return i},s.getJSF=function(e,t){var i=[[],[]];e=e.clone(),t=t.clone();for(var s=0,a=0;e.cmpn(-s)>0||t.cmpn(-a)>0;){var r,o,n,c=e.andln(3)+s&3,d=t.andln(3)+a&3;if(3===c&&(c=-1),3===d&&(d=-1),0==(1&c))r=0;else r=3!==(n=e.andln(7)+s&7)&&5!==n||2!==d?c:-c;if(i[0].push(r),0==(1&d))o=0;else o=3!==(n=t.andln(7)+a&7)&&5!==n||2!==c?d:-d;i[1].push(o),2*s===r+1&&(s=1-s),2*a===o+1&&(a=1-a),e.iushrn(1),t.iushrn(1)}return i},s.cachedProperty=function(e,t,i){var s="_"+t;e.prototype[t]=function(){return void 0!==this[s]?this[s]:this[s]=i.call(this)}},s.parseBytes=function(e){return"string"==typeof e?s.toArray(e,"hex"):e},s.intFromLE=function(e){return new a(e,"hex","le")},s.wordArrayToBuffer=function(e){let t=void 0;if(!e.hasOwnProperty("sigBytes")||!e.hasOwnProperty("words"))throw Error("Argument not a wordArray");t=e.sigBytes,e=e.words;const i=[];let s=[],a=0;for(;t>0;)s=r(e[a],Math.min(4,t)),t-=s.length,i.push(s),a++;return[].concat.apply([],i)},s.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var i=[];if("string"!=typeof e){for(var s=0;s<e.length;s++)i[s]=0|e[s];return i}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(s=0;s<e.length;s+=2)i.push(parseInt(e[s]+e[s+1],16))}else for(s=0;s<e.length;s++){var a=e.charCodeAt(s),r=a>>8,o=255&a;r?i.push(r,o):i.push(o)}return i},s.zero2=o,s.toHex=n,s.encode=function(e,t){return"hex"===t?n(e):e}},function(e,t,i){"use strict";
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */e.exports=function(e,t){if("string"==typeof e)return c(e);if("number"==typeof e)return n(e,t);return null},e.exports.format=n,e.exports.parse=c;var s=/\B(?=(\d{3})+(?!\d))/g,a=/(?:\.0*|(\.[^0]+)0+)$/,r={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},o=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function n(e,t){if(!Number.isFinite(e))return null;var i=Math.abs(e),o=t&&t.thousandsSeparator||"",n=t&&t.unitSeparator||"",c=t&&void 0!==t.decimalPlaces?t.decimalPlaces:2,d=Boolean(t&&t.fixedDecimals),h=t&&t.unit||"";h&&r[h.toLowerCase()]||(h=i>=r.pb?"PB":i>=r.tb?"TB":i>=r.gb?"GB":i>=r.mb?"MB":i>=r.kb?"KB":"B");var l=(e/r[h.toLowerCase()]).toFixed(c);return d||(l=l.replace(a,"$1")),o&&(l=l.replace(s,o)),l+n+h}function c(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,i=o.exec(e),s="b";return i?(t=parseFloat(i[1]),s=i[4].toLowerCase()):(t=parseInt(e,10),s="b"),Math.floor(r[s]*t)}},function(e,t,i){"use strict";
/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(10)("http-errors"),a=i(27),r=i(28),o=i(104),n=i(106);function c(e){return Number(String(e).charAt(0)+"00")}function d(e,t){var i=Object.getOwnPropertyDescriptor(e,"name");i&&i.configurable&&(i.value=t,Object.defineProperty(e,"name",i))}e.exports=function e(){for(var t,i,a=500,o={},n=0;n<arguments.length;n++){var d=arguments[n];if(d instanceof Error)a=(t=d).status||t.statusCode||a;else switch(typeof d){case"string":i=d;break;case"number":a=d,0!==n&&s("non-first-argument status code; replace with createError("+d+", ...)");break;case"object":o=d}}"number"==typeof a&&(a<400||a>=600)&&s("non-error status code; use only 4xx or 5xx status codes");("number"!=typeof a||!r[a]&&(a<400||a>=600))&&(a=500);var h=e[a]||e[c(a)];t||(t=h?new h(i):new Error(i||r[a]),Error.captureStackTrace(t,e));h&&t instanceof h&&t.status===a||(t.expose=a<500,t.status=t.statusCode=a);for(var l in o)"status"!==l&&"statusCode"!==l&&(t[l]=o[l]);return t},e.exports.HttpError=function(){function e(){throw new TypeError("cannot construct abstract class")}return o(e,Error),e}(),function(e,t,i){t.forEach((function(t){var s,h=n(r[t]);switch(c(t)){case 400:s=function(e,t,i){var s=t.match(/Error$/)?t:t+"Error";function n(e){var t=null!=e?e:r[i],o=new Error(t);return Error.captureStackTrace(o,n),a(o,n.prototype),Object.defineProperty(o,"message",{enumerable:!0,configurable:!0,value:t,writable:!0}),Object.defineProperty(o,"name",{enumerable:!1,configurable:!0,value:s,writable:!0}),o}return o(n,e),d(n,s),n.prototype.status=i,n.prototype.statusCode=i,n.prototype.expose=!0,n}(i,h,t);break;case 500:s=function(e,t,i){var s=t.match(/Error$/)?t:t+"Error";function n(e){var t=null!=e?e:r[i],o=new Error(t);return Error.captureStackTrace(o,n),a(o,n.prototype),Object.defineProperty(o,"message",{enumerable:!0,configurable:!0,value:t,writable:!0}),Object.defineProperty(o,"name",{enumerable:!1,configurable:!0,value:s,writable:!0}),o}return o(n,e),d(n,s),n.prototype.status=i,n.prototype.statusCode=i,n.prototype.expose=!1,n}(i,h,t)}s&&(e[t]=s,e[h]=s)})),e["I'mateapot"]=s.function(e.ImATeapot,'"I\'mateapot"; use "ImATeapot" instead')}(e.exports,r.codes,e.exports.HttpError)},function(e,t,i){"use strict";
/*!
 * type-is
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(131),a=i(55);function r(e,t){var i,s,a=t,r=d(e);if(!r)return!1;if(a&&!Array.isArray(a))for(a=new Array(arguments.length-1),i=0;i<a.length;i++)a[i]=arguments[i+1];if(!a||!a.length)return r;for(i=0;i<a.length;i++)if(c(n(s=a[i]),r))return"+"===s[0]||-1!==s.indexOf("*")?r:s;return!1}function o(e){return void 0!==e.headers["transfer-encoding"]||!isNaN(e.headers["content-length"])}function n(e){if("string"!=typeof e)return!1;switch(e){case"urlencoded":return"application/x-www-form-urlencoded";case"multipart":return"multipart/*"}return"+"===e[0]?"*/*"+e:-1===e.indexOf("/")?a.lookup(e):e}function c(e,t){if(!1===e)return!1;var i=t.split("/"),s=e.split("/");return 2===i.length&&2===s.length&&(("*"===s[0]||s[0]===i[0])&&("*+"===s[1].substr(0,2)?s[1].length<=i[1].length+1&&s[1].substr(1)===i[1].substr(1-s[1].length):"*"===s[1]||s[1]===i[1]))}function d(e){if(!e)return null;try{return function(e){var t=s.parse(e);return t.parameters=void 0,s.format(t)}(e)}catch(e){return null}}e.exports=function(e,t){var i=t;if(!o(e))return null;if(arguments.length>2){i=new Array(arguments.length-1);for(var s=0;s<i.length;s++)i[s]=arguments[s+1]}var a=e.headers["content-type"];return r(a,i)},e.exports.is=r,e.exports.hasBody=o,e.exports.normalize=n,e.exports.match=c},function(e,t,i){"use strict";
/*!
 * parseurl
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(23),a=s.parse,r=s.Url;function o(e){var t=e.url;if(void 0!==t){var i=e._parsedUrl;return c(t,i)?i:((i=n(t))._raw=t,e._parsedUrl=i)}}function n(e){if("string"!=typeof e||47!==e.charCodeAt(0))return a(e);for(var t=e,i=null,s=null,o=1;o<e.length;o++)switch(e.charCodeAt(o)){case 63:null===s&&(t=e.substring(0,o),i=e.substring(o+1),s=e.substring(o));break;case 9:case 10:case 12:case 13:case 32:case 35:case 160:case 65279:return a(e)}var n=void 0!==r?new r:{};return n.path=e,n.href=e,n.pathname=t,null!==s&&(n.query=i,n.search=s),n}function c(e,t){return"object"==typeof t&&null!==t&&(void 0===r||t instanceof r)&&t._raw===e}e.exports=o,e.exports.original=function(e){var t=e.originalUrl;if("string"!=typeof t)return o(e);var i=e._parsedOriginalUrl;if(c(t,i))return i;return(i=n(t))._raw=t,e._parsedOriginalUrl=i}},function(e,t){e.exports=require("url")},function(e,t,i){"use strict";const s=i(25),a=i(181),r=i(3),o="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let n=null,c=null;function d(e){const t=[];for(let i=0;i<e.length;i++)t[i/4|0]|=e[i]<<24-8*i;return s.lib.WordArray.create(t,e.length)}e.exports={json:(e,t)=>JSON.stringify(e),unjson:JSON.parse,isJsonEncodedObject:e=>"string"==typeof e&&e.length>=2&&("{"===e[0]||"["===e[0]),stringToBinary:e=>s.enc.Latin1.parse(e),stringToBase64:e=>s.enc.Latin1.parse(e).toString(s.enc.Base64),base64ToBinary:e=>s.enc.Base64.parse(e),base64ToString:e=>s.enc.Base64.parse(e).toString(s.enc.Utf8),binaryToBase64:e=>e.toString(s.enc.Base64),base16ToBinary:e=>s.enc.Hex.parse(e),binaryToBase16:e=>e.toString(s.enc.Hex),binaryConcat:(...e)=>e.reduce((e,t)=>e.concat(t)),binaryConcatArray:e=>e.reduce((e,t)=>e.concat(t)),urlencode:e=>a.stringify(e),urlencodeWithArrayRepeat:e=>a.stringify(e,{arrayFormat:"repeat"}),rawencode:e=>a.stringify(e,{encode:!1}),encode:e=>e,decode:e=>e,urlencodeBase64:e=>e.replace(/[=]+$/,"").replace(/\+/g,"-").replace(/\//g,"_"),numberToLE:(e,t)=>d(new r(e).toArray("le",t)),numberToBE:(e,t)=>d(new r(e).toArray("be",t)),base58ToBinary:e=>{if(!n){n={},c={};for(let e=0;e<58;e++){const t=o[e],i=new r(e);n[t]=i,c[i]=t}}let t=new r(0);const i=new r(58);for(let s=0;s<e.length;s++){const a=e[s];t.imul(i),t.iadd(n[a])}return d(t.toArray("be"))},binaryToBase58:e=>{if(!c){n={},c={};for(let e=0;e<58;e++){const t=o[e],i=new r(e);n[t]=i,c[i]=t}}const t=new r(58),i=e.toString(s.enc.Hex);let a=new r(i,16),d=[];for(;!a.isZero();){const{div:e,mod:i}=a.divmod(t);a=e,d.push(c[i])}return d.reverse().join("")}},e.exports.byteArrayToWordArray=d},function(e,t,i){var s,a,r,o,n,c;e.exports=(c=c||function(e,t){var i=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),s={},a=s.lib={},r=a.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=a.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,i=e.words,s=this.sigBytes,a=e.sigBytes;if(this.clamp(),s%4)for(var r=0;r<a;r++){var o=i[r>>>2]>>>24-r%4*8&255;t[s+r>>>2]|=o<<24-(s+r)%4*8}else for(r=0;r<a;r+=4)t[s+r>>>2]=i[r>>>2];return this.sigBytes+=a,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i,s=[],a=function(t){t=t;var i=987654321,s=4294967295;return function(){var a=((i=36969*(65535&i)+(i>>16)&s)<<16)+(t=18e3*(65535&t)+(t>>16)&s)&s;return a/=4294967296,(a+=.5)*(e.random()>.5?1:-1)}},r=0;r<t;r+=4){var n=a(4294967296*(i||e.random()));i=987654071*n(),s.push(4294967296*n()|0)}return new o.init(s,t)}}),n=s.enc={},c=n.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],a=0;a<i;a++){var r=t[a>>>2]>>>24-a%4*8&255;s.push((r>>>4).toString(16)),s.push((15&r).toString(16))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s+=2)i[s>>>3]|=parseInt(e.substr(s,2),16)<<24-s%8*4;return new o.init(i,t/2)}},d=n.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],a=0;a<i;a++){var r=t[a>>>2]>>>24-a%4*8&255;s.push(String.fromCharCode(r))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>2]|=(255&e.charCodeAt(s))<<24-s%4*8;return new o.init(i,t)}},h=n.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},l=a.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,s=i.words,a=i.sigBytes,r=this.blockSize,n=a/(4*r),c=(n=t?e.ceil(n):e.max((0|n)-this._minBufferSize,0))*r,d=e.min(4*c,a);if(c){for(var h=0;h<c;h+=r)this._doProcessBlock(s,h);var l=s.splice(0,c);i.sigBytes-=d}return new o.init(l,d)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),u=(a.Hasher=l.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new u.HMAC.init(e,i).finalize(t)}}}),s.algo={});return s}(Math),n=(o=c).lib.WordArray,o.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,s=this._map;e.clamp();for(var a=[],r=0;r<i;r+=3)for(var o=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,n=0;n<4&&r+.75*n<i;n++)a.push(s.charAt(o>>>6*(3-n)&63));var c=s.charAt(64);if(c)for(;a.length%4;)a.push(c);return a.join("")},parse:function(e){var t=e.length,i=this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var a=0;a<i.length;a++)s[i.charCodeAt(a)]=a}var r=i.charAt(64);if(r){var o=e.indexOf(r);-1!==o&&(t=o)}return function(e,t,i){for(var s=[],a=0,r=0;r<t;r++)if(r%4){var o=i[e.charCodeAt(r-1)]<<r%4*2,c=i[e.charCodeAt(r)]>>>6-r%4*2;s[a>>>2]|=(o|c)<<24-a%4*8,a++}return n.create(s,a)}(e,t,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){var t=c,i=t.lib,s=i.WordArray,a=i.Hasher,r=t.algo,o=[];!function(){for(var t=0;t<64;t++)o[t]=4294967296*e.abs(e.sin(t+1))|0}();var n=r.MD5=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var s=t+i,a=e[s];e[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var r=this._hash.words,n=e[t+0],c=e[t+1],p=e[t+2],f=e[t+3],m=e[t+4],v=e[t+5],y=e[t+6],g=e[t+7],b=e[t+8],w=e[t+9],k=e[t+10],x=e[t+11],T=e[t+12],O=e[t+13],_=e[t+14],S=e[t+15],C=r[0],I=r[1],M=r[2],F=r[3];C=d(C,I,M,F,n,7,o[0]),F=d(F,C,I,M,c,12,o[1]),M=d(M,F,C,I,p,17,o[2]),I=d(I,M,F,C,f,22,o[3]),C=d(C,I,M,F,m,7,o[4]),F=d(F,C,I,M,v,12,o[5]),M=d(M,F,C,I,y,17,o[6]),I=d(I,M,F,C,g,22,o[7]),C=d(C,I,M,F,b,7,o[8]),F=d(F,C,I,M,w,12,o[9]),M=d(M,F,C,I,k,17,o[10]),I=d(I,M,F,C,x,22,o[11]),C=d(C,I,M,F,T,7,o[12]),F=d(F,C,I,M,O,12,o[13]),M=d(M,F,C,I,_,17,o[14]),C=h(C,I=d(I,M,F,C,S,22,o[15]),M,F,c,5,o[16]),F=h(F,C,I,M,y,9,o[17]),M=h(M,F,C,I,x,14,o[18]),I=h(I,M,F,C,n,20,o[19]),C=h(C,I,M,F,v,5,o[20]),F=h(F,C,I,M,k,9,o[21]),M=h(M,F,C,I,S,14,o[22]),I=h(I,M,F,C,m,20,o[23]),C=h(C,I,M,F,w,5,o[24]),F=h(F,C,I,M,_,9,o[25]),M=h(M,F,C,I,f,14,o[26]),I=h(I,M,F,C,b,20,o[27]),C=h(C,I,M,F,O,5,o[28]),F=h(F,C,I,M,p,9,o[29]),M=h(M,F,C,I,g,14,o[30]),C=l(C,I=h(I,M,F,C,T,20,o[31]),M,F,v,4,o[32]),F=l(F,C,I,M,b,11,o[33]),M=l(M,F,C,I,x,16,o[34]),I=l(I,M,F,C,_,23,o[35]),C=l(C,I,M,F,c,4,o[36]),F=l(F,C,I,M,m,11,o[37]),M=l(M,F,C,I,g,16,o[38]),I=l(I,M,F,C,k,23,o[39]),C=l(C,I,M,F,O,4,o[40]),F=l(F,C,I,M,n,11,o[41]),M=l(M,F,C,I,f,16,o[42]),I=l(I,M,F,C,y,23,o[43]),C=l(C,I,M,F,w,4,o[44]),F=l(F,C,I,M,T,11,o[45]),M=l(M,F,C,I,S,16,o[46]),C=u(C,I=l(I,M,F,C,p,23,o[47]),M,F,n,6,o[48]),F=u(F,C,I,M,g,10,o[49]),M=u(M,F,C,I,_,15,o[50]),I=u(I,M,F,C,v,21,o[51]),C=u(C,I,M,F,T,6,o[52]),F=u(F,C,I,M,f,10,o[53]),M=u(M,F,C,I,k,15,o[54]),I=u(I,M,F,C,c,21,o[55]),C=u(C,I,M,F,b,6,o[56]),F=u(F,C,I,M,S,10,o[57]),M=u(M,F,C,I,y,15,o[58]),I=u(I,M,F,C,O,21,o[59]),C=u(C,I,M,F,m,6,o[60]),F=u(F,C,I,M,x,10,o[61]),M=u(M,F,C,I,p,15,o[62]),I=u(I,M,F,C,w,21,o[63]),r[0]=r[0]+C|0,r[1]=r[1]+I|0,r[2]=r[2]+M|0,r[3]=r[3]+F|0},_doFinalize:function(){var t=this._data,i=t.words,s=8*this._nDataBytes,a=8*t.sigBytes;i[a>>>5]|=128<<24-a%32;var r=e.floor(s/4294967296),o=s;i[15+(a+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),i[14+(a+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(i.length+1),this._process();for(var n=this._hash,c=n.words,d=0;d<4;d++){var h=c[d];c[d]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}return n},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function d(e,t,i,s,a,r,o){var n=e+(t&i|~t&s)+a+o;return(n<<r|n>>>32-r)+t}function h(e,t,i,s,a,r,o){var n=e+(t&s|i&~s)+a+o;return(n<<r|n>>>32-r)+t}function l(e,t,i,s,a,r,o){var n=e+(t^i^s)+a+o;return(n<<r|n>>>32-r)+t}function u(e,t,i,s,a,r,o){var n=e+(i^(t|~s))+a+o;return(n<<r|n>>>32-r)+t}t.MD5=a._createHelper(n),t.HmacMD5=a._createHmacHelper(n)}(Math),function(){var e=c,t=e.lib,i=t.WordArray,s=t.Hasher,a=e.algo,r=[],o=a.SHA1=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],a=i[1],o=i[2],n=i[3],c=i[4],d=0;d<80;d++){if(d<16)r[d]=0|e[t+d];else{var h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=h<<1|h>>>31}var l=(s<<5|s>>>27)+c+r[d];l+=d<20?1518500249+(a&o|~a&n):d<40?1859775393+(a^o^n):d<60?(a&o|a&n|o&n)-1894007588:(a^o^n)-899497514,c=n,n=o,o=a<<30|a>>>2,a=s,s=l}i[0]=i[0]+s|0,i[1]=i[1]+a|0,i[2]=i[2]+o|0,i[3]=i[3]+n|0,i[4]=i[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[14+(s+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(s+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=s._createHelper(o),e.HmacSHA1=s._createHmacHelper(o)}(),function(e){var t=c,i=t.lib,s=i.WordArray,a=i.Hasher,r=t.algo,o=[],n=[];!function(){function t(t){for(var i=e.sqrt(t),s=2;s<=i;s++)if(!(t%s))return!1;return!0}function i(e){return 4294967296*(e-(0|e))|0}for(var s=2,a=0;a<64;)t(s)&&(a<8&&(o[a]=i(e.pow(s,.5))),n[a]=i(e.pow(s,1/3)),a++),s++}();var d=[],h=r.SHA256=a.extend({_doReset:function(){this._hash=new s.init(o.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],a=i[1],r=i[2],o=i[3],c=i[4],h=i[5],l=i[6],u=i[7],p=0;p<64;p++){if(p<16)d[p]=0|e[t+p];else{var f=d[p-15],m=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,v=d[p-2],y=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;d[p]=m+d[p-7]+y+d[p-16]}var g=s&a^s&r^a&r,b=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),w=u+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&h^~c&l)+n[p]+d[p];u=l,l=h,h=c,c=o+w|0,o=r,r=a,a=s,s=w+(b+g)|0}i[0]=i[0]+s|0,i[1]=i[1]+a|0,i[2]=i[2]+r|0,i[3]=i[3]+o|0,i[4]=i[4]+c|0,i[5]=i[5]+h|0,i[6]=i[6]+l|0,i[7]=i[7]+u|0},_doFinalize:function(){var t=this._data,i=t.words,s=8*this._nDataBytes,a=8*t.sigBytes;return i[a>>>5]|=128<<24-a%32,i[14+(a+64>>>9<<4)]=e.floor(s/4294967296),i[15+(a+64>>>9<<4)]=s,t.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=a._createHelper(h),t.HmacSHA256=a._createHmacHelper(h)}(Math),function(){var e=c,t=e.lib.WordArray,i=e.enc;function s(e){return e<<8&4278255360|e>>>8&16711935}i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],a=0;a<i;a+=2){var r=t[a>>>2]>>>16-a%4*8&65535;s.push(String.fromCharCode(r))}return s.join("")},parse:function(e){for(var i=e.length,s=[],a=0;a<i;a++)s[a>>>1]|=e.charCodeAt(a)<<16-a%2*16;return t.create(s,2*i)}},i.Utf16LE={stringify:function(e){for(var t=e.words,i=e.sigBytes,a=[],r=0;r<i;r+=2){var o=s(t[r>>>2]>>>16-r%4*8&65535);a.push(String.fromCharCode(o))}return a.join("")},parse:function(e){for(var i=e.length,a=[],r=0;r<i;r++)a[r>>>1]|=s(e.charCodeAt(r)<<16-r%2*16);return t.create(a,2*i)}}}(),function(){if("function"==typeof ArrayBuffer){var e=c.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var i=e.byteLength,s=[],a=0;a<i;a++)s[a>>>2]|=e[a]<<24-a%4*8;t.call(this,s,i)}else t.apply(this,arguments)}).prototype=e}}(),
/** @preserve
	(c) 2012 by Cdric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
function(e){var t=c,i=t.lib,s=i.WordArray,a=i.Hasher,r=t.algo,o=s.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),n=s.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=s.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=s.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),l=s.create([0,1518500249,1859775393,2400959708,2840853838]),u=s.create([1352829926,1548603684,1836072691,2053994217,0]),p=r.RIPEMD160=a.extend({_doReset:function(){this._hash=s.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var s=t+i,a=e[s];e[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var r,c,p,w,k,x,T,O,_,S,C,I=this._hash.words,M=l.words,F=u.words,E=o.words,A=n.words,B=d.words,P=h.words;for(x=r=I[0],T=c=I[1],O=p=I[2],_=w=I[3],S=k=I[4],i=0;i<80;i+=1)C=r+e[t+E[i]]|0,C+=i<16?f(c,p,w)+M[0]:i<32?m(c,p,w)+M[1]:i<48?v(c,p,w)+M[2]:i<64?y(c,p,w)+M[3]:g(c,p,w)+M[4],C=(C=b(C|=0,B[i]))+k|0,r=k,k=w,w=b(p,10),p=c,c=C,C=x+e[t+A[i]]|0,C+=i<16?g(T,O,_)+F[0]:i<32?y(T,O,_)+F[1]:i<48?v(T,O,_)+F[2]:i<64?m(T,O,_)+F[3]:f(T,O,_)+F[4],C=(C=b(C|=0,P[i]))+S|0,x=S,S=_,_=b(O,10),O=T,T=C;C=I[1]+p+_|0,I[1]=I[2]+w+S|0,I[2]=I[3]+k+x|0,I[3]=I[4]+r+T|0,I[4]=I[0]+c+O|0,I[0]=C},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;t[s>>>5]|=128<<24-s%32,t[14+(s+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var a=this._hash,r=a.words,o=0;o<5;o++){var n=r[o];r[o]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}return a},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function f(e,t,i){return e^t^i}function m(e,t,i){return e&t|~e&i}function v(e,t,i){return(e|~t)^i}function y(e,t,i){return e&i|t&~i}function g(e,t,i){return e^(t|~i)}function b(e,t){return e<<t|e>>>32-t}t.RIPEMD160=a._createHelper(p),t.HmacRIPEMD160=a._createHmacHelper(p)}(Math),function(){var e=c,t=e.lib.Base,i=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var s=e.blockSize,a=4*s;t.sigBytes>a&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),o=this._iKey=t.clone(),n=r.words,c=o.words,d=0;d<s;d++)n[d]^=1549556828,c[d]^=909522486;r.sigBytes=o.sigBytes=a,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(i))}})}(),function(){var e=c,t=e.lib,i=t.Base,s=t.WordArray,a=e.algo,r=a.SHA1,o=a.HMAC,n=a.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:r,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,a=o.create(i.hasher,e),r=s.create(),n=s.create([1]),c=r.words,d=n.words,h=i.keySize,l=i.iterations;c.length<h;){var u=a.update(t).finalize(n);a.reset();for(var p=u.words,f=p.length,m=u,v=1;v<l;v++){m=a.finalize(m),a.reset();for(var y=m.words,g=0;g<f;g++)p[g]^=y[g]}r.concat(u),d[0]++}return r.sigBytes=4*h,r}});e.PBKDF2=function(e,t,i){return n.create(i).compute(e,t)}}(),function(){var e=c,t=e.lib,i=t.Base,s=t.WordArray,a=e.algo,r=a.MD5,o=a.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:r,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,a=i.hasher.create(),r=s.create(),o=r.words,n=i.keySize,c=i.iterations;o.length<n;){d&&a.update(d);var d=a.update(e).finalize(t);a.reset();for(var h=1;h<c;h++)d=a.finalize(d),a.reset();r.concat(d)}return r.sigBytes=4*n,r}});e.EvpKDF=function(e,t,i){return o.create(i).compute(e,t)}}(),function(){var e=c,t=e.lib.WordArray,i=e.algo,s=i.SHA256,a=i.SHA224=s.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=s._createHelper(a),e.HmacSHA224=s._createHmacHelper(a)}(),function(e){var t=c,i=t.lib,s=i.Base,a=i.WordArray,r=t.x64={};r.Word=s.extend({init:function(e,t){this.high=e,this.low=t}}),r.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],s=0;s<t;s++){var r=e[s];i.push(r.high),i.push(r.low)}return a.create(i,this.sigBytes)},clone:function(){for(var e=s.clone.call(this),t=e.words=this.words.slice(0),i=t.length,a=0;a<i;a++)t[a]=t[a].clone();return e}})}(),function(e){var t=c,i=t.lib,s=i.WordArray,a=i.Hasher,r=t.x64.Word,o=t.algo,n=[],d=[],h=[];!function(){for(var e=1,t=0,i=0;i<24;i++){n[e+5*t]=(i+1)*(i+2)/2%64;var s=(2*e+3*t)%5;e=t%5,t=s}for(e=0;e<5;e++)for(t=0;t<5;t++)d[e+5*t]=t+(2*e+3*t)%5*5;for(var a=1,o=0;o<24;o++){for(var c=0,l=0,u=0;u<7;u++){if(1&a){var p=(1<<u)-1;p<32?l^=1<<p:c^=1<<p-32}128&a?a=a<<1^113:a<<=1}h[o]=r.create(c,l)}}();var l=[];!function(){for(var e=0;e<25;e++)l[e]=r.create()}();var u=o.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new r.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var i=this._state,s=this.blockSize/2,a=0;a<s;a++){var r=e[t+2*a],o=e[t+2*a+1];r=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),(I=i[a]).high^=o,I.low^=r}for(var c=0;c<24;c++){for(var u=0;u<5;u++){for(var p=0,f=0,m=0;m<5;m++)p^=(I=i[u+5*m]).high,f^=I.low;var v=l[u];v.high=p,v.low=f}for(u=0;u<5;u++){var y=l[(u+4)%5],g=l[(u+1)%5],b=g.high,w=g.low;for(p=y.high^(b<<1|w>>>31),f=y.low^(w<<1|b>>>31),m=0;m<5;m++)(I=i[u+5*m]).high^=p,I.low^=f}for(var k=1;k<25;k++){var x=(I=i[k]).high,T=I.low,O=n[k];O<32?(p=x<<O|T>>>32-O,f=T<<O|x>>>32-O):(p=T<<O-32|x>>>64-O,f=x<<O-32|T>>>64-O);var _=l[d[k]];_.high=p,_.low=f}var S=l[0],C=i[0];for(S.high=C.high,S.low=C.low,u=0;u<5;u++)for(m=0;m<5;m++){var I=i[k=u+5*m],M=l[k],F=l[(u+1)%5+5*m],E=l[(u+2)%5+5*m];I.high=M.high^~F.high&E.high,I.low=M.low^~F.low&E.low}I=i[0];var A=h[c];I.high^=A.high,I.low^=A.low}},_doFinalize:function(){var t=this._data,i=t.words,a=(this._nDataBytes,8*t.sigBytes),r=32*this.blockSize;i[a>>>5]|=1<<24-a%32,i[(e.ceil((a+1)/r)*r>>>5)-1]|=128,t.sigBytes=4*i.length,this._process();for(var o=this._state,n=this.cfg.outputLength/8,c=n/8,d=[],h=0;h<c;h++){var l=o[h],u=l.high,p=l.low;u=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),d.push(p),d.push(u)}return new s.init(d,n)},clone:function(){for(var e=a.clone.call(this),t=e._state=this._state.slice(0),i=0;i<25;i++)t[i]=t[i].clone();return e}});t.SHA3=a._createHelper(u),t.HmacSHA3=a._createHmacHelper(u)}(Math),function(){var e=c,t=e.lib.Hasher,i=e.x64,s=i.Word,a=i.WordArray,r=e.algo;function o(){return s.create.apply(s,arguments)}var n=[o(1116352408,3609767458),o(1899447441,602891725),o(3049323471,3964484399),o(3921009573,2173295548),o(961987163,4081628472),o(1508970993,3053834265),o(2453635748,2937671579),o(2870763221,3664609560),o(3624381080,2734883394),o(310598401,1164996542),o(607225278,1323610764),o(1426881987,3590304994),o(1925078388,4068182383),o(2162078206,991336113),o(2614888103,633803317),o(3248222580,3479774868),o(3835390401,2666613458),o(4022224774,944711139),o(264347078,2341262773),o(604807628,2007800933),o(770255983,1495990901),o(1249150122,1856431235),o(1555081692,3175218132),o(1996064986,2198950837),o(2554220882,3999719339),o(2821834349,766784016),o(2952996808,2566594879),o(3210313671,3203337956),o(3336571891,1034457026),o(3584528711,2466948901),o(113926993,3758326383),o(338241895,168717936),o(666307205,1188179964),o(773529912,1546045734),o(1294757372,1522805485),o(1396182291,2643833823),o(1695183700,2343527390),o(1986661051,1014477480),o(2177026350,1206759142),o(2456956037,344077627),o(2730485921,1290863460),o(2820302411,3158454273),o(3259730800,3505952657),o(3345764771,106217008),o(3516065817,3606008344),o(3600352804,1432725776),o(4094571909,1467031594),o(275423344,851169720),o(430227734,3100823752),o(506948616,1363258195),o(659060556,3750685593),o(883997877,3785050280),o(958139571,3318307427),o(1322822218,3812723403),o(1537002063,2003034995),o(1747873779,3602036899),o(1955562222,1575990012),o(2024104815,1125592928),o(2227730452,2716904306),o(2361852424,442776044),o(2428436474,593698344),o(2756734187,3733110249),o(3204031479,2999351573),o(3329325298,3815920427),o(3391569614,3928383900),o(3515267271,566280711),o(3940187606,3454069534),o(4118630271,4000239992),o(116418474,1914138554),o(174292421,2731055270),o(289380356,3203993006),o(460393269,320620315),o(685471733,587496836),o(852142971,1086792851),o(1017036298,365543100),o(1126000580,2618297676),o(1288033470,3409855158),o(1501505948,4234509866),o(1607167915,987167468),o(1816402316,1246189591)],d=[];!function(){for(var e=0;e<80;e++)d[e]=o()}();var h=r.SHA512=t.extend({_doReset:function(){this._hash=new a.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],a=i[1],r=i[2],o=i[3],c=i[4],h=i[5],l=i[6],u=i[7],p=s.high,f=s.low,m=a.high,v=a.low,y=r.high,g=r.low,b=o.high,w=o.low,k=c.high,x=c.low,T=h.high,O=h.low,_=l.high,S=l.low,C=u.high,I=u.low,M=p,F=f,E=m,A=v,B=y,P=g,q=b,V=w,L=k,D=x,R=T,G=O,j=_,N=S,H=C,U=I,z=0;z<80;z++){var K=d[z];if(z<16)var W=K.high=0|e[t+2*z],X=K.low=0|e[t+2*z+1];else{var Y=d[z-15],Q=Y.high,Z=Y.low,J=(Q>>>1|Z<<31)^(Q>>>8|Z<<24)^Q>>>7,$=(Z>>>1|Q<<31)^(Z>>>8|Q<<24)^(Z>>>7|Q<<25),ee=d[z-2],te=ee.high,ie=ee.low,se=(te>>>19|ie<<13)^(te<<3|ie>>>29)^te>>>6,ae=(ie>>>19|te<<13)^(ie<<3|te>>>29)^(ie>>>6|te<<26),re=d[z-7],oe=re.high,ne=re.low,ce=d[z-16],de=ce.high,he=ce.low;W=(W=(W=J+oe+((X=$+ne)>>>0<$>>>0?1:0))+se+((X+=ae)>>>0<ae>>>0?1:0))+de+((X+=he)>>>0<he>>>0?1:0),K.high=W,K.low=X}var le,ue=L&R^~L&j,pe=D&G^~D&N,fe=M&E^M&B^E&B,me=F&A^F&P^A&P,ve=(M>>>28|F<<4)^(M<<30|F>>>2)^(M<<25|F>>>7),ye=(F>>>28|M<<4)^(F<<30|M>>>2)^(F<<25|M>>>7),ge=(L>>>14|D<<18)^(L>>>18|D<<14)^(L<<23|D>>>9),be=(D>>>14|L<<18)^(D>>>18|L<<14)^(D<<23|L>>>9),we=n[z],ke=we.high,xe=we.low,Te=H+ge+((le=U+be)>>>0<U>>>0?1:0),Oe=ye+me;H=j,U=N,j=R,N=G,R=L,G=D,L=q+(Te=(Te=(Te=Te+ue+((le+=pe)>>>0<pe>>>0?1:0))+ke+((le+=xe)>>>0<xe>>>0?1:0))+W+((le+=X)>>>0<X>>>0?1:0))+((D=V+le|0)>>>0<V>>>0?1:0)|0,q=B,V=P,B=E,P=A,E=M,A=F,M=Te+(ve+fe+(Oe>>>0<ye>>>0?1:0))+((F=le+Oe|0)>>>0<le>>>0?1:0)|0}f=s.low=f+F,s.high=p+M+(f>>>0<F>>>0?1:0),v=a.low=v+A,a.high=m+E+(v>>>0<A>>>0?1:0),g=r.low=g+P,r.high=y+B+(g>>>0<P>>>0?1:0),w=o.low=w+V,o.high=b+q+(w>>>0<V>>>0?1:0),x=c.low=x+D,c.high=k+L+(x>>>0<D>>>0?1:0),O=h.low=O+G,h.high=T+R+(O>>>0<G>>>0?1:0),S=l.low=S+N,l.high=_+j+(S>>>0<N>>>0?1:0),I=u.low=I+U,u.high=C+H+(I>>>0<U>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[30+(s+128>>>10<<5)]=Math.floor(i/4294967296),t[31+(s+128>>>10<<5)]=i,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(h),e.HmacSHA512=t._createHmacHelper(h)}(),function(){var e=c,t=e.x64,i=t.Word,s=t.WordArray,a=e.algo,r=a.SHA512,o=a.SHA384=r.extend({_doReset:function(){this._hash=new s.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=r._createHelper(o),e.HmacSHA384=r._createHmacHelper(o)}(),c.lib.Cipher||function(e){var t=c,i=t.lib,s=i.Base,a=i.WordArray,r=i.BufferedBlockAlgorithm,o=t.enc,n=(o.Utf8,o.Base64),d=t.algo.EvpKDF,h=i.Cipher=r.extend({cfg:s.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?b:y}return function(t){return{encrypt:function(i,s,a){return e(s).encrypt(t,i,s,a)},decrypt:function(i,s,a){return e(s).decrypt(t,i,s,a)}}}}()}),l=(i.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),u=i.BlockCipherMode=s.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=l.CBC=function(){var e=u.extend();function t(e,t,i){var s=this._iv;if(s){var a=s;this._iv=void 0}else a=this._prevBlock;for(var r=0;r<i;r++)e[t+r]^=a[r]}return e.Encryptor=e.extend({processBlock:function(e,i){var s=this._cipher,a=s.blockSize;t.call(this,e,i,a),s.encryptBlock(e,i),this._prevBlock=e.slice(i,i+a)}}),e.Decryptor=e.extend({processBlock:function(e,i){var s=this._cipher,a=s.blockSize,r=e.slice(i,i+a);s.decryptBlock(e,i),t.call(this,e,i,a),this._prevBlock=r}}),e}(),f=(t.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,s=i-e.sigBytes%i,r=s<<24|s<<16|s<<8|s,o=[],n=0;n<s;n+=4)o.push(r);var c=a.create(o,s);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},m=(i.BlockCipher=h.extend({cfg:h.cfg.extend({mode:p,padding:f}),reset:function(){h.reset.call(this);var e=this.cfg,t=e.iv,i=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var s=i.createEncryptor;else s=i.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==s?this._mode.init(this,t&&t.words):(this._mode=s.call(i,this,t&&t.words),this._mode.__creator=s)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),i.CipherParams=s.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),v=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,i=e.salt;if(i)var s=a.create([1398893684,1701076831]).concat(i).concat(t);else s=t;return s.toString(n)},parse:function(e){var t=n.parse(e),i=t.words;if(1398893684==i[0]&&1701076831==i[1]){var s=a.create(i.slice(2,4));i.splice(0,4),t.sigBytes-=16}return m.create({ciphertext:t,salt:s})}},y=i.SerializableCipher=s.extend({cfg:s.extend({format:v}),encrypt:function(e,t,i,s){s=this.cfg.extend(s);var a=e.createEncryptor(i,s),r=a.finalize(t),o=a.cfg;return m.create({ciphertext:r,key:i,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:s.format})},decrypt:function(e,t,i,s){return s=this.cfg.extend(s),t=this._parse(t,s.format),e.createDecryptor(i,s).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),g=(t.kdf={}).OpenSSL={execute:function(e,t,i,s){s||(s=a.random(8));var r=d.create({keySize:t+i}).compute(e,s),o=a.create(r.words.slice(t),4*i);return r.sigBytes=4*t,m.create({key:r,iv:o,salt:s})}},b=i.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:g}),encrypt:function(e,t,i,s){var a=(s=this.cfg.extend(s)).kdf.execute(i,e.keySize,e.ivSize);s.iv=a.iv;var r=y.encrypt.call(this,e,t,a.key,s);return r.mixIn(a),r},decrypt:function(e,t,i,s){s=this.cfg.extend(s),t=this._parse(t,s.format);var a=s.kdf.execute(i,e.keySize,e.ivSize,t.salt);return s.iv=a.iv,y.decrypt.call(this,e,t,a.key,s)}})}(),c.mode.CFB=function(){var e=c.lib.BlockCipherMode.extend();function t(e,t,i,s){var a=this._iv;if(a){var r=a.slice(0);this._iv=void 0}else r=this._prevBlock;s.encryptBlock(r,0);for(var o=0;o<i;o++)e[t+o]^=r[o]}return e.Encryptor=e.extend({processBlock:function(e,i){var s=this._cipher,a=s.blockSize;t.call(this,e,i,a,s),this._prevBlock=e.slice(i,i+a)}}),e.Decryptor=e.extend({processBlock:function(e,i){var s=this._cipher,a=s.blockSize,r=e.slice(i,i+a);t.call(this,e,i,a,s),this._prevBlock=r}}),e}(),c.mode.ECB=((r=c.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),r.Decryptor=r.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),r),c.pad.AnsiX923={pad:function(e,t){var i=e.sigBytes,s=4*t,a=s-i%s,r=i+a-1;e.clamp(),e.words[r>>>2]|=a<<24-r%4*8,e.sigBytes+=a},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},c.pad.Iso10126={pad:function(e,t){var i=4*t,s=i-e.sigBytes%i;e.concat(c.lib.WordArray.random(s-1)).concat(c.lib.WordArray.create([s<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},c.pad.Iso97971={pad:function(e,t){e.concat(c.lib.WordArray.create([2147483648],1)),c.pad.ZeroPadding.pad(e,t)},unpad:function(e){c.pad.ZeroPadding.unpad(e),e.sigBytes--}},c.mode.OFB=(s=c.lib.BlockCipherMode.extend(),a=s.Encryptor=s.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,a=this._iv,r=this._keystream;a&&(r=this._keystream=a.slice(0),this._iv=void 0),i.encryptBlock(r,0);for(var o=0;o<s;o++)e[t+o]^=r[o]}}),s.Decryptor=a,s),c.pad.NoPadding={pad:function(){},unpad:function(){}},function(e){var t=c,i=t.lib.CipherParams,s=t.enc.Hex;t.format.Hex={stringify:function(e){return e.ciphertext.toString(s)},parse:function(e){var t=s.parse(e);return i.create({ciphertext:t})}}}(),function(){var e=c,t=e.lib.BlockCipher,i=e.algo,s=[],a=[],r=[],o=[],n=[],d=[],h=[],l=[],u=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var i=0,c=0;for(t=0;t<256;t++){var f=c^c<<1^c<<2^c<<3^c<<4;f=f>>>8^255&f^99,s[i]=f,a[f]=i;var m=e[i],v=e[m],y=e[v],g=257*e[f]^16843008*f;r[i]=g<<24|g>>>8,o[i]=g<<16|g>>>16,n[i]=g<<8|g>>>24,d[i]=g,g=16843009*y^65537*v^257*m^16843008*i,h[f]=g<<24|g>>>8,l[f]=g<<16|g>>>16,u[f]=g<<8|g>>>24,p[f]=g,i?(i=m^e[e[e[y^m]]],c^=e[e[c]]):i=c=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],m=i.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4,a=4*((this._nRounds=i+6)+1),r=this._keySchedule=[],o=0;o<a;o++)if(o<i)r[o]=t[o];else{var n=r[o-1];o%i?i>6&&o%i==4&&(n=s[n>>>24]<<24|s[n>>>16&255]<<16|s[n>>>8&255]<<8|s[255&n]):(n=s[(n=n<<8|n>>>24)>>>24]<<24|s[n>>>16&255]<<16|s[n>>>8&255]<<8|s[255&n],n^=f[o/i|0]<<24),r[o]=r[o-i]^n}for(var c=this._invKeySchedule=[],d=0;d<a;d++)o=a-d,n=d%4?r[o]:r[o-4],c[d]=d<4||o<=4?n:h[s[n>>>24]]^l[s[n>>>16&255]]^u[s[n>>>8&255]]^p[s[255&n]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,o,n,d,s)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,h,l,u,p,a),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,s,a,r,o,n){for(var c=this._nRounds,d=e[t]^i[0],h=e[t+1]^i[1],l=e[t+2]^i[2],u=e[t+3]^i[3],p=4,f=1;f<c;f++){var m=s[d>>>24]^a[h>>>16&255]^r[l>>>8&255]^o[255&u]^i[p++],v=s[h>>>24]^a[l>>>16&255]^r[u>>>8&255]^o[255&d]^i[p++],y=s[l>>>24]^a[u>>>16&255]^r[d>>>8&255]^o[255&h]^i[p++],g=s[u>>>24]^a[d>>>16&255]^r[h>>>8&255]^o[255&l]^i[p++];d=m,h=v,l=y,u=g}m=(n[d>>>24]<<24|n[h>>>16&255]<<16|n[l>>>8&255]<<8|n[255&u])^i[p++],v=(n[h>>>24]<<24|n[l>>>16&255]<<16|n[u>>>8&255]<<8|n[255&d])^i[p++],y=(n[l>>>24]<<24|n[u>>>16&255]<<16|n[d>>>8&255]<<8|n[255&h])^i[p++],g=(n[u>>>24]<<24|n[d>>>16&255]<<16|n[h>>>8&255]<<8|n[255&l])^i[p++],e[t]=m,e[t+1]=v,e[t+2]=y,e[t+3]=g},keySize:8});e.AES=t._createHelper(m)}(),function(){var e=c,t=e.lib,i=t.WordArray,s=t.BlockCipher,a=e.algo,r=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],n=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],l=a.DES=s.extend({_doReset:function(){for(var e=this._key.words,t=[],i=0;i<56;i++){var s=r[i]-1;t[i]=e[s>>>5]>>>31-s%32&1}for(var a=this._subKeys=[],c=0;c<16;c++){var d=a[c]=[],h=n[c];for(i=0;i<24;i++)d[i/6|0]|=t[(o[i]-1+h)%28]<<31-i%6,d[4+(i/6|0)]|=t[28+(o[i+24]-1+h)%28]<<31-i%6;for(d[0]=d[0]<<1|d[0]>>>31,i=1;i<7;i++)d[i]=d[i]>>>4*(i-1)+3;d[7]=d[7]<<5|d[7]>>>27}var l=this._invSubKeys=[];for(i=0;i<16;i++)l[i]=a[15-i]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,i){this._lBlock=e[t],this._rBlock=e[t+1],u.call(this,4,252645135),u.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),u.call(this,1,1431655765);for(var s=0;s<16;s++){for(var a=i[s],r=this._lBlock,o=this._rBlock,n=0,c=0;c<8;c++)n|=d[c][((o^a[c])&h[c])>>>0];this._lBlock=o,this._rBlock=r^n}var l=this._lBlock;this._lBlock=this._rBlock,this._rBlock=l,u.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),u.call(this,16,65535),u.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function u(e,t){var i=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=i,this._lBlock^=i<<e}function p(e,t){var i=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=i,this._rBlock^=i<<e}e.DES=s._createHelper(l);var f=a.TripleDES=s.extend({_doReset:function(){var e=this._key.words;this._des1=l.createEncryptor(i.create(e.slice(0,2))),this._des2=l.createEncryptor(i.create(e.slice(2,4))),this._des3=l.createEncryptor(i.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=s._createHelper(f)}(),function(){var e=c,t=e.lib.StreamCipher,i=e.algo,s=i.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes,s=this._S=[],a=0;a<256;a++)s[a]=a;a=0;for(var r=0;a<256;a++){var o=a%i,n=t[o>>>2]>>>24-o%4*8&255;r=(r+s[a]+n)%256;var c=s[a];s[a]=s[r],s[r]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=a.call(this)},keySize:8,ivSize:0});function a(){for(var e=this._S,t=this._i,i=this._j,s=0,a=0;a<4;a++){i=(i+e[t=(t+1)%256])%256;var r=e[t];e[t]=e[i],e[i]=r,s|=e[(e[t]+e[i])%256]<<24-8*a}return this._i=t,this._j=i,s}e.RC4=t._createHelper(s);var r=i.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)a.call(this)}});e.RC4Drop=t._createHelper(r)}(),
/** @preserve
	 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
	 * derived from CryptoJS.mode.CTR
	 * Jan Hruby jhruby.web@gmail.com
	 */
c.mode.CTRGladman=function(){var e=c.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,i=e>>8&255,s=255&e;255===t?(t=0,255===i?(i=0,255===s?s=0:++s):++i):++t,e=0,e+=t<<16,e+=i<<8,e+=s}else e+=1<<24;return e}var i=e.Encryptor=e.extend({processBlock:function(e,i){var s=this._cipher,a=s.blockSize,r=this._iv,o=this._counter;r&&(o=this._counter=r.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(o);var n=o.slice(0);s.encryptBlock(n,0);for(var c=0;c<a;c++)e[i+c]^=n[c]}});return e.Decryptor=i,e}(),function(){var e=c,t=e.lib.StreamCipher,i=e.algo,s=[],a=[],r=[],o=i.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=0;i<4;i++)e[i]=16711935&(e[i]<<8|e[i]>>>24)|4278255360&(e[i]<<24|e[i]>>>8);var s=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],a=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,i=0;i<4;i++)n.call(this);for(i=0;i<8;i++)a[i]^=s[i+4&7];if(t){var r=t.words,o=r[0],c=r[1],d=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),h=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),l=d>>>16|4294901760&h,u=h<<16|65535&d;for(a[0]^=d,a[1]^=l,a[2]^=h,a[3]^=u,a[4]^=d,a[5]^=l,a[6]^=h,a[7]^=u,i=0;i<4;i++)n.call(this)}},_doProcessBlock:function(e,t){var i=this._X;n.call(this),s[0]=i[0]^i[5]>>>16^i[3]<<16,s[1]=i[2]^i[7]>>>16^i[5]<<16,s[2]=i[4]^i[1]>>>16^i[7]<<16,s[3]=i[6]^i[3]>>>16^i[1]<<16;for(var a=0;a<4;a++)s[a]=16711935&(s[a]<<8|s[a]>>>24)|4278255360&(s[a]<<24|s[a]>>>8),e[t+a]^=s[a]},blockSize:4,ivSize:2});function n(){for(var e=this._X,t=this._C,i=0;i<8;i++)a[i]=t[i];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,i=0;i<8;i++){var s=e[i]+t[i],o=65535&s,n=s>>>16,c=((o*o>>>17)+o*n>>>15)+n*n,d=((4294901760&s)*s|0)+((65535&s)*s|0);r[i]=c^d}e[0]=r[0]+(r[7]<<16|r[7]>>>16)+(r[6]<<16|r[6]>>>16)|0,e[1]=r[1]+(r[0]<<8|r[0]>>>24)+r[7]|0,e[2]=r[2]+(r[1]<<16|r[1]>>>16)+(r[0]<<16|r[0]>>>16)|0,e[3]=r[3]+(r[2]<<8|r[2]>>>24)+r[1]|0,e[4]=r[4]+(r[3]<<16|r[3]>>>16)+(r[2]<<16|r[2]>>>16)|0,e[5]=r[5]+(r[4]<<8|r[4]>>>24)+r[3]|0,e[6]=r[6]+(r[5]<<16|r[5]>>>16)+(r[4]<<16|r[4]>>>16)|0,e[7]=r[7]+(r[6]<<8|r[6]>>>24)+r[5]|0}e.Rabbit=t._createHelper(o)}(),c.mode.CTR=function(){var e=c.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,a=this._iv,r=this._counter;a&&(r=this._counter=a.slice(0),this._iv=void 0);var o=r.slice(0);i.encryptBlock(o,0),r[s-1]=r[s-1]+1|0;for(var n=0;n<s;n++)e[t+n]^=o[n]}});return e.Decryptor=t,e}(),function(){var e=c,t=e.lib.StreamCipher,i=e.algo,s=[],a=[],r=[],o=i.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],s=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var a=0;a<4;a++)n.call(this);for(a=0;a<8;a++)s[a]^=i[a+4&7];if(t){var r=t.words,o=r[0],c=r[1],d=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),h=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),l=d>>>16|4294901760&h,u=h<<16|65535&d;for(s[0]^=d,s[1]^=l,s[2]^=h,s[3]^=u,s[4]^=d,s[5]^=l,s[6]^=h,s[7]^=u,a=0;a<4;a++)n.call(this)}},_doProcessBlock:function(e,t){var i=this._X;n.call(this),s[0]=i[0]^i[5]>>>16^i[3]<<16,s[1]=i[2]^i[7]>>>16^i[5]<<16,s[2]=i[4]^i[1]>>>16^i[7]<<16,s[3]=i[6]^i[3]>>>16^i[1]<<16;for(var a=0;a<4;a++)s[a]=16711935&(s[a]<<8|s[a]>>>24)|4278255360&(s[a]<<24|s[a]>>>8),e[t+a]^=s[a]},blockSize:4,ivSize:2});function n(){for(var e=this._X,t=this._C,i=0;i<8;i++)a[i]=t[i];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,i=0;i<8;i++){var s=e[i]+t[i],o=65535&s,n=s>>>16,c=((o*o>>>17)+o*n>>>15)+n*n,d=((4294901760&s)*s|0)+((65535&s)*s|0);r[i]=c^d}e[0]=r[0]+(r[7]<<16|r[7]>>>16)+(r[6]<<16|r[6]>>>16)|0,e[1]=r[1]+(r[0]<<8|r[0]>>>24)+r[7]|0,e[2]=r[2]+(r[1]<<16|r[1]>>>16)+(r[0]<<16|r[0]>>>16)|0,e[3]=r[3]+(r[2]<<8|r[2]>>>24)+r[1]|0,e[4]=r[4]+(r[3]<<16|r[3]>>>16)+(r[2]<<16|r[2]>>>16)|0,e[5]=r[5]+(r[4]<<8|r[4]>>>24)+r[3]|0,e[6]=r[6]+(r[5]<<16|r[5]>>>16)+(r[4]<<16|r[4]>>>16)|0,e[7]=r[7]+(r[6]<<8|r[6]>>>24)+r[5]|0}e.RabbitLegacy=t._createHelper(o)}(),c.pad.ZeroPadding={pad:function(e,t){var i=4*t;e.clamp(),e.sigBytes+=i-(e.sigBytes%i||i)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1;!(t[i>>>2]>>>24-i%4*8&255);)i--;e.sigBytes=i+1}},c)},function(e,t,i){"use strict";
/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,a=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,r=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,o=/\\([\u000b\u0020-\u00ff])/g,n=/([\\"])/g,c=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;function d(e){var t=String(e);if(r.test(t))return t;if(t.length>0&&!a.test(t))throw new TypeError("invalid parameter value");return'"'+t.replace(n,"\\$1")+'"'}function h(e){this.parameters=Object.create(null),this.type=e}t.format=function(e){if(!e||"object"!=typeof e)throw new TypeError("argument obj is required");var t=e.parameters,i=e.type;if(!i||!c.test(i))throw new TypeError("invalid type");var s=i;if(t&&"object"==typeof t)for(var a,o=Object.keys(t).sort(),n=0;n<o.length;n++){if(a=o[n],!r.test(a))throw new TypeError("invalid parameter name");s+="; "+a+"="+d(t[a])}return s},t.parse=function(e){if(!e)throw new TypeError("argument string is required");var t="object"==typeof e?function(e){var t;"function"==typeof e.getHeader?t=e.getHeader("content-type"):"object"==typeof e.headers&&(t=e.headers&&e.headers["content-type"]);if("string"!=typeof t)throw new TypeError("content-type header is missing from object");return t}(e):e;if("string"!=typeof t)throw new TypeError("argument string is required to be a string");var i=t.indexOf(";"),a=-1!==i?t.substr(0,i).trim():t.trim();if(!c.test(a))throw new TypeError("invalid media type");var r=new h(a.toLowerCase());if(-1!==i){var n,d,l;for(s.lastIndex=i;d=s.exec(t);){if(d.index!==i)throw new TypeError("invalid parameter format");i+=d[0].length,n=d[1].toLowerCase(),'"'===(l=d[2])[0]&&(l=l.substr(1,l.length-2).replace(o,"$1")),r.parameters[n]=l}if(i!==t.length)throw new TypeError("invalid parameter format")}return r}},function(e,t,i){"use strict";e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i]);return e})},function(e,t,i){"use strict";
/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(103);function a(e){if("number"==typeof e){if(!a[e])throw new Error("invalid status code: "+e);return e}if("string"!=typeof e)throw new TypeError("code must be a number or string");var t=parseInt(e,10);if(!isNaN(t)){if(!a[t])throw new Error("invalid status code: "+t);return t}if(!(t=a[e.toLowerCase()]))throw new Error('invalid status message: "'+e+'"');return t}e.exports=a,a.STATUS_CODES=s,a.codes=function(e,t){var i=[];return Object.keys(t).forEach((function(s){var a=t[s],r=Number(s);e[r]=a,e[a]=r,e[a.toLowerCase()]=r,i.push(r)})),i}(a,s),a.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0},a.empty={204:!0,205:!0,304:!0},a.retry={502:!0,503:!0,504:!0}},function(e,t,i){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(20),a=i(111),r=i(50),o=i(30),n=i(54);e.exports=function(e,t,i,c,d,h){var l,u,p=h;e._body=!0;var f=null!==p.encoding?p.encoding:null,m=p.verify;try{u=function(e,t,i){var a,r=(e.headers["content-encoding"]||"identity").toLowerCase(),o=e.headers["content-length"];if(t('content-encoding "%s"',r),!1===i&&"identity"!==r)throw s(415,"content encoding unsupported",{encoding:r,type:"encoding.unsupported"});switch(r){case"deflate":a=n.createInflate(),t("inflate body"),e.pipe(a);break;case"gzip":a=n.createGunzip(),t("gunzip body"),e.pipe(a);break;case"identity":(a=e).length=o;break;default:throw s(415,'unsupported content encoding "'+r+'"',{encoding:r,type:"encoding.unsupported"})}return a}(e,d,p.inflate),l=u.length,u.length=void 0}catch(e){return i(e)}if(p.length=l,p.encoding=m?null:f,null===p.encoding&&null!==f&&!r.encodingExists(f))return i(s(415,'unsupported charset "'+f.toUpperCase()+'"',{charset:f.toLowerCase(),type:"charset.unsupported"}));d("read body"),a(u,p,(function(a,n){var h;if(a)return h="encoding.unsupported"===a.type?s(415,'unsupported charset "'+f.toUpperCase()+'"',{charset:f.toLowerCase(),type:"charset.unsupported"}):s(400,a),u.resume(),void o(e,(function(){i(s(400,h))}));if(m)try{d("verify body"),m(e,t,n,f)}catch(e){return void i(s(403,e,{body:n,type:e.type||"entity.verify.failed"}))}var l=n;try{d("parse body"),l="string"!=typeof n&&null!==f?r.decode(n,f):n,e.body=c(l)}catch(e){return void i(s(400,e,{body:l,type:e.type||"entity.parse.failed"}))}i()}))}},function(e,t,i){"use strict";
/*!
 * on-finished
 * Copyright(c) 2013 Jonathan Ong
 * Copyright(c) 2014 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=function(e,t){if(!1!==r(e))return a(t,null,e),e;return function(e,t){var i=e.__onFinished;i&&i.queue||(i=e.__onFinished=function(e){function t(i){if(e.__onFinished===t&&(e.__onFinished=null),t.queue){var s=t.queue;t.queue=null;for(var a=0;a<s.length;a++)s[a](i,e)}}return t.queue=[],t}(e),function(e,t){var i,a,r=!1;function o(e){i.cancel(),a.cancel(),r=!0,t(e)}function n(t){e.removeListener("socket",n),r||i===a&&(a=s([[t,"error","close"]],o))}if(i=a=s([[e,"end","finish"]],o),e.socket)return void n(e.socket);e.on("socket",n),void 0===e.socket&&function(e,t){var i=e.assignSocket;if("function"!=typeof i)return;e.assignSocket=function(e){i.call(this,e),t(e)}}(e,n)}(e,i));i.queue.push(t)}(e,t),e},e.exports.isFinished=r;var s=i(130),a="function"==typeof setImmediate?setImmediate:function(e){process.nextTick(e.bind.apply(e,arguments))};function r(e){var t=e.socket;return"boolean"==typeof e.finished?Boolean(e.finished||t&&!t.writable):"boolean"==typeof e.complete?Boolean(e.upgrade||!t||!t.readable||e.complete&&!e.readable):void 0}},function(e,t,i){"use strict";
/*!
 * encodeurl
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=function(e){return String(e).replace(a,"$1$2").replace(s,encodeURI)};var s=/(?:[^\x21\x25\x26-\x3B\x3D\x3F-\x5B\x5D\x5F\x61-\x7A\x7E]|%(?:[^0-9A-Fa-f]|[0-9A-Fa-f][^0-9A-Fa-f]|$))+/g,a=/(^|[^\uD800-\uDBFF])[\uDC00-\uDFFF]|[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/g},function(e,t,i){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var s=/["'&<>]/;e.exports=function(e){var t,i=""+e,a=s.exec(i);if(!a)return i;var r="",o=0,n=0;for(o=a.index;o<i.length;o++){switch(i.charCodeAt(o)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}n!==o&&(r+=i.substring(n,o)),n=o+1,r+=t}return n!==o?r+i.substring(n,o):r}},function(e,t,i){"use strict";e.exports=function(e,t){if(null==t)return function e(t,i){for(var s=0;s<t.length;s++){var a=t[s];Array.isArray(a)?e(a,i):i.push(a)}return i}(e,[]);return function e(t,i,s){for(var a=0;a<t.length;a++){var r=t[a];s>0&&Array.isArray(r)?e(r,i,s-1):i.push(r)}return i}(e,[],t)}},function(e,t){e.exports=function(e,t){if(e&&t)for(var i in t)e[i]=t[i];return e}},function(e,t,i){"use strict";var s=t;s.base=i(196),s.short=i(197),s.mont=i(198),s.edwards=i(199)},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"foxbit",name:"FoxBit",countries:["BR"],has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},rateLimit:1e3,version:"v1",urls:{logo:"https://user-images.githubusercontent.com/51840849/87443320-01c0d080-c5fe-11ea-92e2-4ef56d32b026.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://foxbit.com.br/exchange",doc:"https://foxbit.com.br/api/"},comment:"Blinktrade API",api:{public:{get:["{currency}/ticker","{currency}/orderbook","{currency}/trades"]},private:{post:["D","F","U2","U4","U6","U18","U24","U26","U30","U34","U70"]}},markets:{"BTC/VEF":{id:"BTCVEF",symbol:"BTC/VEF",base:"BTC",quote:"VEF",brokerId:1,broker:"SurBitcoin"},"BTC/VND":{id:"BTCVND",symbol:"BTC/VND",base:"BTC",quote:"VND",brokerId:3,broker:"VBTC"},"BTC/BRL":{id:"BTCBRL",symbol:"BTC/BRL",base:"BTC",quote:"BRL",brokerId:4,broker:"FoxBit"},"BTC/PKR":{id:"BTCPKR",symbol:"BTC/PKR",base:"BTC",quote:"PKR",brokerId:8,broker:"UrduBit"},"BTC/CLP":{id:"BTCCLP",symbol:"BTC/CLP",base:"BTC",quote:"CLP",brokerId:9,broker:"ChileBit"}},options:{brokerId:"4"}})}async fetchBalance(e={}){await this.loadMarkets();const t={BalanceReqID:this.nonce()},i=await this.privatePostU2(this.extend(t,e)),s=this.safeValue(i.Responses,this.options.brokerId),a={info:i};if(void 0!==s){const e=Object.keys(this.currencies_by_id);for(let t=0;t<e.length;t++){const i=e[t],r=this.safeCurrencyCode(i);if(i in s){const e=this.account();let t=this.safeFloat(s,i+"_locked");void 0!==t&&(t*=1e-8);let o=this.safeFloat(s,i);void 0!==o&&(o*=1e-8),e.used=t,e.total=o,a[r]=e}}}return this.parseBalance(a)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),a={currency:s.quote,crypto_currency:s.base},r=await this.publicGetCurrencyOrderbook(this.extend(a,i));return this.parseOrderBook(r)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={currency:i.quote,crypto_currency:i.base},a=await this.publicGetCurrencyTicker(this.extend(s,t)),r=this.milliseconds(),o="vol_"+i.quote.toLowerCase(),n=this.safeFloat(a,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(a,"high"),low:this.safeFloat(a,"low"),bid:this.safeFloat(a,"buy"),bidVolume:void 0,ask:this.safeFloat(a,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(a,"vol"),quoteVolume:this.safeFloat(a,o),info:a}}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid");let a=void 0;void 0!==t&&(a=t.symbol);const r=this.safeString(e,"side"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let c=void 0;return void 0!==o&&void 0!==n&&(c=n*o),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:a,type:void 0,side:r,order:void 0,takerOrMaker:void 0,price:o,amount:n,cost:c,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={currency:a.quote,crypto_currency:a.base},o=await this.publicGetCurrencyTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}async createOrder(e,t,i,s,r,o={}){if(await this.loadMarkets(),"market"===t)throw new a(this.id+" allows limit orders only");const n=this.market(e),c="buy"===i?"1":"2",d={ClOrdID:this.nonce(),Symbol:n.id,Side:c,OrdType:"2",Price:r,OrderQty:s,BrokerID:n.brokerId},h=await this.privatePostD(this.extend(d,o));return{info:h,id:this.indexBy(h.Responses,"MsgType")[8].OrderID}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostF(this.extend({ClOrdID:e},i))}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const t=this.nonce().toString(),i=this.extend({MsgType:e},n);r=this.json(i),a={APIKey:this.apiKey,Nonce:t,Signature:this.hmac(this.encode(t),this.encode(this.secret)),"Content-Type":"application/json"}}return{url:o,method:i,body:r,headers:a}}async request(e,t="public",i="GET",s={},r,o){const n=await this.fetch2(e,t,i,s,r,o);if("Status"in n&&200!==n.Status)throw new a(this.id+" "+this.json(n));return n}}},function(e,t){e.exports=require("util")},function(e){e.exports=JSON.parse('[["0","\\u0000",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]]')},function(e,t,i){"use strict";var s=i(137),a=i(138),r=i(57);e.exports={formats:r,parse:a,stringify:s}},function(e,t,i){"use strict";
/*!
 * methods
 * Copyright(c) 2013-2014 TJ Holowaychuk
 * Copyright(c) 2015-2016 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(13);e.exports=s.METHODS&&s.METHODS.map((function(e){return e.toLowerCase()}))||["get","post","put","head","delete","options","trace","copy","lock","mkcol","move","purge","propfind","proppatch","unlock","report","mkactivity","checkout","merge","m-search","notify","subscribe","unsubscribe","patch","search","connect"]},function(e,t,i){var s=i(14),a=s.Buffer;function r(e,t){for(var i in e)t[i]=e[i]}function o(e,t,i){return a(e,t,i)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=s:(r(s,t),t.Buffer=o),r(a,o),o.from=function(e,t,i){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,i)},o.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError("Argument must be a number");var s=a(e);return void 0!==t?"string"==typeof i?s.fill(t,i):s.fill(t):s.fill(0),s},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s.SlowBuffer(e)}},function(e,t,i){"use strict";
/*!
 * send
 * Copyright(c) 2012 TJ Holowaychuk
 * Copyright(c) 2014-2016 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(20),a=i(5)("send"),r=i(10)("send"),o=i(146),n=i(31),c=i(32),d=i(64),h=i(66),l=i(16),u=i(147),p=i(149),f=i(30),m=i(67),v=i(11),y=i(28),g=i(12),b=i(37),w=v.extname,k=v.join,x=v.normalize,T=v.resolve,O=v.sep,_=/^ *bytes=/,S=/(?:^|[\\/])\.\.(?:[\\/]|$)/;function C(e,t,i){g.call(this);var s=i||{};if(this.options=s,this.path=t,this.req=e,this._acceptRanges=void 0===s.acceptRanges||Boolean(s.acceptRanges),this._cacheControl=void 0===s.cacheControl||Boolean(s.cacheControl),this._etag=void 0===s.etag||Boolean(s.etag),this._dotfiles=void 0!==s.dotfiles?s.dotfiles:"ignore","ignore"!==this._dotfiles&&"allow"!==this._dotfiles&&"deny"!==this._dotfiles)throw new TypeError('dotfiles option must be "allow", "deny", or "ignore"');this._hidden=Boolean(s.hidden),void 0!==s.hidden&&r("hidden: use dotfiles: '"+(this._hidden?"allow":"ignore")+"' instead"),void 0===s.dotfiles&&(this._dotfiles=void 0),this._extensions=void 0!==s.extensions?A(s.extensions,"extensions option"):[],this._immutable=void 0!==s.immutable&&Boolean(s.immutable),this._index=void 0!==s.index?A(s.index,"index option"):["index.html"],this._lastModified=void 0===s.lastModified||Boolean(s.lastModified),this._maxage=s.maxAge||s.maxage,this._maxage="string"==typeof this._maxage?p(this._maxage):Number(this._maxage),this._maxage=isNaN(this._maxage)?0:Math.min(Math.max(0,this._maxage),31536e6),this._root=s.root?T(s.root):null,!this._root&&s.from&&this.from(s.from)}function I(e,t,i){return e+" "+(i?i.start+"-"+i.end:"*")+"/"+t}function M(e,t){return'<!DOCTYPE html>\n<html lang="en">\n<head>\n<meta charset="utf-8">\n<title>'+e+"</title>\n</head>\n<body>\n<pre>"+t+"</pre>\n</body>\n</html>\n"}function F(e){return"function"!=typeof e.getHeaderNames?Object.keys(e._headers||{}):e.getHeaderNames()}function E(e,t){return("function"!=typeof e.listenerCount?e.listeners(t).length:e.listenerCount(t))>0}function A(e,t){for(var i=[].concat(e||[]),s=0;s<i.length;s++)if("string"!=typeof i[s])throw new TypeError(t+" must be array of strings or false");return i}function B(e){var t=e&&Date.parse(e);return"number"==typeof t?t:NaN}e.exports=function(e,t,i){return new C(e,t,i)},e.exports.mime=u,b.inherits(C,g),C.prototype.etag=r.function((function(e){return this._etag=Boolean(e),a("etag %s",this._etag),this}),"send.etag: pass etag as option"),C.prototype.hidden=r.function((function(e){return this._hidden=Boolean(e),this._dotfiles=void 0,a("hidden %s",this._hidden),this}),"send.hidden: use dotfiles option"),C.prototype.index=r.function((function(e){var t=e?A(e,"paths argument"):[];return a("index %o",e),this._index=t,this}),"send.index: pass index as option"),C.prototype.root=function(e){return this._root=T(String(e)),a("root %s",this._root),this},C.prototype.from=r.function(C.prototype.root,"send.from: pass root as option"),C.prototype.root=r.function(C.prototype.root,"send.root: pass root as option"),C.prototype.maxage=r.function((function(e){return this._maxage="string"==typeof e?p(e):Number(e),this._maxage=isNaN(this._maxage)?0:Math.min(Math.max(0,this._maxage),31536e6),a("max-age %d",this._maxage),this}),"send.maxage: pass maxAge as option"),C.prototype.error=function(e,t){if(E(this,"error"))return this.emit("error",s(e,t,{expose:!1}));var i=this.res,a=y[e]||String(e),r=M("Error",c(a));!function(e){for(var t=F(e),i=0;i<t.length;i++)e.removeHeader(t[i])}(i),t&&t.headers&&function(e,t){for(var i=Object.keys(t),s=0;s<i.length;s++){var a=i[s];e.setHeader(a,t[a])}}(i,t.headers),i.statusCode=e,i.setHeader("Content-Type","text/html; charset=UTF-8"),i.setHeader("Content-Length",Buffer.byteLength(r)),i.setHeader("Content-Security-Policy","default-src 'none'"),i.setHeader("X-Content-Type-Options","nosniff"),i.end(r)},C.prototype.hasTrailingSlash=function(){return"/"===this.path[this.path.length-1]},C.prototype.isConditionalGET=function(){return this.req.headers["if-match"]||this.req.headers["if-unmodified-since"]||this.req.headers["if-none-match"]||this.req.headers["if-modified-since"]},C.prototype.isPreconditionFailure=function(){var e=this.req,t=this.res,i=e.headers["if-match"];if(i){var s=t.getHeader("ETag");return!s||"*"!==i&&function(e){for(var t=0,i=[],s=0,a=0,r=e.length;a<r;a++)switch(e.charCodeAt(a)){case 32:s===t&&(s=t=a+1);break;case 44:i.push(e.substring(s,t)),s=t=a+1;break;default:t=a+1}return i.push(e.substring(s,t)),i}(i).every((function(e){return e!==s&&e!=="W/"+s&&"W/"+e!==s}))}var a=B(e.headers["if-unmodified-since"]);if(!isNaN(a)){var r=B(t.getHeader("Last-Modified"));return isNaN(r)||r>a}return!1},C.prototype.removeContentHeaderFields=function(){for(var e=this.res,t=F(e),i=0;i<t.length;i++){var s=t[i];"content-"===s.substr(0,8)&&"content-location"!==s&&e.removeHeader(s)}},C.prototype.notModified=function(){var e=this.res;a("not modified"),this.removeContentHeaderFields(),e.statusCode=304,e.end()},C.prototype.headersAlreadySent=function(){var e=new Error("Can't set headers after they are sent.");a("headers already sent"),this.error(500,e)},C.prototype.isCachable=function(){var e=this.res.statusCode;return e>=200&&e<300||304===e},C.prototype.onStatError=function(e){switch(e.code){case"ENAMETOOLONG":case"ENOENT":case"ENOTDIR":this.error(404,e);break;default:this.error(500,e)}},C.prototype.isFresh=function(){return h(this.req.headers,{etag:this.res.getHeader("ETag"),"last-modified":this.res.getHeader("Last-Modified")})},C.prototype.isRangeFresh=function(){var e=this.req.headers["if-range"];if(!e)return!0;if(-1!==e.indexOf('"')){var t=this.res.getHeader("ETag");return Boolean(t&&-1!==e.indexOf(t))}return B(this.res.getHeader("Last-Modified"))<=B(e)},C.prototype.redirect=function(e){var t=this.res;if(E(this,"directory"))this.emit("directory",t,e);else if(this.hasTrailingSlash())this.error(403);else{var i=n(function(e){for(var t=0;t<e.length&&"/"===e[t];t++);return t>1?"/"+e.substr(t):e}(this.path+"/")),s=M("Redirecting",'Redirecting to <a href="'+c(i)+'">'+c(i)+"</a>");t.statusCode=301,t.setHeader("Content-Type","text/html; charset=UTF-8"),t.setHeader("Content-Length",Buffer.byteLength(s)),t.setHeader("Content-Security-Policy","default-src 'none'"),t.setHeader("X-Content-Type-Options","nosniff"),t.setHeader("Location",i),t.end(s)}},C.prototype.pipe=function(e){var t=this._root;this.res=e;var i,s=function(e){try{return decodeURIComponent(e)}catch(e){return-1}}(this.path);if(-1===s)return this.error(400),e;if(~s.indexOf("\0"))return this.error(400),e;if(null!==t){if(s&&(s=x("."+O+s)),S.test(s))return a('malicious path "%s"',s),this.error(403),e;i=s.split(O),s=x(k(t,s))}else{if(S.test(s))return a('malicious path "%s"',s),this.error(403),e;i=x(s).split(O),s=T(s)}if(function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.length>1&&"."===i[0])return!0}return!1}(i)){var r=this._dotfiles;switch(void 0===r&&(r="."===i[i.length-1][0]?this._hidden?"allow":"ignore":"allow"),a('%s dotfile "%s"',r,s),r){case"allow":break;case"deny":return this.error(403),e;case"ignore":default:return this.error(404),e}}return this._index.length&&this.hasTrailingSlash()?(this.sendIndex(s),e):(this.sendFile(s),e)},C.prototype.send=function(e,t){var i=t.size,s=this.options,r={},o=this.res,n=this.req,c=n.headers.range,d=s.start||0;if(function(e){return"boolean"!=typeof e.headersSent?Boolean(e._header):e.headersSent}(o))this.headersAlreadySent();else{if(a('pipe "%s"',e),this.setHeader(e,t),this.type(e),this.isConditionalGET()){if(this.isPreconditionFailure())return void this.error(412);if(this.isCachable()&&this.isFresh())return void this.notModified()}if(i=Math.max(0,i-d),void 0!==s.end){var h=s.end-d+1;i>h&&(i=h)}if(this._acceptRanges&&_.test(c)){if(c=m(i,c,{combine:!0}),this.isRangeFresh()||(a("range stale"),c=-2),-1===c)return a("range unsatisfiable"),o.setHeader("Content-Range",I("bytes",i)),this.error(416,{headers:{"Content-Range":o.getHeader("Content-Range")}});-2!==c&&1===c.length&&(a("range %j",c),o.statusCode=206,o.setHeader("Content-Range",I("bytes",i,c[0])),d+=c[0].start,i=c[0].end-c[0].start+1)}for(var l in s)r[l]=s[l];r.start=d,r.end=Math.max(d,d+i-1),o.setHeader("Content-Length",i),"HEAD"!==n.method?this.stream(e,r):o.end()}},C.prototype.sendFile=function(e){var t=0,i=this;a('stat "%s"',e),l.stat(e,(function(s,r){return s&&"ENOENT"===s.code&&!w(e)&&e[e.length-1]!==O?function s(r){if(i._extensions.length<=t)return r?i.onStatError(r):i.error(404);var o=e+"."+i._extensions[t++];a('stat "%s"',o),l.stat(o,(function(e,t){return e?s(e):t.isDirectory()?s():(i.emit("file",o,t),void i.send(o,t))}))}(s):s?i.onStatError(s):r.isDirectory()?i.redirect(e):(i.emit("file",e,r),void i.send(e,r))}))},C.prototype.sendIndex=function(e){var t=-1,i=this;!function s(r){if(++t>=i._index.length)return r?i.onStatError(r):i.error(404);var o=k(e,i._index[t]);a('stat "%s"',o),l.stat(o,(function(e,t){return e?s(e):t.isDirectory()?s():(i.emit("file",o,t),void i.send(o,t))}))}()},C.prototype.stream=function(e,t){var i=!1,s=this,a=this.res,r=l.createReadStream(e,t);this.emit("stream",r),r.pipe(a),f(a,(function(){i=!0,o(r)})),r.on("error",(function(e){i||(i=!0,o(r),s.onStatError(e))})),r.on("end",(function(){s.emit("end")}))},C.prototype.type=function(e){var t=this.res;if(!t.getHeader("Content-Type")){var i=u.lookup(e);if(i){var s=u.charsets.lookup(i);a("content-type %s",i),t.setHeader("Content-Type",i+(s?"; charset="+s:""))}else a("no content-type")}},C.prototype.setHeader=function(e,t){var i=this.res;if(this.emit("headers",i,e,t),this._acceptRanges&&!i.getHeader("Accept-Ranges")&&(a("accept ranges"),i.setHeader("Accept-Ranges","bytes")),this._cacheControl&&!i.getHeader("Cache-Control")){var s="public, max-age="+Math.floor(this._maxage/1e3);this._immutable&&(s+=", immutable"),a("cache-control %s",s),i.setHeader("Cache-Control",s)}if(this._lastModified&&!i.getHeader("Last-Modified")){var r=t.mtime.toUTCString();a("modified %s",r),i.setHeader("Last-Modified",r)}if(this._etag&&!i.getHeader("ETag")){var o=d(t);a("etag %s",o),i.setHeader("ETag",o)}}},function(e,t,i){"use strict";const s=e=>e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,s);e.exports={uuid:s,unCamelCase:e=>e.match(/^[A-Z0-9_]+$/)?e:e.replace(/[a-z0-9][A-Z]/g,e=>e[0]+"_"+e[1]).replace(/[A-Z0-9][A-Z0-9][a-z]/g,e=>e[0]+"_"+e[1]+e[2]).toLowerCase(),capitalize:e=>e.length?e.charAt(0).toUpperCase()+e.slice(1):e,strip:e=>e.replace(/^\s+|\s+$/g,"")}},function(e,t,i){"use strict";const s=i(1),{BadSymbol:a,PermissionDenied:r,ExchangeError:o,ExchangeNotAvailable:n,OrderNotFound:c,InsufficientFunds:d,InvalidOrder:h,RequestTimeout:l,AuthenticationError:u}=i(0),{TRUNCATE:p,DECIMAL_PLACES:f,TICK_SIZE:m}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"hitbtc",name:"HitBTC",countries:["HK"],rateLimit:1500,version:"2",pro:!0,has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrder:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTransactions:!0,fetchWithdrawals:!1,withdraw:!0},timeframes:{"1m":"M1","3m":"M3","5m":"M5","15m":"M15","30m":"M30","1h":"H1","4h":"H4","1d":"D1","1w":"D7","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766555-8eaec20e-5edc-11e7-9c5b-6dc69fc42f5e.jpg",api:{public:"https://api.hitbtc.com",private:"https://api.hitbtc.com"},www:"https://hitbtc.com",referral:"https://hitbtc.com/?ref_id=5a5d39a65d466",doc:["https://api.hitbtc.com","https://github.com/hitbtc-com/hitbtc-api/blob/master/APIv2.md"],fees:["https://hitbtc.com/fees-and-limits","https://support.hitbtc.com/hc/en-us/articles/115005148605-Fees-and-limits"]},api:{public:{get:["symbol","symbol/{symbol}","currency","currency/{currency}","ticker","ticker/{symbol}","trades","trades/{symbol}","orderbook","orderbook/{symbol}","candles","candles/{symbol}"]},private:{get:["trading/balance","order","order/{clientOrderId}","trading/fee/all","trading/fee/{symbol}","history/order","history/trades","history/order/{orderId}/trades","account/balance","account/crypto/address/{currency}","account/crypto/is-mine/{address}","account/transactions","account/transactions/{id}","sub-acc","sub-acc/acl","sub-acc/balance/{subAccountUserID}","sub-acc/deposit-address/{subAccountUserId}/{currency}"],post:["order","account/crypto/address/{currency}","account/crypto/withdraw","account/crypto/transfer-convert","account/transfer","sub-acc/freeze","sub-acc/activate","sub-acc/transfer"],put:["order/{clientOrderId}","account/crypto/withdraw/{id}","sub-acc/acl/{subAccountUserId}"],delete:["order","order/{clientOrderId}","account/crypto/withdraw/{id}"],patch:["order/{clientOrderId}"]}},precisionMode:m,fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.002}},options:{defaultTimeInForce:"FOK"},commonCurrencies:{BCC:"BCC",BET:"DAO.Casino",BOX:"BOX Token",CPT:"Cryptaur",GET:"Themis",HSR:"HC",IQ:"IQ.Cash",LNC:"LinkerCoin",PLA:"PlayChip",PNT:"Penta",TV:"Tokenville",USD:"USDT",XPNT:"PNT"},exceptions:{504:l,1002:u,1003:r,2010:h,2001:a,2011:h,2020:h,20002:c,20001:d},orders:{}})}feeToPrecision(e,t){return this.decimalToPrecision(t,p,8,f)}async fetchMarkets(e={}){const t=await this.publicGetSymbol(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"id"),r=this.safeString(s,"baseCurrency"),o=this.safeString(s,"quoteCurrency"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o);let d=n+"/"+c;a.indexOf("_")>=0&&(d=a);const h=this.safeFloat(s,"quantityIncrement"),l=this.safeFloat(s,"tickSize"),u={price:l,amount:h},p=this.safeFloat(s,"takeLiquidityRate"),f=this.safeFloat(s,"provideLiquidityRate"),m=this.safeString(s,"feeCurrency"),v=this.safeCurrencyCode(m);i.push(this.extend(this.fees.trading,{info:s,id:a,symbol:d,base:n,quote:c,baseId:r,quoteId:o,active:!0,taker:p,maker:f,precision:u,feeCurrency:v,limits:{amount:{min:h,max:void 0},price:{min:l,max:void 0},cost:{min:h*l,max:void 0}}}))}return i}async fetchCurrencies(e={}){const t=await this.publicGetCurrency(e),i={};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"id"),r=this.safeInteger(s,"precisionTransfer",8),o=1/Math.pow(10,r),n=this.safeCurrencyCode(a),c=this.safeValue(s,"payinEnabled"),d=this.safeValue(s,"payoutEnabled"),h=this.safeValue(s,"transferEnabled");let l=c&&d&&h;"disabled"in s&&s.disabled&&(l=!1);let u="fiat";"crypto"in s&&s.crypto&&(u="crypto");const p=this.safeString(s,"fullName");i[n]={id:a,code:n,type:u,payin:c,payout:d,transfer:h,info:s,name:p,active:l,fee:this.safeFloat(s,"payoutFee"),precision:o,limits:{amount:{min:1/Math.pow(10,r),max:Math.pow(10,r)},price:{min:1/Math.pow(10,r),max:Math.pow(10,r)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,o)}}}}return i}async fetchTradingFee(e,t={}){await this.loadMarkets();const i=this.market(e),s=this.extend({symbol:i.id},this.omit(t,"symbol")),a=await this.privateGetTradingFeeSymbol(s);return{info:a,maker:this.safeFloat(a,"provideLiquidityRate"),taker:this.safeFloat(a,"takeLiquidityRate")}}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString(e,"type","trading"),i="privateGet"+this.capitalize(t)+"Balance",s=this.omit(e,"type"),a=await this[i](s),r={info:a};for(let e=0;e<a.length;e++){const t=a[e],i=this.safeString(t,"currency"),s=this.safeCurrencyCode(i),o=this.account();o.free=this.safeFloat(t,"available"),o.used=this.safeFloat(t,"reserved"),r[s]=o}return this.parseBalance(r)}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"timestamp")),this.safeFloat(e,"open"),this.safeFloat(e,"max"),this.safeFloat(e,"min"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={symbol:r.id,period:this.timeframes[t]};void 0!==i&&(o.from=this.iso8601(i)),void 0!==s&&(o.limit=s);const n=await this.publicGetCandlesSymbol(this.extend(o,a));return this.parseOHLCVs(n,r,t,i,s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.limit=t);const a=await this.publicGetOrderbookSymbol(this.extend(s,i));return this.parseOrderBook(a,void 0,"bid","ask","price","size")}parseTicker(e,t){const i=this.parse8601(e.timestamp);let s=void 0;void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"volume"),r=this.safeFloat(e,"volumeQuote"),o=this.safeFloat(e,"open"),n=this.safeFloat(e,"last");let c=void 0,d=void 0,h=void 0;void 0!==n&&void 0!==o&&(c=n-o,h=this.sum(n,o)/2,o>0&&(d=c/o*100));const l=this.vwap(a,r);return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:l,open:o,close:n,last:n,previousClose:void 0,change:c,percentage:d,average:h,baseVolume:a,quoteVolume:r,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s={};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"symbol"),r=this.safeMarket(a);s[r.symbol]=this.parseTicker(t,r)}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.publicGetTickerSymbol(this.extend(s,t));if("message"in a)throw new o(this.id+" "+a.message);return this.parseTicker(a,i)}parseTrade(e,t){const i=this.parse8601(e.timestamp),s=this.safeString(e,"symbol"),a=(t=this.safeMarket(s,t)).symbol;let r=void 0;const o=this.safeFloat(e,"fee");if(void 0!==o){r={cost:o,currency:t?t.feeCurrency:void 0}}const n=this.safeString(e,"clientOrderId"),c=this.safeFloat(e,"price"),d=this.safeFloat(e,"quantity"),h=c*d,l=this.safeString(e,"side");return{info:e,id:this.safeString(e,"id"),order:n,timestamp:i,datetime:this.iso8601(i),symbol:a,type:void 0,side:l,takerOrMaker:void 0,price:c,amount:d,cost:h,fee:r}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.currency(e),r.asset=a.id),void 0!==t&&(r.startTime=t);const o=await this.privateGetAccountTransactions(this.extend(r,s));return this.parseTransactions(o,a,t,i)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"createdAt")),a=this.parse8601(this.safeString(e,"updatedAt")),r=this.safeString(e,"currency"),o=this.safeCurrencyCode(r,t),n=this.parseTransactionStatus(this.safeString(e,"status")),c=this.safeFloat(e,"amount"),d=this.safeString(e,"address"),h=this.safeString(e,"hash");let l=void 0;const u=this.safeFloat(e,"fee");void 0!==u&&(l={cost:u,currency:o});const p=this.parseTransactionType(this.safeString(e,"type"));return{info:e,id:i,txid:h,timestamp:s,datetime:this.iso8601(s),address:d,tag:void 0,type:p,amount:c,currency:o,status:n,updated:a,fee:l}}parseTransactionStatus(e){return this.safeString({pending:"pending",failed:"failed",success:"ok"},e,e)}parseTransactionType(e){return this.safeString({payin:"deposit",payout:"withdrawal",withdraw:"withdrawal"},e,e)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id};void 0!==i&&(r.limit=i),void 0!==t&&(r.sort="ASC",r.from=this.iso8601(t));const o=await this.publicGetTradesSymbol(this.extend(r,s));return this.parseTrades(o,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e);let n=this.uuid().split("-").join("");n=n.slice(0,32),s=parseFloat(s);const c={clientOrderId:n,symbol:o.id,side:i,quantity:this.amountToPrecision(e,s),type:t};"limit"===t?c.price=this.priceToPrecision(e,a):c.timeInForce=this.options.defaultTimeInForce;const d=await this.privatePostOrder(this.extend(c,r)),l=this.parseOrder(d);if("rejected"===l.status)throw new h(this.id+" order was rejected by the exchange "+this.json(l));return l}async editOrder(e,t,i,s,a,r,o={}){await this.loadMarkets();let n=this.uuid().split("-").join("");n=n.slice(0,32);const c={clientOrderId:e,requestClientId:n};void 0!==a&&(c.quantity=this.amountToPrecision(t,a)),void 0!==r&&(c.price=this.priceToPrecision(t,r));const d=await this.privatePatchOrderClientOrderId(this.extend(c,o));return this.parseOrder(d)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={clientOrderId:e},a=await this.privateDeleteOrderClientOrderId(this.extend(s,i));return this.parseOrder(a)}parseOrderStatus(e){return this.safeString({new:"open",suspended:"open",partiallyFilled:"open",filled:"closed",canceled:"canceled",expired:"failed"},e,e)}parseOrder(e,t){const i=this.parse8601(this.safeString(e,"createdAt")),s=this.parse8601(this.safeString(e,"updatedAt")),a=this.safeString(e,"symbol"),r=(t=this.safeMarket(a,t)).symbol,o=this.safeFloat(e,"quantity"),n=this.safeFloat(e,"cumQuantity"),c=this.parseOrderStatus(this.safeString(e,"status")),d=this.safeString(e,"clientOrderId"),h=d;let l=this.safeFloat(e,"price"),u=void 0,p=void 0;void 0!==o&&void 0!==n&&(u=o-n,void 0!==l&&(p=n*l));const f=this.safeString(e,"type"),m=this.safeString(e,"side");let v=this.safeValue(e,"tradesReport"),y=void 0,g=void 0;if(void 0!==v){v=this.parseTrades(v,t);let e=void 0;const i=v.length;let s=0;for(let t=0;t<i;t++){void 0===e&&(e=0),s=this.sum(s,v[t].cost);const i=this.safeValue(v[t],"fee",{}),a=this.safeFloat(i,"cost");void 0!==a&&(e=this.sum(e,a))}p=s,void 0!==n&&n>0&&(g=p/n,"market"===f&&void 0===l&&(l=g)),void 0!==e&&(y={cost:e,currency:t.quote})}const b=this.safeString(e,"timeInForce");return{id:d,clientOrderId:h,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:s,status:c,symbol:r,type:f,timeInForce:b,side:m,price:l,stopPrice:void 0,average:g,amount:o,cost:p,filled:n,remaining:u,fee:y,trades:v,info:e}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={clientOrderId:e},a=await this.privateGetHistoryOrder(this.extend(s,i));if(a.length>0)return this.parseOrder(a[0]);throw new c(this.id+" order "+e+" not found")}async fetchOpenOrder(e,t,i={}){await this.loadMarkets();const s={clientOrderId:e},a=await this.privateGetOrderClientOrderId(this.extend(s,i));return this.parseOrder(a)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.market(e),r.symbol=a.id);const o=await this.privateGetOrder(this.extend(r,s));return this.parseOrders(o,a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.market(e),r.symbol=a.id),void 0!==i&&(r.limit=i),void 0!==t&&(r.from=this.iso8601(t));const o=await this.privateGetHistoryOrder(this.extend(r,s)),n=this.parseOrders(o,a),c=[];for(let e=0;e<n.length;e++){const t=n[e],i=t.status;"closed"!==i&&"canceled"!==i||c.push(t)}return this.filterBySinceLimit(c,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==t&&(a.from=this.iso8601(t)),void 0!==i&&(a.limit=i);const o=await this.privateGetHistoryTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchOrderTrades(e,t,i,s,a={}){await this.loadMarkets();let r=void 0;void 0!==t&&(r=this.market(t));const o={orderId:e},n=await this.privateGetHistoryOrderOrderIdTrades(this.extend(o,a));if(n.length>0)return this.parseTrades(n,r,i,s);throw new c(this.id+" order "+e+" not found, "+this.id+'.fetchOrderTrades() requires an exchange-specific order id, you need to grab it from order["info"]["id"]')}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},a=await this.privatePostAccountCryptoAddressCurrency(this.extend(s,t)),r=this.safeString(a,"address");this.checkAddress(r);return{currency:i,address:r,tag:this.safeString(a,"paymentId"),info:a}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},a=await this.privateGetAccountCryptoAddressCurrency(this.extend(s,t)),r=this.safeString(a,"address");this.checkAddress(r);const o=this.safeString(a,"paymentId");return{currency:i.code,address:r,tag:o,info:a}}async withdraw(e,t,i,s,a={}){await this.loadMarkets(),this.checkAddress(i);const r={currency:this.currency(e).id,amount:parseFloat(t),address:i};s&&(r.paymentId=s);const o=await this.privatePostAccountCryptoWithdraw(this.extend(r,a));return{info:o,id:o.id}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o="/api/"+this.version+"/";const n=this.omit(s,this.extractParams(e));if("public"===t)o+=t+"/"+this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),o+=this.implodeParams(e,s),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(r=this.json(n));const t=this.encode(this.apiKey+":"+this.secret),c=this.stringToBase64(t);a={Authorization:"Basic "+this.decode(c),"Content-Type":"application/json"}}return o=this.urls.api[t]+o,{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,r,c,d,l){if(void 0!==c&&e>=400){const t=this.id+" "+r;if(503===e||504===e)throw new n(t);if(429===e)return;if("{"===r[0]&&"error"in c){const e=this.safeString(c.error,"code");this.throwExactlyMatchedException(this.exceptions,e,t);if("Duplicate clientOrderId"===this.safeString(c.error,"message"))throw new h(t)}throw new o(t)}}}},function(e,t,i){"use strict";const s=i(1),{AuthenticationError:a,ExchangeError:r,PermissionDenied:o,ExchangeNotAvailable:n,OnMaintenance:c,InvalidOrder:d,OrderNotFound:h,InsufficientFunds:l,ArgumentsRequired:u,BadSymbol:p,BadRequest:f,RequestTimeout:m,NetworkError:v}=i(0),{TRUNCATE:y}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"huobipro",name:"Huobi Pro",countries:["CN"],rateLimit:2e3,userAgent:this.userAgents.chrome39,version:"v1",accounts:void 0,accountsById:void 0,hostname:"api.huobi.pro",pro:!0,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingLimits:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","4h":"4hour","1d":"1day","1w":"1week","1M":"1mon","1y":"1year"},urls:{test:{market:"https://api.testnet.huobi.pro",public:"https://api.testnet.huobi.pro",private:"https://api.testnet.huobi.pro"},logo:"https://user-images.githubusercontent.com/1294454/76137448-22748a80-604e-11ea-8069-6e389271911d.jpg",api:{market:"https://{hostname}",public:"https://{hostname}",private:"https://{hostname}",v2Public:"https://{hostname}",v2Private:"https://{hostname}"},www:"https://www.huobi.com",referral:"https://www.huobi.com/en-us/topic/invited/?invite_code=rwrd3",doc:"https://huobiapi.github.io/docs/spot/v1/cn/",fees:"https://www.huobi.com/about/fee/"},api:{v2Public:{get:["reference/currencies"]},v2Private:{get:["account/ledger","account/withdraw/quota","account/withdraw/address","account/deposit/address","reference/transact-fee-rate","account/asset-valuation","point/account","sub-user/user-list","sub-user/user-state","sub-user/account-list","sub-user/deposit-address","sub-user/query-deposit","user/api-key"],post:["point/transfer","sub-user/management","sub-user/creation","sub-user/tradable-market","sub-user/transferability","sub-user/api-key-generation","sub-user/api-key-modification","sub-user/api-key-deletion"]},market:{get:["history/kline","detail/merged","depth","trade","history/trade","detail","tickers"]},public:{get:["common/symbols","common/currencys","common/timestamp","common/exchange","settings/currencys"]},private:{get:["account/accounts","account/accounts/{id}/balance","account/accounts/{sub-uid}","account/history","cross-margin/loan-info","margin/loan-info","fee/fee-rate/get","order/openOrders","order/orders","order/orders/{id}","order/orders/{id}/matchresults","order/orders/getClientOrder","order/history","order/matchresults","dw/withdraw-virtual/addresses","query/deposit-withdraw","margin/loan-info","margin/loan-orders","margin/accounts/balance","cross-margin/loan-orders","cross-margin/accounts/balance","points/actions","points/orders","subuser/aggregate-balance","stable-coin/exchange_rate","stable-coin/quote"],post:["account/transfer","futures/transfer","order/batch-orders","order/orders/place","order/orders/submitCancelClientOrder","order/orders/batchCancelOpenOrders","order/orders","order/orders/{id}/place","order/orders/{id}/submitcancel","order/orders/batchcancel","dw/balance/transfer","dw/withdraw/api/create","dw/withdraw-virtual/create","dw/withdraw-virtual/{id}/place","dw/withdraw-virtual/{id}/cancel","dw/transfer-in/margin","dw/transfer-out/margin","margin/orders","margin/orders/{id}/repay","cross-margin/transfer-in","cross-margin/transfer-out","cross-margin/orders","cross-margin/orders/{id}/repay","stable-coin/exchange","subuser/transfer"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{"bad-request":f,"api-not-support-temp-addr":o,timeout:m,"gateway-internal-error":n,"account-frozen-balance-insufficient-error":l,"invalid-amount":d,"order-limitorder-amount-min-error":d,"order-limitorder-amount-max-error":d,"order-marketorder-amount-min-error":d,"order-limitorder-price-min-error":d,"order-limitorder-price-max-error":d,"order-orderstate-error":h,"order-queryorder-invalid":h,"order-update-error":n,"api-signature-check-failed":a,"api-signature-not-valid":a,"base-record-invalid":h,"base-symbol-trade-disabled":p,"base-symbol-error":p,"system-maintenance":c,"invalid symbol":p,"symbol trade not open now":p}},options:{fetchOrdersByStatesMethod:"private_get_order_orders",fetchOpenOrdersMethod:"fetch_open_orders_v1",createMarketBuyOrderRequiresPrice:!0,fetchMarketsMethod:"publicGetCommonSymbols",fetchBalanceMethod:"privateGetAccountAccountsIdBalance",createOrderMethod:"privatePostOrderOrdersPlace",language:"en-US"},commonCurrencies:{GET:"Themis",HOT:"Hydro Protocol",PNT:"Penta"}})}async fetchTradingLimits(e,t={}){await this.loadMarkets(),void 0===e&&(e=this.symbols);const i={};for(let s=0;s<e.length;s++){const a=e[s];i[a]=await this.fetchTradingLimitsById(this.marketId(a),t)}return i}async fetchTradingLimitsById(e,t={}){const i={symbol:e},s=await this.publicGetCommonExchange(this.extend(i,t));return this.parseTradingLimits(this.safeValue(s,"data",{}))}parseTradingLimits(e,t,i={}){return{info:e,limits:{amount:{min:this.safeFloat(e,"limit-order-must-greater-than"),max:this.safeFloat(e,"limit-order-must-less-than")}}}}costToPrecision(e,t){return this.decimalToPrecision(t,y,this.markets[e].precision.cost,this.precisionMode)}async fetchMarkets(e={}){const t=this.options.fetchMarketsMethod,i=await this[t](e),s=this.safeValue(i,"data");if(s.length<1)throw new v(this.id+" publicGetCommonSymbols returned empty response: "+this.json(s));const a=[];for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"base-currency"),r=this.safeString(t,"quote-currency"),o=i+r,n=this.safeCurrencyCode(i),c=this.safeCurrencyCode(r),d=n+"/"+c,h={amount:this.safeInteger(t,"amount-precision"),price:this.safeInteger(t,"price-precision"),cost:this.safeInteger(t,"value-precision")},l="OMG"===n?0:.002,u="OMG"===n?0:.002,p=this.safeFloat(t,"min-order-amt",Math.pow(10,-h.amount)),f=this.safeFloat(t,"max-order-amt"),m=this.safeFloat(t,"min-order-value",0),v="online"===this.safeString(t,"state");a.push({id:o,symbol:d,base:n,quote:c,baseId:i,quoteId:r,active:v,precision:h,taker:u,maker:l,limits:{amount:{min:p,max:f},price:{min:Math.pow(10,-h.price),max:void 0},cost:{min:m,max:void 0}},info:t})}return a}parseTicker(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.safeInteger(e,"ts");let a=void 0,r=void 0,o=void 0,n=void 0;"bid"in e&&(Array.isArray(e.bid)?(a=this.safeFloat(e.bid,0),r=this.safeFloat(e.bid,1)):(a=this.safeFloat(e,"bid"),r=this.safeValue(e,"bidSize"))),"ask"in e&&(Array.isArray(e.ask)?(o=this.safeFloat(e.ask,0),n=this.safeFloat(e.ask,1)):(o=this.safeFloat(e,"ask"),n=this.safeValue(e,"askSize")));const c=this.safeFloat(e,"open"),d=this.safeFloat(e,"close");let h=void 0,l=void 0,u=void 0;void 0!==c&&void 0!==d&&(h=d-c,u=this.sum(c,d)/2,void 0!==d&&d>0&&(l=h/c*100));const p=this.safeFloat(e,"amount"),f=this.safeFloat(e,"vol"),m=this.vwap(p,f);return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:a,bidVolume:r,ask:o,askVolume:n,vwap:m,open:c,close:d,last:d,previousClose:void 0,change:h,percentage:l,average:u,baseVolume:p,quoteVolume:f,info:e}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id,type:"step0"},a=await this.marketGetDepth(this.extend(s,i));if("tick"in a){if(!a.tick)throw new p(this.id+" fetchOrderBook() returned empty response: "+this.json(a));const e=this.safeValue(a,"tick"),t=this.safeInteger(e,"ts",this.safeInteger(a,"ts")),i=this.parseOrderBook(e,t);return i.nonce=this.safeInteger(e,"version"),i}throw new r(this.id+" fetchOrderBook() returned unrecognized response: "+this.json(a))}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.marketGetDetailMerged(this.extend(s,t)),r=this.parseTicker(a.tick,i),o=this.safeValue(a,"ts");return r.timestamp=o,r.datetime=this.iso8601(o),r}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.marketGetTickers(t),s=this.safeValue(i,"data"),a=this.safeInteger(i,"ts"),r={};for(let e=0;e<s.length;e++){const t=this.safeString(s[e],"symbol"),i=this.safeMarket(t),o=i.symbol,n=this.parseTicker(s[e],i);n.timestamp=a,n.datetime=this.iso8601(a),r[o]=n}return this.filterByArray(r,"symbol",e)}parseTrade(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t),a=this.safeInteger2(e,"ts","created-at"),r=this.safeString(e,"order-id");let o=this.safeString(e,"direction"),n=this.safeString(e,"type");if(void 0!==n){const e=n.split("-");o=e[0],n=e[1]}const c=this.safeString(e,"role"),d=this.safeFloat(e,"price"),h=this.safeFloat2(e,"filled-amount","amount");let l=void 0;void 0!==d&&void 0!==h&&(l=h*d);let u=void 0,p=this.safeFloat(e,"filled-fees"),f=void 0;void 0!==t&&(f=this.safeCurrencyCode(this.safeString(e,"fee-currency")));const m=this.safeFloat(e,"filled-points");void 0!==m&&(void 0!==p&&0!==p||(p=m,f=this.safeCurrencyCode(this.safeString(e,"fee-deduct-currency")))),void 0!==p&&(u={cost:p,currency:f});const v=this.safeString2(e,"trade-id","tradeId");return{id:this.safeString(e,"id",v),info:e,order:r,timestamp:a,datetime:this.iso8601(a),symbol:s,type:n,side:o,takerOrMaker:c,price:d,amount:h,cost:l,fee:u}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.market(e),r.symbol=a.id),void 0!==i&&(r.size=i),void 0!==t&&(r["start-date"]=this.ymd(t));const o=await this.privateGetOrderMatchresults(this.extend(r,s));return this.parseTrades(o.data,a,t,i)}async fetchTrades(e,t,i=1e3,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id};void 0!==i&&(r.size=i);const o=await this.marketGetHistoryTrade(this.extend(r,s)),n=this.safeValue(o,"data");let c=[];for(let e=0;e<n.length;e++){const t=this.safeValue(n[e],"data",[]);for(let e=0;e<t.length;e++){const i=this.parseTrade(t[e],a);c.push(i)}}return c=this.sortBy(c,"timestamp"),this.filterBySymbolSinceLimit(c,e,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,"id"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"amount")]}async fetchOHLCV(e,t="1m",i,s=1e3,a={}){await this.loadMarkets();const r=this.market(e),o={symbol:r.id,period:this.timeframes[t]};void 0!==s&&(o.size=s);const n=await this.marketGetHistoryKline(this.extend(o,a)),c=this.safeValue(n,"data",[]);return this.parseOHLCVs(c,r,t,i,s)}async fetchAccounts(e={}){await this.loadMarkets();return(await this.privateGetAccountAccounts(e)).data}async fetchCurrencies(e={}){const t={language:this.options.language},i=await this.publicGetSettingsCurrencys(this.extend(t,e)),s=this.safeValue(i,"data"),a={};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeValue(t,"name"),r=this.safeInteger(t,"withdraw-precision"),o=this.safeCurrencyCode(i),n=t.visible&&t["deposit-enabled"]&&t["withdraw-enabled"],c=this.safeString(t,"display-name");a[o]={id:i,code:o,type:"crypto",name:c,active:n,fee:void 0,precision:r,limits:{amount:{min:Math.pow(10,-r),max:Math.pow(10,r)},price:{min:Math.pow(10,-r),max:Math.pow(10,r)},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(t,"deposit-min-amount"),max:Math.pow(10,r)},withdraw:{min:this.safeFloat(t,"withdraw-min-amount"),max:Math.pow(10,r)}},info:t}}return a}async fetchBalance(e={}){await this.loadMarkets(),await this.loadAccounts();const t=this.options.fetchBalanceMethod,i={id:this.accounts[0].id},s=await this[t](this.extend(i,e)),a=this.safeValue(s.data,"list",[]),r={info:s};for(let e=0;e<a.length;e++){const t=a[e],i=this.safeString(t,"currency"),s=this.safeCurrencyCode(i);let o=void 0;o=s in r?r[s]:this.account(),"trade"===t.type&&(o.free=this.safeFloat(t,"balance")),"frozen"===t.type&&(o.used=this.safeFloat(t,"balance")),r[s]=o}return this.parseBalance(r)}async fetchOrdersByStates(e,t,i,s,a={}){await this.loadMarkets();const r={states:e};let o=void 0;void 0!==t&&(o=this.market(t),r.symbol=o.id);const n=this.safeString(this.options,"fetchOrdersByStatesMethod","private_get_order_orders"),c=await this[n](this.extend(r,a));return this.parseOrders(c.data,o,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privateGetOrderOrdersId(this.extend(s,i)),r=this.safeValue(a,"data");return this.parseOrder(r)}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersByStates("pre-submitted,submitted,partial-filled,filled,partial-canceled,canceled",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){const a=this.safeString(this.options,"fetchOpenOrdersMethod","fetch_open_orders_v1");return await this[a](e,t,i,s)}async fetchOpenOrdersV1(e,t,i,s={}){if(void 0===e)throw new u(this.id+" fetchOpenOrdersV1 requires a symbol argument");return await this.fetchOrdersByStates("pre-submitted,submitted,partial-filled",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStates("filled,partial-canceled,canceled",e,t,i,s)}async fetchOpenOrdersV2(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new u(this.id+" fetchOpenOrders requires a symbol argument");const a=this.market(e);let r=this.safeString(s,"account-id");if(void 0===r){await this.loadAccounts();for(let e=0;e<this.accounts.length;e++){const t=this.accounts[e];if("spot"===t.type&&(r=this.safeString(t,"id"),void 0!==r))break}}const o={symbol:a.id,"account-id":r};void 0!==i&&(o.size=i);const n=this.omit(s,"account-id"),c=await this.privateGetOrderOpenOrders(this.extend(o,n)),d=this.safeValue(c,"data",[]);return this.parseOrders(d,a,t,i)}parseOrderStatus(e){return this.safeString({"partial-filled":"open","partial-canceled":"canceled",filled:"closed",canceled:"canceled",submitted:"open"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id");let s=void 0,a=void 0,r=void 0;if("type"in e){const t=e.type.split("-");s=t[0],a=t[1],r=this.parseOrderStatus(this.safeString(e,"state"))}const o=this.safeString(e,"symbol"),n=this.safeSymbol(o,t),c=this.safeInteger(e,"created-at");let d=this.safeFloat(e,"amount");const h=this.safeFloat2(e,"filled-amount","field-amount");"market"===a&&"buy"===s&&(d="closed"===r?h:void 0);let l=this.safeFloat(e,"price");0===l&&(l=void 0);const u=this.safeFloat2(e,"filled-cash-amount","field-cash-amount");let p=void 0,f=void 0;void 0!==h&&(void 0!==d&&(p=d-h),void 0!==u&&h>0&&(f=u/h));const m=this.safeFloat2(e,"filled-fees","field-fees");let v=void 0;if(void 0!==m){let e=void 0;void 0!==t&&(e="sell"===s?t.quote:t.base),v={cost:m,currency:e}}return{info:e,id:i,clientOrderId:void 0,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:n,type:a,timeInForce:void 0,side:s,price:l,stopPrice:void 0,average:f,cost:u,amount:d,filled:h,remaining:p,status:r,fee:v,trades:void 0}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets(),await this.loadAccounts();const o=this.market(e),n={"account-id":this.accounts[0].id,symbol:o.id,type:i+"-"+t};if("market"===t&&"buy"===i)if(this.options.createMarketBuyOrderRequiresPrice){if(void 0===a)throw new d(this.id+" market buy order requires price argument to calculate cost (total amount of quote currency to spend for buying, amount * price). To switch off this warning exception and specify cost in the amount argument, set .options['createMarketBuyOrderRequiresPrice'] = false. Make sure you know what you're doing.");n.amount=this.costToPrecision(e,parseFloat(s)*parseFloat(a))}else n.amount=this.costToPrecision(e,s);else n.amount=this.amountToPrecision(e,s);"limit"!==t&&"ioc"!==t&&"limit-maker"!==t||(n.price=this.priceToPrecision(e,a));const c=this.options.createOrderMethod,h=await this[c](this.extend(n,r)),l=this.milliseconds();return{info:h,id:this.safeString(h,"data"),timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,status:void 0,symbol:e,type:t,side:i,price:a,amount:s,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0}}async cancelOrder(e,t,i={}){const s=await this.privatePostOrderOrdersIdSubmitcancel({id:e});return this.extend(this.parseOrder(s),{id:e,status:"canceled"})}currencyToPrecision(e,t){return this.decimalToPrecision(t,0,this.currencies[e].precision)}calculateFee(e,t,i,s,a,r="taker",o={}){const n=this.markets[e],c=n[r];let d=s*c,h="quote";return"sell"===i?d*=a:h="base",{type:r,currency:n[h],rate:c,cost:parseFloat(this.currencyToPrecision(n[h],d))}}parseDepositAddress(e,t){const i=this.safeString(e,"address"),s=this.safeString(e,"addressTag"),a=this.safeString(e,"currency"),r=this.safeCurrencyCode(a);return this.checkAddress(i),{currency:r,address:i,tag:s,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},a=await this.v2PrivateGetAccountDepositAddress(this.extend(s,t)),r=this.safeValue(a,"data",[]);return this.parseDepositAddress(this.safeValue(r,0,{}),i)}async fetchDeposits(e,t,i,s={}){(void 0===i||i>100)&&(i=100),await this.loadMarkets();let a=void 0;void 0!==e&&(a=this.currency(e));const r={type:"deposit",from:0};void 0!==a&&(r.currency=a.id),void 0!==i&&(r.size=i);const o=await this.privateGetQueryDepositWithdraw(this.extend(r,s));return this.parseTransactions(o.data,a,t,i)}async fetchWithdrawals(e,t,i,s={}){(void 0===i||i>100)&&(i=100),await this.loadMarkets();let a=void 0;void 0!==e&&(a=this.currency(e));const r={type:"withdraw",from:0};void 0!==a&&(r.currency=a.id),void 0!==i&&(r.size=i);const o=await this.privateGetQueryDepositWithdraw(this.extend(r,s));return this.parseTransactions(o.data,a,t,i)}parseTransaction(e,t){const i=this.safeInteger(e,"created-at"),s=this.safeInteger(e,"updated-at"),a=this.safeCurrencyCode(this.safeString(e,"currency"));let r=this.safeString(e,"type");"withdraw"===r&&(r="withdrawal");const o=this.parseTransactionStatus(this.safeString(e,"state")),n=this.safeString(e,"address-tag");let c=this.safeFloat(e,"fee");return void 0!==c&&(c=Math.abs(c)),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"tx-hash"),timestamp:i,datetime:this.iso8601(i),address:this.safeString(e,"address"),tag:n,type:r,amount:this.safeFloat(e,"amount"),currency:a,status:o,updated:s,fee:{currency:a,cost:c,rate:void 0}}}parseTransactionStatus(e){return this.safeString({unknown:"failed",confirming:"pending",confirmed:"ok",safe:"ok",orphan:"failed",submitted:"pending",canceled:"canceled",reexamine:"pending",reject:"failed",pass:"pending","wallet-reject":"failed","confirm-error":"failed",repealed:"failed","wallet-transfer":"pending","pre-transfer":"pending"},e,e)}async withdraw(e,t,i,s,a={}){await this.loadMarkets(),this.checkAddress(i);const r={address:i,amount:t,currency:this.currency(e).id.toLowerCase()};void 0!==s&&(r["addr-tag"]=s);const o=await this.privatePostDwWithdrawApiCreate(this.extend(r,a));return{info:o,id:this.safeString(o,"data")}}sign(e,t="public",i="GET",s={},a,r){let o="/";"market"===t?o+=t:"public"===t||"private"===t?o+=this.version:"v2Public"!==t&&"v2Private"!==t||(o+="v2"),o+="/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("private"===t||"v2Private"===t){this.checkRequiredCredentials();const e=this.ymdhms(this.milliseconds(),"T");let t={SignatureMethod:"HmacSHA256",SignatureVersion:"2",AccessKeyId:this.apiKey,Timestamp:e};"POST"!==i&&(t=this.extend(t,n)),t=this.keysort(t);let s=this.urlencode(t);const c=[i,this.hostname,o,s].join("\n"),d=this.hmac(this.encode(c),this.encode(this.secret),"sha256","base64");s+="&"+this.urlencode({Signature:d}),o+="?"+s,"POST"===i?(r=this.json(n),a={"Content-Type":"application/json"}):a={"Content-Type":"application/x-www-form-urlencoded"}}else Object.keys(s).length&&(o+="?"+this.urlencode(s));return o=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+o,{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,o,n,c,d){if(void 0!==n&&"status"in n){if("error"===this.safeString(n,"status")){const e=this.safeString(n,"err-code"),t=this.id+" "+o;this.throwExactlyMatchedException(this.exceptions.exact,e,t);const i=this.safeString(n,"err-msg");throw this.throwExactlyMatchedException(this.exceptions.exact,i,t),new r(t)}}}}},function(e,t,i){"use strict";
/*!
 * depd
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(47).EventEmitter;function a(e,t,i){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var s=i();return Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:s}),s}})}function r(e){return e.toString()}a(e.exports,"callSiteToString",(function(){var e=Error.stackTraceLimit,t={},s=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t},Error.stackTraceLimit=2,Error.captureStackTrace(t);var a=t.stack.slice();return Error.prepareStackTrace=s,Error.stackTraceLimit=e,a[0].toString?r:i(100)})),a(e.exports,"eventListenerCount",(function(){return s.listenerCount||i(101)}))},function(e,t){e.exports=require("events")},function(e,t,i){var s;function a(e){function i(){if(i.enabled){var e=i,a=+new Date,r=a-(s||a);e.diff=r,e.prev=s,e.curr=a,s=a;for(var o=new Array(arguments.length),n=0;n<o.length;n++)o[n]=arguments[n];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(i,s){if("%%"===i)return i;c++;var a=t.formatters[s];if("function"==typeof a){var r=o[c];i=a.call(e,r),o.splice(c,1),c--}return i})),t.formatArgs.call(e,o);var d=i.log||t.log||console.log.bind(console);d.apply(e,o)}}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=function(e){var i,s=0;for(i in e)s=(s<<5)-s+e.charCodeAt(i),s|=0;return t.colors[Math.abs(s)%t.colors.length]}(e),"function"==typeof t.init&&t.init(i),i}(t=e.exports=a.debug=a.default=a).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var i=("string"==typeof e?e:"").split(/[\s,]+/),s=i.length,a=0;a<s;a++)i[a]&&("-"===(e=i[a].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var i,s;for(i=0,s=t.skips.length;i<s;i++)if(t.skips[i].test(e))return!1;for(i=0,s=t.names.length;i<s;i++)if(t.names[i].test(e))return!0;return!1},t.humanize=i(108),t.names=[],t.skips=[],t.formatters={}},function(e,t){e.exports=require("net")},function(e,t,i){"use strict";var s=i(17).Buffer,a=i(112),r=e.exports;r.encodings=null,r.defaultCharUnicode="",r.defaultCharSingleByte="?",r.encode=function(e,t,i){e=""+(e||"");var a=r.getEncoder(t,i),o=a.write(e),n=a.end();return n&&n.length>0?s.concat([o,n]):o},r.decode=function(e,t,i){"string"==typeof e&&(r.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),r.skipDecodeWarning=!0),e=s.from(""+(e||""),"binary"));var a=r.getDecoder(t,i),o=a.write(e),n=a.end();return n?o+n:o},r.encodingExists=function(e){try{return r.getCodec(e),!0}catch(e){return!1}},r.toEncoding=r.encode,r.fromEncoding=r.decode,r._codecDataCache={},r.getCodec=function(e){r.encodings||(r.encodings=i(113));for(var t=r._canonicalizeEncoding(e),s={};;){var a=r._codecDataCache[t];if(a)return a;var o=r.encodings[t];switch(typeof o){case"string":t=o;break;case"object":for(var n in o)s[n]=o[n];s.encodingName||(s.encodingName=t),t=o.type;break;case"function":return s.encodingName||(s.encodingName=t),a=new o(s,r),r._codecDataCache[s.encodingName]=a,a;default:throw new Error("Encoding not recognized: '"+e+"' (searched as: '"+t+"')")}}},r._canonicalizeEncoding=function(e){return(""+e).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},r.getEncoder=function(e,t){var i=r.getCodec(e),s=new i.encoder(t,i);return i.bomAware&&t&&t.addBOM&&(s=new a.PrependBOM(s,t)),s},r.getDecoder=function(e,t){var i=r.getCodec(e),s=new i.decoder(t,i);return!i.bomAware||t&&!1===t.stripBOM||(s=new a.StripBOM(s,t)),s};var o="undefined"!=typeof process&&process.versions&&process.versions.node;if(o){var n=o.split(".").map(Number);(n[0]>0||n[1]>=10)&&i(128)(r),i(129)(r)}},function(e){e.exports=JSON.parse('[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93]]')},function(e){e.exports=JSON.parse('[["0","\\u0000",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]]')},function(e,t,i){"use strict";
/*!
 * unpipe
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=function(e){if(!e)throw new TypeError("argument stream is required");if("function"==typeof e.unpipe)return void e.unpipe();if(!function(e){for(var t=e.listeners("data"),i=0;i<t.length;i++)if("ondata"===t[i].name)return!0;return!1}(e))return;for(var t,i=e.listeners("close"),s=0;s<i.length;s++)"cleanup"!==(t=i[s]).name&&"onclose"!==t.name||t.call(e)}},function(e,t){e.exports=require("zlib")},function(e,t,i){"use strict";
/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s,a,r,o=i(132),n=i(11).extname,c=/^\s*([^;\s]*)(?:;|\s|$)/,d=/^text\//i;function h(e){if(!e||"string"!=typeof e)return!1;var t=c.exec(e),i=t&&o[t[1].toLowerCase()];return i&&i.charset?i.charset:!(!t||!d.test(t[1]))&&"UTF-8"}t.charset=h,t.charsets={lookup:h},t.contentType=function(e){if(!e||"string"!=typeof e)return!1;var i=-1===e.indexOf("/")?t.lookup(e):e;if(!i)return!1;if(-1===i.indexOf("charset")){var s=t.charset(i);s&&(i+="; charset="+s.toLowerCase())}return i},t.extension=function(e){if(!e||"string"!=typeof e)return!1;var i=c.exec(e),s=i&&t.extensions[i[1].toLowerCase()];if(!s||!s.length)return!1;return s[0]},t.extensions=Object.create(null),t.lookup=function(e){if(!e||"string"!=typeof e)return!1;var i=n("x."+e).toLowerCase().substr(1);if(!i)return!1;return t.types[i]||!1},t.types=Object.create(null),s=t.extensions,a=t.types,r=["nginx","apache",void 0,"iana"],Object.keys(o).forEach((function(e){var t=o[e],i=t.extensions;if(i&&i.length){s[e]=i;for(var n=0;n<i.length;n++){var c=i[n];if(a[c]){var d=r.indexOf(o[a[c]].source),h=r.indexOf(t.source);if("application/octet-stream"!==a[c]&&(d>h||d===h&&"application/"===a[c].substr(0,12)))continue}a[c]=e}}}))},function(e,t,i){"use strict";var s=Object.prototype.hasOwnProperty,a=Array.isArray,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},s=0;s<e.length;++s)void 0!==e[s]&&(i[s]=e[s]);return i};e.exports={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce((function(e,i){return e[i]=t[i],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],s=0;s<t.length;++s)for(var r=t[s],o=r.obj[r.prop],n=Object.keys(o),c=0;c<n.length;++c){var d=n[c],h=o[d];"object"==typeof h&&null!==h&&-1===i.indexOf(h)&&(t.push({obj:o,prop:d}),i.push(h))}return function(e){for(;e.length>1;){var t=e.pop(),i=t.obj[t.prop];if(a(i)){for(var s=[],r=0;r<i.length;++r)void 0!==i[r]&&s.push(i[r]);t.obj[t.prop]=s}}}(t),e},decode:function(e,t,i){var s=e.replace(/\+/g," ");if("iso-8859-1"===i)return s.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(s)}catch(e){return s}},encode:function(e,t,i){if(0===e.length)return e;var s="string"==typeof e?e:String(e);if("iso-8859-1"===i)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var a="",o=0;o<s.length;++o){var n=s.charCodeAt(o);45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122?a+=s.charAt(o):n<128?a+=r[n]:n<2048?a+=r[192|n>>6]+r[128|63&n]:n<55296||n>=57344?a+=r[224|n>>12]+r[128|n>>6&63]+r[128|63&n]:(o+=1,n=65536+((1023&n)<<10|1023&s.charCodeAt(o)),a+=r[240|n>>18]+r[128|n>>12&63]+r[128|n>>6&63]+r[128|63&n])}return a},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,i,r){if(!i)return t;if("object"!=typeof i){if(a(t))t.push(i);else{if(!t||"object"!=typeof t)return[t,i];(r&&(r.plainObjects||r.allowPrototypes)||!s.call(Object.prototype,i))&&(t[i]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(i);var n=t;return a(t)&&!a(i)&&(n=o(t,r)),a(t)&&a(i)?(i.forEach((function(i,a){if(s.call(t,a)){var o=t[a];o&&"object"==typeof o&&i&&"object"==typeof i?t[a]=e(o,i,r):t.push(i)}else t[a]=i})),t):Object.keys(i).reduce((function(t,a){var o=i[a];return s.call(t,a)?t[a]=e(t[a],o,r):t[a]=o,t}),n)}}},function(e,t,i){"use strict";var s=String.prototype.replace,a=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return s.call(e,a,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t){e.exports=require("querystring")},function(e,t,i){"use strict";
/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(60),a=i(61),r=i(40),o=i(34),n=i(5)("express:router"),c=i(10)("express"),d=i(33),h=i(22),l=i(27),u=/^\[object (\S+)\]$/,p=Array.prototype.slice,f=Object.prototype.toString,m=e.exports=function(e){var t=e||{};function i(e,t,s){i.handle(e,t,s)}return l(i,m),i.params={},i._params=[],i.caseSensitive=t.caseSensitive,i.mergeParams=t.mergeParams,i.strict=t.strict,i.stack=[],i};function v(e,t){for(var i=0;i<t.length;i++){var s=t[i];-1===e.indexOf(s)&&e.push(s)}}function y(e){var t=typeof e;return"object"!==t?t:f.call(e).replace(u,"$1")}function g(e,t){try{return e.match(t)}catch(e){return e}}m.param=function(e,t){if("function"==typeof e)return c("router.param(fn): Refactor to use path params"),void this._params.push(e);var i,s=this._params,a=s.length;":"===e[0]&&(c("router.param("+JSON.stringify(e)+", fn): Use router.param("+JSON.stringify(e.substr(1))+", fn) instead"),e=e.substr(1));for(var r=0;r<a;++r)(i=s[r](e,t))&&(t=i);if("function"!=typeof t)throw new Error("invalid param() call for "+e+", got "+t);return(this.params[e]=this.params[e]||[]).push(t),this},m.handle=function(e,t,i){var s=this;n("dispatching %s %s",e.method,e.url);var a=0,r=function(e){if("string"!=typeof e||0===e.length||"/"===e[0])return;var t=e.indexOf("?"),i=-1!==t?t:e.length,s=e.substr(0,i).indexOf("://");return-1!==s?e.substr(0,e.indexOf("/",3+s)):void 0}(e.url)||"",c="",d=!1,l={},u=[],p=s.stack,f=e.params,m=e.baseUrl||"",y=function(e,t){for(var i=new Array(arguments.length-2),s=new Array(arguments.length-2),a=0;a<i.length;a++)i[a]=arguments[a+2],s[a]=t[i[a]];return function(){for(var a=0;a<i.length;a++)t[i[a]]=s[a];return e.apply(this,arguments)}}(i,e,"baseUrl","next","params");function b(i){var w="route"===i?null:i;if(d&&(e.url=e.url.substr(1),d=!1),0!==c.length&&(e.baseUrl=m,e.url=r+c+e.url.substr(r.length),c=""),"router"!==w)if(a>=p.length)setImmediate(y,w);else{var k,x,T,O=function(e){try{return h(e).pathname}catch(e){return}}(e);if(null==O)return y(w);for(;!0!==x&&a<p.length;)if(x=g(k=p[a++],O),T=k.route,"boolean"!=typeof x&&(w=w||x),!0===x&&T)if(w)x=!1;else{var _=e.method,S=T._handles_method(_);S||"OPTIONS"!==_||v(u,T._options()),S||"HEAD"===_||(x=!1)}if(!0!==x)return y(w);T&&(e.route=T),e.params=s.mergeParams?function(e,t){if("object"!=typeof t||!t)return e;var i=o({},t);if(!(0 in e)||!(0 in t))return o(i,e);var s=0,a=0;for(;s in e;)s++;for(;a in t;)a++;for(s--;s>=0;s--)e[s+a]=e[s],s<a&&delete e[s];return o(i,e)}(k.params,f):k.params;var C=k.path;s.process_params(k,l,e,t,(function(i){return i?b(w||i):T?k.handle_request(e,t,b):void function(i,s,a,o){if(0!==a.length){var h=o[a.length];if(h&&"/"!==h&&"."!==h)return b(s);n("trim prefix (%s) from url %s",a,e.url),c=a,e.url=r+e.url.substr(r.length+c.length),r||"/"===e.url[0]||(e.url="/"+e.url,d=!0),e.baseUrl=m+("/"===c[c.length-1]?c.substring(0,c.length-1):c)}n("%s %s : %s",i.name,a,e.originalUrl),s?i.handle_error(s,e,t,b):i.handle_request(e,t,b)}(k,w,C,O)}))}else setImmediate(y,null)}e.next=b,"OPTIONS"===e.method&&(y=function(e,t){return function(){var i=new Array(arguments.length+1);i[0]=e;for(var s=0,a=arguments.length;s<a;s++)i[s+1]=arguments[s];t.apply(this,i)}}(y,(function(e,i){if(i||0===u.length)return e(i);!function(e,t,i){try{var s=t.join(",");e.set("Allow",s),e.send(s)}catch(e){i(e)}}(t,u,e)}))),e.baseUrl=m,e.originalUrl=e.originalUrl||e.url,b()},m.process_params=function(e,t,i,s,a){var r=this.params,o=e.keys;if(!o||0===o.length)return a();var n,c,d,h,l,u=0,p=0;function f(e){return e?a(e):u>=o.length?a():(p=0,c=o[u++],n=c.name,d=i.params[n],h=r[n],l=t[n],void 0!==d&&h?l&&(l.match===d||l.error&&"route"!==l.error)?(i.params[n]=l.value,f(l.error)):(t[n]=l={error:null,match:d,value:d},void m()):f())}function m(e){var t=h[p++];if(l.value=i.params[c.name],e)return l.error=e,void f(e);if(!t)return f();try{t(i,s,m,d,c.name)}catch(e){m(e)}}f()},m.use=function(e){var t=0,i="/";if("function"!=typeof e){for(var s=e;Array.isArray(s)&&0!==s.length;)s=s[0];"function"!=typeof s&&(t=1,i=e)}var r=d(p.call(arguments,t));if(0===r.length)throw new TypeError("Router.use() requires a middleware function");for(var o=0;o<r.length;o++){if("function"!=typeof(e=r[o]))throw new TypeError("Router.use() requires a middleware function but got a "+y(e));n("use %o %s",i,e.name||"<anonymous>");var c=new a(i,{sensitive:this.caseSensitive,strict:!1,end:!1},e);c.route=void 0,this.stack.push(c)}return this},m.route=function(e){var t=new s(e),i=new a(e,{sensitive:this.caseSensitive,strict:this.strict,end:!0},t.dispatch.bind(t));return i.route=t,this.stack.push(i),t},r.concat("all").forEach((function(e){m[e]=function(t){var i=this.route(t);return i[e].apply(i,p.call(arguments,1)),this}}))},function(e,t,i){"use strict";
/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(5)("express:router:route"),a=i(33),r=i(61),o=i(40),n=Array.prototype.slice,c=Object.prototype.toString;function d(e){this.path=e,this.stack=[],s("new %o",e),this.methods={}}e.exports=d,d.prototype._handles_method=function(e){if(this.methods._all)return!0;var t=e.toLowerCase();return"head"!==t||this.methods.head||(t="get"),Boolean(this.methods[t])},d.prototype._options=function(){var e=Object.keys(this.methods);this.methods.get&&!this.methods.head&&e.push("head");for(var t=0;t<e.length;t++)e[t]=e[t].toUpperCase();return e},d.prototype.dispatch=function(e,t,i){var s=0,a=this.stack;if(0===a.length)return i();var r=e.method.toLowerCase();"head"!==r||this.methods.head||(r="get"),e.route=this,function o(n){if(n&&"route"===n)return i();if(n&&"router"===n)return i(n);var c=a[s++];if(!c)return i(n);if(c.method&&c.method!==r)return o(n);n?c.handle_error(n,e,t,o):c.handle_request(e,t,o)}()},d.prototype.all=function(){for(var e=a(n.call(arguments)),t=0;t<e.length;t++){var i=e[t];if("function"!=typeof i){var s=c.call(i),o="Route.all() requires a callback function but got a "+s;throw new TypeError(o)}var d=r("/",{},i);d.method=void 0,this.methods._all=!0,this.stack.push(d)}return this},o.forEach((function(e){d.prototype[e]=function(){for(var t=a(n.call(arguments)),i=0;i<t.length;i++){var o=t[i];if("function"!=typeof o){var d=c.call(o),h="Route."+e+"() requires a callback function but got a "+d;throw new Error(h)}s("%s %o",e,this.path);var l=r("/",{},o);l.method=e,this.methods[e]=!0,this.stack.push(l)}return this}}))},function(e,t,i){"use strict";
/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(142),a=i(5)("express:router:layer"),r=Object.prototype.hasOwnProperty;function o(e,t,i){if(!(this instanceof o))return new o(e,t,i);a("new %o",e);var r=t||{};this.handle=i,this.name=i.name||"<anonymous>",this.params=void 0,this.path=void 0,this.regexp=s(e,this.keys=[],r),this.regexp.fast_star="*"===e,this.regexp.fast_slash="/"===e&&!1===r.end}function n(e){if("string"!=typeof e||0===e.length)return e;try{return decodeURIComponent(e)}catch(t){throw t instanceof URIError&&(t.message="Failed to decode param '"+e+"'",t.status=t.statusCode=400),t}}e.exports=o,o.prototype.handle_error=function(e,t,i,s){var a=this.handle;if(4!==a.length)return s(e);try{a(e,t,i,s)}catch(e){s(e)}},o.prototype.handle_request=function(e,t,i){var s=this.handle;if(s.length>3)return i();try{s(e,t,i)}catch(e){i(e)}},o.prototype.match=function(e){var t;if(null!=e){if(this.regexp.fast_slash)return this.params={},this.path="",!0;if(this.regexp.fast_star)return this.params={0:n(e)},this.path=e,!0;t=this.regexp.exec(e)}if(!t)return this.params=void 0,this.path=void 0,!1;this.params={},this.path=t[0];for(var i=this.keys,s=this.params,a=1;a<t.length;a++){var o=i[a-1].name,c=n(t[a]);void 0===c&&r.call(s,o)||(s[o]=c)}return!0}},function(e,t,i){"use strict";
/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(34),a=i(22),r=i(39);e.exports=function(e){var t=s({},e),i=r.parse;return"function"==typeof e&&(i=e,t=void 0),void 0!==t&&void 0===t.allowPrototypes&&(t.allowPrototypes=!0),function(e,s,r){if(!e.query){var o=a(e).query;e.query=i(o,t)}r()}}},function(e,t,i){"use strict";
/*!
 * content-disposition
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=function(e,t){var i=t||{},a=i.type||"attachment",r=function(e,t){if(void 0===e)return;var i={};if("string"!=typeof e)throw new TypeError("filename must be a string");void 0===t&&(t=!0);if("string"!=typeof t&&"boolean"!=typeof t)throw new TypeError("fallback must be a string or boolean");if("string"==typeof t&&c.test(t))throw new TypeError("fallback must be ISO-8859-1 string");var a=s(e),r=u.test(a),n="string"!=typeof t?t&&y(a):s(t),d="string"==typeof n&&n!==a;(d||!r||o.test(a))&&(i["filename*"]=a);(r||d)&&(i.filename=d?n:a);return i}(e,i.fallback);return function(e){var t=e.parameters,i=e.type;if(!i||"string"!=typeof i||!p.test(i))throw new TypeError("invalid type");var s=String(i).toLowerCase();if(t&&"object"==typeof t)for(var a,r=Object.keys(t).sort(),o=0;o<r.length;o++){var n="*"===(a=r[o]).substr(-1)?k(t[a]):w(t[a]);s+="; "+a+"="+n}return s}(new x(a,r))},e.exports.parse=function(e){if(!e||"string"!=typeof e)throw new TypeError("argument string is required");var t=m.exec(e);if(!t)throw new TypeError("invalid type format");var i,s,a=t[0].length,r=t[1].toLowerCase(),o=[],n={};a=l.lastIndex=";"===t[0].substr(-1)?a-1:a;for(;t=l.exec(e);){if(t.index!==a)throw new TypeError("invalid parameter format");if(a+=t[0].length,i=t[1].toLowerCase(),s=t[2],-1!==o.indexOf(i))throw new TypeError("invalid duplicate parameter");o.push(i),i.indexOf("*")+1!==i.length?"string"!=typeof n[i]&&('"'===s[0]&&(s=s.substr(1,s.length-2).replace(d,"$1")),n[i]=s):(i=i.slice(0,-1),s=v(s),n[i]=s)}if(-1!==a&&a!==e.length)throw new TypeError("invalid parameter format");return new x(r,n)};var s=i(11).basename,a=i(41).Buffer,r=/[\x00-\x20"'()*,/:;<=>?@[\\\]{}\x7f]/g,o=/%[0-9A-Fa-f]{2}/,n=/%([0-9A-Fa-f]{2})/g,c=/[^\x20-\x7e\xa0-\xff]/g,d=/\\([\u0000-\u007f])/g,h=/([\\"])/g,l=/;[\x09\x20]*([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*=[\x09\x20]*("(?:[\x20!\x23-\x5b\x5d-\x7e\x80-\xff]|\\[\x20-\x7e])*"|[!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*/g,u=/^[\x20-\x7e\x80-\xff]+$/,p=/^[!#$%&'*+.0-9A-Z^_`a-z|~-]+$/,f=/^([A-Za-z0-9!#$%&+\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+.^_`|~-])+)$/,m=/^([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*(?:$|;)/;function v(e){var t=f.exec(e);if(!t)throw new TypeError("invalid extended field value");var i,s=t[1].toLowerCase(),r=t[2].replace(n,g);switch(s){case"iso-8859-1":i=y(r);break;case"utf-8":i=a.from(r,"binary").toString("utf8");break;default:throw new TypeError("unsupported charset in extended field")}return i}function y(e){return String(e).replace(c,"?")}function g(e,t){return String.fromCharCode(parseInt(t,16))}function b(e){return"%"+String(e).charCodeAt(0).toString(16).toUpperCase()}function w(e){return'"'+String(e).replace(h,"\\$1")+'"'}function k(e){var t=String(e);return"UTF-8''"+encodeURIComponent(t).replace(r,b)}function x(e,t){this.type=e,this.parameters=t}},function(e,t,i){"use strict";
/*!
 * etag
 * Copyright(c) 2014-2016 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=function(e,t){if(null==e)throw new TypeError("argument entity is required");var i=function(e){if("function"==typeof a&&e instanceof a)return!0;return e&&"object"==typeof e&&"ctime"in e&&"[object Date]"===r.call(e.ctime)&&"mtime"in e&&"[object Date]"===r.call(e.mtime)&&"ino"in e&&"number"==typeof e.ino&&"size"in e&&"number"==typeof e.size}(e),o=t&&"boolean"==typeof t.weak?t.weak:i;if(!i&&"string"!=typeof e&&!Buffer.isBuffer(e))throw new TypeError("argument entity must be string, Buffer, or fs.Stats");var n=i?(c=e,d=c.mtime.getTime().toString(16),'"'+c.size.toString(16)+"-"+d+'"'):function(e){if(0===e.length)return'"0-2jmj7l5rSw0yVb/vlWAYkK/YBwk"';var t=s.createHash("sha1").update(e,"utf8").digest("base64").substring(0,27);return'"'+("string"==typeof e?Buffer.byteLength(e,"utf8"):e.length).toString(16)+"-"+t+'"'}(e);var c,d;return o?"W/"+n:n};var s=i(65),a=i(16).Stats,r=Object.prototype.toString},function(e,t){e.exports=require("crypto")},function(e,t,i){"use strict";
/*!
 * fresh
 * Copyright(c) 2012 TJ Holowaychuk
 * Copyright(c) 2016-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var s=/(?:^|,)\s*?no-cache\s*?(?:,|$)/;function a(e){var t=e&&Date.parse(e);return"number"==typeof t?t:NaN}e.exports=function(e,t){var i=e["if-modified-since"],r=e["if-none-match"];if(!i&&!r)return!1;var o=e["cache-control"];if(o&&s.test(o))return!1;if(r&&"*"!==r){var n=t.etag;if(!n)return!1;for(var c=!0,d=function(e){for(var t=0,i=[],s=0,a=0,r=e.length;a<r;a++)switch(e.charCodeAt(a)){case 32:s===t&&(s=t=a+1);break;case 44:i.push(e.substring(s,t)),s=t=a+1;break;default:t=a+1}return i.push(e.substring(s,t)),i}(r),h=0;h<d.length;h++){var l=d[h];if(l===n||l==="W/"+n||"W/"+l===n){c=!1;break}}if(c)return!1}if(i){var u=t["last-modified"];if(!(u&&a(u)<=a(i)))return!1}return!0}},function(e,t,i){"use strict";
/*!
 * range-parser
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015-2016 Douglas Christopher Wilson
 * MIT Licensed
 */function s(e,t){return{start:e.start,end:e.end,index:t}}function a(e){return{start:e.start,end:e.end}}function r(e,t){return e.index-t.index}function o(e,t){return e.start-t.start}e.exports=function(e,t,i){if("string"!=typeof t)throw new TypeError("argument str must be a string");var n=t.indexOf("=");if(-1===n)return-2;var c=t.slice(n+1).split(","),d=[];d.type=t.slice(0,n);for(var h=0;h<c.length;h++){var l=c[h].split("-"),u=parseInt(l[0],10),p=parseInt(l[1],10);isNaN(u)?(u=e-p,p=e-1):isNaN(p)&&(p=e-1),p>e-1&&(p=e-1),isNaN(u)||isNaN(p)||u>p||u<0||d.push({start:u,end:p})}if(d.length<1)return-1;return i&&i.combine?function(e){for(var t=e.map(s).sort(o),i=0,n=1;n<t.length;n++){var c=t[n],d=t[i];c.start>d.end+1?t[++i]=c:c.end>d.end&&(d.end=c.end,d.index=Math.min(d.index,c.index))}t.length=i+1;var h=t.sort(r).map(a);return h.type=e.type,h}(d):d}},function(e,t,i){"use strict";
/*!
 * proxy-addr
 * Copyright(c) 2014-2016 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=function(e,t){if(!e)throw new TypeError("req argument is required");if(!t)throw new TypeError("trust argument is required");var i=d(e,t);return i[i.length-1]},e.exports.all=d,e.exports.compile=h;var s=i(150),a=i(151),r=/^[0-9]+$/,o=a.isValid,n=a.parse,c={linklocal:["169.254.0.0/16","fe80::/10"],loopback:["127.0.0.1/8","::1/128"],uniquelocal:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","fc00::/7"]};function d(e,t){var i=s(e);if(!t)return i;"function"!=typeof t&&(t=h(t));for(var a=0;a<i.length-1;a++)t(i[a],a)||(i.length=a+1);return i}function h(e){if(!e)throw new TypeError("argument is required");var t;if("string"==typeof e)t=[e];else{if(!Array.isArray(e))throw new TypeError("unsupported trust argument");t=e.slice()}for(var i=0;i<t.length;i++)e=t[i],Object.prototype.hasOwnProperty.call(c,e)&&(e=c[e],t.splice.apply(t,[i,1].concat(e)),i+=e.length-1);return function(e){var t=e.length;return 0===t?u:1===t?(s=e[0],a=s[0],r=a.kind(),c="ipv4"===r,d=s[1],function(e){if(!o(e))return!1;var t=n(e);if(t.kind()!==r){if(c&&!t.isIPv4MappedAddress())return!1;t=c?t.toIPv4Address():t.toIPv4MappedAddress()}return t.match(a,d)}):(i=e,function(e){if(!o(e))return!1;for(var t,s=n(e),a=s.kind(),r=0;r<i.length;r++){var c=i[r],d=c[0],h=d.kind(),l=c[1],u=s;if(a!==h){if("ipv4"===h&&!s.isIPv4MappedAddress())continue;t||(t="ipv4"===h?s.toIPv4Address():s.toIPv4MappedAddress()),u=t}if(u.match(d,l))return!0}return!1});var i;var s,a,r,c,d}(function(e){for(var t=new Array(e.length),i=0;i<e.length;i++)t[i]=l(e[i]);return t}(t))}function l(e){var t=e.lastIndexOf("/"),i=-1!==t?e.substring(0,t):e;if(!o(i))throw new TypeError("invalid IP address: "+i);var s=n(i);-1===t&&"ipv6"===s.kind()&&s.isIPv4MappedAddress()&&(s=s.toIPv4Address());var a="ipv6"===s.kind()?128:32,c=-1!==t?e.substring(t+1,e.length):null;if((c=null===c?a:r.test(c)?parseInt(c,10):"ipv4"===s.kind()&&o(c)?function(e){var t=n(e);return"ipv4"===t.kind()?t.prefixLengthFromSubnetMask():null}(c):null)<=0||c>a)throw new TypeError("invalid range on address: "+e);return[s,c]}function u(){return!1}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,i){"use strict";const s=i(13),a=Symbol(),r=Symbol();function o(e,t){if(!Buffer.isBuffer(t)&&"string"!=typeof t)throw new Error("response.write() of unexpected type: "+typeof t);e[a].push(Buffer.from(t))}e.exports=class e extends s.ServerResponse{static from(t){const i=new e(t);return i.statusCode=t.statusCode,i[r]=t.headers,i[a]=[Buffer.from(t.body)],i.end(),i}static body(e){return Buffer.concat(e[a])}static headers(e){const t="function"==typeof e.getHeaders?e.getHeaders():e._headers;return Object.assign(t,e[r])}get headers(){return this[r]}setHeader(e,t){this._wroteHeader?this[r][e]=t:super.setHeader(e,t)}writeHead(e,t,i){const s="string"==typeof t?i:t;for(const e in s)if(this.setHeader(e,s[e]),!this._wroteHeader)break;super.writeHead(e,t,i)}constructor({method:e}){super({method:e}),this[a]=[],this[r]={},this.useChunkedEncodingByDefault=!1,this.chunkedEncoding=!1,this._header="",this.assignSocket({_writableState:{},writable:!0,on:Function.prototype,removeListener:Function.prototype,destroy:Function.prototype,cork:Function.prototype,uncork:Function.prototype,write:(e,t,i)=>{if("function"==typeof t&&(i=t,t=null),""===this._header||this._wroteHeader)o(this,e);else{const t=function(e){if(Buffer.isBuffer(e))return e.toString("utf8");if("string"==typeof e)return e;throw new Error("response.write() of unexpected type: "+typeof e)}(e),i=t.indexOf("\r\n\r\n");if(-1!==i){const e=t.slice(i+"\r\n\r\n".length);e&&o(this,e),this._wroteHeader=!0}}"function"==typeof i&&i()}})}}},function(e,t,i){const s=i(4),a=i(8),r=i(9);e.exports=async(e,t,i,o,n,c,d=!1)=>{try{let h=await s(o,n,c,d),l={values:a(h)[i],period:e,stdDev:t};return await r.BollingerBands.calculate(l)}catch(e){throw e}}},function(e,t,i){"use strict";const s=i(1),a=i(73),r=i(0);s.ccxtVersion="1.38.80";const o={acx:i(84),aofex:i(211),bcex:i(212),bequant:i(213),bibox:i(214),bigone:i(215),binance:i(85),binanceus:i(216),bit2c:i(217),bitbank:i(218),bitbay:i(219),bitcoincom:i(220),bitfinex:i(86),bitfinex2:i(221),bitflyer:i(222),bitforex:i(223),bitget:i(224),bithumb:i(225),bitkk:i(226),bitmart:i(227),bitmax:i(228),bitmex:i(229),bitpanda:i(230),bitso:i(231),bitstamp:i(232),bitstamp1:i(233),bittrex:i(234),bitvavo:i(235),bitz:i(236),bl3p:i(237),bleutrade:i(238),braziliex:i(239),btcalpha:i(240),btcbox:i(241),btcmarkets:i(242),btctradeua:i(243),btcturk:i(244),buda:i(245),bw:i(246),bybit:i(247),bytetrade:i(248),cex:i(249),chilebit:i(250),coinbase:i(251),coinbaseprime:i(252),coinbasepro:i(88),coincheck:i(253),coinegg:i(254),coinex:i(255),coinfalcon:i(256),coinfloor:i(257),coingi:i(258),coinmarketcap:i(259),coinmate:i(260),coinone:i(261),coinspot:i(262),crex24:i(263),currencycom:i(264),deribit:i(265),digifinex:i(266),dsx:i(267),eterbase:i(268),exmo:i(269),exx:i(270),fcoin:i(89),fcoinjp:i(271),flowbtc:i(272),foxbit:i(36),ftx:i(273),gateio:i(274),gemini:i(275),hbtc:i(276),hitbtc:i(44),hollaex:i(277),huobijp:i(278),huobipro:i(45),huobiru:i(279),ice3x:i(280),idex:i(281),independentreserve:i(282),indodax:i(283),itbit:i(284),kraken:i(285),kucoin:i(286),kuna:i(287),lakebtc:i(288),latoken:i(289),lbank:i(290),liquid:i(291),livecoin:i(292),luno:i(293),lykke:i(294),mercado:i(295),mixcoins:i(296),novadax:i(297),oceanex:i(298),okcoin:i(299),okex:i(90),paymium:i(300),phemex:i(301),poloniex:i(302),probit:i(303),qtrade:i(304),rightbtc:i(305),ripio:i(306),southxchange:i(307),stex:i(308),surbitcoin:i(309),therock:i(310),tidebit:i(311),tidex:i(312),timex:i(313),upbit:i(314),vaultoro:i(315),vbtc:i(316),vcc:i(317),wavesexchange:i(318),whitebit:i(319),xbtce:i(320),xena:i(321),yobit:i(322),zaif:i(323),zb:i(87)};e.exports=Object.assign({version:"1.38.80",Exchange:s,exchanges:Object.keys(o)},o,a,r)},function(e,t,i){"use strict";const{unCamelCase:s}=i(43);e.exports=(e=>{for(const t in e)e[s(t)]=e[t];return e})(Object.assign({},i(176),i(180),i(43),i(74),i(2),i(24),i(184),i(83),i(209),i(210)))},function(e,t,i){"use strict";const s=Number.isFinite,a=Number.isInteger,r=Array.isArray,o=e=>null!=e,n=e=>"string"==typeof e,c=e=>null!==e&&"object"==typeof e,d=e=>o(e)&&e.toString||s(e),h=(e,t)=>c(e)?e[t]:void 0,l=(e,t,i)=>c(e)?t in e&&null!==e[t]?e[t]:e[i]:void 0,u=e=>s(e)||n(e)?parseFloat(e):NaN,p=e=>s(e)||n(e)?parseInt(e,10):NaN;e.exports={isNumber:s,isInteger:a,isArray:r,isObject:c,isString:n,isStringCoercible:d,isDictionary:e=>c(e)&&Object.getPrototypeOf(e)===Object.prototype&&!r(e)&&!(e=>e instanceof RegExp)(e),hasProps:o,prop:h,asFloat:u,asInteger:p,safeFloat:(e,t,i,a=u(h(e,t)))=>s(a)?a:i,safeInteger:(e,t,i,a=p(h(e,t)))=>s(a)?a:i,safeIntegerProduct:(e,t,i,a,r=p(h(e,t)))=>s(r)?parseInt(r*i):a,safeTimestamp:(e,t,i,a=u(h(e,t)))=>s(a)?parseInt(1e3*a):i,safeValue:(e,t,i,s=h(e,t))=>o(s)?s:i,safeString:(e,t,i,s=h(e,t))=>d(s)?String(s):i,safeStringLower:(e,t,i,s=h(e,t))=>d(s)?String(s).toLowerCase():i,safeStringUpper:(e,t,i,s=h(e,t))=>d(s)?String(s).toUpperCase():i,safeFloat2:(e,t,i,a,r=u(l(e,t,i)))=>s(r)?r:a,safeInteger2:(e,t,i,a,r=p(l(e,t,i)))=>s(r)?r:a,safeIntegerProduct2:(e,t,i,a,r,o=p(l(e,t,i)))=>s(o)?parseInt(o*a):r,safeTimestamp2:(e,t,i,a,r=u(l(e,t,i)))=>s(r)?parseInt(1e3*r):a,safeValue2:(e,t,i,s,a=l(e,t,i))=>o(a)?a:s,safeString2:(e,t,i,s,a=l(e,t,i))=>d(a)?String(a):s,safeStringLower2:(e,t,i,s,a=l(e,t,i))=>d(a)?String(a).toLowerCase():s,safeStringUpper2:(e,t,i,s,a=l(e,t,i))=>d(a)?String(a).toUpperCase():s}},function(e,t,i){"use strict";var s=Object.prototype.hasOwnProperty,a=Array.isArray,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},s=0;s<e.length;++s)void 0!==e[s]&&(i[s]=e[s]);return i};e.exports={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce((function(e,i){return e[i]=t[i],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],s=0;s<t.length;++s)for(var r=t[s],o=r.obj[r.prop],n=Object.keys(o),c=0;c<n.length;++c){var d=n[c],h=o[d];"object"==typeof h&&null!==h&&-1===i.indexOf(h)&&(t.push({obj:o,prop:d}),i.push(h))}return function(e){for(;e.length>1;){var t=e.pop(),i=t.obj[t.prop];if(a(i)){for(var s=[],r=0;r<i.length;++r)void 0!==i[r]&&s.push(i[r]);t.obj[t.prop]=s}}}(t),e},decode:function(e,t,i){var s=e.replace(/\+/g," ");if("iso-8859-1"===i)return s.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(s)}catch(e){return s}},encode:function(e,t,i){if(0===e.length)return e;var s="string"==typeof e?e:String(e);if("iso-8859-1"===i)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var a="",o=0;o<s.length;++o){var n=s.charCodeAt(o);45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122?a+=s.charAt(o):n<128?a+=r[n]:n<2048?a+=r[192|n>>6]+r[128|63&n]:n<55296||n>=57344?a+=r[224|n>>12]+r[128|n>>6&63]+r[128|63&n]:(o+=1,n=65536+((1023&n)<<10|1023&s.charCodeAt(o)),a+=r[240|n>>18]+r[128|n>>12&63]+r[128|n>>6&63]+r[128|63&n])}return a},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,i,r){if(!i)return t;if("object"!=typeof i){if(a(t))t.push(i);else{if(!t||"object"!=typeof t)return[t,i];(r&&(r.plainObjects||r.allowPrototypes)||!s.call(Object.prototype,i))&&(t[i]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(i);var n=t;return a(t)&&!a(i)&&(n=o(t,r)),a(t)&&a(i)?(i.forEach((function(i,a){if(s.call(t,a)){var o=t[a];o&&"object"==typeof o&&i&&"object"==typeof i?t[a]=e(o,i,r):t.push(i)}else t[a]=i})),t):Object.keys(i).reduce((function(t,a){var o=i[a];return s.call(t,a)?t[a]=e(t[a],o,r):t[a]=o,t}),n)}}},function(e,t,i){"use strict";var s=String.prototype.replace,a=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return s.call(e,a,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,i){var s=i(6)._;function a(e,t){null!=e&&("number"==typeof e?this.fromNumber(e,t):Buffer.isBuffer(e)?this.fromBuffer(e):null==t&&"string"!=typeof e?this.fromByteArray(e):this.fromString(e,t))}function r(){return new a(null)}a.prototype.am=function(e,t,i,s,a,r){for(var o=16383&t,n=t>>14;--r>=0;){var c=16383&this[e],d=this[e++]>>14,h=n*c+d*o;a=((c=o*c+((16383&h)<<14)+i[s]+a)>>28)+(h>>14)+n*d,i[s++]=268435455&c}return a},a.prototype.DB=28,a.prototype.DM=268435455,a.prototype.DV=1<<28;a.prototype.FV=Math.pow(2,52),a.prototype.F1=24,a.prototype.F2=4;var o,n,c=new Array;for(o="0".charCodeAt(0),n=0;n<=9;++n)c[o++]=n;for(o="a".charCodeAt(0),n=10;n<36;++n)c[o++]=n;for(o="A".charCodeAt(0),n=10;n<36;++n)c[o++]=n;function d(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function h(e,t){var i=c[e.charCodeAt(t)];return null==i?-1:i}function l(e){var t=r();return t.fromInt(e),t}function u(e){var t,i=1;return 0!=(t=e>>>16)&&(e=t,i+=16),0!=(t=e>>8)&&(e=t,i+=8),0!=(t=e>>4)&&(e=t,i+=4),0!=(t=e>>2)&&(e=t,i+=2),0!=(t=e>>1)&&(e=t,i+=1),i}function p(e){this.m=e}function f(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function m(e,t){return e&t}function v(e,t){return e|t}function y(e,t){return e^t}function g(e){if(0===e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function b(){}function w(e){return e}function k(e){this.r2=r(),this.q3=r(),a.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}p.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},p.prototype.revert=function(e){return e},p.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},p.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},p.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},f.prototype.convert=function(e){var t=r();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(a.ZERO)>0&&this.m.subTo(t,t),t},f.prototype.revert=function(e){var t=r();return e.copyTo(t),this.reduce(t),t},f.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var i=32767&e[t],s=i*this.mpl+((i*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[i=t+this.m.t]+=this.m.am(0,s,e,t,0,this.m.t);e[i]>=e.DV;)e[i]-=e.DV,e[++i]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},f.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},f.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},b.prototype.convert=w,b.prototype.revert=w,b.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i)},b.prototype.sqrTo=function(e,t){e.squareTo(t)},k.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=r();return e.copyTo(t),this.reduce(t),t},k.prototype.revert=function(e){return e},k.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},k.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},k.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},a.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},a.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0},a.prototype.fromString=function(e,t,i){var s;switch(t){case 2:s=1;break;case 4:s=2;break;case 8:s=3;break;case 16:s=4;break;case 32:s=5;break;case 256:s=8;break;default:return void this.fromRadix(e,t)}this.t=0,this.s=0;for(var r=e.length,o=!1,n=0;--r>=0;){var c=8==s?255&e[r]:h(e,r);c<0?"-"==e.charAt(r)&&(o=!0):(o=!1,0===n?this[this.t++]=c:n+s>this.DB?(this[this.t-1]|=(c&(1<<this.DB-n)-1)<<n,this[this.t++]=c>>this.DB-n):this[this.t-1]|=c<<n,(n+=s)>=this.DB&&(n-=this.DB))}i||8!=s||0==(128&e[0])||(this.s=-1,n>0&&(this[this.t-1]|=(1<<this.DB-n)-1<<n)),this.clamp(),o&&a.ZERO.subTo(this,this)},a.prototype.fromByteArray=function(e,t){this.fromString(e,256,t)},a.prototype.fromBuffer=function(e){this.fromString(e,256,!0)},a.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},a.prototype.dlShiftTo=function(e,t){var i;for(i=this.t-1;i>=0;--i)t[i+e]=this[i];for(i=e-1;i>=0;--i)t[i]=0;t.t=this.t+e,t.s=this.s},a.prototype.drShiftTo=function(e,t){for(var i=e;i<this.t;++i)t[i-e]=this[i];t.t=Math.max(this.t-e,0),t.s=this.s},a.prototype.lShiftTo=function(e,t){var i,s=e%this.DB,a=this.DB-s,r=(1<<a)-1,o=Math.floor(e/this.DB),n=this.s<<s&this.DM;for(i=this.t-1;i>=0;--i)t[i+o+1]=this[i]>>a|n,n=(this[i]&r)<<s;for(i=o-1;i>=0;--i)t[i]=0;t[o]=n,t.t=this.t+o+1,t.s=this.s,t.clamp()},a.prototype.rShiftTo=function(e,t){t.s=this.s;var i=Math.floor(e/this.DB);if(i>=this.t)t.t=0;else{var s=e%this.DB,a=this.DB-s,r=(1<<s)-1;t[0]=this[i]>>s;for(var o=i+1;o<this.t;++o)t[o-i-1]|=(this[o]&r)<<a,t[o-i]=this[o]>>s;s>0&&(t[this.t-i-1]|=(this.s&r)<<a),t.t=this.t-i,t.clamp()}},a.prototype.subTo=function(e,t){for(var i=0,s=0,a=Math.min(e.t,this.t);i<a;)s+=this[i]-e[i],t[i++]=s&this.DM,s>>=this.DB;if(e.t<this.t){for(s-=e.s;i<this.t;)s+=this[i],t[i++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;i<e.t;)s-=e[i],t[i++]=s&this.DM,s>>=this.DB;s-=e.s}t.s=s<0?-1:0,s<-1?t[i++]=this.DV+s:s>0&&(t[i++]=s),t.t=i,t.clamp()},a.prototype.multiplyTo=function(e,t){var i=this.abs(),s=e.abs(),r=i.t;for(t.t=r+s.t;--r>=0;)t[r]=0;for(r=0;r<s.t;++r)t[r+i.t]=i.am(0,s[r],t,r,0,i.t);t.s=0,t.clamp(),this.s!=e.s&&a.ZERO.subTo(t,t)},a.prototype.squareTo=function(e){for(var t=this.abs(),i=e.t=2*t.t;--i>=0;)e[i]=0;for(i=0;i<t.t-1;++i){var s=t.am(i,t[i],e,2*i,0,1);(e[i+t.t]+=t.am(i+1,2*t[i],e,2*i+1,s,t.t-i-1))>=t.DV&&(e[i+t.t]-=t.DV,e[i+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(i,t[i],e,2*i,0,1)),e.s=0,e.clamp()},a.prototype.divRemTo=function(e,t,i){var s=e.abs();if(!(s.t<=0)){var o=this.abs();if(o.t<s.t)return null!=t&&t.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=r());var n=r(),c=this.s,d=e.s,h=this.DB-u(s[s.t-1]);h>0?(s.lShiftTo(h,n),o.lShiftTo(h,i)):(s.copyTo(n),o.copyTo(i));var l=n.t,p=n[l-1];if(0!==p){var f=p*(1<<this.F1)+(l>1?n[l-2]>>this.F2:0),m=this.FV/f,v=(1<<this.F1)/f,y=1<<this.F2,g=i.t,b=g-l,w=null==t?r():t;for(n.dlShiftTo(b,w),i.compareTo(w)>=0&&(i[i.t++]=1,i.subTo(w,i)),a.ONE.dlShiftTo(l,w),w.subTo(n,n);n.t<l;)n[n.t++]=0;for(;--b>=0;){var k=i[--g]==p?this.DM:Math.floor(i[g]*m+(i[g-1]+y)*v);if((i[g]+=n.am(0,k,i,b,0,l))<k)for(n.dlShiftTo(b,w),i.subTo(w,i);i[g]<--k;)i.subTo(w,i)}null!=t&&(i.drShiftTo(l,t),c!=d&&a.ZERO.subTo(t,t)),i.t=l,i.clamp(),h>0&&i.rShiftTo(h,i),c<0&&a.ZERO.subTo(i,i)}}},a.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},a.prototype.isEven=function(){return 0===(this.t>0?1&this[0]:this.s)},a.prototype.exp=function(e,t){if(e>4294967295||e<1)return a.ONE;var i=r(),s=r(),o=t.convert(this),n=u(e)-1;for(o.copyTo(i);--n>=0;)if(t.sqrTo(i,s),(e&1<<n)>0)t.mulTo(s,o,i);else{var c=i;i=s,s=c}return t.revert(i)},a.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},a.prototype.toRadix=function(e){if(null==e&&(e=10),0===this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),i=Math.pow(e,t),s=l(i),a=r(),o=r(),n="";for(this.divRemTo(s,a,o);a.signum()>0;)n=(i+o.intValue()).toString(e).substr(1)+n,a.divRemTo(s,a,o);return o.intValue().toString(e)+n},a.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var i=this.chunkSize(t),s=Math.pow(t,i),r=!1,o=0,n=0,c=0;c<e.length;++c){var d=h(e,c);d<0?"-"==e.charAt(c)&&0===this.signum()&&(r=!0):(n=t*n+d,++o>=i&&(this.dMultiply(s),this.dAddOffset(n,0),o=0,n=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(n,0)),r&&a.ZERO.subTo(this,this)},a.prototype.bitwiseTo=function(e,t,i){var s,a,r=Math.min(e.t,this.t);for(s=0;s<r;++s)i[s]=t(this[s],e[s]);if(e.t<this.t){for(a=e.s&this.DM,s=r;s<this.t;++s)i[s]=t(this[s],a);i.t=this.t}else{for(a=this.s&this.DM,s=r;s<e.t;++s)i[s]=t(a,e[s]);i.t=e.t}i.s=t(this.s,e.s),i.clamp()},a.prototype.addTo=function(e,t){for(var i=0,s=0,a=Math.min(e.t,this.t);i<a;)s+=this[i]+e[i],t[i++]=s&this.DM,s>>=this.DB;if(e.t<this.t){for(s+=e.s;i<this.t;)s+=this[i],t[i++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;i<e.t;)s+=e[i],t[i++]=s&this.DM,s>>=this.DB;s+=e.s}t.s=s<0?-1:0,s>0?t[i++]=s:s<-1&&(t[i++]=this.DV+s),t.t=i,t.clamp()},a.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},a.prototype.dAddOffset=function(e,t){if(0!==e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},a.prototype.multiplyLowerTo=function(e,t,i){var s,a=Math.min(this.t+e.t,t);for(i.s=0,i.t=a;a>0;)i[--a]=0;for(s=i.t-this.t;a<s;++a)i[a+this.t]=this.am(0,e[a],i,a,0,this.t);for(s=Math.min(e.t,t);a<s;++a)this.am(0,e[a],i,a,0,t-a);i.clamp()},a.prototype.multiplyUpperTo=function(e,t,i){--t;var s=i.t=this.t+e.t-t;for(i.s=0;--s>=0;)i[s]=0;for(s=Math.max(t-this.t,0);s<e.t;++s)i[this.t+s-t]=this.am(t-s,e[s],i,0,0,this.t+s-t);i.clamp(),i.drShiftTo(1,i)},a.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var i,s=(1<<t)-1,a=!1,r="",o=this.t,n=this.DB-o*this.DB%t;if(o-- >0)for(n<this.DB&&(i=this[o]>>n)>0&&(a=!0,r=d(i));o>=0;)n<t?(i=(this[o]&(1<<n)-1)<<t-n,i|=this[--o]>>(n+=this.DB-t)):(i=this[o]>>(n-=t)&s,n<=0&&(n+=this.DB,--o)),i>0&&(a=!0),a&&(r+=d(i));return a?r:"0"},a.prototype.negate=function(){var e=r();return a.ZERO.subTo(this,e),e},a.prototype.abs=function(){return this.s<0?this.negate():this},a.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var i=this.t;if(0!=(t=i-e.t))return this.s<0?-t:t;for(;--i>=0;)if(0!=(t=this[i]-e[i]))return t;return 0},a.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+u(this[this.t-1]^this.s&this.DM)},a.prototype.mod=function(e){var t=r();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(a.ZERO)>0&&e.subTo(t,t),t},a.prototype.clone=function(){var e=r();return this.copyTo(e),e},a.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0===this.t)return-1}else{if(1==this.t)return this[0];if(0===this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},a.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},a.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var i,s=this.DB-e*this.DB%8,a=0;if(e-- >0)for(s<this.DB&&(i=this[e]>>s)!=(this.s&this.DM)>>s&&(t[a++]=i|this.s<<this.DB-s);e>=0;)s<8?(i=(this[e]&(1<<s)-1)<<8-s,i|=this[--e]>>(s+=this.DB-8)):(i=this[e]>>(s-=8)&255,s<=0&&(s+=this.DB,--e)),0!=(128&i)&&(i|=-256),0===a&&(128&this.s)!=(128&i)&&++a,(a>0||i!=this.s)&&(t[a++]=i);return t},a.prototype.toBuffer=function(e){var t=Buffer.from(this.toByteArray());if(!0===e&&0===t[0])t=t.slice(1);else if(s.isNumber(e)){if(t.length>e){for(var i=0;i<t.length-e;i++)if(0!==t[i])return null;return t.slice(t.length-e)}if(t.length<e){var a=Buffer.alloc(e);return a.fill(0,0,e-t.length),t.copy(a,e-t.length),a}}return t},a.prototype.equals=function(e){return 0==this.compareTo(e)},a.prototype.min=function(e){return this.compareTo(e)<0?this:e},a.prototype.max=function(e){return this.compareTo(e)>0?this:e},a.prototype.and=function(e){var t=r();return this.bitwiseTo(e,m,t),t},a.prototype.or=function(e){var t=r();return this.bitwiseTo(e,v,t),t},a.prototype.xor=function(e){var t=r();return this.bitwiseTo(e,y,t),t},a.prototype.not=function(){for(var e=r(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},a.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+g(this[e]);return this.s<0?this.t*this.DB:-1},a.prototype.add=function(e){var t=r();return this.addTo(e,t),t},a.prototype.subtract=function(e){var t=r();return this.subTo(e,t),t},a.prototype.multiply=function(e){var t=r();return this.multiplyTo(e,t),t},a.prototype.divide=function(e){var t=r();return this.divRemTo(e,t,null),t},a.prototype.remainder=function(e){var t=r();return this.divRemTo(e,null,t),t},a.prototype.modPow=function(e,t){var i,s,a=e.bitLength(),o=l(1);if(a<=0)return o;i=a<18?1:a<48?3:a<144?4:a<768?5:6,s=a<8?new p(t):t.isEven()?new k(t):new f(t);var n=new Array,c=3,d=i-1,h=(1<<i)-1;if(n[1]=s.convert(this),i>1){var m=r();for(s.sqrTo(n[1],m);c<=h;)n[c]=r(),s.mulTo(m,n[c-2],n[c]),c+=2}var v,y,g=e.t-1,b=!0,w=r();for(a=u(e[g])-1;g>=0;){for(a>=d?v=e[g]>>a-d&h:(v=(e[g]&(1<<a+1)-1)<<d-a,g>0&&(v|=e[g-1]>>this.DB+a-d)),c=i;0==(1&v);)v>>=1,--c;if((a-=c)<0&&(a+=this.DB,--g),b)n[v].copyTo(o),b=!1;else{for(;c>1;)s.sqrTo(o,w),s.sqrTo(w,o),c-=2;c>0?s.sqrTo(o,w):(y=o,o=w,w=y),s.mulTo(w,n[v],o)}for(;g>=0&&0==(e[g]&1<<a);)s.sqrTo(o,w),y=o,o=w,w=y,--a<0&&(a=this.DB-1,--g)}return s.revert(o)},a.prototype.pow=function(e){return this.exp(e,new b)},a.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),i=e.s<0?e.negate():e.clone();if(t.compareTo(i)<0){var s=t;t=i,i=s}var a=t.getLowestSetBit(),r=i.getLowestSetBit();if(r<0)return t;for(a<r&&(r=a),r>0&&(t.rShiftTo(r,t),i.rShiftTo(r,i));t.signum()>0;)(a=t.getLowestSetBit())>0&&t.rShiftTo(a,t),(a=i.getLowestSetBit())>0&&i.rShiftTo(a,i),t.compareTo(i)>=0?(t.subTo(i,t),t.rShiftTo(1,t)):(i.subTo(t,i),i.rShiftTo(1,i));return r>0&&i.lShiftTo(r,i),i},a.int2char=d,a.ZERO=l(0),a.ONE=l(1),a.prototype.square=function(){var e=r();return this.squareTo(e),e},e.exports=a},function(e,t,i){e.exports={pkcs1:i(187),isEncryption:function(t){return e.exports[t]&&e.exports[t].isEncryption},isSignature:function(t){return e.exports[t]&&e.exports[t].isSignature}}},function(e,t,i){var s=i(191);e.exports={Ber:s,BerReader:s.Reader}},function(e,t){e.exports={newInvalidAsn1Error:function(e){var t=new Error;return t.name="InvalidAsn1Error",t.message=e||"",t}}},function(e,t){e.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},function(e,t,i){"use strict";var s,a=t,r=i(7),o=r.utils.assert;function n(e){"short"===e.type?this.curve=new r.curve.short(e):"edwards"===e.type?this.curve=new r.curve.edwards(e):this.curve=new r.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(e,t){Object.defineProperty(a,e,{configurable:!0,enumerable:!0,get:function(){var i=new n(t);return Object.defineProperty(a,e,{configurable:!0,enumerable:!0,value:i}),i}})}a.PresetCurve=n,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:"SHA256",gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:"SHA256",gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:"SHA256",gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:"SHA384",gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:"SHA512",gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:"SHA256",gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:"SHA256",gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{s=i(200)}catch(e){s=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:"SHA256",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",s]})},function(e,t,i){"use strict";const s=Date.now,a=()=>1e3*s(),r=s,o=setTimeout,n=(e,t,i=o,a=s()+t)=>{let r=()=>{},c=!0;const d=i(()=>{c=!0;const t=a-s();t>0?r=n(e,t,i,a):e()},t);return function(){c&&(c=!1,clearTimeout(d)),r()}};class c extends Error{constructor(){super("timed out"),this.constructor=c,this.__proto__=c.prototype,this.message="timed out"}}const d=e=>{if("string"==typeof e&&e&&!e.match(/^[0-9]+$/)&&!(e.indexOf("-")<0||e.indexOf(":")<0))try{const t=Date.parse(e.indexOf("+")>=0||"Z"===e.slice(-1)?e:(e+"Z").replace(/\s(\d\d):/,"T$1:"));if(Number.isNaN(t))return;return t}catch(e){return}};e.exports={now:s,microseconds:a,milliseconds:r,seconds:()=>Math.floor(s()/1e3),iso8601:e=>{let t=void 0;if(t="number"==typeof e?Math.floor(e):parseInt(e,10),!(Number.isNaN(t)||t<0))try{return new Date(t).toISOString()}catch(e){return}},parse8601:d,rfc2616:e=>new Date(e).toUTCString(),uuidv1:()=>{const e=(10*a()+122192928e9).toString(16);return e.slice(7,15)+e.slice(3,7)+"1"+e.slice(0,3)+"9696"+"ff".repeat(6)},parseDate:e=>{if("string"==typeof e&&e){if(e.indexOf("GMT")>=0)try{return Date.parse(e)}catch(e){return}return d(e)}},mdy:(e,t="-")=>{t=t||"";const i=new Date(e),s=i.getUTCFullYear().toString();let a=i.getUTCMonth()+1,r=i.getUTCDate();return a=a<10?"0"+a:a.toString(),r=r<10?"0"+r:r.toString(),a+t+r+t+s},ymd:(e,t="-")=>{t=t||"";const i=new Date(e),s=i.getUTCFullYear().toString();let a=i.getUTCMonth()+1,r=i.getUTCDate();return a=a<10?"0"+a:a.toString(),r=r<10?"0"+r:r.toString(),s+t+a+t+r},ymdhms:(e,t=" ")=>{const i=new Date(e),s=i.getUTCFullYear();let a=i.getUTCMonth()+1,r=i.getUTCDate(),o=i.getUTCHours(),n=i.getUTCMinutes(),c=i.getUTCSeconds();return a=a<10?"0"+a:a,r=r<10?"0"+r:r,o=o<10?"0"+o:o,n=n<10?"0"+n:n,c=c<10?"0"+c:c,s+"-"+a+"-"+r+t+o+":"+n+":"+c},setTimeout_safe:n,sleep:e=>new Promise(t=>n(t,e)),TimedOut:c,timeout:async(e,t)=>{let i=()=>{};const s=new Promise(t=>i=n(t,e));try{return await Promise.race([t,s.then(()=>{throw new c})])}finally{i()}}}},function(e,t,i){"use strict";const s=i(1),{InsufficientFunds:a,OrderNotFound:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"acx",name:"ACX",countries:["AU"],rateLimit:1e3,version:"v2",has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","12h":"720","1d":"1440","3d":"4320","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/1294454/30247614-1fe61c74-9621-11e7-9e8c-f1a627afa279.jpg",extension:".json",api:"https://acx.io/api",www:"https://acx.io",doc:"https://acx.io/documents/api_v2"},api:{public:{get:["depth","k_with_pending_trades","k","markets","order_book","order_book/{market}","tickers","tickers/{market}","timestamp","trades","trades/{market}"]},private:{get:["members/me","deposits","deposit","deposit_address","orders","order","trades/my","withdraws","withdraw"],post:["orders","orders/multi","orders/clear","order/delete","withdraw"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002},funding:{tierBased:!1,percentage:!0,withdraw:{}}},commonCurrencies:{PLA:"Plair"},exceptions:{2002:a,2003:r}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=s.id,r=s.name;let o=this.safeString(s,"base_unit"),n=this.safeString(s,"quote_unit");if(void 0===o||void 0===n){const e=r.split("/");o=e[0].toLowerCase(),n=e[1].toLowerCase()}let c=o.toUpperCase(),d=n.toUpperCase();c=this.safeCurrencyCode(c),d=this.safeCurrencyCode(d);const h={amount:8,price:8};i.push({id:a,symbol:r,base:c,quote:d,baseId:o,quoteId:n,precision:h,info:s,active:void 0,limits:this.limits})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetMembersMe(e),i=this.safeValue(t,"accounts"),s={info:i};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"currency"),r=this.safeCurrencyCode(a),o=this.account();o.free=this.safeFloat(t,"balance"),o.used=this.safeFloat(t,"locked"),s[r]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id};void 0!==t&&(s.limit=t);const a=await this.publicGetDepth(this.extend(s,i)),r=this.safeTimestamp(a,"timestamp");return this.parseOrderBook(a,r)}parseTicker(e,t){const i=this.safeTimestamp(e,"at");e=e.ticker;let s=void 0;t&&(s=t.symbol);const a=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s=Object.keys(i),a={};for(let e=0;e<s.length;e++){const t=s[e];let r=void 0,o=t;if(t in this.markets_by_id)r=this.markets_by_id[t],o=r.symbol;else{let e=t.slice(0,3),i=t.slice(3,6);e=e.toUpperCase(),i=i.toUpperCase(),e=this.safeCurrencyCode(e),i=this.safeCurrencyCode(i),o=e+"/"+i}a[o]=this.parseTicker(i[t],r)}return this.filterByArray(a,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},a=await this.publicGetTickersMarket(this.extend(s,t));return this.parseTicker(a,i)}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"tid");let a=void 0;return void 0!==t&&(a=t.symbol),{info:e,id:s,timestamp:i,datetime:this.iso8601(i),symbol:a,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),cost:this.safeFloat(e,"funds"),fee:void 0}}async fetchTime(e={}){return 1e3*await this.publicGetTimestamp(e)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market:a.id},o=await this.publicGetTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e);void 0===s&&(s=500);const o={market:r.id,period:this.timeframes[t],limit:s};void 0!==i&&(o.timestamp=parseInt(i/1e3));const n=await this.publicGetK(this.extend(o,a));return this.parseOHLCVs(n,r,t,i,s)}parseOrderStatus(e){return this.safeString({done:"closed",wait:"open",cancel:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"market"),s=this.safeSymbol(i,t),a=this.parse8601(this.safeString(e,"created_at")),r=this.parseOrderStatus(this.safeString(e,"state")),o=this.safeString(e,"type"),n=this.safeString(e,"side");return{id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,status:r,symbol:s,type:o,timeInForce:void 0,side:n,price:this.safeFloat(e,"price"),stopPrice:void 0,amount:this.safeFloat(e,"volume"),filled:this.safeFloat(e,"executed_volume"),remaining:this.safeFloat(e,"remaining_volume"),trades:void 0,fee:void 0,info:e,cost:void 0,average:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:parseInt(e)},a=await this.privateGetOrder(this.extend(s,i));return this.parseOrder(a)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o={market:this.marketId(e),side:i,volume:s.toString(),ord_type:t};"limit"===t&&(o.price=a.toString());const n=await this.privatePostOrders(this.extend(o,r)),c=this.safeValue(n,"market"),d=this.safeValue(this.markets_by_id,c);return this.parseOrder(n,d)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privatePostOrderDelete(this.extend(s,i)),o=this.parseOrder(a),n=o.status;if("closed"===n||"canceled"===n)throw new r(this.id+" "+this.json(o));return o}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r={currency:this.currency(e).id,sum:t,address:i};return{info:await this.privatePostWithdraw(this.extend(r,a)),id:void 0}}nonce(){return this.milliseconds()}encodeParams(e){if("orders"in e){const t=e.orders;let i=this.urlencode(this.keysort(this.omit(e,"orders")));for(let e=0;e<t.length;e++){const s=t[e],a=Object.keys(s);for(let e=0;e<a.length;e++){const t=a[e];i+="&orders%5B%5D%5B"+t+"%5D="+s[t].toString()}}return i}return this.urlencode(this.keysort(e))}sign(e,t="public",i="GET",s={},a,r){let o="/api/"+this.version+"/"+this.implodeParams(e,s);"extension"in this.urls&&(o+=this.urls.extension);const n=this.omit(s,this.extractParams(e));let c=this.urls.api+o;if("public"===t)Object.keys(n).length&&(c+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.encodeParams(this.extend({access_key:this.apiKey,tonce:e},s)),n=i+"|"+o+"|"+t,d=t+"&signature="+this.hmac(this.encode(n),this.encode(this.secret));"GET"===i?c+="?"+d:(r=d,a={"Content-Type":"application/x-www-form-urlencoded"})}return{url:c,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,r,o,n,c){if(void 0!==o&&400===e){const e=this.safeValue(o,"error"),t=this.safeString(e,"code"),i=this.id+" "+this.json(o);this.throwExactlyMatchedException(this.exceptions,t,i)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,ExchangeNotAvailable:o,InsufficientFunds:n,OrderNotFound:c,InvalidOrder:d,DDoSProtection:h,InvalidNonce:l,AuthenticationError:u,InvalidAddress:p,RateLimitExceeded:f,PermissionDenied:m,NotSupported:v,BadRequest:y,BadSymbol:g,AccountSuspended:b,OrderImmediatelyFillable:w}=i(0),{ROUND:k,TRUNCATE:x}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"binance",name:"Binance",countries:["JP","MT"],rateLimit:500,certified:!0,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchBidsAsks:!0,fetchClosedOrders:"emulated",fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderBook:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!1,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/29604020-d5483cdc-87ee-11e7-94c7-d1a8d9169293.jpg",test:{dapiPublic:"https://testnet.binancefuture.com/dapi/v1",dapiPrivate:"https://testnet.binancefuture.com/dapi/v1",fapiPublic:"https://testnet.binancefuture.com/fapi/v1",fapiPrivate:"https://testnet.binancefuture.com/fapi/v1",fapiPrivateV2:"https://testnet.binancefuture.com/fapi/v2",public:"https://testnet.binance.vision/api/v3",private:"https://testnet.binance.vision/api/v3",v3:"https://testnet.binance.vision/api/v3",v1:"https://testnet.binance.vision/api/v1"},api:{wapi:"https://api.binance.com/wapi/v3",sapi:"https://api.binance.com/sapi/v1",dapiPublic:"https://dapi.binance.com/dapi/v1",dapiPrivate:"https://dapi.binance.com/dapi/v1",dapiData:"https://dapi.binance.com/futures/data",fapiPublic:"https://fapi.binance.com/fapi/v1",fapiPrivate:"https://fapi.binance.com/fapi/v1",fapiData:"https://fapi.binance.com/futures/data",fapiPrivateV2:"https://fapi.binance.com/fapi/v2",public:"https://api.binance.com/api/v3",private:"https://api.binance.com/api/v3",v3:"https://api.binance.com/api/v3",v1:"https://api.binance.com/api/v1"},www:"https://www.binance.com",referral:"https://www.binance.com/?ref=10205187",doc:["https://binance-docs.github.io/apidocs/spot/en"],api_management:"https://www.binance.com/en/usercenter/settings/api-management",fees:"https://www.binance.com/en/fee/schedule"},api:{sapi:{get:["accountSnapshot","margin/asset","margin/pair","margin/allAssets","margin/allPairs","margin/priceIndex","asset/assetDividend","margin/loan","margin/repay","margin/account","margin/transfer","margin/interestHistory","margin/forceLiquidationRec","margin/order","margin/openOrders","margin/allOrders","margin/myTrades","margin/maxBorrowable","margin/maxTransferable","margin/isolated/transfer","margin/isolated/account","margin/isolated/pair","margin/isolated/allPairs","futures/transfer","futures/loan/borrow/history","futures/loan/repay/history","futures/loan/wallet","futures/loan/configs","futures/loan/calcAdjustLevel","futures/loan/calcMaxAdjustAmount","futures/loan/adjustCollateral/history","futures/loan/liquidationHistory","capital/config/getall","capital/deposit/address","capital/deposit/hisrec","capital/deposit/subAddress","capital/deposit/subHisrec","capital/withdraw/history","sub-account/futures/account","sub-account/futures/accountSummary","sub-account/futures/positionRisk","sub-account/futures/internalTransfer","sub-account/margin/account","sub-account/margin/accountSummary","sub-account/spotSummary","sub-account/status","sub-account/transfer/subUserHistory","lending/daily/product/list","lending/daily/userLeftQuota","lending/daily/userRedemptionQuota","lending/daily/token/position","lending/union/account","lending/union/purchaseRecord","lending/union/redemptionRecord","lending/union/interestHistory","lending/project/list","lending/project/position/list","mining/pub/algoList","mining/pub/coinList","mining/worker/detail","mining/worker/list","mining/payment/list","mining/statistics/user/status","mining/statistics/user/list","bswap/pools","bswap/liquidity","bswap/liquidityOps","bswap/quote","bswap/swap"],post:["asset/dust","account/disableFastWithdrawSwitch","account/enableFastWithdrawSwitch","capital/withdraw/apply","margin/transfer","margin/loan","margin/repay","margin/order","margin/isolated/create","margin/isolated/transfer","sub-account/margin/transfer","sub-account/margin/enable","sub-account/margin/enable","sub-account/futures/enable","sub-account/futures/transfer","sub-account/futures/internalTransfer","sub-account/transfer/subToSub","sub-account/transfer/subToMaster","userDataStream","userDataStream/isolated","futures/transfer","futures/loan/borrow","futures/loan/repay","futures/loan/adjustCollateral","lending/customizedFixed/purchase","lending/daily/purchase","lending/daily/redeem","bswap/liquidityAdd","bswap/liquidityRemove","bswap/swap"],put:["userDataStream","userDataStream/isolated"],delete:["margin/order","userDataStream","userDataStream/isolated"]},wapi:{post:["withdraw","sub-account/transfer"],get:["depositHistory","withdrawHistory","depositAddress","accountStatus","systemStatus","apiTradingStatus","userAssetDribbletLog","tradeFee","assetDetail","sub-account/list","sub-account/transfer/history","sub-account/assets"]},dapiPublic:{get:["ping","time","exchangeInfo","depth","trades","historicalTrades","aggTrades","premiumIndex","fundingRate","klines","continuousKlines","indexPriceKlines","markPriceKlines","ticker/24hr","ticker/price","ticker/bookTicker","allForceOrders","openInterest"]},dapiData:{get:["openInterestHist","topLongShortAccountRatio","topLongShortPositionRatio","globalLongShortAccountRatio","takerBuySellVol","basis"]},dapiPrivate:{get:["positionSide/dual","order","openOrder","openOrders","allOrders","balance","account","positionMargin/history","positionRisk","userTrades","income","leverageBracket","forceOrders","adlQuantile"],post:["positionSide/dual","order","batchOrders","countdownCancelAll","leverage","marginType","positionMargin","listenKey"],put:["listenKey"],delete:["order","allOpenOrders","batchOrders","listenKey"]},fapiPublic:{get:["ping","time","exchangeInfo","depth","trades","historicalTrades","aggTrades","klines","fundingRate","premiumIndex","ticker/24hr","ticker/price","ticker/bookTicker","allForceOrders","openInterest","indexInfo"]},fapiData:{get:["openInterestHist","topLongShortAccountRatio","topLongShortPositionRatio","globalLongShortAccountRatio","takerlongshortRatio"]},fapiPrivate:{get:["allForceOrders","allOrders","openOrder","openOrders","order","account","balance","leverageBracket","positionMargin/history","positionRisk","positionSide/dual","userTrades","income"],post:["batchOrders","positionSide/dual","positionMargin","marginType","order","leverage","listenKey","countdownCancelAll"],put:["listenKey"],delete:["batchOrders","order","allOpenOrders","listenKey"]},fapiPrivateV2:{get:["account","balance","positionRisk"]},v3:{get:["ticker/price","ticker/bookTicker"]},public:{get:["ping","time","depth","trades","aggTrades","historicalTrades","klines","ticker/24hr","ticker/price","ticker/bookTicker","exchangeInfo"],put:["userDataStream"],post:["userDataStream"],delete:["userDataStream"]},private:{get:["allOrderList","openOrderList","orderList","order","openOrders","allOrders","account","myTrades"],post:["order/oco","order","order/test"],delete:["openOrders","orderList","order"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},commonCurrencies:{BCC:"BCC",YOYO:"YOYOW"},options:{defaultTimeInForce:"GTC",defaultType:"spot",hasAlreadyAuthenticatedSuccessfully:!1,warnOnFetchOpenOrdersWithoutSymbol:!0,recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1,parseOrderToPrecision:!1,newOrderRespType:{market:"FULL",limit:"RESULT"},quoteOrderQty:!0},exceptions:{"API key does not exist":u,"Order would trigger immediately.":w,"Order would immediately match and take.":w,"Account has insufficient balance for requested action.":n,"Rest API trading is not enabled.":o,"You don't have permission.":m,"Market is closed.":o,"Too many requests.":h,"-1000":o,"-1001":o,"-1002":u,"-1003":f,"-1013":d,"-1015":f,"-1016":o,"-1020":y,"-1021":l,"-1022":u,"-1100":y,"-1101":y,"-1102":y,"-1103":y,"-1104":y,"-1105":y,"-1106":y,"-1111":y,"-1112":d,"-1114":y,"-1115":y,"-1116":y,"-1117":y,"-1118":y,"-1119":y,"-1120":y,"-1121":g,"-1125":u,"-1127":y,"-1128":y,"-1130":y,"-1131":y,"-2010":a,"-2011":c,"-2013":c,"-2014":u,"-2015":u,"-3005":n,"-3008":n,"-3010":a,"-3022":b}})}nonce(){return this.milliseconds()-this.options.timeDifference}async fetchTime(e={}){const t=this.safeString2(this.options,"fetchTime","defaultType","spot");let i="publicGetTime";"future"===t?i="fapiPublicGetTime":"delivery"===t&&(i="dapiPublicGetTime");const s=await this[i](e);return this.safeInteger(s,"serverTime")}async loadTimeDifference(e={}){const t=await this.fetchTime(e),i=this.milliseconds();return this.options.timeDifference=i-t,this.options.timeDifference}async fetchMarkets(e={}){const t=this.safeString2(this.options,"fetchMarkets","defaultType","spot"),i=this.safeString(e,"type",t),s=this.omit(e,"type");if("spot"!==i&&"future"!==i&&"margin"!==i&&"delivery"!==i)throw new a(this.id+" does not support '"+i+"' type, set exchange.options['defaultType'] to 'spot', 'margin', 'delivery' or 'future'");let r="publicGetExchangeInfo";"future"===i?r="fapiPublicGetExchangeInfo":"delivery"===i&&(r="dapiPublicGetExchangeInfo");const o=await this[r](s);this.options.adjustForTimeDifference&&await this.loadTimeDifference();const n=this.safeValue(o,"symbols"),c=[];for(let e=0;e<n.length;e++){const t=n[e],s="spot"===i,a="future"===i,r="delivery"===i,o=this.safeString(t,"symbol"),d=this.safeStringLower(t,"symbol"),h=this.safeString(t,"baseAsset"),l=this.safeString(t,"quoteAsset"),u=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),f=o.split("_"),m=this.safeString(f,1),v=r&&"PERP"!==m?o:u+"/"+p,y=this.safeValue(t,"filters",[]),g=this.indexBy(y,"filterType"),b={base:this.safeInteger(t,"baseAssetPrecision"),quote:this.safeInteger(t,"quotePrecision"),amount:this.safeInteger(t,"baseAssetPrecision"),price:this.safeInteger(t,"quotePrecision")},w="TRADING"===this.safeString2(t,"status","contractStatus"),k={id:o,lowercaseId:d,symbol:v,base:u,quote:p,baseId:h,quoteId:l,info:t,type:i,spot:s,margin:this.safeValue(t,"isMarginTradingAllowed",a||r),future:a,delivery:r,active:w,precision:b,limits:{amount:{min:Math.pow(10,-b.amount),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}};if("PRICE_FILTER"in g){const e=this.safeValue(g,"PRICE_FILTER",{});k.limits.price={min:this.safeFloat(e,"minPrice"),max:void 0};const t=this.safeFloat(e,"maxPrice");void 0!==t&&t>0&&(k.limits.price.max=t),k.precision.price=this.precisionFromString(e.tickSize)}if("LOT_SIZE"in g){const e=this.safeValue(g,"LOT_SIZE",{}),t=this.safeString(e,"stepSize");k.precision.amount=this.precisionFromString(t),k.limits.amount={min:this.safeFloat(e,"minQty"),max:this.safeFloat(e,"maxQty")}}if("MARKET_LOT_SIZE"in g){const e=this.safeValue(g,"MARKET_LOT_SIZE",{});k.limits.market={min:this.safeFloat(e,"minQty"),max:this.safeFloat(e,"maxQty")}}if("MIN_NOTIONAL"in g){const e=this.safeValue(g,"MIN_NOTIONAL",{});k.limits.cost.min=this.safeFloat(e,"minNotional")}c.push(k)}return c}calculateFee(e,t,i,s,a,r="taker",o={}){const n=this.markets[e];let c="quote";const d=n[r];let h=s*d,l=n.precision.price;return"sell"===i?h*=a:(c="base",l=n.precision.amount),h=this.decimalToPrecision(h,k,l,this.precisionMode),{type:r,currency:n[c],rate:d,cost:parseFloat(h)}}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString2(this.options,"fetchBalance","defaultType","spot"),i=this.safeString(e,"type",t);let s="privateGetAccount";if("future"===i){const e=this.safeValue(this.options,"future",{}),t=this.safeValue(e,"fetchBalance",{});s=this.safeString(t,"method","fapiPrivateV2GetAccount")}else if("delivery"===i){const e=this.safeValue(this.options,"delivery",{}),t=this.safeValue(e,"fetchBalance",{});s=this.safeString(t,"method","dapiPrivateGetAccount")}else"margin"===i&&(s="sapiGetMarginAccount");const a=this.omit(e,"type"),r=await this[s](a),o={info:r};if("spot"===i||"margin"===i){const e=this.safeValue2(r,"balances","userAssets",[]);for(let t=0;t<e.length;t++){const i=e[t],s=this.safeString(i,"asset"),a=this.safeCurrencyCode(s),r=this.account();r.free=this.safeFloat(i,"free"),r.used=this.safeFloat(i,"locked"),o[a]=r}}else{let e=r;Array.isArray(r)||(e=this.safeValue(r,"assets",[]));for(let t=0;t<e.length;t++){const i=e[t],s=this.safeString(i,"asset"),a=this.safeCurrencyCode(s),r=this.account();r.free=this.safeFloat(i,"availableBalance"),r.used=this.safeFloat(i,"initialMargin"),r.total=this.safeFloat2(i,"marginBalance","balance"),o[a]=r}}return this.parseBalance(o)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),a={symbol:s.id};void 0!==t&&(a.limit=t);let r="publicGetDepth";s.future?r="fapiPublicGetDepth":s.delivery&&(r="dapiPublicGetDepth");const o=await this[r](this.extend(a,i)),n=this.parseOrderBook(o);return n.nonce=this.safeInteger(o,"lastUpdateId"),n}parseTicker(e,t){const i=this.safeInteger(e,"closeTime"),s=this.safeString(e,"symbol"),a=this.safeSymbol(s,t),r=this.safeFloat(e,"lastPrice");return{symbol:a,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:this.safeFloat(e,"bidPrice"),bidVolume:this.safeFloat(e,"bidQty"),ask:this.safeFloat(e,"askPrice"),askVolume:this.safeFloat(e,"askQty"),vwap:this.safeFloat(e,"weightedAvgPrice"),open:this.safeFloat(e,"openPrice"),close:r,last:r,previousClose:this.safeFloat(e,"prevClosePrice"),change:this.safeFloat(e,"priceChange"),percentage:this.safeFloat(e,"priceChangePercent"),average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}async fetchStatus(e={}){const t=await this.wapiGetSystemStatus(e);let i=this.safeValue(t,"status");return void 0!==i&&(i=0===i?"ok":"maintenance",this.status=this.extend(this.status,{status:i,updated:this.milliseconds()})),this.status}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id};let a="publicGetTicker24hr";i.future?a="fapiPublicGetTicker24hr":i.delivery&&(a="dapiPublicGetTicker24hr");const r=await this[a](this.extend(s,t));if(Array.isArray(r)){const e=this.safeValue(r,0,{});return this.parseTicker(e,i)}return this.parseTicker(r,i)}parseTickers(e,t){const i=[];for(let t=0;t<e.length;t++)i.push(this.parseTicker(e[t]));return this.filterByArray(i,"symbol",t)}async fetchBidsAsks(e,t={}){await this.loadMarkets();const i=this.safeString2(this.options,"fetchBidsAsks","defaultType","spot"),s=this.safeString(t,"type",i),a=this.omit(t,"type");let r=void 0;r="future"===s?"fapiPublicGetTickerBookTicker":"delivery"===s?"dapiPublicGetTickerBookTicker":"publicGetTickerBookTicker";const o=await this[r](a);return this.parseTickers(o,e)}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.safeString2(this.options,"fetchTickers","defaultType","spot"),s=this.safeString(t,"type",i),a=this.omit(t,"type");let r=void 0;r="future"===s?"fapiPublicGetTicker24hr":"delivery"===s?"dapiPublicGetTicker24hr":"publicGetTicker24hr";const o=this.safeString(this.options,"fetchTickersMethod",r),n=await this[o](a);return this.parseTickers(n,e)}parseOHLCV(e,t){return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={symbol:r.id,interval:this.timeframes[t]};void 0!==i&&(o.startTime=i),void 0!==s&&(o.limit=s);let n="publicGetKlines";r.future?n="fapiPublicGetKlines":r.delivery&&(n="dapiPublicGetKlines");const c=await this[n](this.extend(o,a));return this.parseOHLCVs(c,r,t,i,s)}parseTrade(e,t){if("isDustTrade"in e)return this.parseDustTrade(e,t);const i=this.safeInteger2(e,"T","time"),s=this.safeFloat2(e,"p","price"),a=this.safeFloat2(e,"q","qty"),r=this.safeString2(e,"a","id");let o=void 0;const n=this.safeString(e,"orderId");"m"in e?o=e.m?"sell":"buy":"isBuyerMaker"in e?o=e.isBuyerMaker?"sell":"buy":"side"in e?o=this.safeStringLower(e,"side"):"isBuyer"in e&&(o=e.isBuyer?"buy":"sell");let c=void 0;"commission"in e&&(c={cost:this.safeFloat(e,"commission"),currency:this.safeCurrencyCode(this.safeString(e,"commissionAsset"))});let d=void 0;"isMaker"in e&&(d=e.isMaker?"maker":"taker");const h=this.safeString(e,"symbol"),l=this.safeSymbol(h,t);let u=void 0;return void 0!==s&&void 0!==a&&(u=s*a),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:l,id:r,order:n,type:void 0,side:o,takerOrMaker:d,price:s,amount:a,cost:u,fee:c}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id},o=this.safeString2(this.options,"fetchTrades","defaultType","spot"),n=this.safeString(s,"type",o),c=this.omit(s,"type");let d=void 0;d="future"===n?"fapiPublicGetAggTrades":"delivery"===n?"dapiPublicGetAggTrades":"publicGetAggTrades";let h=this.safeString(this.options,"fetchTradesMethod",d);"publicGetAggTrades"===h?(void 0!==t&&(r.startTime=t,r.endTime=this.sum(t,36e5)),"future"===n?h="fapiPublicGetAggTrades":"delivery"===n&&(h="dapiPublicGetAggTrades")):"publicGetHistoricalTrades"===h&&("future"===n?h="fapiPublicGetHistoricalTrades":"delivery"===n&&(h="dapiPublicGetHistoricalTrades")),void 0!==i&&(r.limit=i);const l=await this[h](this.extend(r,c));return this.parseTrades(l,a,t,i)}parseOrderStatus(e){return this.safeString({NEW:"open",PARTIALLY_FILLED:"open",FILLED:"closed",CANCELED:"canceled",PENDING_CANCEL:"canceling",REJECTED:"rejected",EXPIRED:"canceled"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"status")),s=this.safeString(e,"symbol"),a=this.safeSymbol(s,t);let r=void 0;"time"in e?r=this.safeInteger(e,"time"):"transactTime"in e&&(r=this.safeInteger(e,"transactTime"));let o=this.safeFloat(e,"price");const n=this.safeFloat(e,"origQty"),c=this.safeFloat(e,"executedQty");let d=void 0,h=this.safeFloat2(e,"cummulativeQuoteQty","cumQuote");void 0!==c&&(void 0!==n&&(d=n-c,this.options.parseOrderToPrecision&&(d=parseFloat(this.amountToPrecision(a,d))),d=Math.max(d,0)),void 0!==o&&void 0===h&&(h=o*c));const l=this.safeString(e,"orderId");let u=this.safeStringLower(e,"type");"market"===u?0===o&&void 0!==h&&void 0!==c&&h>0&&c>0&&(o=h/c,this.options.parseOrderToPrecision&&(o=parseFloat(this.priceToPrecision(a,o)))):"limit_maker"===u&&(u="limit");const p=this.safeStringLower(e,"side");let f=void 0,m=void 0;const v=this.safeValue(e,"fills");if(void 0!==v){m=this.parseTrades(v,t);if(m.length>0){h=m[0].cost,f={cost:m[0].fee.cost,currency:m[0].fee.currency};for(let e=1;e<m.length;e++)h=this.sum(h,m[e].cost),f.cost=this.sum(f.cost,m[e].fee.cost)}}let y=void 0;void 0!==h&&(c&&(y=h/c,this.options.parseOrderToPrecision&&(y=parseFloat(this.priceToPrecision(a,y)))),this.options.parseOrderToPrecision&&(h=parseFloat(this.costToPrecision(a,h))));const g=this.safeString(e,"clientOrderId"),b=this.safeString(e,"timeInForce");return{info:e,id:l,clientOrderId:g,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:a,type:u,timeInForce:b,side:p,price:o,amount:n,cost:h,average:y,filled:c,remaining:d,status:i,fee:f,trades:m}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n=this.safeString2(this.options,"createOrder","defaultType",o.type),c=this.safeString(r,"type",n),h=this.safeString2(r,"newClientOrderId","clientOrderId");r=this.omit(r,["type","newClientOrderId","clientOrderId"]);let l="privatePostOrder";if("future"===c?l="fapiPrivatePostOrder":"delivery"===c?l="dapiPrivatePostOrder":"margin"===c&&(l="sapiPostMarginOrder"),o.spot){this.safeValue(r,"test",!1)&&(l+="Test"),r=this.omit(r,"test")}const u=t.toUpperCase(),p=this.safeValue(o.info,"orderTypes");if(!this.inArray(u,p))throw new d(this.id+" "+t+" is not a valid order type in "+o.type+" market "+e);const f={symbol:o.id,type:u,side:i.toUpperCase()};void 0!==h&&(f.newClientOrderId=h),o.spot&&(f.newOrderRespType=this.safeValue(this.options.newOrderRespType,t,"RESULT"));let m=!1,v=!1,y=!1,g=!1;if("MARKET"===u){if(this.safeValue(this.options,"quoteOrderQty",!1)){const e=this.safeFloat(r,"quoteOrderQty"),t=o.precision.price;void 0!==e?(f.quoteOrderQty=this.decimalToPrecision(e,x,t,this.precisionMode),r=this.omit(r,"quoteOrderQty")):void 0!==a?f.quoteOrderQty=this.decimalToPrecision(s*a,x,t,this.precisionMode):g=!0}else g=!0}else if("LIMIT"===u)v=!0,m=!0,g=!0;else if("STOP_LOSS"===u||"TAKE_PROFIT"===u)y=!0,g=!0,o.future&&(v=!0);else if("STOP_LOSS_LIMIT"===u||"TAKE_PROFIT_LIMIT"===u)g=!0,y=!0,v=!0,m=!0;else if("LIMIT_MAKER"===u)v=!0,g=!0;else if("STOP"===u)g=!0,y=!0,v=!0;else if("STOP_MARKET"===u||"TAKE_PROFIT_MARKET"===u){void 0===this.safeValue(r,"closePosition")&&(g=!0),y=!0}else if("TRAILING_STOP_MARKET"===u){g=!0;if(void 0===this.safeFloat(r,"callbackRate"))throw new d(this.id+" createOrder method requires a callbackRate extra param for a "+t+" order")}if(g&&(f.quantity=this.amountToPrecision(e,s)),v){if(void 0===a)throw new d(this.id+" createOrder method requires a price argument for a "+t+" order");f.price=this.priceToPrecision(e,a)}if(m&&(f.timeInForce=this.options.defaultTimeInForce),y){const i=this.safeFloat(r,"stopPrice");if(void 0===i)throw new d(this.id+" createOrder method requires a stopPrice extra param for a "+t+" order");r=this.omit(r,"stopPrice"),f.stopPrice=this.priceToPrecision(e,i)}const b=await this[l](this.extend(f,r));return this.parseOrder(b,o)}async fetchOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a=this.safeString2(this.options,"fetchOrder","defaultType",s.type),o=this.safeString(i,"type",a);let n="privateGetOrder";"future"===o?n="fapiPrivateGetOrder":"delivery"===o?n="dapiPrivateGetOrder":"margin"===o&&(n="sapiGetMarginOrder");const c={symbol:s.id},d=this.safeValue2(i,"origClientOrderId","clientOrderId");void 0!==d?c.origClientOrderId=d:c.orderId=parseInt(e);const h=this.omit(i,["type","clientOrderId","origClientOrderId"]),l=await this[n](this.extend(c,h));return this.parseOrder(l,s)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e),o=this.safeString2(this.options,"fetchOrders","defaultType",a.type),n=this.safeString(s,"type",o);let c="privateGetAllOrders";"future"===n?c="fapiPrivateGetAllOrders":"delivery"===n?c="dapiPrivateGetAllOrders":"margin"===n&&(c="sapiGetMarginAllOrders");const d={symbol:a.id};void 0!==t&&(d.startTime=t),void 0!==i&&(d.limit=i);const h=this.omit(s,"type"),l=await this[c](this.extend(d,h));return this.parseOrders(l,a,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,o=void 0,n=void 0;const c={};if(void 0!==e){r=this.market(e),c.symbol=r.id;const t=this.safeString2(this.options,"fetchOpenOrders","defaultType",r.type);n=this.safeString(s,"type",t),o=this.omit(s,"type")}else{if(this.options.warnOnFetchOpenOrdersWithoutSymbol){const e=this.symbols.length,t=parseInt(e/2);throw new a(this.id+" fetchOpenOrders WARNING: fetching open orders without specifying a symbol is rate-limited to one call per "+t.toString()+" seconds. Do not call this method frequently to avoid ban. Set "+this.id+'.options["warnOnFetchOpenOrdersWithoutSymbol"] = false to suppress this warning message.')}{const e=this.safeString2(this.options,"fetchOpenOrders","defaultType","spot");n=this.safeString(s,"type",e),o=this.omit(s,"type")}}let d="privateGetOpenOrders";"future"===n?d="fapiPrivateGetOpenOrders":"delivery"===n?d="dapiPrivateGetOpenOrders":"margin"===n&&(d="sapiGetMarginOpenOrders");const h=await this[d](this.extend(c,o));return this.parseOrders(h,r,t,i)}async fetchClosedOrders(e,t,i,s={}){const a=await this.fetchOrders(e,t,i,s);return this.filterBy(a,"status","closed")}async cancelOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a=this.safeString2(this.options,"fetchOpenOrders","defaultType",s.type),o=this.safeString(i,"type",a),n=this.safeValue2(i,"origClientOrderId","clientOrderId"),c={symbol:s.id};void 0===n?c.orderId=parseInt(e):c.origClientOrderId=n;let d="privateDeleteOrder";"future"===o?d="fapiPrivateDeleteOrder":"delivery"===o?d="dapiPrivateDeleteOrder":"margin"===o&&(d="sapiDeleteMarginOrder");const h=this.omit(i,["type","origClientOrderId","clientOrderId"]),l=await this[d](this.extend(c,h));return this.parseOrder(l)}async cancelAllOrders(e,t={}){if(void 0===e)throw new r(this.id+" cancelAllOrders requires a symbol argument");await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=this.safeString2(this.options,"cancelAllOrders","defaultType","spot"),o=this.safeString(t,"type",a),n=this.omit(t,"type");let c="privateDeleteOpenOrders";"future"===o?c="fapiPrivateDeleteAllOpenOrders":"delivery"===o&&(c="dapiPrivateDeleteAllOpenOrders");const d=await this[c](this.extend(s,n));return Array.isArray(d)?this.parseOrders(d,i):d}async fetchPositions(e,t,i,s={}){await this.loadMarkets();const a=await this.fetchBalance(s),r=this.safeValue(a,"info",{});return this.safeValue2(r,"positions","userAssets",[])}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const a=this.market(e),o=this.safeValue(s,"type",a.type);let n=void 0;"spot"===o?n="privateGetMyTrades":"future"===o?n="fapiPrivateGetUserTrades":"delivery"===o&&(n="dapiPrivateGetUserTrades"),s=this.omit(s,"type");const c={symbol:a.id};void 0!==t&&(c.startTime=t),void 0!==i&&(c.limit=i);const d=await this[n](this.extend(c,s));return this.parseTrades(d,a,t,i)}async fetchMyDustTrades(e,t,i,s={}){await this.loadMarkets();const a=await this.wapiGetUserAssetDribbletLog(s),r=this.safeValue(a,"results",{}),o=this.safeValue(r,"rows",[]),n=[];for(let e=0;e<o.length;e++){const t=o[e].logs;for(let e=0;e<t.length;e++)t[e].isDustTrade=!0,n.push(t[e])}const c=this.parseTrades(n,void 0,t,i);return this.filterBySinceLimit(c,t,i)}parseDustTrade(e,t){const i=this.safeString(e,"tranId"),s=this.parse8601(this.safeString(e,"operateTime")),a=this.safeCurrencyCode(this.safeString(e,"fromAsset")),r=this.currency("BNB").code,o=r+"/"+a;let n=!1;o in this.markets&&(n=!0);const c={currency:r,cost:this.safeFloat(e,"serviceChargeAmount")};let d=void 0,h=void 0,l=void 0,u=void 0;n?(d=o,h=this.sum(this.safeFloat(e,"transferedAmount"),c.cost),l=this.safeFloat(e,"amount"),u="buy"):(d=a+"/"+r,h=this.safeFloat(e,"amount"),l=this.sum(this.safeFloat(e,"transferedAmount"),c.cost),u="sell");let p=void 0;void 0!==l&&h&&(p=l/h);return{id:void 0,timestamp:s,datetime:this.iso8601(s),symbol:d,order:i,type:void 0,takerOrMaker:void 0,side:u,amount:h,price:p,cost:l,fee:c,info:e}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.currency(e),r.asset=a.id),void 0!==t&&(r.startTime=t,r.endTime=this.sum(t,7776e6));const o=await this.wapiGetDepositHistory(this.extend(r,s));return this.parseTransactions(o.depositList,a,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.currency(e),r.asset=a.id),void 0!==t&&(r.startTime=t,r.endTime=this.sum(t,7776e6));const o=await this.wapiGetWithdrawHistory(this.extend(r,s));return this.parseTransactions(o.withdrawList,a,t,i)}parseTransactionStatusByType(e,t){const i=this.safeValue({deposit:{0:"pending",1:"ok"},withdrawal:{0:"pending",1:"canceled",2:"pending",3:"failed",4:"pending",5:"failed",6:"ok"}},t,{});return this.safeString(i,e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"address");let a=this.safeString(e,"addressTag");void 0!==a&&a.length<1&&(a=void 0);const r=this.safeString(e,"txId"),o=this.safeString(e,"asset"),n=this.safeCurrencyCode(o,t);let c=void 0;const d=this.safeInteger(e,"insertTime"),h=this.safeInteger(e,"applyTime");let l=this.safeString(e,"type");void 0===l&&(void 0!==d&&void 0===h?(l="deposit",c=d):void 0===d&&void 0!==h&&(l="withdrawal",c=h));const u=this.parseTransactionStatusByType(this.safeString(e,"status"),l),p=this.safeFloat(e,"amount"),f=this.safeFloat(e,"transactionFee");let m=void 0;void 0!==f&&(m={currency:n,cost:f});const v=this.safeInteger(e,"successTime");return{info:e,id:i,txid:r,timestamp:c,datetime:this.iso8601(c),address:s,addressTo:s,addressFrom:void 0,tag:a,tagTo:a,tagFrom:void 0,type:l,amount:p,currency:n,status:u,updated:v,fee:m}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={asset:this.currency(e).id},s=await this.wapiGetDepositAddress(this.extend(i,t)),a=this.safeValue(s,"success");if(void 0===a||!a)throw new p(this.id+" fetchDepositAddress returned an empty response  create the deposit address in the user settings first.");const r=this.safeString(s,"address"),o=this.safeString(s,"addressTag");return this.checkAddress(r),{currency:e,address:r,tag:o,info:s}}async fetchFundingFees(e,t={}){const i=await this.wapiGetAssetDetail(t),s=this.safeValue(i,"assetDetail",{}),a=Object.keys(s),r={};for(let e=0;e<a.length;e++){const t=a[e];r[this.safeCurrencyCode(t)]=this.safeFloat(s[t],"withdrawFee")}return{withdraw:r,deposit:{},info:i}}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e),o=i.slice(0,20),n={asset:r.id,address:i,amount:parseFloat(t),name:o};void 0!==s&&(n.addressTag=s);const c=await this.wapiPostWithdraw(this.extend(n,a));return{info:c,id:this.safeString(c,"id")}}parseTradingFee(e,t){const i=this.safeString(e,"symbol");return{info:e,symbol:this.safeSymbol(i),maker:this.safeFloat(e,"maker"),taker:this.safeFloat(e,"taker")}}async fetchTradingFee(e,t={}){await this.loadMarkets();const i={symbol:this.market(e).id},s=await this.wapiGetTradeFee(this.extend(i,t)),a=this.safeValue(s,"tradeFee",[]),r=this.safeValue(a,0,{});return this.parseTradingFee(r)}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.wapiGetTradeFee(e),i=this.safeValue(t,"tradeFee",[]),s={};for(let e=0;e<i.length;e++){const t=this.parseTradingFee(i[e]);s[t.symbol]=t}return s}sign(e,t="public",i="GET",s={},a,r){if(!(t in this.urls.api))throw new v(this.id+" does not have a testnet/sandbox URL for "+t+" endpoints");let o=this.urls.api[t];o+="/"+e,"wapi"===t&&(o+=".html");const n="userDataStream"===e||"listenKey"===e;if("historicalTrades"===e){if(!this.apiKey)throw new u(this.id+" historicalTrades endpoint requires `apiKey` credential");a={"X-MBX-APIKEY":this.apiKey}}else if(n){if(!this.apiKey)throw new u(this.id+" userDataStream endpoint requires `apiKey` credential");r=this.urlencode(s),a={"X-MBX-APIKEY":this.apiKey,"Content-Type":"application/x-www-form-urlencoded"}}if("private"===t||"sapi"===t||"wapi"===t&&"systemStatus"!==e||"dapiPrivate"===t||"fapiPrivate"===t||"fapiPrivateV2"===t){this.checkRequiredCredentials();let n=void 0;const c=this.safeInteger(this.options,"recvWindow",5e3);n="sapi"===t&&"asset/dust"===e?this.urlencodeWithArrayRepeat(this.extend({timestamp:this.nonce(),recvWindow:c},s)):"batchOrders"===e?this.rawencode(this.extend({timestamp:this.nonce(),recvWindow:c},s)):this.urlencode(this.extend({timestamp:this.nonce(),recvWindow:c},s));n+="&signature="+this.hmac(this.encode(n),this.encode(this.secret)),a={"X-MBX-APIKEY":this.apiKey},"GET"===i||"DELETE"===i||"wapi"===t?o+="?"+n:(r=n,a["Content-Type"]="application/x-www-form-urlencoded")}else n||Object.keys(s).length&&(o+="?"+this.urlencode(s));return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,l){if(418===e||429===e)throw new h(this.id+" "+e.toString()+" "+t+" "+o);if(e>=400){if(o.indexOf("Price * QTY is zero or less")>=0)throw new d(this.id+" order cost = amount * price is zero or less "+o);if(o.indexOf("LOT_SIZE")>=0)throw new d(this.id+" order amount should be evenly divisible by lot size "+o);if(o.indexOf("PRICE_FILTER")>=0)throw new d(this.id+" order price is invalid, i.e. exceeds allowed price precision, exceeds min price or max price limits or is invalid float value in general, use this.priceToPrecision (symbol, amount) "+o)}if(void 0===n)return;const u=this.safeValue(n,"success",!0);if(!u){const e=this.safeString(n,"msg");let t=void 0;if(void 0!==e){try{t=JSON.parse(e)}catch(e){t=void 0}void 0!==t&&(n=t)}}const p=this.safeString(n,"msg");void 0!==p&&this.throwExactlyMatchedException(this.exceptions,p,this.id+" "+p);const f=this.safeString(n,"code");if(void 0!==f){if("200"===f||"0"===f)return;if("-2015"===f&&this.options.hasAlreadyAuthenticatedSuccessfully)throw new h(this.id+" temporary banned: "+o);const e=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions,f,e),new a(e)}if(!u)throw new a(this.id+" "+o)}async request(e,t="public",i="GET",s={},a,r){const o=await this.fetch2(e,t,i,s,a,r);return"private"!==t&&"wapi"!==t||(this.options.hasAlreadyAuthenticatedSuccessfully=!0),o}}},function(e,t,i){"use strict";const s=i(1),{NotSupported:a,RateLimitExceeded:r,AuthenticationError:o,PermissionDenied:n,ArgumentsRequired:c,ExchangeError:d,ExchangeNotAvailable:h,InsufficientFunds:l,InvalidOrder:u,OrderNotFound:p,InvalidNonce:f,BadSymbol:m}=i(0),{SIGNIFICANT_DIGITS:v,DECIMAL_PLACES:y,TRUNCATE:g,ROUND:b}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitfinex",name:"Bitfinex",countries:["VG"],version:"v1",rateLimit:1500,certified:!0,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!1,createDepositAddress:!0,createOrder:!0,deposit:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchDeposits:!1,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!0,fetchWithdrawals:!1,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766244-e328a50c-5ed2-11e7-947b-041416579bb3.jpg",api:{v2:"https://api-pub.bitfinex.com",public:"https://api.bitfinex.com",private:"https://api.bitfinex.com"},www:"https://www.bitfinex.com",referral:"https://www.bitfinex.com/?refcode=P61eYxFL",doc:["https://docs.bitfinex.com/v1/docs","https://github.com/bitfinexcom/bitfinex-api-node"]},api:{v2:{get:["platform/status","tickers","ticker/{symbol}","trades/{symbol}/hist","book/{symbol}/{precision}","book/{symbol}/P0","book/{symbol}/P1","book/{symbol}/P2","book/{symbol}/P3","book/{symbol}/R0","stats1/{key}:{size}:{symbol}:{side}/{section}","stats1/{key}:{size}:{symbol}/{section}","stats1/{key}:{size}:{symbol}:long/last","stats1/{key}:{size}:{symbol}:long/hist","stats1/{key}:{size}:{symbol}:short/last","stats1/{key}:{size}:{symbol}:short/hist","candles/trade:{timeframe}:{symbol}/{section}","candles/trade:{timeframe}:{symbol}/last","candles/trade:{timeframe}:{symbol}/hist"]},public:{get:["book/{symbol}","lendbook/{currency}","lends/{currency}","pubticker/{symbol}","stats/{symbol}","symbols","symbols_details","tickers","trades/{symbol}"]},private:{post:["account_fees","account_infos","balances","basket_manage","credits","deposit/new","funding/close","history","history/movements","key_info","margin_infos","mytrades","mytrades_funding","offer/cancel","offer/new","offer/status","offers","offers/hist","order/cancel","order/cancel/all","order/cancel/multi","order/cancel/replace","order/new","order/new/multi","order/status","orders","orders/hist","position/claim","position/close","positions","summary","taken_funds","total_taken_funds","transfer","unused_taken_funds","withdraw"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.001,taker:.002,tiers:{taker:[[0,.002],[5e5,.002],[1e6,.002],[25e5,.002],[5e6,.002],[75e5,.002],[1e7,.0018],[15e6,.0016],[2e7,.14/100],[25e6,.0012],[3e7,.001]],maker:[[0,.001],[5e5,8e-4],[1e6,6e-4],[25e5,4e-4],[5e6,2e-4],[75e5,0],[1e7,0],[15e6,0],[2e7,0],[25e6,0],[3e7,0]]}},funding:{tierBased:!1,percentage:!1,deposit:{BTC:4e-4,IOTA:.5,ETH:.0027,BCH:1e-4,LTC:.001,EOS:.24279,XMR:.04,SAN:.99269,DASH:.01,ETC:.01,XRP:.02,YYW:16.915,NEO:0,ZEC:.001,BTG:0,OMG:.14026,DATA:20.773,QASH:1.9858,ETP:.01,QTUM:.01,EDO:.95001,AVT:1.3045,USDT:0,TRX:28.184,ZRX:1.9947,RCN:10.793,TNB:31.915,SNT:14.976,RLC:1.414,GNT:5.8952,SPK:10.893,REP:.041168,BAT:6.1546,ELF:1.8753,FUN:32.336,SNG:18.622,AID:8.08,MNA:16.617,NEC:1.6504,XTZ:.2},withdraw:{BTC:4e-4,IOTA:.5,ETH:.0027,BCH:1e-4,LTC:.001,EOS:.24279,XMR:.04,SAN:.99269,DASH:.01,ETC:.01,XRP:.02,YYW:16.915,NEO:0,ZEC:.001,BTG:0,OMG:.14026,DATA:20.773,QASH:1.9858,ETP:.01,QTUM:.01,EDO:.95001,AVT:1.3045,USDT:20,TRX:28.184,ZRX:1.9947,RCN:10.793,TNB:31.915,SNT:14.976,RLC:1.414,GNT:5.8952,SPK:10.893,REP:.041168,BAT:6.1546,ELF:1.8753,FUN:32.336,SNG:18.622,AID:8.08,MNA:16.617,NEC:1.6504,XTZ:.2}}},commonCurrencies:{ABS:"ABYSS",AIO:"AION",ALG:"ALGO",AMP:"AMPL",ATM:"ATMI",ATO:"ATOM",BAB:"BCH",CTX:"CTXC",DAD:"DADI",DAT:"DATA",DSH:"DASH",DRK:"DRK",EDO:"PNT",GSD:"GUSD",HOT:"Hydro Protocol",IOS:"IOST",IOT:"IOTA",IQX:"IQ",MIT:"MITH",MNA:"MANA",NCA:"NCASH",ORS:"ORS Group",POY:"POLY",QSH:"QASH",QTM:"QTUM",RBT:"RBTC",SEE:"SEER",SNG:"SNGLS",SPK:"SPANK",STJ:"STORJ",TRI:"TRIO",TSD:"TUSD",YYW:"YOYOW",UDC:"USDC",UST:"USDT",UTN:"UTNP",VSY:"VSYS",WAX:"WAXP",XCH:"XCHF",ZBT:"ZB"},exceptions:{exact:{temporarily_unavailable:h,"Order could not be cancelled.":p,"No such order found.":p,"Order price must be positive.":u,"Could not find a key matching the given X-BFX-APIKEY.":o,'Key price should be a decimal number, e.g. "123.456"':u,'Key amount should be a decimal number, e.g. "123.456"':u,ERR_RATE_LIMIT:r,Ratelimit:r,"Nonce is too small.":f,"No summary found.":d,"Cannot evaluate your available balance, please try again":h,"Unknown symbol":m},broad:{"Invalid X-BFX-SIGNATURE":o,"This API key does not have permission":n,"not enough exchange balance for ":l,"minimum size for ":u,"Invalid order":u,"The available balance is only":l}},precisionMode:v,options:{currencyNames:{AGI:"agi",AID:"aid",AIO:"aio",ANT:"ant",AVT:"aventus",BAT:"bat",BCH:"bab",BCI:"bci",BFT:"bft",BSV:"bsv",BTC:"bitcoin",BTG:"bgold",CFI:"cfi",COMP:"comp",DAI:"dai",DADI:"dad",DASH:"dash",DATA:"datacoin",DTH:"dth",EDO:"eidoo",ELF:"elf",EOS:"eos",ETC:"ethereumc",ETH:"ethereum",ETP:"metaverse",FUN:"fun",GNT:"golem",IOST:"ios",IOTA:"iota",LEO:"let",LINK:"link",LRC:"lrc",LTC:"litecoin",LYM:"lym",MANA:"mna",MIT:"mit",MKR:"mkr",MTN:"mtn",NEO:"neo",ODE:"ode",OMG:"omisego",OMNI:"mastercoin",QASH:"qash",QTUM:"qtum",RCN:"rcn",RDN:"rdn",REP:"rep",REQ:"req",RLC:"rlc",SAN:"santiment",SNGLS:"sng",SNT:"status",SPANK:"spk",STORJ:"stj",TNB:"tnb",TRX:"trx",TUSD:"tsd",USD:"wire",USDC:"udc",UTK:"utk",USDT:"tetheruso",VEE:"vee",WAX:"wax",XLM:"xlm",XMR:"monero",XRP:"ripple",XVG:"xvg",YOYOW:"yoyow",ZEC:"zcash",ZRX:"zrx",XTZ:"xtz"},orderTypes:{limit:"exchange limit",market:"exchange market"}}})}async fetchFundingFees(e={}){await this.loadMarkets();const t=await this.privatePostAccountFees(e),i=t.withdraw,s={},a=Object.keys(i);for(let e=0;e<a.length;e++){const t=a[e];s[this.safeCurrencyCode(t)]=this.safeFloat(i,t)}return{info:t,withdraw:s,deposit:s}}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privatePostSummary(e);return{info:t,maker:this.safeFloat(t,"maker_fee"),taker:this.safeFloat(t,"taker_fee")}}async fetchMarkets(e={}){const t=await this.publicGetSymbols(),i=await this.publicGetSymbolsDetails(),s=[];for(let e=0;e<i.length;e++){const a=i[e];let r=this.safeString(a,"pair");if(!this.inArray(r,t))continue;r=r.toUpperCase();let o=void 0,n=void 0;if(r.indexOf(":")>=0){const e=r.split(":");o=e[0],n=e[1]}else o=r.slice(0,3),n=r.slice(3,6);const c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=c+"/"+d,l={price:this.safeInteger(a,"price_precision"),amount:8},u={amount:{min:this.safeFloat(a,"minimum_order_size"),max:this.safeFloat(a,"maximum_order_size")},price:{min:Math.pow(10,-l.price),max:Math.pow(10,l.price)}};u.cost={min:u.amount.min*u.price.min,max:void 0},s.push({id:r,symbol:h,base:c,quote:d,baseId:o,quoteId:n,active:!0,precision:l,limits:u,info:a})}return s}amountToPrecision(e,t){return this.decimalToPrecision(t,g,this.markets[e].precision.amount,y)}priceToPrecision(e,t){return t=this.decimalToPrecision(t,b,this.markets[e].precision.price,this.precisionMode),this.decimalToPrecision(t,g,8,y)}calculateFee(e,t,i,s,a,r="taker",o={}){const n=this.markets[e],c=n[r];let d=s*c,h="quote";"sell"===i?d*=a:h="base";const l=n[h],u=this.safeValue(this.currencies,l);if(void 0!==u){void 0!==this.safeInteger(u,"precision")&&(d=parseFloat(this.currencyToPrecision(l,d)))}return{type:r,currency:n[h],rate:c,cost:d}}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString(e,"type","exchange"),i=this.omit(e,"type"),s=await this.privatePostBalances(i),a={info:s};for(let e=0;e<s.length;e++){const i=s[e];if(i.type===t){const e=this.safeString(i,"currency"),t=this.safeCurrencyCode(e);if(!(t in a)){const e=this.account();e.free=this.safeFloat(i,"available"),e.total=this.safeFloat(i,"amount"),a[t]=e}}}return this.parseBalance(a)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.limit_bids=t,s.limit_asks=t);const a=await this.publicGetBookSymbol(this.extend(s,i));return this.parseOrderBook(a,void 0,"bids","asks","price","amount")}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s={};for(let e=0;e<i.length;e++){const t=this.parseTicker(i[e]);s[t.symbol]=t}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.publicGetPubtickerSymbol(this.extend(s,t));return this.parseTicker(a,i)}parseTicker(e,t){let i=this.safeFloat(e,"timestamp");void 0!==i&&(i*=1e3),i=parseInt(i);let s=void 0;if(void 0!==t)s=t.symbol;else if("pair"in e){const i=this.safeString(e,"pair");if(void 0!==i)if(i in this.markets_by_id)s=(t=this.markets_by_id[i]).symbol;else{const e=i.slice(0,3),t=i.slice(3,6);s=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}}const a=this.safeFloat(e,"last_price");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"mid"),baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}parseTrade(e,t){const i=this.safeString(e,"tid");let s=this.safeFloat(e,"timestamp");void 0!==s&&(s=1e3*parseInt(s));const a=this.safeStringLower(e,"type"),r=this.safeString(e,"order_id"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let c=void 0;void 0!==o&&void 0!==n&&(c=o*n);let d=void 0;if("fee_amount"in e){const t=-this.safeFloat(e,"fee_amount"),i=this.safeString(e,"fee_currency");d={cost:t,currency:this.safeCurrencyCode(i)}}return{id:i,info:e,timestamp:s,datetime:this.iso8601(s),symbol:t.symbol,type:void 0,order:r,side:a,takerOrMaker:void 0,price:o,amount:n,cost:c,fee:d}}async fetchTrades(e,t,i=50,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id,limit_trades:i};void 0!==t&&(r.timestamp=parseInt(t/1e3));const o=await this.publicGetTradesSymbol(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchMyTrades requires a `symbol` argument");await this.loadMarkets();const a=this.market(e),r={symbol:a.id};void 0!==i&&(r.limit_trades=i),void 0!==t&&(r.timestamp=parseInt(t/1e3));const o=await this.privatePostMytrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o={symbol:this.marketId(e),side:i,amount:this.amountToPrecision(e,s),type:this.safeString(this.options.orderTypes,t,t),ocoorder:!1,buy_price_oco:0,sell_price_oco:0};o.price="market"===t?this.nonce().toString():this.priceToPrecision(e,a);const n=await this.privatePostOrderNew(this.extend(o,r));return this.parseOrder(n)}async editOrder(e,t,i,s,a,r,o={}){await this.loadMarkets();const n={order_id:parseInt(e)};void 0!==r&&(n.price=this.priceToPrecision(t,r)),void 0!==a&&(n.amount=this.numberToString(a)),void 0!==t&&(n.symbol=this.marketId(t)),void 0!==s&&(n.side=s),void 0!==i&&(n.type=this.safeString(this.options.orderTypes,i,i));const c=await this.privatePostOrderCancelReplace(this.extend(n,o));return this.parseOrder(c)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)};return await this.privatePostOrderCancel(this.extend(s,i))}async cancelAllOrders(e,t={}){return await this.privatePostOrderCancelAll(t)}parseOrder(e,t){const i=this.safeString(e,"side"),s=this.safeValue(e,"is_live"),a=this.safeValue(e,"is_cancelled");let r=void 0;r=s?"open":a?"canceled":"closed";let o=void 0;if(void 0===t){const i=this.safeStringUpper(e,"symbol");void 0!==i&&i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(o=t.symbol);let n=e.type;if(n.indexOf("exchange ")>=0){n=e.type.split(" ")[1]}let c=this.safeFloat(e,"timestamp");void 0!==c&&(c=1e3*parseInt(c));return{info:e,id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:o,type:n,timeInForce:void 0,side:i,price:this.safeFloat(e,"price"),stopPrice:void 0,average:this.safeFloat(e,"avg_execution_price"),amount:this.safeFloat(e,"original_amount"),remaining:this.safeFloat(e,"remaining_amount"),filled:this.safeFloat(e,"executed_amount"),status:r,fee:void 0,cost:void 0,trades:void 0}}async fetchOpenOrders(e,t,i,s={}){if(await this.loadMarkets(),void 0!==e&&!(e in this.markets))throw new d(this.id+" has no symbol "+e);const a=await this.privatePostOrders(s);let r=this.parseOrders(a,void 0,t,i);return void 0!==e&&(r=this.filterBy(r,"symbol",e)),r}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const a={};void 0!==i&&(a.limit=i);const r=await this.privatePostOrdersHist(this.extend(a,s));let o=this.parseOrders(r,void 0,t,i);return void 0!==e&&(o=this.filterBy(o,"symbol",e)),o=this.filterByArray(o,"status",["closed","canceled"],!1),o}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)},a=await this.privatePostOrderStatus(this.extend(s,i));return this.parseOrder(a)}parseOHLCV(e,t){return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,5)]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets(),void 0===s&&(s=100);const r=this.market(e),o={symbol:"t"+r.id,timeframe:this.timeframes[t],sort:1,limit:s};void 0!==i&&(o.start=i);const n=await this.v2GetCandlesTradeTimeframeSymbolHist(this.extend(o,a));return this.parseOHLCVs(n,r,t,i,s)}getCurrencyName(e){if(e in this.options.currencyNames)return this.options.currencyNames[e];throw new a(this.id+" "+e+" not supported for withdrawal")}async createDepositAddress(e,t={}){await this.loadMarkets();return await this.fetchDepositAddress(e,this.extend({renew:1},t))}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={method:this.getCurrencyName(e),wallet_name:"exchange",renew:0},s=await this.privatePostDepositNew(this.extend(i,t));let a=this.safeValue(s,"address"),r=void 0;return"address_pool"in s&&(r=a,a=s.address_pool),this.checkAddress(a),{currency:e,address:a,tag:r,info:s}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();let a=this.safeString(s,"currency");const r=this.omit(s,"currency");let o=void 0;if(void 0===a){if(void 0===e)throw new c(this.id+" fetchTransactions() requires a currency `code` argument or a `currency` parameter");o=this.currency(e),a=o.id}r.currency=a,void 0!==t&&(r.since=parseInt(t/1e3));const n=await this.privatePostHistoryMovements(this.extend(r,s));return this.parseTransactions(n,o,t,i)}parseTransaction(e,t){let i=this.safeFloat(e,"timestamp_created");void 0!==i&&(i=parseInt(1e3*i));let s=this.safeFloat(e,"timestamp");void 0!==s&&(s=parseInt(1e3*s));const a=this.safeString(e,"currency"),r=this.safeCurrencyCode(a,t),o=this.safeStringLower(e,"type"),n=this.parseTransactionStatus(this.safeString(e,"status"));let c=this.safeFloat(e,"fee");return void 0!==c&&(c=Math.abs(c)),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"txid"),timestamp:i,datetime:this.iso8601(i),address:this.safeString(e,"address"),tag:void 0,type:o,amount:this.safeFloat(e,"amount"),currency:r,status:n,updated:s,fee:{currency:r,cost:c,rate:void 0}}}parseTransactionStatus(e){return this.safeString({SENDING:"pending",CANCELED:"canceled",ZEROCONFIRMED:"failed",COMPLETED:"ok"},e,e)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r={withdraw_type:this.getCurrencyName(e),walletselected:"exchange",amount:this.numberToString(t),address:i};void 0!==s&&(r.payment_id=s);const o=(await this.privatePostWithdraw(this.extend(r,a)))[0],n=this.safeString(o,"withdrawal_id"),c=this.safeString(o,"message"),h=this.findBroadlyMatchedKey(this.exceptions.broad,c);if(0===n){if(void 0!==h){throw new(0,this.exceptions.broad[h])(this.id+" "+c)}throw new d(this.id+" withdraw returned an id of zero: "+this.json(o))}return{info:o,id:n}}async fetchPositions(e,t,i,s={}){await this.loadMarkets();return await this.privatePostPositions(s)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o="/"+this.implodeParams(e,s);o="v2"===t?"/"+t+o:"/"+this.version+o;let n=this.omit(s,this.extractParams(e)),c=this.urls.api[t]+o;if(("public"===t||e.indexOf("/hist")>=0)&&Object.keys(n).length){const e="?"+this.urlencode(n);c+=e,o+=e}if("private"===t){this.checkRequiredCredentials();const e=this.nonce();n=this.extend({nonce:e.toString(),request:o},n),r=this.json(n);const t=this.stringToBase64(r),i=this.encode(this.secret),s=this.hmac(t,i,"sha384");a={"X-BFX-APIKEY":this.apiKey,"X-BFX-PAYLOAD":this.decode(t),"X-BFX-SIGNATURE":s,"Content-Type":"application/json"}}return{url:c,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,r,o,n,c){if(void 0!==o&&e>=400&&"{"===r[0]){const e=this.id+" "+r,t=this.safeString2(o,"message","error");throw this.throwExactlyMatchedException(this.exceptions.exact,t,e),this.throwBroadlyMatchedException(this.exceptions.broad,t,e),new d(e)}}}},function(e,t,i){"use strict";const s=i(1),{BadRequest:a,ExchangeError:r,ArgumentsRequired:o,AuthenticationError:n,InsufficientFunds:c,OrderNotFound:d,ExchangeNotAvailable:h,DDoSProtection:l,InvalidOrder:u}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"zb",name:"ZB",countries:["CN"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"1day","3d":"3day","1w":"1week"},exceptions:{1001:r,1002:r,1003:n,1004:n,1005:n,1006:n,1009:h,2001:c,2002:c,2003:c,2005:c,2006:c,2007:c,2009:c,3001:d,3002:u,3003:u,3004:n,3005:a,3006:n,3007:n,3008:d,3009:u,3011:u,4001:h,4002:l},urls:{logo:"https://user-images.githubusercontent.com/1294454/32859187-cd5214f0-ca5e-11e7-967d-96568e2e2bd1.jpg",api:{public:"http://api.zb.cn/data",private:"https://trade.zb.cn/api"},www:"https://www.zb.com",doc:"https://www.zb.com/i/developer",fees:"https://www.zb.com/i/rate"},api:{public:{get:["markets","ticker","allTicker","depth","trades","kline"]},private:{get:["order","cancelOrder","getOrder","getOrders","getOrdersNew","getOrdersIgnoreTradeType","getUnfinishedOrdersIgnoreTradeType","getAccountInfo","getUserAddress","getWithdrawAddress","getWithdrawRecord","getChargeRecord","getCnyWithdrawRecord","getCnyChargeRecord","withdraw","getLeverAssetsInfo","getLeverBills","transferInLever","transferOutLever","loan","cancelLoan","getLoans","getLoanRecords","borrow","repay","getRepayments"]}},fees:{funding:{withdraw:{BTC:1e-4,BCH:6e-4,LTC:.005,ETH:.01,ETC:.01,BTS:3,EOS:1,QTUM:.01,HSR:.001,XRP:.1,USDT:"0.1%",QCASH:5,DASH:.002,BCD:0,UBTC:0,SBTC:0,INK:20,TV:.1,BTH:0,BCX:0,LBTC:0,CHAT:20,bitCNY:20,HLC:20,BTP:0,BCW:0}},trading:{maker:.002,taker:.002}},commonCurrencies:{ENT:"ENTCash"}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){const a=i[e],r=t[a],[o,n]=a.split("_"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=c+"/"+d,l={amount:this.safeInteger(r,"amountScale"),price:this.safeInteger(r,"priceScale")};s.push({id:a,symbol:h,baseId:o,quoteId:n,base:c,quote:d,active:!0,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:void 0},price:{min:Math.pow(10,-l.price),max:void 0},cost:{min:0,max:void 0}},info:r})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetGetAccountInfo(e),i=this.safeValue(t.result,"coins"),s={info:t};for(let e=0;e<i.length;e++){const t=i[e],a=this.account(),r=this.safeString(t,"key"),o=this.safeCurrencyCode(r);a.free=this.safeFloat(t,"available"),a.used=this.safeFloat(t,"freez"),s[o]=a}return this.parseBalance(s)}getMarketFieldName(){return"market"}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetGetUserAddress(this.extend(i,t));let a=s.message.datas.key,r=void 0;if(a.indexOf("_")>=0){const e=a.split("_");a=e[0],r=e[1]}return{currency:e,address:a,tag:r,info:s}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),a={};a[this.getMarketFieldName()]=s.id,void 0!==t&&(a.size=t);const r=await this.publicGetDepth(this.extend(a,i));return this.parseOrderBook(r)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetAllTicker(t),s={},a={},r=Object.keys(this.marketsById);for(let e=0;e<r.length;e++){a[r[e].replace("_","")]=this.marketsById[r[e]]}const o=Object.keys(i);for(let e=0;e<o.length;e++){const t=a[o[e]];s[t.symbol]=this.parseTicker(i[o[e]],t)}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={};s[this.getMarketFieldName()]=i.id;const a=(await this.publicGetTicker(this.extend(s,t))).ticker;return this.parseTicker(a,i)}parseTicker(e,t){const i=this.milliseconds();let s=void 0;void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e);void 0===s&&(s=1e3);const o={market:r.id,type:this.timeframes[t],limit:s};void 0!==i&&(o.since=i);const n=await this.publicGetKline(this.extend(o,a)),c=this.safeValue(n,"data",[]);return this.parseOHLCVs(c,r,t,i,s)}parseTrade(e,t){const i=this.safeTimestamp(e,"date");let s=this.safeString(e,"trade_type");s="bid"===s?"buy":"sell";const a=this.safeString(e,"tid"),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=void 0;void 0!==r&&void 0!==o&&(n=r*o);let c=void 0;return void 0!==t&&(c=t.symbol),{info:e,id:a,timestamp:i,datetime:this.iso8601(i),symbol:c,type:void 0,side:s,order:void 0,takerOrMaker:void 0,price:r,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={};r[this.getMarketFieldName()]=a.id;const o=await this.publicGetTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}async createOrder(e,t,i,s,a,r={}){if("limit"!==t)throw new u(this.id+" allows limit orders only");await this.loadMarkets();const o={price:this.priceToPrecision(e,a),amount:this.amountToPrecision(e,s),tradeType:"buy"===i?"1":"0",currency:this.marketId(e)},n=await this.privateGetOrder(this.extend(o,r));return{info:n,id:n.id}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e.toString(),currency:this.marketId(t)};return await this.privateGetCancelOrder(this.extend(s,i))}async fetchOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s={id:e.toString(),currency:this.marketId(t)},a=await this.privateGetGetOrder(this.extend(s,i));return this.parseOrder(a,void 0)}async fetchOrders(e,t,i=50,s={}){if(void 0===e)throw new o(this.id+"fetchOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e),r={currency:a.id,pageIndex:1,pageSize:i};let n="privateGetGetOrdersIgnoreTradeType";"tradeType"in s&&(n="privateGetGetOrdersNew");let c=void 0;try{c=await this[n](this.extend(r,s))}catch(e){if(e instanceof d)return[];throw e}return this.parseOrders(c,a,t,i)}async fetchOpenOrders(e,t,i=10,s={}){if(void 0===e)throw new o(this.id+"fetchOpenOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e),r={currency:a.id,pageIndex:1,pageSize:i};let n="privateGetGetUnfinishedOrdersIgnoreTradeType";"tradeType"in s&&(n="privateGetGetOrdersNew");let c=void 0;try{c=await this[n](this.extend(r,s))}catch(e){if(e instanceof d)return[];throw e}return this.parseOrders(c,a,t,i)}parseOrder(e,t){let i=this.safeInteger(e,"type");i=1===i?"buy":"sell";let s=void 0;const a=this.getCreateDateField();a in e&&(s=e[a]);const r=this.safeString(e,"currency"),o=this.safeSymbol(r,t,"_"),n=this.safeFloat(e,"price"),c=this.safeFloat(e,"trade_amount"),d=this.safeFloat(e,"total_amount");let h=void 0;void 0!==d&&void 0!==c&&(h=d-c);const l=this.safeFloat(e,"trade_money");let u=void 0;const p=this.parseOrderStatus(this.safeString(e,"status"));void 0!==l&&void 0!==c&&c>0&&(u=l/c);return{info:e,id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:o,type:"limit",timeInForce:void 0,side:i,price:n,stopPrice:void 0,average:u,cost:l,amount:d,filled:c,remaining:h,status:p,fee:void 0,trades:void 0}}parseOrderStatus(e){return this.safeString({0:"open",1:"canceled",2:"closed",3:"open"},e,e)}getCreateDateField(){return"trade_date"}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t];if("public"===t)o+="/"+this.version+"/"+e,Object.keys(s).length&&(o+="?"+this.urlencode(s));else{let t=this.keysort(this.extend({method:e,accesskey:this.apiKey},s));const i=this.nonce();t=this.keysort(t);const a=this.rawencode(t),r=this.hash(this.encode(this.secret),"sha1");o+="/"+e+"?"+a+"&"+("sign="+this.hmac(this.encode(a),this.encode(r),"md5")+"&reqTime="+i.toString())}return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,o,n,c,d){if(void 0!==n&&"{"===o[0]){const e=this.id+" "+o;if("code"in n){const t=this.safeString(n,"code");if(this.throwExactlyMatchedException(this.exceptions,t,e),"1000"!==t)throw new r(e)}const t=this.safeValue(n,"result");if(void 0!==t&&!t){throw""===this.safeString(n,"message")?new h(e):new r(e)}}}}},function(e,t,i){"use strict";const s=i(1),{InsufficientFunds:a,ArgumentsRequired:r,ExchangeError:o,InvalidOrder:n,InvalidAddress:c,AuthenticationError:d,NotSupported:h,OrderNotFound:l,OnMaintenance:u,PermissionDenied:p,RateLimitExceeded:f}=i(0),{TICK_SIZE:m}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinbasepro",name:"Coinbase Pro",countries:["US"],rateLimit:1e3,userAgent:this.userAgents.chrome,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!0,createDepositAddress:!0,createOrder:!0,deposit:!0,fetchAccounts:!0,fetchBalance:!0,fetchCurrencies:!0,fetchClosedOrders:!0,fetchDepositAddress:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTime:!0,fetchTicker:!0,fetchTrades:!0,fetchTransactions:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0},timeframes:{"1m":60,"5m":300,"15m":900,"1h":3600,"6h":21600,"1d":86400},urls:{test:{public:"https://api-public.sandbox.pro.coinbase.com",private:"https://api-public.sandbox.pro.coinbase.com"},logo:"https://user-images.githubusercontent.com/1294454/41764625-63b7ffde-760a-11e8-996d-a6328fa9347a.jpg",api:{public:"https://api.pro.coinbase.com",private:"https://api.pro.coinbase.com"},www:"https://pro.coinbase.com/",doc:"https://docs.pro.coinbase.com",fees:["https://docs.pro.coinbase.com/#fees","https://support.pro.coinbase.com/customer/en/portal/articles/2945310-fees"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},api:{public:{get:["currencies","products","products/{id}","products/{id}/book","products/{id}/candles","products/{id}/stats","products/{id}/ticker","products/{id}/trades","time"]},private:{get:["accounts","accounts/{id}","accounts/{id}/holds","accounts/{id}/ledger","accounts/{id}/transfers","coinbase-accounts","fills","funding","fees","margin/profile_information","margin/buying_power","margin/withdrawal_power","margin/withdrawal_power_all","margin/exit_plan","margin/liquidation_history","margin/position_refresh_amounts","margin/status","oracle","orders","orders/{id}","orders/client:{client_oid}","otc/orders","payment-methods","position","profiles","profiles/{id}","reports/{report_id}","transfers","transfers/{transfer_id}","users/self/trailing-volume","users/self/exchange-limits","withdrawals/fee-estimate"],post:["conversions","deposits/coinbase-account","deposits/payment-method","coinbase-accounts/{id}/addresses","funding/repay","orders","position/close","profiles/margin-transfer","profiles/transfer","reports","withdrawals/coinbase","withdrawals/coinbase-account","withdrawals/crypto","withdrawals/payment-method"],delete:["orders","orders/client:{client_oid}","orders/{id}"]}},commonCurrencies:{CGLD:"CELO"},precisionMode:m,fees:{trading:{tierBased:!0,percentage:!0,maker:.005,taker:.005},funding:{tierBased:!1,percentage:!1,withdraw:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:25},deposit:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:10}}},exceptions:{exact:{"Insufficient funds":a,NotFound:l,"Invalid API Key":d,"invalid signature":d,"Invalid Passphrase":d,"Invalid order id":n,"Private rate limit exceeded":f,"Trading pair not available":p,"Product not found":n},broad:{"Order already done":l,"order not found":l,"price too small":n,"price too precise":n,"under maintenance":u,"size is too small":n,"Cancel only mode":u}}})}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"id"),r=this.safeString(s,"name"),o=this.safeCurrencyCode(a),n=this.safeValue(s,"details",{}),c=this.safeFloat(s,"max_precision"),d="online"===this.safeString(s,"status");i[o]={id:a,code:o,info:s,type:this.safeString(n,"type"),name:r,active:d,fee:void 0,precision:c,limits:{amount:{min:this.safeFloat(n,"min_size"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(n,"min_withdrawal_amount"),max:void 0}}}}return i}async fetchMarkets(e={}){const t=await this.publicGetProducts(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"id"),r=this.safeString(s,"base_currency"),o=this.safeString(s,"quote_currency"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o),d=n+"/"+c,h={min:this.safeFloat(s,"quote_increment"),max:void 0},l={amount:this.safeFloat(s,"base_increment"),price:this.safeFloat(s,"quote_increment")},u="online"===this.safeString(s,"status");i.push(this.extend(this.fees.trading,{id:a,symbol:d,baseId:r,quoteId:o,base:n,quote:c,precision:l,limits:{amount:{min:this.safeFloat(s,"base_min_size"),max:this.safeFloat(s,"base_max_size")},price:h,cost:{min:this.safeFloat(s,"min_market_funds"),max:this.safeFloat(s,"max_market_funds")}},active:u,info:s}))}return i}async fetchAccounts(e={}){const t=await this.privateGetAccounts(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"id"),r=this.safeString(s,"currency"),o=this.safeCurrencyCode(r);i.push({id:a,type:void 0,currency:o,info:s})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccounts(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"currency"),r=this.safeCurrencyCode(a),o={free:this.safeFloat(s,"available"),used:this.safeFloat(s,"hold"),total:this.safeFloat(s,"balance")};i[r]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e),level:2},a=await this.publicGetProductsIdBook(this.extend(s,i)),r=this.parseOrderBook(a);return r.nonce=this.safeInteger(a,"sequence"),r}parseTicker(e,t){const i=this.parse8601(this.safeValue(e,"time")),s=this.safeFloat(e,"bid"),a=this.safeFloat(e,"ask"),r=this.safeFloat(e,"price");return{symbol:void 0===t?void 0:t.symbol,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:s,bidVolume:void 0,ask:a,askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={id:i.id},a=this.safeString(this.options,"fetchTickerMethod","publicGetProductsIdTicker"),r=await this[a](this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){const i=this.parse8601(this.safeString2(e,"time","created_at")),s=this.safeString(e,"product_id"),a=this.safeSymbol(s,t,"-");let r=void 0,o=void 0,n=void 0;void 0!==t&&(o=t.quote,"liquidity"in e&&(n="T"===e.liquidity?"taker":"maker",r=t[n]));const c={cost:this.safeFloat2(e,"fill_fees","fee"),currency:o,rate:r},d=this.safeString(e,"trade_id");let h="buy"===e.side?"sell":"buy";const l=this.safeString(e,"order_id");void 0!==l&&(h="buy"===e.side?"buy":"sell");const u=this.safeFloat(e,"price"),p=this.safeFloat(e,"size");return{id:d,order:l,info:e,timestamp:i,datetime:this.iso8601(i),symbol:a,type:void 0,takerOrMaker:n,side:h,price:u,amount:p,fee:c,cost:u*p}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const a=this.market(e),o={product_id:a.id};void 0!==i&&(o.limit=i);const n=await this.privateGetFills(this.extend(o,s));return this.parseTrades(n,a,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={id:a.id},o=await this.publicGetProductsIdTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeFloat(e,3),this.safeFloat(e,2),this.safeFloat(e,1),this.safeFloat(e,4),this.safeFloat(e,5)]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o=this.timeframes[t],n={id:r.id,granularity:o};void 0!==i&&(n.start=this.iso8601(i),void 0===s&&(s=300),n.end=this.iso8601(this.sum((s-1)*o*1e3,i)));const c=await this.publicGetProductsIdCandles(this.extend(n,a));return this.parseOHLCVs(c,r,t,i,s)}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.safeTimestamp(t,"epoch")}parseOrderStatus(e){return this.safeString({pending:"open",active:"open",open:"open",done:"closed",canceled:"canceled",canceling:"open"},e,e)}parseOrder(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"product_id");t=this.safeMarket(s,t,"-");const a=this.parseOrderStatus(this.safeString(e,"status")),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"filled_size"),n=this.safeFloat(e,"size",o);let c=void 0;void 0!==n&&void 0!==o&&(c=n-o);const d=this.safeFloat(e,"executed_value"),h=this.safeFloat(e,"fill_fees");let l=void 0;if(void 0!==h){let e=void 0;void 0!==t&&(e=t.quote),l={cost:h,currency:e,rate:void 0}}const u=this.safeString(e,"id"),p=this.safeString(e,"type"),f=this.safeString(e,"side");return{id:u,clientOrderId:void 0,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:a,symbol:t.symbol,type:p,timeInForce:void 0,side:f,price:r,stopPrice:void 0,cost:d,amount:n,filled:o,remaining:c,fee:l,average:void 0,trades:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privateGetOrdersId(this.extend(s,i));return this.parseOrder(a)}async fetchOrderTrades(e,t,i,s,a={}){await this.loadMarkets();let r=void 0;void 0!==t&&(r=this.market(t));const o={order_id:e},n=await this.privateGetFills(this.extend(o,a));return this.parseTrades(n,r,i,s)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const a={status:"all"};let r=void 0;void 0!==e&&(r=this.market(e),a.product_id=r.id);const o=await this.privateGetOrders(this.extend(a,s));return this.parseOrders(o,r,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.market(e),a.product_id=r.id);const o=await this.privateGetOrders(this.extend(a,s));return this.parseOrders(o,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const a={status:"done"};let r=void 0;void 0!==e&&(r=this.market(e),a.product_id=r.id);const o=await this.privateGetOrders(this.extend(a,s));return this.parseOrders(o,r,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o={product_id:this.marketId(e),side:i,size:this.amountToPrecision(e,s),type:t};"limit"===t&&(o.price=this.priceToPrecision(e,a));const n=await this.privatePostOrders(this.extend(o,r));return this.parseOrder(n)}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privateDeleteOrdersId({id:e})}async cancelAllOrders(e,t={}){return await this.privateDeleteOrders(t)}calculateFee(e,t,i,s,a,r="taker",o={}){const n=this.markets[e],c=n[r],d=s*a,h=n.quote;return{type:r,currency:h,rate:c,cost:parseFloat(this.currencyToPrecision(h,c*d))}}async fetchPaymentMethods(e={}){return await this.privateGetPaymentMethods(e)}async deposit(e,t,i,s={}){await this.loadMarkets();const a={currency:this.currency(e).id,amount:t};let r="privatePostDeposits";if("payment_method_id"in s)r+="PaymentMethod";else{if(!("coinbase_account_id"in s))throw new h(this.id+" deposit() requires one of `coinbase_account_id` or `payment_method_id` extra params");r+="CoinbaseAccount"}const n=await this[r](this.extend(a,s));if(!n)throw new o(this.id+" deposit() error: "+this.json(n));return{info:n,id:n.id}}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r={currency:this.currency(e).id,amount:t};let n="privatePostWithdrawals";"payment_method_id"in a?n+="PaymentMethod":"coinbase_account_id"in a?n+="CoinbaseAccount":(n+="Crypto",r.crypto_address=i);const c=await this[n](this.extend(r,a));if(!c)throw new o(this.id+" withdraw() error: "+this.json(c));return{info:c,id:c.id}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets(),await this.loadAccounts();let a=void 0,r=this.safeString(s,"id");if(void 0===r&&void 0!==e){a=this.currency(e);const t=this.indexBy(this.accounts,"currency"),i=this.safeValue(t,e);if(void 0===i)throw new o(this.id+" fetchTransactions() could not find account id for "+e);r=i.id}const n={};void 0!==r&&(n.id=r),void 0!==i&&(n.limit=i);let c=void 0;if(void 0===r){c=await this.privateGetTransfers(this.extend(n,s));for(let e=0;e<c.length;e++){const t=this.safeString(c[e],"account_id"),i=this.safeValue(this.accountsById,t),s=this.safeString(i,"currency");c[e].currency=s}}else{c=await this.privateGetAccountsIdTransfers(this.extend(n,s));for(let t=0;t<c.length;t++)c[t].currency=e}return this.parseTransactions(c,a,t,i)}async fetchDeposits(e,t,i,s={}){return this.fetchTransactions(e,t,i,this.extend(s,{type:"deposit"}))}async fetchWithdrawals(e,t,i,s={}){return this.fetchTransactions(e,t,i,this.extend(s,{type:"withdraw"}))}parseTransactionStatus(e){if(this.safeValue(e,"canceled_at"))return"canceled";const t=this.safeValue(e,"processed_at"),i=this.safeValue(e,"completed_at");return i?"ok":t&&!i?"failed":"pending"}parseTransaction(e,t){const i=this.safeValue(e,"details",{}),s=this.safeString(e,"id"),a=this.safeString(i,"crypto_transaction_hash"),r=this.parse8601(this.safeString(e,"created_at")),o=this.parse8601(this.safeString(e,"processed_at")),n=this.safeString(e,"currency"),c=this.safeCurrencyCode(n,t),d=this.parseTransactionStatus(e),h=this.safeFloat(e,"amount");let l=this.safeString(e,"type"),u=this.safeString(i,"crypto_address");const p=this.safeString(i,"destination_tag");u=this.safeString(e,"crypto_address",u);let f=void 0;if("withdraw"===l){l="withdrawal",u=this.safeString(i,"sent_to_address",u);const e=this.safeFloat(i,"fee");void 0!==e&&(f={cost:e,code:c})}return{info:e,id:s,txid:a,timestamp:r,datetime:this.iso8601(r),address:u,tag:p,type:l,amount:h,currency:c,status:d,updated:o,fee:f}}sign(e,t="public",i="GET",s={},a,r){let o="/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));"GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n));const c=this.urls.api[t]+o;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();let t="";"GET"!==i&&Object.keys(n).length&&(t=r=this.json(n));const s=e+i+o+t,c=this.base64ToBinary(this.secret),d=this.hmac(this.encode(s),c,"sha256","base64");a={"CB-ACCESS-KEY":this.apiKey,"CB-ACCESS-SIGN":d,"CB-ACCESS-TIMESTAMP":e,"CB-ACCESS-PASSPHRASE":this.password,"Content-Type":"application/json"}}return{url:c,method:i,body:r,headers:a}}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e);let s=this.safeValue(this.options,"coinbaseAccounts");void 0===s&&(s=await this.privateGetCoinbaseAccounts(),this.options.coinbaseAccounts=s,this.options.coinbaseAccountsByCurrencyId=this.indexBy(s,"currency"));const a=i.id,r=this.safeValue(this.options.coinbaseAccountsByCurrencyId,a);if(void 0===r)throw new c(this.id+" fetchDepositAddress() could not find currency code "+e+" with id = "+a+" in this.options['coinbaseAccountsByCurrencyId']");const o={id:r.id},n=await this.privatePostCoinbaseAccountsIdAddresses(this.extend(o,t)),d=this.safeString(n,"address"),h=this.safeString(n,"destination_tag");return{currency:e,address:this.checkAddress(d),tag:h,info:n}}handleErrors(e,t,i,s,a,r,n,c,d){if(400===e||404===e){if("{"===r[0]){const e=this.safeString(n,"message"),t=this.id+" "+e;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new o(t)}throw new o(this.id+" "+r)}}async request(e,t="public",i="GET",s={},a,r){const n=await this.fetch2(e,t,i,s,a,r);if("string"!=typeof n&&"message"in n)throw new o(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1),{BadSymbol:a,ExchangeError:r,ExchangeNotAvailable:o,ArgumentsRequired:n,InsufficientFunds:c,InvalidOrder:d,RateLimitExceeded:h,InvalidNonce:l,AuthenticationError:u,NotSupported:p}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"fcoin",name:"FCoin",countries:["CN"],rateLimit:2e3,userAgent:this.userAgents.chrome39,version:"v2",accounts:void 0,accountsById:void 0,hostname:"fcoin.com",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!1,fetchDepositAddress:!1,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!1,fetchOrders:!0,fetchTicker:!0,fetchTime:!0,fetchTrades:!0,fetchTradingLimits:!1,withdraw:!1},timeframes:{"1m":"M1","3m":"M3","5m":"M5","15m":"M15","30m":"M30","1h":"H1","1d":"D1","1w":"W1","1M":"MN"},urls:{logo:"https://user-images.githubusercontent.com/1294454/42244210-c8c42e1e-7f1c-11e8-8710-a5fb63b165c4.jpg",api:{public:"https://api.{hostname}",private:"https://api.{hostname}",market:"https://api.{hostname}",openapi:"https://www.{hostname}"},www:"https://www.fcoin.com",referral:"https://www.fcoin.com/i/Z5P7V",doc:"https://developer.fcoin.com",fees:"https://fcoinjp.zendesk.com/hc/en-us/articles/360018727371"},api:{openapi:{get:["symbols"]},market:{get:["ticker/{symbol}","depth/{level}/{symbol}","trades/{symbol}","candles/{timeframe}/{symbol}"]},public:{get:["symbols","currencies","server-time"]},private:{get:["accounts/balance","assets/accounts/balance","broker/otc/suborders","broker/otc/suborders/{id}","broker/otc/suborders/{id}/payments","broker/otc/users","broker/otc/users/me/balances","broker/otc/users/me/balance","broker/leveraged_accounts/account","broker/leveraged_accounts","orders","orders/{order_id}","orders/{order_id}/match-results"],post:["assets/accounts/assets-to-spot","accounts/spot-to-assets","broker/otc/assets/transfer/in","broker/otc/assets/transfer/out","broker/otc/suborders","broker/otc/suborders/{id}/pay_confirm","broker/otc/suborders/{id}/cancel","broker/leveraged/assets/transfer/in","broker/leveraged/assets/transfer/out","orders","orders/{order_id}/submit-cancel"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:-2e-4,taker:3e-4}},limits:{amount:{min:.01,max:1e5}},options:{createMarketBuyOrderRequiresPrice:!0,fetchMarketsMethod:"fetch_markets_from_open_api",limits:{"BTM/USDT":{amount:{min:.1,max:1e7}},"ETC/USDT":{amount:{min:.001,max:4e5}},"ETH/USDT":{amount:{min:.001,max:1e4}},"LTC/USDT":{amount:{min:.001,max:4e4}},"BCH/USDT":{amount:{min:.001,max:5e3}},"BTC/USDT":{amount:{min:.001,max:1e3}},"ICX/ETH":{amount:{min:.01,max:3e6}},"OMG/ETH":{amount:{min:.01,max:5e5}},"FT/USDT":{amount:{min:1,max:1e7}},"ZIL/ETH":{amount:{min:1,max:1e7}},"ZIP/ETH":{amount:{min:1,max:1e7}},"FT/BTC":{amount:{min:1,max:1e7}},"FT/ETH":{amount:{min:1,max:1e7}}}},exceptions:{400:p,401:u,405:p,429:h,1002:o,1016:c,2136:u,3008:d,6004:l,6005:u,40003:a},commonCurrencies:{DAG:"DAGX",PAI:"PCHAIN",MT:"Mariana Token"}})}async fetchMarkets(e={}){const t=this.safeString(this.options,"fetchMarketsMethod","fetch_markets_from_open_api");return await this[t](e)}async fetchMarketsFromOpenAPI(e={}){const t=await this.openapiGetSymbols(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"symbols",{}),a=Object.keys(s),r=[];for(let e=0;e<a.length;e++){const t=s[a[e]],i=this.safeString(t,"symbol"),o=this.safeString(t,"base_currency"),n=this.safeString(t,"quote_currency"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=c+"/"+d,l={price:this.safeInteger(t,"price_decimal"),amount:this.safeInteger(t,"amount_decimal")},u={amount:{min:this.safeFloat(t,"limit_amount_min"),max:this.safeFloat(t,"limit_amount_max")},price:{min:Math.pow(10,-l.price),max:Math.pow(10,l.price)},cost:{min:void 0,max:void 0}},p=this.safeValue(t,"tradeable",!1);r.push({id:i,symbol:h,base:c,quote:d,baseId:o,quoteId:n,active:p,precision:l,limits:u,info:t})}return r}async fetchMarketsFromAPI(e={}){const t=await this.publicGetSymbols(e),i=[],s=this.safeValue(t,"data");for(let e=0;e<s.length;e++){const t=s[e],a=this.safeString(t,"name"),r=this.safeString(t,"base_currency"),o=this.safeString(t,"quote_currency"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o),d=n+"/"+c,h={price:t.price_decimal,amount:t.amount_decimal};let l={price:{min:Math.pow(10,-h.price),max:Math.pow(10,h.price)}};const u=this.safeValue(t,"tradable",!1);d in this.options.limits&&(l=this.extend(this.options.limits[d],l)),i.push({id:a,symbol:d,base:n,quote:c,baseId:r,quoteId:o,active:u,precision:h,limits:l,info:t})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountsBalance(e),i={info:t},s=this.safeValue(t,"data");for(let e=0;e<s.length;e++){const t=s[e],a=this.safeString(t,"currency"),r=this.safeCurrencyCode(a),o=this.account();o.free=this.safeFloat(t,"available"),o.total=this.safeFloat(t,"balance"),o.used=this.safeFloat(t,"frozen"),i[r]=o}return this.parseBalance(i)}parseBidsAsks(e,t=0,i=1){const s=[],a=e.length,r=parseInt(a/2);for(let a=0;a<r;a++){const r=2*a,o=this.sum(r,t),n=this.sum(r,i);s.push([this.safeFloat(e,o),this.safeFloat(e,n)])}return s}async fetchOrderBook(e,t,i={}){if(await this.loadMarkets(),void 0!==t){if(20!==t&&150!==t)throw new r(this.id+" fetchOrderBook supports limit of 20 or 150. Other values are not accepted");t="L"+t.toString()}else t="L20";const s={symbol:this.marketId(e),level:t},a=await this.marketGetDepthLevelSymbol(this.extend(s,i)),o=this.safeValue(a,"data");return this.parseOrderBook(o,o.ts,"bids","asks",0,1)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.marketGetTickerSymbol(this.extend(s,t));return this.parseTicker(a.data,i)}parseTicker(e,t){let i=void 0;if(void 0===t){const s=this.safeString(e,"type");if(void 0!==s){const e=s.split(".")[1];i=this.safeSymbol(e,t)}}const s=e.ticker,a=this.safeFloat(s,0);return{symbol:i,timestamp:void 0,datetime:this.iso8601(void 0),high:this.safeFloat(s,7),low:this.safeFloat(s,8),bid:this.safeFloat(s,2),bidVolume:this.safeFloat(s,3),ask:this.safeFloat(s,4),askVolume:this.safeFloat(s,5),vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,9),quoteVolume:this.safeFloat(s,10),info:e}}parseTrade(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.safeInteger(e,"ts"),a=this.safeStringLower(e,"side"),r=this.safeString(e,"id"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let c=void 0;void 0!==o&&void 0!==n&&(c=n*o);return{id:r,info:e,timestamp:s,datetime:this.iso8601(s),symbol:i,type:void 0,order:void 0,side:a,takerOrMaker:void 0,price:o,amount:n,cost:c,fee:void 0}}async fetchTime(e={}){const t=await this.publicGetServerTime(e);return this.safeInteger(t,"data")}async fetchTrades(e,t,i=50,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id,limit:i};void 0!==t&&(r.timestamp=parseInt(t/1e3));const o=await this.marketGetTradesSymbol(this.extend(r,s));return this.parseTrades(o.data,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o={symbol:this.marketId(e),side:i,type:t};if("market"===t&&"buy"===i)if(this.options.createMarketBuyOrderRequiresPrice){if(void 0===a)throw new d(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");o.amount=this.costToPrecision(e,s*a)}else o.amount=this.costToPrecision(e,s);else o.amount=this.amountToPrecision(e,s);"limit"!==t&&"ioc"!==t&&"fok"!==t||(o.price=this.priceToPrecision(e,a));const n=await this.privatePostOrders(this.extend(o,r));return{info:n,id:n.data}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},a=await this.privatePostOrdersOrderIdSubmitCancel(this.extend(s,i)),r=this.parseOrder(a);return this.extend(r,{id:e,status:"canceled"})}parseOrderStatus(e){return this.safeString({submitted:"open",canceled:"canceled",partial_filled:"open",partial_canceled:"canceled",filled:"closed",pending_cancel:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"side"),a=this.parseOrderStatus(this.safeString(e,"state")),r=this.safeString(e,"symbol"),o=(t=this.safeMarket(r,t)).symbol,n=this.safeString(e,"type"),c=this.safeInteger(e,"created_at"),d=this.safeFloat(e,"amount"),h=this.safeFloat(e,"filled_amount");let l=void 0,u=this.safeFloat(e,"price"),p=this.safeFloat(e,"executed_value");void 0!==h&&(void 0!==d&&(l=d-h),void 0===p?void 0!==u&&(p=u*h):p>0&&h>0&&(u=p/h));let f=void 0,m=void 0;const v=this.safeFloat(e,"fees_income");return void 0!==v&&v>0?(void 0!==t&&(f="buy"===s?t.quote:t.base),m=-v):(m=this.safeFloat(e,"fill_fees"),void 0!==t&&(f="buy"===s?t.base:t.quote)),{info:e,id:i,clientOrderId:void 0,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:o,type:n,timeInForce:void 0,side:s,price:u,stopPrice:void 0,cost:p,amount:d,remaining:l,filled:h,average:void 0,status:a,fee:{cost:m,currency:f},trades:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},a=await this.privateGetOrdersOrderId(this.extend(s,i));return this.parseOrder(a.data)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({states:"submitted,partial_filled"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({states:"partial_canceled,filled"},s))}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchOrders() requires a `symbol` argument");await this.loadMarkets();const a=this.market(e),r={symbol:a.id,states:"submitted,partial_filled,partial_canceled,filled,canceled"};void 0!==i&&(r.limit=i);const o=await this.privateGetOrders(this.extend(r,s));return this.parseOrders(o.data,a,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,"id"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"base_vol")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e);void 0===s&&(s=20);const o={symbol:r.id,timeframe:this.timeframes[t],limit:s};if(void 0!==i){const e=parseInt(i/1e3),a=s*this.parseTimeframe(t);o.before=this.sum(e,a)-1}const n=await this.marketGetCandlesTimeframeSymbol(this.extend(o,a)),c=this.safeValue(n,"data",[]);return this.parseOHLCVs(c,r,t,i,s)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o="/";const n="openapi"===t,c="private"===t;o+=n?t+"/":"",o+=this.version+"/",o+=c||n?"":t+"/",o+=this.implodeParams(e,s);let d=this.omit(s,this.extractParams(e)),h=this.implodeParams(this.urls.api[t],{hostname:this.hostname});if(h+=o,c){this.checkRequiredCredentials();const e=this.nonce().toString();d=this.keysort(d),"GET"===i&&Object.keys(d).length&&(h+="?"+this.rawencode(d));let t=i+h+e;"POST"===i&&Object.keys(d).length&&(r=this.json(d),t+=this.urlencode(d));const s=this.stringToBase64(t);let o=this.hmac(s,this.encode(this.secret),"sha1","binary");o=this.decode(this.stringToBase64(o)),a={"FC-ACCESS-KEY":this.apiKey,"FC-ACCESS-SIGNATURE":o,"FC-ACCESS-TIMESTAMP":e,"Content-Type":"application/json"}}else Object.keys(d).length&&(h+="?"+this.urlencode(d));return{url:h,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,o,n,c,d){if(void 0===n)return;const h=this.safeString(n,"status");if("0"!==h&&"ok"!==h){const e=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions,h,e),new r(e)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ExchangeNotAvailable:r,OnMaintenance:o,ArgumentsRequired:n,BadRequest:c,AccountSuspended:d,InvalidAddress:h,PermissionDenied:l,DDoSProtection:u,InsufficientFunds:p,InvalidNonce:f,CancelPending:m,InvalidOrder:v,OrderNotFound:y,AuthenticationError:g,RequestTimeout:b,NotSupported:w,BadSymbol:k}=i(0),{TICK_SIZE:x,TRUNCATE:T}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"okex",name:"OKEX",countries:["CN","US"],version:"v3",rateLimit:1e3,pro:!0,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!1,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchOrderTrades:!0,fetchTime:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,futures:!0,withdraw:!0},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800","1M":"2678400","3M":"8035200","6M":"16070400","1y":"31536000"},hostname:"okex.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/32552768-0d6dd3c6-c4a6-11e7-90f8-c043b64756a7.jpg",api:{rest:"https://www.{hostname}"},www:"https://www.okex.com",doc:"https://www.okex.com/docs/en/",fees:"https://www.okex.com/pages/products/fees.html",referral:"https://www.okex.com/join/1888677",test:{rest:"https://testnet.okex.com"}},api:{general:{get:["time"]},account:{get:["wallet","sub-account","asset-valuation","wallet/{currency}","withdrawal/history","withdrawal/history/{currency}","ledger","deposit/address","deposit/history","deposit/history/{currency}","currencies","withdrawal/fee"],post:["transfer","withdrawal"]},spot:{get:["accounts","accounts/{currency}","accounts/{currency}/ledger","orders","orders_pending","orders/{order_id}","orders/{client_oid}","trade_fee","fills","algo","instruments","instruments/{instrument_id}/book","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles","instruments/{instrument_id}/history/candles"],post:["order_algo","orders","batch_orders","cancel_orders/{order_id}","cancel_orders/{client_oid}","cancel_batch_algos","cancel_batch_orders"]},margin:{get:["accounts","accounts/{instrument_id}","accounts/{instrument_id}/ledger","accounts/availability","accounts/{instrument_id}/availability","accounts/borrowed","accounts/{instrument_id}/borrowed","orders","accounts/{instrument_id}/leverage","orders/{order_id}","orders/{client_oid}","orders_pending","fills","instruments/{instrument_id}/mark_price"],post:["accounts/borrow","accounts/repayment","orders","batch_orders","cancel_orders","cancel_orders/{order_id}","cancel_orders/{client_oid}","cancel_batch_orders","accounts/{instrument_id}/leverage"]},futures:{get:["position","{instrument_id}/position","accounts","accounts/{underlying}","accounts/{underlying}/leverage","accounts/{underlying}/ledger","order_algo/{instrument_id}","orders/{instrument_id}","orders/{instrument_id}/{order_id}","orders/{instrument_id}/{client_oid}","fills","trade_fee","accounts/{instrument_id}/holds","order_algo/{instrument_id}","instruments","instruments/{instrument_id}/book","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles","instruments/{instrument_id}/history/candles","instruments/{instrument_id}/index","rate","instruments/{instrument_id}/estimated_price","instruments/{instrument_id}/open_interest","instruments/{instrument_id}/price_limit","instruments/{instrument_id}/mark_price","instruments/{instrument_id}/liquidation"],post:["accounts/{underlying}/leverage","order","orders","cancel_order/{instrument_id}/{order_id}","cancel_order/{instrument_id}/{client_oid}","cancel_batch_orders/{instrument_id}","accounts/margin_mode","close_position","cancel_all","order_algo","cancel_algos"]},swap:{get:["position","{instrument_id}/position","accounts","{instrument_id}/accounts","accounts/{instrument_id}/settings","accounts/{instrument_id}/ledger","orders/{instrument_id}","orders/{instrument_id}/{order_id}","orders/{instrument_id}/{client_oid}","fills","accounts/{instrument_id}/holds","trade_fee","order_algo/{instrument_id}","instruments","instruments/{instrument_id}/depth","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles","instruments/{instrument_id}/history/candles","instruments/{instrument_id}/index","rate","instruments/{instrument_id}/open_interest","instruments/{instrument_id}/price_limit","instruments/{instrument_id}/liquidation","instruments/{instrument_id}/funding_time","instruments/{instrument_id}/mark_price","instruments/{instrument_id}/historical_funding_rate"],post:["accounts/{instrument_id}/leverage","order","orders","cancel_order/{instrument_id}/{order_id}","cancel_order/{instrument_id}/{client_oid}","cancel_batch_orders/{instrument_id}","order_algo","cancel_algos"]},option:{get:["accounts","position","{underlying}/position","accounts/{underlying}","orders/{underlying}","fills/{underlying}","accounts/{underlying}/ledger","trade_fee","orders/{underlying}/{order_id}","orders/{underlying}/{client_oid}","underlying","instruments/{underlying}","instruments/{underlying}/summary","instruments/{underlying}/summary/{instrument_id}","instruments/{instrument_id}/book","instruments/{instrument_id}/trades","instruments/{instrument_id}/ticker","instruments/{instrument_id}/candles"],post:["order","orders","cancel_order/{underlying}/{order_id}","cancel_order/{underlying}/{client_oid}","cancel_batch_orders/{underlying}","amend_order/{underlying}","amend_batch_orders/{underlying}"]},index:{get:["{instrument_id}/constituents"]}},fees:{trading:{taker:.0015,maker:.001},spot:{taker:.0015,maker:.001},futures:{taker:5e-4,maker:2e-4},swap:{taker:75e-5,maker:2e-4}},requiredCredentials:{apiKey:!0,secret:!0,password:!0},exceptions:{exact:{1:a,"failure to get a peer from the ring-balancer":r,"Server is busy, please try again.":r,"An unexpected error occurred":a,"System error":a,4010:l,4001:a,4002:a,30001:g,30002:g,30003:g,30004:g,30005:f,30006:g,30007:c,30008:b,30009:a,30010:g,30011:l,30012:g,30013:g,30014:u,30015:g,30016:a,30017:a,30018:a,30019:r,30020:c,30021:c,30022:l,30023:c,30024:k,30025:c,30026:u,30027:g,30028:l,30029:d,30030:r,30031:c,30032:k,30033:c,30034:a,30035:a,30036:a,30037:r,30038:o,30044:b,32001:d,32002:l,32003:m,32004:a,32005:v,32006:v,32007:v,32008:v,32009:v,32010:a,32011:a,32012:a,32013:a,32014:a,32015:a,32016:a,32017:a,32018:a,32019:a,32020:a,32021:a,32022:a,32023:a,32024:a,32025:a,32026:a,32027:a,32028:a,32029:a,32030:v,32031:n,32038:g,32040:a,32044:a,32045:a,32046:a,32047:a,32048:v,32049:a,32050:v,32051:v,32052:a,32053:a,32057:a,32054:a,32055:v,32056:a,32058:a,32059:v,32060:v,32061:v,32062:v,32063:v,32064:a,32065:a,32066:a,32067:a,32068:a,32069:a,32070:a,32071:a,32072:a,32073:a,32074:a,32075:a,32076:a,32077:a,32078:a,32079:a,32080:a,32083:a,33001:l,33002:d,33003:p,33004:a,33005:a,33006:a,33007:a,33008:p,33009:a,33010:a,33011:a,33012:a,33013:v,33014:y,33015:v,33016:a,33017:p,33018:a,33020:a,33021:c,33022:v,33023:a,33024:v,33025:v,33026:a,33027:v,33028:v,33029:v,33034:a,33035:a,33036:a,33037:a,33038:a,33039:a,33040:a,33041:a,33042:a,33043:a,33044:a,33045:a,33046:a,33047:a,33048:a,33049:a,33050:a,33051:a,33059:c,33060:c,33061:a,33062:a,33063:a,33064:a,33065:a,33085:v,21009:a,34001:l,34002:h,34003:a,34004:a,34005:a,34006:a,34007:a,34008:p,34009:a,34010:a,34011:a,34012:a,34013:a,34014:a,34015:a,34016:l,34017:d,34018:g,34019:l,34020:l,34021:h,34022:a,34023:l,34026:a,34036:a,34037:a,34038:a,34039:a,35001:a,35002:a,35003:a,35004:a,35005:g,35008:v,35010:v,35012:v,35014:v,35015:v,35017:a,35019:v,35020:v,35021:v,35022:c,35024:c,35025:p,35026:c,35029:y,35030:v,35031:v,35032:a,35037:a,35039:a,35040:v,35044:a,35046:p,35047:p,35048:a,35049:v,35050:v,35052:p,35053:a,35055:p,35057:a,35058:a,35059:c,35060:c,35061:c,35062:v,35063:v,35064:v,35066:v,35067:v,35068:v,35069:v,35070:v,35071:v,35072:v,35073:v,35074:v,35075:v,35076:v,35077:v,35078:v,35079:v,35080:v,35081:v,35082:v,35083:v,35084:v,35085:v,35086:v,35087:v,35088:v,35089:v,35090:a,35091:a,35092:a,35093:a,35094:a,35095:c,35096:a,35097:a,35098:a,35099:a,36001:c,36002:c,36005:a,36101:g,36102:l,36103:l,36104:l,36105:l,36106:l,36107:l,36108:p,36109:l,36201:l,36202:l,36203:v,36204:a,36205:c,36206:c,36207:v,36208:v,36209:v,36210:v,36211:v,36212:v,36213:v,36214:a,36216:y,36217:v,36218:v,36219:v,36220:v,36221:v,36222:v,36223:v,36224:v,36225:v,36226:v,36227:v,36228:v,36229:v,36230:v},broad:{}},precisionMode:x,options:{fetchOHLCV:{type:"Candles"},createMarketBuyOrderRequiresPrice:!0,fetchMarkets:["spot","futures","swap","option"],defaultType:"spot",auth:{time:"public",currencies:"private",instruments:"public",rate:"public","{instrument_id}/constituents":"public"}},commonCurrencies:{AE:"AET",BOX:"DefiBox",HOT:"Hydro Protocol",HSR:"HC",MAG:"Maggie",YOYO:"YOYOW",WIN:"WinToken"}})}async fetchTime(e={}){const t=await this.generalGetTime(e);return this.parse8601(this.safeString(t,"iso"))}async fetchMarkets(e={}){const t=this.safeValue(this.options,"fetchMarkets");let i=[];for(let s=0;s<t.length;s++){const a=await this.fetchMarketsByType(t[s],e);i=this.arrayConcat(i,a)}return i}parseMarkets(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.parseMarket(e[i]));return t}parseMarket(e){const t=this.safeString(e,"instrument_id");let i="spot",s=!0,a=!1,r=!1,o=!1,n=this.safeString(e,"base_currency"),c=this.safeString(e,"quote_currency");if(void 0!==this.safeFloat(e,"contract_val"))if("option_type"in e){i="option",s=!1,o=!0;const t=this.safeString(e,"underlying").split("-");n=this.safeString(t,0),c=this.safeString(t,1)}else{i="swap",s=!1,r=!0;void 0!==this.safeString(e,"alias")&&(r=!1,a=!0,i="futures",n=this.safeString(e,"underlying_index"))}const d=this.safeCurrencyCode(n),h=this.safeCurrencyCode(c),l=s?d+"/"+h:t,u=this.safeFloat2(e,"lot_size","trade_increment"),p={amount:this.safeFloat(e,"size_increment",u),price:this.safeFloat(e,"tick_size")},f=this.safeFloat2(e,"min_size","base_min_size"),m=this.safeValue2(this.fees,i,"trading",{});return this.extend(m,{id:t,symbol:l,base:d,quote:h,baseId:n,quoteId:c,info:e,type:i,spot:s,futures:a,swap:r,option:o,active:!0,precision:p,limits:{amount:{min:f,max:void 0},price:{min:p.price,max:void 0},cost:{min:p.price,max:void 0}}})}async fetchMarketsByType(e,t={}){if("option"===e){const e=await this.optionGetUnderlying(t);let i=[];for(let t=0;t<e.length;t++){const s=await this.optionGetInstrumentsUnderlying({underlying:e[t]});i=this.arrayConcat(i,s)}return this.parseMarkets(i)}if("spot"===e||"futures"===e||"swap"===e){const i=e+"GetInstruments",s=await this[i](t);return this.parseMarkets(s)}throw new w(this.id+" fetchMarketsByType does not support market type "+e)}async fetchCurrencies(e={}){const t=await this.accountGetCurrencies(e),i={};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"currency"),r=this.safeCurrencyCode(a),o=8,n=this.safeString(s,"name"),c=this.safeInteger(s,"can_deposit"),d=this.safeInteger(s,"can_withdraw"),h=!(!c||!d);i[r]={id:a,code:r,info:s,type:void 0,name:n,active:h,fee:void 0,precision:o,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(s,"min_withdrawal"),max:void 0}}}}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e);let a=s.type+"GetInstrumentsInstrumentId";a+="swap"===s.type?"Depth":"Book";const r={instrument_id:s.id};void 0!==t&&(r.size=t);const o=await this[a](this.extend(r,i)),n=this.parse8601(this.safeString(o,"timestamp"));return this.parseOrderBook(o,n)}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"timestamp"));let s=void 0;const a=this.safeString(e,"instrument_id");if(a in this.markets_by_id)s=(t=this.markets_by_id[a]).symbol;else if(void 0!==a){const e=a.split("-");if(2===e.length){const[t,i]=e;s=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}else s=a}void 0===s&&void 0!==t&&(s=t.symbol);const r=this.safeFloat(e,"last"),o=this.safeFloat(e,"open_24h");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high_24h"),low:this.safeFloat(e,"low_24h"),bid:this.safeFloat(e,"best_bid"),bidVolume:this.safeFloat(e,"best_bid_size"),ask:this.safeFloat(e,"best_ask"),askVolume:this.safeFloat(e,"best_ask_size"),vwap:void 0,open:o,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"base_volume_24h"),quoteVolume:this.safeFloat(e,"quote_volume_24h"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=i.type+"GetInstrumentsInstrumentIdTicker",a={instrument_id:i.id},r=await this[s](this.extend(a,t));return this.parseTicker(r)}async fetchTickersByType(e,t,i={}){await this.loadMarkets();const s=e+"GetInstrumentsTicker",a=await this[s](i),r={};for(let e=0;e<a.length;e++){const t=this.parseTicker(a[e]);r[t.symbol]=t}return this.filterByArray(r,"symbol",t)}async fetchTickers(e,t={}){const i=this.safeString2(this.options,"fetchTickers","defaultType"),s=this.safeString(t,"type",i);return await this.fetchTickersByType(s,e,this.omit(t,"type"))}parseTrade(e,t){let i=void 0;const s=this.safeString(e,"instrument_id");let a=void 0,r=void 0;if(s in this.markets_by_id)i=(t=this.markets_by_id[s]).symbol,a=t.base,r=t.quote;else if(void 0!==s){const e=s.split("-");if(2===e.length){const[t,s]=e;a=this.safeCurrencyCode(t),r=this.safeCurrencyCode(s),i=a+"/"+r}else i=s}void 0===i&&void 0!==t&&(i=t.symbol,a=t.base,r=t.quote);const o=this.parse8601(this.safeString2(e,"timestamp","created_at")),n=this.safeFloat(e,"price");let c=this.safeFloat2(e,"size","qty");c=this.safeFloat(e,"order_qty",c);let d=this.safeString2(e,"exec_type","liquidity");"M"===d?d="maker":"T"===d&&(d="taker");const h=this.safeString(e,"side");let l=void 0;void 0!==c&&void 0!==n&&(l=c*n);const u=this.safeFloat(e,"fee");let p=void 0;if(void 0!==u){p={cost:-u,currency:"buy"===h?a:r}}const f=this.safeString(e,"order_id");return{info:e,timestamp:o,datetime:this.iso8601(o),symbol:i,id:this.safeString2(e,"trade_id","ledger_id"),order:f,type:void 0,takerOrMaker:d,side:h,price:n,amount:c,cost:l,fee:p}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r=a.type+"GetInstrumentsInstrumentIdTrades";(void 0===i||i>100)&&(i=100);const o={instrument_id:a.id,limit:i},n=await this[r](this.extend(o,s));return this.parseTrades(n,a,t,i)}parseOHLCV(e,t){if(Array.isArray(e)){const t=e.length>6?6:5;let i=this.safeValue(e,0);return"string"==typeof i&&(i=this.parse8601(i)),[i,this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,t)]}return[this.parse8601(this.safeString(e,"time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o=this.parseTimeframe(t),n={instrument_id:r.id,granularity:this.timeframes[t]},c=this.safeValue(this.options,"fetchOHLCV",{}),d=this.safeString(c,"type","Candles"),h=this.safeString(a,"type",d);a=this.omit(a,"type");const l=r.type+"GetInstrumentsInstrumentId"+h;if("Candles"===h){if(void 0!==i)void 0!==s&&(n.end=this.iso8601(this.sum(i,s*o*1e3))),n.start=this.iso8601(i);else if(void 0!==s){const e=this.milliseconds();n.start=this.iso8601(e-s*o*1e3),n.end=this.iso8601(e)}}else if("HistoryCandles"===h){if(r.option)throw new w(this.id+" fetchOHLCV does not have "+h+" for "+r.type+" markets");if(void 0!==i)void 0===s&&(s=300),n.start=this.iso8601(this.sum(i,s*o*1e3)),n.end=this.iso8601(i);else if(void 0!==s){const e=this.milliseconds();n.end=this.iso8601(e-s*o*1e3),n.start=this.iso8601(e)}}const u=await this[l](this.extend(n,a));return this.parseOHLCVs(u,r,t,i,s)}parseAccountBalance(e){const t={info:e};for(let i=0;i<e.length;i++){const s=e[i],a=this.safeString(s,"currency"),r=this.safeCurrencyCode(a),o=this.account();o.total=this.safeFloat(s,"balance"),o.used=this.safeFloat(s,"hold"),o.free=this.safeFloat(s,"available"),t[r]=o}return this.parseBalance(t)}parseMarginBalance(e){const t={info:e};for(let i=0;i<e.length;i++){const s=e[i],a=this.safeString(s,"instrument_id"),r=this.safeValue(this.markets_by_id,a);let o=void 0;if(void 0===r){const[e,t]=a.split("-");o=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}else o=r.symbol;const n=this.omit(s,["instrument_id","liquidation_price","product_id","risk_rate","margin_ratio","maint_margin_ratio","tiers"]),c=Object.keys(n),d={};for(let e=0;e<c.length;e++){const t=c[e],i=s[t];if(!(t.indexOf(":")>=0))throw new w(this.id+" margin balance response format has changed!");{const e=t.split(":")[1],s=this.safeCurrencyCode(e),a=this.account();a.total=this.safeFloat(i,"balance"),a.used=this.safeFloat(i,"hold"),a.free=this.safeFloat(i,"available"),d[s]=a}}t[o]=this.parseBalance(d)}return t}parseFuturesBalance(e){const t={info:e},i=this.safeValue(e,"info",{}),s=Object.keys(i);for(let e=0;e<s.length;e++){const a=s[e],r=this.safeCurrencyCode(a),o=this.safeValue(i,a,{}),n=this.account(),c=this.safeFloat(o,"total_avail_balance");if("fixed"===this.safeString(o,"margin_mode")){const e=this.safeValue(o,"contracts",[]);let t=c;for(let i=0;i<e.length;i++){const s=e[i],a=this.safeFloat(s,"fixed_balance"),r=this.safeFloat(s,"realized_pnl"),o=this.safeFloat(s,"margin_frozen"),n=this.safeFloat(s,"margin_for_unfilled"),c=this.sum(a,r)-o-n;t=this.sum(t,c)}n.free=t}else{const e=this.safeFloat(o,"realized_pnl"),t=this.safeFloat(o,"unrealized_pnl"),i=this.safeFloat(o,"margin_frozen"),s=this.safeFloat(o,"margin_for_unfilled");n.free=this.sum(c,e,t)-i-s}n.total=this.safeFloat(o,"equity"),t[r]=n}return this.parseBalance(t)}parseSwapBalance(e){const t={info:e},i=this.safeValue(e,"info",[]);for(let e=0;e<i.length;e++){const s=i[e],a=this.safeString(s,"instrument_id");let r=a;a in this.markets_by_id&&(r=this.markets_by_id[a].symbol);const o=this.account();o.total=this.safeFloat(s,"equity"),o.free=this.safeFloat(s,"total_avail_balance"),t[r]=o}return this.parseBalance(t)}async fetchBalance(e={}){const t=this.safeString2(this.options,"fetchBalance","defaultType"),i=this.safeString(e,"type",t);if(void 0===i)throw new n(this.id+" fetchBalance requires a type parameter (one of 'account', 'spot', 'margin', 'futures', 'swap')");await this.loadMarkets();const s=i+"Get"+("account"===i?"Wallet":"Accounts"),a=this.omit(e,"type"),r=await this[s](a);return this.parseBalanceByType(i,r)}parseBalanceByType(e,t){if("account"===e||"spot"===e)return this.parseAccountBalance(t);if("margin"===e)return this.parseMarginBalance(t);if("futures"===e)return this.parseFuturesBalance(t);if("swap"===e)return this.parseSwapBalance(t);throw new w(this.id+" fetchBalance does not support the '"+e+"' type (the type must be one of 'account', 'spot', 'margin', 'futures', 'swap')")}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e);let n={instrument_id:o.id};const c=this.safeString2(r,"client_oid","clientOrderId");void 0!==c&&(n.client_oid=c,r=this.omit(r,["client_oid","clientOrderId"]));let d=void 0;if(o.futures||o.swap){const i=o.futures?this.numberToString(s):this.amountToPrecision(e,s);n=this.extend(n,{type:t,size:i});const c=this.safeString(r,"order_type");"market"===t||"4"===c?n.order_type="4":n.price=this.priceToPrecision(e,a),o.futures&&(n.leverage="10"),d=o.type+"PostOrder"}else{const c=this.safeString(r,"margin_trading","1");if(n=this.extend(n,{side:i,type:t,margin_trading:c}),"limit"===t)n.price=this.priceToPrecision(e,a),n.size=this.amountToPrecision(e,s);else if("market"===t)if("buy"===i){let e=this.safeFloat(r,"notional");if(this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){if(void 0!==a)void 0===e&&(e=s*a);else if(void 0===e)throw new v(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'notional' extra parameter (the exchange-specific behaviour)")}else e=void 0===e?s:e;const t=o.precision.price;n.notional=this.decimalToPrecision(e,T,t,this.precisionMode)}else n.size=this.amountToPrecision(e,s);d="2"===c?"marginPostOrders":"spotPostOrders"}const h=await this[d](this.extend(n,r)),l=this.parseOrder(h,o);return this.extend(l,{type:t,side:i})}async cancelOrder(e,t,i={}){if(void 0===t)throw new n(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t);let a=void 0;if(s.futures||s.swap)a=s.type;else{const e=this.safeString2(this.options,"cancelOrder","defaultType",s.type);a=this.safeString(i,"type",e)}if(void 0===a)throw new n(this.id+" cancelOrder requires a type parameter (one of 'spot', 'margin', 'futures', 'swap').");let r=a+"PostCancelOrder";const o={instrument_id:s.id};s.futures||s.swap?r+="InstrumentId":r+="s";const c=this.safeString2(i,"client_oid","clientOrderId");void 0!==c?(r+="ClientOid",o.client_oid=c):(r+="OrderId",o.order_id=e);const d=this.omit(i,["type","client_oid","clientOrderId"]),h=await this[r](this.extend(o,d)),l="result"in h?h:this.safeValue(h,s.id,{});return this.parseOrder(l,s)}parseOrderStatus(e){return this.safeString({"-2":"failed","-1":"canceled",0:"open",1:"open",2:"closed",3:"open",4:"canceled"},e,e)}parseOrderSide(e){return this.safeString({1:"buy",2:"sell",3:"sell",4:"buy"},e,e)}parseOrder(e,t){const i=this.safeString(e,"order_id"),s=this.parse8601(this.safeString(e,"timestamp"));let a=this.safeString(e,"side");const r=this.safeString(e,"type");"buy"!==a&&"sell"!==a&&(a=this.parseOrderSide(r));let o=void 0;const n=this.safeString(e,"instrument_id");o=n in this.markets_by_id?(t=this.markets_by_id[n]).symbol:n,void 0!==t&&void 0===o&&(o=t.symbol);let c=this.safeFloat(e,"size");const d=this.safeFloat2(e,"filled_size","filled_qty");let h=void 0;void 0!==c&&void 0!==d&&(c=Math.max(c,d),h=Math.max(0,c-d)),"market"===r&&(h=0);let l=this.safeFloat2(e,"filled_notional","funds");const u=this.safeFloat(e,"price");let p=this.safeFloat(e,"price_avg");void 0===l?void 0!==d&&void 0!==p&&(l=p*d):void 0===p&&void 0!==d&&d>0&&(p=l/d);const f=this.parseOrderStatus(this.safeString(e,"state")),m=this.safeFloat(e,"fee");let v=void 0;if(void 0!==m){v={cost:m,currency:void 0}}let y=this.safeString(e,"client_oid");void 0!==y&&y.length<1&&(y=void 0);const g=this.safeFloat(e,"trigger_price");return{info:e,id:i,clientOrderId:y,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:o,type:r,timeInForce:void 0,side:a,price:u,stopPrice:g,average:p,cost:l,amount:c,filled:d,remaining:h,status:f,fee:v,trades:void 0}}async fetchOrder(e,t,i={}){if(void 0===t)throw new n(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a=this.safeString2(this.options,"fetchOrder","defaultType",s.type),r=this.safeString(i,"type",a);if(void 0===r)throw new n(this.id+" fetchOrder requires a type parameter (one of 'spot', 'margin', 'futures', 'swap').");let o=r+"GetOrders"+(s.futures||s.swap?"InstrumentId":"");const c={instrument_id:s.id},d=this.safeString(i,"client_oid");void 0!==d?(o+="ClientOid",c.client_oid=d):(o+="OrderId",c.order_id=e);const h=this.omit(i,"type"),l=await this[o](this.extend(c,h));return this.parseOrder(l)}async fetchOrdersByState(e,t,i,s,a={}){if(void 0===t)throw new n(this.id+" fetchOrdersByState requires a symbol argument");await this.loadMarkets();const r=this.market(t);let o=void 0;if(r.futures||r.swap)o=r.type;else{const e=this.safeString2(this.options,"fetchOrder","defaultType",r.type);o=this.safeString(a,"type",e)}if(void 0===o)throw new n(this.id+" fetchOrder requires a type parameter (one of 'spot', 'margin', 'futures', 'swap').");const c={instrument_id:r.id,state:e};let d=o+"GetOrders";(r.futures||r.swap)&&(d+="InstrumentId");const h=this.omit(a,"type"),l=await this[d](this.extend(c,h));let u=void 0;if(r.swap||r.futures)u=this.safeValue(l,"order_info",[]);else{u=l;const e=l.length;if(e<1)return[];if(e>1){void 0!==this.safeValue(l[1],"before")&&(u=l[0])}}return this.parseOrders(u,r,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByState("6",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByState("7",e,t,i,s)}parseDepositAddresses(e){const t={};for(let i=0;i<e.length;i++){const s=this.parseDepositAddress(e[i]);t[s.currency]=s}return t}parseDepositAddress(e,t){const i=this.safeString(e,"address");let s=this.safeString2(e,"tag","payment_id");s=this.safeString(e,"memo",s);const a=this.safeString(e,"currency"),r=this.safeCurrencyCode(a);return this.checkAddress(i),{currency:r,address:i,tag:s,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.accountGetDepositAddress(this.extend(i,t)),a=this.parseDepositAddresses(s),r=this.safeValue(a,e);if(void 0===r)throw new h(this.id+" fetchDepositAddress cannot return nonexistent addresses, you should create withdrawal addresses with the exchange website first");return r}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const o=this.currency(e);s&&(i=i+":"+s);const c=this.safeString(r,"fee");if(void 0===c)throw new n(this.id+" withdraw() requires a `fee` string parameter, network transaction fee must be  0. Withdrawals to OKCoin or OKEx are fee-free, please set '0'. Withdrawing to external digital asset address requires network transaction fee.");const d={currency:o.id,to_address:i,destination:"4",amount:this.numberToString(t),fee:c};"password"in r?d.trade_pwd=r.password:"trade_pwd"in r?d.trade_pwd=r.trade_pwd:this.password&&(d.trade_pwd=this.password);const h=this.omit(r,["fee","password","trade_pwd"]);if(!("trade_pwd"in d))throw new a(this.id+" withdraw() requires this.password set on the exchange instance or a password / trade_pwd parameter");const l=await this.accountPostWithdrawal(this.extend(d,h));return{info:l,id:this.safeString(l,"withdrawal_id")}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const a={};let r="accountGetDepositHistory",o=void 0;void 0!==e&&(o=this.currency(e),a.currency=o.id,r+="Currency");const n=await this[r](this.extend(a,s));return this.parseTransactions(n,o,t,i,s)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const a={};let r="accountGetWithdrawalHistory",o=void 0;void 0!==e&&(o=this.currency(e),a.currency=o.id,r+="Currency");const n=await this[r](this.extend(a,s));return this.parseTransactions(n,o,t,i,s)}parseTransactionStatus(e){return this.safeString({"-3":"pending","-2":"canceled","-1":"failed",0:"pending",1:"pending",2:"ok",3:"pending",4:"pending",5:"pending"},e,e)}parseTransaction(e,t){let i=void 0,s=void 0,a=void 0;const r=this.safeString(e,"withdrawal_id"),o=this.safeString(e,"from"),n=this.safeString(e,"to");void 0!==r?(i="withdrawal",s=r,a=n):(s=this.safeString2(e,"payment_id","deposit_id"),i="deposit",a=n);const c=this.safeString(e,"currency"),d=this.safeCurrencyCode(c),h=this.safeFloat(e,"amount"),l=this.parseTransactionStatus(this.safeString(e,"status")),u=this.safeString(e,"txid"),p=this.parse8601(this.safeString(e,"timestamp"));let f=void 0;if("deposit"===i)f=0;else if(void 0!==c){const t=this.safeString(e,"fee");if(void 0!==t){const e=c.toLowerCase(),i=t.replace(e,"");f=parseFloat(i)}}return{info:e,id:s,currency:d,amount:h,addressFrom:o,addressTo:n,address:a,tagFrom:void 0,tagTo:void 0,tag:void 0,status:l,type:i,updated:void 0,txid:u,timestamp:p,datetime:this.iso8601(p),fee:{currency:d,cost:f}}}parseMyTrade(e,t){const i=this.safeValue(e,1),s=this.safeValue(e,0),a=this.safeString(s,"instrument_id");if(a!==this.safeString(i,"instrument_id"))throw new w(this.id+" parseMyTrade() received unrecognized response format, differing instrument_ids in one fill, the exchange API might have changed, paste your verbose output: https://github.com/ccxt/ccxt/wiki/FAQ#what-is-required-to-get-help");const r=a,o=(t=this.safeMarket(r,t)).symbol,n=t.quoteId;let c=void 0,d=void 0,h=void 0;let l=void 0;this.safeString(i,"currency")===n?(c=this.safeString(s,"side"),d=this.safeFloat(s,"size"),h=this.safeFloat(i,"size"),l=this.safeString(s,"currency")):(c=this.safeString(i,"side"),d=this.safeFloat(i,"size"),h=this.safeFloat(s,"size"),l=this.safeString(i,"currency"));const u=this.safeString(i,"trade_id"),p=this.safeFloat(i,"price"),f=this.safeFloat(s,"fee"),m=this.safeFloat(i,"fee"),v=this.safeCurrencyCode(this.safeString(s,"currency")),y=this.safeCurrencyCode(this.safeString(i,"currency"));let g=void 0,b=void 0;void 0!==f&&0!==f?void 0!==m&&0!==m?b=[{cost:-f,currency:v},{cost:-m,currency:y}]:g={cost:-f,currency:v}:g=void 0!==m&&0!==m?{cost:-m,currency:y}:{cost:0,currency:this.safeCurrencyCode(l)};const k=this.parse8601(this.safeString2(i,"timestamp","created_at"));let x=this.safeString2(i,"exec_type","liquidity");"M"===x?x="maker":"T"===x&&(x="taker");const T=this.safeString(i,"order_id"),O={info:e,timestamp:k,datetime:this.iso8601(k),symbol:o,id:u,order:T,type:void 0,takerOrMaker:x,side:c,price:p,amount:d,cost:h,fee:g};return void 0!==b&&(O.fees=b),O}parseMyTrades(e,t,i,s,a={}){const r=this.groupBy(e,"trade_id"),o=Object.keys(r),n=[];for(let e=0;e<o.length;e++){const t=r[o[e]];if(2===t.length){const e=this.parseMyTrade(t);n.push(e)}}let c=void 0;return void 0!==t&&(c=t.symbol),this.filterBySymbolSinceLimit(n,c,i,s)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const a=this.market(e);void 0!==i&&i>100&&(i=100);const r={instrument_id:a.id},o=this.safeString2(this.options,"fetchMyTrades","defaultType"),c=this.safeString(s,"type",o),d=this.omit(s,"type"),h=c+"GetFills",l=await this[h](this.extend(r,d));return this.parseMyTrades(l,a,t,i,s)}async fetchOrderTrades(e,t,i,s,a={}){const r={order_id:e};return await this.fetchMyTrades(t,i,s,this.extend(r,a))}async fetchPosition(e,t={}){await this.loadMarkets();const i=this.market(e);let s=void 0;const a={instrument_id:i.id},r=i.type;if("futures"===r||"swap"===r)s=r+"GetInstrumentIdPosition";else{if("option"!==r)throw new w(this.id+" fetchPosition() does not support "+r+" market "+e+", supported market types are futures, swap or option");if(void 0===this.safeString(t,"underlying"))throw new n(this.id+" fetchPosition() requires an underlying parameter for "+r+" market "+e);s=r+"GetUnderlyingPosition"}return await this[s](this.extend(a,t))}async fetchPositions(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r=this.safeString2(this.options,"fetchPositions","defaultType"),o=this.safeString(s,"type",r);if("futures"===o||"swap"===o)a=o+"GetPosition";else{if("option"!==o)throw new w(this.id+" fetchPositions() does not support "+o+" markets, supported market types are futures, swap or option");if(void 0===this.safeString(s,"underlying"))throw new n(this.id+" fetchPositions() requires an underlying parameter for "+o+" markets");a=o+"GetUnderlyingPosition"}s=this.omit(s,"type");return await this[a](s)}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const a=this.safeString2(this.options,"fetchLedger","defaultType"),r=this.safeString(s,"type",a),o=this.omit(s,"type"),c="account"===r?"":"Accounts";let d="";const h={};void 0!==i&&(h.limit=i);let l=void 0;if("spot"===r||"futures"===r){if(void 0===e)throw new n(this.id+" fetchLedger requires a currency code argument for '"+r+"' markets");d="Currency",l=this.currency(e),h.currency=l.id}else if("margin"===r||"swap"===r){if(void 0===e)throw new n(this.id+" fetchLedger requires a code argument (a market symbol) for '"+r+"' markets");d="InstrumentId";const t=this.market(e);l=this.currency(t.base),h.instrument_id=t.id}else{if("account"!==r)throw new w(this.id+" fetchLedger does not support the '"+r+"' type (the type must be one of 'account', 'spot', 'margin', 'futures', 'swap')");void 0!==e&&(l=this.currency(e),h.currency=l.id)}const u=r+"Get"+c+d+"Ledger",p=await this[u](this.extend(h,o));if(p.length<1)return[];const f=Array.isArray(p[0]),m="margin"===r&&f?p[0]:p;if("swap"===r){const s=this.parseLedger(m);return this.filterBySymbolSinceLimit(s,e,t,i)}return this.parseLedger(m,l,t,i)}parseLedgerEntryType(e){return this.safeString({transfer:"transfer",trade:"trade",rebate:"rebate",match:"trade",fee:"fee",settlement:"trade",liquidation:"trade",funding:"fee",margin:"margin"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"ledger_id"),s=this.safeValue(e,"details",{}),a=this.safeString(s,"order_id"),r=this.parseLedgerEntryType(this.safeString(e,"type")),o=this.safeCurrencyCode(this.safeString(e,"currency"),t),n=this.safeFloat(e,"amount"),c=this.parse8601(this.safeString(e,"timestamp")),d={cost:this.safeFloat(e,"fee"),currency:o},h=this.safeFloat(e,"balance"),l=this.safeString(e,"instrument_id");let u=void 0;if(l in this.markets_by_id){u=this.markets_by_id[l].symbol}return{info:e,id:i,account:void 0,referenceId:a,referenceAccount:void 0,type:r,currency:o,symbol:u,amount:n,before:void 0,after:h,status:"ok",timestamp:c,datetime:this.iso8601(c),fee:d}}sign(e,t="public",i="GET",s={},a,r){const o=Array.isArray(s);let n="/api/"+t+"/"+this.version+"/";n+=o?e:this.implodeParams(e,s);const c=o?s:this.omit(s,this.extractParams(e));let d=this.implodeParams(this.urls.api.rest,{hostname:this.hostname})+n;const h=this.getPathAuthenticationType(e);if("public"===h)Object.keys(c).length&&(d+="?"+this.urlencode(c));else if("private"===h){this.checkRequiredCredentials();const e=this.iso8601(this.milliseconds());a={"OK-ACCESS-KEY":this.apiKey,"OK-ACCESS-PASSPHRASE":this.password,"OK-ACCESS-TIMESTAMP":e};let t=e+i+n;if("GET"===i){if(Object.keys(c).length){const e="?"+this.urlencode(c);d+=e,t+=e}}else(o||Object.keys(c).length)&&(t+=r=this.json(c)),a["Content-Type"]="application/json";const s=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64");a["OK-ACCESS-SIGN"]=s}return{url:d,method:i,body:r,headers:a}}getPathAuthenticationType(e){if("underlying"===e)return"public";const t=this.safeValue(this.options,"auth",{}),i=this.findBroadlyMatchedKey(t,e);return this.safeString(t,i,"private")}handleErrors(e,t,i,s,o,n,c,d,h){if(!c)return;const l=this.id+" "+n;if(503===e)throw new r(l);const u=this.safeString(c,"message"),p=this.safeString2(c,"code","error_code"),f=void 0!==u&&""!==u,m=void 0!==p&&"0"!==p;if(f&&(this.throwExactlyMatchedException(this.exceptions.exact,u,l),this.throwBroadlyMatchedException(this.exceptions.broad,u,l)),m&&this.throwExactlyMatchedException(this.exceptions.exact,p,l),m||f)throw new a(l)}}},function(e,t,i){const s=i(4),a=i(8),r=i(9);e.exports=async(e,t,i,o,n,c=!1)=>{try{let d=await s(i,o,n,c),h={values:a(d)[t],period:e};return await r.EMA.calculate(h)}catch(e){throw e}}},function(e,t,i){const s=i(4),a=i(8),r=i(9);e.exports=async(e,t,i,o,n,c=!1)=>{try{let d=await s(i,o,n,c),h={values:a(d)[t],period:e};return await r.RSI.calculate(h)}catch(e){throw e}}},function(e,t,i){const s=i(4),a=i(8),r=i(9);e.exports=async(e,t,i,o,n,c=!1)=>{try{let d=await s(i,o,n,c),h={values:a(d)[t],period:e};return await r.SMA.calculate(h)}catch(e){throw e}}},function(e,t,i){const s=i(72);e.exports=async(e,t,i=!1)=>{try{let a,r=s[e];return a=new r(i?{options:{defaultMarket:"future"}}:{}),await a.fetchTicker(t)}catch(e){throw"Ticker is not supported"}}},function(e,t){e.exports={crossover:(e,t)=>e[e.length-2]<t[t.length-2]&&e[e.length-1]>=t[t.length-1],crossunder:(e,t)=>e[e.length-2]>t[t.length-2]&&e[e.length-1]<=t[t.length-1]}},function(e,t,i){const s=i(97),a=s(),r=s.Router(),o=i(164),n=i(165),c=i(71),d=i(91),h=i(324),l=i(325),u=i(326),p=i(327),f=i(92),m=i(93),v=i(328),y=i(94),g=i(329),b=i(330);e.exports={alerts:b,bb:c,ema:d,ichimokuCloud:h,macd:l,mfi:u,obv:p,rsi:f,sma:m,stochasticRSI:v,ticker:y,wma:g};r.get("/",(function(e,t){t.send("App on")})),r.get("/stochasticRSI/:base_symbol/:quote_symbol/:interval",o(async(e,t,i)=>{let s=k(e.params.base_symbol,e.params.quote_symbol);const a=await v(3,3,14,14,"close","binance",s,e.params.interval,!1);t.send(a)})),r.get("/sma/:base_symbol/:quote_symbol/:interval/:sma_length?",o(async(e,t,i)=>{let s=k(e.params.base_symbol,e.params.quote_symbol),a=void 0!==e.params.sma_length?e.params.sma_length:50,r=await m(a,"close","binance",s,e.params.interval,!0);t.send(r)})),r.get("/rsi/:base_symbol/:quote_symbol/:interval",o(async(e,t,i)=>{let s=k(e.params.base_symbol,e.params.quote_symbol),a=await f(14,"close","binance",s,e.params.interval,!0);t.send(a)})),r.get("/bb/:base_symbol/:quote_symbol/:interval",o(async(e,t,i)=>{let s=k(e.params.base_symbol,e.params.quote_symbol);const a=await c(50,2,"close","binance",s,e.params.interval,!0);t.send(a)})),r.get("/macd/:base_symbol/:quote_symbol/:interval",o(async(e,t,i)=>{let s=k(e.params.base_symbol,e.params.quote_symbol);const a=await l(12,26,9,"close","binance",s,e.params.interval,!0);t.send(a)})),r.get("/ichimokuCloud/:base_symbol/:quote_symbol/:interval",o(async(e,t,i)=>{let s=k(e.params.base_symbol,e.params.quote_symbol);const a=await h(9,26,52,26,"binance",s,e.params.interval,!0);t.send(a)})),r.get("/goldenCross/:base_symbol/:quote_symbol/:interval",o(async(e,t,i)=>{let s=k(e.params.base_symbol,e.params.quote_symbol);const a=await b.goldenCross(50,200,"binance",s,e.params.interval,!0);t.send(a)})),r.get("/maCross/:base_symbol/:quote_symbol/:interval",o(async(e,t,i)=>{let s=k(e.params.base_symbol,e.params.quote_symbol);const a=await b.maCross(50,200,"binance",s,e.params.interval,!0);t.send(a)})),r.get("/rsiCheck/:base_symbol/:quote_symbol/:interval",o(async(e,t,i)=>{let s=k(e.params.base_symbol,e.params.quote_symbol);const a=b.rsiCheck(14,75,25,"binance",s,e.params.interval,!0);t.send(a)})),r.get("/priceCrossSMA/:base_symbol/:quote_symbol/:interval",o(async(e,t,i)=>{let s=k(e.params.base_symbol,e.params.quote_symbol);const a=await b.priceCrossSMA(14,"binance",s,e.params.interval,!0);t.send(a)})),r.get("/priceCrossEMA/:base_symbol/:quote_symbol/:interval",o(async(e,t,i)=>{let s=k(e.params.base_symbol,e.params.quote_symbol);const a=await b.priceCrossEMA(14,"binance",s,e.params.interval,!0);t.send(a)})),r.get("/bbCheck/:base_symbol/:quote_symbol/:interval",o(async(e,t,i)=>{let s=k(e.params.base_symbol,e.params.quote_symbol);const a=awaitalerts.bbCheck(50,2,"binance",s,e.params.interval,!0);t.send(a)}));const w=process.env.PORT||8080;function k(e,t){return e+"/"+t}a.listen(w,()=>{console.log("App listening on port "+w),console.log("Press Ctrl+C to quit.")}),a.use("/.netlify/functions/indicators",r),e.exports=a,e.exports.handler=n(a)},function(e,t,i){"use strict";
/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=i(98)},function(e,t,i){"use strict";
/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(99),a=i(47).EventEmitter,r=i(139),o=i(140),n=i(60),c=i(59),d=i(152),h=i(159);(t=e.exports=function(){var e=function(t,i,s){e.handle(t,i,s)};return r(e,a.prototype,!1),r(e,o,!1),e.request=Object.create(d,{app:{configurable:!0,enumerable:!0,writable:!0,value:e}}),e.response=Object.create(h,{app:{configurable:!0,enumerable:!0,writable:!0,value:e}}),e.init(),e}).application=o,t.request=d,t.response=h,t.Route=n,t.Router=c,t.json=s.json,t.query=i(62),t.raw=s.raw,t.static=i(163),t.text=s.text,t.urlencoded=s.urlencoded;["bodyParser","compress","cookieSession","session","logger","cookieParser","favicon","responseTime","errorHandler","timeout","methodOverride","vhost","csrf","directory","limit","multipart","staticCache"].forEach((function(e){Object.defineProperty(t,e,{get:function(){throw new Error("Most middleware (like "+e+") is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.")},configurable:!0})}))},function(e,t,i){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(10)("body-parser"),a=Object.create(null);function r(e){return function(){return function(e){var t=a[e];if(void 0!==t)return t;switch(e){case"json":t=i(102);break;case"raw":t=i(134);break;case"text":t=i(135);break;case"urlencoded":t=i(136)}return a[e]=t}(e)}}t=e.exports=s.function((function(e){var i={};if(e)for(var s in e)"type"!==s&&(i[s]=e[s]);var a=t.urlencoded(i),r=t.json(i);return function(e,t,i){r(e,t,(function(s){if(s)return i(s);a(e,t,i)}))}}),"bodyParser: use individual json/urlencoded middlewares"),Object.defineProperty(t,"json",{configurable:!0,enumerable:!0,get:r("json")}),Object.defineProperty(t,"raw",{configurable:!0,enumerable:!0,get:r("raw")}),Object.defineProperty(t,"text",{configurable:!0,enumerable:!0,get:r("text")}),Object.defineProperty(t,"urlencoded",{configurable:!0,enumerable:!0,get:r("urlencoded")})},function(e,t,i){"use strict";
/*!
 * depd
 * Copyright(c) 2014 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=function(e){var t=!0,i=function(e){var t,i="";e.isNative()?i="native":e.isEval()?(t=e.getScriptNameOrSourceURL())||(i=e.getEvalOrigin()):t=e.getFileName();if(t){i+=t;var s=e.getLineNumber();if(null!=s){i+=":"+s;var a=e.getColumnNumber();a&&(i+=":"+a)}}return i||"unknown source"}(e),s=e.getFunctionName(),a=e.isConstructor(),r=!(e.isToplevel()||a),o="";if(r){var n=e.getMethodName(),c=(d=e.receiver).constructor&&d.constructor.name||null;s?(c&&0!==s.indexOf(c)&&(o+=c+"."),o+=s,n&&s.lastIndexOf("."+n)!==s.length-n.length-1&&(o+=" [as "+n+"]")):o+=c+"."+(n||"<anonymous>")}else a?o+="new "+(s||"<anonymous>"):s?o+=s:(t=!1,o+=i);var d;t&&(o+=" ("+i+")");return o}},function(e,t,i){"use strict";
/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=function(e,t){return e.listeners(t).length}},function(e,t,i){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(19),a=i(26),r=i(20),o=i(5)("body-parser:json"),n=i(29),c=i(21);e.exports=function(e){var t=e||{},i="number"!=typeof t.limit?s.parse(t.limit||"100kb"):t.limit,l=!1!==t.inflate,u=t.reviver,p=!1!==t.strict,f=t.type||"application/json",m=t.verify||!1;if(!1!==m&&"function"!=typeof m)throw new TypeError("option verify must be function");var v="function"!=typeof f?function(e){return function(t){return Boolean(c(t,e))}}(f):f;function y(e){if(0===e.length)return{};if(p){var t=(i=e,d.exec(i)[1]);if("{"!==t&&"["!==t)throw o("strict violation"),function(e,t){var i=e.indexOf(t),s=e.substring(0,i)+"#";try{throw JSON.parse(s),new SyntaxError("strict violation")}catch(e){return h(e,{message:e.message.replace("#",t),stack:e.stack})}}(e,t)}var i;try{return o("parse json"),JSON.parse(e,u)}catch(e){throw h(e,{message:e.message,stack:e.stack})}}return function(e,t,s){if(e._body)return o("body already parsed"),void s();if(e.body=e.body||{},!c.hasBody(e))return o("skip empty body"),void s();if(o("content-type %j",e.headers["content-type"]),!v(e))return o("skip parsing"),void s();var d=function(e){try{return(a.parse(e).parameters.charset||"").toLowerCase()}catch(e){return}}(e)||"utf-8";if("utf-"!==d.substr(0,4))return o("invalid charset"),void s(r(415,'unsupported charset "'+d.toUpperCase()+'"',{charset:d,type:"charset.unsupported"}));n(e,t,s,y,o,{encoding:d,inflate:l,limit:i,verify:m})}};var d=/^[\x20\x09\x0a\x0d]*(.)/;function h(e,t){for(var i=Object.getOwnPropertyNames(e),s=0;s<i.length;s++){var a=i[s];"stack"!==a&&"message"!==a&&delete e[a]}return e.stack=t.stack.replace(e.message,t.message),e.message=t.message,e}},function(e){e.exports=JSON.parse('{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","306":"(Unused)","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I\'m a teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Unordered Collection","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}')},function(e,t,i){try{var s=i(37);if("function"!=typeof s.inherits)throw"";e.exports=s.inherits}catch(t){e.exports=i(105)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},function(e,t){
/*!
 * toidentifier
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */
e.exports=function(e){return e.split(" ").map((function(e){return e.slice(0,1).toUpperCase()+e.slice(1)})).join("").replace(/[^ _0-9a-z]/gi,"")}},function(e,t,i){function s(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=i(48)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var i=this.useColors;if(e[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+e[0]+(i?"%c ":" ")+"+"+t.humanize(this.diff),!i)return;var s="color: "+this.color;e.splice(1,0,s,"color: inherit");var a=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(a++,"%c"===e&&(r=a))})),e.splice(r,0,s)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=s,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(s())},function(e,t){var i=1e3,s=6e4,a=60*s,r=24*a;function o(e,t,i){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+i:Math.ceil(e/t)+" "+i+"s"}e.exports=function(e,t){t=t||{};var n,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*r;case"hours":case"hour":case"hrs":case"hr":case"h":return o*a;case"minutes":case"minute":case"mins":case"min":case"m":return o*s;case"seconds":case"second":case"secs":case"sec":case"s":return o*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?o(n=e,r,"day")||o(n,a,"hour")||o(n,s,"minute")||o(n,i,"second")||n+" ms":function(e){if(e>=r)return Math.round(e/r)+"d";if(e>=a)return Math.round(e/a)+"h";if(e>=s)return Math.round(e/s)+"m";if(e>=i)return Math.round(e/i)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,i){var s=i(110),a=i(37);(t=e.exports=i(48)).init=function(e){e.inspectOpts={};for(var i=Object.keys(t.inspectOpts),s=0;s<i.length;s++)e.inspectOpts[i[s]]=t.inspectOpts[i[s]]},t.log=function(){return o.write(a.format.apply(a,arguments)+"\n")},t.formatArgs=function(e){var i=this.namespace;if(this.useColors){var s=this.color,a="  [3"+s+";1m"+i+" [0m";e[0]=a+e[0].split("\n").join("\n"+a),e.push("[3"+s+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(new Date).toUTCString()+" "+i+" "+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=n,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):s.isatty(r)},t.colors=[6,2,3,4,5,1],t.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var i=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()})),s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[i]=s,e}),{});var r=parseInt(process.env.DEBUG_FD,10)||2;1!==r&&2!==r&&a.deprecate((function(){}),"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var o=1===r?process.stdout:2===r?process.stderr:function(e){var t;switch(process.binding("tty_wrap").guessHandleType(e)){case"TTY":(t=new s.WriteStream(e))._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":var a=i(16);(t=new a.SyncWriteStream(e,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":var r=i(49);(t=new r.Socket({fd:e,readable:!1,writable:!0})).readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}(r);function n(){return process.env.DEBUG}t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts).split("\n").map((function(e){return e.trim()})).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts)},t.enable(n())},function(e,t){e.exports=require("tty")},function(e,t,i){"use strict";
/*!
 * raw-body
 * Copyright(c) 2013-2014 Jonathan Ong
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(19),a=i(20),r=i(50),o=i(53);e.exports=function(e,t,i){var a=i,r=t||{};!0!==t&&"string"!=typeof t||(r={encoding:t});"function"==typeof t&&(a=t,r={});if(void 0!==a&&"function"!=typeof a)throw new TypeError("argument callback must be a function");if(!a&&!global.Promise)throw new TypeError("argument callback is required");var o=!0!==r.encoding?r.encoding:"utf-8",n=s.parse(r.limit),c=null==r.length||isNaN(r.length)?null:parseInt(r.length,10);if(a)return d(e,o,c,n,a);return new Promise((function(t,i){d(e,o,c,n,(function(e,s){if(e)return i(e);t(s)}))}))};var n=/^Encoding not recognized: /;function c(e){o(e),"function"==typeof e.pause&&e.pause()}function d(e,t,i,s,o){var d=!1;if(null!==s&&null!==i&&i>s)return f(a(413,"request entity too large",{expected:i,length:i,limit:s,type:"entity.too.large"}));var h=e._readableState;if(e._decoder||h&&(h.encoding||h.decoder))return f(a(500,"stream encoding should not be set",{type:"stream.encoding.set"}));var l,u=0;try{l=function(e){if(!e)return null;try{return r.getDecoder(e)}catch(t){if(!n.test(t.message))throw t;throw a(415,"specified encoding unsupported",{encoding:e,type:"encoding.unsupported"})}}(t)}catch(e){return f(e)}var p=l?"":[];function f(){for(var t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];function s(){g(),t[0]&&c(e),o.apply(null,t)}d=!0,s()}function m(){d||f(a(400,"request aborted",{code:"ECONNABORTED",expected:i,length:i,received:u,type:"request.aborted"}))}function v(e){d||(u+=e.length,null!==s&&u>s?f(a(413,"request entity too large",{limit:s,received:u,type:"entity.too.large"})):l?p+=l.write(e):p.push(e))}function y(e){if(!d){if(e)return f(e);if(null!==i&&u!==i)f(a(400,"request size did not match content length",{expected:i,length:i,received:u,type:"request.size.invalid"}));else f(null,l?p+(l.end()||""):Buffer.concat(p))}}function g(){p=null,e.removeListener("aborted",m),e.removeListener("data",v),e.removeListener("end",y),e.removeListener("error",y),e.removeListener("close",g)}e.on("aborted",m),e.on("close",g),e.on("data",v),e.on("end",y),e.on("error",y)}},function(e,t,i){"use strict";function s(e,t){this.encoder=e,this.addBOM=!0}function a(e,t){this.decoder=e,this.pass=!1,this.options=t||{}}t.PrependBOM=s,s.prototype.write=function(e){return this.addBOM&&(e="\ufeff"+e,this.addBOM=!1),this.encoder.write(e)},s.prototype.end=function(){return this.encoder.end()},t.StripBOM=a,a.prototype.write=function(e){var t=this.decoder.write(e);return this.pass||!t||("\ufeff"===t[0]&&(t=t.slice(1),"function"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0),t},a.prototype.end=function(){return this.decoder.end()}},function(e,t,i){"use strict";for(var s=[i(114),i(116),i(117),i(118),i(119),i(120),i(121),i(122)],a=0;a<s.length;a++){e=s[a];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}},function(e,t,i){"use strict";var s=i(17).Buffer;function a(e,t){this.enc=e.encodingName,this.bomAware=e.bomAware,"base64"===this.enc?this.encoder=c:"cesu8"===this.enc&&(this.enc="utf8",this.encoder=d,""!==s.from("eda0bdedb2a9","hex").toString()&&(this.decoder=h,this.defaultCharUnicode=t.defaultCharUnicode))}e.exports={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:a},a.prototype.encoder=n,a.prototype.decoder=o;var r=i(115).StringDecoder;function o(e,t){r.call(this,t.enc)}function n(e,t){this.enc=t.enc}function c(e,t){this.prevStr=""}function d(e,t){}function h(e,t){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=t.defaultCharUnicode}r.prototype.end||(r.prototype.end=function(){}),o.prototype=r.prototype,n.prototype.write=function(e){return s.from(e,this.enc)},n.prototype.end=function(){},c.prototype.write=function(e){var t=(e=this.prevStr+e).length-e.length%4;return this.prevStr=e.slice(t),e=e.slice(0,t),s.from(e,"base64")},c.prototype.end=function(){return s.from(this.prevStr,"base64")},d.prototype.write=function(e){for(var t=s.alloc(3*e.length),i=0,a=0;a<e.length;a++){var r=e.charCodeAt(a);r<128?t[i++]=r:r<2048?(t[i++]=192+(r>>>6),t[i++]=128+(63&r)):(t[i++]=224+(r>>>12),t[i++]=128+(r>>>6&63),t[i++]=128+(63&r))}return t.slice(0,i)},d.prototype.end=function(){},h.prototype.write=function(e){for(var t=this.acc,i=this.contBytes,s=this.accBytes,a="",r=0;r<e.length;r++){var o=e[r];128!=(192&o)?(i>0&&(a+=this.defaultCharUnicode,i=0),o<128?a+=String.fromCharCode(o):o<224?(t=31&o,i=1,s=1):o<240?(t=15&o,i=2,s=1):a+=this.defaultCharUnicode):i>0?(t=t<<6|63&o,s++,0===--i&&(a+=2===s&&t<128&&t>0||3===s&&t<2048?this.defaultCharUnicode:String.fromCharCode(t))):a+=this.defaultCharUnicode}return this.acc=t,this.contBytes=i,this.accBytes=s,a},h.prototype.end=function(){var e=0;return this.contBytes>0&&(e+=this.defaultCharUnicode),e}},function(e,t){e.exports=require("string_decoder")},function(e,t,i){"use strict";var s=i(17).Buffer;function a(){}function r(){}function o(){this.overflowByte=-1}function n(e,t){this.iconv=t}function c(e,t){void 0===(e=e||{}).addBOM&&(e.addBOM=!0),this.encoder=t.iconv.getEncoder("utf-16le",e)}function d(e,t){this.decoder=null,this.initialBytes=[],this.initialBytesLen=0,this.options=e||{},this.iconv=t.iconv}function h(e,t){var i=t||"utf-16le";if(e.length>=2)if(254==e[0]&&255==e[1])i="utf-16be";else if(255==e[0]&&254==e[1])i="utf-16le";else{for(var s=0,a=0,r=Math.min(e.length-e.length%2,64),o=0;o<r;o+=2)0===e[o]&&0!==e[o+1]&&a++,0!==e[o]&&0===e[o+1]&&s++;a>s?i="utf-16be":a<s&&(i="utf-16le")}return i}t.utf16be=a,a.prototype.encoder=r,a.prototype.decoder=o,a.prototype.bomAware=!0,r.prototype.write=function(e){for(var t=s.from(e,"ucs2"),i=0;i<t.length;i+=2){var a=t[i];t[i]=t[i+1],t[i+1]=a}return t},r.prototype.end=function(){},o.prototype.write=function(e){if(0==e.length)return"";var t=s.alloc(e.length+1),i=0,a=0;for(-1!==this.overflowByte&&(t[0]=e[0],t[1]=this.overflowByte,i=1,a=2);i<e.length-1;i+=2,a+=2)t[a]=e[i+1],t[a+1]=e[i];return this.overflowByte=i==e.length-1?e[e.length-1]:-1,t.slice(0,a).toString("ucs2")},o.prototype.end=function(){},t.utf16=n,n.prototype.encoder=c,n.prototype.decoder=d,c.prototype.write=function(e){return this.encoder.write(e)},c.prototype.end=function(){return this.encoder.end()},d.prototype.write=function(e){if(!this.decoder){if(this.initialBytes.push(e),this.initialBytesLen+=e.length,this.initialBytesLen<16)return"";var t=h(e=s.concat(this.initialBytes),this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options),this.initialBytes.length=this.initialBytesLen=0}return this.decoder.write(e)},d.prototype.end=function(){if(!this.decoder){var e=s.concat(this.initialBytes),t=h(e,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);var i=this.decoder.write(e),a=this.decoder.end();return a?i+a:i}return this.decoder.end()}},function(e,t,i){"use strict";var s=i(17).Buffer;function a(e,t){this.iconv=t}t.utf7=a,t.unicode11utf7="utf7",a.prototype.encoder=o,a.prototype.decoder=n,a.prototype.bomAware=!0;var r=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function o(e,t){this.iconv=t.iconv}function n(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}o.prototype.write=function(e){return s.from(e.replace(r,function(e){return"+"+("+"===e?"":this.iconv.encode(e,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},o.prototype.end=function(){};for(var c=/[A-Za-z0-9\/+]/,d=[],h=0;h<256;h++)d[h]=c.test(String.fromCharCode(h));var l="+".charCodeAt(0),u="-".charCodeAt(0),p="&".charCodeAt(0);function f(e,t){this.iconv=t}function m(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=s.alloc(6),this.base64AccumIdx=0}function v(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}n.prototype.write=function(e){for(var t="",i=0,a=this.inBase64,r=this.base64Accum,o=0;o<e.length;o++)if(a){if(!d[e[o]]){if(o==i&&e[o]==u)t+="+";else{var n=r+e.slice(i,o).toString();t+=this.iconv.decode(s.from(n,"base64"),"utf16-be")}e[o]!=u&&o--,i=o+1,a=!1,r=""}}else e[o]==l&&(t+=this.iconv.decode(e.slice(i,o),"ascii"),i=o+1,a=!0);if(a){var c=(n=r+e.slice(i).toString()).length-n.length%8;r=n.slice(c),n=n.slice(0,c),t+=this.iconv.decode(s.from(n,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(i),"ascii");return this.inBase64=a,this.base64Accum=r,t},n.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(s.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e},t.utf7imap=f,f.prototype.encoder=m,f.prototype.decoder=v,f.prototype.bomAware=!0,m.prototype.write=function(e){for(var t=this.inBase64,i=this.base64Accum,a=this.base64AccumIdx,r=s.alloc(5*e.length+10),o=0,n=0;n<e.length;n++){var c=e.charCodeAt(n);32<=c&&c<=126?(t&&(a>0&&(o+=r.write(i.slice(0,a).toString("base64").replace(/\//g,",").replace(/=+$/,""),o),a=0),r[o++]=u,t=!1),t||(r[o++]=c,c===p&&(r[o++]=u))):(t||(r[o++]=p,t=!0),t&&(i[a++]=c>>8,i[a++]=255&c,a==i.length&&(o+=r.write(i.toString("base64").replace(/\//g,","),o),a=0)))}return this.inBase64=t,this.base64AccumIdx=a,r.slice(0,o)},m.prototype.end=function(){var e=s.alloc(10),t=0;return this.inBase64&&(this.base64AccumIdx>0&&(t+=e.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),t),this.base64AccumIdx=0),e[t++]=u,this.inBase64=!1),e.slice(0,t)};var y=d.slice();y[",".charCodeAt(0)]=!0,v.prototype.write=function(e){for(var t="",i=0,a=this.inBase64,r=this.base64Accum,o=0;o<e.length;o++)if(a){if(!y[e[o]]){if(o==i&&e[o]==u)t+="&";else{var n=r+e.slice(i,o).toString().replace(/,/g,"/");t+=this.iconv.decode(s.from(n,"base64"),"utf16-be")}e[o]!=u&&o--,i=o+1,a=!1,r=""}}else e[o]==p&&(t+=this.iconv.decode(e.slice(i,o),"ascii"),i=o+1,a=!0);if(a){var c=(n=r+e.slice(i).toString().replace(/,/g,"/")).length-n.length%8;r=n.slice(c),n=n.slice(0,c),t+=this.iconv.decode(s.from(n,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(i),"ascii");return this.inBase64=a,this.base64Accum=r,t},v.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(s.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e}},function(e,t,i){"use strict";var s=i(17).Buffer;function a(e,t){if(!e)throw new Error("SBCS codec is called without the data.");if(!e.chars||128!==e.chars.length&&256!==e.chars.length)throw new Error("Encoding '"+e.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(128===e.chars.length){for(var i="",a=0;a<128;a++)i+=String.fromCharCode(a);e.chars=i+e.chars}this.decodeBuf=s.from(e.chars,"ucs2");var r=s.alloc(65536,t.defaultCharSingleByte.charCodeAt(0));for(a=0;a<e.chars.length;a++)r[e.chars.charCodeAt(a)]=a;this.encodeBuf=r}function r(e,t){this.encodeBuf=t.encodeBuf}function o(e,t){this.decodeBuf=t.decodeBuf}t._sbcs=a,a.prototype.encoder=r,a.prototype.decoder=o,r.prototype.write=function(e){for(var t=s.alloc(e.length),i=0;i<e.length;i++)t[i]=this.encodeBuf[e.charCodeAt(i)];return t},r.prototype.end=function(){},o.prototype.write=function(e){for(var t=this.decodeBuf,i=s.alloc(2*e.length),a=0,r=0,o=0;o<e.length;o++)a=2*e[o],i[r=2*o]=t[a],i[r+1]=t[a+1];return i.toString("ucs2")},o.prototype.end=function(){}},function(e,t,i){"use strict";e.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},function(e,t,i){"use strict";e.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\ufeff"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},function(e,t,i){"use strict";var s=i(17).Buffer;t._dbcs=o;for(var a=new Array(256),r=0;r<256;r++)a[r]=-1;function o(e,t){if(this.encodingName=e.encodingName,!e)throw new Error("DBCS codec is called without the data.");if(!e.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var i=e.table();this.decodeTables=[],this.decodeTables[0]=a.slice(0),this.decodeTableSeq=[];for(var s=0;s<i.length;s++)this._addDecodeChunk(i[s]);this.defaultCharUnicode=t.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var r={};if(e.encodeSkipVals)for(s=0;s<e.encodeSkipVals.length;s++){var o=e.encodeSkipVals[s];if("number"==typeof o)r[o]=!0;else for(var n=o.from;n<=o.to;n++)r[n]=!0}if(this._fillEncodeTable(0,0,r),e.encodeAdd)for(var c in e.encodeAdd)Object.prototype.hasOwnProperty.call(e.encodeAdd,c)&&this._setEncodeChar(c.charCodeAt(0),e.encodeAdd[c]);if(this.defCharSB=this.encodeTable[0][t.defaultCharSingleByte.charCodeAt(0)],-1===this.defCharSB&&(this.defCharSB=this.encodeTable[0]["?"]),-1===this.defCharSB&&(this.defCharSB="?".charCodeAt(0)),"function"==typeof e.gb18030){this.gb18030=e.gb18030();var d=this.decodeTables.length,h=this.decodeTables[d]=a.slice(0),l=this.decodeTables.length,u=this.decodeTables[l]=a.slice(0);for(s=129;s<=254;s++){var p=-1e3-this.decodeTables[0][s],f=this.decodeTables[p];for(n=48;n<=57;n++)f[n]=-1e3-d}for(s=129;s<=254;s++)h[s]=-1e3-l;for(s=48;s<=57;s++)u[s]=-2}}function n(e,t){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=t.encodeTable,this.encodeTableSeq=t.encodeTableSeq,this.defaultCharSingleByte=t.defCharSB,this.gb18030=t.gb18030}function c(e,t){this.nodeIdx=0,this.prevBuf=s.alloc(0),this.decodeTables=t.decodeTables,this.decodeTableSeq=t.decodeTableSeq,this.defaultCharUnicode=t.defaultCharUnicode,this.gb18030=t.gb18030}function d(e,t){if(e[0]>t)return-1;for(var i=0,s=e.length;i<s-1;){var a=i+Math.floor((s-i+1)/2);e[a]<=t?i=a:s=a}return i}o.prototype.encoder=n,o.prototype.decoder=c,o.prototype._getDecodeTrieNode=function(e){for(var t=[];e>0;e>>=8)t.push(255&e);0==t.length&&t.push(0);for(var i=this.decodeTables[0],s=t.length-1;s>0;s--){var r=i[t[s]];if(-1==r)i[t[s]]=-1e3-this.decodeTables.length,this.decodeTables.push(i=a.slice(0));else{if(!(r<=-1e3))throw new Error("Overwrite byte in "+this.encodingName+", addr: "+e.toString(16));i=this.decodeTables[-1e3-r]}}return i},o.prototype._addDecodeChunk=function(e){var t=parseInt(e[0],16),i=this._getDecodeTrieNode(t);t&=255;for(var s=1;s<e.length;s++){var a=e[s];if("string"==typeof a)for(var r=0;r<a.length;){var o=a.charCodeAt(r++);if(55296<=o&&o<56320){var n=a.charCodeAt(r++);if(!(56320<=n&&n<57344))throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+e[0]);i[t++]=65536+1024*(o-55296)+(n-56320)}else if(4080<o&&o<=4095){for(var c=4095-o+2,d=[],h=0;h<c;h++)d.push(a.charCodeAt(r++));i[t++]=-10-this.decodeTableSeq.length,this.decodeTableSeq.push(d)}else i[t++]=o}else{if("number"!=typeof a)throw new Error("Incorrect type '"+typeof a+"' given in "+this.encodingName+" at chunk "+e[0]);var l=i[t-1]+1;for(r=0;r<a;r++)i[t++]=l++}}if(t>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+e[0]+": too long"+t)},o.prototype._getEncodeBucket=function(e){var t=e>>8;return void 0===this.encodeTable[t]&&(this.encodeTable[t]=a.slice(0)),this.encodeTable[t]},o.prototype._setEncodeChar=function(e,t){var i=this._getEncodeBucket(e),s=255&e;i[s]<=-10?this.encodeTableSeq[-10-i[s]][-1]=t:-1==i[s]&&(i[s]=t)},o.prototype._setEncodeSequence=function(e,t){var i,s=e[0],a=this._getEncodeBucket(s),r=255&s;a[r]<=-10?i=this.encodeTableSeq[-10-a[r]]:(i={},-1!==a[r]&&(i[-1]=a[r]),a[r]=-10-this.encodeTableSeq.length,this.encodeTableSeq.push(i));for(var o=1;o<e.length-1;o++){var n=i[s];"object"==typeof n?i=n:(i=i[s]={},void 0!==n&&(i[-1]=n))}i[s=e[e.length-1]]=t},o.prototype._fillEncodeTable=function(e,t,i){for(var s=this.decodeTables[e],a=0;a<256;a++){var r=s[a],o=t+a;i[o]||(r>=0?this._setEncodeChar(r,o):r<=-1e3?this._fillEncodeTable(-1e3-r,o<<8,i):r<=-10&&this._setEncodeSequence(this.decodeTableSeq[-10-r],o))}},n.prototype.write=function(e){for(var t=s.alloc(e.length*(this.gb18030?4:3)),i=this.leadSurrogate,a=this.seqObj,r=-1,o=0,n=0;;){if(-1===r){if(o==e.length)break;var c=e.charCodeAt(o++)}else{c=r;r=-1}if(55296<=c&&c<57344)if(c<56320){if(-1===i){i=c;continue}i=c,c=-1}else-1!==i?(c=65536+1024*(i-55296)+(c-56320),i=-1):c=-1;else-1!==i&&(r=c,c=-1,i=-1);var h=-1;if(void 0!==a&&-1!=c){var l=a[c];if("object"==typeof l){a=l;continue}"number"==typeof l?h=l:null==l&&void 0!==(l=a[-1])&&(h=l,r=c),a=void 0}else if(c>=0){var u=this.encodeTable[c>>8];if(void 0!==u&&(h=u[255&c]),h<=-10){a=this.encodeTableSeq[-10-h];continue}if(-1==h&&this.gb18030){var p=d(this.gb18030.uChars,c);if(-1!=p){h=this.gb18030.gbChars[p]+(c-this.gb18030.uChars[p]);t[n++]=129+Math.floor(h/12600),h%=12600,t[n++]=48+Math.floor(h/1260),h%=1260,t[n++]=129+Math.floor(h/10),h%=10,t[n++]=48+h;continue}}}-1===h&&(h=this.defaultCharSingleByte),h<256?t[n++]=h:h<65536?(t[n++]=h>>8,t[n++]=255&h):(t[n++]=h>>16,t[n++]=h>>8&255,t[n++]=255&h)}return this.seqObj=a,this.leadSurrogate=i,t.slice(0,n)},n.prototype.end=function(){if(-1!==this.leadSurrogate||void 0!==this.seqObj){var e=s.alloc(10),t=0;if(this.seqObj){var i=this.seqObj[-1];void 0!==i&&(i<256?e[t++]=i:(e[t++]=i>>8,e[t++]=255&i)),this.seqObj=void 0}return-1!==this.leadSurrogate&&(e[t++]=this.defaultCharSingleByte,this.leadSurrogate=-1),e.slice(0,t)}},n.prototype.findIdx=d,c.prototype.write=function(e){var t=s.alloc(2*e.length),i=this.nodeIdx,a=this.prevBuf,r=this.prevBuf.length,o=-this.prevBuf.length;r>0&&(a=s.concat([a,e.slice(0,10)]));for(var n=0,c=0;n<e.length;n++){var h,l=n>=0?e[n]:a[n+r];if((h=this.decodeTables[i][l])>=0);else if(-1===h)n=o,h=this.defaultCharUnicode.charCodeAt(0);else if(-2===h){var u=o>=0?e.slice(o,n+1):a.slice(o+r,n+1+r),p=12600*(u[0]-129)+1260*(u[1]-48)+10*(u[2]-129)+(u[3]-48),f=d(this.gb18030.gbChars,p);h=this.gb18030.uChars[f]+p-this.gb18030.gbChars[f]}else{if(h<=-1e3){i=-1e3-h;continue}if(!(h<=-10))throw new Error("iconv-lite internal error: invalid decoding table value "+h+" at "+i+"/"+l);for(var m=this.decodeTableSeq[-10-h],v=0;v<m.length-1;v++)h=m[v],t[c++]=255&h,t[c++]=h>>8;h=m[m.length-1]}if(h>65535){h-=65536;var y=55296+Math.floor(h/1024);t[c++]=255&y,t[c++]=y>>8,h=56320+h%1024}t[c++]=255&h,t[c++]=h>>8,i=0,o=n+1}return this.nodeIdx=i,this.prevBuf=o>=0?e.slice(o):a.slice(o+r),t.slice(0,c).toString("ucs2")},c.prototype.end=function(){for(var e="";this.prevBuf.length>0;){e+=this.defaultCharUnicode;var t=this.prevBuf.slice(1);this.prevBuf=s.alloc(0),this.nodeIdx=0,t.length>0&&(e+=this.write(t))}return this.nodeIdx=0,e}},function(e,t,i){"use strict";e.exports={shiftjis:{type:"_dbcs",table:function(){return i(123)},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return i(124)},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return i(38)}},gbk:{type:"_dbcs",table:function(){return i(38).concat(i(51))}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return i(38).concat(i(51))},gb18030:function(){return i(125)},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return i(126)}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return i(52)}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return i(52).concat(i(127))},encodeSkipVals:[41676]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},function(e){e.exports=JSON.parse('[["0","\\u0000",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]')},function(e){e.exports=JSON.parse('[["0","\\u0000",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]')},function(e){e.exports=JSON.parse('{"uChars":[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],"gbChars":[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189000]}')},function(e){e.exports=JSON.parse('[["0","\\u0000",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]')},function(e){e.exports=JSON.parse('[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]]')},function(e,t,i){"use strict";var s=i(14).Buffer,a=i(12).Transform;function r(e,t){this.conv=e,(t=t||{}).decodeStrings=!1,a.call(this,t)}function o(e,t){this.conv=e,(t=t||{}).encoding=this.encoding="utf8",a.call(this,t)}e.exports=function(e){e.encodeStream=function(t,i){return new r(e.getEncoder(t,i),i)},e.decodeStream=function(t,i){return new o(e.getDecoder(t,i),i)},e.supportsStreams=!0,e.IconvLiteEncoderStream=r,e.IconvLiteDecoderStream=o,e._collect=o.prototype.collect},r.prototype=Object.create(a.prototype,{constructor:{value:r}}),r.prototype._transform=function(e,t,i){if("string"!=typeof e)return i(new Error("Iconv encoding stream needs strings as its input."));try{var s=this.conv.write(e);s&&s.length&&this.push(s),i()}catch(e){i(e)}},r.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t),e()}catch(t){e(t)}},r.prototype.collect=function(e){var t=[];return this.on("error",e),this.on("data",(function(e){t.push(e)})),this.on("end",(function(){e(null,s.concat(t))})),this},o.prototype=Object.create(a.prototype,{constructor:{value:o}}),o.prototype._transform=function(e,t,i){if(!s.isBuffer(e))return i(new Error("Iconv decoding stream needs buffers as its input."));try{var a=this.conv.write(e);a&&a.length&&this.push(a,this.encoding),i()}catch(e){i(e)}},o.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t,this.encoding),e()}catch(t){e(t)}},o.prototype.collect=function(e){var t="";return this.on("error",e),this.on("data",(function(e){t+=e})),this.on("end",(function(){e(null,t)})),this}},function(e,t,i){"use strict";var s=i(14).Buffer;e.exports=function(e){var t=void 0;e.supportsNodeEncodingsExtension=!(s.from||new s(0)instanceof Uint8Array),e.extendNodeEncodings=function(){if(!t){if(t={},!e.supportsNodeEncodingsExtension)return console.error("ACTION NEEDED: require('iconv-lite').extendNodeEncodings() is not supported in your version of Node"),void console.error("See more info at https://github.com/ashtuchkin/iconv-lite/wiki/Node-v4-compatibility");var a={hex:!0,utf8:!0,"utf-8":!0,ascii:!0,binary:!0,base64:!0,ucs2:!0,"ucs-2":!0,utf16le:!0,"utf-16le":!0};s.isNativeEncoding=function(e){return e&&a[e.toLowerCase()]};var r=i(14).SlowBuffer;if(t.SlowBufferToString=r.prototype.toString,r.prototype.toString=function(i,a,r){return i=String(i||"utf8").toLowerCase(),s.isNativeEncoding(i)?t.SlowBufferToString.call(this,i,a,r):(void 0===a&&(a=0),void 0===r&&(r=this.length),e.decode(this.slice(a,r),i))},t.SlowBufferWrite=r.prototype.write,r.prototype.write=function(i,a,r,o){if(isFinite(a))isFinite(r)||(o=r,r=void 0);else{var n=o;o=a,a=r,r=n}a=+a||0;var c=this.length-a;if(r?(r=+r)>c&&(r=c):r=c,o=String(o||"utf8").toLowerCase(),s.isNativeEncoding(o))return t.SlowBufferWrite.call(this,i,a,r,o);if(i.length>0&&(r<0||a<0))throw new RangeError("attempt to write beyond buffer bounds");var d=e.encode(i,o);return d.length<r&&(r=d.length),d.copy(this,a,0,r),r},t.BufferIsEncoding=s.isEncoding,s.isEncoding=function(t){return s.isNativeEncoding(t)||e.encodingExists(t)},t.BufferByteLength=s.byteLength,s.byteLength=r.byteLength=function(i,a){return a=String(a||"utf8").toLowerCase(),s.isNativeEncoding(a)?t.BufferByteLength.call(this,i,a):e.encode(i,a).length},t.BufferToString=s.prototype.toString,s.prototype.toString=function(i,a,r){return i=String(i||"utf8").toLowerCase(),s.isNativeEncoding(i)?t.BufferToString.call(this,i,a,r):(void 0===a&&(a=0),void 0===r&&(r=this.length),e.decode(this.slice(a,r),i))},t.BufferWrite=s.prototype.write,s.prototype.write=function(i,a,r,o){var n=a,c=r,d=o;if(isFinite(a))isFinite(r)||(o=r,r=void 0);else{var h=o;o=a,a=r,r=h}if(o=String(o||"utf8").toLowerCase(),s.isNativeEncoding(o))return t.BufferWrite.call(this,i,n,c,d);a=+a||0;var l=this.length-a;if(r?(r=+r)>l&&(r=l):r=l,i.length>0&&(r<0||a<0))throw new RangeError("attempt to write beyond buffer bounds");var u=e.encode(i,o);return u.length<r&&(r=u.length),u.copy(this,a,0,r),r},e.supportsStreams){var o=i(12).Readable;t.ReadableSetEncoding=o.prototype.setEncoding,o.prototype.setEncoding=function(t,i){this._readableState.decoder=e.getDecoder(t,i),this._readableState.encoding=t},o.prototype.collect=e._collect}}},e.undoExtendNodeEncodings=function(){if(e.supportsNodeEncodingsExtension){if(!t)throw new Error("require('iconv-lite').undoExtendNodeEncodings(): Nothing to undo; extendNodeEncodings() is not called.");delete s.isNativeEncoding;var a=i(14).SlowBuffer;if(a.prototype.toString=t.SlowBufferToString,a.prototype.write=t.SlowBufferWrite,s.isEncoding=t.BufferIsEncoding,s.byteLength=t.BufferByteLength,s.prototype.toString=t.BufferToString,s.prototype.write=t.BufferWrite,e.supportsStreams){var r=i(12).Readable;r.prototype.setEncoding=t.ReadableSetEncoding,delete r.prototype.collect}t=void 0}}}},function(e,t,i){"use strict";
/*!
 * ee-first
 * Copyright(c) 2014 Jonathan Ong
 * MIT Licensed
 */function s(e,t){return function(i){for(var s=new Array(arguments.length),a=this,r="error"===e?i:null,o=0;o<s.length;o++)s[o]=arguments[o];t(r,a,e,s)}}e.exports=function(e,t){if(!Array.isArray(e))throw new TypeError("arg must be an array of [ee, events...] arrays");for(var i=[],a=0;a<e.length;a++){var r=e[a];if(!Array.isArray(r)||r.length<2)throw new TypeError("each array member must be [ee, events...]");for(var o=r[0],n=1;n<r.length;n++){var c=r[n],d=s(c,h);o.on(c,d),i.push({ee:o,event:c,fn:d})}}function h(){l(),t.apply(null,arguments)}function l(){for(var e,t=0;t<i.length;t++)(e=i[t]).ee.removeListener(e.event,e.fn)}function u(e){t=e}return u.cancel=l,u}},function(e,t){
/*!
 * media-typer
 * Copyright(c) 2014 Douglas Christopher Wilson
 * MIT Licensed
 */
var i=/; *([!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) *= *("(?:[ !\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u0020-\u007e])*"|[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) */g,s=/^[\u0020-\u007e\u0080-\u00ff]+$/,a=/^[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+$/,r=/\\([\u0000-\u007f])/g,o=/([\\"])/g,n=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,c=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,d=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;function h(e){var t=String(e);if(a.test(t))return t;if(t.length>0&&!s.test(t))throw new TypeError("invalid parameter value");return'"'+t.replace(o,"\\$1")+'"'}t.format=function(e){if(!e||"object"!=typeof e)throw new TypeError("argument obj is required");var t=e.parameters,i=e.subtype,s=e.suffix,r=e.type;if(!r||!c.test(r))throw new TypeError("invalid type");if(!i||!n.test(i))throw new TypeError("invalid subtype");var o=r+"/"+i;if(s){if(!c.test(s))throw new TypeError("invalid suffix");o+="+"+s}if(t&&"object"==typeof t)for(var d,l=Object.keys(t).sort(),u=0;u<l.length;u++){if(d=l[u],!a.test(d))throw new TypeError("invalid parameter name");o+="; "+d+"="+h(t[d])}return o},t.parse=function(e){if(!e)throw new TypeError("argument string is required");"object"==typeof e&&(e=function(e){if("function"==typeof e.getHeader)return e.getHeader("content-type");if("object"==typeof e.headers)return e.headers&&e.headers["content-type"]}(e));if("string"!=typeof e)throw new TypeError("argument string is required to be a string");var t,s,a,o=e.indexOf(";"),n=function(e){var t=d.exec(e.toLowerCase());if(!t)throw new TypeError("invalid media type");var i,s=t[1],a=t[2],r=a.lastIndexOf("+");-1!==r&&(i=a.substr(r+1),a=a.substr(0,r));return{type:s,subtype:a,suffix:i}}(-1!==o?e.substr(0,o):e),c={};i.lastIndex=o;for(;s=i.exec(e);){if(s.index!==o)throw new TypeError("invalid parameter format");o+=s[0].length,t=s[1].toLowerCase(),'"'===(a=s[2])[0]&&(a=a.substr(1,a.length-2).replace(r,"$1")),c[t]=a}if(-1!==o&&o!==e.length)throw new TypeError("invalid parameter format");return n.parameters=c,n}},function(e,t,i){
/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * MIT Licensed
 */
e.exports=i(133)},function(e){e.exports=JSON.parse('{"application/1d-interleaved-parityfec":{"source":"iana"},"application/3gpdash-qoe-report+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/3gpp-ims+xml":{"source":"iana","compressible":true},"application/a2l":{"source":"iana"},"application/activemessage":{"source":"iana"},"application/activity+json":{"source":"iana","compressible":true},"application/alto-costmap+json":{"source":"iana","compressible":true},"application/alto-costmapfilter+json":{"source":"iana","compressible":true},"application/alto-directory+json":{"source":"iana","compressible":true},"application/alto-endpointcost+json":{"source":"iana","compressible":true},"application/alto-endpointcostparams+json":{"source":"iana","compressible":true},"application/alto-endpointprop+json":{"source":"iana","compressible":true},"application/alto-endpointpropparams+json":{"source":"iana","compressible":true},"application/alto-error+json":{"source":"iana","compressible":true},"application/alto-networkmap+json":{"source":"iana","compressible":true},"application/alto-networkmapfilter+json":{"source":"iana","compressible":true},"application/alto-updatestreamcontrol+json":{"source":"iana","compressible":true},"application/alto-updatestreamparams+json":{"source":"iana","compressible":true},"application/aml":{"source":"iana"},"application/andrew-inset":{"source":"iana","extensions":["ez"]},"application/applefile":{"source":"iana"},"application/applixware":{"source":"apache","extensions":["aw"]},"application/atf":{"source":"iana"},"application/atfx":{"source":"iana"},"application/atom+xml":{"source":"iana","compressible":true,"extensions":["atom"]},"application/atomcat+xml":{"source":"iana","compressible":true,"extensions":["atomcat"]},"application/atomdeleted+xml":{"source":"iana","compressible":true,"extensions":["atomdeleted"]},"application/atomicmail":{"source":"iana"},"application/atomsvc+xml":{"source":"iana","compressible":true,"extensions":["atomsvc"]},"application/atsc-dwd+xml":{"source":"iana","compressible":true,"extensions":["dwd"]},"application/atsc-dynamic-event-message":{"source":"iana"},"application/atsc-held+xml":{"source":"iana","compressible":true,"extensions":["held"]},"application/atsc-rdt+json":{"source":"iana","compressible":true},"application/atsc-rsat+xml":{"source":"iana","compressible":true,"extensions":["rsat"]},"application/atxml":{"source":"iana"},"application/auth-policy+xml":{"source":"iana","compressible":true},"application/bacnet-xdd+zip":{"source":"iana","compressible":false},"application/batch-smtp":{"source":"iana"},"application/bdoc":{"compressible":false,"extensions":["bdoc"]},"application/beep+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/calendar+json":{"source":"iana","compressible":true},"application/calendar+xml":{"source":"iana","compressible":true,"extensions":["xcs"]},"application/call-completion":{"source":"iana"},"application/cals-1840":{"source":"iana"},"application/cap+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/cbor":{"source":"iana"},"application/cbor-seq":{"source":"iana"},"application/cccex":{"source":"iana"},"application/ccmp+xml":{"source":"iana","compressible":true},"application/ccxml+xml":{"source":"iana","compressible":true,"extensions":["ccxml"]},"application/cdfx+xml":{"source":"iana","compressible":true,"extensions":["cdfx"]},"application/cdmi-capability":{"source":"iana","extensions":["cdmia"]},"application/cdmi-container":{"source":"iana","extensions":["cdmic"]},"application/cdmi-domain":{"source":"iana","extensions":["cdmid"]},"application/cdmi-object":{"source":"iana","extensions":["cdmio"]},"application/cdmi-queue":{"source":"iana","extensions":["cdmiq"]},"application/cdni":{"source":"iana"},"application/cea":{"source":"iana"},"application/cea-2018+xml":{"source":"iana","compressible":true},"application/cellml+xml":{"source":"iana","compressible":true},"application/cfw":{"source":"iana"},"application/clue+xml":{"source":"iana","compressible":true},"application/clue_info+xml":{"source":"iana","compressible":true},"application/cms":{"source":"iana"},"application/cnrp+xml":{"source":"iana","compressible":true},"application/coap-group+json":{"source":"iana","compressible":true},"application/coap-payload":{"source":"iana"},"application/commonground":{"source":"iana"},"application/conference-info+xml":{"source":"iana","compressible":true},"application/cose":{"source":"iana"},"application/cose-key":{"source":"iana"},"application/cose-key-set":{"source":"iana"},"application/cpl+xml":{"source":"iana","compressible":true},"application/csrattrs":{"source":"iana"},"application/csta+xml":{"source":"iana","compressible":true},"application/cstadata+xml":{"source":"iana","compressible":true},"application/csvm+json":{"source":"iana","compressible":true},"application/cu-seeme":{"source":"apache","extensions":["cu"]},"application/cwt":{"source":"iana"},"application/cybercash":{"source":"iana"},"application/dart":{"compressible":true},"application/dash+xml":{"source":"iana","compressible":true,"extensions":["mpd"]},"application/dashdelta":{"source":"iana"},"application/davmount+xml":{"source":"iana","compressible":true,"extensions":["davmount"]},"application/dca-rft":{"source":"iana"},"application/dcd":{"source":"iana"},"application/dec-dx":{"source":"iana"},"application/dialog-info+xml":{"source":"iana","compressible":true},"application/dicom":{"source":"iana"},"application/dicom+json":{"source":"iana","compressible":true},"application/dicom+xml":{"source":"iana","compressible":true},"application/dii":{"source":"iana"},"application/dit":{"source":"iana"},"application/dns":{"source":"iana"},"application/dns+json":{"source":"iana","compressible":true},"application/dns-message":{"source":"iana"},"application/docbook+xml":{"source":"apache","compressible":true,"extensions":["dbk"]},"application/dots+cbor":{"source":"iana"},"application/dskpp+xml":{"source":"iana","compressible":true},"application/dssc+der":{"source":"iana","extensions":["dssc"]},"application/dssc+xml":{"source":"iana","compressible":true,"extensions":["xdssc"]},"application/dvcs":{"source":"iana"},"application/ecmascript":{"source":"iana","compressible":true,"extensions":["ecma","es"]},"application/edi-consent":{"source":"iana"},"application/edi-x12":{"source":"iana","compressible":false},"application/edifact":{"source":"iana","compressible":false},"application/efi":{"source":"iana"},"application/emergencycalldata.comment+xml":{"source":"iana","compressible":true},"application/emergencycalldata.control+xml":{"source":"iana","compressible":true},"application/emergencycalldata.deviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.ecall.msd":{"source":"iana"},"application/emergencycalldata.providerinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.serviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.subscriberinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.veds+xml":{"source":"iana","compressible":true},"application/emma+xml":{"source":"iana","compressible":true,"extensions":["emma"]},"application/emotionml+xml":{"source":"iana","compressible":true,"extensions":["emotionml"]},"application/encaprtp":{"source":"iana"},"application/epp+xml":{"source":"iana","compressible":true},"application/epub+zip":{"source":"iana","compressible":false,"extensions":["epub"]},"application/eshop":{"source":"iana"},"application/exi":{"source":"iana","extensions":["exi"]},"application/expect-ct-report+json":{"source":"iana","compressible":true},"application/fastinfoset":{"source":"iana"},"application/fastsoap":{"source":"iana"},"application/fdt+xml":{"source":"iana","compressible":true,"extensions":["fdt"]},"application/fhir+json":{"source":"iana","charset":"UTF-8","compressible":true},"application/fhir+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/fido.trusted-apps+json":{"compressible":true},"application/fits":{"source":"iana"},"application/flexfec":{"source":"iana"},"application/font-sfnt":{"source":"iana"},"application/font-tdpfr":{"source":"iana","extensions":["pfr"]},"application/font-woff":{"source":"iana","compressible":false},"application/framework-attributes+xml":{"source":"iana","compressible":true},"application/geo+json":{"source":"iana","compressible":true,"extensions":["geojson"]},"application/geo+json-seq":{"source":"iana"},"application/geopackage+sqlite3":{"source":"iana"},"application/geoxacml+xml":{"source":"iana","compressible":true},"application/gltf-buffer":{"source":"iana"},"application/gml+xml":{"source":"iana","compressible":true,"extensions":["gml"]},"application/gpx+xml":{"source":"apache","compressible":true,"extensions":["gpx"]},"application/gxf":{"source":"apache","extensions":["gxf"]},"application/gzip":{"source":"iana","compressible":false,"extensions":["gz"]},"application/h224":{"source":"iana"},"application/held+xml":{"source":"iana","compressible":true},"application/hjson":{"extensions":["hjson"]},"application/http":{"source":"iana"},"application/hyperstudio":{"source":"iana","extensions":["stk"]},"application/ibe-key-request+xml":{"source":"iana","compressible":true},"application/ibe-pkg-reply+xml":{"source":"iana","compressible":true},"application/ibe-pp-data":{"source":"iana"},"application/iges":{"source":"iana"},"application/im-iscomposing+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/index":{"source":"iana"},"application/index.cmd":{"source":"iana"},"application/index.obj":{"source":"iana"},"application/index.response":{"source":"iana"},"application/index.vnd":{"source":"iana"},"application/inkml+xml":{"source":"iana","compressible":true,"extensions":["ink","inkml"]},"application/iotp":{"source":"iana"},"application/ipfix":{"source":"iana","extensions":["ipfix"]},"application/ipp":{"source":"iana"},"application/isup":{"source":"iana"},"application/its+xml":{"source":"iana","compressible":true,"extensions":["its"]},"application/java-archive":{"source":"apache","compressible":false,"extensions":["jar","war","ear"]},"application/java-serialized-object":{"source":"apache","compressible":false,"extensions":["ser"]},"application/java-vm":{"source":"apache","compressible":false,"extensions":["class"]},"application/javascript":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["js","mjs"]},"application/jf2feed+json":{"source":"iana","compressible":true},"application/jose":{"source":"iana"},"application/jose+json":{"source":"iana","compressible":true},"application/jrd+json":{"source":"iana","compressible":true},"application/json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["json","map"]},"application/json-patch+json":{"source":"iana","compressible":true},"application/json-seq":{"source":"iana"},"application/json5":{"extensions":["json5"]},"application/jsonml+json":{"source":"apache","compressible":true,"extensions":["jsonml"]},"application/jwk+json":{"source":"iana","compressible":true},"application/jwk-set+json":{"source":"iana","compressible":true},"application/jwt":{"source":"iana"},"application/kpml-request+xml":{"source":"iana","compressible":true},"application/kpml-response+xml":{"source":"iana","compressible":true},"application/ld+json":{"source":"iana","compressible":true,"extensions":["jsonld"]},"application/lgr+xml":{"source":"iana","compressible":true,"extensions":["lgr"]},"application/link-format":{"source":"iana"},"application/load-control+xml":{"source":"iana","compressible":true},"application/lost+xml":{"source":"iana","compressible":true,"extensions":["lostxml"]},"application/lostsync+xml":{"source":"iana","compressible":true},"application/lpf+zip":{"source":"iana","compressible":false},"application/lxf":{"source":"iana"},"application/mac-binhex40":{"source":"iana","extensions":["hqx"]},"application/mac-compactpro":{"source":"apache","extensions":["cpt"]},"application/macwriteii":{"source":"iana"},"application/mads+xml":{"source":"iana","compressible":true,"extensions":["mads"]},"application/manifest+json":{"charset":"UTF-8","compressible":true,"extensions":["webmanifest"]},"application/marc":{"source":"iana","extensions":["mrc"]},"application/marcxml+xml":{"source":"iana","compressible":true,"extensions":["mrcx"]},"application/mathematica":{"source":"iana","extensions":["ma","nb","mb"]},"application/mathml+xml":{"source":"iana","compressible":true,"extensions":["mathml"]},"application/mathml-content+xml":{"source":"iana","compressible":true},"application/mathml-presentation+xml":{"source":"iana","compressible":true},"application/mbms-associated-procedure-description+xml":{"source":"iana","compressible":true},"application/mbms-deregister+xml":{"source":"iana","compressible":true},"application/mbms-envelope+xml":{"source":"iana","compressible":true},"application/mbms-msk+xml":{"source":"iana","compressible":true},"application/mbms-msk-response+xml":{"source":"iana","compressible":true},"application/mbms-protection-description+xml":{"source":"iana","compressible":true},"application/mbms-reception-report+xml":{"source":"iana","compressible":true},"application/mbms-register+xml":{"source":"iana","compressible":true},"application/mbms-register-response+xml":{"source":"iana","compressible":true},"application/mbms-schedule+xml":{"source":"iana","compressible":true},"application/mbms-user-service-description+xml":{"source":"iana","compressible":true},"application/mbox":{"source":"iana","extensions":["mbox"]},"application/media-policy-dataset+xml":{"source":"iana","compressible":true},"application/media_control+xml":{"source":"iana","compressible":true},"application/mediaservercontrol+xml":{"source":"iana","compressible":true,"extensions":["mscml"]},"application/merge-patch+json":{"source":"iana","compressible":true},"application/metalink+xml":{"source":"apache","compressible":true,"extensions":["metalink"]},"application/metalink4+xml":{"source":"iana","compressible":true,"extensions":["meta4"]},"application/mets+xml":{"source":"iana","compressible":true,"extensions":["mets"]},"application/mf4":{"source":"iana"},"application/mikey":{"source":"iana"},"application/mipc":{"source":"iana"},"application/mmt-aei+xml":{"source":"iana","compressible":true,"extensions":["maei"]},"application/mmt-usd+xml":{"source":"iana","compressible":true,"extensions":["musd"]},"application/mods+xml":{"source":"iana","compressible":true,"extensions":["mods"]},"application/moss-keys":{"source":"iana"},"application/moss-signature":{"source":"iana"},"application/mosskey-data":{"source":"iana"},"application/mosskey-request":{"source":"iana"},"application/mp21":{"source":"iana","extensions":["m21","mp21"]},"application/mp4":{"source":"iana","extensions":["mp4s","m4p"]},"application/mpeg4-generic":{"source":"iana"},"application/mpeg4-iod":{"source":"iana"},"application/mpeg4-iod-xmt":{"source":"iana"},"application/mrb-consumer+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/mrb-publish+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/msc-ivr+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msc-mixer+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msword":{"source":"iana","compressible":false,"extensions":["doc","dot"]},"application/mud+json":{"source":"iana","compressible":true},"application/multipart-core":{"source":"iana"},"application/mxf":{"source":"iana","extensions":["mxf"]},"application/n-quads":{"source":"iana","extensions":["nq"]},"application/n-triples":{"source":"iana","extensions":["nt"]},"application/nasdata":{"source":"iana"},"application/news-checkgroups":{"source":"iana","charset":"US-ASCII"},"application/news-groupinfo":{"source":"iana","charset":"US-ASCII"},"application/news-transmission":{"source":"iana"},"application/nlsml+xml":{"source":"iana","compressible":true},"application/node":{"source":"iana","extensions":["cjs"]},"application/nss":{"source":"iana"},"application/ocsp-request":{"source":"iana"},"application/ocsp-response":{"source":"iana"},"application/octet-stream":{"source":"iana","compressible":false,"extensions":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{"source":"iana","extensions":["oda"]},"application/odm+xml":{"source":"iana","compressible":true},"application/odx":{"source":"iana"},"application/oebps-package+xml":{"source":"iana","compressible":true,"extensions":["opf"]},"application/ogg":{"source":"iana","compressible":false,"extensions":["ogx"]},"application/omdoc+xml":{"source":"apache","compressible":true,"extensions":["omdoc"]},"application/onenote":{"source":"apache","extensions":["onetoc","onetoc2","onetmp","onepkg"]},"application/oscore":{"source":"iana"},"application/oxps":{"source":"iana","extensions":["oxps"]},"application/p2p-overlay+xml":{"source":"iana","compressible":true,"extensions":["relo"]},"application/parityfec":{"source":"iana"},"application/passport":{"source":"iana"},"application/patch-ops-error+xml":{"source":"iana","compressible":true,"extensions":["xer"]},"application/pdf":{"source":"iana","compressible":false,"extensions":["pdf"]},"application/pdx":{"source":"iana"},"application/pem-certificate-chain":{"source":"iana"},"application/pgp-encrypted":{"source":"iana","compressible":false,"extensions":["pgp"]},"application/pgp-keys":{"source":"iana"},"application/pgp-signature":{"source":"iana","extensions":["asc","sig"]},"application/pics-rules":{"source":"apache","extensions":["prf"]},"application/pidf+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pidf-diff+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pkcs10":{"source":"iana","extensions":["p10"]},"application/pkcs12":{"source":"iana"},"application/pkcs7-mime":{"source":"iana","extensions":["p7m","p7c"]},"application/pkcs7-signature":{"source":"iana","extensions":["p7s"]},"application/pkcs8":{"source":"iana","extensions":["p8"]},"application/pkcs8-encrypted":{"source":"iana"},"application/pkix-attr-cert":{"source":"iana","extensions":["ac"]},"application/pkix-cert":{"source":"iana","extensions":["cer"]},"application/pkix-crl":{"source":"iana","extensions":["crl"]},"application/pkix-pkipath":{"source":"iana","extensions":["pkipath"]},"application/pkixcmp":{"source":"iana","extensions":["pki"]},"application/pls+xml":{"source":"iana","compressible":true,"extensions":["pls"]},"application/poc-settings+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/postscript":{"source":"iana","compressible":true,"extensions":["ai","eps","ps"]},"application/ppsp-tracker+json":{"source":"iana","compressible":true},"application/problem+json":{"source":"iana","compressible":true},"application/problem+xml":{"source":"iana","compressible":true},"application/provenance+xml":{"source":"iana","compressible":true,"extensions":["provx"]},"application/prs.alvestrand.titrax-sheet":{"source":"iana"},"application/prs.cww":{"source":"iana","extensions":["cww"]},"application/prs.hpub+zip":{"source":"iana","compressible":false},"application/prs.nprend":{"source":"iana"},"application/prs.plucker":{"source":"iana"},"application/prs.rdf-xml-crypt":{"source":"iana"},"application/prs.xsf+xml":{"source":"iana","compressible":true},"application/pskc+xml":{"source":"iana","compressible":true,"extensions":["pskcxml"]},"application/pvd+json":{"source":"iana","compressible":true},"application/qsig":{"source":"iana"},"application/raml+yaml":{"compressible":true,"extensions":["raml"]},"application/raptorfec":{"source":"iana"},"application/rdap+json":{"source":"iana","compressible":true},"application/rdf+xml":{"source":"iana","compressible":true,"extensions":["rdf","owl"]},"application/reginfo+xml":{"source":"iana","compressible":true,"extensions":["rif"]},"application/relax-ng-compact-syntax":{"source":"iana","extensions":["rnc"]},"application/remote-printing":{"source":"iana"},"application/reputon+json":{"source":"iana","compressible":true},"application/resource-lists+xml":{"source":"iana","compressible":true,"extensions":["rl"]},"application/resource-lists-diff+xml":{"source":"iana","compressible":true,"extensions":["rld"]},"application/rfc+xml":{"source":"iana","compressible":true},"application/riscos":{"source":"iana"},"application/rlmi+xml":{"source":"iana","compressible":true},"application/rls-services+xml":{"source":"iana","compressible":true,"extensions":["rs"]},"application/route-apd+xml":{"source":"iana","compressible":true,"extensions":["rapd"]},"application/route-s-tsid+xml":{"source":"iana","compressible":true,"extensions":["sls"]},"application/route-usd+xml":{"source":"iana","compressible":true,"extensions":["rusd"]},"application/rpki-ghostbusters":{"source":"iana","extensions":["gbr"]},"application/rpki-manifest":{"source":"iana","extensions":["mft"]},"application/rpki-publication":{"source":"iana"},"application/rpki-roa":{"source":"iana","extensions":["roa"]},"application/rpki-updown":{"source":"iana"},"application/rsd+xml":{"source":"apache","compressible":true,"extensions":["rsd"]},"application/rss+xml":{"source":"apache","compressible":true,"extensions":["rss"]},"application/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"application/rtploopback":{"source":"iana"},"application/rtx":{"source":"iana"},"application/samlassertion+xml":{"source":"iana","compressible":true},"application/samlmetadata+xml":{"source":"iana","compressible":true},"application/sbe":{"source":"iana"},"application/sbml+xml":{"source":"iana","compressible":true,"extensions":["sbml"]},"application/scaip+xml":{"source":"iana","compressible":true},"application/scim+json":{"source":"iana","compressible":true},"application/scvp-cv-request":{"source":"iana","extensions":["scq"]},"application/scvp-cv-response":{"source":"iana","extensions":["scs"]},"application/scvp-vp-request":{"source":"iana","extensions":["spq"]},"application/scvp-vp-response":{"source":"iana","extensions":["spp"]},"application/sdp":{"source":"iana","extensions":["sdp"]},"application/secevent+jwt":{"source":"iana"},"application/senml+cbor":{"source":"iana"},"application/senml+json":{"source":"iana","compressible":true},"application/senml+xml":{"source":"iana","compressible":true,"extensions":["senmlx"]},"application/senml-etch+cbor":{"source":"iana"},"application/senml-etch+json":{"source":"iana","compressible":true},"application/senml-exi":{"source":"iana"},"application/sensml+cbor":{"source":"iana"},"application/sensml+json":{"source":"iana","compressible":true},"application/sensml+xml":{"source":"iana","compressible":true,"extensions":["sensmlx"]},"application/sensml-exi":{"source":"iana"},"application/sep+xml":{"source":"iana","compressible":true},"application/sep-exi":{"source":"iana"},"application/session-info":{"source":"iana"},"application/set-payment":{"source":"iana"},"application/set-payment-initiation":{"source":"iana","extensions":["setpay"]},"application/set-registration":{"source":"iana"},"application/set-registration-initiation":{"source":"iana","extensions":["setreg"]},"application/sgml":{"source":"iana"},"application/sgml-open-catalog":{"source":"iana"},"application/shf+xml":{"source":"iana","compressible":true,"extensions":["shf"]},"application/sieve":{"source":"iana","extensions":["siv","sieve"]},"application/simple-filter+xml":{"source":"iana","compressible":true},"application/simple-message-summary":{"source":"iana"},"application/simplesymbolcontainer":{"source":"iana"},"application/sipc":{"source":"iana"},"application/slate":{"source":"iana"},"application/smil":{"source":"iana"},"application/smil+xml":{"source":"iana","compressible":true,"extensions":["smi","smil"]},"application/smpte336m":{"source":"iana"},"application/soap+fastinfoset":{"source":"iana"},"application/soap+xml":{"source":"iana","compressible":true},"application/sparql-query":{"source":"iana","extensions":["rq"]},"application/sparql-results+xml":{"source":"iana","compressible":true,"extensions":["srx"]},"application/spirits-event+xml":{"source":"iana","compressible":true},"application/sql":{"source":"iana"},"application/srgs":{"source":"iana","extensions":["gram"]},"application/srgs+xml":{"source":"iana","compressible":true,"extensions":["grxml"]},"application/sru+xml":{"source":"iana","compressible":true,"extensions":["sru"]},"application/ssdl+xml":{"source":"apache","compressible":true,"extensions":["ssdl"]},"application/ssml+xml":{"source":"iana","compressible":true,"extensions":["ssml"]},"application/stix+json":{"source":"iana","compressible":true},"application/swid+xml":{"source":"iana","compressible":true,"extensions":["swidtag"]},"application/tamp-apex-update":{"source":"iana"},"application/tamp-apex-update-confirm":{"source":"iana"},"application/tamp-community-update":{"source":"iana"},"application/tamp-community-update-confirm":{"source":"iana"},"application/tamp-error":{"source":"iana"},"application/tamp-sequence-adjust":{"source":"iana"},"application/tamp-sequence-adjust-confirm":{"source":"iana"},"application/tamp-status-query":{"source":"iana"},"application/tamp-status-response":{"source":"iana"},"application/tamp-update":{"source":"iana"},"application/tamp-update-confirm":{"source":"iana"},"application/tar":{"compressible":true},"application/taxii+json":{"source":"iana","compressible":true},"application/td+json":{"source":"iana","compressible":true},"application/tei+xml":{"source":"iana","compressible":true,"extensions":["tei","teicorpus"]},"application/tetra_isi":{"source":"iana"},"application/thraud+xml":{"source":"iana","compressible":true,"extensions":["tfi"]},"application/timestamp-query":{"source":"iana"},"application/timestamp-reply":{"source":"iana"},"application/timestamped-data":{"source":"iana","extensions":["tsd"]},"application/tlsrpt+gzip":{"source":"iana"},"application/tlsrpt+json":{"source":"iana","compressible":true},"application/tnauthlist":{"source":"iana"},"application/toml":{"compressible":true,"extensions":["toml"]},"application/trickle-ice-sdpfrag":{"source":"iana"},"application/trig":{"source":"iana"},"application/ttml+xml":{"source":"iana","compressible":true,"extensions":["ttml"]},"application/tve-trigger":{"source":"iana"},"application/tzif":{"source":"iana"},"application/tzif-leap":{"source":"iana"},"application/ulpfec":{"source":"iana"},"application/urc-grpsheet+xml":{"source":"iana","compressible":true},"application/urc-ressheet+xml":{"source":"iana","compressible":true,"extensions":["rsheet"]},"application/urc-targetdesc+xml":{"source":"iana","compressible":true},"application/urc-uisocketdesc+xml":{"source":"iana","compressible":true},"application/vcard+json":{"source":"iana","compressible":true},"application/vcard+xml":{"source":"iana","compressible":true},"application/vemmi":{"source":"iana"},"application/vividence.scriptfile":{"source":"apache"},"application/vnd.1000minds.decision-model+xml":{"source":"iana","compressible":true,"extensions":["1km"]},"application/vnd.3gpp-prose+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-prose-pc3ch+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-v2x-local-service-information":{"source":"iana"},"application/vnd.3gpp.access-transfer-events+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.bsf+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gmop+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mc-signalling-ear":{"source":"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-payload":{"source":"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-signalling":{"source":"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-floor-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-signed+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-init-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-transmission-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mid-call+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.pic-bw-large":{"source":"iana","extensions":["plb"]},"application/vnd.3gpp.pic-bw-small":{"source":"iana","extensions":["psb"]},"application/vnd.3gpp.pic-bw-var":{"source":"iana","extensions":["pvb"]},"application/vnd.3gpp.sms":{"source":"iana"},"application/vnd.3gpp.sms+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-ext+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.state-and-event-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ussd+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.bcmcsinfo+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.sms":{"source":"iana"},"application/vnd.3gpp2.tcap":{"source":"iana","extensions":["tcap"]},"application/vnd.3lightssoftware.imagescal":{"source":"iana"},"application/vnd.3m.post-it-notes":{"source":"iana","extensions":["pwn"]},"application/vnd.accpac.simply.aso":{"source":"iana","extensions":["aso"]},"application/vnd.accpac.simply.imp":{"source":"iana","extensions":["imp"]},"application/vnd.acucobol":{"source":"iana","extensions":["acu"]},"application/vnd.acucorp":{"source":"iana","extensions":["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{"source":"apache","compressible":false,"extensions":["air"]},"application/vnd.adobe.flash.movie":{"source":"iana"},"application/vnd.adobe.formscentral.fcdt":{"source":"iana","extensions":["fcdt"]},"application/vnd.adobe.fxp":{"source":"iana","extensions":["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{"source":"iana"},"application/vnd.adobe.xdp+xml":{"source":"iana","compressible":true,"extensions":["xdp"]},"application/vnd.adobe.xfdf":{"source":"iana","extensions":["xfdf"]},"application/vnd.aether.imp":{"source":"iana"},"application/vnd.afpc.afplinedata":{"source":"iana"},"application/vnd.afpc.afplinedata-pagedef":{"source":"iana"},"application/vnd.afpc.foca-charset":{"source":"iana"},"application/vnd.afpc.foca-codedfont":{"source":"iana"},"application/vnd.afpc.foca-codepage":{"source":"iana"},"application/vnd.afpc.modca":{"source":"iana"},"application/vnd.afpc.modca-formdef":{"source":"iana"},"application/vnd.afpc.modca-mediummap":{"source":"iana"},"application/vnd.afpc.modca-objectcontainer":{"source":"iana"},"application/vnd.afpc.modca-overlay":{"source":"iana"},"application/vnd.afpc.modca-pagesegment":{"source":"iana"},"application/vnd.ah-barcode":{"source":"iana"},"application/vnd.ahead.space":{"source":"iana","extensions":["ahead"]},"application/vnd.airzip.filesecure.azf":{"source":"iana","extensions":["azf"]},"application/vnd.airzip.filesecure.azs":{"source":"iana","extensions":["azs"]},"application/vnd.amadeus+json":{"source":"iana","compressible":true},"application/vnd.amazon.ebook":{"source":"apache","extensions":["azw"]},"application/vnd.amazon.mobi8-ebook":{"source":"iana"},"application/vnd.americandynamics.acc":{"source":"iana","extensions":["acc"]},"application/vnd.amiga.ami":{"source":"iana","extensions":["ami"]},"application/vnd.amundsen.maze+xml":{"source":"iana","compressible":true},"application/vnd.android.ota":{"source":"iana"},"application/vnd.android.package-archive":{"source":"apache","compressible":false,"extensions":["apk"]},"application/vnd.anki":{"source":"iana"},"application/vnd.anser-web-certificate-issue-initiation":{"source":"iana","extensions":["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{"source":"apache","extensions":["fti"]},"application/vnd.antix.game-component":{"source":"iana","extensions":["atx"]},"application/vnd.apache.thrift.binary":{"source":"iana"},"application/vnd.apache.thrift.compact":{"source":"iana"},"application/vnd.apache.thrift.json":{"source":"iana"},"application/vnd.api+json":{"source":"iana","compressible":true},"application/vnd.aplextor.warrp+json":{"source":"iana","compressible":true},"application/vnd.apothekende.reservation+json":{"source":"iana","compressible":true},"application/vnd.apple.installer+xml":{"source":"iana","compressible":true,"extensions":["mpkg"]},"application/vnd.apple.keynote":{"source":"iana","extensions":["keynote"]},"application/vnd.apple.mpegurl":{"source":"iana","extensions":["m3u8"]},"application/vnd.apple.numbers":{"source":"iana","extensions":["numbers"]},"application/vnd.apple.pages":{"source":"iana","extensions":["pages"]},"application/vnd.apple.pkpass":{"compressible":false,"extensions":["pkpass"]},"application/vnd.arastra.swi":{"source":"iana"},"application/vnd.aristanetworks.swi":{"source":"iana","extensions":["swi"]},"application/vnd.artisan+json":{"source":"iana","compressible":true},"application/vnd.artsquare":{"source":"iana"},"application/vnd.astraea-software.iota":{"source":"iana","extensions":["iota"]},"application/vnd.audiograph":{"source":"iana","extensions":["aep"]},"application/vnd.autopackage":{"source":"iana"},"application/vnd.avalon+json":{"source":"iana","compressible":true},"application/vnd.avistar+xml":{"source":"iana","compressible":true},"application/vnd.balsamiq.bmml+xml":{"source":"iana","compressible":true,"extensions":["bmml"]},"application/vnd.balsamiq.bmpr":{"source":"iana"},"application/vnd.banana-accounting":{"source":"iana"},"application/vnd.bbf.usp.error":{"source":"iana"},"application/vnd.bbf.usp.msg":{"source":"iana"},"application/vnd.bbf.usp.msg+json":{"source":"iana","compressible":true},"application/vnd.bekitzur-stech+json":{"source":"iana","compressible":true},"application/vnd.bint.med-content":{"source":"iana"},"application/vnd.biopax.rdf+xml":{"source":"iana","compressible":true},"application/vnd.blink-idb-value-wrapper":{"source":"iana"},"application/vnd.blueice.multipass":{"source":"iana","extensions":["mpm"]},"application/vnd.bluetooth.ep.oob":{"source":"iana"},"application/vnd.bluetooth.le.oob":{"source":"iana"},"application/vnd.bmi":{"source":"iana","extensions":["bmi"]},"application/vnd.bpf":{"source":"iana"},"application/vnd.bpf3":{"source":"iana"},"application/vnd.businessobjects":{"source":"iana","extensions":["rep"]},"application/vnd.byu.uapi+json":{"source":"iana","compressible":true},"application/vnd.cab-jscript":{"source":"iana"},"application/vnd.canon-cpdl":{"source":"iana"},"application/vnd.canon-lips":{"source":"iana"},"application/vnd.capasystems-pg+json":{"source":"iana","compressible":true},"application/vnd.cendio.thinlinc.clientconf":{"source":"iana"},"application/vnd.century-systems.tcp_stream":{"source":"iana"},"application/vnd.chemdraw+xml":{"source":"iana","compressible":true,"extensions":["cdxml"]},"application/vnd.chess-pgn":{"source":"iana"},"application/vnd.chipnuts.karaoke-mmd":{"source":"iana","extensions":["mmd"]},"application/vnd.ciedi":{"source":"iana"},"application/vnd.cinderella":{"source":"iana","extensions":["cdy"]},"application/vnd.cirpack.isdn-ext":{"source":"iana"},"application/vnd.citationstyles.style+xml":{"source":"iana","compressible":true,"extensions":["csl"]},"application/vnd.claymore":{"source":"iana","extensions":["cla"]},"application/vnd.cloanto.rp9":{"source":"iana","extensions":["rp9"]},"application/vnd.clonk.c4group":{"source":"iana","extensions":["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{"source":"iana","extensions":["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{"source":"iana","extensions":["c11amz"]},"application/vnd.coffeescript":{"source":"iana"},"application/vnd.collabio.xodocuments.document":{"source":"iana"},"application/vnd.collabio.xodocuments.document-template":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation-template":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{"source":"iana"},"application/vnd.collection+json":{"source":"iana","compressible":true},"application/vnd.collection.doc+json":{"source":"iana","compressible":true},"application/vnd.collection.next+json":{"source":"iana","compressible":true},"application/vnd.comicbook+zip":{"source":"iana","compressible":false},"application/vnd.comicbook-rar":{"source":"iana"},"application/vnd.commerce-battelle":{"source":"iana"},"application/vnd.commonspace":{"source":"iana","extensions":["csp"]},"application/vnd.contact.cmsg":{"source":"iana","extensions":["cdbcmsg"]},"application/vnd.coreos.ignition+json":{"source":"iana","compressible":true},"application/vnd.cosmocaller":{"source":"iana","extensions":["cmc"]},"application/vnd.crick.clicker":{"source":"iana","extensions":["clkx"]},"application/vnd.crick.clicker.keyboard":{"source":"iana","extensions":["clkk"]},"application/vnd.crick.clicker.palette":{"source":"iana","extensions":["clkp"]},"application/vnd.crick.clicker.template":{"source":"iana","extensions":["clkt"]},"application/vnd.crick.clicker.wordbank":{"source":"iana","extensions":["clkw"]},"application/vnd.criticaltools.wbs+xml":{"source":"iana","compressible":true,"extensions":["wbs"]},"application/vnd.cryptii.pipe+json":{"source":"iana","compressible":true},"application/vnd.crypto-shade-file":{"source":"iana"},"application/vnd.ctc-posml":{"source":"iana","extensions":["pml"]},"application/vnd.ctct.ws+xml":{"source":"iana","compressible":true},"application/vnd.cups-pdf":{"source":"iana"},"application/vnd.cups-postscript":{"source":"iana"},"application/vnd.cups-ppd":{"source":"iana","extensions":["ppd"]},"application/vnd.cups-raster":{"source":"iana"},"application/vnd.cups-raw":{"source":"iana"},"application/vnd.curl":{"source":"iana"},"application/vnd.curl.car":{"source":"apache","extensions":["car"]},"application/vnd.curl.pcurl":{"source":"apache","extensions":["pcurl"]},"application/vnd.cyan.dean.root+xml":{"source":"iana","compressible":true},"application/vnd.cybank":{"source":"iana"},"application/vnd.d2l.coursepackage1p0+zip":{"source":"iana","compressible":false},"application/vnd.dart":{"source":"iana","compressible":true,"extensions":["dart"]},"application/vnd.data-vision.rdz":{"source":"iana","extensions":["rdz"]},"application/vnd.datapackage+json":{"source":"iana","compressible":true},"application/vnd.dataresource+json":{"source":"iana","compressible":true},"application/vnd.dbf":{"source":"iana"},"application/vnd.debian.binary-package":{"source":"iana"},"application/vnd.dece.data":{"source":"iana","extensions":["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{"source":"iana","compressible":true,"extensions":["uvt","uvvt"]},"application/vnd.dece.unspecified":{"source":"iana","extensions":["uvx","uvvx"]},"application/vnd.dece.zip":{"source":"iana","extensions":["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{"source":"iana","extensions":["fe_launch"]},"application/vnd.desmume.movie":{"source":"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{"source":"iana"},"application/vnd.dm.delegation+xml":{"source":"iana","compressible":true},"application/vnd.dna":{"source":"iana","extensions":["dna"]},"application/vnd.document+json":{"source":"iana","compressible":true},"application/vnd.dolby.mlp":{"source":"apache","extensions":["mlp"]},"application/vnd.dolby.mobile.1":{"source":"iana"},"application/vnd.dolby.mobile.2":{"source":"iana"},"application/vnd.doremir.scorecloud-binary-document":{"source":"iana"},"application/vnd.dpgraph":{"source":"iana","extensions":["dpg"]},"application/vnd.dreamfactory":{"source":"iana","extensions":["dfac"]},"application/vnd.drive+json":{"source":"iana","compressible":true},"application/vnd.ds-keypoint":{"source":"apache","extensions":["kpxx"]},"application/vnd.dtg.local":{"source":"iana"},"application/vnd.dtg.local.flash":{"source":"iana"},"application/vnd.dtg.local.html":{"source":"iana"},"application/vnd.dvb.ait":{"source":"iana","extensions":["ait"]},"application/vnd.dvb.dvbisl+xml":{"source":"iana","compressible":true},"application/vnd.dvb.dvbj":{"source":"iana"},"application/vnd.dvb.esgcontainer":{"source":"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess2":{"source":"iana"},"application/vnd.dvb.ipdcesgpdd":{"source":"iana"},"application/vnd.dvb.ipdcroaming":{"source":"iana"},"application/vnd.dvb.iptv.alfec-base":{"source":"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{"source":"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-container+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-generic+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-msglist+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-request+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-response+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-init+xml":{"source":"iana","compressible":true},"application/vnd.dvb.pfr":{"source":"iana"},"application/vnd.dvb.service":{"source":"iana","extensions":["svc"]},"application/vnd.dxr":{"source":"iana"},"application/vnd.dynageo":{"source":"iana","extensions":["geo"]},"application/vnd.dzr":{"source":"iana"},"application/vnd.easykaraoke.cdgdownload":{"source":"iana"},"application/vnd.ecdis-update":{"source":"iana"},"application/vnd.ecip.rlp":{"source":"iana"},"application/vnd.ecowin.chart":{"source":"iana","extensions":["mag"]},"application/vnd.ecowin.filerequest":{"source":"iana"},"application/vnd.ecowin.fileupdate":{"source":"iana"},"application/vnd.ecowin.series":{"source":"iana"},"application/vnd.ecowin.seriesrequest":{"source":"iana"},"application/vnd.ecowin.seriesupdate":{"source":"iana"},"application/vnd.efi.img":{"source":"iana"},"application/vnd.efi.iso":{"source":"iana"},"application/vnd.emclient.accessrequest+xml":{"source":"iana","compressible":true},"application/vnd.enliven":{"source":"iana","extensions":["nml"]},"application/vnd.enphase.envoy":{"source":"iana"},"application/vnd.eprints.data+xml":{"source":"iana","compressible":true},"application/vnd.epson.esf":{"source":"iana","extensions":["esf"]},"application/vnd.epson.msf":{"source":"iana","extensions":["msf"]},"application/vnd.epson.quickanime":{"source":"iana","extensions":["qam"]},"application/vnd.epson.salt":{"source":"iana","extensions":["slt"]},"application/vnd.epson.ssf":{"source":"iana","extensions":["ssf"]},"application/vnd.ericsson.quickcall":{"source":"iana"},"application/vnd.espass-espass+zip":{"source":"iana","compressible":false},"application/vnd.eszigno3+xml":{"source":"iana","compressible":true,"extensions":["es3","et3"]},"application/vnd.etsi.aoc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.asic-e+zip":{"source":"iana","compressible":false},"application/vnd.etsi.asic-s+zip":{"source":"iana","compressible":false},"application/vnd.etsi.cug+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvcommand+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-bc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-cod+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-npvr+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvservice+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsync+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvueprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mcid+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mheg5":{"source":"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{"source":"iana","compressible":true},"application/vnd.etsi.pstn+xml":{"source":"iana","compressible":true},"application/vnd.etsi.sci+xml":{"source":"iana","compressible":true},"application/vnd.etsi.simservs+xml":{"source":"iana","compressible":true},"application/vnd.etsi.timestamp-token":{"source":"iana"},"application/vnd.etsi.tsl+xml":{"source":"iana","compressible":true},"application/vnd.etsi.tsl.der":{"source":"iana"},"application/vnd.eudora.data":{"source":"iana"},"application/vnd.evolv.ecig.profile":{"source":"iana"},"application/vnd.evolv.ecig.settings":{"source":"iana"},"application/vnd.evolv.ecig.theme":{"source":"iana"},"application/vnd.exstream-empower+zip":{"source":"iana","compressible":false},"application/vnd.exstream-package":{"source":"iana"},"application/vnd.ezpix-album":{"source":"iana","extensions":["ez2"]},"application/vnd.ezpix-package":{"source":"iana","extensions":["ez3"]},"application/vnd.f-secure.mobile":{"source":"iana"},"application/vnd.fastcopy-disk-image":{"source":"iana"},"application/vnd.fdf":{"source":"iana","extensions":["fdf"]},"application/vnd.fdsn.mseed":{"source":"iana","extensions":["mseed"]},"application/vnd.fdsn.seed":{"source":"iana","extensions":["seed","dataless"]},"application/vnd.ffsns":{"source":"iana"},"application/vnd.ficlab.flb+zip":{"source":"iana","compressible":false},"application/vnd.filmit.zfc":{"source":"iana"},"application/vnd.fints":{"source":"iana"},"application/vnd.firemonkeys.cloudcell":{"source":"iana"},"application/vnd.flographit":{"source":"iana","extensions":["gph"]},"application/vnd.fluxtime.clip":{"source":"iana","extensions":["ftc"]},"application/vnd.font-fontforge-sfd":{"source":"iana"},"application/vnd.framemaker":{"source":"iana","extensions":["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{"source":"iana","extensions":["fnc"]},"application/vnd.frogans.ltf":{"source":"iana","extensions":["ltf"]},"application/vnd.fsc.weblaunch":{"source":"iana","extensions":["fsc"]},"application/vnd.fujitsu.oasys":{"source":"iana","extensions":["oas"]},"application/vnd.fujitsu.oasys2":{"source":"iana","extensions":["oa2"]},"application/vnd.fujitsu.oasys3":{"source":"iana","extensions":["oa3"]},"application/vnd.fujitsu.oasysgp":{"source":"iana","extensions":["fg5"]},"application/vnd.fujitsu.oasysprs":{"source":"iana","extensions":["bh2"]},"application/vnd.fujixerox.art-ex":{"source":"iana"},"application/vnd.fujixerox.art4":{"source":"iana"},"application/vnd.fujixerox.ddd":{"source":"iana","extensions":["ddd"]},"application/vnd.fujixerox.docuworks":{"source":"iana","extensions":["xdw"]},"application/vnd.fujixerox.docuworks.binder":{"source":"iana","extensions":["xbd"]},"application/vnd.fujixerox.docuworks.container":{"source":"iana"},"application/vnd.fujixerox.hbpl":{"source":"iana"},"application/vnd.fut-misnet":{"source":"iana"},"application/vnd.futoin+cbor":{"source":"iana"},"application/vnd.futoin+json":{"source":"iana","compressible":true},"application/vnd.fuzzysheet":{"source":"iana","extensions":["fzs"]},"application/vnd.genomatix.tuxedo":{"source":"iana","extensions":["txd"]},"application/vnd.gentics.grd+json":{"source":"iana","compressible":true},"application/vnd.geo+json":{"source":"iana","compressible":true},"application/vnd.geocube+xml":{"source":"iana","compressible":true},"application/vnd.geogebra.file":{"source":"iana","extensions":["ggb"]},"application/vnd.geogebra.tool":{"source":"iana","extensions":["ggt"]},"application/vnd.geometry-explorer":{"source":"iana","extensions":["gex","gre"]},"application/vnd.geonext":{"source":"iana","extensions":["gxt"]},"application/vnd.geoplan":{"source":"iana","extensions":["g2w"]},"application/vnd.geospace":{"source":"iana","extensions":["g3w"]},"application/vnd.gerber":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt-response":{"source":"iana"},"application/vnd.gmx":{"source":"iana","extensions":["gmx"]},"application/vnd.google-apps.document":{"compressible":false,"extensions":["gdoc"]},"application/vnd.google-apps.presentation":{"compressible":false,"extensions":["gslides"]},"application/vnd.google-apps.spreadsheet":{"compressible":false,"extensions":["gsheet"]},"application/vnd.google-earth.kml+xml":{"source":"iana","compressible":true,"extensions":["kml"]},"application/vnd.google-earth.kmz":{"source":"iana","compressible":false,"extensions":["kmz"]},"application/vnd.gov.sk.e-form+xml":{"source":"iana","compressible":true},"application/vnd.gov.sk.e-form+zip":{"source":"iana","compressible":false},"application/vnd.gov.sk.xmldatacontainer+xml":{"source":"iana","compressible":true},"application/vnd.grafeq":{"source":"iana","extensions":["gqf","gqs"]},"application/vnd.gridmp":{"source":"iana"},"application/vnd.groove-account":{"source":"iana","extensions":["gac"]},"application/vnd.groove-help":{"source":"iana","extensions":["ghf"]},"application/vnd.groove-identity-message":{"source":"iana","extensions":["gim"]},"application/vnd.groove-injector":{"source":"iana","extensions":["grv"]},"application/vnd.groove-tool-message":{"source":"iana","extensions":["gtm"]},"application/vnd.groove-tool-template":{"source":"iana","extensions":["tpl"]},"application/vnd.groove-vcard":{"source":"iana","extensions":["vcg"]},"application/vnd.hal+json":{"source":"iana","compressible":true},"application/vnd.hal+xml":{"source":"iana","compressible":true,"extensions":["hal"]},"application/vnd.handheld-entertainment+xml":{"source":"iana","compressible":true,"extensions":["zmm"]},"application/vnd.hbci":{"source":"iana","extensions":["hbci"]},"application/vnd.hc+json":{"source":"iana","compressible":true},"application/vnd.hcl-bireports":{"source":"iana"},"application/vnd.hdt":{"source":"iana"},"application/vnd.heroku+json":{"source":"iana","compressible":true},"application/vnd.hhe.lesson-player":{"source":"iana","extensions":["les"]},"application/vnd.hp-hpgl":{"source":"iana","extensions":["hpgl"]},"application/vnd.hp-hpid":{"source":"iana","extensions":["hpid"]},"application/vnd.hp-hps":{"source":"iana","extensions":["hps"]},"application/vnd.hp-jlyt":{"source":"iana","extensions":["jlt"]},"application/vnd.hp-pcl":{"source":"iana","extensions":["pcl"]},"application/vnd.hp-pclxl":{"source":"iana","extensions":["pclxl"]},"application/vnd.httphone":{"source":"iana"},"application/vnd.hydrostatix.sof-data":{"source":"iana","extensions":["sfd-hdstx"]},"application/vnd.hyper+json":{"source":"iana","compressible":true},"application/vnd.hyper-item+json":{"source":"iana","compressible":true},"application/vnd.hyperdrive+json":{"source":"iana","compressible":true},"application/vnd.hzn-3d-crossword":{"source":"iana"},"application/vnd.ibm.afplinedata":{"source":"iana"},"application/vnd.ibm.electronic-media":{"source":"iana"},"application/vnd.ibm.minipay":{"source":"iana","extensions":["mpy"]},"application/vnd.ibm.modcap":{"source":"iana","extensions":["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{"source":"iana","extensions":["irm"]},"application/vnd.ibm.secure-container":{"source":"iana","extensions":["sc"]},"application/vnd.iccprofile":{"source":"iana","extensions":["icc","icm"]},"application/vnd.ieee.1905":{"source":"iana"},"application/vnd.igloader":{"source":"iana","extensions":["igl"]},"application/vnd.imagemeter.folder+zip":{"source":"iana","compressible":false},"application/vnd.imagemeter.image+zip":{"source":"iana","compressible":false},"application/vnd.immervision-ivp":{"source":"iana","extensions":["ivp"]},"application/vnd.immervision-ivu":{"source":"iana","extensions":["ivu"]},"application/vnd.ims.imsccv1p1":{"source":"iana"},"application/vnd.ims.imsccv1p2":{"source":"iana"},"application/vnd.ims.imsccv1p3":{"source":"iana"},"application/vnd.ims.lis.v2.result+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy.id+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings.simple+json":{"source":"iana","compressible":true},"application/vnd.informedcontrol.rms+xml":{"source":"iana","compressible":true},"application/vnd.informix-visionary":{"source":"iana"},"application/vnd.infotech.project":{"source":"iana"},"application/vnd.infotech.project+xml":{"source":"iana","compressible":true},"application/vnd.innopath.wamp.notification":{"source":"iana"},"application/vnd.insors.igm":{"source":"iana","extensions":["igm"]},"application/vnd.intercon.formnet":{"source":"iana","extensions":["xpw","xpx"]},"application/vnd.intergeo":{"source":"iana","extensions":["i2g"]},"application/vnd.intertrust.digibox":{"source":"iana"},"application/vnd.intertrust.nncp":{"source":"iana"},"application/vnd.intu.qbo":{"source":"iana","extensions":["qbo"]},"application/vnd.intu.qfx":{"source":"iana","extensions":["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.conceptitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.knowledgeitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsmessage+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.packageitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.planningitem+xml":{"source":"iana","compressible":true},"application/vnd.ipunplugged.rcprofile":{"source":"iana","extensions":["rcprofile"]},"application/vnd.irepository.package+xml":{"source":"iana","compressible":true,"extensions":["irp"]},"application/vnd.is-xpr":{"source":"iana","extensions":["xpr"]},"application/vnd.isac.fcs":{"source":"iana","extensions":["fcs"]},"application/vnd.iso11783-10+zip":{"source":"iana","compressible":false},"application/vnd.jam":{"source":"iana","extensions":["jam"]},"application/vnd.japannet-directory-service":{"source":"iana"},"application/vnd.japannet-jpnstore-wakeup":{"source":"iana"},"application/vnd.japannet-payment-wakeup":{"source":"iana"},"application/vnd.japannet-registration":{"source":"iana"},"application/vnd.japannet-registration-wakeup":{"source":"iana"},"application/vnd.japannet-setstore-wakeup":{"source":"iana"},"application/vnd.japannet-verification":{"source":"iana"},"application/vnd.japannet-verification-wakeup":{"source":"iana"},"application/vnd.jcp.javame.midlet-rms":{"source":"iana","extensions":["rms"]},"application/vnd.jisp":{"source":"iana","extensions":["jisp"]},"application/vnd.joost.joda-archive":{"source":"iana","extensions":["joda"]},"application/vnd.jsk.isdn-ngn":{"source":"iana"},"application/vnd.kahootz":{"source":"iana","extensions":["ktz","ktr"]},"application/vnd.kde.karbon":{"source":"iana","extensions":["karbon"]},"application/vnd.kde.kchart":{"source":"iana","extensions":["chrt"]},"application/vnd.kde.kformula":{"source":"iana","extensions":["kfo"]},"application/vnd.kde.kivio":{"source":"iana","extensions":["flw"]},"application/vnd.kde.kontour":{"source":"iana","extensions":["kon"]},"application/vnd.kde.kpresenter":{"source":"iana","extensions":["kpr","kpt"]},"application/vnd.kde.kspread":{"source":"iana","extensions":["ksp"]},"application/vnd.kde.kword":{"source":"iana","extensions":["kwd","kwt"]},"application/vnd.kenameaapp":{"source":"iana","extensions":["htke"]},"application/vnd.kidspiration":{"source":"iana","extensions":["kia"]},"application/vnd.kinar":{"source":"iana","extensions":["kne","knp"]},"application/vnd.koan":{"source":"iana","extensions":["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{"source":"iana","extensions":["sse"]},"application/vnd.las":{"source":"iana"},"application/vnd.las.las+json":{"source":"iana","compressible":true},"application/vnd.las.las+xml":{"source":"iana","compressible":true,"extensions":["lasxml"]},"application/vnd.laszip":{"source":"iana"},"application/vnd.leap+json":{"source":"iana","compressible":true},"application/vnd.liberty-request+xml":{"source":"iana","compressible":true},"application/vnd.llamagraphics.life-balance.desktop":{"source":"iana","extensions":["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{"source":"iana","compressible":true,"extensions":["lbe"]},"application/vnd.logipipe.circuit+zip":{"source":"iana","compressible":false},"application/vnd.loom":{"source":"iana"},"application/vnd.lotus-1-2-3":{"source":"iana","extensions":["123"]},"application/vnd.lotus-approach":{"source":"iana","extensions":["apr"]},"application/vnd.lotus-freelance":{"source":"iana","extensions":["pre"]},"application/vnd.lotus-notes":{"source":"iana","extensions":["nsf"]},"application/vnd.lotus-organizer":{"source":"iana","extensions":["org"]},"application/vnd.lotus-screencam":{"source":"iana","extensions":["scm"]},"application/vnd.lotus-wordpro":{"source":"iana","extensions":["lwp"]},"application/vnd.macports.portpkg":{"source":"iana","extensions":["portpkg"]},"application/vnd.mapbox-vector-tile":{"source":"iana"},"application/vnd.marlin.drm.actiontoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.conftoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.license+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.mdcf":{"source":"iana"},"application/vnd.mason+json":{"source":"iana","compressible":true},"application/vnd.maxmind.maxmind-db":{"source":"iana"},"application/vnd.mcd":{"source":"iana","extensions":["mcd"]},"application/vnd.medcalcdata":{"source":"iana","extensions":["mc1"]},"application/vnd.mediastation.cdkey":{"source":"iana","extensions":["cdkey"]},"application/vnd.meridian-slingshot":{"source":"iana"},"application/vnd.mfer":{"source":"iana","extensions":["mwf"]},"application/vnd.mfmp":{"source":"iana","extensions":["mfm"]},"application/vnd.micro+json":{"source":"iana","compressible":true},"application/vnd.micrografx.flo":{"source":"iana","extensions":["flo"]},"application/vnd.micrografx.igx":{"source":"iana","extensions":["igx"]},"application/vnd.microsoft.portable-executable":{"source":"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{"source":"iana"},"application/vnd.miele+json":{"source":"iana","compressible":true},"application/vnd.mif":{"source":"iana","extensions":["mif"]},"application/vnd.minisoft-hp3000-save":{"source":"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{"source":"iana"},"application/vnd.mobius.daf":{"source":"iana","extensions":["daf"]},"application/vnd.mobius.dis":{"source":"iana","extensions":["dis"]},"application/vnd.mobius.mbk":{"source":"iana","extensions":["mbk"]},"application/vnd.mobius.mqy":{"source":"iana","extensions":["mqy"]},"application/vnd.mobius.msl":{"source":"iana","extensions":["msl"]},"application/vnd.mobius.plc":{"source":"iana","extensions":["plc"]},"application/vnd.mobius.txf":{"source":"iana","extensions":["txf"]},"application/vnd.mophun.application":{"source":"iana","extensions":["mpn"]},"application/vnd.mophun.certificate":{"source":"iana","extensions":["mpc"]},"application/vnd.motorola.flexsuite":{"source":"iana"},"application/vnd.motorola.flexsuite.adsi":{"source":"iana"},"application/vnd.motorola.flexsuite.fis":{"source":"iana"},"application/vnd.motorola.flexsuite.gotap":{"source":"iana"},"application/vnd.motorola.flexsuite.kmr":{"source":"iana"},"application/vnd.motorola.flexsuite.ttc":{"source":"iana"},"application/vnd.motorola.flexsuite.wem":{"source":"iana"},"application/vnd.motorola.iprm":{"source":"iana"},"application/vnd.mozilla.xul+xml":{"source":"iana","compressible":true,"extensions":["xul"]},"application/vnd.ms-3mfdocument":{"source":"iana"},"application/vnd.ms-artgalry":{"source":"iana","extensions":["cil"]},"application/vnd.ms-asf":{"source":"iana"},"application/vnd.ms-cab-compressed":{"source":"iana","extensions":["cab"]},"application/vnd.ms-color.iccprofile":{"source":"apache"},"application/vnd.ms-excel":{"source":"iana","compressible":false,"extensions":["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{"source":"iana","extensions":["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{"source":"iana","extensions":["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{"source":"iana","extensions":["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{"source":"iana","extensions":["xltm"]},"application/vnd.ms-fontobject":{"source":"iana","compressible":true,"extensions":["eot"]},"application/vnd.ms-htmlhelp":{"source":"iana","extensions":["chm"]},"application/vnd.ms-ims":{"source":"iana","extensions":["ims"]},"application/vnd.ms-lrm":{"source":"iana","extensions":["lrm"]},"application/vnd.ms-office.activex+xml":{"source":"iana","compressible":true},"application/vnd.ms-officetheme":{"source":"iana","extensions":["thmx"]},"application/vnd.ms-opentype":{"source":"apache","compressible":true},"application/vnd.ms-outlook":{"compressible":false,"extensions":["msg"]},"application/vnd.ms-package.obfuscated-opentype":{"source":"apache"},"application/vnd.ms-pki.seccat":{"source":"apache","extensions":["cat"]},"application/vnd.ms-pki.stl":{"source":"apache","extensions":["stl"]},"application/vnd.ms-playready.initiator+xml":{"source":"iana","compressible":true},"application/vnd.ms-powerpoint":{"source":"iana","compressible":false,"extensions":["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{"source":"iana","extensions":["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{"source":"iana","extensions":["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{"source":"iana","extensions":["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{"source":"iana","extensions":["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{"source":"iana","extensions":["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{"source":"iana","compressible":true},"application/vnd.ms-printing.printticket+xml":{"source":"apache","compressible":true},"application/vnd.ms-printschematicket+xml":{"source":"iana","compressible":true},"application/vnd.ms-project":{"source":"iana","extensions":["mpp","mpt"]},"application/vnd.ms-tnef":{"source":"iana"},"application/vnd.ms-windows.devicepairing":{"source":"iana"},"application/vnd.ms-windows.nwprinting.oob":{"source":"iana"},"application/vnd.ms-windows.printerpairing":{"source":"iana"},"application/vnd.ms-windows.wsd.oob":{"source":"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.lic-resp":{"source":"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.meter-resp":{"source":"iana"},"application/vnd.ms-word.document.macroenabled.12":{"source":"iana","extensions":["docm"]},"application/vnd.ms-word.template.macroenabled.12":{"source":"iana","extensions":["dotm"]},"application/vnd.ms-works":{"source":"iana","extensions":["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{"source":"iana","extensions":["wpl"]},"application/vnd.ms-xpsdocument":{"source":"iana","compressible":false,"extensions":["xps"]},"application/vnd.msa-disk-image":{"source":"iana"},"application/vnd.mseq":{"source":"iana","extensions":["mseq"]},"application/vnd.msign":{"source":"iana"},"application/vnd.multiad.creator":{"source":"iana"},"application/vnd.multiad.creator.cif":{"source":"iana"},"application/vnd.music-niff":{"source":"iana"},"application/vnd.musician":{"source":"iana","extensions":["mus"]},"application/vnd.muvee.style":{"source":"iana","extensions":["msty"]},"application/vnd.mynfc":{"source":"iana","extensions":["taglet"]},"application/vnd.ncd.control":{"source":"iana"},"application/vnd.ncd.reference":{"source":"iana"},"application/vnd.nearst.inv+json":{"source":"iana","compressible":true},"application/vnd.nervana":{"source":"iana"},"application/vnd.netfpx":{"source":"iana"},"application/vnd.neurolanguage.nlu":{"source":"iana","extensions":["nlu"]},"application/vnd.nimn":{"source":"iana"},"application/vnd.nintendo.nitro.rom":{"source":"iana"},"application/vnd.nintendo.snes.rom":{"source":"iana"},"application/vnd.nitf":{"source":"iana","extensions":["ntf","nitf"]},"application/vnd.noblenet-directory":{"source":"iana","extensions":["nnd"]},"application/vnd.noblenet-sealer":{"source":"iana","extensions":["nns"]},"application/vnd.noblenet-web":{"source":"iana","extensions":["nnw"]},"application/vnd.nokia.catalogs":{"source":"iana"},"application/vnd.nokia.conml+wbxml":{"source":"iana"},"application/vnd.nokia.conml+xml":{"source":"iana","compressible":true},"application/vnd.nokia.iptv.config+xml":{"source":"iana","compressible":true},"application/vnd.nokia.isds-radio-presets":{"source":"iana"},"application/vnd.nokia.landmark+wbxml":{"source":"iana"},"application/vnd.nokia.landmark+xml":{"source":"iana","compressible":true},"application/vnd.nokia.landmarkcollection+xml":{"source":"iana","compressible":true},"application/vnd.nokia.n-gage.ac+xml":{"source":"iana","compressible":true,"extensions":["ac"]},"application/vnd.nokia.n-gage.data":{"source":"iana","extensions":["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{"source":"iana","extensions":["n-gage"]},"application/vnd.nokia.ncd":{"source":"iana"},"application/vnd.nokia.pcd+wbxml":{"source":"iana"},"application/vnd.nokia.pcd+xml":{"source":"iana","compressible":true},"application/vnd.nokia.radio-preset":{"source":"iana","extensions":["rpst"]},"application/vnd.nokia.radio-presets":{"source":"iana","extensions":["rpss"]},"application/vnd.novadigm.edm":{"source":"iana","extensions":["edm"]},"application/vnd.novadigm.edx":{"source":"iana","extensions":["edx"]},"application/vnd.novadigm.ext":{"source":"iana","extensions":["ext"]},"application/vnd.ntt-local.content-share":{"source":"iana"},"application/vnd.ntt-local.file-transfer":{"source":"iana"},"application/vnd.ntt-local.ogw_remote-access":{"source":"iana"},"application/vnd.ntt-local.sip-ta_remote":{"source":"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{"source":"iana"},"application/vnd.oasis.opendocument.chart":{"source":"iana","extensions":["odc"]},"application/vnd.oasis.opendocument.chart-template":{"source":"iana","extensions":["otc"]},"application/vnd.oasis.opendocument.database":{"source":"iana","extensions":["odb"]},"application/vnd.oasis.opendocument.formula":{"source":"iana","extensions":["odf"]},"application/vnd.oasis.opendocument.formula-template":{"source":"iana","extensions":["odft"]},"application/vnd.oasis.opendocument.graphics":{"source":"iana","compressible":false,"extensions":["odg"]},"application/vnd.oasis.opendocument.graphics-template":{"source":"iana","extensions":["otg"]},"application/vnd.oasis.opendocument.image":{"source":"iana","extensions":["odi"]},"application/vnd.oasis.opendocument.image-template":{"source":"iana","extensions":["oti"]},"application/vnd.oasis.opendocument.presentation":{"source":"iana","compressible":false,"extensions":["odp"]},"application/vnd.oasis.opendocument.presentation-template":{"source":"iana","extensions":["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{"source":"iana","compressible":false,"extensions":["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{"source":"iana","extensions":["ots"]},"application/vnd.oasis.opendocument.text":{"source":"iana","compressible":false,"extensions":["odt"]},"application/vnd.oasis.opendocument.text-master":{"source":"iana","extensions":["odm"]},"application/vnd.oasis.opendocument.text-template":{"source":"iana","extensions":["ott"]},"application/vnd.oasis.opendocument.text-web":{"source":"iana","extensions":["oth"]},"application/vnd.obn":{"source":"iana"},"application/vnd.ocf+cbor":{"source":"iana"},"application/vnd.oci.image.manifest.v1+json":{"source":"iana","compressible":true},"application/vnd.oftn.l10n+json":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessdownload+xml":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessstreaming+xml":{"source":"iana","compressible":true},"application/vnd.oipf.cspg-hexbinary":{"source":"iana"},"application/vnd.oipf.dae.svg+xml":{"source":"iana","compressible":true},"application/vnd.oipf.dae.xhtml+xml":{"source":"iana","compressible":true},"application/vnd.oipf.mippvcontrolmessage+xml":{"source":"iana","compressible":true},"application/vnd.oipf.pae.gem":{"source":"iana"},"application/vnd.oipf.spdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.oipf.spdlist+xml":{"source":"iana","compressible":true},"application/vnd.oipf.ueprofile+xml":{"source":"iana","compressible":true},"application/vnd.oipf.userprofile+xml":{"source":"iana","compressible":true},"application/vnd.olpc-sugar":{"source":"iana","extensions":["xo"]},"application/vnd.oma-scws-config":{"source":"iana"},"application/vnd.oma-scws-http-request":{"source":"iana"},"application/vnd.oma-scws-http-response":{"source":"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.drm-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.imd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.ltkm":{"source":"iana"},"application/vnd.oma.bcast.notification+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.provisioningtrigger":{"source":"iana"},"application/vnd.oma.bcast.sgboot":{"source":"iana"},"application/vnd.oma.bcast.sgdd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sgdu":{"source":"iana"},"application/vnd.oma.bcast.simple-symbol-container":{"source":"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sprov+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.stkm":{"source":"iana"},"application/vnd.oma.cab-address-book+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-feature-handler+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-pcc+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-subs-invite+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-user-prefs+xml":{"source":"iana","compressible":true},"application/vnd.oma.dcd":{"source":"iana"},"application/vnd.oma.dcdc":{"source":"iana"},"application/vnd.oma.dd2+xml":{"source":"iana","compressible":true,"extensions":["dd2"]},"application/vnd.oma.drm.risd+xml":{"source":"iana","compressible":true},"application/vnd.oma.group-usage-list+xml":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+json":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+tlv":{"source":"iana"},"application/vnd.oma.pal+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.detailed-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.final-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.groups+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.invocation-descriptor+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.optimized-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.push":{"source":"iana"},"application/vnd.oma.scidm.messages+xml":{"source":"iana","compressible":true},"application/vnd.oma.xcap-directory+xml":{"source":"iana","compressible":true},"application/vnd.omads-email+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-file+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-folder+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omaloc-supl-init":{"source":"iana"},"application/vnd.onepager":{"source":"iana"},"application/vnd.onepagertamp":{"source":"iana"},"application/vnd.onepagertamx":{"source":"iana"},"application/vnd.onepagertat":{"source":"iana"},"application/vnd.onepagertatp":{"source":"iana"},"application/vnd.onepagertatx":{"source":"iana"},"application/vnd.openblox.game+xml":{"source":"iana","compressible":true,"extensions":["obgx"]},"application/vnd.openblox.game-binary":{"source":"iana"},"application/vnd.openeye.oeb":{"source":"iana"},"application/vnd.openofficeorg.extension":{"source":"apache","extensions":["oxt"]},"application/vnd.openstreetmap.data+xml":{"source":"iana","compressible":true,"extensions":["osm"]},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawing+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{"source":"iana","compressible":false,"extensions":["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slide":{"source":"iana","extensions":["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{"source":"iana","extensions":["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.template":{"source":"iana","extensions":["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{"source":"iana","compressible":false,"extensions":["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{"source":"iana","extensions":["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.theme+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.vmldrawing":{"source":"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{"source":"iana","compressible":false,"extensions":["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{"source":"iana","extensions":["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.core-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.relationships+xml":{"source":"iana","compressible":true},"application/vnd.oracle.resource+json":{"source":"iana","compressible":true},"application/vnd.orange.indata":{"source":"iana"},"application/vnd.osa.netdeploy":{"source":"iana"},"application/vnd.osgeo.mapguide.package":{"source":"iana","extensions":["mgp"]},"application/vnd.osgi.bundle":{"source":"iana"},"application/vnd.osgi.dp":{"source":"iana","extensions":["dp"]},"application/vnd.osgi.subsystem":{"source":"iana","extensions":["esa"]},"application/vnd.otps.ct-kip+xml":{"source":"iana","compressible":true},"application/vnd.oxli.countgraph":{"source":"iana"},"application/vnd.pagerduty+json":{"source":"iana","compressible":true},"application/vnd.palm":{"source":"iana","extensions":["pdb","pqa","oprc"]},"application/vnd.panoply":{"source":"iana"},"application/vnd.paos.xml":{"source":"iana"},"application/vnd.patentdive":{"source":"iana"},"application/vnd.patientecommsdoc":{"source":"iana"},"application/vnd.pawaafile":{"source":"iana","extensions":["paw"]},"application/vnd.pcos":{"source":"iana"},"application/vnd.pg.format":{"source":"iana","extensions":["str"]},"application/vnd.pg.osasli":{"source":"iana","extensions":["ei6"]},"application/vnd.piaccess.application-licence":{"source":"iana"},"application/vnd.picsel":{"source":"iana","extensions":["efif"]},"application/vnd.pmi.widget":{"source":"iana","extensions":["wg"]},"application/vnd.poc.group-advertisement+xml":{"source":"iana","compressible":true},"application/vnd.pocketlearn":{"source":"iana","extensions":["plf"]},"application/vnd.powerbuilder6":{"source":"iana","extensions":["pbd"]},"application/vnd.powerbuilder6-s":{"source":"iana"},"application/vnd.powerbuilder7":{"source":"iana"},"application/vnd.powerbuilder7-s":{"source":"iana"},"application/vnd.powerbuilder75":{"source":"iana"},"application/vnd.powerbuilder75-s":{"source":"iana"},"application/vnd.preminet":{"source":"iana"},"application/vnd.previewsystems.box":{"source":"iana","extensions":["box"]},"application/vnd.proteus.magazine":{"source":"iana","extensions":["mgz"]},"application/vnd.psfs":{"source":"iana"},"application/vnd.publishare-delta-tree":{"source":"iana","extensions":["qps"]},"application/vnd.pvi.ptid1":{"source":"iana","extensions":["ptid"]},"application/vnd.pwg-multiplexed":{"source":"iana"},"application/vnd.pwg-xhtml-print+xml":{"source":"iana","compressible":true},"application/vnd.qualcomm.brew-app-res":{"source":"iana"},"application/vnd.quarantainenet":{"source":"iana"},"application/vnd.quark.quarkxpress":{"source":"iana","extensions":["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{"source":"iana"},"application/vnd.radisys.moml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conn+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-stream+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-base+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-detect+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-group+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-speech+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-transform+xml":{"source":"iana","compressible":true},"application/vnd.rainstor.data":{"source":"iana"},"application/vnd.rapid":{"source":"iana"},"application/vnd.rar":{"source":"iana"},"application/vnd.realvnc.bed":{"source":"iana","extensions":["bed"]},"application/vnd.recordare.musicxml":{"source":"iana","extensions":["mxl"]},"application/vnd.recordare.musicxml+xml":{"source":"iana","compressible":true,"extensions":["musicxml"]},"application/vnd.renlearn.rlprint":{"source":"iana"},"application/vnd.restful+json":{"source":"iana","compressible":true},"application/vnd.rig.cryptonote":{"source":"iana","extensions":["cryptonote"]},"application/vnd.rim.cod":{"source":"apache","extensions":["cod"]},"application/vnd.rn-realmedia":{"source":"apache","extensions":["rm"]},"application/vnd.rn-realmedia-vbr":{"source":"apache","extensions":["rmvb"]},"application/vnd.route66.link66+xml":{"source":"iana","compressible":true,"extensions":["link66"]},"application/vnd.rs-274x":{"source":"iana"},"application/vnd.ruckus.download":{"source":"iana"},"application/vnd.s3sms":{"source":"iana"},"application/vnd.sailingtracker.track":{"source":"iana","extensions":["st"]},"application/vnd.sar":{"source":"iana"},"application/vnd.sbm.cid":{"source":"iana"},"application/vnd.sbm.mid2":{"source":"iana"},"application/vnd.scribus":{"source":"iana"},"application/vnd.sealed.3df":{"source":"iana"},"application/vnd.sealed.csf":{"source":"iana"},"application/vnd.sealed.doc":{"source":"iana"},"application/vnd.sealed.eml":{"source":"iana"},"application/vnd.sealed.mht":{"source":"iana"},"application/vnd.sealed.net":{"source":"iana"},"application/vnd.sealed.ppt":{"source":"iana"},"application/vnd.sealed.tiff":{"source":"iana"},"application/vnd.sealed.xls":{"source":"iana"},"application/vnd.sealedmedia.softseal.html":{"source":"iana"},"application/vnd.sealedmedia.softseal.pdf":{"source":"iana"},"application/vnd.seemail":{"source":"iana","extensions":["see"]},"application/vnd.sema":{"source":"iana","extensions":["sema"]},"application/vnd.semd":{"source":"iana","extensions":["semd"]},"application/vnd.semf":{"source":"iana","extensions":["semf"]},"application/vnd.shade-save-file":{"source":"iana"},"application/vnd.shana.informed.formdata":{"source":"iana","extensions":["ifm"]},"application/vnd.shana.informed.formtemplate":{"source":"iana","extensions":["itp"]},"application/vnd.shana.informed.interchange":{"source":"iana","extensions":["iif"]},"application/vnd.shana.informed.package":{"source":"iana","extensions":["ipk"]},"application/vnd.shootproof+json":{"source":"iana","compressible":true},"application/vnd.shopkick+json":{"source":"iana","compressible":true},"application/vnd.shp":{"source":"iana"},"application/vnd.shx":{"source":"iana"},"application/vnd.sigrok.session":{"source":"iana"},"application/vnd.simtech-mindmapper":{"source":"iana","extensions":["twd","twds"]},"application/vnd.siren+json":{"source":"iana","compressible":true},"application/vnd.smaf":{"source":"iana","extensions":["mmf"]},"application/vnd.smart.notebook":{"source":"iana"},"application/vnd.smart.teacher":{"source":"iana","extensions":["teacher"]},"application/vnd.snesdev-page-table":{"source":"iana"},"application/vnd.software602.filler.form+xml":{"source":"iana","compressible":true,"extensions":["fo"]},"application/vnd.software602.filler.form-xml-zip":{"source":"iana"},"application/vnd.solent.sdkm+xml":{"source":"iana","compressible":true,"extensions":["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{"source":"iana","extensions":["dxp"]},"application/vnd.spotfire.sfs":{"source":"iana","extensions":["sfs"]},"application/vnd.sqlite3":{"source":"iana"},"application/vnd.sss-cod":{"source":"iana"},"application/vnd.sss-dtf":{"source":"iana"},"application/vnd.sss-ntf":{"source":"iana"},"application/vnd.stardivision.calc":{"source":"apache","extensions":["sdc"]},"application/vnd.stardivision.draw":{"source":"apache","extensions":["sda"]},"application/vnd.stardivision.impress":{"source":"apache","extensions":["sdd"]},"application/vnd.stardivision.math":{"source":"apache","extensions":["smf"]},"application/vnd.stardivision.writer":{"source":"apache","extensions":["sdw","vor"]},"application/vnd.stardivision.writer-global":{"source":"apache","extensions":["sgl"]},"application/vnd.stepmania.package":{"source":"iana","extensions":["smzip"]},"application/vnd.stepmania.stepchart":{"source":"iana","extensions":["sm"]},"application/vnd.street-stream":{"source":"iana"},"application/vnd.sun.wadl+xml":{"source":"iana","compressible":true,"extensions":["wadl"]},"application/vnd.sun.xml.calc":{"source":"apache","extensions":["sxc"]},"application/vnd.sun.xml.calc.template":{"source":"apache","extensions":["stc"]},"application/vnd.sun.xml.draw":{"source":"apache","extensions":["sxd"]},"application/vnd.sun.xml.draw.template":{"source":"apache","extensions":["std"]},"application/vnd.sun.xml.impress":{"source":"apache","extensions":["sxi"]},"application/vnd.sun.xml.impress.template":{"source":"apache","extensions":["sti"]},"application/vnd.sun.xml.math":{"source":"apache","extensions":["sxm"]},"application/vnd.sun.xml.writer":{"source":"apache","extensions":["sxw"]},"application/vnd.sun.xml.writer.global":{"source":"apache","extensions":["sxg"]},"application/vnd.sun.xml.writer.template":{"source":"apache","extensions":["stw"]},"application/vnd.sus-calendar":{"source":"iana","extensions":["sus","susp"]},"application/vnd.svd":{"source":"iana","extensions":["svd"]},"application/vnd.swiftview-ics":{"source":"iana"},"application/vnd.symbian.install":{"source":"apache","extensions":["sis","sisx"]},"application/vnd.syncml+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xsm"]},"application/vnd.syncml.dm+wbxml":{"source":"iana","charset":"UTF-8","extensions":["bdm"]},"application/vnd.syncml.dm+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xdm"]},"application/vnd.syncml.dm.notification":{"source":"iana"},"application/vnd.syncml.dmddf+wbxml":{"source":"iana"},"application/vnd.syncml.dmddf+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{"source":"iana"},"application/vnd.syncml.dmtnds+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.syncml.ds.notification":{"source":"iana"},"application/vnd.tableschema+json":{"source":"iana","compressible":true},"application/vnd.tao.intent-module-archive":{"source":"iana","extensions":["tao"]},"application/vnd.tcpdump.pcap":{"source":"iana","extensions":["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{"source":"iana","compressible":true},"application/vnd.tmd.mediaflex.api+xml":{"source":"iana","compressible":true},"application/vnd.tml":{"source":"iana"},"application/vnd.tmobile-livetv":{"source":"iana","extensions":["tmo"]},"application/vnd.tri.onesource":{"source":"iana"},"application/vnd.trid.tpt":{"source":"iana","extensions":["tpt"]},"application/vnd.triscape.mxs":{"source":"iana","extensions":["mxs"]},"application/vnd.trueapp":{"source":"iana","extensions":["tra"]},"application/vnd.truedoc":{"source":"iana"},"application/vnd.ubisoft.webplayer":{"source":"iana"},"application/vnd.ufdl":{"source":"iana","extensions":["ufd","ufdl"]},"application/vnd.uiq.theme":{"source":"iana","extensions":["utz"]},"application/vnd.umajin":{"source":"iana","extensions":["umj"]},"application/vnd.unity":{"source":"iana","extensions":["unityweb"]},"application/vnd.uoml+xml":{"source":"iana","compressible":true,"extensions":["uoml"]},"application/vnd.uplanet.alert":{"source":"iana"},"application/vnd.uplanet.alert-wbxml":{"source":"iana"},"application/vnd.uplanet.bearer-choice":{"source":"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{"source":"iana"},"application/vnd.uplanet.cacheop":{"source":"iana"},"application/vnd.uplanet.cacheop-wbxml":{"source":"iana"},"application/vnd.uplanet.channel":{"source":"iana"},"application/vnd.uplanet.channel-wbxml":{"source":"iana"},"application/vnd.uplanet.list":{"source":"iana"},"application/vnd.uplanet.list-wbxml":{"source":"iana"},"application/vnd.uplanet.listcmd":{"source":"iana"},"application/vnd.uplanet.listcmd-wbxml":{"source":"iana"},"application/vnd.uplanet.signal":{"source":"iana"},"application/vnd.uri-map":{"source":"iana"},"application/vnd.valve.source.material":{"source":"iana"},"application/vnd.vcx":{"source":"iana","extensions":["vcx"]},"application/vnd.vd-study":{"source":"iana"},"application/vnd.vectorworks":{"source":"iana"},"application/vnd.vel+json":{"source":"iana","compressible":true},"application/vnd.verimatrix.vcas":{"source":"iana"},"application/vnd.veryant.thin":{"source":"iana"},"application/vnd.ves.encrypted":{"source":"iana"},"application/vnd.vidsoft.vidconference":{"source":"iana"},"application/vnd.visio":{"source":"iana","extensions":["vsd","vst","vss","vsw"]},"application/vnd.visionary":{"source":"iana","extensions":["vis"]},"application/vnd.vividence.scriptfile":{"source":"iana"},"application/vnd.vsf":{"source":"iana","extensions":["vsf"]},"application/vnd.wap.sic":{"source":"iana"},"application/vnd.wap.slc":{"source":"iana"},"application/vnd.wap.wbxml":{"source":"iana","charset":"UTF-8","extensions":["wbxml"]},"application/vnd.wap.wmlc":{"source":"iana","extensions":["wmlc"]},"application/vnd.wap.wmlscriptc":{"source":"iana","extensions":["wmlsc"]},"application/vnd.webturbo":{"source":"iana","extensions":["wtb"]},"application/vnd.wfa.p2p":{"source":"iana"},"application/vnd.wfa.wsc":{"source":"iana"},"application/vnd.windows.devicepairing":{"source":"iana"},"application/vnd.wmc":{"source":"iana"},"application/vnd.wmf.bootstrap":{"source":"iana"},"application/vnd.wolfram.mathematica":{"source":"iana"},"application/vnd.wolfram.mathematica.package":{"source":"iana"},"application/vnd.wolfram.player":{"source":"iana","extensions":["nbp"]},"application/vnd.wordperfect":{"source":"iana","extensions":["wpd"]},"application/vnd.wqd":{"source":"iana","extensions":["wqd"]},"application/vnd.wrq-hp3000-labelled":{"source":"iana"},"application/vnd.wt.stf":{"source":"iana","extensions":["stf"]},"application/vnd.wv.csp+wbxml":{"source":"iana"},"application/vnd.wv.csp+xml":{"source":"iana","compressible":true},"application/vnd.wv.ssp+xml":{"source":"iana","compressible":true},"application/vnd.xacml+json":{"source":"iana","compressible":true},"application/vnd.xara":{"source":"iana","extensions":["xar"]},"application/vnd.xfdl":{"source":"iana","extensions":["xfdl"]},"application/vnd.xfdl.webform":{"source":"iana"},"application/vnd.xmi+xml":{"source":"iana","compressible":true},"application/vnd.xmpie.cpkg":{"source":"iana"},"application/vnd.xmpie.dpkg":{"source":"iana"},"application/vnd.xmpie.plan":{"source":"iana"},"application/vnd.xmpie.ppkg":{"source":"iana"},"application/vnd.xmpie.xlim":{"source":"iana"},"application/vnd.yamaha.hv-dic":{"source":"iana","extensions":["hvd"]},"application/vnd.yamaha.hv-script":{"source":"iana","extensions":["hvs"]},"application/vnd.yamaha.hv-voice":{"source":"iana","extensions":["hvp"]},"application/vnd.yamaha.openscoreformat":{"source":"iana","extensions":["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{"source":"iana","compressible":true,"extensions":["osfpvg"]},"application/vnd.yamaha.remote-setup":{"source":"iana"},"application/vnd.yamaha.smaf-audio":{"source":"iana","extensions":["saf"]},"application/vnd.yamaha.smaf-phrase":{"source":"iana","extensions":["spf"]},"application/vnd.yamaha.through-ngn":{"source":"iana"},"application/vnd.yamaha.tunnel-udpencap":{"source":"iana"},"application/vnd.yaoweme":{"source":"iana"},"application/vnd.yellowriver-custom-menu":{"source":"iana","extensions":["cmp"]},"application/vnd.youtube.yt":{"source":"iana"},"application/vnd.zul":{"source":"iana","extensions":["zir","zirz"]},"application/vnd.zzazz.deck+xml":{"source":"iana","compressible":true,"extensions":["zaz"]},"application/voicexml+xml":{"source":"iana","compressible":true,"extensions":["vxml"]},"application/voucher-cms+json":{"source":"iana","compressible":true},"application/vq-rtcpxr":{"source":"iana"},"application/wasm":{"compressible":true,"extensions":["wasm"]},"application/watcherinfo+xml":{"source":"iana","compressible":true},"application/webpush-options+json":{"source":"iana","compressible":true},"application/whoispp-query":{"source":"iana"},"application/whoispp-response":{"source":"iana"},"application/widget":{"source":"iana","extensions":["wgt"]},"application/winhlp":{"source":"apache","extensions":["hlp"]},"application/wita":{"source":"iana"},"application/wordperfect5.1":{"source":"iana"},"application/wsdl+xml":{"source":"iana","compressible":true,"extensions":["wsdl"]},"application/wspolicy+xml":{"source":"iana","compressible":true,"extensions":["wspolicy"]},"application/x-7z-compressed":{"source":"apache","compressible":false,"extensions":["7z"]},"application/x-abiword":{"source":"apache","extensions":["abw"]},"application/x-ace-compressed":{"source":"apache","extensions":["ace"]},"application/x-amf":{"source":"apache"},"application/x-apple-diskimage":{"source":"apache","extensions":["dmg"]},"application/x-arj":{"compressible":false,"extensions":["arj"]},"application/x-authorware-bin":{"source":"apache","extensions":["aab","x32","u32","vox"]},"application/x-authorware-map":{"source":"apache","extensions":["aam"]},"application/x-authorware-seg":{"source":"apache","extensions":["aas"]},"application/x-bcpio":{"source":"apache","extensions":["bcpio"]},"application/x-bdoc":{"compressible":false,"extensions":["bdoc"]},"application/x-bittorrent":{"source":"apache","extensions":["torrent"]},"application/x-blorb":{"source":"apache","extensions":["blb","blorb"]},"application/x-bzip":{"source":"apache","compressible":false,"extensions":["bz"]},"application/x-bzip2":{"source":"apache","compressible":false,"extensions":["bz2","boz"]},"application/x-cbr":{"source":"apache","extensions":["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{"source":"apache","extensions":["vcd"]},"application/x-cfs-compressed":{"source":"apache","extensions":["cfs"]},"application/x-chat":{"source":"apache","extensions":["chat"]},"application/x-chess-pgn":{"source":"apache","extensions":["pgn"]},"application/x-chrome-extension":{"extensions":["crx"]},"application/x-cocoa":{"source":"nginx","extensions":["cco"]},"application/x-compress":{"source":"apache"},"application/x-conference":{"source":"apache","extensions":["nsc"]},"application/x-cpio":{"source":"apache","extensions":["cpio"]},"application/x-csh":{"source":"apache","extensions":["csh"]},"application/x-deb":{"compressible":false},"application/x-debian-package":{"source":"apache","extensions":["deb","udeb"]},"application/x-dgc-compressed":{"source":"apache","extensions":["dgc"]},"application/x-director":{"source":"apache","extensions":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{"source":"apache","extensions":["wad"]},"application/x-dtbncx+xml":{"source":"apache","compressible":true,"extensions":["ncx"]},"application/x-dtbook+xml":{"source":"apache","compressible":true,"extensions":["dtb"]},"application/x-dtbresource+xml":{"source":"apache","compressible":true,"extensions":["res"]},"application/x-dvi":{"source":"apache","compressible":false,"extensions":["dvi"]},"application/x-envoy":{"source":"apache","extensions":["evy"]},"application/x-eva":{"source":"apache","extensions":["eva"]},"application/x-font-bdf":{"source":"apache","extensions":["bdf"]},"application/x-font-dos":{"source":"apache"},"application/x-font-framemaker":{"source":"apache"},"application/x-font-ghostscript":{"source":"apache","extensions":["gsf"]},"application/x-font-libgrx":{"source":"apache"},"application/x-font-linux-psf":{"source":"apache","extensions":["psf"]},"application/x-font-pcf":{"source":"apache","extensions":["pcf"]},"application/x-font-snf":{"source":"apache","extensions":["snf"]},"application/x-font-speedo":{"source":"apache"},"application/x-font-sunos-news":{"source":"apache"},"application/x-font-type1":{"source":"apache","extensions":["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{"source":"apache"},"application/x-freearc":{"source":"apache","extensions":["arc"]},"application/x-futuresplash":{"source":"apache","extensions":["spl"]},"application/x-gca-compressed":{"source":"apache","extensions":["gca"]},"application/x-glulx":{"source":"apache","extensions":["ulx"]},"application/x-gnumeric":{"source":"apache","extensions":["gnumeric"]},"application/x-gramps-xml":{"source":"apache","extensions":["gramps"]},"application/x-gtar":{"source":"apache","extensions":["gtar"]},"application/x-gzip":{"source":"apache"},"application/x-hdf":{"source":"apache","extensions":["hdf"]},"application/x-httpd-php":{"compressible":true,"extensions":["php"]},"application/x-install-instructions":{"source":"apache","extensions":["install"]},"application/x-iso9660-image":{"source":"apache","extensions":["iso"]},"application/x-java-archive-diff":{"source":"nginx","extensions":["jardiff"]},"application/x-java-jnlp-file":{"source":"apache","compressible":false,"extensions":["jnlp"]},"application/x-javascript":{"compressible":true},"application/x-keepass2":{"extensions":["kdbx"]},"application/x-latex":{"source":"apache","compressible":false,"extensions":["latex"]},"application/x-lua-bytecode":{"extensions":["luac"]},"application/x-lzh-compressed":{"source":"apache","extensions":["lzh","lha"]},"application/x-makeself":{"source":"nginx","extensions":["run"]},"application/x-mie":{"source":"apache","extensions":["mie"]},"application/x-mobipocket-ebook":{"source":"apache","extensions":["prc","mobi"]},"application/x-mpegurl":{"compressible":false},"application/x-ms-application":{"source":"apache","extensions":["application"]},"application/x-ms-shortcut":{"source":"apache","extensions":["lnk"]},"application/x-ms-wmd":{"source":"apache","extensions":["wmd"]},"application/x-ms-wmz":{"source":"apache","extensions":["wmz"]},"application/x-ms-xbap":{"source":"apache","extensions":["xbap"]},"application/x-msaccess":{"source":"apache","extensions":["mdb"]},"application/x-msbinder":{"source":"apache","extensions":["obd"]},"application/x-mscardfile":{"source":"apache","extensions":["crd"]},"application/x-msclip":{"source":"apache","extensions":["clp"]},"application/x-msdos-program":{"extensions":["exe"]},"application/x-msdownload":{"source":"apache","extensions":["exe","dll","com","bat","msi"]},"application/x-msmediaview":{"source":"apache","extensions":["mvb","m13","m14"]},"application/x-msmetafile":{"source":"apache","extensions":["wmf","wmz","emf","emz"]},"application/x-msmoney":{"source":"apache","extensions":["mny"]},"application/x-mspublisher":{"source":"apache","extensions":["pub"]},"application/x-msschedule":{"source":"apache","extensions":["scd"]},"application/x-msterminal":{"source":"apache","extensions":["trm"]},"application/x-mswrite":{"source":"apache","extensions":["wri"]},"application/x-netcdf":{"source":"apache","extensions":["nc","cdf"]},"application/x-ns-proxy-autoconfig":{"compressible":true,"extensions":["pac"]},"application/x-nzb":{"source":"apache","extensions":["nzb"]},"application/x-perl":{"source":"nginx","extensions":["pl","pm"]},"application/x-pilot":{"source":"nginx","extensions":["prc","pdb"]},"application/x-pkcs12":{"source":"apache","compressible":false,"extensions":["p12","pfx"]},"application/x-pkcs7-certificates":{"source":"apache","extensions":["p7b","spc"]},"application/x-pkcs7-certreqresp":{"source":"apache","extensions":["p7r"]},"application/x-pki-message":{"source":"iana"},"application/x-rar-compressed":{"source":"apache","compressible":false,"extensions":["rar"]},"application/x-redhat-package-manager":{"source":"nginx","extensions":["rpm"]},"application/x-research-info-systems":{"source":"apache","extensions":["ris"]},"application/x-sea":{"source":"nginx","extensions":["sea"]},"application/x-sh":{"source":"apache","compressible":true,"extensions":["sh"]},"application/x-shar":{"source":"apache","extensions":["shar"]},"application/x-shockwave-flash":{"source":"apache","compressible":false,"extensions":["swf"]},"application/x-silverlight-app":{"source":"apache","extensions":["xap"]},"application/x-sql":{"source":"apache","extensions":["sql"]},"application/x-stuffit":{"source":"apache","compressible":false,"extensions":["sit"]},"application/x-stuffitx":{"source":"apache","extensions":["sitx"]},"application/x-subrip":{"source":"apache","extensions":["srt"]},"application/x-sv4cpio":{"source":"apache","extensions":["sv4cpio"]},"application/x-sv4crc":{"source":"apache","extensions":["sv4crc"]},"application/x-t3vm-image":{"source":"apache","extensions":["t3"]},"application/x-tads":{"source":"apache","extensions":["gam"]},"application/x-tar":{"source":"apache","compressible":true,"extensions":["tar"]},"application/x-tcl":{"source":"apache","extensions":["tcl","tk"]},"application/x-tex":{"source":"apache","extensions":["tex"]},"application/x-tex-tfm":{"source":"apache","extensions":["tfm"]},"application/x-texinfo":{"source":"apache","extensions":["texinfo","texi"]},"application/x-tgif":{"source":"apache","extensions":["obj"]},"application/x-ustar":{"source":"apache","extensions":["ustar"]},"application/x-virtualbox-hdd":{"compressible":true,"extensions":["hdd"]},"application/x-virtualbox-ova":{"compressible":true,"extensions":["ova"]},"application/x-virtualbox-ovf":{"compressible":true,"extensions":["ovf"]},"application/x-virtualbox-vbox":{"compressible":true,"extensions":["vbox"]},"application/x-virtualbox-vbox-extpack":{"compressible":false,"extensions":["vbox-extpack"]},"application/x-virtualbox-vdi":{"compressible":true,"extensions":["vdi"]},"application/x-virtualbox-vhd":{"compressible":true,"extensions":["vhd"]},"application/x-virtualbox-vmdk":{"compressible":true,"extensions":["vmdk"]},"application/x-wais-source":{"source":"apache","extensions":["src"]},"application/x-web-app-manifest+json":{"compressible":true,"extensions":["webapp"]},"application/x-www-form-urlencoded":{"source":"iana","compressible":true},"application/x-x509-ca-cert":{"source":"iana","extensions":["der","crt","pem"]},"application/x-x509-ca-ra-cert":{"source":"iana"},"application/x-x509-next-ca-cert":{"source":"iana"},"application/x-xfig":{"source":"apache","extensions":["fig"]},"application/x-xliff+xml":{"source":"apache","compressible":true,"extensions":["xlf"]},"application/x-xpinstall":{"source":"apache","compressible":false,"extensions":["xpi"]},"application/x-xz":{"source":"apache","extensions":["xz"]},"application/x-zmachine":{"source":"apache","extensions":["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{"source":"iana"},"application/xacml+xml":{"source":"iana","compressible":true},"application/xaml+xml":{"source":"apache","compressible":true,"extensions":["xaml"]},"application/xcap-att+xml":{"source":"iana","compressible":true,"extensions":["xav"]},"application/xcap-caps+xml":{"source":"iana","compressible":true,"extensions":["xca"]},"application/xcap-diff+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/xcap-el+xml":{"source":"iana","compressible":true,"extensions":["xel"]},"application/xcap-error+xml":{"source":"iana","compressible":true,"extensions":["xer"]},"application/xcap-ns+xml":{"source":"iana","compressible":true,"extensions":["xns"]},"application/xcon-conference-info+xml":{"source":"iana","compressible":true},"application/xcon-conference-info-diff+xml":{"source":"iana","compressible":true},"application/xenc+xml":{"source":"iana","compressible":true,"extensions":["xenc"]},"application/xhtml+xml":{"source":"iana","compressible":true,"extensions":["xhtml","xht"]},"application/xhtml-voice+xml":{"source":"apache","compressible":true},"application/xliff+xml":{"source":"iana","compressible":true,"extensions":["xlf"]},"application/xml":{"source":"iana","compressible":true,"extensions":["xml","xsl","xsd","rng"]},"application/xml-dtd":{"source":"iana","compressible":true,"extensions":["dtd"]},"application/xml-external-parsed-entity":{"source":"iana"},"application/xml-patch+xml":{"source":"iana","compressible":true},"application/xmpp+xml":{"source":"iana","compressible":true},"application/xop+xml":{"source":"iana","compressible":true,"extensions":["xop"]},"application/xproc+xml":{"source":"apache","compressible":true,"extensions":["xpl"]},"application/xslt+xml":{"source":"iana","compressible":true,"extensions":["xslt"]},"application/xspf+xml":{"source":"apache","compressible":true,"extensions":["xspf"]},"application/xv+xml":{"source":"iana","compressible":true,"extensions":["mxml","xhvml","xvml","xvm"]},"application/yang":{"source":"iana","extensions":["yang"]},"application/yang-data+json":{"source":"iana","compressible":true},"application/yang-data+xml":{"source":"iana","compressible":true},"application/yang-patch+json":{"source":"iana","compressible":true},"application/yang-patch+xml":{"source":"iana","compressible":true},"application/yin+xml":{"source":"iana","compressible":true,"extensions":["yin"]},"application/zip":{"source":"iana","compressible":false,"extensions":["zip"]},"application/zlib":{"source":"iana"},"application/zstd":{"source":"iana"},"audio/1d-interleaved-parityfec":{"source":"iana"},"audio/32kadpcm":{"source":"iana"},"audio/3gpp":{"source":"iana","compressible":false,"extensions":["3gpp"]},"audio/3gpp2":{"source":"iana"},"audio/aac":{"source":"iana"},"audio/ac3":{"source":"iana"},"audio/adpcm":{"source":"apache","extensions":["adp"]},"audio/amr":{"source":"iana"},"audio/amr-wb":{"source":"iana"},"audio/amr-wb+":{"source":"iana"},"audio/aptx":{"source":"iana"},"audio/asc":{"source":"iana"},"audio/atrac-advanced-lossless":{"source":"iana"},"audio/atrac-x":{"source":"iana"},"audio/atrac3":{"source":"iana"},"audio/basic":{"source":"iana","compressible":false,"extensions":["au","snd"]},"audio/bv16":{"source":"iana"},"audio/bv32":{"source":"iana"},"audio/clearmode":{"source":"iana"},"audio/cn":{"source":"iana"},"audio/dat12":{"source":"iana"},"audio/dls":{"source":"iana"},"audio/dsr-es201108":{"source":"iana"},"audio/dsr-es202050":{"source":"iana"},"audio/dsr-es202211":{"source":"iana"},"audio/dsr-es202212":{"source":"iana"},"audio/dv":{"source":"iana"},"audio/dvi4":{"source":"iana"},"audio/eac3":{"source":"iana"},"audio/encaprtp":{"source":"iana"},"audio/evrc":{"source":"iana"},"audio/evrc-qcp":{"source":"iana"},"audio/evrc0":{"source":"iana"},"audio/evrc1":{"source":"iana"},"audio/evrcb":{"source":"iana"},"audio/evrcb0":{"source":"iana"},"audio/evrcb1":{"source":"iana"},"audio/evrcnw":{"source":"iana"},"audio/evrcnw0":{"source":"iana"},"audio/evrcnw1":{"source":"iana"},"audio/evrcwb":{"source":"iana"},"audio/evrcwb0":{"source":"iana"},"audio/evrcwb1":{"source":"iana"},"audio/evs":{"source":"iana"},"audio/flexfec":{"source":"iana"},"audio/fwdred":{"source":"iana"},"audio/g711-0":{"source":"iana"},"audio/g719":{"source":"iana"},"audio/g722":{"source":"iana"},"audio/g7221":{"source":"iana"},"audio/g723":{"source":"iana"},"audio/g726-16":{"source":"iana"},"audio/g726-24":{"source":"iana"},"audio/g726-32":{"source":"iana"},"audio/g726-40":{"source":"iana"},"audio/g728":{"source":"iana"},"audio/g729":{"source":"iana"},"audio/g7291":{"source":"iana"},"audio/g729d":{"source":"iana"},"audio/g729e":{"source":"iana"},"audio/gsm":{"source":"iana"},"audio/gsm-efr":{"source":"iana"},"audio/gsm-hr-08":{"source":"iana"},"audio/ilbc":{"source":"iana"},"audio/ip-mr_v2.5":{"source":"iana"},"audio/isac":{"source":"apache"},"audio/l16":{"source":"iana"},"audio/l20":{"source":"iana"},"audio/l24":{"source":"iana","compressible":false},"audio/l8":{"source":"iana"},"audio/lpc":{"source":"iana"},"audio/melp":{"source":"iana"},"audio/melp1200":{"source":"iana"},"audio/melp2400":{"source":"iana"},"audio/melp600":{"source":"iana"},"audio/mhas":{"source":"iana"},"audio/midi":{"source":"apache","extensions":["mid","midi","kar","rmi"]},"audio/mobile-xmf":{"source":"iana","extensions":["mxmf"]},"audio/mp3":{"compressible":false,"extensions":["mp3"]},"audio/mp4":{"source":"iana","compressible":false,"extensions":["m4a","mp4a"]},"audio/mp4a-latm":{"source":"iana"},"audio/mpa":{"source":"iana"},"audio/mpa-robust":{"source":"iana"},"audio/mpeg":{"source":"iana","compressible":false,"extensions":["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{"source":"iana"},"audio/musepack":{"source":"apache"},"audio/ogg":{"source":"iana","compressible":false,"extensions":["oga","ogg","spx"]},"audio/opus":{"source":"iana"},"audio/parityfec":{"source":"iana"},"audio/pcma":{"source":"iana"},"audio/pcma-wb":{"source":"iana"},"audio/pcmu":{"source":"iana"},"audio/pcmu-wb":{"source":"iana"},"audio/prs.sid":{"source":"iana"},"audio/qcelp":{"source":"iana"},"audio/raptorfec":{"source":"iana"},"audio/red":{"source":"iana"},"audio/rtp-enc-aescm128":{"source":"iana"},"audio/rtp-midi":{"source":"iana"},"audio/rtploopback":{"source":"iana"},"audio/rtx":{"source":"iana"},"audio/s3m":{"source":"apache","extensions":["s3m"]},"audio/silk":{"source":"apache","extensions":["sil"]},"audio/smv":{"source":"iana"},"audio/smv-qcp":{"source":"iana"},"audio/smv0":{"source":"iana"},"audio/sp-midi":{"source":"iana"},"audio/speex":{"source":"iana"},"audio/t140c":{"source":"iana"},"audio/t38":{"source":"iana"},"audio/telephone-event":{"source":"iana"},"audio/tetra_acelp":{"source":"iana"},"audio/tetra_acelp_bb":{"source":"iana"},"audio/tone":{"source":"iana"},"audio/uemclip":{"source":"iana"},"audio/ulpfec":{"source":"iana"},"audio/usac":{"source":"iana"},"audio/vdvi":{"source":"iana"},"audio/vmr-wb":{"source":"iana"},"audio/vnd.3gpp.iufp":{"source":"iana"},"audio/vnd.4sb":{"source":"iana"},"audio/vnd.audiokoz":{"source":"iana"},"audio/vnd.celp":{"source":"iana"},"audio/vnd.cisco.nse":{"source":"iana"},"audio/vnd.cmles.radio-events":{"source":"iana"},"audio/vnd.cns.anp1":{"source":"iana"},"audio/vnd.cns.inf1":{"source":"iana"},"audio/vnd.dece.audio":{"source":"iana","extensions":["uva","uvva"]},"audio/vnd.digital-winds":{"source":"iana","extensions":["eol"]},"audio/vnd.dlna.adts":{"source":"iana"},"audio/vnd.dolby.heaac.1":{"source":"iana"},"audio/vnd.dolby.heaac.2":{"source":"iana"},"audio/vnd.dolby.mlp":{"source":"iana"},"audio/vnd.dolby.mps":{"source":"iana"},"audio/vnd.dolby.pl2":{"source":"iana"},"audio/vnd.dolby.pl2x":{"source":"iana"},"audio/vnd.dolby.pl2z":{"source":"iana"},"audio/vnd.dolby.pulse.1":{"source":"iana"},"audio/vnd.dra":{"source":"iana","extensions":["dra"]},"audio/vnd.dts":{"source":"iana","extensions":["dts"]},"audio/vnd.dts.hd":{"source":"iana","extensions":["dtshd"]},"audio/vnd.dts.uhd":{"source":"iana"},"audio/vnd.dvb.file":{"source":"iana"},"audio/vnd.everad.plj":{"source":"iana"},"audio/vnd.hns.audio":{"source":"iana"},"audio/vnd.lucent.voice":{"source":"iana","extensions":["lvp"]},"audio/vnd.ms-playready.media.pya":{"source":"iana","extensions":["pya"]},"audio/vnd.nokia.mobile-xmf":{"source":"iana"},"audio/vnd.nortel.vbk":{"source":"iana"},"audio/vnd.nuera.ecelp4800":{"source":"iana","extensions":["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{"source":"iana","extensions":["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{"source":"iana","extensions":["ecelp9600"]},"audio/vnd.octel.sbc":{"source":"iana"},"audio/vnd.presonus.multitrack":{"source":"iana"},"audio/vnd.qcelp":{"source":"iana"},"audio/vnd.rhetorex.32kadpcm":{"source":"iana"},"audio/vnd.rip":{"source":"iana","extensions":["rip"]},"audio/vnd.rn-realaudio":{"compressible":false},"audio/vnd.sealedmedia.softseal.mpeg":{"source":"iana"},"audio/vnd.vmx.cvsd":{"source":"iana"},"audio/vnd.wave":{"compressible":false},"audio/vorbis":{"source":"iana","compressible":false},"audio/vorbis-config":{"source":"iana"},"audio/wav":{"compressible":false,"extensions":["wav"]},"audio/wave":{"compressible":false,"extensions":["wav"]},"audio/webm":{"source":"apache","compressible":false,"extensions":["weba"]},"audio/x-aac":{"source":"apache","compressible":false,"extensions":["aac"]},"audio/x-aiff":{"source":"apache","extensions":["aif","aiff","aifc"]},"audio/x-caf":{"source":"apache","compressible":false,"extensions":["caf"]},"audio/x-flac":{"source":"apache","extensions":["flac"]},"audio/x-m4a":{"source":"nginx","extensions":["m4a"]},"audio/x-matroska":{"source":"apache","extensions":["mka"]},"audio/x-mpegurl":{"source":"apache","extensions":["m3u"]},"audio/x-ms-wax":{"source":"apache","extensions":["wax"]},"audio/x-ms-wma":{"source":"apache","extensions":["wma"]},"audio/x-pn-realaudio":{"source":"apache","extensions":["ram","ra"]},"audio/x-pn-realaudio-plugin":{"source":"apache","extensions":["rmp"]},"audio/x-realaudio":{"source":"nginx","extensions":["ra"]},"audio/x-tta":{"source":"apache"},"audio/x-wav":{"source":"apache","extensions":["wav"]},"audio/xm":{"source":"apache","extensions":["xm"]},"chemical/x-cdx":{"source":"apache","extensions":["cdx"]},"chemical/x-cif":{"source":"apache","extensions":["cif"]},"chemical/x-cmdf":{"source":"apache","extensions":["cmdf"]},"chemical/x-cml":{"source":"apache","extensions":["cml"]},"chemical/x-csml":{"source":"apache","extensions":["csml"]},"chemical/x-pdb":{"source":"apache"},"chemical/x-xyz":{"source":"apache","extensions":["xyz"]},"font/collection":{"source":"iana","extensions":["ttc"]},"font/otf":{"source":"iana","compressible":true,"extensions":["otf"]},"font/sfnt":{"source":"iana"},"font/ttf":{"source":"iana","compressible":true,"extensions":["ttf"]},"font/woff":{"source":"iana","extensions":["woff"]},"font/woff2":{"source":"iana","extensions":["woff2"]},"image/aces":{"source":"iana","extensions":["exr"]},"image/apng":{"compressible":false,"extensions":["apng"]},"image/avci":{"source":"iana"},"image/avcs":{"source":"iana"},"image/bmp":{"source":"iana","compressible":true,"extensions":["bmp"]},"image/cgm":{"source":"iana","extensions":["cgm"]},"image/dicom-rle":{"source":"iana","extensions":["drle"]},"image/emf":{"source":"iana","extensions":["emf"]},"image/fits":{"source":"iana","extensions":["fits"]},"image/g3fax":{"source":"iana","extensions":["g3"]},"image/gif":{"source":"iana","compressible":false,"extensions":["gif"]},"image/heic":{"source":"iana","extensions":["heic"]},"image/heic-sequence":{"source":"iana","extensions":["heics"]},"image/heif":{"source":"iana","extensions":["heif"]},"image/heif-sequence":{"source":"iana","extensions":["heifs"]},"image/hej2k":{"source":"iana","extensions":["hej2"]},"image/hsj2":{"source":"iana","extensions":["hsj2"]},"image/ief":{"source":"iana","extensions":["ief"]},"image/jls":{"source":"iana","extensions":["jls"]},"image/jp2":{"source":"iana","compressible":false,"extensions":["jp2","jpg2"]},"image/jpeg":{"source":"iana","compressible":false,"extensions":["jpeg","jpg","jpe"]},"image/jph":{"source":"iana","extensions":["jph"]},"image/jphc":{"source":"iana","extensions":["jhc"]},"image/jpm":{"source":"iana","compressible":false,"extensions":["jpm"]},"image/jpx":{"source":"iana","compressible":false,"extensions":["jpx","jpf"]},"image/jxr":{"source":"iana","extensions":["jxr"]},"image/jxra":{"source":"iana","extensions":["jxra"]},"image/jxrs":{"source":"iana","extensions":["jxrs"]},"image/jxs":{"source":"iana","extensions":["jxs"]},"image/jxsc":{"source":"iana","extensions":["jxsc"]},"image/jxsi":{"source":"iana","extensions":["jxsi"]},"image/jxss":{"source":"iana","extensions":["jxss"]},"image/ktx":{"source":"iana","extensions":["ktx"]},"image/naplps":{"source":"iana"},"image/pjpeg":{"compressible":false},"image/png":{"source":"iana","compressible":false,"extensions":["png"]},"image/prs.btif":{"source":"iana","extensions":["btif"]},"image/prs.pti":{"source":"iana","extensions":["pti"]},"image/pwg-raster":{"source":"iana"},"image/sgi":{"source":"apache","extensions":["sgi"]},"image/svg+xml":{"source":"iana","compressible":true,"extensions":["svg","svgz"]},"image/t38":{"source":"iana","extensions":["t38"]},"image/tiff":{"source":"iana","compressible":false,"extensions":["tif","tiff"]},"image/tiff-fx":{"source":"iana","extensions":["tfx"]},"image/vnd.adobe.photoshop":{"source":"iana","compressible":true,"extensions":["psd"]},"image/vnd.airzip.accelerator.azv":{"source":"iana","extensions":["azv"]},"image/vnd.cns.inf2":{"source":"iana"},"image/vnd.dece.graphic":{"source":"iana","extensions":["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{"source":"iana","extensions":["djvu","djv"]},"image/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"image/vnd.dwg":{"source":"iana","extensions":["dwg"]},"image/vnd.dxf":{"source":"iana","extensions":["dxf"]},"image/vnd.fastbidsheet":{"source":"iana","extensions":["fbs"]},"image/vnd.fpx":{"source":"iana","extensions":["fpx"]},"image/vnd.fst":{"source":"iana","extensions":["fst"]},"image/vnd.fujixerox.edmics-mmr":{"source":"iana","extensions":["mmr"]},"image/vnd.fujixerox.edmics-rlc":{"source":"iana","extensions":["rlc"]},"image/vnd.globalgraphics.pgb":{"source":"iana"},"image/vnd.microsoft.icon":{"source":"iana","extensions":["ico"]},"image/vnd.mix":{"source":"iana"},"image/vnd.mozilla.apng":{"source":"iana"},"image/vnd.ms-dds":{"extensions":["dds"]},"image/vnd.ms-modi":{"source":"iana","extensions":["mdi"]},"image/vnd.ms-photo":{"source":"apache","extensions":["wdp"]},"image/vnd.net-fpx":{"source":"iana","extensions":["npx"]},"image/vnd.radiance":{"source":"iana"},"image/vnd.sealed.png":{"source":"iana"},"image/vnd.sealedmedia.softseal.gif":{"source":"iana"},"image/vnd.sealedmedia.softseal.jpg":{"source":"iana"},"image/vnd.svf":{"source":"iana"},"image/vnd.tencent.tap":{"source":"iana","extensions":["tap"]},"image/vnd.valve.source.texture":{"source":"iana","extensions":["vtf"]},"image/vnd.wap.wbmp":{"source":"iana","extensions":["wbmp"]},"image/vnd.xiff":{"source":"iana","extensions":["xif"]},"image/vnd.zbrush.pcx":{"source":"iana","extensions":["pcx"]},"image/webp":{"source":"apache","extensions":["webp"]},"image/wmf":{"source":"iana","extensions":["wmf"]},"image/x-3ds":{"source":"apache","extensions":["3ds"]},"image/x-cmu-raster":{"source":"apache","extensions":["ras"]},"image/x-cmx":{"source":"apache","extensions":["cmx"]},"image/x-freehand":{"source":"apache","extensions":["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{"source":"apache","compressible":true,"extensions":["ico"]},"image/x-jng":{"source":"nginx","extensions":["jng"]},"image/x-mrsid-image":{"source":"apache","extensions":["sid"]},"image/x-ms-bmp":{"source":"nginx","compressible":true,"extensions":["bmp"]},"image/x-pcx":{"source":"apache","extensions":["pcx"]},"image/x-pict":{"source":"apache","extensions":["pic","pct"]},"image/x-portable-anymap":{"source":"apache","extensions":["pnm"]},"image/x-portable-bitmap":{"source":"apache","extensions":["pbm"]},"image/x-portable-graymap":{"source":"apache","extensions":["pgm"]},"image/x-portable-pixmap":{"source":"apache","extensions":["ppm"]},"image/x-rgb":{"source":"apache","extensions":["rgb"]},"image/x-tga":{"source":"apache","extensions":["tga"]},"image/x-xbitmap":{"source":"apache","extensions":["xbm"]},"image/x-xcf":{"compressible":false},"image/x-xpixmap":{"source":"apache","extensions":["xpm"]},"image/x-xwindowdump":{"source":"apache","extensions":["xwd"]},"message/cpim":{"source":"iana"},"message/delivery-status":{"source":"iana"},"message/disposition-notification":{"source":"iana","extensions":["disposition-notification"]},"message/external-body":{"source":"iana"},"message/feedback-report":{"source":"iana"},"message/global":{"source":"iana","extensions":["u8msg"]},"message/global-delivery-status":{"source":"iana","extensions":["u8dsn"]},"message/global-disposition-notification":{"source":"iana","extensions":["u8mdn"]},"message/global-headers":{"source":"iana","extensions":["u8hdr"]},"message/http":{"source":"iana","compressible":false},"message/imdn+xml":{"source":"iana","compressible":true},"message/news":{"source":"iana"},"message/partial":{"source":"iana","compressible":false},"message/rfc822":{"source":"iana","compressible":true,"extensions":["eml","mime"]},"message/s-http":{"source":"iana"},"message/sip":{"source":"iana"},"message/sipfrag":{"source":"iana"},"message/tracking-status":{"source":"iana"},"message/vnd.si.simp":{"source":"iana"},"message/vnd.wfa.wsc":{"source":"iana","extensions":["wsc"]},"model/3mf":{"source":"iana","extensions":["3mf"]},"model/gltf+json":{"source":"iana","compressible":true,"extensions":["gltf"]},"model/gltf-binary":{"source":"iana","compressible":true,"extensions":["glb"]},"model/iges":{"source":"iana","compressible":false,"extensions":["igs","iges"]},"model/mesh":{"source":"iana","compressible":false,"extensions":["msh","mesh","silo"]},"model/mtl":{"source":"iana","extensions":["mtl"]},"model/obj":{"source":"iana","extensions":["obj"]},"model/stl":{"source":"iana","extensions":["stl"]},"model/vnd.collada+xml":{"source":"iana","compressible":true,"extensions":["dae"]},"model/vnd.dwf":{"source":"iana","extensions":["dwf"]},"model/vnd.flatland.3dml":{"source":"iana"},"model/vnd.gdl":{"source":"iana","extensions":["gdl"]},"model/vnd.gs-gdl":{"source":"apache"},"model/vnd.gs.gdl":{"source":"iana"},"model/vnd.gtw":{"source":"iana","extensions":["gtw"]},"model/vnd.moml+xml":{"source":"iana","compressible":true},"model/vnd.mts":{"source":"iana","extensions":["mts"]},"model/vnd.opengex":{"source":"iana","extensions":["ogex"]},"model/vnd.parasolid.transmit.binary":{"source":"iana","extensions":["x_b"]},"model/vnd.parasolid.transmit.text":{"source":"iana","extensions":["x_t"]},"model/vnd.rosette.annotated-data-model":{"source":"iana"},"model/vnd.usdz+zip":{"source":"iana","compressible":false,"extensions":["usdz"]},"model/vnd.valve.source.compiled-map":{"source":"iana","extensions":["bsp"]},"model/vnd.vtu":{"source":"iana","extensions":["vtu"]},"model/vrml":{"source":"iana","compressible":false,"extensions":["wrl","vrml"]},"model/x3d+binary":{"source":"apache","compressible":false,"extensions":["x3db","x3dbz"]},"model/x3d+fastinfoset":{"source":"iana","extensions":["x3db"]},"model/x3d+vrml":{"source":"apache","compressible":false,"extensions":["x3dv","x3dvz"]},"model/x3d+xml":{"source":"iana","compressible":true,"extensions":["x3d","x3dz"]},"model/x3d-vrml":{"source":"iana","extensions":["x3dv"]},"multipart/alternative":{"source":"iana","compressible":false},"multipart/appledouble":{"source":"iana"},"multipart/byteranges":{"source":"iana"},"multipart/digest":{"source":"iana"},"multipart/encrypted":{"source":"iana","compressible":false},"multipart/form-data":{"source":"iana","compressible":false},"multipart/header-set":{"source":"iana"},"multipart/mixed":{"source":"iana"},"multipart/multilingual":{"source":"iana"},"multipart/parallel":{"source":"iana"},"multipart/related":{"source":"iana","compressible":false},"multipart/report":{"source":"iana"},"multipart/signed":{"source":"iana","compressible":false},"multipart/vnd.bint.med-plus":{"source":"iana"},"multipart/voice-message":{"source":"iana"},"multipart/x-mixed-replace":{"source":"iana"},"text/1d-interleaved-parityfec":{"source":"iana"},"text/cache-manifest":{"source":"iana","compressible":true,"extensions":["appcache","manifest"]},"text/calendar":{"source":"iana","extensions":["ics","ifb"]},"text/calender":{"compressible":true},"text/cmd":{"compressible":true},"text/coffeescript":{"extensions":["coffee","litcoffee"]},"text/css":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["css"]},"text/csv":{"source":"iana","compressible":true,"extensions":["csv"]},"text/csv-schema":{"source":"iana"},"text/directory":{"source":"iana"},"text/dns":{"source":"iana"},"text/ecmascript":{"source":"iana"},"text/encaprtp":{"source":"iana"},"text/enriched":{"source":"iana"},"text/flexfec":{"source":"iana"},"text/fwdred":{"source":"iana"},"text/grammar-ref-list":{"source":"iana"},"text/html":{"source":"iana","compressible":true,"extensions":["html","htm","shtml"]},"text/jade":{"extensions":["jade"]},"text/javascript":{"source":"iana","compressible":true},"text/jcr-cnd":{"source":"iana"},"text/jsx":{"compressible":true,"extensions":["jsx"]},"text/less":{"compressible":true,"extensions":["less"]},"text/markdown":{"source":"iana","compressible":true,"extensions":["markdown","md"]},"text/mathml":{"source":"nginx","extensions":["mml"]},"text/mdx":{"compressible":true,"extensions":["mdx"]},"text/mizar":{"source":"iana"},"text/n3":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["n3"]},"text/parameters":{"source":"iana","charset":"UTF-8"},"text/parityfec":{"source":"iana"},"text/plain":{"source":"iana","compressible":true,"extensions":["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{"source":"iana","charset":"UTF-8"},"text/prs.fallenstein.rst":{"source":"iana"},"text/prs.lines.tag":{"source":"iana","extensions":["dsc"]},"text/prs.prop.logic":{"source":"iana"},"text/raptorfec":{"source":"iana"},"text/red":{"source":"iana"},"text/rfc822-headers":{"source":"iana"},"text/richtext":{"source":"iana","compressible":true,"extensions":["rtx"]},"text/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"text/rtp-enc-aescm128":{"source":"iana"},"text/rtploopback":{"source":"iana"},"text/rtx":{"source":"iana"},"text/sgml":{"source":"iana","extensions":["sgml","sgm"]},"text/shex":{"extensions":["shex"]},"text/slim":{"extensions":["slim","slm"]},"text/strings":{"source":"iana"},"text/stylus":{"extensions":["stylus","styl"]},"text/t140":{"source":"iana"},"text/tab-separated-values":{"source":"iana","compressible":true,"extensions":["tsv"]},"text/troff":{"source":"iana","extensions":["t","tr","roff","man","me","ms"]},"text/turtle":{"source":"iana","charset":"UTF-8","extensions":["ttl"]},"text/ulpfec":{"source":"iana"},"text/uri-list":{"source":"iana","compressible":true,"extensions":["uri","uris","urls"]},"text/vcard":{"source":"iana","compressible":true,"extensions":["vcard"]},"text/vnd.a":{"source":"iana"},"text/vnd.abc":{"source":"iana"},"text/vnd.ascii-art":{"source":"iana"},"text/vnd.curl":{"source":"iana","extensions":["curl"]},"text/vnd.curl.dcurl":{"source":"apache","extensions":["dcurl"]},"text/vnd.curl.mcurl":{"source":"apache","extensions":["mcurl"]},"text/vnd.curl.scurl":{"source":"apache","extensions":["scurl"]},"text/vnd.debian.copyright":{"source":"iana","charset":"UTF-8"},"text/vnd.dmclientscript":{"source":"iana"},"text/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"text/vnd.esmertec.theme-descriptor":{"source":"iana","charset":"UTF-8"},"text/vnd.ficlab.flt":{"source":"iana"},"text/vnd.fly":{"source":"iana","extensions":["fly"]},"text/vnd.fmi.flexstor":{"source":"iana","extensions":["flx"]},"text/vnd.gml":{"source":"iana"},"text/vnd.graphviz":{"source":"iana","extensions":["gv"]},"text/vnd.hgl":{"source":"iana"},"text/vnd.in3d.3dml":{"source":"iana","extensions":["3dml"]},"text/vnd.in3d.spot":{"source":"iana","extensions":["spot"]},"text/vnd.iptc.newsml":{"source":"iana"},"text/vnd.iptc.nitf":{"source":"iana"},"text/vnd.latex-z":{"source":"iana"},"text/vnd.motorola.reflex":{"source":"iana"},"text/vnd.ms-mediapackage":{"source":"iana"},"text/vnd.net2phone.commcenter.command":{"source":"iana"},"text/vnd.radisys.msml-basic-layout":{"source":"iana"},"text/vnd.senx.warpscript":{"source":"iana"},"text/vnd.si.uricatalogue":{"source":"iana"},"text/vnd.sosi":{"source":"iana"},"text/vnd.sun.j2me.app-descriptor":{"source":"iana","charset":"UTF-8","extensions":["jad"]},"text/vnd.trolltech.linguist":{"source":"iana","charset":"UTF-8"},"text/vnd.wap.si":{"source":"iana"},"text/vnd.wap.sl":{"source":"iana"},"text/vnd.wap.wml":{"source":"iana","extensions":["wml"]},"text/vnd.wap.wmlscript":{"source":"iana","extensions":["wmls"]},"text/vtt":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["vtt"]},"text/x-asm":{"source":"apache","extensions":["s","asm"]},"text/x-c":{"source":"apache","extensions":["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{"source":"nginx","extensions":["htc"]},"text/x-fortran":{"source":"apache","extensions":["f","for","f77","f90"]},"text/x-gwt-rpc":{"compressible":true},"text/x-handlebars-template":{"extensions":["hbs"]},"text/x-java-source":{"source":"apache","extensions":["java"]},"text/x-jquery-tmpl":{"compressible":true},"text/x-lua":{"extensions":["lua"]},"text/x-markdown":{"compressible":true,"extensions":["mkd"]},"text/x-nfo":{"source":"apache","extensions":["nfo"]},"text/x-opml":{"source":"apache","extensions":["opml"]},"text/x-org":{"compressible":true,"extensions":["org"]},"text/x-pascal":{"source":"apache","extensions":["p","pas"]},"text/x-processing":{"compressible":true,"extensions":["pde"]},"text/x-sass":{"extensions":["sass"]},"text/x-scss":{"extensions":["scss"]},"text/x-setext":{"source":"apache","extensions":["etx"]},"text/x-sfv":{"source":"apache","extensions":["sfv"]},"text/x-suse-ymp":{"compressible":true,"extensions":["ymp"]},"text/x-uuencode":{"source":"apache","extensions":["uu"]},"text/x-vcalendar":{"source":"apache","extensions":["vcs"]},"text/x-vcard":{"source":"apache","extensions":["vcf"]},"text/xml":{"source":"iana","compressible":true,"extensions":["xml"]},"text/xml-external-parsed-entity":{"source":"iana"},"text/yaml":{"extensions":["yaml","yml"]},"video/1d-interleaved-parityfec":{"source":"iana"},"video/3gpp":{"source":"iana","extensions":["3gp","3gpp"]},"video/3gpp-tt":{"source":"iana"},"video/3gpp2":{"source":"iana","extensions":["3g2"]},"video/bmpeg":{"source":"iana"},"video/bt656":{"source":"iana"},"video/celb":{"source":"iana"},"video/dv":{"source":"iana"},"video/encaprtp":{"source":"iana"},"video/flexfec":{"source":"iana"},"video/h261":{"source":"iana","extensions":["h261"]},"video/h263":{"source":"iana","extensions":["h263"]},"video/h263-1998":{"source":"iana"},"video/h263-2000":{"source":"iana"},"video/h264":{"source":"iana","extensions":["h264"]},"video/h264-rcdo":{"source":"iana"},"video/h264-svc":{"source":"iana"},"video/h265":{"source":"iana"},"video/iso.segment":{"source":"iana"},"video/jpeg":{"source":"iana","extensions":["jpgv"]},"video/jpeg2000":{"source":"iana"},"video/jpm":{"source":"apache","extensions":["jpm","jpgm"]},"video/mj2":{"source":"iana","extensions":["mj2","mjp2"]},"video/mp1s":{"source":"iana"},"video/mp2p":{"source":"iana"},"video/mp2t":{"source":"iana","extensions":["ts"]},"video/mp4":{"source":"iana","compressible":false,"extensions":["mp4","mp4v","mpg4"]},"video/mp4v-es":{"source":"iana"},"video/mpeg":{"source":"iana","compressible":false,"extensions":["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{"source":"iana"},"video/mpv":{"source":"iana"},"video/nv":{"source":"iana"},"video/ogg":{"source":"iana","compressible":false,"extensions":["ogv"]},"video/parityfec":{"source":"iana"},"video/pointer":{"source":"iana"},"video/quicktime":{"source":"iana","compressible":false,"extensions":["qt","mov"]},"video/raptorfec":{"source":"iana"},"video/raw":{"source":"iana"},"video/rtp-enc-aescm128":{"source":"iana"},"video/rtploopback":{"source":"iana"},"video/rtx":{"source":"iana"},"video/smpte291":{"source":"iana"},"video/smpte292m":{"source":"iana"},"video/ulpfec":{"source":"iana"},"video/vc1":{"source":"iana"},"video/vc2":{"source":"iana"},"video/vnd.cctv":{"source":"iana"},"video/vnd.dece.hd":{"source":"iana","extensions":["uvh","uvvh"]},"video/vnd.dece.mobile":{"source":"iana","extensions":["uvm","uvvm"]},"video/vnd.dece.mp4":{"source":"iana"},"video/vnd.dece.pd":{"source":"iana","extensions":["uvp","uvvp"]},"video/vnd.dece.sd":{"source":"iana","extensions":["uvs","uvvs"]},"video/vnd.dece.video":{"source":"iana","extensions":["uvv","uvvv"]},"video/vnd.directv.mpeg":{"source":"iana"},"video/vnd.directv.mpeg-tts":{"source":"iana"},"video/vnd.dlna.mpeg-tts":{"source":"iana"},"video/vnd.dvb.file":{"source":"iana","extensions":["dvb"]},"video/vnd.fvt":{"source":"iana","extensions":["fvt"]},"video/vnd.hns.video":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.ttsavc":{"source":"iana"},"video/vnd.iptvforum.ttsmpeg2":{"source":"iana"},"video/vnd.motorola.video":{"source":"iana"},"video/vnd.motorola.videop":{"source":"iana"},"video/vnd.mpegurl":{"source":"iana","extensions":["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{"source":"iana","extensions":["pyv"]},"video/vnd.nokia.interleaved-multimedia":{"source":"iana"},"video/vnd.nokia.mp4vr":{"source":"iana"},"video/vnd.nokia.videovoip":{"source":"iana"},"video/vnd.objectvideo":{"source":"iana"},"video/vnd.radgamettools.bink":{"source":"iana"},"video/vnd.radgamettools.smacker":{"source":"iana"},"video/vnd.sealed.mpeg1":{"source":"iana"},"video/vnd.sealed.mpeg4":{"source":"iana"},"video/vnd.sealed.swf":{"source":"iana"},"video/vnd.sealedmedia.softseal.mov":{"source":"iana"},"video/vnd.uvvu.mp4":{"source":"iana","extensions":["uvu","uvvu"]},"video/vnd.vivo":{"source":"iana","extensions":["viv"]},"video/vnd.youtube.yt":{"source":"iana"},"video/vp8":{"source":"iana"},"video/webm":{"source":"apache","compressible":false,"extensions":["webm"]},"video/x-f4v":{"source":"apache","extensions":["f4v"]},"video/x-fli":{"source":"apache","extensions":["fli"]},"video/x-flv":{"source":"apache","compressible":false,"extensions":["flv"]},"video/x-m4v":{"source":"apache","extensions":["m4v"]},"video/x-matroska":{"source":"apache","compressible":false,"extensions":["mkv","mk3d","mks"]},"video/x-mng":{"source":"apache","extensions":["mng"]},"video/x-ms-asf":{"source":"apache","extensions":["asf","asx"]},"video/x-ms-vob":{"source":"apache","extensions":["vob"]},"video/x-ms-wm":{"source":"apache","extensions":["wm"]},"video/x-ms-wmv":{"source":"apache","compressible":false,"extensions":["wmv"]},"video/x-ms-wmx":{"source":"apache","extensions":["wmx"]},"video/x-ms-wvx":{"source":"apache","extensions":["wvx"]},"video/x-msvideo":{"source":"apache","extensions":["avi"]},"video/x-sgi-movie":{"source":"apache","extensions":["movie"]},"video/x-smv":{"source":"apache","extensions":["smv"]},"x-conference/x-cooltalk":{"source":"apache","extensions":["ice"]},"x-shader/x-fragment":{"compressible":true},"x-shader/x-vertex":{"compressible":true}}')},function(e,t,i){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(19),a=i(5)("body-parser:raw"),r=i(29),o=i(21);e.exports=function(e){var t=e||{},i=!1!==t.inflate,n="number"!=typeof t.limit?s.parse(t.limit||"100kb"):t.limit,c=t.type||"application/octet-stream",d=t.verify||!1;if(!1!==d&&"function"!=typeof d)throw new TypeError("option verify must be function");var h="function"!=typeof c?function(e){return function(t){return Boolean(o(t,e))}}(c):c;function l(e){return e}return function(e,t,s){return e._body?(a("body already parsed"),void s()):(e.body=e.body||{},o.hasBody(e)?(a("content-type %j",e.headers["content-type"]),h(e)?void r(e,t,s,l,a,{encoding:null,inflate:i,limit:n,verify:d}):(a("skip parsing"),void s())):(a("skip empty body"),void s()))}}},function(e,t,i){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(19),a=i(26),r=i(5)("body-parser:text"),o=i(29),n=i(21);e.exports=function(e){var t=e||{},i=t.defaultCharset||"utf-8",c=!1!==t.inflate,d="number"!=typeof t.limit?s.parse(t.limit||"100kb"):t.limit,h=t.type||"text/plain",l=t.verify||!1;if(!1!==l&&"function"!=typeof l)throw new TypeError("option verify must be function");var u="function"!=typeof h?function(e){return function(t){return Boolean(n(t,e))}}(h):h;function p(e){return e}return function(e,t,s){if(e._body)return r("body already parsed"),void s();if(e.body=e.body||{},!n.hasBody(e))return r("skip empty body"),void s();if(r("content-type %j",e.headers["content-type"]),!u(e))return r("skip parsing"),void s();var h=function(e){try{return(a.parse(e).parameters.charset||"").toLowerCase()}catch(e){return}}(e)||i;o(e,t,s,p,r,{encoding:h,inflate:c,limit:d,verify:l})}}},function(e,t,i){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(19),a=i(26),r=i(20),o=i(5)("body-parser:urlencoded"),n=i(10)("body-parser"),c=i(29),d=i(21);e.exports=function(e){var t=e||{};void 0===t.extended&&n("undefined extended: provide extended option");var i=!1!==t.extended,h=!1!==t.inflate,p="number"!=typeof t.limit?s.parse(t.limit||"100kb"):t.limit,f=t.type||"application/x-www-form-urlencoded",m=t.verify||!1;if(!1!==m&&"function"!=typeof m)throw new TypeError("option verify must be function");var v=i?function(e){var t=void 0!==e.parameterLimit?e.parameterLimit:1e3,i=u("qs");if(isNaN(t)||t<1)throw new TypeError("option parameterLimit must be a positive number");isFinite(t)&&(t|=0);return function(e){var s=l(e,t);if(void 0===s)throw o("too many parameters"),r(413,"too many parameters",{type:"parameters.too.many"});var a=Math.max(100,s);return o("parse extended urlencoding"),i(e,{allowPrototypes:!0,arrayLimit:a,depth:1/0,parameterLimit:t})}}(t):function(e){var t=void 0!==e.parameterLimit?e.parameterLimit:1e3,i=u("querystring");if(isNaN(t)||t<1)throw new TypeError("option parameterLimit must be a positive number");isFinite(t)&&(t|=0);return function(e){if(void 0===l(e,t))throw o("too many parameters"),r(413,"too many parameters",{type:"parameters.too.many"});return o("parse urlencoding"),i(e,void 0,void 0,{maxKeys:t})}}(t),y="function"!=typeof f?function(e){return function(t){return Boolean(d(t,e))}}(f):f;function g(e){return e.length?v(e):{}}return function(e,t,i){if(e._body)return o("body already parsed"),void i();if(e.body=e.body||{},!d.hasBody(e))return o("skip empty body"),void i();if(o("content-type %j",e.headers["content-type"]),!y(e))return o("skip parsing"),void i();var s=function(e){try{return(a.parse(e).parameters.charset||"").toLowerCase()}catch(e){return}}(e)||"utf-8";if("utf-8"!==s)return o("invalid charset"),void i(r(415,'unsupported charset "'+s.toUpperCase()+'"',{charset:s,type:"charset.unsupported"}));c(e,t,i,g,o,{debug:o,encoding:s,inflate:h,limit:p,verify:m})}};var h=Object.create(null);function l(e,t){for(var i=0,s=0;-1!==(s=e.indexOf("&",s));)if(s++,++i===t)return;return i}function u(e){var t=h[e];if(void 0!==t)return t.parse;switch(e){case"qs":t=i(39);break;case"querystring":t=i(58)}return h[e]=t,t.parse}},function(e,t,i){"use strict";var s=i(56),a=i(57),r=Object.prototype.hasOwnProperty,o={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},n=Array.isArray,c=Array.prototype.push,d=function(e,t){c.apply(e,n(t)?t:[t])},h=Date.prototype.toISOString,l={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:s.encode,encodeValuesOnly:!1,formatter:a.formatters[a.default],indices:!1,serializeDate:function(e){return h.call(e)},skipNulls:!1,strictNullHandling:!1},u=function e(t,i,a,r,o,c,h,u,p,f,m,v,y){var g=t;if("function"==typeof h?g=h(i,g):g instanceof Date?g=f(g):"comma"===a&&n(g)&&(g=g.join(",")),null===g){if(r)return c&&!v?c(i,l.encoder,y):i;g=""}if("string"==typeof g||"number"==typeof g||"boolean"==typeof g||s.isBuffer(g))return c?[m(v?i:c(i,l.encoder,y))+"="+m(c(g,l.encoder,y))]:[m(i)+"="+m(String(g))];var b,w=[];if(void 0===g)return w;if(n(h))b=h;else{var k=Object.keys(g);b=u?k.sort(u):k}for(var x=0;x<b.length;++x){var T=b[x];o&&null===g[T]||(n(g)?d(w,e(g[T],"function"==typeof a?a(i,T):i,a,r,o,c,h,u,p,f,m,v,y)):d(w,e(g[T],i+(p?"."+T:"["+T+"]"),a,r,o,c,h,u,p,f,m,v,y)))}return w};e.exports=function(e,t){var i,s=e,c=function(e){if(!e)return l;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||l.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=a.default;if(void 0!==e.format){if(!r.call(a.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var s=a.formatters[i],o=l.filter;return("function"==typeof e.filter||n(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:l.addQueryPrefix,allowDots:void 0===e.allowDots?l.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:l.charsetSentinel,delimiter:void 0===e.delimiter?l.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:l.encode,encoder:"function"==typeof e.encoder?e.encoder:l.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:l.encodeValuesOnly,filter:o,formatter:s,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:l.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:l.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:l.strictNullHandling}}(t);"function"==typeof c.filter?s=(0,c.filter)("",s):n(c.filter)&&(i=c.filter);var h,p=[];if("object"!=typeof s||null===s)return"";h=t&&t.arrayFormat in o?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var f=o[h];i||(i=Object.keys(s)),c.sort&&i.sort(c.sort);for(var m=0;m<i.length;++m){var v=i[m];c.skipNulls&&null===s[v]||d(p,u(s[v],v,f,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.formatter,c.encodeValuesOnly,c.charset))}var y=p.join(c.delimiter),g=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),y.length>0?g+y:""}},function(e,t,i){"use strict";var s=i(56),a=Object.prototype.hasOwnProperty,r={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:s.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},o=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},n=function(e,t,i){if(e){var s=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,r=/(\[[^[\]]*])/g,o=/(\[[^[\]]*])/.exec(s),n=o?s.slice(0,o.index):s,c=[];if(n){if(!i.plainObjects&&a.call(Object.prototype,n)&&!i.allowPrototypes)return;c.push(n)}for(var d=0;null!==(o=r.exec(s))&&d<i.depth;){if(d+=1,!i.plainObjects&&a.call(Object.prototype,o[1].slice(1,-1))&&!i.allowPrototypes)return;c.push(o[1])}return o&&c.push("["+s.slice(o.index)+"]"),function(e,t,i){for(var s=t,a=e.length-1;a>=0;--a){var r,o=e[a];if("[]"===o&&i.parseArrays)r=[].concat(s);else{r=i.plainObjects?Object.create(null):{};var n="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,c=parseInt(n,10);i.parseArrays||""!==n?!isNaN(c)&&o!==n&&String(c)===n&&c>=0&&i.parseArrays&&c<=i.arrayLimit?(r=[])[c]=s:r[n]=s:r={0:s}}s=r}return s}(c,t,i)}};e.exports=function(e,t){var i=function(e){if(!e)return r;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?r.charset:e.charset;return{allowDots:void 0===e.allowDots?r.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:r.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:r.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:r.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:r.comma,decoder:"function"==typeof e.decoder?e.decoder:r.decoder,delimiter:"string"==typeof e.delimiter||s.isRegExp(e.delimiter)?e.delimiter:r.delimiter,depth:"number"==typeof e.depth?e.depth:r.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:r.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:r.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:r.strictNullHandling}}(t);if(""===e||null==e)return i.plainObjects?Object.create(null):{};for(var c="string"==typeof e?function(e,t){var i,n={},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,d=t.parameterLimit===1/0?void 0:t.parameterLimit,h=c.split(t.delimiter,d),l=-1,u=t.charset;if(t.charsetSentinel)for(i=0;i<h.length;++i)0===h[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===h[i]?u="utf-8":"utf8=%26%2310003%3B"===h[i]&&(u="iso-8859-1"),l=i,i=h.length);for(i=0;i<h.length;++i)if(i!==l){var p,f,m=h[i],v=m.indexOf("]="),y=-1===v?m.indexOf("="):v+1;-1===y?(p=t.decoder(m,r.decoder,u),f=t.strictNullHandling?null:""):(p=t.decoder(m.slice(0,y),r.decoder,u),f=t.decoder(m.slice(y+1),r.decoder,u)),f&&t.interpretNumericEntities&&"iso-8859-1"===u&&(f=o(f)),f&&t.comma&&f.indexOf(",")>-1&&(f=f.split(",")),a.call(n,p)?n[p]=s.combine(n[p],f):n[p]=f}return n}(e,i):e,d=i.plainObjects?Object.create(null):{},h=Object.keys(c),l=0;l<h.length;++l){var u=h[l],p=n(u,c[u],i);d=s.merge(d,p,i)}return s.compact(d)}},function(e,t,i){"use strict";
/*!
 * merge-descriptors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=function(e,t,i){if(!e)throw new TypeError("argument dest is required");if(!t)throw new TypeError("argument src is required");void 0===i&&(i=!0);return Object.getOwnPropertyNames(t).forEach((function(a){if(i||!s.call(e,a)){var r=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(e,a,r)}})),e};var s=Object.prototype.hasOwnProperty},function(e,t,i){"use strict";
/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(141),a=i(59),r=i(40),o=i(143),n=i(62),c=i(5)("express:application"),d=i(144),h=i(13),l=i(15).compileETag,u=i(15).compileQueryParser,p=i(15).compileTrust,f=i(10)("express"),m=i(33),v=i(34),y=i(11).resolve,g=i(27),b=Array.prototype.slice,w=e.exports={};function k(e){"test"!==this.get("env")&&console.error(e.stack||e.toString())}w.init=function(){this.cache={},this.engines={},this.settings={},this.defaultConfiguration()},w.defaultConfiguration=function(){var e="production";this.enable("x-powered-by"),this.set("etag","weak"),this.set("env",e),this.set("query parser","extended"),this.set("subdomain offset",2),this.set("trust proxy",!1),Object.defineProperty(this.settings,"@@symbol:trust_proxy_default",{configurable:!0,value:!0}),c("booting in %s mode",e),this.on("mount",(function(e){!0===this.settings["@@symbol:trust_proxy_default"]&&"function"==typeof e.settings["trust proxy fn"]&&(delete this.settings["trust proxy"],delete this.settings["trust proxy fn"]),g(this.request,e.request),g(this.response,e.response),g(this.engines,e.engines),g(this.settings,e.settings)})),this.locals=Object.create(null),this.mountpath="/",this.locals.settings=this.settings,this.set("view",d),this.set("views",y("views")),this.set("jsonp callback name","callback"),this.enable("view cache"),Object.defineProperty(this,"router",{get:function(){throw new Error("'app.router' is deprecated!\nPlease see the 3.x to 4.x migration guide for details on how to update your app.")}})},w.lazyrouter=function(){this._router||(this._router=new a({caseSensitive:this.enabled("case sensitive routing"),strict:this.enabled("strict routing")}),this._router.use(n(this.get("query parser fn"))),this._router.use(o.init(this)))},w.handle=function(e,t,i){var a=this._router,r=i||s(e,t,{env:this.get("env"),onerror:k.bind(this)});if(!a)return c("no routes defined on app"),void r();a.handle(e,t,r)},w.use=function(e){var t=0,i="/";if("function"!=typeof e){for(var s=e;Array.isArray(s)&&0!==s.length;)s=s[0];"function"!=typeof s&&(t=1,i=e)}var a=m(b.call(arguments,t));if(0===a.length)throw new TypeError("app.use() requires a middleware function");this.lazyrouter();var r=this._router;return a.forEach((function(e){if(!e||!e.handle||!e.set)return r.use(i,e);c(".use app under %s",i),e.mountpath=i,e.parent=this,r.use(i,(function(t,i,s){var a=t.app;e.handle(t,i,(function(e){g(t,a.request),g(i,a.response),s(e)}))})),e.emit("mount",this)}),this),this},w.route=function(e){return this.lazyrouter(),this._router.route(e)},w.engine=function(e,t){if("function"!=typeof t)throw new Error("callback function required");var i="."!==e[0]?"."+e:e;return this.engines[i]=t,this},w.param=function(e,t){if(this.lazyrouter(),Array.isArray(e)){for(var i=0;i<e.length;i++)this.param(e[i],t);return this}return this._router.param(e,t),this},w.set=function(e,t){if(1===arguments.length)return this.settings[e];switch(c('set "%s" to %o',e,t),this.settings[e]=t,e){case"etag":this.set("etag fn",l(t));break;case"query parser":this.set("query parser fn",u(t));break;case"trust proxy":this.set("trust proxy fn",p(t)),Object.defineProperty(this.settings,"@@symbol:trust_proxy_default",{configurable:!0,value:!1})}return this},w.path=function(){return this.parent?this.parent.path()+this.mountpath:""},w.enabled=function(e){return Boolean(this.set(e))},w.disabled=function(e){return!this.set(e)},w.enable=function(e){return this.set(e,!0)},w.disable=function(e){return this.set(e,!1)},r.forEach((function(e){w[e]=function(t){if("get"===e&&1===arguments.length)return this.set(t);this.lazyrouter();var i=this._router.route(t);return i[e].apply(i,b.call(arguments,1)),this}})),w.all=function(e){this.lazyrouter();for(var t=this._router.route(e),i=b.call(arguments,1),s=0;s<r.length;s++)t[r[s]].apply(t,i);return this},w.del=f.function(w.delete,"app.del: Use app.delete instead"),w.render=function(e,t,i){var s,a=this.cache,r=i,o=this.engines,n=t,c={};if("function"==typeof t&&(r=t,n={}),v(c,this.locals),n._locals&&v(c,n._locals),v(c,n),null==c.cache&&(c.cache=this.enabled("view cache")),c.cache&&(s=a[e]),!s){if(!(s=new(this.get("view"))(e,{defaultEngine:this.get("view engine"),root:this.get("views"),engines:o})).path){var d=Array.isArray(s.root)&&s.root.length>1?'directories "'+s.root.slice(0,-1).join('", "')+'" or "'+s.root[s.root.length-1]+'"':'directory "'+s.root+'"',h=new Error('Failed to lookup view "'+e+'" in views '+d);return h.view=s,r(h)}c.cache&&(a[e]=s)}!function(e,t,i){try{e.render(t,i)}catch(e){i(e)}}(s,c,r)},w.listen=function(){var e=h.createServer(this);return e.listen.apply(e,arguments)}},function(e,t,i){"use strict";
/*!
 * finalhandler
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(5)("finalhandler"),a=i(31),r=i(32),o=i(30),n=i(22),c=i(28),d=i(53),h=/\x20{2}/g,l=/\n/g,u="function"==typeof setImmediate?setImmediate:function(e){process.nextTick(e.bind.apply(e,arguments))},p=o.isFinished;function f(e){return"boolean"!=typeof e.headersSent?Boolean(e._header):e.headersSent}e.exports=function(e,t,i){var m=i||{},v=m.env||"production",y=m.onerror;return function(i){var m,g,b;if(i||!f(t)){if(i?(void 0===(b=function(e){if("number"==typeof e.status&&e.status>=400&&e.status<600)return e.status;if("number"==typeof e.statusCode&&e.statusCode>=400&&e.statusCode<600)return e.statusCode;return}(i))?b=function(e){var t=e.statusCode;("number"!=typeof t||t<400||t>599)&&(t=500);return t}(t):m=function(e){if(!e.headers||"object"!=typeof e.headers)return;for(var t=Object.create(null),i=Object.keys(e.headers),s=0;s<i.length;s++){var a=i[s];t[a]=e.headers[a]}return t}(i),g=function(e,t,i){var s;"production"!==i&&((s=e.stack)||"function"!=typeof e.toString||(s=e.toString()));return s||c[t]}(i,b,v)):(b=404,g="Cannot "+e.method+" "+a(function(e){try{return n.original(e).pathname}catch(e){return"resource"}}(e))),s("default %s",b),i&&y&&u(y,i,e,t),f(t))return s("cannot %d after headers sent",b),void e.socket.destroy();!function(e,t,i,s,a){function n(){var o=function(e){return'<!DOCTYPE html>\n<html lang="en">\n<head>\n<meta charset="utf-8">\n<title>Error</title>\n</head>\n<body>\n<pre>'+r(e).replace(l,"<br>").replace(h," &nbsp;")+"</pre>\n</body>\n</html>\n"}(a);t.statusCode=i,t.statusMessage=c[i],function(e,t){if(!t)return;for(var i=Object.keys(t),s=0;s<i.length;s++){var a=i[s];e.setHeader(a,t[a])}}(t,s),t.setHeader("Content-Security-Policy","default-src 'none'"),t.setHeader("X-Content-Type-Options","nosniff"),t.setHeader("Content-Type","text/html; charset=utf-8"),t.setHeader("Content-Length",Buffer.byteLength(o,"utf8")),"HEAD"!==e.method?t.end(o,"utf8"):t.end()}if(p(e))return void n();d(e),o(e,n),e.resume()}(e,t,b,m,g)}else s("cannot 404 after headers sent")}}},function(e,t){e.exports=function e(t,s,a){s=s||[];var r,o=(a=a||{}).strict,n=!1!==a.end,c=a.sensitive?"":"i",d=0,h=s.length,l=0,u=0;if(t instanceof RegExp){for(;r=i.exec(t.source);)s.push({name:u++,optional:!1,offset:r.index});return t}if(Array.isArray(t))return t=t.map((function(t){return e(t,s,a).source})),new RegExp("(?:"+t.join("|")+")",c);t=("^"+t+(o?"":"/"===t[t.length-1]?"?":"/?")).replace(/\/\(/g,"/(?:").replace(/([\/\.])/g,"\\$1").replace(/(\\\/)?(\\\.)?:(\w+)(\(.*?\))?(\*)?(\?)?/g,(function(e,t,i,a,r,o,n,c){t=t||"",i=i||"",r=r||"([^\\/"+i+"]+?)",n=n||"",s.push({name:a,optional:!!n,offset:c+d});var h=(n?"":t)+"(?:"+i+(n?t:"")+r+(o?"((?:[\\/"+i+"].+?)?)":"")+")"+n;return d+=h.length-e.length,h})).replace(/\*/g,(function(e,t){for(var i=s.length;i-- >h&&s[i].offset>t;)s[i].offset+=3;return"(.*)"}));for(;r=i.exec(t);){for(var p=0,f=r.index;"\\"===t.charAt(--f);)p++;p%2!=1&&((h+l===s.length||s[h+l].offset>r.index)&&s.splice(h+l,0,{name:u++,optional:!1,offset:r.index}),l++)}return t+=n?"$":"/"===t[t.length-1]?"":"(?=\\/|$)",new RegExp(t,c)};var i=/\((?!\?)/g},function(e,t,i){"use strict";
/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(27);t.init=function(e){return function(t,i,a){e.enabled("x-powered-by")&&i.setHeader("X-Powered-By","Express"),t.res=i,i.req=t,t.next=a,s(t,e.request),s(i,e.response),i.locals=i.locals||Object.create(null),a()}}},function(e,t,i){"use strict";
/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(5)("express:view"),a=i(11),r=i(16),o=a.dirname,n=a.basename,c=a.extname,d=a.join,h=a.resolve;function l(e,t){var a=t||{};if(this.defaultEngine=a.defaultEngine,this.ext=c(e),this.name=e,this.root=a.root,!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");var r=e;if(this.ext||(this.ext="."!==this.defaultEngine[0]?"."+this.defaultEngine:this.defaultEngine,r+=this.ext),!a.engines[this.ext]){var o=this.ext.substr(1);s('require "%s"',o);var n=i(145)(o).__express;if("function"!=typeof n)throw new Error('Module "'+o+'" does not provide a view engine.');a.engines[this.ext]=n}this.engine=a.engines[this.ext],this.path=this.lookup(r)}function u(e){s('stat "%s"',e);try{return r.statSync(e)}catch(e){return}}e.exports=l,l.prototype.lookup=function(e){var t,i=[].concat(this.root);s('lookup "%s"',e);for(var a=0;a<i.length&&!t;a++){var r=i[a],c=h(r,e),d=o(c),l=n(c);t=this.resolve(d,l)}return t},l.prototype.render=function(e,t){s('render "%s"',this.path),this.engine(this.path,e,t)},l.prototype.resolve=function(e,t){var i=this.ext,s=d(e,t),a=u(s);return a&&a.isFile()||(a=u(s=d(e,n(t,i),"index"+i)))&&a.isFile()?s:void 0}},function(e,t){function i(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id=145},function(e,t,i){"use strict";
/*!
 * destroy
 * Copyright(c) 2014 Jonathan Ong
 * MIT Licensed
 */var s=i(16).ReadStream,a=i(12);function r(){"number"==typeof this.fd&&this.close()}e.exports=function(e){if(e instanceof s)return function(e){e.destroy(),"function"==typeof e.close&&e.on("open",r);return e}(e);if(!(e instanceof a))return e;"function"==typeof e.destroy&&e.destroy();return e}},function(e,t,i){i(11);var s=i(16);function a(){this.types=Object.create(null),this.extensions=Object.create(null)}a.prototype.define=function(e){for(var t in e){for(var i=e[t],s=0;s<i.length;s++)process.env.DEBUG_MIME&&this.types[i[s]]&&console.warn((this._loading||"define()").replace(/.*\//,""),'changes "'+i[s]+'" extension type from '+this.types[i[s]]+" to "+t),this.types[i[s]]=t;this.extensions[t]||(this.extensions[t]=i[0])}},a.prototype.load=function(e){this._loading=e;var t={};s.readFileSync(e,"ascii").split(/[\r\n]+/).forEach((function(e){var i=e.replace(/\s*#.*|^\s*|\s*$/g,"").split(/\s+/);t[i.shift()]=i})),this.define(t),this._loading=null},a.prototype.lookup=function(e,t){var i=e.replace(/^.*[\.\/\\]/,"").toLowerCase();return this.types[i]||t||this.default_type},a.prototype.extension=function(e){var t=e.match(/^\s*([^;\s]*)(?:;|\s|$)/)[1].toLowerCase();return this.extensions[t]};var r=new a;r.define(i(148)),r.default_type=r.lookup("bin"),r.Mime=a,r.charsets={lookup:function(e,t){return/^text\/|^application\/(javascript|json)/.test(e)?"UTF-8":t}},e.exports=r},function(e){e.exports=JSON.parse('{"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomsvc+xml":["atomsvc"],"application/bdoc":["bdoc"],"application/ccxml+xml":["ccxml"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/font-tdpfr":["pfr"],"application/font-woff":[],"application/font-woff2":[],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/prs.cww":["cww"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":[],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":[],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":[],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":[],"application/x-msdownload":["com","bat"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["wmf","emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":[],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"application/xaml+xml":["xaml"],"application/xcap-diff+xml":["xdf"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":[],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp3":[],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/wav":["wav"],"audio/wave":[],"audio/webm":["weba"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":[],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":[],"audio/x-wav":[],"audio/xm":["xm"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/apng":["apng"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/g3fax":["g3"],"image/gif":["gif"],"image/ief":["ief"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/ktx":["ktx"],"image/png":["png"],"image/prs.btif":["btif"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/tiff":["tiff","tif"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":[],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/webp":["webp"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":[],"image/x-pcx":["pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/rfc822":["eml","mime"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.vtu":["vtu"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["x3db","x3dbz"],"model/x3d+vrml":["x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/hjson":["hjson"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/prs.lines.tag":["dsc"],"text/richtext":["rtx"],"text/rtf":[],"text/sgml":["sgml","sgm"],"text/slim":["slim","slm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/vtt":["vtt"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":[],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"text/xml":[],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/webm":["webm"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}')},function(e,t){var i=1e3,s=6e4,a=60*s,r=24*a;function o(e,t,i,s){var a=t>=1.5*i;return Math.round(e/i)+" "+s+(a?"s":"")}e.exports=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*r;case"hours":case"hour":case"hrs":case"hr":case"h":return o*a;case"minutes":case"minute":case"mins":case"min":case"m":return o*s;case"seconds":case"second":case"secs":case"sec":case"s":return o*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}(e);if("number"===n&&!1===isNaN(e))return t.long?function(e){var t=Math.abs(e);if(t>=r)return o(e,t,r,"day");if(t>=a)return o(e,t,a,"hour");if(t>=s)return o(e,t,s,"minute");if(t>=i)return o(e,t,i,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=r)return Math.round(e/r)+"d";if(t>=a)return Math.round(e/a)+"h";if(t>=s)return Math.round(e/s)+"m";if(t>=i)return Math.round(e/i)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,i){"use strict";
/*!
 * forwarded
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=function(e){if(!e)throw new TypeError("argument req is required");var t=function(e){for(var t=e.length,i=[],s=e.length,a=e.length-1;a>=0;a--)switch(e.charCodeAt(a)){case 32:s===t&&(s=t=a);break;case 44:s!==t&&i.push(e.substring(s,t)),s=t=a;break;default:s=a}s!==t&&i.push(e.substring(s,t));return i}(e.headers["x-forwarded-for"]||"");return[e.connection.remoteAddress].concat(t)}},function(e,t,i){(function(e){(function(){var t,i,s,a,r,o,n;i={},null!==e&&e.exports?e.exports=i:this.ipaddr=i,n=function(e,t,i,s){var a,r;if(e.length!==t.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");for(a=0;s>0;){if((r=i-s)<0&&(r=0),e[a]>>r!=t[a]>>r)return!1;s-=i,a+=1}return!0},i.subnetMatch=function(e,t,i){var s,a,r,o,n;for(r in null==i&&(i="unicast"),t)for(!(o=t[r])[0]||o[0]instanceof Array||(o=[o]),s=0,a=o.length;s<a;s++)if(n=o[s],e.kind()===n[0].kind()&&e.match.apply(e,n))return r;return i},i.IPv4=function(){function e(e){var t,i,s;if(4!==e.length)throw new Error("ipaddr: ipv4 octet count should be 4");for(t=0,i=e.length;t<i;t++)if(!(0<=(s=e[t])&&s<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=e}return e.prototype.kind=function(){return"ipv4"},e.prototype.toString=function(){return this.octets.join(".")},e.prototype.toNormalizedString=function(){return this.toString()},e.prototype.toByteArray=function(){return this.octets.slice(0)},e.prototype.match=function(e,t){var i;if(void 0===t&&(e=(i=e)[0],t=i[1]),"ipv4"!==e.kind())throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return n(this.octets,e.octets,8,t)},e.prototype.SpecialRanges={unspecified:[[new e([0,0,0,0]),8]],broadcast:[[new e([255,255,255,255]),32]],multicast:[[new e([224,0,0,0]),4]],linkLocal:[[new e([169,254,0,0]),16]],loopback:[[new e([127,0,0,0]),8]],carrierGradeNat:[[new e([100,64,0,0]),10]],private:[[new e([10,0,0,0]),8],[new e([172,16,0,0]),12],[new e([192,168,0,0]),16]],reserved:[[new e([192,0,0,0]),24],[new e([192,0,2,0]),24],[new e([192,88,99,0]),24],[new e([198,51,100,0]),24],[new e([203,0,113,0]),24],[new e([240,0,0,0]),4]]},e.prototype.range=function(){return i.subnetMatch(this,this.SpecialRanges)},e.prototype.toIPv4MappedAddress=function(){return i.IPv6.parse("::ffff:"+this.toString())},e.prototype.prefixLengthFromSubnetMask=function(){var e,t,i,s,a,r,o;for(o={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},e=0,a=!1,t=i=3;i>=0;t=i+=-1){if(!((s=this.octets[t])in o))return null;if(r=o[s],a&&0!==r)return null;8!==r&&(a=!0),e+=r}return 32-e},e}(),s="(0?\\d+|0x[a-f0-9]+)",a={fourOctet:new RegExp("^"+s+"\\."+s+"\\."+s+"\\."+s+"$","i"),longValue:new RegExp("^"+s+"$","i")},i.IPv4.parser=function(e){var t,i,s,r,o;if(i=function(e){return"0"===e[0]&&"x"!==e[1]?parseInt(e,8):parseInt(e)},t=e.match(a.fourOctet))return function(){var e,a,r,o;for(o=[],e=0,a=(r=t.slice(1,6)).length;e<a;e++)s=r[e],o.push(i(s));return o}();if(t=e.match(a.longValue)){if((o=i(t[1]))>4294967295||o<0)throw new Error("ipaddr: address outside defined range");return function(){var e,t;for(t=[],r=e=0;e<=24;r=e+=8)t.push(o>>r&255);return t}().reverse()}return null},i.IPv6=function(){function e(e,t){var i,s,a,r,o,n;if(16===e.length)for(this.parts=[],i=s=0;s<=14;i=s+=2)this.parts.push(e[i]<<8|e[i+1]);else{if(8!==e.length)throw new Error("ipaddr: ipv6 part count should be 8 or 16");this.parts=e}for(a=0,r=(n=this.parts).length;a<r;a++)if(!(0<=(o=n[a])&&o<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");t&&(this.zoneId=t)}return e.prototype.kind=function(){return"ipv6"},e.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},e.prototype.toRFC5952String=function(){var e,t,i,s,a;for(s=/((^|:)(0(:|$)){2,})/g,a=this.toNormalizedString(),e=0,t=-1;i=s.exec(a);)i[0].length>t&&(e=i.index,t=i[0].length);return t<0?a:a.substring(0,e)+"::"+a.substring(e+t)},e.prototype.toByteArray=function(){var e,t,i,s,a;for(e=[],t=0,i=(a=this.parts).length;t<i;t++)s=a[t],e.push(s>>8),e.push(255&s);return e},e.prototype.toNormalizedString=function(){var e,t,i;return e=function(){var e,i,s,a;for(a=[],e=0,i=(s=this.parts).length;e<i;e++)t=s[e],a.push(t.toString(16));return a}.call(this).join(":"),i="",this.zoneId&&(i="%"+this.zoneId),e+i},e.prototype.toFixedLengthString=function(){var e,t,i;return e=function(){var e,i,s,a;for(a=[],e=0,i=(s=this.parts).length;e<i;e++)t=s[e],a.push(t.toString(16).padStart(4,"0"));return a}.call(this).join(":"),i="",this.zoneId&&(i="%"+this.zoneId),e+i},e.prototype.match=function(e,t){var i;if(void 0===t&&(e=(i=e)[0],t=i[1]),"ipv6"!==e.kind())throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return n(this.parts,e.parts,16,t)},e.prototype.SpecialRanges={unspecified:[new e([0,0,0,0,0,0,0,0]),128],linkLocal:[new e([65152,0,0,0,0,0,0,0]),10],multicast:[new e([65280,0,0,0,0,0,0,0]),8],loopback:[new e([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new e([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new e([0,0,0,0,0,65535,0,0]),96],rfc6145:[new e([0,0,0,0,65535,0,0,0]),96],rfc6052:[new e([100,65435,0,0,0,0,0,0]),96],"6to4":[new e([8194,0,0,0,0,0,0,0]),16],teredo:[new e([8193,0,0,0,0,0,0,0]),32],reserved:[[new e([8193,3512,0,0,0,0,0,0]),32]]},e.prototype.range=function(){return i.subnetMatch(this,this.SpecialRanges)},e.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},e.prototype.toIPv4Address=function(){var e,t,s;if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");return e=(s=this.parts.slice(-2))[0],t=s[1],new i.IPv4([e>>8,255&e,t>>8,255&t])},e.prototype.prefixLengthFromSubnetMask=function(){var e,t,i,s,a,r,o;for(o={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},e=0,a=!1,t=i=7;i>=0;t=i+=-1){if(!((s=this.parts[t])in o))return null;if(r=o[s],a&&0!==r)return null;16!==r&&(a=!0),e+=r}return 128-e},e}(),r="(?:[0-9a-f]+::?)+",o={zoneIndex:new RegExp("%[0-9a-z]{1,}","i"),native:new RegExp("^(::)?("+r+")?([0-9a-f]+)?(::)?(%[0-9a-z]{1,})?$","i"),transitional:new RegExp("^((?:"+r+")|(?:::)(?:"+r+")?)"+s+"\\."+s+"\\."+s+"\\."+s+"(%[0-9a-z]{1,})?$","i")},t=function(e,t){var i,s,a,r,n,c;if(e.indexOf("::")!==e.lastIndexOf("::"))return null;for((c=(e.match(o.zoneIndex)||[])[0])&&(c=c.substring(1),e=e.replace(/%.+$/,"")),i=0,s=-1;(s=e.indexOf(":",s+1))>=0;)i++;if("::"===e.substr(0,2)&&i--,"::"===e.substr(-2,2)&&i--,i>t)return null;for(n=t-i,r=":";n--;)r+="0:";return":"===(e=e.replace("::",r))[0]&&(e=e.slice(1)),":"===e[e.length-1]&&(e=e.slice(0,-1)),{parts:t=function(){var t,i,s,r;for(r=[],t=0,i=(s=e.split(":")).length;t<i;t++)a=s[t],r.push(parseInt(a,16));return r}(),zoneId:c}},i.IPv6.parser=function(e){var i,s,a,r,n,c,d;if(o.native.test(e))return t(e,8);if((r=e.match(o.transitional))&&(d=r[6]||"",(i=t(r[1].slice(0,-1)+d,6)).parts)){for(s=0,a=(c=[parseInt(r[2]),parseInt(r[3]),parseInt(r[4]),parseInt(r[5])]).length;s<a;s++)if(!(0<=(n=c[s])&&n<=255))return null;return i.parts.push(c[0]<<8|c[1]),i.parts.push(c[2]<<8|c[3]),{parts:i.parts,zoneId:i.zoneId}}return null},i.IPv4.isIPv4=i.IPv6.isIPv6=function(e){return null!==this.parser(e)},i.IPv4.isValid=function(e){try{return new this(this.parser(e)),!0}catch(e){return e,!1}},i.IPv4.isValidFourPartDecimal=function(e){return!(!i.IPv4.isValid(e)||!e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},i.IPv6.isValid=function(e){var t;if("string"==typeof e&&-1===e.indexOf(":"))return!1;try{return new this((t=this.parser(e)).parts,t.zoneId),!0}catch(e){return e,!1}},i.IPv4.parse=function(e){var t;if(null===(t=this.parser(e)))throw new Error("ipaddr: string is not formatted like ip address");return new this(t)},i.IPv6.parse=function(e){var t;if(null===(t=this.parser(e)).parts)throw new Error("ipaddr: string is not formatted like ip address");return new this(t.parts,t.zoneId)},i.IPv4.parseCIDR=function(e){var t,i,s;if((i=e.match(/^(.+)\/(\d+)$/))&&(t=parseInt(i[2]))>=0&&t<=32)return s=[this.parse(i[1]),t],Object.defineProperty(s,"toString",{value:function(){return this.join("/")}}),s;throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},i.IPv4.subnetMaskFromPrefixLength=function(e){var t,i,s;if((e=parseInt(e))<0||e>32)throw new Error("ipaddr: invalid IPv4 prefix length");for(s=[0,0,0,0],i=0,t=Math.floor(e/8);i<t;)s[i]=255,i++;return t<4&&(s[t]=Math.pow(2,e%8)-1<<8-e%8),new this(s)},i.IPv4.broadcastAddressFromCIDR=function(e){var t,i,s,a,r;try{for(s=(t=this.parseCIDR(e))[0].toByteArray(),r=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),a=[],i=0;i<4;)a.push(parseInt(s[i],10)|255^parseInt(r[i],10)),i++;return new this(a)}catch(e){throw e,new Error("ipaddr: the address does not have IPv4 CIDR format")}},i.IPv4.networkAddressFromCIDR=function(e){var t,i,s,a,r;try{for(s=(t=this.parseCIDR(e))[0].toByteArray(),r=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),a=[],i=0;i<4;)a.push(parseInt(s[i],10)&parseInt(r[i],10)),i++;return new this(a)}catch(e){throw e,new Error("ipaddr: the address does not have IPv4 CIDR format")}},i.IPv6.parseCIDR=function(e){var t,i,s;if((i=e.match(/^(.+)\/(\d+)$/))&&(t=parseInt(i[2]))>=0&&t<=128)return s=[this.parse(i[1]),t],Object.defineProperty(s,"toString",{value:function(){return this.join("/")}}),s;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},i.isValid=function(e){return i.IPv6.isValid(e)||i.IPv4.isValid(e)},i.parse=function(e){if(i.IPv6.isValid(e))return i.IPv6.parse(e);if(i.IPv4.isValid(e))return i.IPv4.parse(e);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},i.parseCIDR=function(e){try{return i.IPv6.parseCIDR(e)}catch(t){t;try{return i.IPv4.parseCIDR(e)}catch(e){throw e,new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},i.fromByteArray=function(e){var t;if(4===(t=e.length))return new i.IPv4(e);if(16===t)return new i.IPv6(e);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},i.process=function(e){var t;return"ipv6"===(t=this.parse(e)).kind()&&t.isIPv4MappedAddress()?t.toIPv4Address():t}}).call(this)}).call(this,i(69)(e))},function(e,t,i){"use strict";
/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(153),a=i(10)("express"),r=i(49).isIP,o=i(21),n=i(13),c=i(66),d=i(67),h=i(22),l=i(68),u=Object.create(n.IncomingMessage.prototype);function p(e,t,i){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:i})}e.exports=u,u.get=u.header=function(e){if(!e)throw new TypeError("name argument is required to req.get");if("string"!=typeof e)throw new TypeError("name must be a string to req.get");var t=e.toLowerCase();switch(t){case"referer":case"referrer":return this.headers.referrer||this.headers.referer;default:return this.headers[t]}},u.accepts=function(){var e=s(this);return e.types.apply(e,arguments)},u.acceptsEncodings=function(){var e=s(this);return e.encodings.apply(e,arguments)},u.acceptsEncoding=a.function(u.acceptsEncodings,"req.acceptsEncoding: Use acceptsEncodings instead"),u.acceptsCharsets=function(){var e=s(this);return e.charsets.apply(e,arguments)},u.acceptsCharset=a.function(u.acceptsCharsets,"req.acceptsCharset: Use acceptsCharsets instead"),u.acceptsLanguages=function(){var e=s(this);return e.languages.apply(e,arguments)},u.acceptsLanguage=a.function(u.acceptsLanguages,"req.acceptsLanguage: Use acceptsLanguages instead"),u.range=function(e,t){var i=this.get("Range");if(i)return d(e,i,t)},u.param=function(e,t){var i=this.params||{},s=this.body||{},r=this.query||{},o=1===arguments.length?"name":"name, default";return a("req.param("+o+"): Use req.params, req.body, or req.query instead"),null!=i[e]&&i.hasOwnProperty(e)?i[e]:null!=s[e]?s[e]:null!=r[e]?r[e]:t},u.is=function(e){var t=e;if(!Array.isArray(e)){t=new Array(arguments.length);for(var i=0;i<t.length;i++)t[i]=arguments[i]}return o(this,t)},p(u,"protocol",(function(){var e=this.connection.encrypted?"https":"http";if(!this.app.get("trust proxy fn")(this.connection.remoteAddress,0))return e;var t=this.get("X-Forwarded-Proto")||e,i=t.indexOf(",");return-1!==i?t.substring(0,i).trim():t.trim()})),p(u,"secure",(function(){return"https"===this.protocol})),p(u,"ip",(function(){var e=this.app.get("trust proxy fn");return l(this,e)})),p(u,"ips",(function(){var e=this.app.get("trust proxy fn"),t=l.all(this,e);return t.reverse().pop(),t})),p(u,"subdomains",(function(){var e=this.hostname;if(!e)return[];var t=this.app.get("subdomain offset"),i=r(e)?[e]:e.split(".").reverse();return i.slice(t)})),p(u,"path",(function(){return h(this).pathname})),p(u,"hostname",(function(){var e=this.app.get("trust proxy fn"),t=this.get("X-Forwarded-Host");if(t&&e(this.connection.remoteAddress,0)?-1!==t.indexOf(",")&&(t=t.substring(0,t.indexOf(",")).trimRight()):t=this.get("Host"),t){var i="["===t[0]?t.indexOf("]")+1:0,s=t.indexOf(":",i);return-1!==s?t.substring(0,s):t}})),p(u,"host",a.function((function(){return this.hostname}),"req.host: Use req.hostname instead")),p(u,"fresh",(function(){var e=this.method,t=this.res,i=t.statusCode;return("GET"===e||"HEAD"===e)&&((i>=200&&i<300||304===i)&&c(this.headers,{etag:t.get("ETag"),"last-modified":t.get("Last-Modified")}))})),p(u,"stale",(function(){return!this.fresh})),p(u,"xhr",(function(){return"xmlhttprequest"===(this.get("X-Requested-With")||"").toLowerCase()}))},function(e,t,i){"use strict";
/*!
 * accepts
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(154),a=i(55);function r(e){if(!(this instanceof r))return new r(e);this.headers=e.headers,this.negotiator=new s(e)}function o(e){return-1===e.indexOf("/")?a.lookup(e):e}function n(e){return"string"==typeof e}e.exports=r,r.prototype.type=r.prototype.types=function(e){var t=e;if(t&&!Array.isArray(t)){t=new Array(arguments.length);for(var i=0;i<t.length;i++)t[i]=arguments[i]}if(!t||0===t.length)return this.negotiator.mediaTypes();if(!this.headers.accept)return t[0];var s=t.map(o),a=this.negotiator.mediaTypes(s.filter(n)),r=a[0];return!!r&&t[s.indexOf(r)]},r.prototype.encoding=r.prototype.encodings=function(e){var t=e;if(t&&!Array.isArray(t)){t=new Array(arguments.length);for(var i=0;i<t.length;i++)t[i]=arguments[i]}return t&&0!==t.length?this.negotiator.encodings(t)[0]||!1:this.negotiator.encodings()},r.prototype.charset=r.prototype.charsets=function(e){var t=e;if(t&&!Array.isArray(t)){t=new Array(arguments.length);for(var i=0;i<t.length;i++)t[i]=arguments[i]}return t&&0!==t.length?this.negotiator.charsets(t)[0]||!1:this.negotiator.charsets()},r.prototype.lang=r.prototype.langs=r.prototype.language=r.prototype.languages=function(e){var t=e;if(t&&!Array.isArray(t)){t=new Array(arguments.length);for(var i=0;i<t.length;i++)t[i]=arguments[i]}return t&&0!==t.length?this.negotiator.languages(t)[0]||!1:this.negotiator.languages()}},function(e,t,i){"use strict";
/*!
 * negotiator
 * Copyright(c) 2012 Federico Romero
 * Copyright(c) 2012-2014 Isaac Z. Schlueter
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=Object.create(null);function a(e){if(!(this instanceof a))return new a(e);this.request=e}function r(e){var t=s[e];if(void 0!==t)return t;switch(e){case"charset":t=i(155);break;case"encoding":t=i(156);break;case"language":t=i(157);break;case"mediaType":t=i(158);break;default:throw new Error("Cannot find module '"+e+"'")}return s[e]=t,t}e.exports=a,e.exports.Negotiator=a,a.prototype.charset=function(e){var t=this.charsets(e);return t&&t[0]},a.prototype.charsets=function(e){return(0,r("charset").preferredCharsets)(this.request.headers["accept-charset"],e)},a.prototype.encoding=function(e){var t=this.encodings(e);return t&&t[0]},a.prototype.encodings=function(e){return(0,r("encoding").preferredEncodings)(this.request.headers["accept-encoding"],e)},a.prototype.language=function(e){var t=this.languages(e);return t&&t[0]},a.prototype.languages=function(e){return(0,r("language").preferredLanguages)(this.request.headers["accept-language"],e)},a.prototype.mediaType=function(e){var t=this.mediaTypes(e);return t&&t[0]},a.prototype.mediaTypes=function(e){return(0,r("mediaType").preferredMediaTypes)(this.request.headers.accept,e)},a.prototype.preferredCharset=a.prototype.charset,a.prototype.preferredCharsets=a.prototype.charsets,a.prototype.preferredEncoding=a.prototype.encoding,a.prototype.preferredEncodings=a.prototype.encodings,a.prototype.preferredLanguage=a.prototype.language,a.prototype.preferredLanguages=a.prototype.languages,a.prototype.preferredMediaType=a.prototype.mediaType,a.prototype.preferredMediaTypes=a.prototype.mediaTypes},function(e,t,i){"use strict";e.exports=o,e.exports.preferredCharsets=o;var s=/^\s*([^\s;]+)\s*(?:;(.*))?$/;function a(e,t){var i=s.exec(e);if(!i)return null;var a=i[1],r=1;if(i[2])for(var o=i[2].split(";"),n=0;n<o.length;n++){var c=o[n].trim().split("=");if("q"===c[0]){r=parseFloat(c[1]);break}}return{charset:a,q:r,i:t}}function r(e,t,i){var s=0;if(t.charset.toLowerCase()===e.toLowerCase())s|=1;else if("*"!==t.charset)return null;return{i:i,o:t.i,q:t.q,s:s}}function o(e,t){var i=function(e){for(var t=e.split(","),i=0,s=0;i<t.length;i++){var r=a(t[i].trim(),i);r&&(t[s++]=r)}return t.length=s,t}(void 0===e?"*":e||"");if(!t)return i.filter(d).sort(n).map(c);var s=t.map((function(e,t){return function(e,t,i){for(var s={o:-1,q:0,s:0},a=0;a<t.length;a++){var o=r(e,t[a],i);o&&(s.s-o.s||s.q-o.q||s.o-o.o)<0&&(s=o)}return s}(e,i,t)}));return s.filter(d).sort(n).map((function(e){return t[s.indexOf(e)]}))}function n(e,t){return t.q-e.q||t.s-e.s||e.o-t.o||e.i-t.i||0}function c(e){return e.charset}function d(e){return e.q>0}},function(e,t,i){"use strict";e.exports=o,e.exports.preferredEncodings=o;var s=/^\s*([^\s;]+)\s*(?:;(.*))?$/;function a(e,t){var i=s.exec(e);if(!i)return null;var a=i[1],r=1;if(i[2])for(var o=i[2].split(";"),n=0;n<o.length;n++){var c=o[n].trim().split("=");if("q"===c[0]){r=parseFloat(c[1]);break}}return{encoding:a,q:r,i:t}}function r(e,t,i){var s=0;if(t.encoding.toLowerCase()===e.toLowerCase())s|=1;else if("*"!==t.encoding)return null;return{i:i,o:t.i,q:t.q,s:s}}function o(e,t){var i=function(e){for(var t=e.split(","),i=!1,s=1,o=0,n=0;o<t.length;o++){var c=a(t[o].trim(),o);c&&(t[n++]=c,i=i||r("identity",c),s=Math.min(s,c.q||1))}return i||(t[n++]={encoding:"identity",q:s,i:o}),t.length=n,t}(e||"");if(!t)return i.filter(d).sort(n).map(c);var s=t.map((function(e,t){return function(e,t,i){for(var s={o:-1,q:0,s:0},a=0;a<t.length;a++){var o=r(e,t[a],i);o&&(s.s-o.s||s.q-o.q||s.o-o.o)<0&&(s=o)}return s}(e,i,t)}));return s.filter(d).sort(n).map((function(e){return t[s.indexOf(e)]}))}function n(e,t){return t.q-e.q||t.s-e.s||e.o-t.o||e.i-t.i||0}function c(e){return e.encoding}function d(e){return e.q>0}},function(e,t,i){"use strict";e.exports=o,e.exports.preferredLanguages=o;var s=/^\s*([^\s\-;]+)(?:-([^\s;]+))?\s*(?:;(.*))?$/;function a(e,t){var i=s.exec(e);if(!i)return null;var a=i[1],r=i[2],o=a;r&&(o+="-"+r);var n=1;if(i[3])for(var c=i[3].split(";"),d=0;d<c.length;d++){var h=c[d].split("=");"q"===h[0]&&(n=parseFloat(h[1]))}return{prefix:a,suffix:r,q:n,i:t,full:o}}function r(e,t,i){var s=a(e);if(!s)return null;var r=0;if(t.full.toLowerCase()===s.full.toLowerCase())r|=4;else if(t.prefix.toLowerCase()===s.full.toLowerCase())r|=2;else if(t.full.toLowerCase()===s.prefix.toLowerCase())r|=1;else if("*"!==t.full)return null;return{i:i,o:t.i,q:t.q,s:r}}function o(e,t){var i=function(e){for(var t=e.split(","),i=0,s=0;i<t.length;i++){var r=a(t[i].trim(),i);r&&(t[s++]=r)}return t.length=s,t}(void 0===e?"*":e||"");if(!t)return i.filter(d).sort(n).map(c);var s=t.map((function(e,t){return function(e,t,i){for(var s={o:-1,q:0,s:0},a=0;a<t.length;a++){var o=r(e,t[a],i);o&&(s.s-o.s||s.q-o.q||s.o-o.o)<0&&(s=o)}return s}(e,i,t)}));return s.filter(d).sort(n).map((function(e){return t[s.indexOf(e)]}))}function n(e,t){return t.q-e.q||t.s-e.s||e.o-t.o||e.i-t.i||0}function c(e){return e.full}function d(e){return e.q>0}},function(e,t,i){"use strict";e.exports=n,e.exports.preferredMediaTypes=n;var s=/^\s*([^\s\/;]+)\/([^;\s]+)\s*(?:;(.*))?$/;function a(e){for(var t=function(e){for(var t=e.split(","),i=1,s=0;i<t.length;i++)l(t[s])%2==0?t[++s]=t[i]:t[s]+=","+t[i];return t.length=s+1,t}(e),i=0,s=0;i<t.length;i++){var a=r(t[i].trim(),i);a&&(t[s++]=a)}return t.length=s,t}function r(e,t){var i=s.exec(e);if(!i)return null;var a=Object.create(null),r=1,o=i[2],n=i[1];if(i[3])for(var c=function(e){for(var t=e.split(";"),i=1,s=0;i<t.length;i++)l(t[s])%2==0?t[++s]=t[i]:t[s]+=";"+t[i];t.length=s+1;for(i=0;i<t.length;i++)t[i]=t[i].trim();return t}(i[3]).map(u),d=0;d<c.length;d++){var h=c[d],p=h[0].toLowerCase(),f=h[1],m=f&&'"'===f[0]&&'"'===f[f.length-1]?f.substr(1,f.length-2):f;if("q"===p){r=parseFloat(m);break}a[p]=m}return{type:n,subtype:o,params:a,q:r,i:t}}function o(e,t,i){var s=r(e),a=0;if(!s)return null;if(t.type.toLowerCase()==s.type.toLowerCase())a|=4;else if("*"!=t.type)return null;if(t.subtype.toLowerCase()==s.subtype.toLowerCase())a|=2;else if("*"!=t.subtype)return null;var o=Object.keys(t.params);if(o.length>0){if(!o.every((function(e){return"*"==t.params[e]||(t.params[e]||"").toLowerCase()==(s.params[e]||"").toLowerCase()})))return null;a|=1}return{i:i,o:t.i,q:t.q,s:a}}function n(e,t){var i=a(void 0===e?"*/*":e||"");if(!t)return i.filter(h).sort(c).map(d);var s=t.map((function(e,t){return function(e,t,i){for(var s={o:-1,q:0,s:0},a=0;a<t.length;a++){var r=o(e,t[a],i);r&&(s.s-r.s||s.q-r.q||s.o-r.o)<0&&(s=r)}return s}(e,i,t)}));return s.filter(h).sort(c).map((function(e){return t[s.indexOf(e)]}))}function c(e,t){return t.q-e.q||t.s-e.s||e.o-t.o||e.i-t.i||0}function d(e){return e.type+"/"+e.subtype}function h(e){return e.q>0}function l(e){for(var t=0,i=0;-1!==(i=e.indexOf('"',i));)t++,i++;return t}function u(e){var t,i,s=e.indexOf("=");return-1===s?t=e:(t=e.substr(0,s),i=e.substr(s+1)),[t,i]}},function(e,t,i){"use strict";
/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(41).Buffer,a=i(63),r=i(10)("express"),o=i(31),n=i(32),c=i(13),d=i(15).isAbsolute,h=i(30),l=i(11),u=i(28),p=i(34),f=i(160).sign,m=i(15).normalizeType,v=i(15).normalizeTypes,y=i(15).setCharset,g=i(161),b=i(42),w=l.extname,k=b.mime,x=l.resolve,T=i(162),O=Object.create(c.ServerResponse.prototype);e.exports=O;var _=/;\s*charset\s*=/;function S(e,t,i,s){var a,r=!1;function o(){if(!r){r=!0;var e=new Error("Request aborted");e.code="ECONNABORTED",s(e)}}function n(e){r||(r=!0,s(e))}t.on("directory",(function(){if(!r){r=!0;var e=new Error("EISDIR, read");e.code="EISDIR",s(e)}})),t.on("end",(function(){r||(r=!0,s())})),t.on("error",n),t.on("file",(function(){a=!1})),t.on("stream",(function(){a=!0})),h(e,(function(e){return e&&"ECONNRESET"===e.code?o():e?n(e):void(r||setImmediate((function(){!1===a||r?r||(r=!0,s()):o()})))})),i.headers&&t.on("headers",(function(e){for(var t=i.headers,s=Object.keys(t),a=0;a<s.length;a++){var r=s[a];e.setHeader(r,t[r])}})),t.pipe(e)}function C(e,t,i,s){var a=t||i?JSON.stringify(e,t,i):JSON.stringify(e);return s&&(a=a.replace(/[<>&]/g,(function(e){switch(e.charCodeAt(0)){case 60:return"\\u003c";case 62:return"\\u003e";case 38:return"\\u0026";default:return e}}))),a}O.status=function(e){return this.statusCode=e,this},O.links=function(e){var t=this.get("Link")||"";return t&&(t+=", "),this.set("Link",t+Object.keys(e).map((function(t){return"<"+e[t]+'>; rel="'+t+'"'})).join(", "))},O.send=function(e){var t,i,a=e,o=this.req,n=this.app;switch(2===arguments.length&&("number"!=typeof arguments[0]&&"number"==typeof arguments[1]?(r("res.send(body, status): Use res.status(status).send(body) instead"),this.statusCode=arguments[1]):(r("res.send(status, body): Use res.status(status).send(body) instead"),this.statusCode=arguments[0],a=arguments[1])),"number"==typeof a&&1===arguments.length&&(this.get("Content-Type")||this.type("txt"),r("res.send(status): Use res.sendStatus(status) instead"),this.statusCode=a,a=u[a]),typeof a){case"string":this.get("Content-Type")||this.type("html");break;case"boolean":case"number":case"object":if(null===a)a="";else{if(!s.isBuffer(a))return this.json(a);this.get("Content-Type")||this.type("bin")}}"string"==typeof a&&(t="utf8","string"==typeof(i=this.get("Content-Type"))&&this.set("Content-Type",y(i,"utf-8")));var c,d,h=n.get("etag fn"),l=!this.get("ETag")&&"function"==typeof h;return void 0!==a&&(s.isBuffer(a)?c=a.length:!l&&a.length<1e3?c=s.byteLength(a,t):(a=s.from(a,t),t=void 0,c=a.length),this.set("Content-Length",c)),l&&void 0!==c&&(d=h(a,t))&&this.set("ETag",d),o.fresh&&(this.statusCode=304),204!==this.statusCode&&304!==this.statusCode||(this.removeHeader("Content-Type"),this.removeHeader("Content-Length"),this.removeHeader("Transfer-Encoding"),a=""),"HEAD"===o.method?this.end():this.end(a,t),this},O.json=function(e){var t=e;2===arguments.length&&("number"==typeof arguments[1]?(r("res.json(obj, status): Use res.status(status).json(obj) instead"),this.statusCode=arguments[1]):(r("res.json(status, obj): Use res.status(status).json(obj) instead"),this.statusCode=arguments[0],t=arguments[1]));var i=this.app,s=i.get("json escape"),a=i.get("json replacer"),o=i.get("json spaces"),n=C(t,a,o,s);return this.get("Content-Type")||this.set("Content-Type","application/json"),this.send(n)},O.jsonp=function(e){var t=e;2===arguments.length&&("number"==typeof arguments[1]?(r("res.jsonp(obj, status): Use res.status(status).json(obj) instead"),this.statusCode=arguments[1]):(r("res.jsonp(status, obj): Use res.status(status).jsonp(obj) instead"),this.statusCode=arguments[0],t=arguments[1]));var i=this.app,s=i.get("json escape"),a=i.get("json replacer"),o=i.get("json spaces"),n=C(t,a,o,s),c=this.req.query[i.get("jsonp callback name")];return this.get("Content-Type")||(this.set("X-Content-Type-Options","nosniff"),this.set("Content-Type","application/json")),Array.isArray(c)&&(c=c[0]),"string"==typeof c&&0!==c.length&&(this.set("X-Content-Type-Options","nosniff"),this.set("Content-Type","text/javascript"),n="/**/ typeof "+(c=c.replace(/[^\[\]\w$.]/g,""))+" === 'function' && "+c+"("+(n=n.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"))+");"),this.send(n)},O.sendStatus=function(e){var t=u[e]||String(e);return this.statusCode=e,this.type("txt"),this.send(t)},O.sendFile=function(e,t,i){var s=i,a=this.req,r=a.next,o=t||{};if(!e)throw new TypeError("path argument is required to res.sendFile");if("string"!=typeof e)throw new TypeError("path must be a string to res.sendFile");if("function"==typeof t&&(s=t,o={}),!o.root&&!d(e))throw new TypeError("path must be absolute or specify root to res.sendFile");var n=encodeURI(e);S(this,b(a,n,o),o,(function(e){return s?s(e):e&&"EISDIR"===e.code?r():void(e&&"ECONNABORTED"!==e.code&&"write"!==e.syscall&&r(e))}))},O.sendfile=function(e,t,i){var s=i,a=this.req,r=a.next,o=t||{};"function"==typeof t&&(s=t,o={}),S(this,b(a,e,o),o,(function(e){return s?s(e):e&&"EISDIR"===e.code?r():void(e&&"ECONNABORTED"!==e.code&&"write"!==e.syscall&&r(e))}))},O.sendfile=r.function(O.sendfile,"res.sendfile: Use res.sendFile instead"),O.download=function(e,t,i,s){var r=s,o=t,n=i||null;"function"==typeof t?(r=t,o=null,n=null):"function"==typeof i&&(r=i,n=null);var c={"Content-Disposition":a(o||e)};if(n&&n.headers)for(var d=Object.keys(n.headers),h=0;h<d.length;h++){var l=d[h];"content-disposition"!==l.toLowerCase()&&(c[l]=n.headers[l])}(n=Object.create(n)).headers=c;var u=x(e);return this.sendFile(u,n,r)},O.contentType=O.type=function(e){var t=-1===e.indexOf("/")?k.lookup(e):e;return this.set("Content-Type",t)},O.format=function(e){var t=this.req,i=t.next,s=e.default;s&&delete e.default;var a=Object.keys(e),r=a.length>0&&t.accepts(a);if(this.vary("Accept"),r)this.set("Content-Type",m(r).value),e[r](t,this,i);else if(s)s();else{var o=new Error("Not Acceptable");o.status=o.statusCode=406,o.types=v(a).map((function(e){return e.value})),i(o)}return this},O.attachment=function(e){return e&&this.type(w(e)),this.set("Content-Disposition",a(e)),this},O.append=function(e,t){var i=this.get(e),s=t;return i&&(s=Array.isArray(i)?i.concat(t):Array.isArray(t)?[i].concat(t):[i,t]),this.set(e,s)},O.set=O.header=function(e,t){if(2===arguments.length){var i=Array.isArray(t)?t.map(String):String(t);if("content-type"===e.toLowerCase()){if(Array.isArray(i))throw new TypeError("Content-Type cannot be set to an Array");if(!_.test(i)){var s=k.charsets.lookup(i.split(";")[0]);s&&(i+="; charset="+s.toLowerCase())}}this.setHeader(e,i)}else for(var a in e)this.set(a,e[a]);return this},O.get=function(e){return this.getHeader(e)},O.clearCookie=function(e,t){var i=p({expires:new Date(1),path:"/"},t);return this.cookie(e,"",i)},O.cookie=function(e,t,i){var s=p({},i),a=this.req.secret,r=s.signed;if(r&&!a)throw new Error('cookieParser("secret") required for signed cookies');var o="object"==typeof t?"j:"+JSON.stringify(t):String(t);return r&&(o="s:"+f(o,a)),"maxAge"in s&&(s.expires=new Date(Date.now()+s.maxAge),s.maxAge/=1e3),null==s.path&&(s.path="/"),this.append("Set-Cookie",g.serialize(e,String(o),s)),this},O.location=function(e){var t=e;return"back"===e&&(t=this.req.get("Referrer")||"/"),this.set("Location",o(t))},O.redirect=function(e){var t,i=e,a=302;2===arguments.length&&("number"==typeof arguments[0]?(a=arguments[0],i=arguments[1]):(r("res.redirect(url, status): Use res.redirect(status, url) instead"),a=arguments[1])),i=this.location(i).get("Location"),this.format({text:function(){t=u[a]+". Redirecting to "+i},html:function(){var e=n(i);t="<p>"+u[a]+'. Redirecting to <a href="'+e+'">'+e+"</a></p>"},default:function(){t=""}}),this.statusCode=a,this.set("Content-Length",s.byteLength(t)),"HEAD"===this.req.method?this.end():this.end(t)},O.vary=function(e){return!e||Array.isArray(e)&&!e.length?(r("res.vary(): Provide a field name"),this):(T(this,e),this)},O.render=function(e,t,i){var s=this.req.app,a=i,r=t||{},o=this.req,n=this;"function"==typeof t&&(a=t,r={}),r._locals=n.locals,a=a||function(e,t){if(e)return o.next(e);n.send(t)},s.render(e,r,a)}},function(e,t,i){var s=i(65);function a(e){return s.createHash("sha1").update(e).digest("hex")}t.sign=function(e,t){if("string"!=typeof e)throw new TypeError("Cookie value must be provided as a string.");if("string"!=typeof t)throw new TypeError("Secret string must be provided.");return e+"."+s.createHmac("sha256",t).update(e).digest("base64").replace(/\=+$/,"")},t.unsign=function(e,i){if("string"!=typeof e)throw new TypeError("Signed cookie string must be provided.");if("string"!=typeof i)throw new TypeError("Secret string must be provided.");var s=e.slice(0,e.lastIndexOf("."));return a(t.sign(s,i))==a(e)&&s}},function(e,t,i){"use strict";
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var i={},a=t||{},o=e.split(r),c=a.decode||s,d=0;d<o.length;d++){var h=o[d],l=h.indexOf("=");if(!(l<0)){var u=h.substr(0,l).trim(),p=h.substr(++l,h.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),null==i[u]&&(i[u]=n(p,c))}}return i},t.serialize=function(e,t,i){var s=i||{},r=s.encode||a;if("function"!=typeof r)throw new TypeError("option encode is invalid");if(!o.test(e))throw new TypeError("argument name is invalid");var n=r(t);if(n&&!o.test(n))throw new TypeError("argument val is invalid");var c=e+"="+n;if(null!=s.maxAge){var d=s.maxAge-0;if(isNaN(d))throw new Error("maxAge should be a Number");c+="; Max-Age="+Math.floor(d)}if(s.domain){if(!o.test(s.domain))throw new TypeError("option domain is invalid");c+="; Domain="+s.domain}if(s.path){if(!o.test(s.path))throw new TypeError("option path is invalid");c+="; Path="+s.path}if(s.expires){if("function"!=typeof s.expires.toUTCString)throw new TypeError("option expires is invalid");c+="; Expires="+s.expires.toUTCString()}s.httpOnly&&(c+="; HttpOnly");s.secure&&(c+="; Secure");if(s.sameSite){switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return c};var s=decodeURIComponent,a=encodeURIComponent,r=/; */,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function n(e,t){try{return t(e)}catch(t){return e}}},function(e,t,i){"use strict";
/*!
 * vary
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */e.exports=function(e,t){if(!e||!e.getHeader||!e.setHeader)throw new TypeError("res argument is required");var i=e.getHeader("Vary")||"",s=Array.isArray(i)?i.join(", "):String(i);(i=a(s,t))&&e.setHeader("Vary",i)},e.exports.append=a;var s=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/;function a(e,t){if("string"!=typeof e)throw new TypeError("header argument is required");if(!t)throw new TypeError("field argument is required");for(var i=Array.isArray(t)?t:r(String(t)),a=0;a<i.length;a++)if(!s.test(i[a]))throw new TypeError("field argument contains an invalid header name");if("*"===e)return e;var o=e,n=r(e.toLowerCase());if(-1!==i.indexOf("*")||-1!==n.indexOf("*"))return"*";for(var c=0;c<i.length;c++){var d=i[c].toLowerCase();-1===n.indexOf(d)&&(n.push(d),o=o?o+", "+i[c]:i[c])}return o}function r(e){for(var t=0,i=[],s=0,a=0,r=e.length;a<r;a++)switch(e.charCodeAt(a)){case 32:s===t&&(s=t=a+1);break;case 44:i.push(e.substring(s,t)),s=t=a+1;break;default:t=a+1}return i.push(e.substring(s,t)),i}},function(e,t,i){"use strict";
/*!
 * serve-static
 * Copyright(c) 2010 Sencha Inc.
 * Copyright(c) 2011 TJ Holowaychuk
 * Copyright(c) 2014-2016 Douglas Christopher Wilson
 * MIT Licensed
 */var s=i(31),a=i(32),r=i(22),o=i(11).resolve,n=i(42),c=i(23);e.exports=function(e,t){if(!e)throw new TypeError("root path required");if("string"!=typeof e)throw new TypeError("root path must be a string");var i=Object.create(t||null),d=!1!==i.fallthrough,h=!1!==i.redirect,l=i.setHeaders;if(l&&"function"!=typeof l)throw new TypeError("option setHeaders must be function");i.maxage=i.maxage||i.maxAge||0,i.root=o(e);var u=h?function(e){if(this.hasTrailingSlash())this.error(404);else{var t=r.original(this.req);t.path=null,t.pathname=function(e){for(var t=0;t<e.length&&47===e.charCodeAt(t);t++);return t>1?"/"+e.substr(t):e}(t.pathname+"/");var i,o,n=s(c.format(t)),d=(i="Redirecting",o='Redirecting to <a href="'+a(n)+'">'+a(n)+"</a>",'<!DOCTYPE html>\n<html lang="en">\n<head>\n<meta charset="utf-8">\n<title>'+i+"</title>\n</head>\n<body>\n<pre>"+o+"</pre>\n</body>\n</html>\n");e.statusCode=301,e.setHeader("Content-Type","text/html; charset=UTF-8"),e.setHeader("Content-Length",Buffer.byteLength(d)),e.setHeader("Content-Security-Policy","default-src 'none'"),e.setHeader("X-Content-Type-Options","nosniff"),e.setHeader("Location",n),e.end(d)}}:function(){this.error(404)};return function(e,t,s){if("GET"!==e.method&&"HEAD"!==e.method)return d?s():(t.statusCode=405,t.setHeader("Allow","GET, HEAD"),t.setHeader("Content-Length","0"),void t.end());var a=!d,o=r.original(e),c=r(e).pathname;"/"===c&&"/"!==o.pathname.substr(-1)&&(c="");var h=n(e,c,i);h.on("directory",u),l&&h.on("headers",l),d&&h.on("file",(function(){a=!0})),h.on("error",(function(e){!a&&e.statusCode<500?s():s(e)})),h.pipe(t)}},e.exports.mime=n.mime},function(e,t){e.exports=e=>function(...t){const i=e(...t),s=t[t.length-1];return Promise.resolve(i).catch(s)}},function(e,t,i){"use strict";const s=i(166),a=i(167),r=i(168),o={requestId:"x-request-id"};e.exports=function(e,t){const i=Object.assign({},o,t),n=a(e);return r(i)(async(e,...t)=>{await s(e,i.request,...t);const a=await n(e);return await s(a,i.response,...t),a})}},function(e,t,i){"use strict";e.exports=async function(e,t,...i){return await new Promise((t,i)=>{if(e.finished||e.complete)return void t();let s=!1;function a(r){s||(s=!0,e.removeListener("error",a),e.removeListener("end",a),e.removeListener("finish",a),r?i(r):t())}e.once("error",a),e.once("end",a),e.once("finish",a)}),"function"==typeof t?await t(e,...i):"object"==typeof t&&null!==t&&Object.assign(e,t),e}},function(e,t,i){"use strict";const s=i(70);function a(e){return t=>{const i=new s(t);return e(t,i),i}}e.exports=function(e){if("function"==typeof e.callback)return a(e.callback());if("function"==typeof e.handle)return a((t,i)=>{e.handle(t,i)});if("function"==typeof e.handler)return a((t,i)=>{e.handler(t,i)});if("function"==typeof e._onRequest)return a((t,i)=>{e._onRequest(t,i)});if("function"==typeof e)return a(e);if(e.router&&"function"==typeof e.router.route)return a((t,i)=>{const{url:s,method:a,headers:r,body:o}=t;e.router.route({url:s,method:a,headers:r,body:o},i)});if(e._core&&"function"==typeof e._core._dispatch)return a(e._core._dispatch({app:e}));if("function"==typeof e.inject)return async t=>{const{method:i,url:a,headers:r,body:o}=t,n=await e.inject({method:i,url:a,headers:r,payload:o});return s.from(n)};if("function"==typeof e.main)return a(e.main);throw new Error("Unsupported framework")}},function(e,t,i){const s={aws:i(169)};e.exports=function(e){const{provider:t="aws"}=e;if(t in s)return s[t](e);throw new Error("Unsupported provider "+t)}},function(e,t,i){const s=i(170),a=i(171),r=i(173);e.exports=e=>t=>async(i,o={})=>{const n=s(i,e),c=a(n,e),d=await t(c,n,o);return r(n,d,e)}},function(e,t,i){"use strict";function s(e="/",t){if(t){const i=e.indexOf(t);if(i>-1)return e.substr(i+t.length)}return e}e.exports=function(e,t){const i=e||{};return i.requestContext=i.requestContext||{},i.body=i.body||"",i.headers=i.headers||{},"2.0"===i.version?(i.requestContext.authorizer=i.requestContext.authorizer||{},i.requestContext.http.method=i.requestContext.http.method||"GET",i.rawPath=s(i.requestPath||i.rawPath,t.basePath)):(i.requestContext.identity=i.requestContext.identity||{},i.httpMethod=i.httpMethod||"GET",i.path=s(i.requestPath||i.path,t.basePath)),i}},function(e,t,i){"use strict";const s=i(23),a=i(172);e.exports=(e,t)=>{const i=function(e){return"2.0"===e.version?e.requestContext.http.method:e.httpMethod}(e),r=function(e){return"2.0"===e.version?e.requestContext.http.sourceIp:e.requestContext.identity.sourceIp}(e),o=function(e){const t="2.0"===e.version&&Array.isArray(e.cookies)?{cookie:e.cookies.join("; ")}:{};return Object.keys(e.headers).reduce((t,i)=>(t[i.toLowerCase()]=e.headers[i],t),t)}(e),n=function(e){const t=typeof e.body;if(Buffer.isBuffer(e.body))return e.body;if("string"===t)return Buffer.from(e.body,e.isBase64Encoded?"base64":"utf8");if("object"===t)return Buffer.from(JSON.stringify(e.body));throw new Error("Unexpected event.body type: "+typeof e.body)}(e),c=function(e){return"2.0"===e.version?s.format({pathname:e.rawPath,search:e.rawQueryString}):s.format({pathname:e.path,query:e.multiValueQueryStringParameters||e.queryStringParameters})}(e);if("string"==typeof t.requestId&&t.requestId.length>0){const i=t.requestId.toLowerCase(),s=o[i]||e.requestContext.requestId;s&&(o[i]=s)}const d=new a({method:i,headers:o,body:n,remoteAddress:r,url:c});return d.requestContext=e.requestContext,d}},function(e,t,i){"use strict";const s=i(13);e.exports=class extends s.IncomingMessage{constructor({method:e,url:t,headers:i,body:s,remoteAddress:a}){super({encrypted:!0,readable:!1,remoteAddress:a,address:()=>({port:443}),end:Function.prototype,destroy:Function.prototype}),void 0===i["content-length"]&&(i["content-length"]=Buffer.byteLength(s)),Object.assign(this,{ip:a,complete:!0,httpVersion:"1.1",httpVersionMajor:"1",httpVersionMinor:"1",method:e,headers:i,body:s,url:t}),this._read=()=>{this.push(s),this.push(null)}}}},function(e,t,i){"use strict";const s=i(174),a=i(70),r=i(175);e.exports=(e,t,i)=>{const{statusCode:o}=t,{headers:n,multiValueHeaders:c}=r(a.headers(t));if("chunked"===n["transfer-encoding"]||t.chunkedEncoding)throw new Error("chunked encoding not supported");let d=[];c["set-cookie"]&&(d=c["set-cookie"]);const h=s(n,i),l=h?"base64":"utf8";let u={statusCode:o,headers:n,isBase64Encoded:h,body:a.body(t).toString(l)};return"2.0"===e.version&&d.length&&(u.cookies=d),e.version&&"1.0"!==e.version||!Object.keys(c).length||(u.multiValueHeaders=c),u}},function(e,t,i){"use strict";const s=["gzip","deflate","br"],a=(process.env.BINARY_CONTENT_TYPES||"").split(",");e.exports=function(e,t){return!1!==t.binary&&("function"==typeof t.binary?t.binary(e):function(e){const t=e["content-encoding"];if("string"==typeof t)return t.split(",").some(e=>s.some(t=>-1!==e.indexOf(t)))}(e)||function(e,t){const i=[].concat(t.binary?t.binary:a).map(e=>new RegExp(`^${e.replace(/\*/g,".*")}$`)),s=(e["content-type"]||"").split(";")[0];return!!s&&i.some(e=>e.test(s))}(e,t))}},function(e,t,i){"use strict";e.exports=function(e){return Object.keys(e).reduce((t,i)=>{const s=e[i];return Array.isArray(s)?(t.multiValueHeaders[i]=s,"set-cookie"!==i.toLowerCase()&&(t.headers[i]=s.join(", "))):t.headers[i]=null==s?"":s.toString(),t},{headers:{},multiValueHeaders:{}})}},function(e,t,i){"use strict";const s="undefined"!=typeof window,a="undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.electron,r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,o="undefined"!=typeof process&&"win32"===process.platform,n=!(s||r),c="undefined"==typeof fetch?i(177)().fetch:fetch;e.exports={isBrowser:s,isElectron:a,isWebWorker:r,isNode:n,isWindows:o,defaultFetch:c}},function(e,t,i){"use strict";var s=i(178);function a(e){const t=function(t,i){return"string"==typeof t&&"//"===t.slice(0,2)?e("https:"+t,i):e(t,i)};return t.http=e.http,t.https=e.https,t}e.exports=function(e){return e&&e.Promise&&(s.Promise=e.Promise),{fetch:a(s),Headers:s.Headers,Request:s.Request,Response:s.Response}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=Symbol("buffer"),a=Symbol("type");class r{constructor(){this[a]="";const e=arguments[0],t=arguments[1],i=[];if(e){const t=e,a=Number(t.length);for(let e=0;e<a;e++){const a=t[e];let o;o=a instanceof Buffer?a:ArrayBuffer.isView(a)?Buffer.from(a.buffer,a.byteOffset,a.byteLength):a instanceof ArrayBuffer?Buffer.from(a):a instanceof r?a[s]:Buffer.from("string"==typeof a?a:String(a)),i.push(o)}}this[s]=Buffer.concat(i);let o=t&&void 0!==t.type&&String(t.type).toLowerCase();o&&!/[^\u0020-\u007E]/.test(o)&&(this[a]=o)}get size(){return this[s].length}get type(){return this[a]}slice(){const e=this.size,t=arguments[0],i=arguments[1];let a,o;a=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),o=void 0===i?e:i<0?Math.max(e+i,0):Math.min(i,e);const n=Math.max(o-a,0),c=this[s].slice(a,a+n),d=new r([],{type:arguments[2]});return d[s]=c,d}}function o(e,t,i){Error.call(this,e),this.message=e,this.type=t,i&&(this.code=this.errno=i.code),Error.captureStackTrace(this,this.constructor)}Object.defineProperties(r.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(r.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o.prototype.name="FetchError";const n=i(12);const c=i(12).PassThrough,d=Symbol("Body internals");function h(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.size;let a=void 0===s?0:s;var c=i.timeout;let h=void 0===c?0:c;null==e?e=null:"string"==typeof e||u(e)||e instanceof r||Buffer.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||e instanceof n||(e=String(e)),this[d]={body:e,disturbed:!1,error:null},this.size=a,this.timeout=h,e instanceof n&&e.on("error",(function(e){t[d].error=new o(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e)}))}function l(){var e=this;if(this[d].disturbed)return h.Promise.reject(new TypeError("body used already for: "+this.url));if(this[d].disturbed=!0,this[d].error)return h.Promise.reject(this[d].error);if(null===this.body)return h.Promise.resolve(Buffer.alloc(0));if("string"==typeof this.body)return h.Promise.resolve(Buffer.from(this.body));if(this.body instanceof r)return h.Promise.resolve(this.body[s]);if(Buffer.isBuffer(this.body))return h.Promise.resolve(this.body);if("[object ArrayBuffer]"===Object.prototype.toString.call(this.body))return h.Promise.resolve(Buffer.from(this.body));if(!(this.body instanceof n))return h.Promise.resolve(Buffer.alloc(0));let t=[],i=0,a=!1;return new h.Promise((function(s,r){let n;e.timeout&&(n=setTimeout((function(){a=!0,r(new o(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))}),e.timeout)),e.body.on("error",(function(t){r(new o(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))})),e.body.on("data",(function(s){if(!a&&null!==s){if(e.size&&i+s.length>e.size)return a=!0,void r(new o(`content size at ${e.url} over limit: ${e.size}`,"max-size"));i+=s.length,t.push(s)}})),e.body.on("end",(function(){if(!a){clearTimeout(n);try{s(Buffer.concat(t))}catch(t){r(new o(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}}))}))}function u(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function p(e){let t,i,s=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof n&&"function"!=typeof s.getBoundary&&(t=new c,i=new c,s.pipe(t),s.pipe(i),e[d].body=t,s=i),s}function f(e){const t=e.body;return null===t?0:"string"==typeof t?Buffer.byteLength(t):u(t)?Buffer.byteLength(String(t)):t instanceof r?t.size:Buffer.isBuffer(t)?t.length:"[object ArrayBuffer]"===Object.prototype.toString.call(t)?t.byteLength:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}h.prototype={get body(){return this[d].body},get bodyUsed(){return this[d].disturbed},arrayBuffer(){return l.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob(){let e=this.headers&&this.headers.get("content-type")||"";return l.call(this).then((function(t){return Object.assign(new r([],{type:e.toLowerCase()}),{[s]:t})}))},json(){var e=this;return l.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(t){return h.Promise.reject(new o(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}}))},text(){return l.call(this).then((function(e){return e.toString()}))},buffer(){return l.call(this)},textConverted(){var e=this;return l.call(this).then((function(t){return function(e,t){if("function"!=typeof convert)throw new Error("The package `encoding` must be installed to use the textConverted() function");const i=t.get("content-type");let s,a,r="utf-8";i&&(s=/charset=([^;]*)/i.exec(i));a=e.slice(0,1024).toString(),!s&&a&&(s=/<meta.+?charset=(['"])(.+?)\1/i.exec(a));!s&&a&&(s=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(a),s&&(s=/charset=(.*)/i.exec(s.pop())));!s&&a&&(s=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(a));s&&(r=s.pop(),"gb2312"!==r&&"gbk"!==r||(r="gb18030"));return convert(e,"UTF-8",r).toString()}(t,e.headers)}))}},Object.defineProperties(h.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),h.mixIn=function(e){for(const t of Object.getOwnPropertyNames(h.prototype))if(!(t in e)){const i=Object.getOwnPropertyDescriptor(h.prototype,t);Object.defineProperty(e,t,i)}},h.Promise=global.Promise;const m=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,v=/[^\t\x20-\x7e\x80-\xff]/;function y(e){if(e=""+e,m.test(e))throw new TypeError(e+" is not a legal HTTP header name")}function g(e){if(e=""+e,v.test(e))throw new TypeError(e+" is not a legal HTTP header value")}function b(e,t){t=t.toLowerCase();for(const i in e)if(i.toLowerCase()===t)return i}const w=Symbol("map");class k{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[w]=Object.create(null),e instanceof k){const t=e.raw(),i=Object.keys(t);for(const e of i)for(const i of t[e])this.append(e,i)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const i=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");i.push(Array.from(t))}for(const e of i){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const i=e[t];this.append(t,i)}}}}get(e){y(e=""+e);const t=b(this[w],e);return void 0===t?null:this[w][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=x(this),s=0;for(;s<i.length;){var a=i[s];const r=a[0],o=a[1];e.call(t,o,r,this),i=x(this),s++}}set(e,t){t=""+t,y(e=""+e),g(t);const i=b(this[w],e);this[w][void 0!==i?i:e]=[t]}append(e,t){t=""+t,y(e=""+e),g(t);const i=b(this[w],e);void 0!==i?this[w][i].push(t):this[w][e]=[t]}has(e){return y(e=""+e),void 0!==b(this[w],e)}delete(e){y(e=""+e);const t=b(this[w],e);void 0!==t&&delete this[w][t]}raw(){return this[w]}keys(){return O(this,"key")}values(){return O(this,"value")}[Symbol.iterator](){return O(this,"key+value")}}function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";const i=Object.keys(e[w]).sort();return i.map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[w][t].join(", ")}:function(t){return[t.toLowerCase(),e[w][t].join(", ")]})}k.prototype.entries=k.prototype[Symbol.iterator],Object.defineProperty(k.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(k.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const T=Symbol("internal");function O(e,t){const i=Object.create(_);return i[T]={target:e,kind:t,index:0},i}const _=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==_)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[T];const t=e.target,i=e.kind,s=e.index,a=x(t,i);return s>=a.length?{value:void 0,done:!0}:(this[T].index=s+1,{value:a[s],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function S(e){const t=Object.assign({__proto__:null},e[w]),i=b(e[w],"Host");return void 0!==i&&(t[i]=t[i][0]),t}Object.defineProperty(_,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const C=i(13).STATUS_CODES,I=Symbol("Response internals");class M{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h.call(this,e,t);const i=t.status||200;this[I]={url:t.url,status:i,statusText:t.statusText||C[i],headers:new k(t.headers)}}get url(){return this[I].url}get status(){return this[I].status}get ok(){return this[I].status>=200&&this[I].status<300}get statusText(){return this[I].statusText}get headers(){return this[I].headers}clone(){return new M(p(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok})}}h.mixIn(M.prototype),Object.defineProperties(M.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(M.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});var F=i(23);const E=F.format,A=F.parse,B=Symbol("Request internals");function P(e){return"object"==typeof e&&"object"==typeof e[B]}class q{constructor(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};P(e)?t=A(e.url):(t=e&&e.href?A(e.href):A(""+e),e={});let s=i.method||e.method||"GET";if(s=s.toUpperCase(),(null!=i.body||P(e)&&null!==e.body)&&("GET"===s||"HEAD"===s))throw new TypeError("Request with GET/HEAD method cannot have body");let a=null!=i.body?i.body:P(e)&&null!==e.body?p(e):null;h.call(this,a,{timeout:i.timeout||e.timeout||0,size:i.size||e.size||0});const o=new k(i.headers||e.headers||{});if(null!=i.body){const e=function(e){const t=e.body;return null===t?null:"string"==typeof t?"text/plain;charset=UTF-8":u(t)?"application/x-www-form-urlencoded;charset=UTF-8":t instanceof r?t.type||null:Buffer.isBuffer(t)||"[object ArrayBuffer]"===Object.prototype.toString.call(t)?null:"function"==typeof t.getBoundary?"multipart/form-data;boundary="+t.getBoundary():null}(this);null===e||o.has("Content-Type")||o.append("Content-Type",e)}this[B]={method:s,redirect:i.redirect||e.redirect||"follow",headers:o,parsedURL:t},this.follow=void 0!==i.follow?i.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==i.compress?i.compress:void 0===e.compress||e.compress,this.counter=i.counter||e.counter||0,this.agent=i.agent||e.agent}get method(){return this[B].method}get url(){return E(this[B].parsedURL)}get headers(){return this[B].headers}get redirect(){return this[B].redirect}clone(){return new q(this)}}h.mixIn(q.prototype),Object.defineProperty(q.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(q.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0}});const V=i(13),L=i(179);const D=i(12).PassThrough;const R=i(23).resolve,G=i(54);function j(e,t){if(!j.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return h.Promise=j.Promise,new j.Promise((function(i,a){const n=new q(e,t),c=function(e){const t=e[B].parsedURL,i=new k(e[B].headers);if(i.has("Accept")||i.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");let s=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(s="0"),null!=e.body){const t=f(e);"number"==typeof t&&(s=String(t))}return s&&i.set("Content-Length",s),i.has("User-Agent")||i.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&i.set("Accept-Encoding","gzip,deflate"),i.has("Connection")||e.agent||i.set("Connection","close"),Object.assign({},t,{method:e.method,headers:S(i),agent:e.agent})}(n),d=(0,("https:"===c.protocol?L:V).request)(c);let h;function l(){d.abort(),clearTimeout(h)}n.timeout&&d.once("socket",(function(e){h=setTimeout((function(){a(new o("network timeout at: "+n.url,"request-timeout")),l()}),n.timeout)})),d.on("error",(function(e){a(new o(`request to ${n.url} failed, reason: ${e.message}`,"system",e)),l()})),d.on("response",(function(e){clearTimeout(h);const t=function(e){const t=new k;for(const i of Object.keys(e))if(!m.test(i))if(Array.isArray(e[i]))for(const s of e[i])v.test(s)||(void 0===t[w][i]?t[w][i]=[s]:t[w][i].push(s));else v.test(e[i])||(t[w][i]=[e[i]]);return t}(e.headers);if(j.isRedirect(e.statusCode)){const s=t.get("Location"),r=null===s?null:R(n.url,s);switch(n.redirect){case"error":return a(new o("redirect mode is set to error: "+n.url,"no-redirect")),void l();case"manual":null!==r&&t.set("Location",r);break;case"follow":if(null===r)break;if(n.counter>=n.follow)return a(new o("maximum redirect reached at: "+n.url,"max-redirect")),void l();const s={headers:new k(n.headers),follow:n.follow,counter:n.counter+1,agent:n.agent,compress:n.compress,method:n.method,body:n.body};return 303!==e.statusCode&&n.body&&null===f(n)?(a(new o("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void l()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==n.method)||(s.method="GET",s.body=void 0,s.headers.delete("content-length")),i(j(new q(r,s))),void l())}}let s=e.pipe(new D);const r={url:n.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:n.size,timeout:n.timeout},c=t.get("Content-Encoding");if(!n.compress||"HEAD"===n.method||null===c||204===e.statusCode||304===e.statusCode)return void i(new M(s,r));const d={flush:G.Z_SYNC_FLUSH,finishFlush:G.Z_SYNC_FLUSH};if("gzip"==c||"x-gzip"==c)return s=s.pipe(G.createGunzip(d)),void i(new M(s,r));if("deflate"!=c&&"x-deflate"!=c)i(new M(s,r));else{e.pipe(new D).once("data",(function(e){s=8==(15&e[0])?s.pipe(G.createInflate()):s.pipe(G.createInflateRaw()),i(new M(s,r))}))}})),function(e,t){const i=t.body;null===i?e.end():"string"==typeof i?(e.write(i),e.end()):u(i)?(e.write(Buffer.from(String(i))),e.end()):i instanceof r?(e.write(i[s]),e.end()):Buffer.isBuffer(i)?(e.write(i),e.end()):"[object ArrayBuffer]"===Object.prototype.toString.call(i)?(e.write(Buffer.from(i)),e.end()):i.pipe(e)}(d,n)}))}j.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},j.default=j,j.Promise=global.Promise,j.http=V,j.https=L,e.exports=t=j,t.Headers=k,t.Request=q,t.Response=M,t.FetchError=o},function(e,t){e.exports=require("https")},function(e,t,i){"use strict";const{isObject:s,isNumber:a,isDictionary:r,isArray:o}=i(74),n=Object.keys,c=e=>o(e)?e:Object.values(e),d=e=>new Set(c(e)),h=(...e)=>Object.assign({},...e),l=e=>o(e)?Array.from(e):h(e);e.exports={keys:n,values:c,extend:h,clone:l,index:d,ordered:e=>e,unique:e=>Array.from(d(e)),arrayConcat:(e,t)=>e.concat(t),inArray:(e,t)=>t.includes(e),toArray:e=>Object.values(e),isEmpty:e=>!e||(Array.isArray(e)?e:Object.keys(e)).length<1,keysort(e,t={}){for(const i of n(e).sort())t[i]=e[i];return t},indexBy(e,t,i={}){for(const s of c(e))t in s&&(i[s[t]]=s);return i},groupBy(e,t,i={}){for(const s of c(e))if(t in s){const e=s[t];i[e]=i[e]||[],i[e].push(s)}return i},filterBy(e,t,i,s=[]){for(const a of c(e))a[t]===i&&s.push(a);return s},sortBy:(e,t,i=!1,s=(i?-1:1))=>e.sort((e,i)=>e[t]<i[t]?-s:e[t]>i[t]?s:0),flatten:function e(t,i=[]){for(const s of t)o(s)?e(s,i):i.push(s);return i},pluck:(e,t)=>c(e).filter(e=>t in e).map(e=>e[t]),omit(e,...t){if(!Array.isArray(e)){const i=l(e);for(const e of t)if(o(e))for(const t of e)delete i[t];else delete i[e];return i}return e},sum(...e){const t=e.filter(a);return t.length>0?t.reduce((e,t)=>e+t,0):void 0},deepExtend:function e(...t){let i=void 0;for(const s of t)if(r(s)){r(i)||(i={});for(const t in s)i[t]=e(i[t],s[t])}else i=s;return i}}},function(e,t,i){"use strict";var s=i(182),a=i(183),r=i(76);e.exports={formats:r,parse:a,stringify:s}},function(e,t,i){"use strict";var s=i(75),a=i(76),r=Object.prototype.hasOwnProperty,o={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},n=Array.isArray,c=Array.prototype.push,d=function(e,t){c.apply(e,n(t)?t:[t])},h=Date.prototype.toISOString,l={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:s.encode,encodeValuesOnly:!1,formatter:a.formatters[a.default],indices:!1,serializeDate:function(e){return h.call(e)},skipNulls:!1,strictNullHandling:!1},u=function e(t,i,a,r,o,c,h,u,p,f,m,v,y){var g=t;if("function"==typeof h?g=h(i,g):g instanceof Date?g=f(g):"comma"===a&&n(g)&&(g=g.join(",")),null===g){if(r)return c&&!v?c(i,l.encoder,y):i;g=""}if("string"==typeof g||"number"==typeof g||"boolean"==typeof g||s.isBuffer(g))return c?[m(v?i:c(i,l.encoder,y))+"="+m(c(g,l.encoder,y))]:[m(i)+"="+m(String(g))];var b,w=[];if(void 0===g)return w;if(n(h))b=h;else{var k=Object.keys(g);b=u?k.sort(u):k}for(var x=0;x<b.length;++x){var T=b[x];o&&null===g[T]||(n(g)?d(w,e(g[T],"function"==typeof a?a(i,T):i,a,r,o,c,h,u,p,f,m,v,y)):d(w,e(g[T],i+(p?"."+T:"["+T+"]"),a,r,o,c,h,u,p,f,m,v,y)))}return w};e.exports=function(e,t){var i,s=e,c=function(e){if(!e)return l;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||l.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=a.default;if(void 0!==e.format){if(!r.call(a.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var s=a.formatters[i],o=l.filter;return("function"==typeof e.filter||n(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:l.addQueryPrefix,allowDots:void 0===e.allowDots?l.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:l.charsetSentinel,delimiter:void 0===e.delimiter?l.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:l.encode,encoder:"function"==typeof e.encoder?e.encoder:l.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:l.encodeValuesOnly,filter:o,formatter:s,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:l.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:l.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:l.strictNullHandling}}(t);"function"==typeof c.filter?s=(0,c.filter)("",s):n(c.filter)&&(i=c.filter);var h,p=[];if("object"!=typeof s||null===s)return"";h=t&&t.arrayFormat in o?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var f=o[h];i||(i=Object.keys(s)),c.sort&&i.sort(c.sort);for(var m=0;m<i.length;++m){var v=i[m];c.skipNulls&&null===s[v]||d(p,u(s[v],v,f,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.formatter,c.encodeValuesOnly,c.charset))}var y=p.join(c.delimiter),g=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),y.length>0?g+y:""}},function(e,t,i){"use strict";var s=i(75),a=Object.prototype.hasOwnProperty,r={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:s.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},o=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},n=function(e,t,i){if(e){var s=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,r=/(\[[^[\]]*])/g,o=/(\[[^[\]]*])/.exec(s),n=o?s.slice(0,o.index):s,c=[];if(n){if(!i.plainObjects&&a.call(Object.prototype,n)&&!i.allowPrototypes)return;c.push(n)}for(var d=0;null!==(o=r.exec(s))&&d<i.depth;){if(d+=1,!i.plainObjects&&a.call(Object.prototype,o[1].slice(1,-1))&&!i.allowPrototypes)return;c.push(o[1])}return o&&c.push("["+s.slice(o.index)+"]"),function(e,t,i){for(var s=t,a=e.length-1;a>=0;--a){var r,o=e[a];if("[]"===o&&i.parseArrays)r=[].concat(s);else{r=i.plainObjects?Object.create(null):{};var n="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,c=parseInt(n,10);i.parseArrays||""!==n?!isNaN(c)&&o!==n&&String(c)===n&&c>=0&&i.parseArrays&&c<=i.arrayLimit?(r=[])[c]=s:r[n]=s:r={0:s}}s=r}return s}(c,t,i)}};e.exports=function(e,t){var i=function(e){if(!e)return r;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?r.charset:e.charset;return{allowDots:void 0===e.allowDots?r.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:r.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:r.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:r.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:r.comma,decoder:"function"==typeof e.decoder?e.decoder:r.decoder,delimiter:"string"==typeof e.delimiter||s.isRegExp(e.delimiter)?e.delimiter:r.delimiter,depth:"number"==typeof e.depth?e.depth:r.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:r.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:r.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:r.strictNullHandling}}(t);if(""===e||null==e)return i.plainObjects?Object.create(null):{};for(var c="string"==typeof e?function(e,t){var i,n={},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,d=t.parameterLimit===1/0?void 0:t.parameterLimit,h=c.split(t.delimiter,d),l=-1,u=t.charset;if(t.charsetSentinel)for(i=0;i<h.length;++i)0===h[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===h[i]?u="utf-8":"utf8=%26%2310003%3B"===h[i]&&(u="iso-8859-1"),l=i,i=h.length);for(i=0;i<h.length;++i)if(i!==l){var p,f,m=h[i],v=m.indexOf("]="),y=-1===v?m.indexOf("="):v+1;-1===y?(p=t.decoder(m,r.decoder,u),f=t.strictNullHandling?null:""):(p=t.decoder(m.slice(0,y),r.decoder,u),f=t.decoder(m.slice(y+1),r.decoder,u)),f&&t.interpretNumericEntities&&"iso-8859-1"===u&&(f=o(f)),f&&t.comma&&f.indexOf(",")>-1&&(f=f.split(",")),a.call(n,p)?n[p]=s.combine(n[p],f):n[p]=f}return n}(e,i):e,d=i.plainObjects?Object.create(null):{},h=Object.keys(c),l=0;l<h.length;++l){var u=h[l],p=n(u,c[u],i);d=s.merge(d,p,i)}return s.compact(d)}},function(e,t,i){"use strict";const s=i(25),{capitalize:a}=i(43),{stringToBase64:r,urlencodeBase64:o}=i(24),n=i(185),{binaryToBase58:c,byteArrayToWordArray:d}=i(24),h=i(7),l=h.ec,u=h.eddsa,{ArgumentsRequired:p}=i(0),f=i(3),m=(e,t="md5",i="hex")=>{const r={};"keccak"===t&&(t="SHA3",r.outputLength=256);const o=s[t.toUpperCase()](e,r);return"binary"===i?o:o.toString(s.enc[a(i)])},v=(e,t,i="sha256",r="hex")=>{const o=s["Hmac"+i.toUpperCase()](e,t);if(r){const e="binary"===r?"Latin1":a(r);return o.toString(s.enc[a(e)])}return o};function y(e,t,i="RS256"){const s={RS256:"pkcs1-sha256",RS512:"pkcs1-sha512"};if(!(i in s))throw new ExchangeError(i+" is not a supported rsa signing algorithm.");return new n(t,{environment:"browser",signingScheme:s[i]}).sign(e,"base64","binary")}e.exports={hash:m,hmac:v,jwt:function(e,t,i="HS256"){const s=[o(r(JSON.stringify({alg:i,typ:"JWT"}))),o(r(JSON.stringify(e)))].join("."),a=i.slice(0,2);let n=void 0;return"HS"===a?n=o(v(s,t,{HS256:"sha256",HS384:"sha384",HS512:"sha512"}[i],"base64")):"RS"===a&&(n=o(y(s,t,i))),[s,n].join(".")},totp:e=>{const t=e=>parseInt(e,16),i=(e,t)=>(t+e).slice(-t.length);return(e=>{e=e.replace(" ","");let a=Math.round((new Date).getTime()/1e3),r=i(((o=Math.floor(a/30))<15.5?"0":"")+Math.round(o).toString(16),"0000000000000000");var o;let n=v(s.enc.Hex.parse(r),s.enc.Hex.parse((e=>{let t="",s="";for(let s=0;s<e.length;s++){let a="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".indexOf(e.charAt(s).toUpperCase());t+=i(a.toString(2),"00000")}for(let e=0;e+4<=t.length;e+=4){let i=t.substr(e,4);s+=parseInt(i,2).toString(16)}return s})(e)),"sha1","hex"),c=t(n.substring(n.length-1)),d=(t(n.substr(2*c,8))&t("7fffffff"))+"";return d=d.substr(d.length-6,6),d})(e)},rsa:y,ecdsa:function(e,t,i="p256",s,a=!1){let r=e;void 0!==s&&(r=m(e,s,"hex"));const o=new l(i);let n=o.sign(r,t,"hex",{canonical:!0}),c=new f("0");const d=new f("1").shln(248).sub(new f("1"));for(;a&&(n.r.gt(o.nh)||n.r.lte(d)||n.s.lte(d));)n=o.sign(r,t,"hex",{canonical:!0,extraEntropy:c.toArray("le",32)}),c=c.add(new f("1"));return{r:n.r.toString(16).padStart(64,"0"),s:n.s.toString(16).padStart(64,"0"),v:n.recoveryParam}},eddsa:function(e,t,i="ed25519"){const s=new u(i).signModified(e,t);return c(d(s.toBytes()))}}},function(e,t,i){
/*!
 * RSA library for Node.js
 *
 * Author: rzcoder
 * License MIT
 */
var s=i(186),a=i(6)._,r=i(78),o=i(189);e.exports=function(){var e={browser:["md5","ripemd160","sha1","sha256","sha512"]},t={private:"pkcs1-private-pem","private-der":"pkcs1-private-der",public:"pkcs8-public-pem","public-der":"pkcs8-public-der"};function i(e,t,r){if(!(this instanceof i))return new i(e,t,r);a.isObject(t)&&(r=t,t=void 0),this.$options={signingScheme:"pkcs1",signingSchemeOptions:{hash:"sha256",saltLength:null},encryptionScheme:"pkcs1",encryptionSchemeOptions:{hash:"sha1",label:null},environment:"browser",rsaUtils:this},this.keyPair=new s.Key,this.$cache={},Buffer.isBuffer(e)||a.isString(e)?this.importKey(e,t):a.isObject(e)&&this.generateKeyPair(e.b,e.e),this.setOptions(r)}return i.prototype.setOptions=function(t){if((t=t||{}).environment&&(this.$options.environment=t.environment),t.signingScheme){if(a.isString(t.signingScheme)){var i=t.signingScheme.toLowerCase().split("-");1==i.length?e.node.indexOf(i[0])>-1?(this.$options.signingSchemeOptions={hash:i[0]},this.$options.signingScheme="pkcs1"):(this.$options.signingScheme=i[0],this.$options.signingSchemeOptions={hash:null}):(this.$options.signingSchemeOptions={hash:i[1]},this.$options.signingScheme=i[0])}else a.isObject(t.signingScheme)&&(this.$options.signingScheme=t.signingScheme.scheme||"pkcs1",this.$options.signingSchemeOptions=a.omit(t.signingScheme,"scheme"));if(!r.isSignature(this.$options.signingScheme))throw Error("Unsupported signing scheme");if(this.$options.signingSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.signingSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}if(t.encryptionScheme){if(a.isString(t.encryptionScheme)?(this.$options.encryptionScheme=t.encryptionScheme.toLowerCase(),this.$options.encryptionSchemeOptions={}):a.isObject(t.encryptionScheme)&&(this.$options.encryptionScheme=t.encryptionScheme.scheme||"pkcs1",this.$options.encryptionSchemeOptions=a.omit(t.encryptionScheme,"scheme")),!r.isEncryption(this.$options.encryptionScheme))throw Error("Unsupported encryption scheme");if(this.$options.encryptionSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.encryptionSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}this.keyPair.setOptions(this.$options)},i.prototype.importKey=function(e,i){if(!e)throw Error("Empty key given");if(i&&(i=t[i]||i),!o.detectAndImport(this.keyPair,e,i)&&void 0===i)throw Error("Key format must be specified");return this.$cache={},this},i.prototype.isPrivate=function(){return this.keyPair.isPrivate()},i.prototype.isPublic=function(e){return this.keyPair.isPublic(e)},i.prototype.isEmpty=function(e){return!(this.keyPair.n||this.keyPair.e||this.keyPair.d)},i.prototype.sign=function(e,t,i){if(!this.isPrivate())throw Error("This is not private key");var s=this.keyPair.sign(this.$getDataForEncrypt(e,i));return t&&"buffer"!=t&&(s=s.toString(t)),s},i.prototype.$getDataForEncrypt=function(e,t){if(a.isString(e)||a.isNumber(e))return Buffer.from(""+e,t||"utf8");if(Buffer.isBuffer(e))return e;if(a.isObject(e))return Buffer.from(JSON.stringify(e));throw Error("Unexpected data type")},i}()},function(e,t,i){var s=i(6)._,a=i(77),r=i(6),o=i(78);e.exports.Key=function(){function e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return e.prototype.setOptions=function(e){var t=o[e.signingScheme],i=o[e.encryptionScheme];t===i?this.signingScheme=this.encryptionScheme=i.makeScheme(this,e):(this.encryptionScheme=i.makeScheme(this,e),this.signingScheme=t.makeScheme(this,e))},e.prototype.setPrivate=function(e,t,i,o,n,c,d,h){if(!(e&&t&&i&&e.length>0&&(s.isNumber(t)||t.length>0)&&i.length>0))throw Error("Invalid RSA private key");this.n=new a(e),this.e=s.isNumber(t)?t:r.get32IntFromBuffer(t,0),this.d=new a(i),o&&n&&c&&d&&h&&(this.p=new a(o),this.q=new a(n),this.dmp1=new a(c),this.dmq1=new a(d),this.coeff=new a(h)),this.$$recalculateCache()},e.prototype.$doPrivate=function(e){if(this.p||this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),i=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(i)<0;)t=t.add(this.p);return t.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)},e.prototype.sign=function(e){return this.signingScheme.sign.apply(this.signingScheme,arguments)},e.prototype.isPrivate=function(){return this.n&&this.e&&this.d||!1},Object.defineProperty(e.prototype,"keySize",{get:function(){return this.cache.keyBitLength}}),Object.defineProperty(e.prototype,"encryptedDataLength",{get:function(){return this.cache.keyByteLength}}),Object.defineProperty(e.prototype,"maxMessageLength",{get:function(){return this.encryptionScheme.maxMessageLength()}}),e.prototype.$$recalculateCache=function(){this.cache=this.cache||{},this.cache.keyBitLength=this.n.bitLength(),this.cache.keyByteLength=this.cache.keyBitLength+6>>3},e}()},function(e,t,i){var s=i(77),a=i(25),r=3;i(188);var o={md2:Buffer.from("3020300c06082a864886f70d020205000410","hex"),md5:Buffer.from("3020300c06082a864886f70d020505000410","hex"),sha1:Buffer.from("3021300906052b0e03021a05000414","hex"),sha224:Buffer.from("302d300d06096086480165030402040500041c","hex"),sha256:Buffer.from("3031300d060960864801650304020105000420","hex"),sha384:Buffer.from("3041300d060960864801650304020205000430","hex"),sha512:Buffer.from("3051300d060960864801650304020305000440","hex"),ripemd160:Buffer.from("3021300906052b2403020105000414","hex"),rmd160:Buffer.from("3021300906052b2403020105000414","hex")},n={ripemd160:"rmd160"};function c(e,t){var i=[];return t>0&&i.push(e>>>24),t>1&&i.push(e>>>16&255),t>2&&i.push(e>>>8&255),t>3&&i.push(255&e),i}e.exports={isEncryption:!0,isSignature:!0},e.exports.makeScheme=function(e,t){function i(e,t){this.key=e,this.options=t}return i.prototype.maxMessageLength=function(){return this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==r?this.key.encryptedDataLength:this.key.encryptedDataLength-11},i.prototype.encUnPad=function(e,t){t=t||{};var i=0;if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==r)return"function"==typeof e.lastIndexOf?e.slice(e.lastIndexOf("\0")+1,e.length):e.slice(String.prototype.lastIndexOf.call(e,"\0")+1,e.length);if(e.length<4)return null;if(1===t.type){if(0!==e[0]&&1!==e[1])return null;for(i=3;0!==e[i];)if(255!=e[i]||++i>=e.length)return null}else{if(0!==e[0]&&2!==e[1])return null;for(i=3;0!==e[i];)if(++i>=e.length)return null}return e.slice(i+1,e.length)},i.prototype.sign=function(e){var t=this.options.signingSchemeOptions.hash||"sha256";if("browser"===this.options.environment){var i=function(e){let t=void 0;if(!e.hasOwnProperty("sigBytes")||!e.hasOwnProperty("words"))throw Error("Argument not a wordArray");t=e.sigBytes,e=e.words;const i=[];let s=[],a=0;for(;t>0;)s=c(e[a],Math.min(4,t)),t-=s.length,i.push(s),a++;return new Buffer.from([].concat.apply([],i),"hex")}(a[(t=n[t]||t).toUpperCase()](e.toString())),r=this.pkcs1pad(i,t);return this.key.$doPrivate(new s(r)).toBuffer(this.key.encryptedDataLength)}throw new Error("CCXT only supports browser mode :P")},i.prototype.pkcs1pad=function(e,t){var i=o[t];if(!i)throw Error("Unsupported hash algorithm");var s=Buffer.concat([i,e]);if(s.length+10>this.key.encryptedDataLength)throw Error("Key is too short for signing algorithm ("+t+")");var a=Buffer.alloc(this.key.encryptedDataLength-s.length-1);return a.fill(255,0,a.length-1),a[0]=1,a[a.length-1]=0,Buffer.concat([a,s])},new i(e,t)}},function(e,t){e.exports=require("constants")},function(e,t,i){i(6)._;e.exports={pkcs1:i(190),pkcs8:i(194),components:i(195),detectAndImport:function(t,i,s){if(void 0===s){for(var a in e.exports)if("function"==typeof e.exports[a].autoImport&&e.exports[a].autoImport(t,i))return!0}else if(s){var r=formatParse(s);if(!e.exports[r.scheme])throw Error("Unsupported key format");"private"===r.keyType?e.exports[r.scheme].privateImport(t,i,r.keyOpt):e.exports[r.scheme].publicImport(t,i,r.keyOpt)}return!1}}},function(e,t,i){var s=i(79).Ber,a=i(6)._,r=i(6);e.exports={privateExport:function(e,t){t=t||{};var i=e.n.toBuffer(),a=e.d.toBuffer(),o=e.p.toBuffer(),n=e.q.toBuffer(),c=e.dmp1.toBuffer(),d=e.dmq1.toBuffer(),h=e.coeff.toBuffer(),l=i.length+a.length+o.length+n.length+c.length+d.length+h.length+512,u=new s.Writer({size:l});return u.startSequence(),u.writeInt(0),u.writeBuffer(i,2),u.writeInt(e.e),u.writeBuffer(a,2),u.writeBuffer(o,2),u.writeBuffer(n,2),u.writeBuffer(c,2),u.writeBuffer(d,2),u.writeBuffer(h,2),u.endSequence(),"der"===t.type?u.buffer:"-----BEGIN RSA PRIVATE KEY-----\n"+r.linebrk(u.buffer.toString("base64"),64)+"\n-----END RSA PRIVATE KEY-----"},privateImport:function(e,t,i){var o;if("der"!==(i=i||{}).type){if(Buffer.isBuffer(t)&&(t=t.toString("utf8")),!a.isString(t))throw Error("Unsupported key format");var n=r.trimSurroundingText(t,"-----BEGIN RSA PRIVATE KEY-----","-----END RSA PRIVATE KEY-----").replace(/\s+|\n\r|\n|\r$/gm,"");o=Buffer.from(n,"base64")}else{if(!Buffer.isBuffer(t))throw Error("Unsupported key format");o=t}var c=new s.Reader(o);c.readSequence(),c.readString(2,!0),e.setPrivate(c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0))},publicExport:function(e,t){t=t||{};var i=e.n.toBuffer(),a=i.length+512,o=new s.Writer({size:a});return o.startSequence(),o.writeBuffer(i,2),o.writeInt(e.e),o.endSequence(),"der"===t.type?o.buffer:"-----BEGIN RSA PUBLIC KEY-----\n"+r.linebrk(o.buffer.toString("base64"),64)+"\n-----END RSA PUBLIC KEY-----"},publicImport:function(e,t,i){var o;if("der"!==(i=i||{}).type){if(Buffer.isBuffer(t)&&(t=t.toString("utf8")),a.isString(t)){var n=r.trimSurroundingText(t,"-----BEGIN RSA PUBLIC KEY-----","-----END RSA PUBLIC KEY-----").replace(/\s+|\n\r|\n|\r$/gm,"");o=Buffer.from(n,"base64")}}else{if(!Buffer.isBuffer(t))throw Error("Unsupported key format");o=t}var c=new s.Reader(o);c.readSequence(),e.setPublic(c.readString(2,!0),c.readString(2,!0))},autoImport:function(t,i){return/^[\S\s]*-----BEGIN RSA PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PRIVATE KEY-----[\S\s]*$/g.test(i)?(e.exports.privateImport(t,i),!0):!!/^[\S\s]*-----BEGIN RSA PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PUBLIC KEY-----[\S\s]*$/g.test(i)&&(e.exports.publicImport(t,i),!0)}}},function(e,t,i){var s=i(80),a=i(81),r=i(192);for(var o in e.exports={Reader:r},a)a.hasOwnProperty(o)&&(e.exports[o]=a[o]);for(var n in s)s.hasOwnProperty(n)&&(e.exports[n]=s[n])},function(e,t,i){var s=i(193),a=i(81),r=i(80).newInvalidAsn1Error;function o(e){if(!e||!Buffer.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e,this._size=e.length,this._len=0,this._offset=0}Object.defineProperty(o.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(o.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(o.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),o.prototype.readByte=function(e){if(this._size-this._offset<1)return null;var t=255&this._buf[this._offset];return e||(this._offset+=1),t},o.prototype.peek=function(){return this.readByte(!0)},o.prototype.readLength=function(e){if(void 0===e&&(e=this._offset),e>=this._size)return null;var t=255&this._buf[e++];if(null===t)return null;if(128==(128&t)){if(0===(t&=127))throw r("Indefinite length not supported");if(t>4)throw r("encoding too long");if(this._size-e<t)return null;this._len=0;for(var i=0;i<t;i++)this._len=(this._len<<8)+(255&this._buf[e++])}else this._len=t;return e},o.prototype.readSequence=function(e){var t=this.peek();if(null===t)return null;if(void 0!==e&&e!==t)throw r("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var i=this.readLength(this._offset+1);return null===i?null:(this._offset=i,t)},o.prototype.readInt=function(){return this._readTag(a.Integer)},o.prototype.readBoolean=function(){return 0!==this._readTag(a.Boolean)},o.prototype.readEnumeration=function(){return this._readTag(a.Enumeration)},o.prototype.readString=function(e,t){e||(e=a.OctetString);var i=this.peek();if(null===i)return null;if(i!==e)throw r("Expected 0x"+e.toString(16)+": got 0x"+i.toString(16));var s=this.readLength(this._offset+1);if(null===s)return null;if(this.length>this._size-s)return null;if(this._offset=s,0===this.length)return t?Buffer.alloc(0):"";var o=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,t?o:o.toString("utf8")},o.prototype.readOID=function(e){e||(e=a.OID);var t=this.readString(e,!0);if(null===t)return null;for(var i=[],s=0,r=0;r<t.length;r++){var o=255&t[r];s<<=7,s+=127&o,0==(128&o)&&(i.push(s),s=0)}return s=i.shift(),i.unshift(s%40),i.unshift(s/40>>0),i.join(".")},o.prototype._readTag=function(e){s.ok(void 0!==e);var t=this.peek();if(null===t)return null;if(t!==e)throw r("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var i=this.readLength(this._offset+1);if(null===i)return null;if(this.length>4)throw r("Integer too long: "+this.length);if(this.length>this._size-i)return null;this._offset=i;for(var a=this._buf[this._offset],o=0,n=0;n<this.length;n++)o<<=8,o|=255&this._buf[this._offset++];return 128==(128&a)&&4!==n&&(o-=1<<8*n),o>>0},e.exports=o},function(e,t){e.exports=require("assert")},function(e,t,i){var s=i(79).Ber,a=i(6)._,r=i(6);e.exports={privateExport:function(e,t){t=t||{};var i=e.n.toBuffer(),a=e.d.toBuffer(),o=e.p.toBuffer(),n=e.q.toBuffer(),c=e.dmp1.toBuffer(),d=e.dmq1.toBuffer(),h=e.coeff.toBuffer(),l=i.length+a.length+o.length+n.length+c.length+d.length+h.length+512,u=new s.Writer({size:l});u.startSequence(),u.writeInt(0),u.writeBuffer(i,2),u.writeInt(e.e),u.writeBuffer(a,2),u.writeBuffer(o,2),u.writeBuffer(n,2),u.writeBuffer(c,2),u.writeBuffer(d,2),u.writeBuffer(h,2),u.endSequence();var p=new s.Writer({size:l});return p.startSequence(),p.writeInt(0),p.startSequence(),p.writeOID("1.2.840.113549.1.1.1"),p.writeNull(),p.endSequence(),p.writeBuffer(u.buffer,4),p.endSequence(),"der"===t.type?p.buffer:"-----BEGIN PRIVATE KEY-----\n"+r.linebrk(p.buffer.toString("base64"),64)+"\n-----END PRIVATE KEY-----"},privateImport:function(e,t,i){var o;if("der"!==(i=i||{}).type){if(Buffer.isBuffer(t)&&(t=t.toString("utf8")),!a.isString(t))throw Error("Unsupported key format");var n=r.trimSurroundingText(t,"-----BEGIN PRIVATE KEY-----","-----END PRIVATE KEY-----").replace("-----END PRIVATE KEY-----","").replace(/\s+|\n\r|\n|\r$/gm,"");o=Buffer.from(n,"base64")}else{if(!Buffer.isBuffer(t))throw Error("Unsupported key format");o=t}var c=new s.Reader(o);if(c.readSequence(),c.readInt(0),"1.2.840.113549.1.1.1"!==new s.Reader(c.readString(48,!0)).readOID(6,!0))throw Error("Invalid Public key format");var d=new s.Reader(c.readString(4,!0));d.readSequence(),d.readString(2,!0),e.setPrivate(d.readString(2,!0),d.readString(2,!0),d.readString(2,!0),d.readString(2,!0),d.readString(2,!0),d.readString(2,!0),d.readString(2,!0),d.readString(2,!0))},publicExport:function(e,t){t=t||{};var i=e.n.toBuffer(),a=i.length+512,o=new s.Writer({size:a});o.writeByte(0),o.startSequence(),o.writeBuffer(i,2),o.writeInt(e.e),o.endSequence();var n=new s.Writer({size:a});return n.startSequence(),n.startSequence(),n.writeOID("1.2.840.113549.1.1.1"),n.writeNull(),n.endSequence(),n.writeBuffer(o.buffer,3),n.endSequence(),"der"===t.type?n.buffer:"-----BEGIN PUBLIC KEY-----\n"+r.linebrk(n.buffer.toString("base64"),64)+"\n-----END PUBLIC KEY-----"},publicImport:function(e,t,i){var o;if("der"!==(i=i||{}).type){if(Buffer.isBuffer(t)&&(t=t.toString("utf8")),a.isString(t)){var n=r.trimSurroundingText(t,"-----BEGIN PUBLIC KEY-----","-----END PUBLIC KEY-----").replace(/\s+|\n\r|\n|\r$/gm,"");o=Buffer.from(n,"base64")}}else{if(!Buffer.isBuffer(t))throw Error("Unsupported key format");o=t}var c=new s.Reader(o);if(c.readSequence(),"1.2.840.113549.1.1.1"!==new s.Reader(c.readString(48,!0)).readOID(6,!0))throw Error("Invalid Public key format");var d=new s.Reader(c.readString(3,!0));d.readByte(),d.readSequence(),e.setPublic(d.readString(2,!0),d.readString(2,!0))},autoImport:function(t,i){return/^[\S\s]*-----BEGIN PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PRIVATE KEY-----[\S\s]*$/g.test(i)?(e.exports.privateImport(t,i),!0):!!/^[\S\s]*-----BEGIN PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PUBLIC KEY-----[\S\s]*$/g.test(i)&&(e.exports.publicImport(t,i),!0)}}},function(e,t,i){i(6)._,i(6);e.exports={privateExport:function(e,t){return{n:e.n.toBuffer(),e:e.e,d:e.d.toBuffer(),p:e.p.toBuffer(),q:e.q.toBuffer(),dmp1:e.dmp1.toBuffer(),dmq1:e.dmq1.toBuffer(),coeff:e.coeff.toBuffer()}},privateImport:function(e,t,i){if(!(t.n&&t.e&&t.d&&t.p&&t.q&&t.dmp1&&t.dmq1&&t.coeff))throw Error("Invalid key data");e.setPrivate(t.n,t.e,t.d,t.p,t.q,t.dmp1,t.dmq1,t.coeff)},publicExport:function(e,t){return{n:e.n.toBuffer(),e:e.e}},publicImport:function(e,t,i){if(!t.n||!t.e)throw Error("Invalid key data");e.setPublic(t.n,t.e)},autoImport:function(t,i){return!(!i.n||!i.e)&&(i.d&&i.p&&i.q&&i.dmp1&&i.dmq1&&i.coeff?(e.exports.privateImport(t,i),!0):(e.exports.publicImport(t,i),!0))}}},function(e,t,i){"use strict";var s=i(3),a=i(7).utils,r=a.getNAF,o=a.getJSF,n=a.assert;function c(e,t){this.type=e,this.p=new s(t.p,16),this.red=t.prime?s.red(t.prime):s.mont(this.p),this.zero=new s(0).toRed(this.red),this.one=new s(1).toRed(this.red),this.two=new s(2).toRed(this.red),this.n=t.n&&new s(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function d(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){n(e.precomputed);var i=e._getDoubles(),s=r(t,1),a=(1<<i.step+1)-(i.step%2==0?2:1);a/=3;for(var o=[],c=0;c<s.length;c+=i.step){var d=0;for(t=c+i.step-1;t>=c;t--)d=(d<<1)+s[t];o.push(d)}for(var h=this.jpoint(null,null,null),l=this.jpoint(null,null,null),u=a;u>0;u--){for(c=0;c<o.length;c++){(d=o[c])===u?l=l.mixedAdd(i.points[c]):d===-u&&(l=l.mixedAdd(i.points[c].neg()))}h=h.add(l)}return h.toP()},c.prototype._wnafMul=function(e,t){var i=4,s=e._getNAFPoints(i);i=s.wnd;for(var a=s.points,o=r(t,i),c=this.jpoint(null,null,null),d=o.length-1;d>=0;d--){for(t=0;d>=0&&0===o[d];d--)t++;if(d>=0&&t++,c=c.dblp(t),d<0)break;var h=o[d];n(0!==h),c="affine"===e.type?h>0?c.mixedAdd(a[h-1>>1]):c.mixedAdd(a[-h-1>>1].neg()):h>0?c.add(a[h-1>>1]):c.add(a[-h-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,i,s,a){for(var n=this._wnafT1,c=this._wnafT2,d=this._wnafT3,h=0,l=0;l<s;l++){var u=(_=t[l])._getNAFPoints(e);n[l]=u.wnd,c[l]=u.points}for(l=s-1;l>=1;l-=2){var p=l-1,f=l;if(1===n[p]&&1===n[f]){var m=[t[p],null,null,t[f]];0===t[p].y.cmp(t[f].y)?(m[1]=t[p].add(t[f]),m[2]=t[p].toJ().mixedAdd(t[f].neg())):0===t[p].y.cmp(t[f].y.redNeg())?(m[1]=t[p].toJ().mixedAdd(t[f]),m[2]=t[p].add(t[f].neg())):(m[1]=t[p].toJ().mixedAdd(t[f]),m[2]=t[p].toJ().mixedAdd(t[f].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],y=o(i[p],i[f]);h=Math.max(y[0].length,h),d[p]=new Array(h),d[f]=new Array(h);for(var g=0;g<h;g++){var b=0|y[0][g],w=0|y[1][g];d[p][g]=v[3*(b+1)+(w+1)],d[f][g]=0,c[p]=m}}else d[p]=r(i[p],n[p]),d[f]=r(i[f],n[f]),h=Math.max(d[p].length,h),h=Math.max(d[f].length,h)}var k=this.jpoint(null,null,null),x=this._wnafT4;for(l=h;l>=0;l--){for(var T=0;l>=0;){var O=!0;for(g=0;g<s;g++)x[g]=0|d[g][l],0!==x[g]&&(O=!1);if(!O)break;T++,l--}if(l>=0&&T++,k=k.dblp(T),l<0)break;for(g=0;g<s;g++){var _,S=x[g];0!==S&&(S>0?_=c[g][S-1>>1]:S<0&&(_=c[g][-S-1>>1].neg()),k="affine"===_.type?k.mixedAdd(_):k.add(_))}}for(l=0;l<s;l++)c[l]=null;return a?k:k.toP()},c.BasePoint=d,d.prototype.eq=function(){throw new Error("Not implemented")},d.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=a.toArray(e,t);var i=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*i)return 6===e[0]?n(e[e.length-1]%2==0):7===e[0]&&n(e[e.length-1]%2==1),this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));if((2===e[0]||3===e[0])&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),3===e[0]);throw new Error("Unknown point format")},d.prototype.encodeCompressed=function(e){return this.encode(e,!0)},d.prototype._encode=function(e){var t=this.curve.p.byteLength(),i=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",t))},d.prototype.encode=function(e,t){return a.encode(this._encode(t),e)},d.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},d.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},d.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],s=this,a=0;a<t;a+=e){for(var r=0;r<e;r++)s=s.dbl();i.push(s)}return{step:e,points:i}},d.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],i=(1<<e)-1,s=1===i?null:this.dbl(),a=1;a<i;a++)t[a]=t[a-1].add(s);return{wnd:e,points:t}},d.prototype._getBeta=function(){return null},d.prototype.dblp=function(e){for(var t=this,i=0;i<e;i++)t=t.dbl();return t}},function(e,t,i){"use strict";var s=i(35),a=i(7),r=i(3),o=a.inherits,n=s.base,c=a.utils.assert;function d(e){n.call(this,"short",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function h(e,t,i,s){n.BasePoint.call(this,e,"affine"),null===t&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new r(t,16),this.y=new r(i,16),s&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function l(e,t,i,s){n.BasePoint.call(this,e,"jacobian"),null===t&&null===i&&null===s?(this.x=this.curve.one,this.y=this.curve.one,this.z=new r(0)):(this.x=new r(t,16),this.y=new r(i,16),this.z=new r(s,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(d,n),e.exports=d,d.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,i;if(e.beta)t=new r(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);t=(t=s[0].cmp(s[1])<0?s[0]:s[1]).toRed(this.red)}if(e.lambda)i=new r(e.lambda,16);else{var a=this._getEndoRoots(this.n);0===this.g.mul(a[0]).x.cmp(this.g.x.redMul(t))?i=a[0]:(i=a[1],c(0===this.g.mul(i).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:i,basis:e.basis?e.basis.map((function(e){return{a:new r(e.a,16),b:new r(e.b,16)}})):this._getEndoBasis(i)}}},d.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:r.mont(e),i=new r(2).toRed(t).redInvm(),s=i.redNeg(),a=new r(3).toRed(t).redNeg().redSqrt().redMul(i);return[s.redAdd(a).fromRed(),s.redSub(a).fromRed()]},d.prototype._getEndoBasis=function(e){for(var t,i,s,a,o,n,c,d,h,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),u=e,p=this.n.clone(),f=new r(1),m=new r(0),v=new r(0),y=new r(1),g=0;0!==u.cmpn(0);){var b=p.div(u);d=p.sub(b.mul(u)),h=v.sub(b.mul(f));var w=y.sub(b.mul(m));if(!s&&d.cmp(l)<0)t=c.neg(),i=f,s=d.neg(),a=h;else if(s&&2==++g)break;c=d,p=u,u=d,v=f,f=h,y=m,m=w}o=d.neg(),n=h;var k=s.sqr().add(a.sqr());return o.sqr().add(n.sqr()).cmp(k)>=0&&(o=t,n=i),s.negative&&(s=s.neg(),a=a.neg()),o.negative&&(o=o.neg(),n=n.neg()),[{a:s,b:a},{a:o,b:n}]},d.prototype._endoSplit=function(e){var t=this.endo.basis,i=t[0],s=t[1],a=s.b.mul(e).divRound(this.n),r=i.b.neg().mul(e).divRound(this.n),o=a.mul(i.a),n=r.mul(s.a),c=a.mul(i.b),d=r.mul(s.b);return{k1:e.sub(o).sub(n),k2:c.add(d).neg()}},d.prototype.pointFromX=function(e,t){(e=new r(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=i.redSqrt();if(0!==s.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");var a=s.fromRed().isOdd();return(t&&!a||!t&&a)&&(s=s.redNeg()),this.point(e,s)},d.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,i=e.y,s=this.a.redMul(t),a=t.redSqr().redMul(t).redIAdd(s).redIAdd(this.b);return 0===i.redSqr().redISub(a).cmpn(0)},d.prototype._endoWnafMulAdd=function(e,t,i){for(var s=this._endoWnafT1,a=this._endoWnafT2,r=0;r<e.length;r++){var o=this._endoSplit(t[r]),n=e[r],c=n._getBeta();o.k1.negative&&(o.k1.ineg(),n=n.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),s[2*r]=n,s[2*r+1]=c,a[2*r]=o.k1,a[2*r+1]=o.k2}for(var d=this._wnafMulAdd(1,s,a,2*r,i),h=0;h<2*r;h++)s[h]=null,a[h]=null;return d},o(h,n.BasePoint),d.prototype.point=function(e,t,i){return new h(this,e,t,i)},d.prototype.pointFromJSON=function(e,t){return h.fromJSON(this,e,t)},h.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,s=function(e){return i.point(e.x.redMul(i.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return t}},h.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},h.fromJSON=function(e,t,i){"string"==typeof t&&(t=JSON.parse(t));var s=e.point(t[0],t[1],i);if(!t[2])return s;function a(t){return e.point(t[0],t[1],i)}var r=t[2];return s.precomputed={beta:null,doubles:r.doubles&&{step:r.doubles.step,points:[s].concat(r.doubles.points.map(a))},naf:r.naf&&{wnd:r.naf.wnd,points:[s].concat(r.naf.points.map(a))}},s},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return this.inf},h.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var i=t.redSqr().redISub(this.x).redISub(e.x),s=t.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)},h.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,i=this.x.redSqr(),s=e.redInvm(),a=i.redAdd(i).redIAdd(i).redIAdd(t).redMul(s),r=a.redSqr().redISub(this.x.redAdd(this.x)),o=a.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,o)},h.prototype.getX=function(){return this.x.fromRed()},h.prototype.getY=function(){return this.y.fromRed()},h.prototype.mul=function(e){return e=new r(e,16),this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},h.prototype.mulAdd=function(e,t,i){var s=[this,t],a=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,a):this.curve._wnafMulAdd(1,s,a,2)},h.prototype.jmulAdd=function(e,t,i){var s=[this,t],a=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,a,!0):this.curve._wnafMulAdd(1,s,a,2,!0)},h.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},h.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,s=function(e){return e.neg()};t.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(s)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(s)}}}return t},h.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(l,n.BasePoint),d.prototype.jpoint=function(e,t,i){return new l(this,e,t,i)},l.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),i=this.x.redMul(t),s=this.y.redMul(t).redMul(e);return this.curve.point(i,s)},l.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},l.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(t),a=e.x.redMul(i),r=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(i.redMul(this.z)),n=s.redSub(a),c=r.redSub(o);if(0===n.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var d=n.redSqr(),h=d.redMul(n),l=s.redMul(d),u=c.redSqr().redIAdd(h).redISub(l).redISub(l),p=c.redMul(l.redISub(u)).redISub(r.redMul(h)),f=this.z.redMul(e.z).redMul(n);return this.curve.jpoint(u,p,f)},l.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),i=this.x,s=e.x.redMul(t),a=this.y,r=e.y.redMul(t).redMul(this.z),o=i.redSub(s),n=a.redSub(r);if(0===o.cmpn(0))return 0!==n.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),d=c.redMul(o),h=i.redMul(c),l=n.redSqr().redIAdd(d).redISub(h).redISub(h),u=n.redMul(h.redISub(l)).redISub(a.redMul(d)),p=this.z.redMul(o);return this.curve.jpoint(l,u,p)},l.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,i=0;i<e;i++)t=t.dbl();return t}var s=this.curve.a,a=this.curve.tinv,r=this.x,o=this.y,n=this.z,c=n.redSqr().redSqr(),d=o.redAdd(o);for(i=0;i<e;i++){var h=r.redSqr(),l=d.redSqr(),u=l.redSqr(),p=h.redAdd(h).redIAdd(h).redIAdd(s.redMul(c)),f=r.redMul(l),m=p.redSqr().redISub(f.redAdd(f)),v=f.redISub(m),y=p.redMul(v);y=y.redIAdd(y).redISub(u);var g=d.redMul(n);i+1<e&&(c=c.redMul(u)),r=m,n=g,d=y}return this.curve.jpoint(r,d.redMul(a),n)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},l.prototype._zeroDbl=function(){var e,t,i;if(this.zOne){var s=this.x.redSqr(),a=this.y.redSqr(),r=a.redSqr(),o=this.x.redAdd(a).redSqr().redISub(s).redISub(r);o=o.redIAdd(o);var n=s.redAdd(s).redIAdd(s),c=n.redSqr().redISub(o).redISub(o),d=r.redIAdd(r);d=(d=d.redIAdd(d)).redIAdd(d),e=c,t=n.redMul(o.redISub(c)).redISub(d),i=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),l=this.y.redSqr(),u=l.redSqr(),p=this.x.redAdd(l).redSqr().redISub(h).redISub(u);p=p.redIAdd(p);var f=h.redAdd(h).redIAdd(h),m=f.redSqr(),v=u.redIAdd(u);v=(v=v.redIAdd(v)).redIAdd(v),e=m.redISub(p).redISub(p),t=f.redMul(p.redISub(e)).redISub(v),i=(i=this.y.redMul(this.z)).redIAdd(i)}return this.curve.jpoint(e,t,i)},l.prototype._threeDbl=function(){var e,t,i;if(this.zOne){var s=this.x.redSqr(),a=this.y.redSqr(),r=a.redSqr(),o=this.x.redAdd(a).redSqr().redISub(s).redISub(r);o=o.redIAdd(o);var n=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),c=n.redSqr().redISub(o).redISub(o);e=c;var d=r.redIAdd(r);d=(d=d.redIAdd(d)).redIAdd(d),t=n.redMul(o.redISub(c)).redISub(d),i=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),l=this.y.redSqr(),u=this.x.redMul(l),p=this.x.redSub(h).redMul(this.x.redAdd(h));p=p.redAdd(p).redIAdd(p);var f=u.redIAdd(u),m=(f=f.redIAdd(f)).redAdd(f);e=p.redSqr().redISub(m),i=this.y.redAdd(this.z).redSqr().redISub(l).redISub(h);var v=l.redSqr();v=(v=(v=v.redIAdd(v)).redIAdd(v)).redIAdd(v),t=p.redMul(f.redISub(e)).redISub(v)}return this.curve.jpoint(e,t,i)},l.prototype._dbl=function(){var e=this.curve.a,t=this.x,i=this.y,s=this.z,a=s.redSqr().redSqr(),r=t.redSqr(),o=i.redSqr(),n=r.redAdd(r).redIAdd(r).redIAdd(e.redMul(a)),c=t.redAdd(t),d=(c=c.redIAdd(c)).redMul(o),h=n.redSqr().redISub(d.redAdd(d)),l=d.redISub(h),u=o.redSqr();u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var p=n.redMul(l).redISub(u),f=i.redAdd(i).redMul(s);return this.curve.jpoint(h,p,f)},l.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr(),s=t.redSqr(),a=e.redAdd(e).redIAdd(e),r=a.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(s),n=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(r)).redSqr(),c=s.redIAdd(s);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var d=a.redIAdd(o).redSqr().redISub(r).redISub(n).redISub(c),h=t.redMul(d);h=(h=h.redIAdd(h)).redIAdd(h);var l=this.x.redMul(n).redISub(h);l=(l=l.redIAdd(l)).redIAdd(l);var u=this.y.redMul(d.redMul(c.redISub(d)).redISub(o.redMul(n)));u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var p=this.z.redAdd(o).redSqr().redISub(i).redISub(n);return this.curve.jpoint(l,u,p)},l.prototype.mul=function(e,t){return e=new r(e,t),this.curve._wnafMul(this,e)},l.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),i=e.z.redSqr();if(0!==this.x.redMul(i).redISub(e.x.redMul(t)).cmpn(0))return!1;var s=t.redMul(this.z),a=i.redMul(e.z);return 0===this.y.redMul(a).redISub(e.y.redMul(s)).cmpn(0)},l.prototype.eqXToP=function(e){var t=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(i))return!0;for(var s=e.clone(),a=this.curve.redN.redMul(t);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(a),0===this.x.cmp(i))return!0}return!1},l.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(e,t,i){"use strict";var s=i(35),a=i(3),r=i(7).inherits,o=s.base,n=i(7).utils;function c(e){o.call(this,"mont",e),this.a=new a(e.a,16).toRed(this.red),this.b=new a(e.b,16).toRed(this.red),this.i4=new a(4).toRed(this.red).redInvm(),this.two=new a(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function d(e,t,i){o.BasePoint.call(this,e,"projective"),null===t&&null===i?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new a(t,16),this.z=new a(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}r(c,o),e.exports=c,c.prototype.validate=function(e){var t=e.normalize().x,i=t.redSqr(),s=i.redMul(t).redAdd(i.redMul(this.a)).redAdd(t);return 0===s.redSqrt().redSqr().cmp(s)},r(d,o.BasePoint),c.prototype.decodePoint=function(e,t){return this.point(n.toArray(e,t),1)},c.prototype.point=function(e,t){return new d(this,e,t)},c.prototype.pointFromJSON=function(e){return d.fromJSON(this,e)},d.prototype.precompute=function(){},d.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},d.fromJSON=function(e,t){return new d(e,t[0],t[1]||e.one)},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},d.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),i=e.redSub(t),s=e.redMul(t),a=i.redMul(t.redAdd(this.curve.a24.redMul(i)));return this.curve.point(s,a)},d.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},d.prototype.diffAdd=function(e,t){var i=this.x.redAdd(this.z),s=this.x.redSub(this.z),a=e.x.redAdd(e.z),r=e.x.redSub(e.z).redMul(i),o=a.redMul(s),n=t.z.redMul(r.redAdd(o).redSqr()),c=t.x.redMul(r.redISub(o).redSqr());return this.curve.point(n,c)},d.prototype.mul=function(e){for(var t=e.clone(),i=this,s=this.curve.point(null,null),a=[];0!==t.cmpn(0);t.iushrn(1))a.push(t.andln(1));for(var r=a.length-1;r>=0;r--)0===a[r]?(i=i.diffAdd(s,this),s=s.dbl()):(s=i.diffAdd(s,this),i=i.dbl());return s},d.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},d.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},d.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},d.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(e,t,i){"use strict";var s=i(35),a=i(7),r=i(3),o=a.inherits,n=s.base,c=a.utils.assert;function d(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,n.call(this,"edwards",e),this.a=new r(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new r(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new r(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),c(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function h(e,t,i,s,a){n.BasePoint.call(this,e,"projective"),null===t&&null===i&&null===s?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new r(t,16),this.y=new r(i,16),this.z=s?new r(s,16):this.curve.one,this.t=a&&new r(a,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(d,n),e.exports=d,d.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},d.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},d.prototype.jpoint=function(e,t,i,s){return this.point(e,t,i,s)},d.prototype.pointFromX=function(e,t){(e=new r(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr(),s=this.c2.redSub(this.a.redMul(i)),a=this.one.redSub(this.c2.redMul(this.d).redMul(i)),o=s.redMul(a.redInvm()),n=o.redSqrt();if(0!==n.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var c=n.fromRed().isOdd();return(t&&!c||!t&&c)&&(n=n.redNeg()),this.point(e,n)},d.prototype.pointFromY=function(e,t){(e=new r(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr(),s=i.redSub(this.one),a=i.redMul(this.d).redAdd(this.one),o=s.redMul(a.redInvm());if(0===o.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var n=o.redSqrt();if(0!==n.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return n.isOdd()!==t&&(n=n.redNeg()),this.point(n,e)},d.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),i=e.y.redSqr(),s=t.redMul(this.a).redAdd(i),a=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(i)));return 0===s.cmp(a)},o(h,n.BasePoint),d.prototype.pointFromJSON=function(e){return h.fromJSON(this,e)},d.prototype.point=function(e,t,i,s){return new h(this,e,t,i,s)},h.fromJSON=function(e,t){return new h(e,t[0],t[1],t[2])},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},h.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var s=this.curve._mulA(e),a=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),r=s.redAdd(t),o=r.redSub(i),n=s.redSub(t),c=a.redMul(o),d=r.redMul(n),h=a.redMul(n),l=o.redMul(r);return this.curve.point(c,d,l,h)},h.prototype._projDbl=function(){var e,t,i,s=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),r=this.y.redSqr();if(this.curve.twisted){var o=(d=this.curve._mulA(a)).redAdd(r);if(this.zOne)e=s.redSub(a).redSub(r).redMul(o.redSub(this.curve.two)),t=o.redMul(d.redSub(r)),i=o.redSqr().redSub(o).redSub(o);else{var n=this.z.redSqr(),c=o.redSub(n).redISub(n);e=s.redSub(a).redISub(r).redMul(c),t=o.redMul(d.redSub(r)),i=o.redMul(c)}}else{var d=a.redAdd(r);n=this.curve._mulC(this.c.redMul(this.z)).redSqr(),c=d.redSub(n).redSub(n);e=this.curve._mulC(s.redISub(d)).redMul(c),t=this.curve._mulC(d).redMul(a.redISub(r)),i=d.redMul(c)}return this.curve.point(e,t,i)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},h.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),s=this.t.redMul(this.curve.dd).redMul(e.t),a=this.z.redMul(e.z.redAdd(e.z)),r=i.redSub(t),o=a.redSub(s),n=a.redAdd(s),c=i.redAdd(t),d=r.redMul(o),h=n.redMul(c),l=r.redMul(c),u=o.redMul(n);return this.curve.point(d,h,u,l)},h.prototype._projAdd=function(e){var t,i,s=this.z.redMul(e.z),a=s.redSqr(),r=this.x.redMul(e.x),o=this.y.redMul(e.y),n=this.curve.d.redMul(r).redMul(o),c=a.redSub(n),d=a.redAdd(n),h=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(r).redISub(o),l=s.redMul(c).redMul(h);return this.curve.twisted?(t=s.redMul(d).redMul(o.redSub(this.curve._mulA(r))),i=c.redMul(d)):(t=s.redMul(d).redMul(o.redSub(r)),i=this.curve._mulC(c).redMul(d)),this.curve.point(l,t,i)},h.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},h.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},h.prototype.mulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!1)},h.prototype.jmulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!0)},h.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},h.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},h.prototype.getX=function(){return this.normalize(),this.x.fromRed()},h.prototype.getY=function(){return this.normalize(),this.y.fromRed()},h.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},h.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var i=e.clone(),s=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(s),0===this.x.cmp(t))return!0}return!1},h.prototype.toP=h.prototype.normalize,h.prototype.mixedAdd=h.prototype.add},function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(e,t,i){"use strict";var s=i(3),a=i(202),r=i(7),o=r.utils.assert,n=i(203),c=i(204);function d(e){if(!(this instanceof d))return new d(e);"string"==typeof e&&(o(r.curves.hasOwnProperty(e),"Unknown curve "+e),e=r.curves[e]),e instanceof r.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=d,d.prototype.keyPair=function(e){return new n(this,e)},d.prototype.keyFromPrivate=function(e,t){return n.fromPrivate(this,e,t)},d.prototype.keyFromPublic=function(e,t){return n.fromPublic(this,e,t)},d.prototype.genKeyPair=function(e){e||(e={});for(var t=new a({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||null,entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),r=this.n.sub(new s(2));;){var o=new s(t.generate(i));if(!(o.cmp(r)>0))return o.iaddn(1),this.keyFromPrivate(o)}},d.prototype._truncateToN=function(e,t){var i=8*e.byteLength()-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},d.prototype.sign=function(e,t,i,r){"object"==typeof i&&(r=i,i=null),r||(r={}),t=this.keyFromPrivate(t,i),e=this._truncateToN(new s(e,16));for(var o=this.n.byteLength(),n=t.getPrivate().toArray("be",o),d=e.toArray("be",o),h=new a({hash:this.hash,entropy:r.extraEntropy?n.concat(r.extraEntropy):n,nonce:d,pers:r.pers,persEnc:r.persEnc||"utf8"}),l=this.n.sub(new s(1)),u=0;;u++){var p=r.k?r.k(u):new s(h.generate(this.n.byteLength()));if(!((p=this._truncateToN(p,!0)).cmpn(1)<=0||p.cmp(l)>=0)){var f=this.g.mul(p);if(!f.isInfinity()){var m=f.getX(),v=m.umod(this.n);if(0!==v.cmpn(0)){var y=p.invm(this.n).mul(v.mul(t.getPrivate()).iadd(e));if(0!==(y=y.umod(this.n)).cmpn(0)){var g=(f.getY().isOdd()?1:0)|(0!==m.cmp(v)?2:0);return r.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),g^=1),new c({r:v,s:y,recoveryParam:g})}}}}}},d.prototype.verify=function(e,t,i,a){e=this._truncateToN(new s(e,16)),i=this.keyFromPublic(i,a);var r=(t=new c(t,"hex")).r,o=t.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var n,d=o.invm(this.n),h=d.mul(e).umod(this.n),l=d.mul(r).umod(this.n);return this.curve._maxwellTrick?!(n=this.g.jmulAdd(h,i.getPublic(),l)).isInfinity()&&n.eqXToP(r):!(n=this.g.mulAdd(h,i.getPublic(),l)).isInfinity()&&0===n.getX().umod(this.n).cmp(r)},d.prototype.recoverPubKey=function(e,t,i,a){o((3&i)===i,"The recovery param is more than two bits"),t=new c(t,a);var r=this.n,n=new s(e),d=t.r,h=t.s,l=1&i,u=i>>1;if(d.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");d=u?this.curve.pointFromX(d.add(this.curve.n),l):this.curve.pointFromX(d,l);var p=t.r.invm(r),f=r.sub(n).mul(p).umod(r),m=h.mul(p).umod(r);return this.g.mulAdd(f,d,m)},d.prototype.getKeyRecoveryParam=function(e,t,i,s){if(null!==(t=new c(t,s)).recoveryParam)return t.recoveryParam;for(var a=0;a<4;a++){var r;try{r=this.recoverPubKey(e,t,a)}catch(e){continue}if(r.eq(i))return a}throw new Error("Unable to find valid recovery factor")}},function(e,t,i){"use strict";var s=i(25),a=i(18).assert,r=i(18),{byteArrayToWordArray:o}=i(24);const n=s.enc.Utf8.parse(""),c=s.enc.Utf8.parse("\0");function d(e){if(!(this instanceof d))return new d(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.slice(3,6),this.minEntropy=e.minEntropy||192,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=e.entropy,i=e.nonce;a(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,i,[])}e.exports=d,d.prototype._init=function(e,t,i){var a=e.concat(t).concat(i);this.K=new s.lib.WordArray.init,this.V=new s.lib.WordArray.init;this.V.words=Array(this.outLen/32).fill(16843009),this.V.sigBytes=32,this._update(a),this._reseed=1,this.reseedInterval=281474976710656},d.prototype._hmac=function(){return new s.lib.WordArray.init},d.prototype._update=function(e){var t=this._hmac();t.concat(this.V),t.concat(c),e&&t.concat(o(e)),this.K=s["Hmac"+this.hash](t,this.K),this.V=s["Hmac"+this.hash](this.V,this.K),e&&((t=this._hmac()).concat(this.V),t.concat(n),t.concat(o(e)),this.K=s["Hmac"+this.hash](t,this.K),this.V=s["Hmac"+this.hash](this.V,this.K))},d.prototype.reseed=function(e,t,i,s){"string"!=typeof t&&(i,i=t,t=null),a(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1},d.prototype.generate=function(e,t,i,a){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(i,i=t,t=null),i&&(i=s.enc.Utf8.parse(i),this._update(i));for(var o=new s.lib.WordArray.init;o.sigBytes<e;)this.V=s["Hmac"+this.hash](this.V,this.K),o.concat(this.V);return this._update(i),this._reseed++,r.wordArrayToBuffer(o)}},function(e,t,i){"use strict";var s=i(3),a=i(7).utils.assert;function r(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=r,r.fromPublic=function(e,t,i){return t instanceof r?t:new r(e,{pub:t,pubEnc:i})},r.fromPrivate=function(e,t,i){return t instanceof r?t:new r(e,{priv:t,privEnc:i})},r.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},r.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},r.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},r.prototype._importPrivate=function(e,t){this.priv=new s(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},r.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?a(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||a(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},r.prototype.derive=function(e){return e.mul(this.priv).getX()},r.prototype.sign=function(e,t,i){return this.ec.sign(e,this,t,i)},r.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},r.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(e,t,i){"use strict";var s=i(3),a=i(7).utils.assert;e.exports=function e(t,i){if(t instanceof e)return t;a(t.r&&t.s,"Signature without r or s"),this.r=new s(t.r,16),this.s=new s(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam}},function(e,t,i){"use strict";var s=i(82),a=i(18),r=a.assert,o=a.parseBytes,n=i(206),c=i(207);const d=i(3),{byteArrayToWordArray:h}=i(24),l=i(25);function u(e){if(r("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof u))return new u(e);var t=s[e].curve;this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8)}e.exports=u,u.prototype.sign=function(e,t){e=o(e);var i=this.keyFromSecret(t),s=this.hashInt(i.secret(),e),a=this.g.mul(s),r=this.encodePoint(a),n=this.hashInt(r,i.pubBytes(),e);n=n.mul(i.priv());var c=s.add(n).umod(this.curve.n);return this.makeSignature({R:a,S:c,Rencoded:r})},u.prototype.signModified=function(e,t){e=o(e);var i=this.keyFromSecret(t);const s=new d(i.secret(),16,"le"),a=this.encodePoint(this.g.mul(s)),r=128&a[31];var n=this.hashInt(i.secret(),e),c=this.g.mul(n),h=this.encodePoint(c);let l=this.hashInt(h,a,e);l=l.mul(s);var u=n.add(l).umod(this.curve.n),p=u.toArray("le");return p[31]|=r,this.makeSignature({R:c,S:u,Rencoded:h,Sencoded:p})},u.prototype.verify=function(e,t,i){e=o(e),t=this.makeSignature(t);var s=this.keyFromPublic(i),a=this.hashInt(t.Rencoded(),s.pubBytes(),e),r=this.g.mul(t.S());return t.R().add(s.pub().mul(a)).eq(r)},u.prototype.hashInt=function(){let e=Array.from(arguments).reduce((e,t)=>e.concat(t));e=h(e);const t=l.SHA512(e).toString(l.enc.Hex);return a.intFromLE(t).umod(this.curve.n)},u.prototype.keyFromPublic=function(e){return n.fromPublic(this,e)},u.prototype.keyFromSecret=function(e){return n.fromSecret(this,e)},u.prototype.makeSignature=function(e){return e instanceof c?e:new c(this,e)},u.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},u.prototype.decodePoint=function(e){var t=(e=a.parseBytes(e)).length-1,i=e.slice(0,t).concat(-129&e[t]),s=0!=(128&e[t]),r=a.intFromLE(i);return this.curve.pointFromY(r,s)},u.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(e){return a.intFromLE(e)},u.prototype.isPoint=function(e){return e instanceof this.pointClass}},function(e,t,i){"use strict";var s=i(18),a=s.assert,r=s.parseBytes,o=s.cachedProperty;function n(e,t){this.eddsa=e,this._secret=r(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=r(t.pub)}n.fromPublic=function(e,t){return t instanceof n?t:new n(e,{pub:t})},n.fromSecret=function(e,t){return t instanceof n?t:new n(e,{secret:t})},n.prototype.secret=function(){return this._secret},o(n,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),o(n,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),o(n,"privBytes",(function(){var e=this.eddsa,t=this.hash(),i=e.encodingLength-1,s=t.slice(0,e.encodingLength);return s[0]&=248,s[i]&=127,s[i]|=64,s})),o(n,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),o(n,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),o(n,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),n.prototype.sign=function(e){return a(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},n.prototype.signModified=function(e){return a(this._secret,"KeyPair can only verify"),this.eddsa.signModified(e,this)},n.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},n.prototype.getSecret=function(e){return a(this._secret,"KeyPair is public only"),s.encode(this.secret(),e)},n.prototype.getPublic=function(e){return s.encode(this.pubBytes(),e)},e.exports=n},function(e,t,i){"use strict";var s=i(3),a=i(18),r=a.assert,o=a.cachedProperty,n=a.parseBytes;function c(e,t){this.eddsa=e,"object"!=typeof t&&(t=n(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),r(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof s&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}o(c,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),o(c,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),o(c,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),o(c,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return a.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},function(e,t,i){"use strict";e.exports={BaseError:{ExchangeError:{AuthenticationError:{PermissionDenied:{},AccountSuspended:{}},ArgumentsRequired:{},BadRequest:{BadSymbol:{}},BadResponse:{NullResponse:{}},InsufficientFunds:{},InvalidAddress:{AddressPending:{}},InvalidOrder:{OrderNotFound:{},OrderNotCached:{},CancelPending:{},OrderImmediatelyFillable:{},OrderNotFillable:{},DuplicateOrderId:{}},NotSupported:{}},NetworkError:{DDoSProtection:{RateLimitExceeded:{}},ExchangeNotAvailable:{OnMaintenance:{}},InvalidNonce:{},RequestTimeout:{}}}}},function(e,t,i){"use strict";const{sleep:s,now:a}=i(83);e.exports={throttle:function e(t){let i=a(),r=void 0!==t.numTokens?t.numTokens:t.capacity,o=!1;const n=[];return Object.assign((e,c)=>{if(n.length>t.maxCapacity)throw new Error("Backlog is over max capacity of "+t.maxCapacity);return new Promise(async(d,h)=>{try{if(n.push({cost:c,resolve:d,reject:h}),!o){for(o=!0;n.length>0;){if((t.capacity?r>0:r>=0)&&n.length>0){let{cost:e,resolve:i,reject:s}=n[0];e=e||t.defaultCost,r>=Math.min(e,t.capacity)&&(r-=e,n.shift(),i())}const o=a(),c=o-i;i=o,r=Math.min(t.capacity,r+c*(1/e)),await s(t.delay)}o=!1}}catch(e){h(e)}})},t,{configure:i=>e(Object.assign({},t,i))})}}},function(e,t,i){"use strict";const{ROUND_UP:s,ROUND_DOWN:a}=i(2),{NotSupported:r}=i(0),o=e=>{const t=e.slice(0,-1),i=e.slice(-1);let s=void 0;if("y"===i)s=31536e3;else if("M"===i)s=2592e3;else if("w"===i)s=604800;else if("d"===i)s=86400;else if("h"===i)s=3600;else if("m"===i)s=60;else{if("s"!==i)throw new r("timeframe unit "+i+" is not supported");s=1}return t*s};e.exports={aggregate(e){const t={};for(let i=0;i<e.length;i++){const[s,a]=e[i];a>0&&(t[s]=(t[s]||0)+a)}return Object.keys(t).map(e=>[parseFloat(e),parseFloat(t[e])])},parseTimeframe:o,roundTimeframe:(e,t,i=a)=>{const r=1e3*o(e);return t-t%r+(i===s?r:0)},buildOHLCVC:(e,t="1m",i=-1/0,s=1/0)=>{const a=1e3*o(t),r=[],[n,,c,d,h,l,u]=[0,1,2,3,4,5,6],p=Math.min(e.length-1,s);for(let t=0;t<=p;t++){const s=e[t];if(s.timestamp<i)continue;const o=Math.floor(s.timestamp/a)*a,p=r.length-1;-1===p||o>=r[p][n]+a?r.push([o,s.price,s.price,s.price,s.price,s.amount,1]):(r[p][c]=Math.max(r[p][c],s.price),r[p][d]=Math.min(r[p][d],s.price),r[p][h]=s.price,r[p][l]+=s.amount,r[p][u]++)}return r},ROUND_UP:s,ROUND_DOWN:a,implodeParams:(e,t)=>{if(!Array.isArray(t)){const i=Object.keys(t);for(let s=0;s<i.length;s++){const a=i[s];Array.isArray(t[a])||(e=e.replace("{"+a+"}",t[a]))}}return e},extractParams:e=>{const t=/{([\w-]+)}/g,i=[];let s=t.exec(e);for(;s;)i.push(s[1]),s=t.exec(e);return i},vwap:function(e,t){return void 0!==e&&void 0!==t&&e>0?t/e:void 0}}},function(e,t,i){"use strict";const s=i(1),{ArgumentsRequired:a,ExchangeError:r,BadSymbol:o,InvalidOrder:n,PermissionDenied:c,InvalidAddress:d,AuthenticationError:h,InvalidNonce:l,BadRequest:u,InsufficientFunds:p,OrderNotFound:f}=i(0),{TRUNCATE:m}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"aofex",name:"AOFEX",countries:["GB"],rateLimit:1e3,has:{fetchMarkets:!0,fetchCurrencies:!1,fetchOrderBook:!0,fetchTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchOHLCV:!0,fetchBalance:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchClosedOrder:!0,fetchOrderTrades:!0,fetchTradingFee:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","6h":"6hour","12h":"12hour","1d":"1day","1w":"1week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/77670271-056d1080-6f97-11ea-9ac2-4268e9ed0c1f.jpg",api:{public:"https://openapi.aofex.com/openApi",private:"https://openapi.aofex.com/openApi"},www:"https://aofex.com",doc:"https://aofex.zendesk.com/hc/en-us/sections/360005576574-API",fees:"https://aofex.zendesk.com/hc/en-us/articles/360025814934-Fees-on-AOFEX",referral:"https://aofex.com/#/register?key=9763840"},api:{public:{get:["market/symbols","market/trade","market/depth","market/kline","market/precision","market/24kline","market/gears_depth","market/detail"]},private:{get:["entrust/currentList","entrust/historyList","entrust/rate","wallet/list","entrust/detail"],post:["entrust/add","entrust/cancel"]}},fees:{trading:{maker:.0019,taker:.002}},exceptions:{exact:{20001:r,20401:c,20500:r,20501:o,20502:r,20503:r,20504:p,20505:u,20506:h,20507:r,20508:d,20509:p,20510:n,20511:n,20512:n,20513:n,20514:n,20515:n,20516:n,20517:n,50518:n,20519:l,20520:l,20521:u,20522:r,20523:h,20524:c,20525:h,20526:c,20527:c,20528:c,20529:h,20530:c},broad:{}},options:{fetchBalance:{show_all:"0"}}})}async fetchMarkets(e={}){let t=await this.publicGetMarketSymbols(e),i=await this.publicGetMarketPrecision();i=this.safeValue(i,"result",{}),t=this.safeValue(t,"result",[]);const s=[];for(let e=0;e<t.length;e++){const a=t[e],r=this.safeString(a,"symbol"),o=this.safeString(a,"base_currency"),n=this.safeString(a,"quote_currency"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=c+"/"+d,l=this.safeInteger(a,"id"),u=this.safeValue(i,r,{}),p=this.safeFloat(a,"maker_fee"),f=this.safeFloat(a,"taker_fee");s.push({id:r,numericId:l,symbol:h,baseId:o,quoteId:n,base:c,quote:d,active:void 0,maker:p/1e3,taker:f/1e3,precision:{amount:this.safeInteger(u,"amount"),price:this.safeInteger(u,"price")},limits:{amount:{min:this.safeFloat(a,"min_size"),max:this.safeFloat(a,"max_size")},price:{min:this.safeFloat(a,"min_price"),max:this.safeFloat(a,"max_price")},cost:{min:void 0,max:void 0}},info:a})}return s}parseOHLCV(e,t){return[this.safeTimestamp(e,"id"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"amount")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e);void 0===s&&(s=150);const o={symbol:r.id,period:this.timeframes[t],size:s},n=await this.publicGetMarketKline(this.extend(o,a)),c=this.safeValue(n,"result",{}),d=this.safeValue(c,"data",[]);return this.parseOHLCVs(d,r,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeValue(this.options,"fetchBalance",{}),i={show_all:this.safeValue(t,"show_all","0")},s=await this.privateGetWalletList(this.extend(i,e)),a={info:s},r=this.safeValue(s,"result",[]);for(let e=0;e<r.length;e++){const t=r[e],i=this.safeString(t,"currency"),s=this.safeCurrencyCode(i),o=this.account();o.free=this.safeFloat(t,"available"),o.used=this.safeFloat(t,"frozen"),a[s]=o}return this.parseBalance(a)}async fetchTradingFee(e,t={}){await this.loadMarkets();const i={symbol:this.market(e).id},s=await this.privateGetEntrustRate(this.extend(i,t)),a=this.safeValue(s,"result",{});return{info:s,symbol:e,maker:this.safeFloat(a,"fromFee"),taker:this.safeFloat(a,"toFee")}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)},a=await this.publicGetMarketDepth(this.extend(s,i)),r=this.safeValue(a,"result",{}),o=this.safeInteger(r,"ts");return this.parseOrderBook(r,o)}parseTicker(e,t){const i=this.safeTimestamp(e,"id");let s=void 0;t&&(s=t.symbol);const a=this.safeFloat(e,"open"),r=this.safeFloat(e,"close");let o=void 0;o=void 0!==s?parseFloat(this.priceToPrecision(s,r-a)):r-a;const n=this.sum(r,a)/2,c=o/a*100,d=this.safeFloat(e,"amount"),h=this.safeFloat(e,"vol");let l=this.vwap(d,h);return void 0!==l&&(l=parseFloat(this.priceToPrecision(s,l))),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:l,open:a,close:r,last:r,previousClose:void 0,change:o,percentage:c,average:n,baseVolume:d,quoteVolume:h,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e);i.symbol=t.join(",")}const s=await this.publicGetMarket24kline(this.extend(i,t)),a=this.safeValue(s,"result",[]),r={};for(let e=0;e<a.length;e++){const t=this.safeString(a[e],"symbol"),i=this.safeMarket(t,void 0,"-"),s=i.symbol,o=this.safeValue(a[e],"data",{});r[s]=this.parseTicker(o,i)}return this.filterByArray(r,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.publicGetMarketDetail(this.extend(s,t)),r=this.safeValue(a,"result",{});return this.parseTicker(r,i)}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"ctime")),a=this.safeTimestamp(e,"ts",s)-288e5;let r=void 0;void 0===r&&void 0!==t&&(r=t.symbol);const o=this.safeString(e,"direction"),n=this.safeFloat(e,"price"),c=this.safeFloat2(e,"amount","number");let d=this.safeFloat(e,"total_price");void 0===d&&void 0!==n&&void 0!==c&&(d=n*c);const h=this.safeFloat(e,"fee");let l=void 0;if(void 0!==h){let e=void 0;void 0!==t&&("buy"===o?e=t.base:"sell"===o&&(e=t.quote)),l={cost:h,currency:e}}return{id:i,info:e,timestamp:a,datetime:this.iso8601(a),symbol:r,order:void 0,type:void 0,side:o,takerOrMaker:void 0,price:n,amount:c,cost:d,fee:l}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id},o=await this.publicGetMarketTrade(this.extend(r,s)),n=this.safeValue(o,"result",{}),c=this.safeValue(n,"data",[]);return this.parseTrades(c,a,t,i)}parseOrderStatus(e){return this.safeString({1:"open",2:"open",3:"closed",4:"canceled",5:"canceled",6:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"order_sn"),s=this.safeString(e,"status"),a=this.parseOrderStatus(s),r=this.safeString(e,"symbol");t=this.safeMarket(r,t,"-");let o=this.parse8601(this.safeString(e,"ctime"));void 0!==o&&(o-=288e5);const n="2"===this.safeString(e,"type")?"limit":"market",c=this.safeString(e,"side");let d=void 0,h=void 0,l=void 0,u=void 0;const p=this.safeFloat(e,"number"),f=this.safeFloat(e,"total_price");"limit"===n?(l=p,h=this.safeFloat(e,"price")):(u=this.safeFloat(e,"deal_price"),l="buy"===c?this.safeFloat(e,"deal_number"):p);let m=void 0,v=void 0,y=void 0,g=void 0,b=void 0,w=void 0;if("1"!==s&&"6"!==s){const s=this.safeValue(e,"trades");if(void 0!==s){for(let e=0;e<s.length;e++)s[e].direction=c;v=this.parseTrades(s,t,void 0,void 0,{symbol:t.symbol,order:i,side:c,type:n});if(v.length>0){const e=v[0];g=e.fee.cost,w=e.timestamp,y=e.amount,d=e.cost;for(let e=1;e<v.length;e++){const t=v[e];g=this.sum(g,t.fee.cost),y=this.sum(y,t.amount),d=this.sum(d,t.cost),w=Math.max(w,t.timestamp)}void 0!==l&&(y=Math.min(l,y)),y>0&&(u=d/y)}if(void 0!==g){m={cost:g,currency:"buy"===c?t.base:t.quote}}}}else y=0,d=0;return void 0===d&&("limit"===n?d=f:"buy"===c&&(d=p)),void 0===y&&"limit"===n&&"3"===s&&(y=l),void 0!==y&&void 0!==l&&(b=Math.max(l-y,0)),{info:e,id:i,clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:w,status:a,symbol:t.symbol,type:n,timeInForce:void 0,side:c,price:h,stopPrice:void 0,cost:d,average:u,amount:l,filled:y,remaining:b,trades:v,fee:m}}async fetchClosedOrder(e,t,i={}){await this.loadMarkets();const s={order_sn:e},a=await this.privateGetEntrustDetail(this.extend(s,i)),r=this.safeValue(a,"result",{}),o=this.safeValue(r,"trades",[]),n=this.safeValue(r,"entrust",{});return n.trades=o,this.parseOrder(n)}async fetchOrderTrades(e,t,i,s,a={}){const r=await this.fetchClosedOrder(e,t,a);return this.safeValue(r,"trades",[])}async fetchOrdersWithMethod(e,t,i,s,a={}){await this.loadMarkets();const r={direct:"prev"};let o=void 0;void 0!==t&&(o=this.market(t),r.symbol=o.id),void 0!==s&&(r.limit=s);const n=await this[e](this.extend(r,a)),c=this.safeValue(n,"result",[]);return this.parseOrders(c,o,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("privateGetEntrustCurrentList",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("privateGetEntrustHistoryList",e,t,i,s)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),c=i+"-"+t,d={symbol:o.id,type:c};if("limit"===t)d.amount=this.amountToPrecision(e,s),d.price=this.priceToPrecision(e,a);else if("market"===t)if("buy"===i){let e=s;if(this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){if(void 0===a)throw new n(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument");e=s*a}const t=o.precision.price;d.amount=this.decimalToPrecision(e,m,t,this.precisionMode)}else d.amount=this.amountToPrecision(e,s);const h=await this.privatePostEntrustAdd(this.extend(d,r)),l=this.safeValue(h,"result",{}),u=this.parseOrder(l,o),p=this.milliseconds();return this.extend(u,{timestamp:p,datetime:this.iso8601(p),amount:s,price:a,type:t,side:i})}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_ids:e},a=await this.privatePostEntrustCancel(this.extend(s,i)),r=this.safeValue(a,"result",{}),o=this.safeValue(r,"success",[]);if(!this.inArray(e,o))throw new f(this.id+" order id "+e+" not found in successfully canceled orders: "+this.json(a));return{info:a,id:e,timestamp:void 0,datetime:this.iso8601(void 0),lastTradeTimestamp:void 0,status:"canceled",symbol:t,type:void 0,side:void 0,price:void 0,cost:void 0,average:void 0,amount:void 0,filled:void 0,remaining:void 0,trades:void 0,fee:void 0,clientOrderId:void 0}}async cancelAllOrders(e,t={}){if(void 0===e)throw new a(this.id+" cancelAllOrders() requires a symbol argument");await this.loadMarkets();const i={symbol:this.market(e).id};return await this.privatePostEntrustCancel(this.extend(i,t))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t]+"/"+e,n=Object.keys(s);const c=n.length;if("public"===t)c>0&&(o+="?"+this.urlencode(s));else{const e=this.nonce().toString()+"_"+this.uuid().slice(0,5),t={};t[this.apiKey]=this.apiKey,t[this.secret]=this.secret,t[e]=e;for(let e=0;e<c;e++){const i=n[e];t[i]=i+"="+s[i]}const d=this.keysort(t);let h="";n=Object.keys(d);for(let e=0;e<n.length;e++){h+=d[n[e]]}const l=this.hash(this.encode(h),"sha1");a={Nonce:e,Token:this.apiKey,Signature:l},"POST"===i?(a["Content-Type"]="application/x-www-form-urlencoded",c>0&&(r=this.urlencode(s))):c>0&&(o+="?"+this.urlencode(s))}return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,o,n,c,d){if(void 0===n)return;const h=this.safeString(n,"errno");if(void 0!==h&&"0"!==h){const e=this.safeString(n,"errmsg"),t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,h,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new r(t)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,AuthenticationError:o,InsufficientFunds:n,InvalidOrder:c,OrderNotFound:d}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bcex",name:"BCEX",countries:["CN","HK"],version:"1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:"emulated",fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0,fetchTradingLimits:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/77231516-851c6900-6bac-11ea-8fd6-ee5c23eddbd4.jpg",api:"https://www.bcex.top",www:"https://www.bcex.top",doc:"https://github.com/BCEX-TECHNOLOGY-LIMITED/API_Docs/wiki/Interface",fees:"https://bcex.udesk.cn/hc/articles/57085",referral:"https://www.bcex.top/register?invite_code=758978&lang=en"},status:{status:"error",updated:void 0,eta:void 0,url:void 0},api:{public:{get:["Api_Market/getPriceList","Api_Order/ticker","Api_Order/depth","Api_Market/getCoinTrade","Api_Order/marketOrder"],post:["Api_Market/getPriceList","Api_Order/ticker","Api_Order/depth","Api_Market/getCoinTrade","Api_Order/marketOrder"]},private:{post:["Api_Order/cancel","Api_Order/coinTrust","Api_Order/orderList","Api_Order/orderInfo","Api_Order/tradeList","Api_Order/trustList","Api_User/userBalance"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{ckusd:0,other:5e-4},deposit:{}}},exceptions:{",":a,"":o,"":n,"btc":n,"":c,"":d},commonCurrencies:{UNI:"UNI COIN",PNT:"Penta"},options:{limits:{"AFC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:6,max:12e4}}},"AFC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:6,max:12e4}}},"AFT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:15,max:3e5}}},"AICC/CNET":{precision:{amount:2,price:2},limits:{amount:{min:5,max:5e4}}},"AIDOC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:5,max:1e5}}},"AISI/ETH":{precision:{amount:4,price:2},limits:{amount:{min:.001,max:500}}},"AIT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:20,max:4e5}}},"ANS/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.1,max:500}}},"ANS/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.1,max:1e3}}},"ARC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:60,max:6e5}}},"AXF/CNET":{precision:{amount:2,price:4},limits:{amount:{min:100,max:1e6}}},"BASH/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:250,max:3e6}}},"BATT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:60,max:15e5}}},"BCD/BTC":{precision:{amount:2,price:8},limits:{amount:{min:.3,max:7e3}}},"BHPC/BTC":{precision:{amount:2,price:8},limits:{amount:{min:2,max:7e4}}},"BHPC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:2,max:6e4}}},"BOPO/BTC":{precision:{amount:2,price:8},limits:{amount:{min:100,max:2e6}}},"BOPO/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:100,max:1e7}}},"BTC/CKUSD":{precision:{amount:4,price:2},limits:{amount:{min:.001,max:10}}},"BTC/CNET":{precision:{amount:4,price:2},limits:{amount:{min:5e-4,max:5}}},"BTC/USDT":{precision:{amount:4,price:2},limits:{amount:{min:2e-4,max:4}}},"BTE/CNET":{precision:{amount:2,price:4},limits:{amount:{min:25,max:25e4}}},"BU/ETH":{precision:{amount:2,price:8},limits:{amount:{min:20,max:4e5}}},"CIC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:3e3,max:3e7}}},"CIT/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:4,max:4e4}}},"CIT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:4,max:4e4}}},"CMT/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:5,max:25e5}}},"CNET/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:12,max:12e4}}},"CNMC/BTC":{precision:{amount:2,price:8},limits:{amount:{min:4,max:5e4}}},"CTC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:5,max:55e4}}},"CZR/ETH":{precision:{amount:2,price:8},limits:{amount:{min:12,max:5e5}}},"DCON/ETH":{precision:{amount:2,price:8},limits:{amount:{min:8,max:3e5}}},"DCT/BTC":{precision:{amount:4,price:8},limits:{amount:{min:2,max:4e4}}},"DCT/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:2,max:2e3}}},"DOGE/BTC":{precision:{amount:4,price:8},limits:{amount:{min:3e3,max:14e6}}},"DOGE/CKUSD":{precision:{amount:2,price:6},limits:{amount:{min:500,max:2e6}}},"DRCT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:16,max:19e4}}},"ELA/BTC":{precision:{amount:2,price:8},limits:{amount:{min:.02,max:500}}},"ELF/BTC":{precision:{amount:2,price:8},limits:{amount:{min:.1,max:1e5}}},"ELF/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:.01,max:1e5}}},"EOS/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.5,max:5e3}}},"EOS/CNET":{precision:{amount:2,price:2},limits:{amount:{min:2.5,max:3e4}}},"EOS/ETH":{precision:{amount:2,price:8},limits:{amount:{min:.18,max:1800}}},"ETC/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.2,max:2500}}},"ETC/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.2,max:2500}}},"ETF/ETH":{precision:{amount:2,price:8},limits:{amount:{min:7,max:15e4}}},"ETH/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.015,max:100}}},"ETH/CKUSD":{precision:{amount:4,price:4},limits:{amount:{min:.005,max:100}}},"ETH/USDT":{precision:{amount:4,price:2},limits:{amount:{min:.005,max:100}}},"FCT/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.24,max:1e3}}},"FCT/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.24,max:1e3}}},"GAME/CNET":{precision:{amount:2,price:2},limits:{amount:{min:1,max:1e4}}},"GOOC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:200,max:2e6}}},"GP/CNET":{precision:{amount:2,price:4},limits:{amount:{min:600,max:6e6}}},"HSC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:1e3,max:2e7}}},"IFISH/ETH":{precision:{amount:2,price:8},limits:{amount:{min:300,max:8e6}}},"IIC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:50,max:4e6}}},"IMOS/ETH":{precision:{amount:2,price:8},limits:{amount:{min:15,max:3e5}}},"JC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:300,max:3e6}}},"LBTC/BTC":{precision:{amount:2,price:8},limits:{amount:{min:.1,max:3e3}}},"LEC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:500,max:5e6}}},"LKY/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:10,max:7e4}}},"LKY/ETH":{precision:{amount:2,price:8},limits:{amount:{min:10,max:1e5}}},"LMC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:25,max:25e4}}},"LSK/CNET":{precision:{amount:2,price:2},limits:{amount:{min:.3,max:3e3}}},"LTC/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.01,max:500}}},"LTC/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.01,max:500}}},"LTC/USDT":{precision:{amount:4,price:2},limits:{amount:{min:.02,max:450}}},"MC/CNET":{precision:{amount:2,price:6},limits:{amount:{min:1e4,max:1e8}}},"MCC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:30,max:35e4}}},"MOC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:25,max:6e5}}},"MRYC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:300,max:3e6}}},"MT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:200,max:6e6}}},"MXI/CNET":{precision:{amount:2,price:6},limits:{amount:{min:5e3,max:6e7}}},"NAI/ETH":{precision:{amount:2,price:8},limits:{amount:{min:10,max:1e5}}},"NAS/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.2,max:15e3}}},"NAS/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.5,max:5e3}}},"NEWOS/ETH":{precision:{amount:2,price:8},limits:{amount:{min:65,max:7e5}}},"NKN/ETH":{precision:{amount:2,price:8},limits:{amount:{min:3,max:35e4}}},"NTK/ETH":{precision:{amount:2,price:8},limits:{amount:{min:2,max:3e4}}},"ONT/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:.2,max:2e3}}},"ONT/ETH":{precision:{amount:3,price:8},limits:{amount:{min:.01,max:1e3}}},"PNT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:80,max:8e5}}},"PST/ETH":{precision:{amount:2,price:8},limits:{amount:{min:5,max:1e5}}},"PTT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:450,max:1e7}}},"QTUM/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.4,max:2800}}},"QTUM/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.1,max:1e3}}},"RATING/ETH":{precision:{amount:2,price:8},limits:{amount:{min:500,max:1e7}}},"RHC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:1e3,max:1e7}}},"SDA/ETH":{precision:{amount:2,price:8},limits:{amount:{min:20,max:5e5}}},"SDD/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:10,max:1e5}}},"SHC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:250,max:25e5}}},"SHE/ETH":{precision:{amount:2,price:8},limits:{amount:{min:100,max:5e6}}},"SMC/CNET":{precision:{amount:2,price:6},limits:{amount:{min:1e3,max:1e7}}},"SOP/ETH":{precision:{amount:2,price:8},limits:{amount:{min:50,max:1e6}}},"TAC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:35,max:8e5}}},"TIP/ETH":{precision:{amount:2,price:8},limits:{amount:{min:7,max:2e5}}},"TKT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:40,max:4e5}}},"TLC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:500,max:1e7}}},"TNC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:10,max:11e4}}},"TUB/ETH":{precision:{amount:2,price:8},limits:{amount:{min:200,max:8e6}}},"UC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:100,max:3e6}}},"UDB/CNET":{precision:{amount:2,price:6},limits:{amount:{min:2e3,max:4e7}}},"UIC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:5,max:15e4}}},"VAAC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:10,max:25e4}}},"VPN/CNET":{precision:{amount:2,price:4},limits:{amount:{min:200,max:2e6}}},"VSC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:30,max:65e4}}},"WAVES/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:.15,max:1500}}},"WDNA/ETH":{precision:{amount:2,price:8},limits:{amount:{min:100,max:25e4}}},"WIC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:3,max:3e4}}},"XAS/CNET":{precision:{amount:2,price:2},limits:{amount:{min:2.5,max:25e3}}},"XLM/BTC":{precision:{amount:4,price:8},limits:{amount:{min:10,max:3e5}}},"XLM/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:1,max:3e5}}},"XLM/USDT":{precision:{amount:2,price:4},limits:{amount:{min:5,max:15e4}}},"XRP/BTC":{precision:{amount:4,price:8},limits:{amount:{min:24,max:1e5}}},"XRP/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:5,max:5e4}}},"YBCT/BTC":{precision:{amount:4,price:8},limits:{amount:{min:15,max:2e5}}},"YBCT/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:10,max:2e5}}},"YBY/CNET":{precision:{amount:2,price:6},limits:{amount:{min:25e3,max:25e7}}},"ZEC/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.02,max:100}}},"ZEC/CKUSD":{precision:{amount:4,price:2},limits:{amount:{min:.02,max:100}}}}}})}async fetchTradingLimits(e,t={}){await this.loadMarkets(),void 0===e&&(e=this.symbols);const i={};for(let s=0;s<e.length;s++){const a=e[s];i[a]=await this.fetchTradingLimitsById(this.marketId(a),t)}return i}async fetchTradingLimitsById(e,t={}){const i={symbol:e},s=await this.publicPostApiOrderTicker(this.extend(i,t));return this.parseTradingLimits(this.safeValue(s,"data",{}))}parseTradingLimits(e,t,i={}){return{info:e,precision:{amount:this.safeInteger(e,"number_float"),price:this.safeInteger(e,"price_float")},limits:{amount:{min:this.safeFloat(e,"min_trade"),max:this.safeFloat(e,"max_trade")}}}}async fetchMarkets(e={}){const t=await this.publicGetApiMarketGetPriceList(e),i=[],s=Object.keys(t);for(let e=0;e<s.length;e++){const a=t[s[e]];for(let e=0;e<a.length;e++){const t=a[e],s=this.safeString(t,"coin_from"),r=this.safeString(t,"coin_to");let o=s.toUpperCase(),n=r.toUpperCase();o=this.safeCurrencyCode(o),n=this.safeCurrencyCode(n);const c=s+"2"+r,d=o+"/"+n,h=!0,l=this.safeValue(this.options.limits,d,{});i.push(this.extend({id:c,symbol:d,base:o,quote:n,baseId:s,quoteId:r,active:h,precision:{amount:void 0,price:void 0},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:t},l))}}return i}parseTrade(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.safeTimestamp2(e,"date","created"),a=this.safeString(e,"tid"),r=this.safeString(e,"order_id"),o=this.safeFloat2(e,"number","amount"),n=this.safeFloat(e,"price");let c=void 0;void 0!==n&&void 0!==o&&(c=o*n);let d=this.safeString(e,"side");return"sale"===d&&(d="sell"),{info:e,id:a,timestamp:s,datetime:this.iso8601(s),symbol:i,type:void 0,side:d,price:n,amount:o,cost:c,order:r,fee:void 0,takerOrMaker:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a={symbol:this.marketId(e)};void 0!==i&&(a.limit=i);const r=this.market(e),o=await this.publicPostApiOrderMarketOrder(this.extend(a,s));return this.parseTrades(o.data,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostApiUserUserBalance(e),i=this.safeValue(t,"data");let s=Object.keys(i);const a={};for(let e=0;e<s.length;e++){const t=s[e],r=this.safeFloat(i,t),o=t.split("_"),n=o[0],c=o[1],d=this.safeCurrencyCode(n);d in a||(a[d]=this.account()),"lock"===c?a[d].used=parseFloat(r):a[d].free=parseFloat(r)}s=Object.keys(a);for(let e=0;e<s.length;e++){const t=s[e],i=this.sum(a[t].used,a[t].free);a[t].total=i}return a.info=i,this.parseBalance(a)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.markets[e],s={part:i.quoteId,coin:i.baseId},a=await this.publicPostApiMarketGetCoinTrade(this.extend(s,t)),r=this.milliseconds();return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(a,"max"),low:this.safeFloat(a,"min"),bid:this.safeFloat(a,"buy"),bidVolume:void 0,ask:this.safeFloat(a,"sale"),askVolume:void 0,vwap:void 0,open:void 0,close:this.safeFloat(a,"price"),last:this.safeFloat(a,"price"),previousClose:void 0,change:void 0,percentage:this.safeFloat(a,"change_24h"),average:void 0,baseVolume:this.safeFloat(a,"volume_24h"),quoteVolume:void 0,info:a}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)},a=await this.publicPostApiOrderDepth(this.extend(s,i)),r=this.safeValue(a,"data"),o=this.safeTimestamp(r,"date");return this.parseOrderBook(r,o)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id},o=await this.privatePostApiOrderOrderList(this.extend(r,s));return this.parseTrades(o.data,a,t,i)}parseOrderStatus(e){return this.safeString({0:"open",1:"open",2:"closed",3:"canceled"},e,e)}async fetchOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" fetchOrder requires a `symbol` argument");await this.loadMarkets();const s={symbol:this.marketId(t),trust_id:e},a=await this.privatePostApiOrderOrderInfo(this.extend(s,i)),o=this.safeValue(a,"data"),n=this.safeTimestamp(o,"created"),c=this.parseOrderStatus(this.safeString(o,"status"));let d=this.safeString(o,"flag");return"sale"===d&&(d="sell"),{info:o,id:e,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:t,type:void 0,side:d,price:this.safeFloat(o,"price"),cost:void 0,average:this.safeFloat(o,"avg_price"),amount:this.safeFloat(o,"number"),filled:this.safeFloat(o,"numberdeal"),remaining:this.safeFloat(o,"numberover"),status:c,fee:void 0,clientOrderId:void 0,trades:void 0}}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeTimestamp(e,"datetime");let a=void 0;void 0!==t&&(a=t.symbol);let r=this.safeString(e,"type");"sale"===r&&(r="sell");const o=this.safeFloat(e,"price"),n=this.safeFloat(e,"avg_price"),c=this.safeFloat(e,"amount"),d=this.safeFloat(e,"amount_outstanding"),h=c-d,l=this.parseOrderStatus(this.safeString(e,"status")),u=h*o;return{info:e,id:i,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:a,type:void 0,timeInForce:void 0,side:r,price:o,stopPrice:void 0,cost:u,average:n,amount:c,filled:h,remaining:d,status:l,fee:void 0,trades:void 0}}async fetchOrdersByType(e,t,i,s,a={}){await this.loadMarkets();const r={type:e};let o=void 0;void 0!==t&&(o=this.market(t),r.symbol=o.id);const n=await this.privatePostApiOrderTradeList(this.extend(r,a));return"data"in n?this.parseOrders(n.data,o,i,s):[]}async fetchOpenOrders(e,t,i,s={}){return this.fetchOrdersByType("open",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){const a=await this.fetchOrders(e,t,i,s);return this.filterBy(a,"status","closed")}async fetchOrders(e,t,i,s={}){return this.fetchOrdersByType("all",e,t,i,s)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o={symbol:this.marketId(e),type:i,price:this.priceToPrecision(e,a),number:this.amountToPrecision(e,s)},n=await this.privatePostApiOrderCoinTrust(this.extend(o,r)),c=this.safeValue(n,"data",{});return{info:n,id:this.safeString(c,"order_id")}}async cancelOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" cancelOrder requires a `symbol` argument");await this.loadMarkets();const s={};return void 0!==t&&(s.symbol=this.marketId(t)),void 0!==e&&(s.order_id=e),await this.privatePostApiOrderCancel(this.extend(s,i))}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.urlencode({api_key:this.apiKey});Object.keys(n).length&&(e+="&"+this.urlencode(this.keysort(n)));const t=e+"&secret_key="+this.secret;r=e+"&sign="+this.hash(this.encode(t)),a={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,d,h){if(void 0===n)return;const l=this.safeValue(n,"code");if(void 0!==l&&0!==l){const e=this.safeString(n,"msg"),t=this.id+" "+e;throw this.throwExactlyMatchedException(this.exceptions,e,t),e.indexOf("")>=0?new c(t):new a(t)}}}},function(e,t,i){"use strict";const s=i(44);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bequant",name:"Bequant",countries:["MT"],pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/55248342-a75dfe00-525a-11e9-8aa2-05e9dca943c6.jpg",api:{public:"https://api.bequant.io",private:"https://api.bequant.io"},www:"https://bequant.io",doc:["https://api.bequant.io/"],fees:["https://bequant.io/fees-and-limits"],referral:"https://bequant.io"}})}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,AccountSuspended:r,ArgumentsRequired:o,AuthenticationError:n,DDoSProtection:c,ExchangeNotAvailable:d,InvalidOrder:h,OrderNotFound:l,PermissionDenied:u,InsufficientFunds:p,BadSymbol:f}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bibox",name:"Bibox",countries:["CN","US","KR"],version:"v1",hostname:"bibox365.com",has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDeposits:!0,fetchDepositAddress:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0,publicAPI:!1,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"day","1w":"week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/77257418-3262b000-6c85-11ea-8fb8-20bdf20b3592.jpg",api:"https://api.{hostname}",www:"https://www.bibox365.com",doc:["https://biboxcom.github.io/en/"],fees:"https://bibox.zendesk.com/hc/en-us/articles/360002336133",referral:"https://w2.bibox365.com/login/register?invite_code=05Kj3I"},api:{public:{post:["mdata"],get:["cquery","mdata"]},private:{post:["cquery","ctrade","user","orderpending","transfer"]},v2private:{post:["assets/transfer/spot"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:8e-4},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{2011:r,2015:n,2021:p,2027:p,2033:l,2067:h,2068:h,2085:h,3012:n,3016:f,3024:u,3025:n,4e3:d,4003:c},commonCurrencies:{BOX:"DefiBox",BPT:"BlockPool Token",KEY:"Bihu",MTC:"MTC Mesh Network",PAI:"PCHAIN"}})}async fetchMarkets(e={}){const t=await this.publicGetMdata(this.extend({cmd:"marketAll"},e)),i=this.safeValue(t,"result"),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeInteger(t,"id"),r=this.safeString(t,"coin_symbol"),o=this.safeString(t,"currency_symbol"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o),d=n+"/"+c,h=r+"_"+o,l={amount:4,price:8};s.push({id:h,numericId:a,symbol:d,base:n,quote:c,baseId:r,quoteId:o,active:!0,info:t,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:void 0},price:{min:Math.pow(10,-l.price),max:void 0}}})}return s}parseTicker(e,t){const i=this.safeInteger(e,"timestamp");let s=void 0;if(void 0!==t)s=t.symbol;else{const t=this.safeString(e,"coin_symbol"),i=this.safeString(e,"currency_symbol");s=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}const a=this.safeFloat(e,"last"),r=this.safeFloat(e,"change"),o=this.safeFloat2(e,"vol","vol24H");let n=void 0;void 0!==a&&void 0!==r&&(n=a-r);let c=this.safeString(e,"percent");return void 0!==c&&(c=c.replace("%",""),c=parseFloat(c)),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:n,close:a,last:a,previousClose:void 0,change:r,percentage:c,average:void 0,baseVolume:o,quoteVolume:this.safeFloat(e,"amount"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={cmd:"ticker",pair:i.id},a=await this.publicGetMdata(this.extend(s,t));return this.parseTicker(a.result,i)}parseTickers(e,t){const i=[];for(let s=0;s<e.length;s++){const a=this.parseTicker(e[s]);(void 0===t||this.inArray(a.symbol,t))&&i.push(a)}return i}async fetchTickers(e,t={}){const i=await this.publicGetMdata(this.extend({cmd:"marketAll"},t)),s=this.parseTickers(i.result,e),a=this.indexBy(s,"symbol");return this.filterByArray(a,"symbol",e)}parseTrade(e,t){const i=this.safeInteger2(e,"time","createdAt");let s=this.safeInteger2(e,"side","order_side");s=1===s?"buy":"sell";let a=void 0;if(void 0===t){let i=this.safeString(e,"pair");if(void 0===i){const t=this.safeString(e,"coin_symbol"),s=this.safeString(e,"currency_symbol");void 0!==t&&void 0!==s&&(i=t+"_"+s)}i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(a=t.symbol);let r=void 0;const o=this.safeFloat(e,"fee");let n=this.safeString(e,"fee_symbol");void 0!==n&&(n=n in this.currencies_by_id?this.currencies_by_id[n].code:this.safeCurrencyCode(n));const c=this.safeFloat(e,"price"),d=this.safeFloat(e,"amount");let h=void 0;void 0!==c&&void 0!==d&&(h=c*d),void 0!==o&&(r={cost:-o,currency:n,rate:void 0});return{info:e,id:this.safeString(e,"id"),order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:a,type:"limit",takerOrMaker:void 0,side:s,price:c,amount:d,cost:h,fee:r}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={cmd:"deals",pair:a.id};void 0!==i&&(r.size=i);const o=await this.publicGetMdata(this.extend(r,s));return this.parseTrades(o.result,a,t,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={cmd:"depth",pair:this.market(e).id};void 0!==t&&(s.size=t);const a=await this.publicGetMdata(this.extend(s,i));return this.parseOrderBook(a.result,this.safeFloat(a.result,"update_time"),"bids","asks","price","volume")}parseOHLCV(e,t){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"vol")]}async fetchOHLCV(e,t="1m",i,s=1e3,a={}){await this.loadMarkets();const r=this.market(e),o={cmd:"kline",pair:r.id,period:this.timeframes[t],size:s},n=await this.publicGetMdata(this.extend(o,a)),c=this.safeValue(n,"result",[]);return this.parseOHLCVs(c,r,t,i,s)}async fetchCurrencies(e={}){if(!this.apiKey||!this.secret)throw new n(this.id+" fetchCurrencies is an authenticated endpoint, therefore it requires 'apiKey' and 'secret' credentials. If you don't need currency details, set exchange.has['fetchCurrencies'] = false before calling its methods.");const t=await this.privatePostTransfer(this.extend({cmd:"transfer/coinList",body:{}},e)),i=this.safeValue(t,"result"),s={};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"symbol"),r=t.name,o=this.safeCurrencyCode(a),n=8,c=this.safeValue(t,"enable_deposit"),d=this.safeValue(t,"enable_withdraw"),h=c&&d;s[o]={id:a,code:o,info:t,name:r,active:h,fee:void 0,precision:n,limits:{amount:{min:Math.pow(10,-n),max:Math.pow(10,n)},price:{min:Math.pow(10,-n),max:Math.pow(10,n)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,n)}}}}return s}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString(e,"type","assets");e=this.omit(e,"type");const i={cmd:"transfer/"+t,body:this.extend({select:1},e)},s=await this.privatePostTransfer(i),a=this.safeValue(s,"result"),r={info:a};let o=void 0;o="assets_list"in a?this.indexBy(a.assets_list,"coin_symbol"):a;const n=Object.keys(o);for(let e=0;e<n.length;e++){const t=n[e];let i=t.toUpperCase();i.indexOf("TOTAL_")>=0&&(i=i.slice(6)),i in this.currencies_by_id&&(i=this.currencies_by_id[i].code);const s=this.account();let a=o[t];"string"==typeof a?(a=parseFloat(a),s.free=a,s.used=0,s.total=a):(s.free=this.safeFloat(a,"balance"),s.used=this.safeFloat(a,"freeze")),r[i]=s}return this.parseBalance(r)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={page:1};void 0!==e&&(a=this.currency(e),r.symbol=a.id),r.size=void 0!==i?i:100;const o=await this.privatePostTransfer({cmd:"transfer/transferInList",body:this.extend(r,s)}),n=this.safeValue(o.result,"items",[]);for(let e=0;e<n.length;e++)n[e].type="deposit";return this.parseTransactions(n,a,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={page:1};void 0!==e&&(a=this.currency(e),r.symbol=a.id),r.size=void 0!==i?i:100;const o=await this.privatePostTransfer({cmd:"transfer/transferOutList",body:this.extend(r,s)}),n=this.safeValue(o.result,"items",[]);for(let e=0;e<n.length;e++)n[e].type="withdrawal";return this.parseTransactions(n,a,t,i)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"to_address"),a=this.safeString(e,"coin_symbol"),r=this.safeCurrencyCode(a,t),o=this.safeString(e,"createdAt");let n=this.safeString(e,"addr_remark");const c=this.safeString(e,"type"),d=this.parseTransactionStatusByType(this.safeString(e,"status"),c),h=this.safeFloat(e,"amount");let l=this.safeFloat(e,"fee");"deposit"===c&&(l=0,n=void 0);const u={cost:l,currency:r};return{info:e,id:i,txid:void 0,timestamp:o,datetime:this.iso8601(o),address:s,tag:n,type:c,amount:h,currency:r,status:d,updated:void 0,fee:u}}parseTransactionStatusByType(e,t){return this.safeString(this.safeValue({deposit:{1:"pending",2:"ok"},withdrawal:{0:"pending",3:"ok"}},t,{}),e,e)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n="limit"===t?2:1,c="buy"===i?1:2,d={cmd:"orderpending/trade",body:this.extend({pair:o.id,account_type:0,order_type:n,order_side:c,pay_bix:0,amount:s,price:a},r)},h=await this.privatePostOrderpending(d);return{info:h,id:this.safeString(h,"result")}}async cancelOrder(e,t,i={}){const s={cmd:"orderpending/cancelTrade",body:this.extend({orders_id:e},i)};return await this.privatePostOrderpending(s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={cmd:"orderpending/order",body:this.extend({id:e.toString(),account_type:0},i)},a=await this.privatePostOrderpending(s),r=this.safeValue(a,"result");if(this.isEmpty(r))throw new l(this.id+" order "+e+" not found");return this.parseOrder(r)}parseOrder(e,t){let i=void 0;if(void 0===t){let i=void 0;const s=this.safeString(e,"coin_symbol"),a=this.safeString(e,"currency_symbol");void 0!==s&&void 0!==a&&(i=s+"_"+a),i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(i=t.symbol);const s=1===e.order_type?"market":"limit",a=e.createdAt,r=this.safeFloat(e,"price"),o=this.safeFloat(e,"deal_price"),n=this.safeFloat(e,"deal_amount"),c=this.safeFloat(e,"amount");let d=this.safeFloat2(e,"deal_money","money"),h=void 0;void 0!==n&&(void 0!==c&&(h=c-n),void 0===d&&(d=r*n));const l=1===e.order_side?"buy":"sell",u=this.parseOrderStatus(this.safeString(e,"status")),p=this.safeString(e,"id"),f=this.safeFloat(e,"fee");let m=void 0;return void 0!==f&&(m={cost:f,currency:void 0}),d=d||parseFloat(r)*n,{info:e,id:p,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:i,type:s,timeInForce:void 0,side:l,price:r,stopPrice:void 0,amount:c,cost:d,average:o,filled:n,remaining:h,status:u,fee:m,trades:void 0}}parseOrderStatus(e){return this.safeString({1:"open",2:"open",3:"closed",4:"canceled",5:"canceled",6:"canceled"},e,e)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0,r=void 0;void 0!==e&&(a=this.market(e),r=a.id);const o=i||200,n={cmd:"orderpending/orderPendingList",body:this.extend({pair:r,account_type:0,page:1,size:o},s)},c=await this.privatePostOrderpending(n),d=this.safeValue(c.result,"items",[]);return this.parseOrders(d,a,t,i)}async fetchClosedOrders(e,t,i=200,s={}){if(void 0===e)throw new o(this.id+" fetchClosedOrders requires a `symbol` argument");await this.loadMarkets();const a=this.market(e),r={cmd:"orderpending/pendingHistoryList",body:this.extend({pair:a.id,account_type:0,page:1,size:i},s)},n=await this.privatePostOrderpending(r),c=this.safeValue(n.result,"items",[]);return this.parseOrders(c,a,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchMyTrades requires a `symbol` argument");await this.loadMarkets();const a=this.market(e),r=i||200,n={cmd:"orderpending/orderHistoryList",body:this.extend({pair:a.id,account_type:0,page:1,size:r,coin_symbol:a.baseId,currency_symbol:a.quoteId},s)},c=await this.privatePostOrderpending(n),d=this.safeValue(c.result,"items",[]);return this.parseTrades(d,a,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={cmd:"transfer/transferIn",body:this.extend({coin_symbol:i.id},t)},a=await this.privatePostTransfer(s),r=this.safeString(a,"result");let o=r,n=void 0;if(this.isJsonEncodedObject(r)){const e=JSON.parse(r);o=this.safeString(e,"account"),n=this.safeString(e,"memo")}return{currency:e,address:o,tag:n,info:a}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const o=this.currency(e);if(void 0===this.password&&!("trade_pwd"in r))throw new a(this.id+" withdraw() requires this.password set on the exchange instance or a trade_pwd parameter");if(!("totp_code"in r))throw new a(this.id+" withdraw() requires a totp_code parameter for 2FA authentication");const n={trade_pwd:this.password,coin_symbol:o.id,amount:t,addr:i};void 0!==s&&(n.address_remark=s);return{info:await this.privatePostTransfer({cmd:"transfer/transferOut",body:this.extend(n,r)}),id:void 0}}async fetchFundingFees(e,t={}){await this.loadMarkets();const i={},s={};void 0===e&&(e=Object.keys(this.currencies));for(let a=0;a<e.length;a++){const r=e[a],o=this.currency(r),n={cmd:"transfer/coinConfig",body:this.extend({coin_symbol:o.id},t)},c=await this.privatePostTransfer(n);s[r]=c,i[r]=this.safeFloat(c.result,"withdraw_fee")}return{info:s,withdraw:i,deposit:{}}}sign(e,t="public",i="GET",s={},a,r){let o=this.implodeParams(this.urls.api,{hostname:this.hostname})+"/"+this.version+"/"+e;const n=this.json([s]);if("public"===t)"GET"!==i?r={cmds:n}:Object.keys(s).length&&(o+="?"+this.urlencode(s));else if("v2private"===t){this.checkRequiredCredentials(),o=this.urls.api+"/v2/"+e;const t=this.json(s);r={body:t,apikey:this.apiKey,sign:this.hmac(this.encode(t),this.encode(this.secret),"md5")}}else this.checkRequiredCredentials(),r={cmds:n,apikey:this.apiKey,sign:this.hmac(this.encode(n),this.encode(this.secret),"md5")};return void 0!==r&&(r=this.json(r,{convertArraysToObjects:!0})),{url:o,method:i,body:r,headers:{"Content-Type":"application/json"}}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0!==n){if("error"in n){if("code"in n.error){const e=this.safeString(n.error,"code"),t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions,e,t),new a(t)}throw new a(this.id+" "+o)}if(!("result"in n))throw new a(this.id+" "+o)}}async request(e,t="public",i="GET",s={},a,r){const o=await this.fetch2(e,t,i,s,a,r);return"GET"===i?o:o.result[0]}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,AuthenticationError:o,OrderNotFound:n,InsufficientFunds:c,PermissionDenied:d,BadRequest:h,RateLimitExceeded:l,InvalidOrder:u}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bigone",name:"BigONE",countries:["CN"],version:"v3",rateLimit:1200,has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"min1","5m":"min5","15m":"min15","30m":"min30","1h":"hour1","3h":"hour3","4h":"hour4","6h":"hour6","12h":"hour12","1d":"day1","1w":"week1","1M":"month1"},hostname:"big.one",urls:{logo:"https://user-images.githubusercontent.com/1294454/69354403-1d532180-0c91-11ea-88ed-44c06cefdf87.jpg",api:{public:"https://{hostname}/api/v3",private:"https://{hostname}/api/v3/viewer"},www:"https://big.one",doc:"https://open.big.one/docs/api.html",fees:"https://bigone.zendesk.com/hc/en-us/articles/115001933374-BigONE-Fee-Policy",referral:"https://b1.run/users/new?code=D3LLBVFT"},api:{public:{get:["ping","asset_pairs","asset_pairs/{asset_pair_name}/depth","asset_pairs/{asset_pair_name}/trades","asset_pairs/{asset_pair_name}/ticker","asset_pairs/{asset_pair_name}/candles","asset_pairs/tickers"]},private:{get:["accounts","assets/{asset_symbol}/address","orders","orders/{id}","orders/multi","trades","withdrawals","deposits"],post:["orders","orders/{id}/cancel","orders/cancel","withdrawals"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:.001,ETH:.005,EOS:.01,ZEC:.003,LTC:.01,QTUM:.01,ETC:.01,GAS:0,BTS:1,GXS:.1,BITCNY:19}}},exceptions:{exact:{10001:h,10005:a,"Amount's scale must greater than AssetPair's base scale":u,10007:h,10011:a,10013:n,10014:c,10403:d,10429:l,40004:o,40103:o,40104:o,40301:d,40302:a,40601:a,40602:a,40603:c,40120:u,40121:u},broad:{}},commonCurrencies:{MBN:"Mobilian Coin",ONE:"BigONE Token"}})}async fetchMarkets(e={}){const t=await this.publicGetAssetPairs(e),i=this.safeValue(t,"data",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"name"),r=this.safeString(t,"id"),o=this.safeValue(t,"base_asset",{}),n=this.safeValue(t,"quote_asset",{}),c=this.safeString(o,"symbol"),d=this.safeString(n,"symbol"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),u=h+"/"+l,p={amount:this.safeInteger(t,"base_scale"),price:this.safeInteger(t,"quote_scale")},f=this.safeInteger(t,"min_quote_value"),m={id:a,uuid:r,symbol:u,base:h,quote:l,baseId:c,quoteId:d,active:!0,precision:p,limits:{amount:{min:Math.pow(10,-p.amount),max:void 0},price:{min:Math.pow(10,-p.price),max:void 0},cost:{min:f,max:void 0}},info:t};s.push(m)}return s}async loadMarkets(e=!1,t={}){const i=await super.loadMarkets(e,t);let s=this.safeValue(this.options,"marketsByUuid");if(void 0===s||e){s={};for(let e=0;e<this.symbols.length;e++){const t=this.symbols[e],i=this.markets[t];s[this.safeString(i,"uuid")]=i}this.options.marketsByUuid=s}return i}parseTicker(e,t){const i=this.safeString(e,"asset_pair_name"),s=this.safeSymbol(i,t,"-"),a=this.safeFloat(e,"close"),r=this.safeValue(e,"bid",{}),o=this.safeValue(e,"ask",{});return{symbol:s,timestamp:void 0,datetime:this.iso8601(void 0),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(r,"price"),bidVolume:this.safeFloat(r,"quantity"),ask:this.safeFloat(o,"price"),askVolume:this.safeFloat(o,"quantity"),vwap:void 0,open:this.safeFloat(e,"open"),close:a,last:a,previousClose:void 0,change:this.safeFloat(e,"daily_change"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={asset_pair_name:i.id},a=await this.publicGetAssetPairsAssetPairNameTicker(this.extend(s,t)),r=this.safeValue(a,"data",{});return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e);i.pair_names=t.join(",")}const s=await this.publicGetAssetPairsTickers(this.extend(i,t)),a=this.safeValue(s,"data",[]),r={};for(let e=0;e<a.length;e++){const t=this.parseTicker(a[e]);r[t.symbol]=t}return this.filterByArray(r,"symbol",e)}async fetchTime(e={}){const t=await this.publicGetPing(e),i=this.safeValue(t,"data",{}),s=this.safeInteger(i,"timestamp");return parseInt(s/1e6)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={asset_pair_name:this.market(e).id};void 0!==t&&(s.limit=t);const a=await this.publicGetAssetPairsAssetPairNameDepth(this.extend(s,i)),r=this.safeValue(a,"data",{});return this.parseOrderBook(r,void 0,"bids","asks","price","quantity")}parseTrade(e,t){const i=this.parse8601(this.safeString2(e,"created_at","inserted_at")),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),r=this.safeString(e,"asset_pair_name"),o=this.safeSymbol(r,t,"-");let n=void 0;void 0!==a&&void 0!==s&&(n=this.costToPrecision(o,s*a));let c=this.safeString(e,"side");const d=this.safeString(e,"taker_side");let h=void 0;void 0!==d&&void 0!==c&&"SELF_TRADING"!==c&&(h=d===c?"taker":"maker"),void 0===c?c="ASK"===d?"sell":"buy":"BID"===c?c="buy":"ASK"===c&&(c="sell");const l=this.safeString(e,"maker_order_id"),u=this.safeString(e,"taker_order_id");let p=void 0;void 0!==l?p=void 0!==u?[l,u]:l:void 0!==u&&(p=u);const f={id:this.safeString(e,"id"),timestamp:i,datetime:this.iso8601(i),symbol:o,order:p,type:"limit",side:c,takerOrMaker:h,price:s,amount:a,cost:parseFloat(n),info:e};let m=void 0,v=void 0;void 0!==t&&void 0!==h?"buy"===c?"maker"===h?(m=t.base,v=t.quote):(m=t.quote,v=t.base):"maker"===h?(m=t.quote,v=t.base):(m=t.base,v=t.quote):"SELF_TRADING"===c&&("BID"===d?(m=t.quote,v=t.base):"ASK"===d&&(m=t.base,v=t.quote));const y=this.safeFloat(e,"maker_fee"),g=this.safeFloat(e,"taker_fee");return void 0!==y?void 0!==g?f.fees=[{cost:y,currency:m},{cost:g,currency:v}]:f.fee={cost:y,currency:m}:f.fee=void 0!==g?{cost:g,currency:v}:void 0,f}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={asset_pair_name:a.id},o=await this.publicGetAssetPairsAssetPairNameTrades(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,a,t,i)}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e);void 0===s&&(s=100);const o={asset_pair_name:r.id,period:this.timeframes[t],limit:s};if(void 0!==i){const e=this.sum(i,s*this.parseTimeframe(t)*1e3);o.time=this.iso8601(e)}const n=await this.publicGetAssetPairsAssetPairNameCandles(this.extend(o,a)),c=this.safeValue(n,"data",[]);return this.parseOHLCVs(c,r,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccounts(e),i={info:t},s=this.safeValue(t,"data",[]);for(let e=0;e<s.length;e++){const t=s[e],a=this.safeString(t,"asset_symbol"),r=this.safeCurrencyCode(a),o=this.account();o.total=this.safeFloat(t,"balance"),o.used=this.safeFloat(t,"locked_balance"),i[r]=o}return this.parseBalance(i)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"asset_pair_name"),a=this.safeSymbol(s,t,"-"),r=this.parse8601(this.safeString(e,"created_at")),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),c=this.safeFloat(e,"filled_amount");let d=void 0;void 0!==n&&void 0!==c&&(d=Math.max(0,n-c));const h=this.parseOrderStatus(this.safeString(e,"state"));let l=this.safeString(e,"side");l="BID"===l?"buy":"sell";let u=void 0;void 0!==c&&void 0!==o&&(u=c*o);const p=this.parse8601(this.safeString(e,"updated_at")),f=this.safeFloat(e,"avg_deal_price");return{info:e,id:i,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:p,symbol:a,type:void 0,timeInForce:void 0,side:l,price:o,stopPrice:void 0,amount:n,cost:u,average:f,filled:c,remaining:d,status:h,fee:void 0,trades:void 0}}async createOrder(e,t,i,s,a,o={}){await this.loadMarkets();const n=this.market(e);i="buy"===i?"BID":"ASK";const c=t.toUpperCase(),d={asset_pair_name:n.id,side:i,amount:this.amountToPrecision(e,s),type:c};if("LIMIT"===c)d.price=this.priceToPrecision(e,a);else{const t="STOP_LIMIT"===c,i="STOP_MARKET"===c;if(t||i){const t=this.safeFloat2(o,"stop_price","stopPrice");if(void 0===t)throw new r(this.id+" createOrder requires a stop_price parameter");d.stop_price=this.priceToPrecision(e,t),o=this.omit(o,["stop_price","stopPrice"])}t&&(d.price=this.priceToPrecision(e,a))}const h=await this.privatePostOrders(this.extend(d,o)),l=this.safeValue(h,"data");return this.parseOrder(l,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privatePostOrdersIdCancel(this.extend(s,i)),r=this.safeValue(a,"data");return this.parseOrder(r)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={asset_pair_name:this.market(e).id};return await this.privatePostOrdersCancel(this.extend(i,t))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privateGetOrdersId(this.extend(s,i)),r=this.safeValue(a,"data",{});return this.parseOrder(r)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOrders() requires a symbol argument");await this.loadMarkets();const a=this.market(e),o={asset_pair_name:a.id};void 0!==i&&(o.limit=i);const n=await this.privateGetOrders(this.extend(o,s)),c=this.safeValue(n,"data",[]);return this.parseOrders(c,a,t,i)}async fetchMyTrades(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new r(this.id+" fetchMyTrades() requires a symbol argument");const a=this.market(e),o={asset_pair_name:a.id};void 0!==i&&(o.limit=i);const n=await this.privateGetTrades(this.extend(o,s)),c=this.safeValue(n,"data",[]);return this.parseTrades(c,a,t,i)}parseOrderStatus(e){return this.safeString({PENDING:"open",FILLED:"closed",CANCELLED:"canceled"},e)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({state:"PENDING"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({state:"FILLED"},s))}nonce(){return 1e3*this.microseconds()}sign(e,t="public",i="GET",s={},a,r){const o=this.omit(s,this.extractParams(e));let n=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/"+this.implodeParams(e,s);if("public"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t={type:"OpenAPIV2",sub:this.apiKey,nonce:e};a={Authorization:"Bearer "+this.jwt(t,this.encode(this.secret))},"GET"===i?Object.keys(o).length&&(n+="?"+this.urlencode(o)):"POST"===i&&(a["Content-Type"]="application/json",r=this.json(o))}return{url:n,method:i,body:r,headers:a}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={asset_symbol:this.currency(e).id},s=await this.privateGetAssetsAssetSymbolAddress(this.extend(i,t)),r=this.safeValue(s,"data",[]);if(r.length<1)throw new a(this.id+"fetchDepositAddress() returned empty address response");const o=r[0],n=this.safeString(o,"value"),c=this.safeString(o,"memo");return this.checkAddress(n),{currency:e,address:n,tag:c,info:s}}parseTransactionStatus(e){return this.safeString({WITHHOLD:"ok",UNCONFIRMED:"pending",CONFIRMED:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"asset_symbol"),s=this.safeCurrencyCode(i),a=this.safeInteger(e,"id"),r=this.safeFloat(e,"amount"),o=this.parseTransactionStatus(this.safeString(e,"state")),n=this.parse8601(this.safeString(e,"inserted_at")),c=this.parse8601(this.safeString2(e,"updated_at","completed_at")),d=this.safeString(e,"txid"),h=this.safeString(e,"target_address"),l=this.safeString(e,"memo"),u="customer_id"in e?"deposit":"withdrawal";return{info:e,id:a,txid:d,timestamp:n,datetime:this.iso8601(n),addressFrom:void 0,address:void 0,addressTo:h,tagFrom:void 0,tag:l,tagTo:void 0,type:u,amount:r,currency:s,status:o,updated:c,fee:void 0}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.asset_symbol=r.id),void 0!==i&&(a.limit=i);const o=await this.privateGetDeposits(this.extend(a,s)),n=this.safeValue(o,"data",[]);return this.parseTransactions(n,e,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.asset_symbol=r.id),void 0!==i&&(a.limit=i);const o=await this.privateGetWithdrawals(this.extend(a,s)),n=this.safeValue(o,"data",[]);return this.parseTransactions(n,e,t,i)}async withdraw(e,t,i,s,a={}){await this.loadMarkets();const r=this.currency(e),o={symbol:r.id,target_address:i,amount:this.currencyToPrecision(e,t)};void 0!==s&&(o.memo=s);const n=await this.privatePostWithdrawals(this.extend(o,a)),c=this.safeValue(n,"data",{});return this.parseTransaction(c,r)}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n)return;const h=this.safeString(n,"code"),l=this.safeString(n,"message");if("0"!==h){const e=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,l,e),this.throwExactlyMatchedException(this.exceptions.exact,h,e),this.throwBroadlyMatchedException(this.exceptions.broad,l,e),new a(e)}}}},function(e,t,i){"use strict";const s=i(85);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"binanceus",name:"Binance US",countries:["US"],certified:!1,pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/65177307-217b7c80-da5f-11e9-876e-0b748ba0a358.jpg",api:{web:"https://www.binance.us",wapi:"https://api.binance.us/wapi/v3",public:"https://api.binance.us/api/v1",private:"https://api.binance.us/api/v3",v3:"https://api.binance.us/api/v3",v1:"https://api.binance.us/api/v1"},www:"https://www.binance.us",referral:"https://www.binance.us/?ref=35005074",doc:"https://github.com/binance-us/binance-official-api-docs",fees:"https://www.binance.us/en/fee/schedule"},fees:{trading:{tierBased:!0,percentage:!0,taker:.001,maker:.001}},options:{quoteOrderQty:!1}})}}},function(e,t,i){"use strict";const s=i(1),{ArgumentsRequired:a,ExchangeError:r,InvalidNonce:o,AuthenticationError:n,PermissionDenied:c}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bit2c",name:"Bit2C",countries:["IL"],rateLimit:3e3,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766119-3593220e-5ece-11e7-8b3a-5a041f6bcc3f.jpg",api:"https://bit2c.co.il",www:"https://www.bit2c.co.il",referral:"https://bit2c.co.il/Aff/63bfed10-e359-420c-ab5a-ad368dab0baf",doc:["https://www.bit2c.co.il/home/api","https://github.com/OferE/bit2c"]},api:{public:{get:["Exchanges/{pair}/Ticker","Exchanges/{pair}/orderbook","Exchanges/{pair}/trades","Exchanges/{pair}/lasttrades"]},private:{post:["Merchant/CreateCheckout","Order/AddCoinFundsRequest","Order/AddFund","Order/AddOrder","Order/AddOrderMarketPriceBuy","Order/AddOrderMarketPriceSell","Order/CancelOrder","Order/AddCoinFundsRequest","Order/AddStopOrder","Payment/GetMyId","Payment/Send","Payment/Pay"],get:["Account/Balance","Account/Balance/v2","Order/MyOrders","Order/GetById","Order/AccountHistory","Order/OrderHistory"]}},markets:{"BTC/NIS":{id:"BtcNis",symbol:"BTC/NIS",base:"BTC",quote:"NIS",baseId:"Btc",quoteId:"Nis"},"ETH/NIS":{id:"EthNis",symbol:"ETH/NIS",base:"ETH",quote:"NIS",baseId:"Eth",quoteId:"Nis"},"BCH/NIS":{id:"BchabcNis",symbol:"BCH/NIS",base:"BCH",quote:"NIS",baseId:"Bchabc",quoteId:"Nis"},"LTC/NIS":{id:"LtcNis",symbol:"LTC/NIS",base:"LTC",quote:"NIS",baseId:"Ltc",quoteId:"Nis"},"ETC/NIS":{id:"EtcNis",symbol:"ETC/NIS",base:"ETC",quote:"NIS",baseId:"Etc",quoteId:"Nis"},"BTG/NIS":{id:"BtgNis",symbol:"BTG/NIS",base:"BTG",quote:"NIS",baseId:"Btg",quoteId:"Nis"},"BSV/NIS":{id:"BchsvNis",symbol:"BSV/NIS",base:"BSV",quote:"NIS",baseId:"Bchsv",quoteId:"Nis"},"GRIN/NIS":{id:"GrinNis",symbol:"GRIN/NIS",base:"GRIN",quote:"NIS",baseId:"Grin",quoteId:"Nis"}},fees:{trading:{maker:.005,taker:.005}},options:{fetchTradesMethod:"public_get_exchanges_pair_trades"},exceptions:{exact:{"Please provide valid APIkey":n},broad:{"Please provide valid nonce":o,"please approve new terms of use on site":c}}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountBalanceV2(e),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){const a=s[e],r=this.account(),o=this.currencyId(a).toUpperCase();o in t&&(r.free=this.safeFloat(t,"AVAILABLE_"+o),r.total=this.safeFloat(t,o)),i[a]=r}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)},a=await this.publicGetExchangesPairOrderbook(this.extend(s,i));return this.parseOrderBook(a)}async fetchTicker(e,t={}){await this.loadMarkets();const i={pair:this.marketId(e)},s=await this.publicGetExchangesPairTicker(this.extend(i,t)),a=this.milliseconds(),r=this.safeFloat(s,"av"),o=this.safeFloat(s,"a");let n=void 0;void 0!==o&&void 0!==r&&(n=o*r);const c=this.safeFloat(s,"ll");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:void 0,low:void 0,bid:this.safeFloat(s,"h"),bidVolume:void 0,ask:this.safeFloat(s,"l"),askVolume:void 0,vwap:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:r,baseVolume:o,quoteVolume:n,info:s}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),o=this.options.fetchTradesMethod,n={pair:a.id};void 0!==t&&(n.date=parseInt(t)),void 0!==i&&(n.limit=i);const c=await this[o](this.extend(n,s));if("string"==typeof c)throw new r(c);return this.parseTrades(c,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();let o="privatePostOrderAddOrder";const n={Amount:s,Pair:this.marketId(e)};"market"===t?o+="MarketPrice"+this.capitalize(i):(n.Price=a,n.Total=s*a,n.IsBid="buy"===i);const c=await this[o](this.extend(n,r));return{info:c,id:c.NewOrder.id}}async cancelOrder(e,t,i={}){const s={id:e};return await this.privatePostOrderCancelOrder(this.extend(s,i))}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),o={pair:r.id},n=await this.privateGetOrderMyOrders(this.extend(o,s)),c=this.safeValue(n,r.id,{}),d=this.safeValue(c,"ask",[]),h=this.safeValue(c,"bid",[]);return this.parseOrders(this.arrayConcat(d,h),r,t,i)}parseOrder(e,t){const i=this.safeInteger(e,"created"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount");let r=void 0;void 0!==s&&void 0!==a&&(r=s*a);let o=void 0;void 0!==t&&(o=t.symbol);let n=this.safeValue(e,"type");0===n?n="buy":1===n&&(n="sell");const c=this.safeString(e,"id"),d=this.safeString(e,"status");return{id:c,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:d,symbol:o,type:void 0,timeInForce:void 0,side:n,price:s,stopPrice:void 0,amount:a,filled:void 0,remaining:void 0,cost:r,trades:void 0,fee:void 0,info:e,average:void 0}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==i&&(r.take=i),r.take=i,void 0!==t&&(r.toTime=this.ymd(this.milliseconds(),"."),r.fromTime=this.ymd(t,".")),void 0!==e&&(a=this.market(e),r.pair=a.id);const o=await this.privateGetOrderOrderHistory(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseTrade(e,t){let i=void 0,s=void 0,a=void 0,r=void 0,o=void 0,n=void 0,c=void 0;const d=this.safeString(e,"reference");if(void 0!==d){i=this.safeTimestamp(e,"ticks"),a=this.safeFloat(e,"price"),r=this.safeFloat(e,"firstAmount");const h=d.split("|");if(void 0===t){const i=this.safeString(e,"pair");i in this.markets_by_id[i]?t=this.markets_by_id[i]:h[0]in this.markets_by_id&&(t=this.markets_by_id[h[0]])}o=h[1],s=h[2],c=this.safeInteger(e,"action"),0===c?c="buy":1===c&&(c="sell"),n=this.safeFloat(e,"feeAmount")}else i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid"),a=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount"),c=this.safeValue(e,"isBid"),void 0!==c&&(c=c?"buy":"sell");let h=void 0;return void 0!==t&&(h=t.symbol),{info:e,id:s,timestamp:i,datetime:this.iso8601(i),symbol:h,order:o,type:void 0,side:c,takerOrMaker:void 0,price:a,amount:r,cost:a*r,fee:{cost:n,currency:"NIS",rate:void 0}}}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+this.implodeParams(e,s);if("public"===t)o+=".json";else{this.checkRequiredCredentials();const e=this.nonce(),t=this.extend({nonce:e},s),n=this.urlencode(t);"GET"===i?Object.keys(t).length&&(o+="?"+n):r=n;const c=this.hmac(this.encode(n),this.encode(this.secret),"sha512","base64");a={"Content-Type":"application/x-www-form-urlencoded",key:this.apiKey,sign:c}}return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,o,n,c,d){if(void 0===n)return;const h=this.safeString(n,"error");if(void 0!==h){const e=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,h,e),this.throwBroadlyMatchedException(this.exceptions.broad,h,e),new r(e)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,AuthenticationError:r,InvalidNonce:o,InsufficientFunds:n,InvalidOrder:c,OrderNotFound:d,PermissionDenied:h}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitbank",name:"bitbank",countries:["JP"],version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","4h":"4hour","8h":"8hour","12h":"12hour","1d":"1day","1w":"1week"},urls:{logo:"https://user-images.githubusercontent.com/1294454/37808081-b87f2d9c-2e59-11e8-894d-c1900b7584fe.jpg",api:{public:"https://public.bitbank.cc",private:"https://api.bitbank.cc"},www:"https://bitbank.cc/",doc:"https://docs.bitbank.cc/",fees:"https://bitbank.cc/docs/fees/"},api:{public:{get:["{pair}/ticker","{pair}/depth","{pair}/transactions","{pair}/transactions/{yyyymmdd}","{pair}/candlestick/{candletype}/{yyyymmdd}"]},private:{get:["user/assets","user/spot/order","user/spot/active_orders","user/spot/trade_history","user/withdrawal_account"],post:["user/spot/order","user/spot/cancel_order","user/spot/cancel_orders","user/spot/orders_info","user/request_withdrawal"]}},markets:{"BCH/BTC":{id:"bcc_btc",symbol:"BCH/BTC",base:"BCH",quote:"BTC",baseId:"bcc",quoteId:"btc"},"BCH/JPY":{id:"bcc_jpy",symbol:"BCH/JPY",base:"BCH",quote:"JPY",baseId:"bcc",quoteId:"jpy"},"MONA/BTC":{id:"mona_btc",symbol:"MONA/BTC",base:"MONA",quote:"BTC",baseId:"mona",quoteId:"btc"},"MONA/JPY":{id:"mona_jpy",symbol:"MONA/JPY",base:"MONA",quote:"JPY",baseId:"mona",quoteId:"jpy"},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc"},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc"},"XRP/JPY":{id:"xrp_jpy",symbol:"XRP/JPY",base:"XRP",quote:"JPY",baseId:"xrp",quoteId:"jpy"},"XLM/JPY":{id:"xlm_jpy",symbol:"XLM/JPY",base:"XLM",quote:"JPY",baseId:"xlm",quoteId:"jpy"},"BTC/JPY":{id:"btc_jpy",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy"},"ETH/JPY":{id:"eth_jpy",symbol:"ETH/JPY",base:"ETH",quote:"JPY",baseId:"eth",quoteId:"jpy"},"LTC/JPY":{id:"ltc_jpy",symbol:"LTC/JPY",base:"LTC",quote:"JPY",baseId:"ltc",quoteId:"jpy"},"XRP/BTC":{id:"xrp_btc",symbol:"XRP/BTC",base:"XRP",quote:"BTC",baseId:"xrp",quoteId:"btc"}},fees:{trading:{maker:-2e-4,taker:.0012},funding:{withdraw:{BTC:.001,LTC:.001,XRP:.15,ETH:5e-4,MONA:.001,BCC:.001}}},precision:{price:8,amount:8},exceptions:{20001:r,20002:r,20003:r,20005:r,20004:o,40020:c,40021:c,40025:a,40013:d,40014:d,50008:h,50009:d,50010:d,60001:n,60005:c}})}parseTicker(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.safeInteger(e,"timestamp"),a=this.safeFloat(e,"last");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},a=await this.publicGetPairTicker(this.extend(s,t)),r=this.safeValue(a,"data",{});return this.parseTicker(r,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)},a=await this.publicGetPairDepth(this.extend(s,i)),r=this.safeValue(a,"data",{}),o=this.safeInteger(r,"timestamp");return this.parseOrderBook(r,o)}parseTrade(e,t){const i=this.safeInteger(e,"executed_at");let s=void 0,a=void 0;void 0!==t&&(s=t.symbol,a=t.quote);const r=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=void 0;void 0!==r&&void 0!==o&&(n=parseFloat(this.costToPrecision(s,r*o)));const c=this.safeString2(e,"transaction_id","trade_id"),d=this.safeString(e,"maker_taker");let h=void 0;void 0!==this.safeFloat(e,"fee_amount_quote")&&(h={currency:t.quote,cost:a});const l=this.safeString(e,"order_id"),u=this.safeString(e,"type"),p=this.safeString(e,"side");return{timestamp:i,datetime:this.iso8601(i),symbol:s,id:c,order:l,type:u,side:p,takerOrMaker:d,price:r,amount:o,cost:n,fee:h,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={pair:a.id},o=await this.publicGetPairTransactions(this.extend(r,s)),n=this.safeValue(o,"data",{}),c=this.safeValue(n,"transactions",[]);return this.parseTrades(c,a,t,i)}parseOHLCV(e,t){return[this.safeInteger(e,5),this.safeFloat(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4)]}async fetchOHLCV(e,t="5m",i,s,a={}){await this.loadMarkets();const r=this.market(e);let o=this.milliseconds();o=this.ymd(o),o=o.split("-");const n={pair:r.id,candletype:this.timeframes[t],yyyymmdd:o.join("")},c=await this.publicGetPairCandlestickCandletypeYyyymmdd(this.extend(n,a)),d=this.safeValue(c,"data",{}),h=this.safeValue(d,"candlestick",[]),l=this.safeValue(h,0,{}),u=this.safeValue(l,"ohlcv",[]);return this.parseOHLCVs(u,r,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUserAssets(e),i={info:t},s=this.safeValue(t,"data",{}),a=this.safeValue(s,"assets",[]);for(let e=0;e<a.length;e++){const t=a[e],s=this.safeString(t,"asset"),r=this.safeCurrencyCode(s),o={free:this.safeFloat(t,"free_amount"),used:this.safeFloat(t,"locked_amount"),total:this.safeFloat(t,"onhand_amount")};i[r]=o}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({UNFILLED:"open",PARTIALLY_FILLED:"open",FULLY_FILLED:"closed",CANCELED_UNFILLED:"canceled",CANCELED_PARTIALLY_FILLED:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"order_id"),s=this.safeString(e,"pair");let a=void 0;s&&!t&&s in this.marketsById&&(t=this.marketsById[s]),void 0!==t&&(a=t.symbol);const r=this.safeInteger(e,"ordered_at"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"start_amount"),c=this.safeFloat(e,"executed_amount"),d=this.safeFloat(e,"remaining_amount"),h=this.safeFloat(e,"average_price");let l=void 0;void 0!==c&&void 0!==h&&(l=c*h);const u=this.parseOrderStatus(this.safeString(e,"status")),p=this.safeStringLower(e,"type"),f=this.safeStringLower(e,"side");return{id:i,clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:u,symbol:a,type:p,timeInForce:void 0,side:f,price:o,stopPrice:void 0,cost:l,average:h,amount:n,filled:c,remaining:d,trades:void 0,fee:void 0,info:e}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e);if(void 0===a)throw new c(this.id+" createOrder requires a price argument for both market and limit orders");const n={pair:o.id,amount:this.amountToPrecision(e,s),price:this.priceToPrecision(e,a),side:i,type:t},d=await this.privatePostUserSpotOrder(this.extend(n,r)),h=this.safeValue(d,"data");return this.parseOrder(h,o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e,pair:this.market(t).id},a=await this.privatePostUserSpotCancelOrder(this.extend(s,i));return this.safeValue(a,"data")}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=this.market(t),a={order_id:e,pair:s.id},r=await this.privateGetUserSpotOrder(this.extend(a,i)),o=this.safeValue(r,"data");return this.parseOrder(o,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={pair:a.id};void 0!==i&&(r.count=i),void 0!==t&&(r.since=parseInt(t/1e3));const o=await this.privateGetUserSpotActiveOrders(this.extend(r,s)),n=this.safeValue(o,"data",{}),c=this.safeValue(n,"orders",[]);return this.parseOrders(c,a,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let a=void 0;void 0!==e&&(a=this.market(e));const r={};void 0!==a&&(r.pair=a.id),void 0!==i&&(r.count=i),void 0!==t&&(r.since=parseInt(t/1e3));const o=await this.privateGetUserSpotTradeHistory(this.extend(r,s)),n=this.safeValue(o,"data",{}),c=this.safeValue(n,"trades",[]);return this.parseTrades(c,a,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={asset:i.id},a=await this.privateGetUserWithdrawalAccount(this.extend(s,t)),r=this.safeValue(a,"data",{}),o=this.safeValue(r,"accounts",[]),n=this.safeValue(o,0,{});return{currency:i,address:this.safeString(n,"address"),tag:void 0,info:a}}async withdraw(e,t,i,s,r={}){if(!("uuid"in r))throw new a(this.id+" uuid is required for withdrawal");await this.loadMarkets();const o={asset:this.currency(e).id,amount:t},n=await this.privatePostUserRequestWithdrawal(this.extend(o,r)),c=this.safeValue(n,"data",{});return{info:n,id:this.safeString(c,"txid")}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o=this.omit(s,this.extractParams(e)),n=this.urls.api[t]+"/";if("public"===t)n+=this.implodeParams(e,s),Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials();const t=this.nonce().toString();let c=t;n+=this.version+"/"+this.implodeParams(e,s),"POST"===i?c+=r=this.json(o):(c+="/"+this.version+"/"+e,Object.keys(o).length&&(o=this.urlencode(o),n+="?"+o,c+="?"+o)),a={"Content-Type":"application/json","ACCESS-KEY":this.apiKey,"ACCESS-NONCE":t,"ACCESS-SIGNATURE":this.hmac(this.encode(c),this.encode(this.secret))}}return{url:n,method:i,body:r,headers:a}}async request(e,t="public",i="GET",s={},r,o){const n=await this.fetch2(e,t,i,s,r,o),c=this.safeInteger(n,"success"),d=this.safeValue(n,"data");if(!c||!d){const e={1e4:"URL does not exist",10001:"A system error occurred. Please contact support",10002:"Invalid JSON format. Please check the contents of transmission",10003:"A system error occurred. Please contact support",10005:"A timeout error occurred. Please wait for a while and try again",20001:"API authentication failed",20002:"Illegal API key",20003:"API key does not exist",20004:"API Nonce does not exist",20005:"API signature does not exist",20011:"Two-step verification failed",20014:"SMS authentication failed",30001:"Please specify the order quantity",30006:"Please specify the order ID",30007:"Please specify the order ID array",30009:"Please specify the stock",30012:"Please specify the order price",30013:"Trade Please specify either",30015:"Please specify the order type",30016:"Please specify asset name",30019:"Please specify uuid",30039:"Please specify the amount to be withdrawn",40001:"The order quantity is invalid",40006:"Count value is invalid",40007:"End time is invalid",40008:"end_id Value is invalid",40009:"The from_id value is invalid",40013:"The order ID is invalid",40014:"The order ID array is invalid",40015:"Too many specified orders",40017:"Incorrect issue name",40020:"The order price is invalid",40021:"The trading classification is invalid",40022:"Start date is invalid",40024:"The order type is invalid",40025:"Incorrect asset name",40028:"uuid is invalid",40048:"The amount of withdrawal is illegal",50003:"Currently, this account is in a state where you can not perform the operation you specified. Please contact support",50004:"Currently, this account is temporarily registered. Please try again after registering your account",50005:"Currently, this account is locked. Please contact support",50006:"Currently, this account is locked. Please contact support",50008:"User identification has not been completed",50009:"Your order does not exist",50010:"Can not cancel specified order",50011:"API not found",60001:"The number of possessions is insufficient",60002:"It exceeds the quantity upper limit of the tender buying order",60003:"The specified quantity exceeds the limit",60004:"The specified quantity is below the threshold",60005:"The specified price is above the limit",60006:"The specified price is below the lower limit",70001:"A system error occurred. Please contact support",70002:"A system error occurred. Please contact support",70003:"A system error occurred. Please contact support",70004:"We are unable to accept orders as the transaction is currently suspended",70005:"Order can not be accepted because purchase order is currently suspended",70006:"We can not accept orders because we are currently unsubscribed ",70009:"We are currently temporarily restricting orders to be carried out. Please use the limit order.",70010:"We are temporarily raising the minimum order quantity as the system load is now rising."},t=this.exceptions,i=this.safeString(d,"code"),s=this.safeString(e,i,"Error"),r=this.safeValue(t,i);throw void 0!==r?new r(s):new a(this.id+" "+this.json(n))}return n}}},function(e,t,i){"use strict";const s=i(1),{InvalidNonce:a,InsufficientFunds:r,AuthenticationError:o,InvalidOrder:n,ExchangeError:c,OrderNotFound:d,AccountSuspended:h,BadSymbol:l,OrderImmediatelyFillable:u,RateLimitExceeded:p,OnMaintenance:f,PermissionDenied:m}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitbay",name:"BitBay",countries:["MT","EU"],rateLimit:1e3,has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","3d":"259200","1w":"604800"},urls:{referral:"https://auth.bitbay.net/ref/jHlbB4mIkdS1",logo:"https://user-images.githubusercontent.com/1294454/27766132-978a7bd8-5ece-11e7-9540-bc96d1e9bbb8.jpg",www:"https://bitbay.net",api:{public:"https://bitbay.net/API/Public",private:"https://bitbay.net/API/Trading/tradingApi.php",v1_01Public:"https://api.bitbay.net/rest",v1_01Private:"https://api.bitbay.net/rest"},doc:["https://bitbay.net/public-api","https://bitbay.net/en/private-api","https://bitbay.net/account/tab-api","https://github.com/BitBayNet/API","https://docs.bitbay.net/v1.0.1-en/reference"],support:"https://support.bitbay.net",fees:"https://bitbay.net/en/fees"},api:{public:{get:["{id}/all","{id}/market","{id}/orderbook","{id}/ticker","{id}/trades"]},private:{post:["info","trade","cancel","orderbook","orders","transfer","withdraw","history","transactions"]},v1_01Public:{get:["trading/ticker","trading/ticker/{symbol}","trading/stats","trading/orderbook/{symbol}","trading/transactions/{symbol}","trading/candle/history/{symbol}/{resolution}"]},v1_01Private:{get:["payments/withdrawal/{detailId}","payments/deposit/{detailId}","trading/offer","trading/config/{symbol}","trading/history/transactions","balances/BITBAY/history","balances/BITBAY/balance","fiat_cantor/rate/{baseId}/{quoteId}","fiat_cantor/history"],post:["trading/offer/{symbol}","trading/config/{symbol}","balances/BITBAY/balance","balances/BITBAY/balance/transfer/{source}/{destination}","fiat_cantor/exchange"],delete:["trading/offer/{symbol}/{id}/{side}/{price}"],put:["balances/BITBAY/balance/{id}"]}},fees:{trading:{maker:0,taker:.001,percentage:!0,tierBased:!1},fiat:{maker:.003,taker:.0043,percentage:!0,tierBased:!0,tiers:{taker:[[.0043,0],[.0042,1250],[.0041,3750],[.004,7500],[.0039,1e4],[.0038,15e3],[.0037,2e4],[.0036,25e3],[.0035,37500],[.0034,5e4],[.0033,75e3],[.0032,1e5],[.0031,15e4],[.003,2e5],[.0029,25e4],[.0028,375e3],[.0027,5e5],[.0026,625e3],[.0025,875e3]],maker:[[.003,0],[.0029,1250],[.0028,3750],[.0028,7500],[.0027,1e4],[.0026,15e3],[.0025,2e4],[.0025,25e3],[.0024,37500],[.0023,5e4],[.0023,75e3],[.0022,1e5],[.0021,15e4],[.0021,2e5],[.002,25e4],[.0019,375e3],[.0018,5e5],[.0018,625e3],[.0017,875e3]]}},funding:{withdraw:{BTC:9e-4,LTC:.005,ETH:.00126,LSK:.2,BCH:6e-4,GAME:.005,DASH:.001,BTG:8e-4,PLN:4,EUR:1.5}}},options:{fiatCurrencies:["EUR","USD","GBP","PLN"]},exceptions:{400:c,401:n,402:n,403:n,404:n,405:n,406:r,408:n,501:o,502:o,503:a,504:c,505:o,506:h,509:c,510:l,FUNDS_NOT_SUFFICIENT:r,OFFER_FUNDS_NOT_EXCEEDING_MINIMUMS:n,OFFER_NOT_FOUND:d,OFFER_WOULD_HAVE_BEEN_PARTIALLY_FILLED:u,ACTION_LIMIT_EXCEEDED:p,UNDER_MAINTENANCE:f,REQUEST_TIMESTAMP_TOO_OLD:a,PERMISSIONS_NOT_SUFFICIENT:m},commonCurrencies:{GGC:"Global Game Coin"}})}async fetchMarkets(e={}){const t=await this.v1_01PublicGetTradingTicker(e),i=this.safeValue(this.options,"fiatCurrencies",[]),s=[],a=this.safeValue(t,"items"),r=Object.keys(a);for(let e=0;e<r.length;e++){const t=a[r[e]],o=this.safeValue(t,"market",{}),n=this.safeValue(o,"first",{}),c=this.safeValue(o,"second",{}),d=this.safeString(n,"currency"),h=this.safeString(c,"currency"),l=d+h,u=this.safeCurrencyCode(d),p=this.safeCurrencyCode(h),f=u+"/"+p,m={amount:this.safeInteger(n,"scale"),price:this.safeInteger(c,"scale")};let v=this.safeValue(this.fees,"trading",{});(this.inArray(u,i)||this.inArray(p,i))&&(v=this.safeValue(this.fees,"fiat",{}));const y=this.safeFloat(v,"maker"),g=this.safeFloat(v,"taker");s.push({id:l,symbol:f,base:u,quote:p,baseId:d,quoteId:h,precision:m,active:void 0,maker:y,taker:g,limits:{amount:{min:this.safeFloat(n,"minOffer"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(c,"minOffer"),max:void 0}},info:t})}return s}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a=await this.v1_01PrivateGetTradingOffer(this.extend({},s)),r=this.safeValue(a,"items",[]);return this.parseOrders(r,void 0,t,i,{status:"open"})}parseOrder(e,t){const i=this.safeString(e,"market"),s=this.safeSymbol(i,t,"-"),a=this.safeInteger(e,"time"),r=this.safeFloat(e,"startAmount"),o=this.safeFloat(e,"currentAmount");let n=void 0;return void 0!==r&&void 0!==o&&(n=Math.max(0,r-o)),{id:this.safeString(e,"id"),clientOrderId:void 0,info:e,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,status:void 0,symbol:s,type:this.safeString(e,"mode"),timeInForce:void 0,side:this.safeStringLower(e,"offerType"),price:this.safeFloat(e,"rate"),stopPrice:void 0,amount:r,cost:void 0,filled:n,remaining:o,average:void 0,fee:void 0,trades:void 0}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={};if(e){const t=[this.marketId(e)];a.markets=t}const r={query:this.json(this.extend(a,s))},o=await this.v1_01PrivateGetTradingHistoryTransactions(r),n=this.safeValue(o,"items"),c=this.parseTrades(n,void 0,t,i);return void 0===e?c:this.filterBySymbol(c,e)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.v1_01PrivateGetBalancesBITBAYBalance(e),i=this.safeValue(t,"balances");if(void 0===i)throw new c(this.id+" empty balance response "+this.json(t));const s={info:t};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"currency"),r=this.safeCurrencyCode(a),o=this.account();o.used=this.safeFloat(t,"lockedFunds"),o.free=this.safeFloat(t,"availableFunds"),s[r]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e)},a=await this.publicGetIdOrderbook(this.extend(s,i));return this.parseOrderBook(a)}async fetchTicker(e,t={}){await this.loadMarkets();const i={id:this.marketId(e)},s=await this.publicGetIdTicker(this.extend(i,t)),a=this.milliseconds(),r=this.safeFloat(s,"volume"),o=this.safeFloat(s,"vwap");let n=void 0;void 0!==r&&void 0!==o&&(n=r*o);const c=this.safeFloat(s,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(s,"max"),low:this.safeFloat(s,"min"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:o,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(s,"average"),baseVolume:r,quoteVolume:n,info:s}}async fetchLedger(e,t,i,s={}){const a=[];if(void 0!==e){const t=this.currency(e);a.push(t.id)}let r={balanceCurrencies:a};void 0!==t&&(r.fromTime=t),void 0!==i&&(r.limit=i),r=this.extend(r,s);const o=(await this.v1_01PrivateGetBalancesBITBAYHistory({query:this.json(r)})).items;return this.parseLedger(o,void 0,t,i)}parseLedgerEntry(e,t){const i=this.safeInteger(e,"time"),s=this.safeValue(e,"balance",{}),a=this.safeString(s,"currency"),r=this.safeCurrencyCode(a),o=this.safeValue(e,"change",{});let n=this.safeFloat(o,"total"),c="in";n<0&&(c="out",n=-n);const d=this.safeString(e,"historyId"),h=this.safeString(e,"detailId"),l=this.parseLedgerEntryType(this.safeString(e,"type")),u=this.safeValue(e,"fundsBefore",{}),p=this.safeFloat(u,"total"),f=this.safeValue(e,"fundsAfter",{});return{info:e,id:d,direction:c,account:void 0,referenceId:h,referenceAccount:void 0,type:l,currency:r,amount:n,before:p,after:this.safeFloat(f,"total"),status:"ok",timestamp:i,datetime:this.iso8601(i),fee:void 0}}parseLedgerEntryType(e){return this.safeString({ADD_FUNDS:"transaction",BITCOIN_GOLD_FORK:"transaction",CREATE_BALANCE:"transaction",FUNDS_MIGRATION:"transaction",WITHDRAWAL_LOCK_FUNDS:"transaction",WITHDRAWAL_SUBTRACT_FUNDS:"transaction",WITHDRAWAL_UNLOCK_FUNDS:"transaction",TRANSACTION_COMMISSION_OUTCOME:"fee",TRANSACTION_COMMISSION_RETURN:"fee",TRANSACTION_OFFER_ABORTED_RETURN:"trade",TRANSACTION_OFFER_COMPLETED_RETURN:"trade",TRANSACTION_POST_INCOME:"trade",TRANSACTION_POST_OUTCOME:"trade",TRANSACTION_PRE_LOCKING:"trade"},e,e)}parseOHLCV(e,t){const i=this.safeValue(e,1,{});return[this.safeInteger(e,0),this.safeFloat(i,"o"),this.safeFloat(i,"h"),this.safeFloat(i,"l"),this.safeFloat(i,"c"),this.safeFloat(i,"v")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={symbol:r.baseId+"-"+r.quoteId,resolution:this.timeframes[t]};void 0===s&&(s=100);const n=s*this.parseTimeframe(t)*1e3;void 0===i?(o.to=this.milliseconds(),o.from=o.to-n):(o.from=parseInt(i),o.to=this.sum(o.from,n));const c=await this.v1_01PublicGetTradingCandleHistorySymbolResolution(this.extend(o,a)),d=this.safeValue(c,"items",[]);return this.parseOHLCVs(d,r,t,i,s)}parseTrade(e,t){const i=this.safeInteger2(e,"time","t"),s="Buy"===this.safeString(e,"userAction")?"buy":"sell",a=this.safeValue(e,"wasTaker");let r=void 0;void 0!==a&&(r=a?"taker":"maker");const o=this.safeFloat2(e,"rate","r"),n=this.safeFloat2(e,"amount","a");let c=void 0;void 0!==n&&void 0!==o&&(c=o*n);const d=this.safeFloat(e,"commissionValue"),h=this.safeString(e,"market"),l=(t=this.safeMarket(h,t,"-")).symbol;let u=void 0;if(void 0!==d){u={currency:"buy"===s?t.base:t.quote,cost:d}}const p=this.safeString(e,"offerId");let f=void 0;return void 0!==p&&(f=p?"limit":"market"),{id:this.safeString(e,"id"),order:p,timestamp:i,datetime:this.iso8601(i),symbol:l,type:f,side:s,price:o,amount:n,cost:c,takerOrMaker:r,fee:u,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.baseId+"-"+a.quoteId};void 0!==t&&(r.fromTime=t-1),void 0!==i&&(r.limit=i);const o=await this.v1_01PublicGetTradingTransactionsSymbol(this.extend(r,s)),n=this.safeValue(o,"items");return this.parseTrades(n,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n={symbol:o.baseId+"-"+o.quoteId,offerType:i,amount:s,mode:t};"limit"===t&&(n.rate=a,a=parseFloat(a)),s=parseFloat(s);const c=await this.v1_01PrivatePostTradingOfferSymbol(this.extend(n,r)),d=this.milliseconds(),h=this.safeString(c,"offerId"),l=this.safeValue(c,"completed",!1)?"closed":"open";let u=0,p=void 0;const f=this.safeValue(c,"transactions");let m=void 0;if(void 0!==f){m=this.parseTrades(f,o,void 0,void 0,{timestamp:d,datetime:this.iso8601(d),symbol:e,side:i,type:t,orderId:h}),p=0;for(let e=0;e<m.length;e++)u=this.sum(u,m[e].amount),p=this.sum(p,m[e].cost)}const v=s-u;return{id:h,info:c,timestamp:d,datetime:this.iso8601(d),lastTradeTimestamp:void 0,status:l,symbol:e,type:t,side:i,price:a,amount:s,cost:p,filled:u,remaining:v,average:void 0,fee:void 0,trades:m,clientOrderId:void 0}}async cancelOrder(e,t,i={}){const s=this.safeString(i,"side");if(void 0===s)throw new c(this.id+' cancelOrder() requires a `side` parameter ("buy" or "sell")');const a=this.safeValue(i,"price");if(void 0===a)throw new c(this.id+" cancelOrder() requires a `price` parameter (float or string)");await this.loadMarkets();const r=this.market(t),o={symbol:r.baseId+"-"+r.quoteId,id:e,side:s,price:a};return this.v1_01PrivateDeleteTradingOfferSymbolIdSidePrice(this.extend(o,i))}isFiat(e){return this.safeValue({USD:!0,EUR:!0,PLN:!0},e,!1)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();let r=void 0;const o={currency:this.currency(e).id,quantity:t};this.isFiat(e)?r="privatePostWithdraw":(r="privatePostTransfer",void 0!==s&&(i+="?dt="+s.toString()),o.address=i);return{info:await this[r](this.extend(o,a)),id:void 0}}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t];if("public"===t){const t=this.omit(s,this.extractParams(e));o+="/"+this.implodeParams(e,s)+".json",Object.keys(t).length&&(o+="?"+this.urlencode(t))}else if("v1_01Public"===t){const t=this.omit(s,this.extractParams(e));o+="/"+this.implodeParams(e,s),Object.keys(t).length&&(o+="?"+this.urlencode(t))}else if("v1_01Private"===t){this.checkRequiredCredentials();const t=this.omit(s,this.extractParams(e));o+="/"+this.implodeParams(e,s);const n=this.milliseconds().toString();let c=void 0;"POST"!==i?(Object.keys(t).length&&(o+="?"+this.urlencode(t)),c=this.apiKey+n):void 0===r&&(r=this.json(t),c=this.apiKey+n+r),a={"Request-Timestamp":n,"Operation-Id":this.uuid(),"API-Key":this.apiKey,"API-Hash":this.hmac(this.encode(c),this.encode(this.secret),"sha512"),"Content-Type":"application/json"}}else this.checkRequiredCredentials(),r=this.urlencode(this.extend({method:e,moment:this.nonce()},s)),a={"Content-Type":"application/x-www-form-urlencoded","API-Key":this.apiKey,"API-Hash":this.hmac(this.encode(r),this.encode(this.secret),"sha512")};return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,r,o,n,d){if(void 0!==o){if("code"in o){const e=this.safeString(o,"code"),t=this.id+" "+r;throw this.throwExactlyMatchedException(this.exceptions,e,t),new c(t)}if("status"in o){if("Fail"===this.safeString(o,"status")){const e=this.safeValue(o,"errors"),t=this.id+" "+r;for(let i=0;i<e.length;i++){const s=e[i];this.throwExactlyMatchedException(this.exceptions,s,t)}throw new c(t)}}}}}},function(e,t,i){"use strict";const s=i(44);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitcoincom",name:"bitcoin.com",countries:["KN"],urls:{logo:"https://user-images.githubusercontent.com/1294454/97296144-514fa300-1861-11eb-952b-3d55d492200b.jpg",api:{public:"https://api.exchange.bitcoin.com",private:"https://api.exchange.bitcoin.com"},www:"https://exchange.bitcoin.com",doc:"https://api.exchange.bitcoin.com/api/2/explore",fees:"https://exchange.bitcoin.com/fees-and-limits",referral:"https://exchange.bitcoin.com/referral/da948b21d6c92d69"},fees:{trading:{maker:.0015,taker:.002}}})}}},function(e,t,i){"use strict";const s=i(86),{ExchangeError:a,InvalidAddress:r,ArgumentsRequired:o,InsufficientFunds:n,AuthenticationError:c,OrderNotFound:d,InvalidOrder:h,BadRequest:l,InvalidNonce:u,BadSymbol:p,OnMaintenance:f}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitfinex2",name:"Bitfinex",countries:["VG"],version:"v2",certified:!1,pro:!1,has:{CORS:!1,cancelAllOrders:!0,cancelOrder:!0,createDepositAddress:!0,createLimitOrder:!0,createMarketOrder:!0,createOrder:!0,deposit:!1,editOrder:!1,fetchBalance:!0,fetchClosedOrder:!0,fetchClosedOrders:!1,fetchCurrencies:!0,fetchDepositAddress:!0,fetchFundingFees:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrder:!0,fetchOpenOrders:!0,fetchOrder:!1,fetchOrderTrades:!0,fetchStatus:!0,fetchTickers:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTransactions:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},rateLimit:1500,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766244-e328a50c-5ed2-11e7-947b-041416579bb3.jpg",api:{v1:"https://api.bitfinex.com",public:"https://api-pub.bitfinex.com",private:"https://api.bitfinex.com"},www:"https://www.bitfinex.com",doc:["https://docs.bitfinex.com/v2/docs/","https://github.com/bitfinexcom/bitfinex-api-node"],fees:"https://www.bitfinex.com/fees"},api:{v1:{get:["symbols","symbols_details"]},public:{get:["conf/{config}","conf/pub:{action}:{object}","conf/pub:{action}:{object}:{detail}","conf/pub:map:{object}","conf/pub:map:{object}:{detail}","conf/pub:map:currency:{detail}","conf/pub:map:currency:sym","conf/pub:map:currency:label","conf/pub:map:currency:unit","conf/pub:map:currency:undl","conf/pub:map:currency:pool","conf/pub:map:currency:explorer","conf/pub:map:currency:tx:fee","conf/pub:map:tx:method","conf/pub:list:{object}","conf/pub:list:{object}:{detail}","conf/pub:list:currency","conf/pub:list:pair:exchange","conf/pub:list:pair:margin","conf/pub:list:pair:futures","conf/pub:list:competitions","conf/pub:info:{object}","conf/pub:info:{object}:{detail}","conf/pub:info:pair","conf/pub:info:tx:status","conf/pub:fees","platform/status","tickers","ticker/{symbol}","trades/{symbol}/hist","book/{symbol}/{precision}","book/{symbol}/P0","book/{symbol}/P1","book/{symbol}/P2","book/{symbol}/P3","book/{symbol}/R0","stats1/{key}:{size}:{symbol}:{side}/{section}","stats1/{key}:{size}:{symbol}:{side}/last","stats1/{key}:{size}:{symbol}:{side}/hist","stats1/{key}:{size}:{symbol}/{section}","stats1/{key}:{size}:{symbol}/last","stats1/{key}:{size}:{symbol}/hist","stats1/{key}:{size}:{symbol}:long/last","stats1/{key}:{size}:{symbol}:long/hist","stats1/{key}:{size}:{symbol}:short/last","stats1/{key}:{size}:{symbol}:short/hist","candles/trade:{timeframe}:{symbol}/{section}","candles/trade:{timeframe}:{symbol}/last","candles/trade:{timeframe}:{symbol}/hist","status/{type}","status/deriv","liquidations/hist","rankings/{key}:{timeframe}:{symbol}/{section}","rankings/{key}:{timeframe}:{symbol}/hist"],post:["calc/trade/avg","calc/fx"]},private:{post:["auth/r/wallets","auth/r/wallets/hist","auth/r/orders","auth/r/orders/{symbol}","auth/w/order/submit","auth/w/order/update","auth/w/order/cancel","auth/w/order/multi","auth/w/order/cancel/multi","auth/r/orders/{symbol}/hist","auth/r/orders/hist","auth/r/order/{symbol}:{id}/trades","auth/r/trades/{symbol}/hist","auth/r/trades/hist","auth/r/ledgers/{currency}/hist","auth/r/ledgers/hist","auth/r/info/margin/{key}","auth/r/info/margin/base","auth/r/info/margin/sym_all","auth/r/positions","auth/w/position/claim","auth/r/positions/hist","auth/r/positions/audit","auth/w/deriv/collateral/set","auth/r/funding/offers","auth/r/funding/offers/{symbol}","auth/w/funding/offer/submit","auth/w/funding/offer/cancel","auth/w/funding/offer/cancel/all","auth/w/funding/close","auth/w/funding/auto","auth/w/funding/keep","auth/r/funding/offers/{symbol}/hist","auth/r/funding/offers/hist","auth/r/funding/loans","auth/r/funding/loans/hist","auth/r/funding/loans/{symbol}","auth/r/funding/loans/{symbol}/hist","auth/r/funding/credits","auth/r/funding/credits/hist","auth/r/funding/credits/{symbol}","auth/r/funding/credits/{symbol}/hist","auth/r/funding/trades/{symbol}/hist","auth/r/funding/trades/hist","auth/r/info/funding/{key}","auth/r/info/user","auth/r/logins/hist","auth/w/transfer","auth/w/deposit/address","auth/w/deposit/invoice","auth/w/withdraw","auth/r/movements/{currency}/hist","auth/r/movements/hist","auth/r/alerts","auth/w/alert/set","auth/w/alert/price:{symbol}:{price}/del","auth/w/alert/{type}:{symbol}:{price}/del","auth/calc/order/avail","auth/w/settings/set","auth/r/settings","auth/w/settings/del"]}},fees:{trading:{maker:.001,taker:.002},funding:{withdraw:{BTC:4e-4,BCH:1e-4,ETH:.00135,EOS:0,LTC:.001,OMG:.15097,IOT:0,NEO:0,ETC:.01,XRP:.02,ETP:.01,ZEC:.001,BTG:0,DASH:.01,XMR:1e-4,QTM:.01,EDO:.23687,DAT:9.8858,AVT:1.1251,SAN:.35977,USDT:5,SPK:16.971,BAT:1.1209,GNT:2.8789,SNT:9.0848,QASH:1.726,YYW:7.9464}}},options:{precision:"R0",exchangeTypes:{"EXCHANGE MARKET":"market","EXCHANGE LIMIT":"limit"},orderTypes:{market:"EXCHANGE MARKET",limit:"EXCHANGE LIMIT"},fiat:{USD:"USD",EUR:"EUR",JPY:"JPY",GBP:"GBP"}},exceptions:{exact:{10020:l,10100:c,10114:u,20060:f},broad:{address:r,"available balance is only":n,"not enough exchange balance":n,"Order not found":d,"symbol: invalid":p,"Invalid order":h}}})}isFiat(e){return e in this.options.fiat}getCurrencyId(e){return"f"+e}async fetchStatus(e={}){const t=await this.publicGetPlatformStatus(e),i=1===this.safeValue(t,0)?"ok":"maintenance";return this.status=this.extend(this.status,{status:i,updated:this.milliseconds()}),this.status}async fetchMarkets(e={}){const t=await this.publicGetConfPubListPairFutures(e),i=await this.v1GetSymbolsDetails(e),s=this.safeValue(t,0,[]),a=[];for(let e=0;e<i.length;e++){const t=i[e];let r=this.safeStringUpper(t,"pair"),o=!0;this.inArray(r,s)&&(o=!1);const n=!o,c=o?"spot":"futures";let d=void 0,h=void 0;if(r.indexOf(":")>=0){const e=r.split(":");d=e[0],h=e[1]}else d=r.slice(0,3),h=r.slice(3,6);const l=this.safeCurrencyCode(d),u=this.safeCurrencyCode(h),p=l+"/"+u;r="t"+r,d=this.getCurrencyId(d),h=this.getCurrencyId(h);const f={price:this.safeInteger(t,"price_precision"),amount:8},m={amount:{min:this.safeFloat(t,"minimum_order_size"),max:this.safeFloat(t,"maximum_order_size")},price:{min:Math.pow(10,-f.price),max:Math.pow(10,f.price)}};m.cost={min:m.amount.min*m.price.min,max:void 0},a.push({id:r,symbol:p,base:l,quote:u,baseId:d,quoteId:h,active:!0,precision:f,limits:m,info:t,type:c,swap:!1,spot:o,futures:n})}return a}async fetchCurrencies(e={}){const t={config:["pub:list:currency","pub:map:currency:sym","pub:map:currency:label","pub:map:currency:unit","pub:map:currency:undl","pub:map:currency:pool","pub:map:currency:explorer","pub:map:currency:tx:fee"].join(",")},i=await this.publicGetConfConfig(this.extend(t,e)),s={sym:this.indexBy(this.safeValue(i,1,[]),0),label:this.indexBy(this.safeValue(i,2,[]),0),unit:this.indexBy(this.safeValue(i,3,[]),0),undl:this.indexBy(this.safeValue(i,4,[]),0),pool:this.indexBy(this.safeValue(i,5,[]),0),explorer:this.indexBy(this.safeValue(i,6,[]),0),fees:this.indexBy(this.safeValue(i,7,[]),0)},a=this.safeValue(i,0,[]),r={};for(let e=0;e<a.length;e++){let t=a[e];const i=this.safeCurrencyCode(t),o=this.safeValue(s.label,t,[]),n=this.safeString(o,1),c=this.safeValue(s.pool,t,[]),d=this.safeString(c,1),h=this.safeValue(s.fees,t,[]),l=this.safeValue(h,1,[]),u=this.safeFloat(l,1),p=8;t="f"+t,r[i]={id:t,code:i,info:[t,o,c,h],type:d,name:n,active:!0,fee:u,precision:p,limits:{amount:{min:1/Math.pow(10,p),max:void 0},price:{min:1/Math.pow(10,p),max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:u,max:void 0}}}}return r}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostAuthRWallets(e),i=this.safeString(e,"type","exchange"),s={info:t};for(let e=0;e<t.length;e++){const a=t[e],r=a[0];let o=a[1];const n=a[2],c=a[4];if(r===i){"t"===o[0]&&(o=o.slice(1));const e=this.safeCurrencyCode(o),t=this.account();t.total=n,c?(t.free=c,t.used=t.total-t.free):0===c?(t.free=0,t.used=n):t.free=n,s[e]=t}}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.safeValue(this.options,"precision","R0"),a={symbol:this.marketId(e),precision:s};void 0!==t&&(a.len=t);const r=this.extend(a,i),o=await this.publicGetBookSymbolPrecision(r),n=this.milliseconds(),c={bids:[],asks:[],timestamp:n,datetime:this.iso8601(n),nonce:void 0},d="R0"===r.precision?1:0;for(let e=0;e<o.length;e++){const t=o[e],i=t[d],s=Math.abs(t[2]);c[t[2]>0?"bids":"asks"].push([i,s])}return c.bids=this.sortBy(c.bids,0,!0),c.asks=this.sortBy(c.asks,0),c}parseTicker(e,t){const i=this.milliseconds();let s=void 0;void 0!==t&&(s=t.symbol);const a=e.length,r=e[a-4];return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:e[a-2],low:e[a-1],bid:e[a-10],bidVolume:void 0,ask:e[a-8],askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:e[a-6],percentage:100*e[a-5],average:void 0,baseVolume:e[a-3],quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e);i.symbols=t.join(",")}else i.symbols="ALL";const s=await this.publicGetTickers(this.extend(i,t)),a={};for(let e=0;e<s.length;e++){const t=s[e],i=t[0];if(i in this.markets_by_id){const e=this.markets_by_id[i];a[e.symbol]=this.parseTicker(t,e)}}return this.filterByArray(a,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.publicGetTickerSymbol(this.extend(s,t));return this.parseTicker(a,i)}parseSymbol(e){if(void 0===e)return e;let t=void 0,i=void 0;if((e=e.replace("t","")).indexOf(":")>=0){const s=e.split(":");t=s[0],i=s[1]}else t=e.slice(0,3),i=e.slice(3,6);return this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}parseTrade(e,t){const i=e.length>5,s=e[0].toString();let a=e[i?4:2],r=void 0;const o=e[i?5:3];let n=void 0,c=void 0,d=void 0,h=void 0,l=void 0,u=void 0;const p=e[i?2:1];if(i){const i=e[1];u=i in this.markets_by_id?(t=this.markets_by_id[i]).symbol:this.parseSymbol(i),c=e[3].toString(),d=1===e[8]?"maker":"taker";let s=e[9];const a=this.safeCurrencyCode(e[10]);if(void 0!==s){if(s=-s,u in this.markets)s=this.feeToPrecision(u,s);else{const e="f"+a;if(e in this.currencies_by_id){const t=this.currencies_by_id[e];s=this.currencyToPrecision(t.code,s)}}l={cost:parseFloat(s),currency:a}}const r=e[6];h=this.safeString(this.options.exchangeTypes,r)}return void 0===u&&void 0!==t&&(u=t.symbol),void 0!==a&&(n=a<0?"sell":"buy",a=Math.abs(a),void 0===r&&void 0!==o&&(r=a*o)),{id:s,timestamp:p,datetime:this.iso8601(p),symbol:u,order:c,side:n,type:h,takerOrMaker:d,price:o,amount:a,cost:r,fee:l,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e);let r="-1";const o={symbol:a.id};void 0!==t&&(o.start=t,r="1"),void 0!==i&&(o.limit=i),o.sort=r;const n=await this.publicGetTradesSymbolHist(this.extend(o,s)),c=this.sortBy(n,1);return this.parseTrades(c,a,void 0,i)}async fetchOHLCV(e,t="1m",i,s=100,a={}){await this.loadMarkets();const r=this.market(e);void 0===s&&(s=100),void 0===i&&(i=this.milliseconds()-this.parseTimeframe(t)*s*1e3);const o={symbol:r.id,timeframe:this.timeframes[t],sort:1,start:i,limit:s},n=await this.publicGetCandlesTradeTimeframeSymbolHist(this.extend(o,a));return this.parseOHLCVs(n,r,t,i,s)}parseOrderStatus(e){if(void 0===e)return e;const t=e.split(" "),i=this.safeString(t,0);return this.safeString({ACTIVE:"open",PARTIALLY:"open",EXECUTED:"closed",CANCELED:"canceled",INSUFFICIENT:"canceled",RSN_DUST:"rejected",RSN_PAUSE:"rejected"},i,e)}parseOrder(e,t){const i=this.safeString(e,0);let s=void 0;const a=this.safeString(e,3);a in this.markets_by_id?t=this.markets_by_id[a]:s=this.parseSymbol(a),void 0===s&&void 0!==t&&(s=t.symbol);const r=this.safeInteger(e,5),o=Math.abs(this.safeFloat(e,6)),n=Math.abs(this.safeFloat(e,7)),c=n-o,d=e[7]<0?"sell":"buy",h=this.safeString(e,8),l=this.safeString(this.safeValue(this.options,"exchangeTypes"),h);let u=void 0;const p=this.safeString(e,13);if(void 0!==p){const e=p.split(" @ ");u=this.parseOrderStatus(this.safeString(e,0))}const f=this.safeFloat(e,16),m=this.safeFloat(e,17),v=f*c;return{info:e,id:i,clientOrderId:this.safeString(e,2),timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:s,type:l,timeInForce:void 0,side:d,price:f,stopPrice:void 0,amount:n,cost:v,average:m,filled:c,remaining:o,status:u,fee:void 0,trades:void 0}}async createOrder(e,t,i,s,r,o={}){await this.loadMarkets();const n=this.market(e),c=this.safeValue(this.options,"orderTypes",{}),d=this.safeString(c,t,t);s="sell"===i?-s:s;const h={symbol:n.id,type:d,amount:this.numberToString(s)};"market"!==t&&(h.price=this.numberToString(r));const l=this.safeValue2(o,"cid","clientOrderId");void 0!==l&&(h.cid=l,o=this.omit(o,["cid","clientOrderId"]));const u=await this.privatePostAuthWOrderSubmit(this.extend(h,o));if("SUCCESS"!==this.safeString(u,6)){const e=u[5],t=u[7];throw new a(this.id+" "+u[6]+": "+t+" (#"+e+")")}const p=this.safeValue(u,4,[]),f=this.safeValue(p,0);return this.parseOrder(f,n)}async cancelAllOrders(e,t={}){const i=await this.privatePostAuthWOrderCancelMulti(this.extend({all:1},t)),s=this.safeValue(i,4,[]);return this.parseOrders(s)}async cancelOrder(e,t,i={}){const s=this.safeValue2(i,"cid","clientOrderId");let a=void 0;if(void 0!==s){const e=this.safeValue(i,"cidDate");if(void 0===e)throw new h(this.id+" canceling an order by clientOrderId ('cid') requires both 'cid' and 'cid_date' ('YYYY-MM-DD')");a={cid:s,cid_date:e},i=this.omit(i,["cid","clientOrderId"])}else a={id:parseInt(e)};const r=await this.privatePostAuthWOrderCancel(this.extend(a,i)),o=this.safeValue(r,4);return this.parseOrder(o)}async fetchOpenOrder(e,t,i={}){const s={id:[parseInt(e)]},a=await this.fetchOpenOrders(t,void 0,void 0,this.extend(s,i)),r=this.safeValue(a,0);if(void 0===r)throw new d(this.id+" order "+e+" not found");return r}async fetchClosedOrder(e,t,i={}){const s={id:[parseInt(e)]},a=await this.fetchClosedOrders(t,void 0,void 0,this.extend(s,i)),r=this.safeValue(a,0);if(void 0===r)throw new d(this.id+" order "+e+" not found");return r}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0,o=void 0;return void 0===e?o=await this.privatePostAuthROrders(this.extend(a,s)):(r=this.market(e),a.symbol=r.id,o=await this.privatePostAuthROrdersSymbol(this.extend(a,s))),this.parseOrders(o,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0,o=void 0;return void 0===e?o=await this.privatePostAuthROrdersHist(this.extend(a,s)):(r=this.market(e),a.symbol=r.id,o=await this.privatePostAuthROrdersSymbolHist(this.extend(a,s))),void 0!==t&&(a.start=t),void 0!==i&&(a.limit=i),this.parseOrders(o,r,t,i)}async fetchOrderTrades(e,t,i,s,a={}){if(void 0===t)throw new o(this.id+" fetchOrderTrades() requires a symbol argument");await this.loadMarkets();const r=this.market(t),n={id:parseInt(e),symbol:r.id},c=await this.privatePostAuthROrderSymbolIdTrades(this.extend(n,a));return this.parseTrades(c,r,i,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={end:this.milliseconds()};void 0!==t&&(r.start=t),void 0!==i&&(r.limit=i);let o="privatePostAuthRTradesHist";void 0!==e&&(a=this.market(e),r.symbol=a.id,o="privatePostAuthRTradesSymbolHist");const n=await this[o](this.extend(r,s));return this.parseTrades(n,a,t,i)}async createDepositAddress(e,t={}){await this.loadMarkets();return await this.fetchDepositAddress(e,this.extend({op_renew:1},t))}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={method:this.getCurrencyName(e),wallet:"exchange",op_renew:0},s=await this.privatePostAuthWDepositAddress(this.extend(i,t)),a=this.safeValue(s,4,[]),r=this.safeString(a,5),o=void 0===r?this.safeString(a,4):r,n=void 0===r?void 0:this.safeString(a,4);return this.checkAddress(o),{currency:e,address:o,tag:n,info:s}}parseTransactionStatus(e){return this.safeString({SUCCESS:"ok",ERROR:"failed",FAILURE:"failed",CANCELED:"canceled"},e,e)}parseTransaction(e,t){let i=void 0,s=void 0,a=void 0,r=void 0,o=void 0,n=void 0,c=void 0,d=void 0,h=void 0,l=void 0,u=void 0;if(e.length<9){const s=this.safeValue(e,4,[]);i=this.safeInteger(e,0),void 0!==t&&(a=t.code),h=this.safeFloat(s,8),void 0!==h&&(h=-h),r=this.safeFloat(s,5),o=this.safeValue(s,0),n="ok",0===o&&(o=void 0,n="failed"),c=this.safeString(s,3),d="withdrawal"}else o=this.safeString(e,0),i=this.safeInteger(e,5),s=this.safeInteger(e,6),n=this.parseTransactionStatus(this.safeString(e,9)),r=this.safeFloat(e,12),void 0!==r&&(d=r<0?"withdrawal":"deposit"),h=this.safeFloat(e,13),void 0!==h&&(h=-h),u=this.safeString(e,16),l=this.safeString(e,20);return{info:e,id:o,txid:l,timestamp:i,datetime:this.iso8601(i),addressFrom:void 0,address:u,addressTo:u,tagFrom:void 0,tag:c,tagTo:c,type:d,amount:r,currency:a,status:n,updated:s,fee:{currency:a,cost:h,rate:void 0}}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};let o="privatePostAuthRMovementsHist";void 0!==e&&(a=this.currency(e),r.currency=a.id,o="privatePostAuthRMovementsCurrencyHist"),void 0!==t&&(r.start=t),void 0!==i&&(r.limit=i);const n=await this[o](this.extend(r,s));return this.parseTransactions(n,a,t,i)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e),o={method:this.getCurrencyName(e),wallet:"exchange",amount:this.numberToString(t),address:i};void 0!==s&&(o.payment_id=s);const n=await this.privatePostAuthWWithdraw(this.extend(o,a)),c=this.safeString(n,7);"success"!==c&&this.throwBroadlyMatchedException(this.exceptions.broad,c,c);const d=this.parseTransaction(n,r);return this.extend(d,{address:i})}async fetchPositions(e,t,i,s={}){await this.loadMarkets();return await this.privatePostPositions(s)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o="/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));o="v1"===t?t+o:this.version+o;let c=this.urls.api[t]+"/"+o;if("public"===t&&Object.keys(n).length&&(c+="?"+this.urlencode(n)),"private"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t="/api/"+o+e+(r=this.json(n)),i=this.hmac(this.encode(t),this.encode(this.secret),"sha384");a={"bfx-nonce":e,"bfx-apikey":this.apiKey,"bfx-signature":i,"Content-Type":"application/json"}}return{url:c,method:i,body:r,headers:a}}async request(e,t="public",i="GET",s={},r,o){const c=await this.fetch2(e,t,i,s,r,o);if(c){if("message"in c){if(c.message.indexOf("not enough exchange balance")>=0)throw new n(this.id+" "+this.json(c));throw new a(this.id+" "+this.json(c))}return c}if(""===c)throw new a(this.id+" returned empty response");return c}handleErrors(e,t,i,s,r,o,n,c,d){if(500===e){const e=this.numberToString(n[1]),t=n[2],i=this.id+" "+t;throw this.throwExactlyMatchedException(this.exceptions.exact,e,i),this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i),new a(this.id+" "+t+" (#"+e+")")}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,OrderNotFound:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitflyer",name:"bitFlyer",countries:["JP"],version:"v1",rateLimit:1e3,hostname:"bitflyer.com",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:"emulated",fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:"emulated",fetchOrder:"emulated",fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28051642-56154182-660e-11e7-9b0d-6042d1e6edd8.jpg",api:"https://api.{hostname}",www:"https://bitflyer.com",doc:"https://lightning.bitflyer.com/docs?lang=en"},api:{public:{get:["getmarkets/usa","getmarkets/eu","getmarkets","getboard","getticker","getexecutions","gethealth","getboardstate","getchats"]},private:{get:["getpermissions","getbalance","getbalancehistory","getcollateral","getcollateralhistory","getcollateralaccounts","getaddresses","getcoinins","getcoinouts","getbankaccounts","getdeposits","getwithdrawals","getchildorders","getparentorders","getparentorder","getexecutions","getpositions","gettradingcommission"],post:["sendcoin","withdraw","sendchildorder","cancelchildorder","sendparentorder","cancelparentorder","cancelallchildorders"]}},fees:{trading:{maker:.002,taker:.002},"BTC/JPY":{maker:.0015,taker:.0015}}})}async fetchMarkets(e={}){const t=await this.publicGetGetmarkets(e),i=await this.publicGetGetmarketsUsa(e),s=await this.publicGetGetmarketsEu(e);let a=this.arrayConcat(t,i);a=this.arrayConcat(a,s);const r=[];for(let e=0;e<a.length;e++){const t=a[e],i=this.safeString(t,"product_code"),s=i.split("_");let o=void 0,n=void 0,c=void 0,d=void 0;const h=s.length;1===h?(o=i.slice(0,3),n=i.slice(3,6)):2===h?(o=s[0],n=s[1]):(o=s[1],n=s[2]),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n);const l=2===h?c+"/"+d:i,u=this.safeValue(this.fees,l,this.fees.trading);let p=this.safeValue(u,"maker",this.fees.trading.maker),f=this.safeValue(u,"taker",this.fees.trading.taker),m=!0,v=!1,y="spot";("alias"in t||"FX"===s[0])&&(y="future",v=!0,m=!1,p=0,f=0),r.push({id:i,symbol:l,base:c,quote:d,baseId:o,quoteId:n,maker:p,taker:f,type:y,spot:m,future:v,info:t})}return r}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetGetbalance(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"currency_code"),r=this.safeCurrencyCode(a),o=this.account();o.total=this.safeFloat(s,"amount"),o.free=this.safeFloat(s,"available"),i[r]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={product_code:this.marketId(e)},a=await this.publicGetGetboard(this.extend(s,i));return this.parseOrderBook(a,void 0,"bids","asks","price","size")}async fetchTicker(e,t={}){await this.loadMarkets();const i={product_code:this.marketId(e)},s=await this.publicGetGetticker(this.extend(i,t)),a=this.parse8601(this.safeString(s,"timestamp")),r=this.safeFloat(s,"ltp");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:void 0,low:void 0,bid:this.safeFloat(s,"best_bid"),bidVolume:void 0,ask:this.safeFloat(s,"best_ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,"volume_by_product"),quoteVolume:void 0,info:s}}parseTrade(e,t){let i=this.safeStringLower(e,"side");void 0!==i&&i.length<1&&(i=void 0);let s=void 0;if(void 0!==i){const t=i+"_child_order_acceptance_id";t in e&&(s=e[t])}void 0===s&&(s=this.safeString(e,"child_order_acceptance_id"));const a=this.parse8601(this.safeString(e,"exec_date")),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"size");let n=void 0;void 0!==o&&void 0!==r&&(n=r*o);const c=this.safeString(e,"id");let d=void 0;return void 0!==t&&(d=t.symbol),{id:c,info:e,timestamp:a,datetime:this.iso8601(a),symbol:d,order:s,type:void 0,side:i,takerOrMaker:void 0,price:r,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={product_code:a.id},o=await this.publicGetGetexecutions(this.extend(r,s));return this.parseTrades(o,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o={product_code:this.marketId(e),child_order_type:t.toUpperCase(),side:i.toUpperCase(),price:a,size:s},n=await this.privatePostSendchildorder(this.extend(o,r));return{info:n,id:this.safeString(n,"child_order_acceptance_id")}}async cancelOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" cancelOrder() requires a `symbol` argument");await this.loadMarkets();const s={product_code:this.marketId(t),child_order_acceptance_id:e};return await this.privatePostCancelchildorder(this.extend(s,i))}parseOrderStatus(e){return this.safeString({ACTIVE:"open",COMPLETED:"closed",CANCELED:"canceled",EXPIRED:"canceled",REJECTED:"canceled"},e,e)}parseOrder(e,t){const i=this.parse8601(this.safeString(e,"child_order_date")),s=this.safeFloat(e,"size"),a=this.safeFloat(e,"outstanding_size"),r=this.safeFloat(e,"executed_size"),o=this.safeFloat(e,"price"),n=o*r,c=this.parseOrderStatus(this.safeString(e,"child_order_state")),d=this.safeStringLower(e,"child_order_type"),h=this.safeStringLower(e,"side"),l=this.safeString(e,"product_code"),u=this.safeSymbol(l,t);let p=void 0;const f=this.safeFloat(e,"total_commission");void 0!==f&&(p={cost:f,currency:void 0,rate:void 0});return{id:this.safeString(e,"child_order_acceptance_id"),clientOrderId:void 0,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:c,symbol:u,type:d,timeInForce:void 0,side:h,price:o,stopPrice:void 0,cost:n,amount:s,filled:r,remaining:a,fee:p,average:void 0,trades:void 0}}async fetchOrders(e,t,i=100,s={}){if(void 0===e)throw new r(this.id+" fetchOrders() requires a `symbol` argument");await this.loadMarkets();const a=this.market(e),o={product_code:a.id,count:i},n=await this.privateGetGetchildorders(this.extend(o,s));let c=this.parseOrders(n,a,t,i);return void 0!==e&&(c=this.filterBy(c,"symbol",e)),c}async fetchOpenOrders(e,t,i=100,s={}){return await this.fetchOrders(e,t,i,this.extend({child_order_state:"ACTIVE"},s))}async fetchClosedOrders(e,t,i=100,s={}){return await this.fetchOrders(e,t,i,this.extend({child_order_state:"COMPLETED"},s))}async fetchOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" fetchOrder() requires a `symbol` argument");const s=await this.fetchOrders(t),a=this.indexBy(s,"id");if(e in a)return a[e];throw new o(this.id+" No order found with id "+e)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchMyTrades requires a `symbol` argument");await this.loadMarkets();const a=this.market(e),o={product_code:a.id};void 0!==i&&(o.count=i);const n=await this.privateGetGetexecutions(this.extend(o,s));return this.parseTrades(n,a,t,i)}async fetchPositions(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchPositions requires a `symbols` argument, exactly one symbol in an array");await this.loadMarkets();const a={product_code:this.marketIds(e)};return await this.privateGetpositions(this.extend(a,s))}async withdraw(e,t,i,s,r={}){if(this.checkAddress(i),await this.loadMarkets(),"JPY"!==e&&"USD"!==e&&"EUR"!==e)throw new a(this.id+" allows withdrawing JPY, USD, EUR only, "+e+" is not supported");const o={currency_code:this.currency(e).id,amount:t},n=await this.privatePostWithdraw(this.extend(o,r));return{info:n,id:this.safeString(n,"message_id")}}sign(e,t="public",i="GET",s={},a,r){let o="/"+this.version+"/";"private"===t&&(o+="me/"),o+=e,"GET"===i&&Object.keys(s).length&&(o+="?"+this.urlencode(s));const n=this.implodeParams(this.urls.api,{hostname:this.hostname})+o;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();let t=[e,i,o].join("");Object.keys(s).length&&"GET"!==i&&(t+=r=this.json(s)),a={"ACCESS-KEY":this.apiKey,"ACCESS-TIMESTAMP":e,"ACCESS-SIGN":this.hmac(this.encode(t),this.encode(this.secret)),"Content-Type":"application/json"}}return{url:n,method:i,body:r,headers:a}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,AuthenticationError:r,OrderNotFound:o,InsufficientFunds:n,DDoSProtection:c,PermissionDenied:d,BadSymbol:h}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitforex",name:"Bitforex",countries:["CN"],version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","12h":"12hour","1d":"1day","1w":"1week","1M":"1month"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87295553-1160ec00-c50e-11ea-8ea0-df79276a9646.jpg",api:"https://api.bitforex.com",www:"https://www.bitforex.com",doc:"https://github.com/githubdev2020/API_Doc_en/wiki",fees:"https://help.bitforex.com/en_us/?cat=13",referral:"https://www.bitforex.com/en/invitationRegister?inviterId=1867438"},api:{public:{get:["api/v1/market/symbols","api/v1/market/ticker","api/v1/market/depth","api/v1/market/trades","api/v1/market/kline"]},private:{post:["api/v1/fund/mainAccount","api/v1/fund/allAccount","api/v1/trade/placeOrder","api/v1/trade/placeMultiOrder","api/v1/trade/cancelOrder","api/v1/trade/orderInfo","api/v1/trade/orderInfos"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001},funding:{tierBased:!1,percentage:!0,deposit:{},withdraw:{BTC:5e-4,ETH:.01,BCH:1e-4,LTC:.001,ETC:.005,USDT:5,CMCT:30,AION:3,LVT:0,DATA:40,RHP:50,NEO:0,AIDOC:10,BQT:2,R:2,DPY:.8,GTC:40,AGI:30,DENT:100,SAN:1,SPANK:8,AID:5,OMG:.1,BFT:5,SHOW:150,TRX:20,ABYSS:10,THM:25,ZIL:20,PPT:.2,WTC:.4,LRC:7,BNT:1,CTXC:1,MITH:20,TRUE:4,LYM:10,VEE:100,AUTO:200,REN:50,TIO:2.5,NGC:1.5,PST:10,CRE:200,IPC:5,PTT:1e3,XMCT:20,ATMI:40,TERN:40,XLM:.01,ODE:15,FTM:100,RTE:100,DCC:100,IMT:500,GOT:3,EGT:500,DACC:1e3,UBEX:500,ABL:100,OLT:100,DAV:40,THRT:10,RMESH:3,UPP:20,SDT:0,SHR:10,MTV:3,ESS:100,MET:3,TTC:20,LXT:10,XCLP:100,LUK:100,UBC:100,DTX:10,BEAT:20,DEED:2,BGX:3e3,PRL:20,ELY:50,CARD:300,SQR:15,VRA:400,BWX:3500,MAS:75,FLP:.6,UNC:300,CRNC:15,MFG:70,ZXC:70,TRT:30,ZIX:35,XRA:10,AMO:1600,IPG:3,uDoo:50,URB:30,ARCONA:3,CRAD:5,NOBS:1e3,ADF:2,ELF:5,LX:20,PATH:15,SILK:120,SKYFT:50,EDN:50,ADE:50,EDR:10,TIME:.25,SPRK:20,QTUM:.01,BF:5,ZPR:100,HYB:10,CAN:30,CEL:10,ATS:50,KCASH:1,ACT:.01,MT:300,DXT:30,WAB:4e3,HYDRO:400,LQD:5,OPTC:200,EQUAD:80,LATX:50,LEDU:100,RIT:70,ACDC:500,FSN:2}}},commonCurrencies:{CREDIT:"TerraCredit",IQ:"IQ.Cash",UOS:"UOS Network"},exceptions:{4004:o,1013:r,1016:r,1017:d,1019:h,3002:n,10204:c}})}async fetchMarkets(e={}){const t=(await this.publicGetApiV1MarketSymbols(e)).data,i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"symbol"),r=a.split("-"),o=r[2],n=r[1],c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=c+"/"+d,l=!0,u={amount:this.safeInteger(s,"amountPrecision"),price:this.safeInteger(s,"pricePrecision")},p={amount:{min:this.safeFloat(s,"minOrderAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}};i.push({id:a,symbol:h,base:c,quote:d,baseId:o,quoteId:n,active:l,precision:u,limits:p,info:s})}return i}parseTrade(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.safeInteger(e,"time"),a=this.safeString(e,"tid"),r=this.safeFloat(e,"amount"),o=this.safeFloat(e,"price");let n=void 0;void 0!==o&&void 0!==r&&(n=r*o);const c=this.safeInteger(e,"direction"),d=this.parseSide(c);return{info:e,id:a,timestamp:s,datetime:this.iso8601(s),symbol:i,type:void 0,side:d,price:o,amount:r,cost:n,order:void 0,fee:void 0,takerOrMaker:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a={symbol:this.marketId(e)};void 0!==i&&(a.size=i);const r=this.market(e),o=await this.publicGetApiV1MarketTrades(this.extend(a,s));return this.parseTrades(o.data,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostApiV1FundAllAccount(e),i=t.data,s={info:t};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"currency"),r=this.safeCurrencyCode(a),o=this.account();o.used=this.safeFloat(t,"frozen"),o.free=this.safeFloat(t,"active"),o.total=this.safeFloat(t,"fix"),s[r]=o}return this.parseBalance(s)}async fetchTicker(e,t={}){await this.loadMarkets();const i={symbol:this.markets[e].id},s=await this.publicGetApiV1MarketTicker(this.extend(i,t)),a=s.data,r=this.safeInteger(a,"date");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(a,"high"),low:this.safeFloat(a,"low"),bid:this.safeFloat(a,"buy"),bidVolume:void 0,ask:this.safeFloat(a,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:this.safeFloat(a,"last"),last:this.safeFloat(a,"last"),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(a,"vol"),quoteVolume:void 0,info:s}}parseOHLCV(e,t){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"vol")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={symbol:r.id,ktype:this.timeframes[t]};void 0!==s&&(o.size=s);const n=await this.publicGetApiV1MarketKline(this.extend(o,a)),c=this.safeValue(n,"data",[]);return this.parseOHLCVs(c,r,t,i,s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.size=t);const a=await this.publicGetApiV1MarketDepth(this.extend(s,i)),r=this.safeValue(a,"data"),o=this.safeInteger(a,"time");return this.parseOrderBook(r,o,"bids","asks","price","amount")}parseOrderStatus(e){const t={0:"open",1:"open",2:"closed",3:"canceled",4:"canceled"};return e in t?t[e]:e}parseSide(e){return 1===e?"buy":2===e?"sell":void 0}parseOrder(e,t){const i=this.safeString(e,"orderId"),s=this.safeFloat(e,"createTime"),a=this.safeFloat(e,"lastTime"),r=t.symbol,o=this.safeInteger(e,"tradeType"),n=this.parseSide(o),c=this.safeFloat(e,"orderPrice"),d=this.safeFloat(e,"avgPrice"),h=this.safeFloat(e,"orderAmount"),l=this.safeFloat(e,"dealAmount"),u=h-l,p=this.parseOrderStatus(this.safeString(e,"orderState")),f=l*c,m=t["buy"===n?"base":"quote"],v={cost:this.safeFloat(e,"tradeFee"),currency:m};return{info:e,id:i,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:a,symbol:r,type:void 0,timeInForce:void 0,side:n,price:c,stopPrice:void 0,cost:f,average:d,amount:h,filled:l,remaining:u,status:p,fee:v,trades:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=this.market(t),a={symbol:this.marketId(t),orderId:e},r=await this.privatePostApiV1TradeOrderInfo(this.extend(a,i));return this.parseOrder(r.data,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:this.marketId(e),state:0},o=await this.privatePostApiV1TradeOrderInfos(this.extend(r,s));return this.parseOrders(o.data,a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:this.marketId(e),state:1},o=await this.privatePostApiV1TradeOrderInfos(this.extend(r,s));return this.parseOrders(o.data,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();let o=void 0;"buy"===i?o=1:"sell"===i&&(o=2);const n={symbol:this.marketId(e),price:a,amount:s,tradeType:o},c=await this.privatePostApiV1TradePlaceOrder(this.extend(n,r)),d=c.data;return{info:c,id:this.safeString(d,"orderId")}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e};void 0!==t&&(s.symbol=this.marketId(t));const a=await this.privatePostApiV1TradeCancelOrder(this.extend(s,i));return{info:a,success:a.success}}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let t=this.urlencode({accessKey:this.apiKey});n.nonce=this.milliseconds(),Object.keys(n).length&&(t+="&"+this.urlencode(this.keysort(n)));const i="/"+e+"?"+t;r=t+"&signData="+this.hmac(this.encode(i),this.encode(this.secret)),a={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if("string"==typeof o&&("{"===o[0]||"["===o[0])){const e=this.id+" "+o,t=this.safeValue(n,"success");if(void 0!==t&&!t){const t=this.safeString(n,"code");throw this.throwExactlyMatchedException(this.exceptions,t,e),new a(e)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ExchangeNotAvailable:r,OnMaintenance:o,ArgumentsRequired:n,BadRequest:c,AccountSuspended:d,InvalidAddress:h,PermissionDenied:l,DDoSProtection:u,InsufficientFunds:p,InvalidNonce:f,CancelPending:m,InvalidOrder:v,OrderNotFound:y,AuthenticationError:g,RequestTimeout:b,NotSupported:w,BadSymbol:k,RateLimitExceeded:x}=i(0),{TICK_SIZE:T}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitget",name:"Bitget",countries:["SG"],version:"v3",rateLimit:1e3,has:{cancelOrder:!0,cancelOrders:!0,CORS:!1,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","12h":"12h","1d":"1d","1w":"1w"},hostname:"bitget.com",urls:{logo:"https://user-images.githubusercontent.com/51840849/88317935-a8a21c80-cd22-11ea-8e2b-4b9fac5975eb.jpg",api:{data:"https://api.{hostname}",api:"https://api.{hostname}",capi:"https://capi.{hostname}",swap:"https://capi.{hostname}"},www:"https://www.bitget.com",doc:["https://bitgetlimited.github.io/apidoc/en/swap","https://bitgetlimited.github.io/apidoc/en/spot"],fees:"https://www.bitget.cc/zh-CN/rate?tab=1",test:{rest:"https://testnet.bitget.com"},referral:"https://www.bitget.com/expressly?languageType=0&channelCode=ccxt&vipCode=tg9j"},api:{data:{get:["market/history/kline","market/detail/merged","market/tickers","market/allticker","market/depth","market/trade","market/history/trade","market/detail","common/symbols","common/currencys","common/timestamp"]},api:{get:["account/accounts","accounts/{account_id}/balance","order/orders","order/orders/openOrders","order/orders/history","order/deposit_withdraw"],post:["order/orders/place","order/orders/{order_id}/submitcancel","order/orders/batchcancel","order/orders/{order_id}","order/orders/{order_id}/matchresults","order/matchresults"]},capi:{get:["market/time","market/contracts","market/depth","market/tickers","market/ticker","market/trades","market/candles","market/index","market/open_count","market/open_interest","market/price_limit","market/funding_time","market/mark_price","market/open_count","market/historyFundRate"]},swap:{get:["account/accounts","account/account","account/settings","position/allPosition","position/singlePosition","position/holds","order/detail","order/orders","order/fills","order/current","order/currentPlan","order/history","order/historyPlan","trace/closeTrack","trace/currentTrack","trace/historyTrack"],post:["account/leverage","account/adjustMargin","account/modifyAutoAppendMargin","order/placeOrder","order/batchOrders","order/cancel_order","order/cancel_batch_orders","order/plan_order","order/cancel_plan","position/changeHoldModel"]}},fees:{spot:{taker:.002,maker:.002},swap:{taker:6e-4,maker:4e-4}},requiredCredentials:{apiKey:!0,secret:!0,password:!0},exceptions:{exact:{1:a,"failure to get a peer from the ring-balancer":r,4010:l,4001:a,4002:a,30001:g,30002:g,30003:g,30004:g,30005:f,30006:g,30007:c,30008:b,30009:a,30010:g,30011:l,30012:g,30013:g,30014:u,30015:g,30016:a,30017:a,30018:a,30019:r,30020:c,30021:c,30022:l,30023:c,30024:k,30025:c,30026:u,30027:g,30028:l,30029:d,30030:a,30031:c,30032:k,30033:c,30034:a,30035:a,30036:a,30037:r,30038:o,32001:d,32002:l,32003:m,32004:a,32005:v,32006:v,32007:v,32008:v,32009:v,32010:a,32011:a,32012:a,32013:a,32014:a,32015:a,32016:a,32017:a,32018:a,32019:a,32020:a,32021:a,32022:a,32023:a,32024:a,32025:a,32026:a,32027:a,32028:d,32029:a,32030:v,32031:n,32038:g,32040:a,32044:a,32045:a,32046:a,32047:a,32048:v,32049:a,32050:v,32051:v,32052:a,32053:a,32057:a,32054:a,32055:v,32056:a,32058:a,32059:v,32060:v,32061:v,32062:v,32063:v,32064:a,32065:a,32066:a,32067:a,32068:a,32069:a,32070:a,32071:a,32072:a,32073:a,32074:a,32075:a,32076:a,32077:a,32078:a,32079:a,32080:a,32083:a,33001:l,33002:d,33003:p,33004:a,33005:a,33006:a,33007:a,33008:p,33009:a,33010:a,33011:a,33012:a,33013:v,33014:y,33015:v,33016:a,33017:p,33018:a,33020:a,33021:c,33022:v,33023:a,33024:v,33025:v,33026:a,33027:v,33028:v,33029:v,33034:a,33035:a,33036:a,33037:a,33038:a,33039:a,33040:a,33041:a,33042:a,33043:a,33044:a,33045:a,33046:a,33047:a,33048:a,33049:a,33050:a,33051:a,33059:c,33060:c,33061:a,33062:a,33063:a,33064:a,33065:a,21009:a,34001:l,34002:h,34003:a,34004:a,34005:a,34006:a,34007:a,34008:p,34009:a,34010:a,34011:a,34012:a,34013:a,34014:a,34015:a,34016:l,34017:d,34018:g,34019:l,34020:l,34021:h,34022:a,34023:l,34026:a,34036:a,34037:a,34038:a,34039:a,35001:a,35002:a,35003:a,35004:a,35005:g,35008:v,35010:v,35012:v,35014:v,35015:v,35017:a,35019:v,35020:v,35021:v,35022:a,35024:a,35025:p,35026:a,35029:y,35030:v,35031:v,35032:a,35037:a,35039:a,35040:v,35044:a,35046:p,35047:p,35048:a,35049:v,35050:v,35052:p,35053:a,35055:p,35057:a,35058:a,35059:c,35060:c,35061:c,35062:v,35063:v,35064:v,35066:v,35067:v,35068:v,35069:v,35070:v,35071:v,35072:v,35073:v,35074:v,35075:v,35076:v,35077:v,35078:v,35079:v,35080:v,35081:v,35082:v,35083:v,35084:v,35085:v,35086:v,35087:v,35088:v,35089:v,35090:a,35091:a,35092:a,35093:a,35094:a,35095:c,35096:a,35097:a,35098:a,35099:a,36001:c,36002:c,36005:a,36101:g,36102:l,36103:d,36104:l,36105:l,36106:d,36107:l,36108:p,36109:l,36201:l,36202:l,36203:v,36204:a,36205:c,36206:c,36207:v,36208:v,36209:v,36210:v,36211:v,36212:v,36213:v,36214:a,36216:y,36217:v,36218:v,36219:v,36220:v,36221:v,36222:v,36223:v,36224:v,36225:v,36226:v,36227:v,36228:v,36229:v,36230:v,400:c,401:g,403:l,404:c,405:c,415:c,429:u,500:r,1001:x,1002:a,1003:a,40001:g,40002:g,40003:g,40004:f,40005:f,40006:g,40007:c,40008:f,40009:g,40010:g,40011:g,40012:g,40013:a,40014:l,40015:a,40016:l,40017:a,40018:l,40102:c,40103:c,40104:a,40105:a,40106:a,40107:a,40108:v,40109:y,40200:o,40201:v,40202:a,40203:c,40204:c,40205:c,40206:c,40207:c,40208:c,40209:c,40300:a,40301:l,40302:c,40303:c,40304:c,40305:c,40306:a,40308:o,40309:k,40400:a,40401:a,40402:c,40403:c,40404:c,40405:c,40406:c,40407:a,40408:a,40409:a,40500:v,40501:a,40502:a,40503:a,40504:a,40505:a,40506:g,40507:g,40508:a,40509:a,40600:a,40601:a,40602:a,40603:a,40604:r,40605:a,40606:a,40607:a,40608:a,40609:a,40700:c,40701:a,40702:a,40703:a,40704:a,40705:c,40706:v,40707:c,40708:c,40709:a,40710:a,40711:p,40712:p,40713:a,40714:a,"invalid sign":g,"invalid currency":k,"invalid symbol":k,"invalid period":c,"invalid user":a,"invalid amount":v,"invalid type":v,"invalid orderId":v,"invalid record":a,"invalid accountId":c,"invalid address":c,"accesskey not null":g,"illegal accesskey":g,"sign not null":g,"req_time is too much difference from server time":f,"permissions not right":l,"illegal sign invalid":g,"user locked":d,"Request Frequency Is Too High":x,"more than a daily rate of cash":c,"more than the maximum daily withdrawal amount":c,"need to bind email or mobile":a,"user forbid":l,"User Prohibited Cash Withdrawal":l,"Cash Withdrawal Is Less Than The Minimum Value":c,"Cash Withdrawal Is More Than The Maximum Value":c,"the account with in 24 hours ban coin":l,"order cancel fail":c,"base symbol error":k,"base date error":a,"api signature not valid":g,"gateway internal error":a,"audit failed":a,"order queryorder invalid":c,"market no need price":v,"limit need price":v,"userid not equal to account_id":a,"your balance is low":p,"address invalid cointype":a,"system exception":a,50003:a,50004:k,50006:l,50007:l,50008:b,50009:x,50010:a,50014:v,50015:v,50016:v,50017:v,50018:v,50019:v,50020:p,50021:v,50026:v,"invalid order query time":a,"invalid start time":c,"invalid end time":c,20003:a,"01001":a},broad:{"invalid size, valid range":a}},precisionMode:T,options:{createMarketBuyOrderRequiresPrice:!0,fetchMarkets:["spot","swap"],parseOHLCV:{volume:{spot:"amount",swap:5}},defaultType:"spot",accountId:void 0,timeframes:{spot:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","2h":"120min","4h":"240min","6h":"360min","12h":"720min","1d":"1day","1w":"1week"},swap:{"1m":"60","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800"}}}})}async fetchTime(e={}){const t=await this.dataGetCommonTimestamp(e);return this.safeInteger(t,"data")}async fetchMarkets(e={}){let t=this.safeValue(this.options,"fetchMarkets");t.length||(t=[this.options.defaultType]);let i=[];for(let s=0;s<t.length;s++){const a=await this.fetchMarketsByType(t[s],e);i=this.arrayConcat(i,a)}return i}parseMarkets(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.parseMarket(e[i]));return t}parseMarket(e){const t=this.safeString(e,"symbol");let i="spot",s=!0,a=!1;const r=this.safeString2(e,"base_currency","coin"),o=this.safeString(e,"quote_currency");void 0!==this.safeFloat(e,"contract_val")&&(i="swap",s=!1,a=!0);const n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o);let d=t.toUpperCase();s&&(d=n+"/"+c);const h=this.safeString(e,"tick_size"),l=this.safeString(e,"size_increment"),u={amount:parseFloat("1e-"+l),price:parseFloat("1e-"+h)},p=this.safeFloat2(e,"min_size","base_min_size"),f=this.safeString(e,"status");let m=void 0;void 0!==f&&(m="1"===f);const v=this.safeValue2(this.fees,i,"trading",{});return this.extend(v,{id:t,symbol:d,base:n,quote:c,baseId:r,quoteId:o,info:e,type:i,spot:s,swap:a,active:m,precision:u,limits:{amount:{min:p,max:void 0},price:{min:u.price,max:void 0},cost:{min:u.price,max:void 0}}})}async fetchMarketsByType(e,t={}){if("spot"===e){const e=await this.dataGetCommonSymbols(t),i=this.safeValue(e,"data",[]);return this.parseMarkets(i)}if("swap"===e){const e=await this.capiGetMarketContracts(t);return this.parseMarkets(e)}throw new w(this.id+" fetchMarketsByType does not support market type "+e)}async fetchCurrencies(e={}){const t=await this.dataGetCommonCurrencys(e),i={},s=this.safeValue(t,"data",[]);for(let e=0;e<s.length;e++){const t=s[e],a=this.safeCurrencyCode(t);i[a]={id:t,code:a,info:t,type:void 0,name:void 0,active:void 0,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),a={symbol:s.id};let r=void 0;s.spot?(r="dataGetMarketDepth",a.type="step0"):s.swap&&(r="capiGetMarketDepth",a.limit=void 0===t?100:t);const o=await this[r](this.extend(a,i)),n=this.safeValue(o,"data",o),c=this.safeInteger2(n,"timestamp","ts"),d=this.safeInteger(n,"id"),h=this.parseOrderBook(n,c);return h.nonce=d,h}parseTicker(e,t){const i=this.safeInteger2(e,"timestamp","id");let s=void 0;const a=this.safeString2(e,"instrument_id","symbol");if(a in this.markets_by_id)s=(t=this.markets_by_id[a]).symbol;else if(void 0!==a){const e=a.split("_");if(2===e.length){const[t,i]=e;s=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}else s=a}void 0===s&&void 0!==t&&(s=t.symbol);const r=this.safeFloat2(e,"last","close"),o=this.safeFloat(e,"open");let n=void 0,c=void 0,d=this.safeValue(e,"bid");void 0===d?d=this.safeFloat(e,"best_bid"):(n=this.safeFloat(d,1),d=this.safeFloat(d,0));let h=this.safeValue(e,"ask");void 0===h?h=this.safeFloat(e,"best_ask"):(c=this.safeFloat(h,1),h=this.safeFloat(h,0));const l=this.safeFloat2(e,"amount","volume_24h"),u=this.safeFloat(e,"vol"),p=this.vwap(l,u);let f=void 0,m=void 0,v=void 0;return void 0!==r&&void 0!==o&&(f=r-o,m=f/o*100,v=this.sum(o,r)/2),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat2(e,"high","high_24h"),low:this.safeFloat2(e,"low","low_24h"),bid:d,bidVolume:n,ask:h,askVolume:c,vwap:p,open:o,close:r,last:r,previousClose:void 0,change:f,percentage:m,average:v,baseVolume:l,quoteVolume:u,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e);let s=void 0;i.spot?s="dataGetMarketDetailMerged":i.swap&&(s="capiGetMarketTicker");const a={symbol:i.id},r=await this[s](this.extend(a,t)),o=this.safeValue(r,"data",r);return this.parseTicker(o,i)}async fetchTickersByType(e,t,i={}){await this.loadMarkets();let s=void 0;"spot"===e?s="dataGetMarketTickers":"swap"===e&&(s="capiGetMarketTickers");const a=await this[s](i),r=this.safeValue(a,"data",a);let o=void 0;Array.isArray(a)||(o=this.safeInteger(a,"ts"));const n={};for(let e=0;e<r.length;e++){const t=this.parseTicker(this.extend({timestamp:o},r[e]));n[t.symbol]=t}return this.filterByArray(n,"symbol",t)}async fetchTickers(e,t={}){const i=this.safeString2(this.options,"fetchTickers","defaultType"),s=this.safeString(t,"type",i);return await this.fetchTickersByType(s,e,this.omit(t,"type"))}parseTrade(e,t){let i=void 0;const s=this.safeString(e,"symbol");let a=void 0,r=void 0;if(s in this.markets_by_id)i=(t=this.markets_by_id[s]).symbol,a=t.base,r=t.quote;else if(void 0!==s){const e=s.split("_");if(2===e.length){const[t,s]=e;a=this.safeCurrencyCode(t),r=this.safeCurrencyCode(s),i=a+"/"+r}else i=s.toUpperCase()}void 0===i&&void 0!==t&&(i=t.symbol,a=t.base,r=t.quote);let o=this.safeInteger(e,"created_at");o=this.safeInteger2(e,"timestamp","ts",o);const n=this.safeFloat(e,"price");let c=this.safeFloat2(e,"filled_amount","order_qty");c=this.safeFloat2(e,"size","amount",c);let d=this.safeString2(e,"exec_type","liquidity");"M"===d?d="maker":"T"===d&&(d="taker");let h=void 0,l=void 0;void 0!==this.safeString(e,"type")?(h=this.safeString(e,"type"),l=this.parseOrderType(h),h=this.parseOrderSide(h)):(h=this.safeString2(e,"side","direction"),l=this.parseOrderType(h),h=this.parseOrderSide(h));let u=void 0;void 0!==c&&void 0!==n&&(u=c*n);let p=this.safeFloat(e,"fee");p=void 0===p?this.safeFloat(e,"filled_fees"):-p;let f=void 0;if(void 0!==p){f={cost:p,currency:"buy"===h?a:r}}const m=this.safeString(e,"order_id"),v=this.safeString2(e,"trade_id","id");return{info:e,timestamp:o,datetime:this.iso8601(o),symbol:i,id:v,order:m,type:l,takerOrMaker:d,side:h,price:n,amount:c,cost:u,fee:f}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id};let o=void 0;a.spot?o="dataGetMarketHistoryTrade":a.swap&&(o="capiGetMarketTrades"),a.spot?void 0!==t&&(r.size=t):a.swap&&(void 0===t&&(t=100),r.limit=t);const n=await this[o](this.extend(r,s));let c=void 0;if(Array.isArray(n))c=n;else{const e=this.safeValue(n,"data",{});c=this.safeValue2(e,"data",[])}return this.parseTrades(c,a,i,t)}parseOHLCV(e,t,i="1m"){const s=this.safeValue(this.options,"parseOHLCV",{}),a=this.safeValue(s,"volume",{});if(Array.isArray(e)){const i=this.safeString(a,t.type,"amount");return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,i)]}{const i=this.safeValue(a,t.type,6);return[this.safeInteger(e,"id"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,i)]}}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={symbol:r.id};let n=void 0;const c=r.type,d=this.safeValue(this.options,"timeframes",{}),h=this.safeValue(d,c,{}),l=this.safeValue(h,this.timeframes[t]);if(r.spot)n="dataGetMarketHistoryKline",o.period=l,void 0!==s&&(o.size=s);else if(r.swap){const e=this.parseTimeframe(t);n="capiGetMarketCandles",o.granularity=l;const a=this.milliseconds();void 0===i?(void 0===s&&(s=1e3),o.start=this.iso8601(a-s*e*1e3),o.end=this.iso8601(a)):(o.start=this.iso8601(i),o.end=void 0===s?this.iso8601(a):this.iso8601(this.sum(i,s*e*1e3)))}const u=await this[n](this.extend(o,a));let p=u;return Array.isArray(u)||(p=this.safeValue(u,"data",[])),this.parseOHLCVs(p,r,t,i,s)}parseSpotBalance(e){const t={info:e},i=this.safeValue(e,"data"),s=this.safeValue(i,"list");for(let e=0;e<s.length;e++){const i=s[e],a=this.safeString(i,"currency"),r=this.safeCurrencyCode(a);if(!(r in t)){const e=this.account();t[r]=e}const o=this.safeValue(i,"type");if("trade"===o)t[r].free=this.safeFloat(i,"balance");else if("frozen"===o||"lock"===o){const e=this.safeFloat(t[r],"used");t[r].used=this.sum(e,this.safeFloat(i,"balance"))}}return this.parseBalance(t)}parseSwapBalance(e){const t={};for(let i=0;i<e.length;i++){const s=e[i],a=this.safeString(s,"symbol");let r=a;a in this.markets_by_id&&(r=this.markets_by_id[a].symbol);const o=this.account();o.total=this.safeFloat(s,"equity"),o.free=this.safeFloat(s,"total_avail_balance"),t[r]=o}return this.parseBalance(t)}async fetchAccounts(e={}){const t=await this.apiGetAccountAccounts(this.extend({method:"accounts"},e)),i=this.safeValue(t,"data",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"id"),r=this.safeStringLower(t,"type");s.push({id:a,type:r,currency:void 0,info:t})}return s}async findAccountByType(e){await this.loadMarkets(),await this.loadAccounts();const t=this.groupBy(this.accounts,"type"),i=this.safeValue(t,e);if(void 0===i)throw new a(this.id+" findAccountByType() could not find an accountId with type '"+e+"', specify the 'accountId' parameter instead");if(i.length>1)throw new a(this.id+" findAccountByType() found more than one accountId with type '"+e+"', specify the 'accountId' parameter instead");return i[0]}async getAccountId(e){await this.loadMarkets(),await this.loadAccounts();const t=this.safeString(this.options,"accountId"),i=this.safeString(e,"accountId",t);if(void 0!==i)return i;const s=this.safeString(this.options,"defaultType","margin"),a=this.safeString(e,"type",s);if(e=this.omit(e,"type"),void 0===a)throw new n(this.id+" requires an 'accountId' parameter");return(await this.findAccountByType(a)).id}async fetchBalance(e={}){await this.loadMarkets(),await this.loadAccounts();const t=this.safeString2(this.options,"fetchBalance","defaultType"),i=this.safeString(e,"type",t);if(void 0===i)throw new n(this.id+" fetchBalance requires a 'type' parameter, one of 'spot', 'swap'");let s=void 0;const a=this.omit(e,"type");if("spot"===i){const t=await this.getAccountId(e);s="apiGetAccountsAccountIdBalance",a.account_id=t,a.method="balance"}else"swap"===i&&(s="swapGetAccountAccounts");const r=await this[s](a);return this.parseBalanceByType(i,r)}parseBalanceByType(e,t){if("spot"===e)return this.parseSpotBalance(t);if("swap"===e)return this.parseSwapBalance(t);throw new w(this.id+" fetchBalance does not support the '"+e+"' type (the type must be one of 'account', 'spot', 'margin', 'futures', 'swap')")}parseOrderStatus(e){return this.safeString({submitted:"open","partial-filled":"open","partial-canceled":"canceled",filled:"closed",canceled:"canceled","-2":"failed","-1":"canceled",0:"open",1:"open",2:"closed",3:"open",4:"canceled"},e,e)}parseOrderSide(e){return this.safeString({"buy-market":"buy","sell-market":"sell","buy-limit":"buy","sell-limit":"sell",1:"long",2:"short",3:"long",4:"short"},e,e)}parseOrderType(e){return this.safeString({"buy-market":"market","sell-market":"market","buy-limit":"limit","sell-limit":"limit",1:"open",2:"open",3:"close",4:"close"},e,e)}parseOrder(e,t){let i=this.safeString(e,"order_id");i=this.safeString2(e,"id","data",i);const s=this.safeInteger2(e,"created_at","createTime");let a=this.safeString(e,"type");const r=this.parseOrderSide(a);a=this.parseOrderType(a);let o=void 0;const n=this.safeString(e,"symbol");void 0!==n&&(n in this.markets_by_id?t=this.markets_by_id[n]:o=n.toUpperCase()),void 0===o&&void 0!==t&&(o=t.symbol);let c=this.safeFloat2(e,"amount","size");const d=this.safeFloat2(e,"filled_amount","filled_qty");let h=void 0;void 0!==c&&void 0!==d&&(c=Math.max(c,d),h=Math.max(0,c-d)),"market"===a&&(h=0);const l=this.safeFloat(e,"filled_cash_amount"),u=this.safeFloat(e,"price");let p=this.safeFloat(e,"price_avg");void 0===p&&void 0!==d&&void 0!==l&&d>0&&(p=l/d);const f=this.parseOrderStatus(this.safeString2(e,"state","status")),m=this.safeFloat2(e,"filled_fees","fee");let v=void 0;if(void 0!==m){v={cost:m,currency:void 0}}return{info:e,id:i,clientOrderId:this.safeString(e,"client_oid"),timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:o,type:a,timeInForce:void 0,side:r,price:u,stopPrice:void 0,average:p,cost:l,amount:c,filled:d,remaining:h,status:f,fee:v,trades:void 0}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets(),await this.loadAccounts();const o=this.market(e),c={symbol:o.id},d=this.safeString2(r,"client_oid","clientOrderId",this.uuid());r=this.omit(r,["client_oid","clientOrderId"]);let h=void 0;if(o.spot){const n=await this.getAccountId({type:o.type});if(h="apiPostOrderOrdersPlace",c.account_id=n,c.method="place",c.type=i+"-"+t,"limit"===t)c.amount=this.amountToPrecision(e,s),c.price=this.priceToPrecision(e,a);else if("market"===t)if("buy"===i){let t=this.safeFloat(r,"amount");if(this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){if(void 0!==a)void 0===t&&(t=s*a);else if(void 0===t)throw new v(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'amount' extra parameter (the exchange-specific behaviour)")}else t=void 0===t?s:t;c.amount=this.costToPrecision(e,t)}else"sell"===i&&(c.amount=this.amountToPrecision(e,s))}else if(o.swap){c.order_type="0",c.client_oid=d;const i=this.safeString(r,"type");if(void 0===i)throw new n(this.id+" createOrder requires a type parameter, '1' = open long, '2' = open short, '3' = close long, '4' = close short for "+o.type+" orders");c.size=this.amountToPrecision(e,s),c.type=i,"limit"===t?(c.match_price="0",c.price=this.priceToPrecision(e,a)):"market"===t&&(c.match_price="1"),h="swapPostOrderPlaceOrder"}const l=await this[h](this.extend(c,r));return this.parseOrder(l,o)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=void 0,a=void 0;if(void 0===t){const e=this.safeString2(this.options,"cancelOrder","defaultType");if("spot"===this.safeString(i,"type",e)&&void 0===t)throw new n(this.id+" cancelOrder requires a symbol argument for spot orders")}else s=this.market(t),a=s.type;const r=this.omit(i,"type");let o=void 0;const c={};"spot"===a?(o="apiPostOrderOrdersOrderIdSubmitcancel",c.order_id=e,c.method="submitcancel"):"swap"===a&&(o="swapPostOrderCancelOrder",c.orderId=e,c.symbol=s.id);const d=await this[o](this.extend(c,r));return this.parseOrder(d,s)}async cancelOrders(e,t,i={}){if(void 0===t)throw new n(this.id+" cancelOrders requires a symbol argument");await this.loadMarkets();const s=this.market(t),a=this.safeString(i,"type",s.type);if(void 0===a)throw new n(this.id+" cancelOrders requires a type parameter (one of 'spot', 'swap').");const r={};let o=void 0;if("spot"===a){o="apiPostOrderOrdersBatchcancel",r.method="batchcancel";const t=this.json(e).split('"');r.order_ids=t.join("")}else"swap"===a&&(o="swapPostOrderCancelBatchOrders",r.symbol=s.id,r.ids=e);return await this[o](this.extend(r,i))}async fetchOrder(e,t,i={}){if(void 0===t)throw new n(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a=this.safeString(i,"type",s.type);if(void 0===a)throw new n(this.id+" fetchOrder requires a type parameter (one of 'spot', 'swap').");let r=void 0;const o={};if("spot"===a){const t=this.safeString(i,"client_oid");void 0!==t?(r="apiPostOrderOrdersClientOid",o.client_oid=t):(r="apiPostOrderOrdersOrderId",o.order_id=e),o.method="getOrder"}else"swap"===a&&(r="swapGetOrderDetail",o.symbol=s.id,o.orderId=e);const c=this.omit(i,"type"),d=await this[r](this.extend(o,c)),h=this.safeValue(d,"data",d);return this.parseOrder(h,s)}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchOpenOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e),r=this.safeString(s,"type",a.type),o={symbol:a.id};let c=void 0;"spot"===r?(c="apiGetOrderOrdersOpenOrders",o.method="openOrders",void 0===i&&(o.size=i)):"swap"===r&&(c="swapGetOrderOrders",o.status="3",o.from="1",o.to="1",void 0===i&&(o.limit=100));const d=this.omit(s,"type"),h=await this[c](this.extend(o,d));let l=h;return Array.isArray(h)||(l=this.safeValue(h,"data",[])),this.parseOrders(l,a,void 0,i)}async fetchClosedOrders(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchClosedOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e),r=this.safeString(s,"type",a.type),o={symbol:a.id};let c=void 0;"spot"===r?(c="apiGetOrderOrdersHistory",void 0!==t&&(o.start_time=t),o.method="openOrders",void 0===i&&(o.size=i)):"swap"===r&&(c="swapGetOrderOrders",o.status="2",o.from="1",o.to="1",void 0===i&&(o.limit=100));const d=this.omit(s,"type"),h=await this[c](this.extend(o,d));let l=h;return Array.isArray(h)||(l=this.safeValue(h,"data",[])),this.parseOrders(l,a,void 0,i)}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchDeposits requires a currency code argument");await this.loadMarkets();const a=this.currency(e),r={currency:a.id,method:"deposit_withdraw",type:"deposit",size:12},o=await this.apiGetOrderDepositWithdraw(this.extend(r,s)),c=this.safeValue(o,"data",[]);return this.parseTransactions(c,a,t,i,s)}async fetchWithdrawals(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchWithdrawals requires a currency code argument");await this.loadMarkets();const a=this.currency(e),r={currency:a.id,method:"deposit_withdraw",type:"withdraw",size:12},o=await this.apiGetOrderDepositWithdraw(this.extend(r,s)),c=this.safeValue(o,"data",[]);return this.parseTransactions(c,a,t,i,s)}parseTransactionStatus(e){return this.safeString({WaitForOperation:"pending",OperationLock:"pending",OperationSuccess:"ok",Cancel:"canceled",Sure:"ok",Fail:"failed",WaitForChainSure:"ok",WAIT_0:"pending",WAIT_1:"pending",DATA_CHANGE:"pending",SUCCESS:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"address"),a=this.safeString(e,"address_tag"),r=a,o=s;let n=this.safeString(e,"type");"withdraw"===n?n="withdrawal":"deposit"===n&&(n="deposit");const c=this.safeString(e,"currency"),d=this.safeCurrencyCode(c),h=this.safeFloat(e,"amount"),l=this.parseTransactionStatus(this.safeString(e,"state")),u=this.safeString(e,"tx_hash"),p=this.safeInteger(e,"created_at"),f=this.safeInteger(e,"updated_at"),m=this.safeFloat(e,"fee");let v=void 0;return void 0!==m&&(v={currency:d,cost:m}),{info:e,id:i,currency:d,amount:h,addressFrom:void 0,addressTo:o,address:s,tagFrom:void 0,tagTo:r,tag:a,status:l,type:n,updated:f,txid:u,timestamp:p,datetime:this.iso8601(p),fee:v}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const a=this.market(e),r=this.safeString(s,"type",a.type),o=this.omit(s,"type");if("swap"===r)throw new n(this.id+" fetchMyTrades is not supported for "+r+" type");const c={symbol:a.id,method:"matchresults"};if(void 0!==t){c.start_date=this.ymd(t);const e=this.sum(t,1728e5);c.end_date=this.ymd(e)}void 0!==i&&(c.size=i);const d=await this.apiPostOrderMatchresults(this.extend(c,o)),h=this.safeValue(d,"data",[]);return this.parseTrades(h,a,t,i)}async fetchOrderTrades(e,t,i,s,a={}){if(void 0===t)throw new n(this.id+" fetchOrderTrades requires a symbol argument");await this.loadMarkets();const r=this.market(t),o=this.safeString(a,"type",r.type),c=this.omit(a,"type");let d=void 0;const h={};"spot"===o?(h.order_id=e,h.method="matchresults",d="apiPostOrderOrdersOrderIdMatchresults"):"swap"===o&&(h.orderId=e,h.symbol=r.id,d="swapGetOrderFills");const l=await this[d](this.extend(h,c));let u=l;return Array.isArray(u)||(u=this.safeValue(l,"data",[])),await this.parseTrades(u,r,i,s)}async fetchPosition(e,t={}){await this.loadMarkets();const i={symbol:this.market(e).id};return await this.swapGetPositionSinglePosition(this.extend(i,t))}async fetchPositions(e,t,i,s={}){await this.loadMarkets();return await this.swapGetPositionAllPosition(s)}sign(e,t="public",i="GET",s={},a,r){let o="/"+this.implodeParams(e,s);o="capi"===t||"swap"===t?"/api/swap/"+this.version+o:"/"+t+"/v1"+o;let n=this.omit(s,this.extractParams(e)),c=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+o;if("data"===t||"capi"===t)Object.keys(n).length&&(c+="?"+this.urlencode(n));else if("swap"===t){this.checkRequiredCredentials();const e=this.milliseconds().toString();let t=e+i+o;if("POST"===i)t+=r=this.json(s);else if(Object.keys(s).length){const e=this.urlencode(this.keysort(s));c+="?"+e,t+="?"+e}const n=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64");a={"ACCESS-KEY":this.apiKey,"ACCESS-SIGN":n,"ACCESS-TIMESTAMP":e,"ACCESS-PASSPHRASE":this.password},"POST"===i&&(a["Content-Type"]="application/json")}else if("api"===t){const e=this.milliseconds().toString();let t="";n=this.keysort(n),t=this.rawencode(n);const s=this.hash(this.encode(this.secret),"sha1");let o=t;const d=this.hmac(this.encode(t),this.encode(s),"md5");t.length>0&&(o+="&"),o+="sign="+d+"&req_time="+e+"&accesskey="+this.apiKey,"GET"===i?Object.keys(n).length&&(c+="?"+o):"POST"===i&&(c+="?sign="+d+"&req_time="+e+"&accesskey="+this.apiKey,r=t,a={"Content-Type":"application/x-www-form-urlencoded"})}return{url:c,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(!n)return;const h=this.safeString(n,"err_msg"),l=this.safeString2(n,"code","err_code"),u=this.id+" "+o,p=void 0!==h&&""!==h;p&&(this.throwExactlyMatchedException(this.exceptions.exact,h,u),this.throwBroadlyMatchedException(this.exceptions.broad,h,u));const f=void 0!==l&&"00000"!==l;if(f&&this.throwExactlyMatchedException(this.exceptions.exact,l,u),f||p)throw new a(u)}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ExchangeNotAvailable:r,AuthenticationError:o,BadRequest:n,PermissionDenied:c,InvalidAddress:d,ArgumentsRequired:h,InvalidOrder:l}=i(0),{DECIMAL_PLACES:u,SIGNIFICANT_DIGITS:p,TRUNCATE:f}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bithumb",name:"Bithumb",countries:["KR"],rateLimit:500,has:{cancelOrder:!0,CORS:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/30597177-ea800172-9d5e-11e7-804c-b9d4fa9b56b0.jpg",api:{public:"https://api.bithumb.com/public",private:"https://api.bithumb.com"},www:"https://www.bithumb.com",doc:"https://apidocs.bithumb.com",fees:"https://en.bithumb.com/customer_support/info_fee"},api:{public:{get:["ticker/{currency}","ticker/all","orderbook/{currency}","orderbook/all","transaction_history/{currency}","transaction_history/all"]},private:{post:["info/account","info/balance","info/wallet_address","info/ticker","info/orders","info/user_transactions","info/order_detail","trade/place","trade/cancel","trade/btc_withdrawal","trade/krw_deposit","trade/krw_withdrawal","trade/market_buy","trade/market_sell"]}},fees:{trading:{maker:.0025,taker:.0025}},precisionMode:p,exceptions:{"Bad Request(SSL)":n,"Bad Request(Bad Method)":n,"Bad Request.(Auth Data)":o,"Not Member":o,"Invalid Apikey":o,"Method Not Allowed.(Access IP)":c,"Method Not Allowed.(BTC Adress)":d,"Method Not Allowed.(Access)":c,"Database Fail":r,"Invalid Parameter":n,5600:a,"Unknown Error":a,"After May 23th, recent_transactions is no longer, hence users will not be able to connect to recent_transactions":a}})}amountToPrecision(e,t){return this.decimalToPrecision(t,f,this.markets[e].precision.amount,u)}async fetchMarkets(e={}){const t=await this.publicGetTickerAll(e),i=this.safeValue(t,"data"),s=Object.keys(i),a=[],r=this.safeCurrencyCode("KRW");for(let e=0;e<s.length;e++){const t=s[e];if("date"===t)continue;const o=i[t],n=this.safeCurrencyCode(t),c=t+"/"+r;let d=!0;if(Array.isArray(o)){0===o.length&&(d=!1)}a.push({id:t,symbol:c,base:n,quote:r,info:o,active:d,precision:{amount:4,price:4},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:500,max:5e9}},baseId:void 0,quoteId:void 0})}return a}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostInfoBalance(this.extend({currency:"ALL"},e)),i={info:t},s=this.safeValue(t,"data"),a=Object.keys(this.currencies);for(let e=0;e<a.length;e++){const t=a[e],r=this.account(),o=this.currency(t),n=this.safeStringLower(o,"id");r.total=this.safeFloat(s,"total_"+n),r.used=this.safeFloat(s,"in_use_"+n),r.free=this.safeFloat(s,"available_"+n),i[t]=r}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currency:this.market(e).base};void 0!==t&&(s.count=t);const a=await this.publicGetOrderbookCurrency(this.extend(s,i)),r=this.safeValue(a,"data",{}),o=this.safeInteger(r,"timestamp");return this.parseOrderBook(r,o,"bids","asks","price","quantity")}parseTicker(e,t){const i=this.safeInteger(e,"date");let s=void 0;void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"opening_price"),r=this.safeFloat(e,"closing_price");let o=void 0,n=void 0,c=void 0;void 0!==r&&void 0!==a&&(o=r-a,a>0&&(n=o/a*100),c=this.sum(a,r)/2);const d=this.safeFloat(e,"units_traded_24H"),h=this.safeFloat(e,"acc_trade_value_24H"),l=this.vwap(d,h);return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"max_price"),low:this.safeFloat(e,"min_price"),bid:this.safeFloat(e,"buy_price"),bidVolume:void 0,ask:this.safeFloat(e,"sell_price"),askVolume:void 0,vwap:l,open:a,close:r,last:r,previousClose:void 0,change:o,percentage:n,average:c,baseVolume:d,quoteVolume:h,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickerAll(t),s={},a=this.safeValue(i,"data",{}),r=this.safeInteger(a,"date"),o=this.omit(a,"date"),n=Object.keys(o);for(let e=0;e<n.length;e++){const t=n[e];let i=t,a=void 0;t in this.markets_by_id&&(a=this.markets_by_id[t],i=a.symbol);const c=o[t];Array.isArray(c)||(c.date=r,s[i]=this.parseTicker(c,a))}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={currency:i.base},a=await this.publicGetTickerCurrency(this.extend(s,t)),r=this.safeValue(a,"data",{});return this.parseTicker(r,i)}parseTrade(e,t){let i=void 0;const s=this.safeString(e,"transaction_date");if(void 0!==s){const t=s.split(" ");if(t.length>1){const e=t[0];let s=t[1];s.length<8&&(s="0"+s),i=this.parse8601(e+" "+s)}else i=this.safeIntegerProduct(e,"transaction_date",.001)}void 0!==i&&(i-=324e5);let a=this.safeString(e,"type");a="ask"===a?"sell":"buy";const r=this.safeString(e,"cont_no");let o=void 0;void 0!==t&&(o=t.symbol);const n=this.safeFloat(e,"price"),c=this.safeFloat2(e,"units_traded","units");let d=this.safeFloat(e,"total");void 0===d&&void 0!==c&&void 0!==n&&(d=n*c);let h=void 0;const l=this.safeFloat(e,"fee");if(void 0!==l){const t=this.safeString(e,"fee_currency");h={cost:l,currency:this.commonCurrencyCode(t)}}return{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:o,order:void 0,type:void 0,side:a,takerOrMaker:void 0,price:n,amount:c,cost:d,fee:h}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={currency:a.base};void 0===i&&(r.count=i);const o=await this.publicGetTransactionHistoryCurrency(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n={order_currency:o.id,Payment_currency:o.quote,units:s};let c="privatePostTradePlace";"limit"===t?(n.price=a,n.type="buy"===i?"bid":"ask"):c="privatePostTradeMarket"+this.capitalize(i);const d=await this[c](this.extend(n,r)),h=this.safeString(d,"order_id");if(void 0===h)throw new l(this.id+" createOrder did not return an order id");return{info:d,symbol:e,type:t,side:i,id:h}}async fetchOrder(e,t,i={}){if(void 0===t)throw new h(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a={order_id:e,count:1,order_currency:s.base,payment_currency:s.quote},r=await this.privatePostInfoOrderDetail(this.extend(a,i)),o=this.safeValue(r,"data");return this.parseOrder(this.extend(o,{order_id:e}),s)}parseOrderStatus(e){return this.safeString({Pending:"open",Completed:"closed",Cancel:"canceled"},e,e)}parseOrder(e,t){const i=this.safeIntegerProduct(e,"order_date",.001),s="bid"===this.safeValue2(e,"type","side")?"buy":"sell",a=this.parseOrderStatus(this.safeString(e,"order_status"));let r=this.safeFloat2(e,"order_price","price"),o="limit";0===r&&(r=void 0,o="market");const n=this.safeFloat2(e,"order_qty","units");let c=this.safeFloat(e,"units_remaining");void 0===c&&("closed"===a?c=0:"canceled"!==a&&(c=n));let d=void 0;const h=this.safeString(e,"order_currency"),l=this.safeString(e,"payment_currency"),u=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l);void 0!==u&&void 0!==p&&(d=u+"/"+p),void 0===d&&void 0!==t&&(d=t.symbol);let f=void 0,m=void 0,v=void 0;const y=this.safeString(e,"order_id"),g=this.safeValue(e,"contract");let b=void 0,w=void 0,k=void 0,x=void 0;if(void 0!==g){b=this.parseTrades(g,t,void 0,void 0,{side:s,symbol:d,order:y}),f=0,x={};for(let e=0;e<b.length;e++){const t=b[e];f=this.sum(f,t.amount),m=this.sum(m,t.cost);const i=t.fee,s=i.currency;x[s]=s in x?{currency:s,cost:this.sum(x[s].cost,i.cost)}:{currency:s,cost:i.cost}}const e=Object.keys(x);if(e.length>1){k=[];for(let t=0;t<e.length;t++){const i=e[t];k.push(x[i])}}else w=this.safeValue(x,e[0]);0!==f&&(v=m/f)}void 0!==n&&(void 0===f&&void 0!==c&&(f=Math.max(0,n-c)),void 0===c&&void 0!==f&&(c=Math.max(0,n-f)));const T={info:e,id:y,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:d,type:o,timeInForce:void 0,side:s,price:r,stopPrice:void 0,amount:n,cost:m,average:v,filled:f,remaining:c,status:a,fee:void 0,trades:b};return void 0!==w?T.fee=w:void 0!==k&&(T.fees=k),T}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new h(this.id+" fetchOpenOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e);void 0===i&&(i=100);const r={count:i,order_currency:a.base,payment_currency:a.quote};void 0!==t&&(r.after=t);const o=await this.privatePostInfoOrders(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseOrders(n,a,t,i)}async cancelOrder(e,t,i={}){if(!("side"in i))throw new h(this.id+" cancelOrder requires a `symbol` argument and a `side` parameter (sell or buy)");if(void 0===t)throw new h(this.id+" cancelOrder requires a `symbol` argument and a `side` parameter (sell or buy)");const s=this.market(t),a="buy"===i.side?"bid":"ask";i=this.omit(i,["side","currency"]);const r={order_id:e,type:a,order_currency:s.base,payment_currency:s.quote};return await this.privatePostTradeCancel(this.extend(r,i))}cancelUnifiedOrder(e,t={}){const i={side:e.side};return this.cancelOrder(e.id,e.symbol,this.extend(i,t))}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e),o={units:t,address:i,currency:r.id};if("XRP"===r||"XMR"===r){const t=this.safeString(a,"destination");if(void 0===s&&void 0===t)throw new h(this.id+" "+e+" withdraw() requires a tag argument or an extra destination param");void 0!==s&&(o.destination=s)}return{info:await this.privatePostTradeBtcWithdrawal(this.extend(o,a)),id:void 0}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){const o="/"+this.implodeParams(e,s);let n=this.urls.api[t]+o;const c=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(c).length&&(n+="?"+this.urlencode(c));else{this.checkRequiredCredentials(),r=this.urlencode(this.extend({endpoint:o},c));const e=this.nonce().toString(),t=o+"\0"+r+"\0"+e,i=this.hmac(this.encode(t),this.encode(this.secret),"sha512"),s=this.decode(this.stringToBase64(i));a={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded","Api-Key":this.apiKey,"Api-Sign":s,"Api-Nonce":e}}return{url:n,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0!==n&&"status"in n){const e=this.safeString(n,"status"),t=this.safeString(n,"message");if(void 0!==e){if("0000"===e)return;const i=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions,e,i),this.throwExactlyMatchedException(this.exceptions,t,i),new a(i)}}}async request(e,t="public",i="GET",s={},r,o){const n=await this.fetch2(e,t,i,s,r,o);if("status"in n){if("0000"===n.status)return n;throw new a(this.id+" "+this.json(n))}return n}}},function(e,t,i){"use strict";const s=i(87);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitkk",name:"bitkk",comment:"a Chinese ZB clone",urls:{api:{public:"http://api.bitkk.com/data",private:"https://trade.bitkk.com/api"},www:"https://www.bitkk.com",doc:"https://www.bitkk.com/i/developer",fees:"https://www.bitkk.com/i/rate"}})}}},function(e,t,i){"use strict";const s=i(1),{AuthenticationError:a,ExchangeNotAvailable:r,AccountSuspended:o,PermissionDenied:n,RateLimitExceeded:c,InvalidNonce:d,InvalidAddress:h,ArgumentsRequired:l,ExchangeError:u,InvalidOrder:p,InsufficientFunds:f,BadRequest:m,OrderNotFound:v,BadSymbol:y,NotSupported:g}=i(0),{ROUND:b,TICK_SIZE:w,TRUNCATE:k}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitmart",name:"BitMart",countries:["US","CN","HK","KR"],rateLimit:1e3,version:"v1",has:{cancelAllOrders:!0,cancelOrder:!0,cancelOrders:!0,createOrder:!0,fetchBalance:!0,fetchCanceledOrders:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchStatus:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},hostname:"bitmart.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/61835713-a2662f80-ae85-11e9-9d00-6442919701fd.jpg",api:"https://api-cloud.{hostname}",www:"https://www.bitmart.com/",doc:"https://github.com/bitmartexchange/bitmart-official-api-docs",referral:"http://www.bitmart.com/?r=rQCFLh",fees:"https://www.bitmart.com/fee/en"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{system:{get:["time","service"]},account:{get:["currencies"]},spot:{get:["currencies","symbols","symbols/details","ticker","steps","symbols/kline","symbols/book","symbols/trades"]},contract:{get:["contracts","pnls","indexes","tickers","quote","indexquote","trades","depth","fundingrate"]}},private:{account:{get:["wallet","deposit/address","withdraw/charge","deposit-withdraw/history","deposit-withdraw/detail"],post:["withdraw/apply"]},spot:{get:["wallet","order_detail","orders","trades"],post:["submit_order","cancel_order","cancel_orders"]},contract:{get:["userOrders","userOrderInfo","userTrades","orderTrades","accounts","userPositions","userLiqRecords","positionFee"],post:["batchOrders","submitOrder","cancelOrders","marginOper"]}}},timeframes:{"1m":1,"3m":3,"5m":5,"15m":15,"30m":30,"45m":45,"1h":60,"2h":120,"3h":180,"4h":240,"1d":1440,"1w":10080,"1M":43200},fees:{trading:{tierBased:!0,percentage:!0,taker:.002,maker:.001,tiers:{taker:[[0,.002],[10,.0018],[50,.0016],[250,.14/100],[1e3,.0012],[5e3,.001],[25e3,8e-4],[5e4,6e-4]],maker:[[0,.001],[10,9e-4],[50,8e-4],[250,.07/100],[1e3,6e-4],[5e3,5e-4],[25e3,4e-4],[5e4,3e-4]]}}},precisionMode:w,exceptions:{exact:{3e4:u,30001:a,30002:a,30003:o,30004:a,30005:a,30006:a,30007:a,30008:a,30010:n,30011:a,30012:a,30013:c,30014:r,6e4:m,60001:m,60002:m,60003:u,60004:u,60005:u,60006:u,60007:h,60008:f,60009:u,60010:u,60011:h,60012:u,60020:n,60021:n,60022:n,60030:m,60031:m,60050:u,60051:u,5e4:m,50001:y,50002:m,50003:m,50004:m,50005:v,50006:p,50007:p,50008:p,50009:p,50010:p,50011:p,50012:p,50013:p,50014:m,50015:m,50016:m,50017:m,50018:m,50019:m,50020:f,50021:m,50022:r,50023:y,53e3:o,57001:m,58001:m,59001:u,59002:u,40001:u,40002:u,40003:u,40004:u,40005:u,40006:n,40007:m,40008:d,40009:m,40010:m,40011:m,40012:u,40013:u,40014:y,40015:y,40016:p,40017:p,40018:p,40019:u,40020:p,40021:u,40022:u,40023:u,40024:u,40025:u,40026:u,40027:f,40028:n,40029:p,40030:p,40031:p,40032:p,40033:p,40034:y},broad:{}},commonCurrencies:{ONE:"Menlo One",PLA:"Plair"},options:{defaultType:"spot",fetchBalance:{type:"spot"},createMarketBuyOrderRequiresPrice:!0}})}async fetchTime(e={}){const t=await this.publicSystemGetTime(e),i=this.safeValue(t,"data",{});return this.safeInteger(i,"server_time")}async fetchStatus(e={}){const t=this.safeValue(this.options,"fetchBalance",{}),i=this.safeString(this.options,"defaultType");let s=this.safeString(t,"type",i);s=this.safeString(e,"type",s),e=this.omit(e,"type");const a=await this.publicSystemGetService(e),r=this.safeValue(a,"data",{}),o=this.safeValue(r,"service",[]),n=this.indexBy(o,"service_type");"swap"!==s&&"future"!==s||(s="contract");const c=this.safeValue(n,s);let d=void 0,h=void 0;if(void 0!==c){2===this.safeInteger(c,"status")?d="ok":(d="maintenance",h=this.safeInteger(c,"end_time"))}return this.status=this.extend(this.status,{status:d,updated:this.milliseconds(),eta:h}),this.status}async fetchSpotMarkets(e={}){const t=await this.publicSpotGetSymbolsDetails(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"symbols",[]),a=[];for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"symbol"),r=this.safeInteger(t,"symbol_id"),o=this.safeString(t,"base_currency"),n=this.safeString(t,"quote_currency"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=c+"/"+d,l=this.safeInteger(t,"price_max_precision"),u={amount:this.safeFloat(t,"base_min_size"),price:parseFloat(this.decimalToPrecision(Math.pow(10,-l),b,10))},p=this.safeFloat(t,"min_buy_amount"),f=this.safeFloat(t,"min_sell_amount"),m=Math.max(p,f),v={amount:{min:this.safeFloat(t,"base_min_size"),max:this.safeFloat(t,"base_max_size")},price:{min:void 0,max:void 0},cost:{min:m,max:void 0}};a.push({id:i,numericId:r,symbol:h,base:c,quote:d,baseId:o,quoteId:n,type:"spot",spot:!0,future:!1,swap:!1,precision:u,limits:v,info:t,active:void 0})}return a}async fetchContractMarkets(e={}){const t=await this.publicContractGetContracts(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"contracts",[]),a=[];for(let e=0;e<s.length;e++){const t=s[e],i=this.safeValue(t,"contract",{}),r=this.safeString(i,"contract_id"),o=this.safeInteger(i,"contract_id"),n=this.safeString(i,"base_coin"),c=this.safeString(i,"quote_coin"),d=this.safeCurrencyCode(n),h=this.safeCurrencyCode(c),l=this.safeString(i,"name"),u={amount:this.safeFloat(i,"vol_unit"),price:this.safeFloat(i,"price_unit")},p={amount:{min:this.safeFloat(i,"min_vol"),max:this.safeFloat(i,"max_vol")},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},f=this.safeValue(i,"contract_type");let m=!1,v=!1,y="contract";1===f?(y="swap",v=!0):2===f&&(y="future",m=!0);const g=this.safeValue(t,"fee_config",{}),b=this.safeFloat(g,"maker_fee"),w=this.safeFloat(g,"taker_fee");a.push({id:r,numericId:o,symbol:l,base:d,quote:h,baseId:n,quoteId:c,maker:b,taker:w,type:y,spot:!1,future:m,swap:v,precision:u,limits:p,info:t,active:void 0})}return a}async fetchMarkets(e={}){const t=await this.fetchSpotMarkets(),i=await this.fetchContractMarkets();return this.arrayConcat(t,i)}parseTicker(e,t){const i=this.safeTimestamp(e,"timestamp",this.milliseconds()),s=this.safeString2(e,"symbol","contract_id"),a=this.safeSymbol(s,t,"_"),r=this.safeFloat2(e,"close_24h","last_price");let o=this.safeFloat(e,"fluctuation","rise_fall_rate");void 0!==o&&(o*=100);const n=this.safeFloat2(e,"base_volume_24h","base_coin_volume"),c=this.safeFloat2(e,"quote_volume_24h","quote_coin_volume"),d=this.vwap(n,c),h=this.safeFloat2(e,"open_24h","open");let l=void 0;void 0!==r&&void 0!==h&&(l=this.sum(r,h)/2),l=this.safeFloat(e,"avg_price",l);const u=this.safeValue(e,"depth_price",e);return{symbol:a,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat2(e,"high","high_24h"),low:this.safeFloat2(e,"low","low_24h"),bid:this.safeFloat(u,"best_bid","bid_price"),bidVolume:this.safeFloat(e,"best_bid_size"),ask:this.safeFloat(u,"best_ask","ask_price"),askVolume:this.safeFloat(e,"best_ask_size"),vwap:d,open:this.safeFloat(e,"open_24h"),close:r,last:r,previousClose:void 0,change:void 0,percentage:o,average:l,baseVolume:n,quoteVolume:c,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={};let a=void 0;i.swap||i.future?(a="publicContractGetTickers",s.contractID=i.id):i.spot&&(a="publicSpotGetTicker",s.symbol=i.id);const r=await this[a](this.extend(s,t)),o=this.safeValue(r,"data",{}),n=this.safeValue(o,"tickers",[]),c=this.indexBy(n,"symbol"),d=this.safeValue(c,i.id);return this.parseTicker(d,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.safeString(this.options,"defaultType","spot"),s=this.safeString(t,"type",i);t=this.omit(t,"type");let a=void 0;"swap"===s||"future"===s?a="publicContractGetTickers":"spot"===s&&(a="publicSpotGetTicker");const r=await this[a](t),o=this.safeValue(r,"data",{}),n=this.safeValue(o,"tickers",[]),c={};for(let e=0;e<n.length;e++){const t=this.parseTicker(n[e]);c[t.symbol]=t}return this.filterByArray(c,"symbol",e)}async fetchCurrencies(e={}){const t=await this.publicAccountGetCurrencies(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"currencies",[]),a={};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"currency"),r=this.safeCurrencyCode(i),o=this.safeString(t,"name"),n=this.safeValue(t,"withdraw_enabled"),c=this.safeValue(t,"deposit_enabled"),d=n&&c;a[r]={id:i,code:r,name:o,info:t,active:d,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return a}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),a={};let r=void 0;s.spot?(r="publicSpotGetSymbolsBook",a.symbol=s.id):(s.swap||s.future)&&(r="publicContractGetDepth",a.contractID=s.id,void 0!==t&&(a.count=t));const o=await this[r](this.extend(a,i)),n=this.safeValue(o,"data",{});return s.spot?this.parseOrderBook(n,void 0,"buys","sells","price","amount"):s.swap||s.future?this.parseOrderBook(n,void 0,"buys","sells","price","vol"):void 0}parseTrade(e,t){const i=this.safeString2(e,"trade_id","detail_id");let s=this.safeInteger2(e,"order_time","create_time");void 0===s&&(s=this.parse8601(this.safeString(e,"created_at")));const a=this.safeInteger(e,"way");let r=this.safeStringLower2(e,"type","side");void 0===r&&void 0!==a&&(r=a<5?"buy":"sell");let o=void 0;const n=this.safeString(e,"exec_type");void 0!==n&&(o="M"===n?"maker":"taker");let c=this.safeFloat2(e,"price","deal_price");c=this.safeFloat(e,"price_avg",c);let d=this.safeFloat2(e,"amount","deal_vol");d=this.safeFloat(e,"size",d);let h=this.safeFloat2(e,"count","notional");void 0===h&&void 0!==c&&void 0!==d&&(h=d*c);const l=this.safeInteger(e,"order_id"),u=this.safeString2(e,"contract_id","symbol"),p=this.safeSymbol(u,t,"_"),f=this.safeFloat(e,"fees");let m=void 0;if(void 0!==f){const i=this.safeString(e,"fee_coin_name");let s=this.safeCurrencyCode(i);void 0===s&&void 0!==t&&(s="buy"===r?t.base:t.quote),m={cost:f,currency:s}}return{info:e,id:i,order:l,timestamp:s,datetime:this.iso8601(s),symbol:p,type:void 0,side:r,price:c,amount:d,cost:h,takerOrMaker:o,fee:m}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id};let o=void 0;a.spot?(r.symbol=a.id,o="publicSpotGetSymbolsTrades"):(a.swap||a.future)&&(o="publicContractGetTrades",r.contractID=a.id);const n=await this[o](this.extend(r,s)),c=this.safeValue(n,"data",{}),d=this.safeValue(c,"trades",[]);return this.parseTrades(d,a,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,"timestamp"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o=r.type;let n=void 0;const c={},d=this.parseTimeframe(t);if("spot"===o){n="publicSpotGetSymbolsKline",c.symbol=r.id,c.step=this.timeframes[t];const e=500;if(void 0===s&&(s=e),s=Math.min(e,s),void 0===i){const e=parseInt(this.milliseconds()/1e3),t=e-s*d;c.from=t,c.to=e}else{const e=parseInt(i/1e3),t=this.sum(e,s*d);c.from=e,c.to=t}}else if("swap"===o||"future"===o){n="publicContractGetQuote",c.contractID=r.id;const e=500;if(void 0===s&&(s=e),void 0===i){const e=parseInt(this.milliseconds()/1e3),t=e-s*d;c.startTime=t,c.endTime=e}else{const e=parseInt(i/1e3),t=this.sum(e,s*d);c.startTime=e,c.endTime=t}c.unit=this.timeframes[t],c.resolution="M"}const h=await this[n](this.extend(c,a)),l=this.safeValue(h,"data",{});if(Array.isArray(l))return this.parseOHLCVs(l,r,t,i,s);{const e=this.safeValue(l,"klines",[]);return this.parseOHLCVs(e,r,t,i,s)}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new l(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const a=this.market(e);let r=void 0;const o={};a.spot?(o.symbol=a.id,o.offset=1,void 0===i&&(i=100),o.limit=i,r="privateSpotGetTrades"):(a.swap||a.future)&&(o.contractID=a.id,void 0!==i&&(o.size=i),r="privateContractGetUserTrades");const n=await this[r](this.extend(o,s)),c=this.safeValue(n,"data",{}),d=this.safeValue(c,"trades",[]);return this.parseTrades(d,a,t,i)}async fetchOrderTrades(e,t,i,s,a={}){if(void 0===t)throw new l(this.id+" fetchOrderTrades requires a symbol argument");await this.loadMarkets();const r=this.market(t);let o=void 0;const n={};r.spot?(n.symbol=r.id,n.order_id=e,o="privateSpotGetTrades"):(r.swap||r.future)&&(n.contractID=r.id,n.orderID=e,o="privateContractGetOrderTrades");const c=await this[o](this.extend(n,a)),d=this.safeValue(c,"data",{}),h=this.safeValue(d,"trades",[]);return this.parseTrades(h,r,i,s)}async fetchBalance(e={}){await this.loadMarkets();let t=void 0;const i=this.safeValue(this.options,"fetchBalance",{}),s=this.safeString(this.options,"defaultType","spot");let a=this.safeString(i,"type",s);a=this.safeString(e,"type",a),e=this.omit(e,"type"),"spot"===a?t="privateSpotGetWallet":"account"===a?t="privateAccountGetWallet":"swap"!==a&&"future"!==a&&"contract"!==a||(t="privateContractGetAccounts");const r=await this[t](e),o=this.safeValue(r,"data",{}),n=this.safeValue2(o,"wallet","accounts",[]),c={info:r};for(let e=0;e<n.length;e++){const t=n[e];let i=this.safeString2(t,"id","currency");i=this.safeString(t,"coind_code",i);const s=this.safeCurrencyCode(i),a=this.account();a.free=this.safeFloat2(t,"available","available_vol"),a.used=this.safeFloat2(t,"frozen","freeze_vol"),c[s]=a}return this.parseBalance(c)}parseOrder(e,t){let i=void 0;"string"==typeof e&&(i=e,e={}),i=this.safeString(e,"order_id",i);let s=this.parse8601(this.safeString(e,"created_at"));s=this.safeInteger(e,"create_time",s);const a=this.safeString2(e,"symbol","contract_id"),r=this.safeSymbol(a,t,"_");let o=void 0;void 0!==t&&(o=this.parseOrderStatusByType(t.type,this.safeString(e,"status")));let n=this.safeFloat(e,"price"),c=this.safeFloat2(e,"price_avg","done_avg_price");const d=this.safeFloat2(e,"size","vol");let h=void 0,l=this.safeFloat2(e,"filled_size","done_vol"),u=void 0;void 0!==d&&(void 0!==u&&void 0===l&&(l=Math.max(0,d-u)),void 0!==l&&(void 0===u&&(u=Math.max(0,d-l)),void 0===h&&void 0!==c&&(h=c*l)));let p=this.safeString(e,"side");p=this.safeString(e,"way",p);const f=this.safeInteger(e,"category");let m=this.safeString(e,"type");return 1===f?m="limit":2===f&&(m="market"),"market"===m&&(0===n&&(n=void 0),0===c&&(c=void 0)),{id:i,clientOrderId:void 0,info:e,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:r,type:m,timeInForce:void 0,side:p,price:n,stopPrice:void 0,amount:d,cost:h,average:c,filled:l,remaining:u,status:o,fee:void 0,trades:void 0}}parseOrderStatusByType(e,t){const i=this.safeValue({spot:{1:"failed",2:"open",3:"failed",4:"open",5:"open",6:"closed",7:"canceling",8:"canceled"},swap:{1:"open",2:"open",4:"closed"}},e,{});return this.safeString(i,t,t)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n={};let c=void 0;if(o.spot){if(n.symbol=o.id,n.side=i,n.type=t,c="privateSpotPostSubmitOrder","limit"===t)n.size=this.amountToPrecision(e,s),n.price=this.priceToPrecision(e,a);else if("market"===t)if("buy"===i){let e=this.safeFloat(r,"notional");if(this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){if(void 0!==a)void 0===e&&(e=s*a);else if(void 0===e)throw new p(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'notional' extra parameter (the exchange-specific behaviour)")}else e=void 0===e?s:e;const t=o.precision.price;n.notional=this.decimalToPrecision(e,k,t,this.precisionMode)}else"sell"===i&&(n.size=this.amountToPrecision(e,s))}else(o.swap||o.future)&&(c="privateContractPostSubmitOrder",n.contractID=o.id,"limit"===t?n.category=1:"market"===t&&(n.category=2),n.way=i,n.custom_id=this.nonce(),n.open_type=1,n.leverage=1,n.price=this.priceToPrecision(e,a),n.vol=this.amountToPrecision(e,s));const d=await this[c](this.extend(n,r)),h=this.safeValue(d,"data",{});return this.parseOrder(h,o)}async cancelOrder(e,t,i={}){if(void 0===t)throw new l(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a={};let r=void 0;s.spot?(r="privateSpotPostCancelOrder",a.order_id=parseInt(e),a.symbol=s.id):(s.swap||s.future)&&(r="privateContractPostCancelOrders",a.contractID=s.id,a.orders=[parseInt(e)]);const o=await this[r](this.extend(a,i)),n=this.safeValue(o,"data"),c=this.safeValue(n,"succeed");if(void 0!==c){if(void 0===(e=this.safeString(c,0)))throw new p(this.id+" cancelOrder failed to cancel "+t+" order id "+e)}else{if(!this.safeValue(n,"result"))throw new p(this.id+" cancelOrder "+t+" order id "+e+" is filled or canceled")}const d=this.parseOrder(e,s);return this.extend(d,{id:e})}async cancelAllOrders(e,t={}){if(void 0===e)throw new l(this.id+" cancelAllOrders requires a symbol argument");const i=this.safeString(t,"side");if(void 0===i)throw new l(this.id+" cancelAllOrders requires a `side` parameter ('buy' or 'sell')");await this.loadMarkets();const s=this.market(e);if(!s.spot)throw new g(this.id+" cancelAllOrders does not support "+s.type+" orders, only spot orders are accepted");const a={symbol:s.id,side:i};return await this.privateSpotPostCancelOrders(this.extend(a,t))}async cancelOrders(e,t,i={}){if(void 0===t)throw new l(this.id+" canelOrders requires a symbol argument");await this.loadMarkets();const s=this.market(t);if(!s.spot)throw new g(this.id+" cancelOrders does not support "+s.type+" orders, only contract orders are accepted");const a=[];for(let t=0;t<e.length;t++)a.push(parseInt(e[t]));const r={orders:a};return await this.privateContractPostCancelOrders(this.extend(r,i))}async fetchOrdersByStatus(e,t,i,s,a={}){if(void 0===t)throw new l(this.id+" fetchOrdersByStatus requires a symbol argument");await this.loadMarkets();const r=this.market(t),o={};let n=void 0;r.spot?(n="privateSpotGetOrders",o.symbol=r.id,o.offset=1,o.limit=100,o.status="open"===e?9:"closed"===e?6:e):(r.swap||r.future)&&(n="privateContractGetUserOrders",o.contractID=r.id,void 0!==s&&(o.size=s),o.status="open"===e?3:"closed"===e?4:e);const c=await this[n](this.extend(o,a)),d=this.safeValue(c,"data",{}),h=this.safeValue(d,"orders",[]);return this.parseOrders(h,r,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("open",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("closed",e,t,i,s)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new l(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e);if(!a.swap&&!a.future)throw new g(this.id+" fetchOrders does not support "+a.type+" markets, only contracts are supported");return await this.fetchOrdersByStatus(0,e,t,i,s)}async fetchOrder(e,t,i={}){if(void 0===t)throw new l(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s={},a=this.market(t);let r=void 0;"string"!=typeof e&&(e=e.toString()),a.spot?(s.symbol=a.id,s.order_id=e,r="privateSpotGetOrderDetail"):(a.swap||a.future)&&(s.contractID=a.id,s.orderID=e,r="privateContractGetUserOrderInfo");const o=await this[r](this.extend(s,i)),n=this.safeValue(o,"data");if("orders"in n){const i=this.safeValue(n,"orders",[]),s=this.safeValue(i,0);if(void 0===s)throw new v(this.id+" fetchOrder could not find "+t+" order id "+e);return this.parseOrder(s,a)}return this.parseOrder(n,a)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateAccountGetDepositAddress(this.extend(i,t)),a=this.safeValue(s,"data",{}),r=this.safeString(a,"address"),o=this.safeString(a,"address_memo");return this.checkAddress(r),{currency:e,address:r,tag:o,info:s}}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e),o={currency:r.id,amount:t,destination:"To Digital Address",address:i};void 0!==s&&(o.address_memo=s);const n=await this.privateAccountPostWithdrawApply(this.extend(o,a)),c=this.safeValue(n,"data"),d=this.parseTransaction(c,r);return this.extend(d,{code:e,address:i,tag:s})}async fetchTransactionsByType(e,t,i,s,a={}){await this.loadMarkets(),void 0===s&&(s=50);const r={operation_type:e,offset:1,limit:s};let o=void 0;void 0!==t&&(o=this.currenc(t),r.currency=o.id);const n=await this.privateAccountGetDepositWithdrawHistory(this.extend(r,a)),c=this.safeValue(n,"data",{}),d=this.safeValue(c,"records",[]);return this.parseTransactions(d,o,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsByType("deposit",e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsByType("withdraw",e,t,i,s)}parseTransactionStatus(e){return this.safeString({0:"pending",1:"pending",2:"pending",3:"ok",4:"canceled",5:"failed"},e,e)}parseTransaction(e,t){let i=void 0;const s=this.safeString(e,"withdraw_id"),a=this.safeString(e,"deposit_id");let r=void 0;void 0!==s&&""!==s?(r="withdraw",i=s):void 0!==a&&""!==a&&(r="deposit",i=a);const o=this.safeFloat(e,"arrival_amount"),n=this.safeInteger(e,"tapply_timeime"),c=this.safeString(e,"currency"),d=this.safeCurrencyCode(c,t),h=this.parseTransactionStatus(this.safeString(e,"status")),l=this.safeFloat(e,"fee");let u=void 0;void 0!==l&&(u={cost:l,currency:d});let p=this.safeString(e,"tx_id");""===p&&(p=void 0);return{info:e,id:i,currency:d,amount:o,address:this.safeString(e,"address"),addressFrom:void 0,addressTo:void 0,tag:this.safeString(e,"address_memo"),tagFrom:void 0,tagTo:void 0,status:h,type:r,updated:void 0,txid:p,timestamp:n,datetime:this.iso8601(n),fee:u}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){const o=this.implodeParams(this.urls.api,{hostname:this.hostname}),n=this.safeString(t,0),c=this.safeString(t,1);let d=o+"/"+c;"system"!==c&&(d+="/"+this.version),"contract"===c&&(d+="/ifcontract"),d+="/"+this.implodeParams(e,s);const h=this.omit(s,this.extractParams(e));if("system"===c)Object.keys(h).length&&(d+="?"+this.urlencode(h));else if("public"===n)Object.keys(h).length&&(d+="?"+this.urlencode(h));else if("private"===n){this.checkRequiredCredentials();const e=this.milliseconds().toString();let t="";a={"X-BM-KEY":this.apiKey,"X-BM-TIMESTAMP":e},"POST"===i||"PUT"===i?(a["Content-Type"]="application/json",t=r=this.json(h)):Object.keys(h).length&&(t=this.urlencode(h),d+="?"+t);const s=e+"#"+this.uid+"#"+t,o=this.hmac(this.encode(s),this.encode(this.secret));a["X-BM-SIGN"]=o}return{url:d,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,r,o,n,c){if(void 0===o)return;const d=this.safeString(o,"message"),h=this.safeString(o,"code");if(void 0!==h&&"1000"!==h||void 0!==d&&"OK"!==d){const e=this.id+" "+r;throw this.throwExactlyMatchedException(this.exceptions.exact,h,e),this.throwBroadlyMatchedException(this.exceptions.broad,h,e),this.throwExactlyMatchedException(this.exceptions.exact,d,e),this.throwBroadlyMatchedException(this.exceptions.broad,d,e),new u(e)}}}},function(e,t,i){"use strict";const s=i(1),{ArgumentsRequired:a,AuthenticationError:r,ExchangeError:o,InsufficientFunds:n,InvalidOrder:c,BadSymbol:d,PermissionDenied:h,BadRequest:l}=i(0),{ROUND:u,TICK_SIZE:p}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitmax",name:"BitMax",countries:["CN"],rateLimit:500,has:{CORS:!1,fetchMarkets:!0,fetchCurrencies:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchOHLCV:!0,fetchTrades:!0,fetchAccounts:!0,fetchBalance:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchDepositAddress:!0,fetchTransactions:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","6h":"360","12h":"720","1d":"1d","1w":"1w","1M":"1m"},version:"v1",urls:{logo:"https://user-images.githubusercontent.com/1294454/66820319-19710880-ef49-11e9-8fbe-16be62a11992.jpg",api:"https://bitmax.io",test:"https://bitmax-test.io",www:"https://bitmax.io",doc:["https://bitmax-exchange.github.io/bitmax-pro-api/#bitmax-pro-api-documentation"],fees:"https://bitmax.io/#/feeRate/tradeRate",referral:"https://bitmax.io/#/register?inviteCode=EL6BXBQM"},api:{public:{get:["assets","products","ticker","barhist/info","barhist","depth","trades","cash/assets","cash/products","margin/assets","margin/products","futures/collateral","futures/contracts","futures/ref-px","futures/market-data","futures/funding-rates"]},accountCategory:{get:["balance","order/open","order/status","order/hist/current","risk"],post:["order","order/batch"],delete:["order","order/all","order/batch"]},accountGroup:{get:["cash/balance","margin/balance","margin/risk","transfer","futures/collateral-balance","futures/position","futures/risk","futures/funding-payments","order/hist"],post:["futures/transfer/deposit","futures/transfer/withdraw"]},private:{get:["info","wallet/transactions","wallet/deposit/address"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.001,maker:.001}},precisionMode:p,options:{"account-category":"cash","account-group":void 0,fetchClosedOrders:{method:"accountGroupGetOrderHist"}},exceptions:{exact:{1900:l,2100:r,5002:d,6001:d,6010:n,60060:c,600503:c,100001:l,100002:l,100003:l,100004:l,100005:l,100006:l,100007:l,100008:d,100009:r,100010:l,100011:l,100012:l,100013:l,100101:o,150001:l,200001:r,200002:o,200003:o,200004:o,200005:o,200006:o,200007:o,200008:o,200009:o,200010:r,200011:o,200012:o,200013:o,200014:h,200015:h,300001:c,300002:c,300003:c,300004:c,300005:c,300006:c,300007:c,300008:c,300009:c,300011:n,300012:d,300013:c,300020:c,300021:c,300031:c,310001:n,310002:c,310003:c,310004:d,310005:c,510001:o,900001:o},broad:{}},commonCurrencies:{BTCBEAR:"BEAR",BTCBULL:"BULL"}})}getAccount(e={}){return this.safeValue(e,"account",this.options.account).toLowerCase().capitalize()}async fetchCurrencies(e={}){const t=await this.publicGetAssets(e),i=await this.publicGetMarginAssets(e),s=await this.publicGetCashAssets(e),a=this.safeValue(t,"data",[]),r=this.safeValue(i,"data",[]),o=this.safeValue(s,"data",[]),n=this.indexBy(a,"assetCode"),c=this.indexBy(r,"assetCode"),d=this.indexBy(o,"assetCode"),h=this.deepExtend(n,c,d),l=Object.keys(h),u={};for(let e=0;e<l.length;e++){const t=l[e],i=h[t],s=this.safeCurrencyCode(t),a=this.safeInteger2(i,"precisionScale","nativeScale"),r=this.safeFloat2(i,"withdrawFee","withdrawalFee"),o="Normal"===this.safeString2(i,"status","statusCode"),n="borrowAssetCode"in i;u[s]={id:t,code:s,info:i,type:void 0,margin:n,name:this.safeString(i,"assetName"),active:o,fee:r,precision:a,limits:{amount:{min:Math.pow(10,-a),max:void 0},price:{min:Math.pow(10,-a),max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(i,"minWithdrawalAmt"),max:void 0}}}}return u}async fetchMarkets(e={}){const t=await this.publicGetProducts(e),i=await this.publicGetCashProducts(e),s=await this.publicGetFuturesContracts(e),a=this.safeValue(t,"data",[]),r=this.indexBy(a,"symbol"),o=this.safeValue(i,"data",[]),n=this.safeValue(s,"data",[]),c=this.arrayConcat(o,n),d=this.indexBy(c,"symbol"),h=this.deepExtend(r,d),l=Object.keys(h),u=[];for(let e=0;e<l.length;e++){const t=l[e],i=h[t],s=this.safeString(i,"baseAsset"),a=this.safeString(i,"quoteAsset"),r=this.safeCurrencyCode(s),o=this.safeCurrencyCode(a),n={amount:this.safeFloat(i,"lotSize"),price:this.safeFloat(i,"tickSize")},c="Normal"===this.safeString(i,"status"),d="useLot"in i?"spot":"future",p="spot"===d,f="future"===d;let m=t;f||(m=r+"/"+o),u.push({id:t,symbol:m,base:r,quote:o,baseId:s,quoteId:a,info:i,type:d,spot:p,future:f,active:c,precision:n,limits:{amount:{min:this.safeFloat(i,"minQty"),max:this.safeFloat(i,"maxQty")},price:{min:this.safeFloat(i,"tickSize"),max:void 0},cost:{min:this.safeFloat(i,"minNotional"),max:this.safeFloat(i,"maxNotional")}}})}return u}calculateFee(e,t,i,s,a,r="taker",o={}){const n=this.markets[e];let c="quote";const d=n[r];let h=s*d,l=n.precision.price;return"sell"===i?h*=a:(c="base",l=n.precision.amount),h=this.decimalToPrecision(h,u,l,this.precisionMode),{type:r,currency:n[c],rate:d,cost:parseFloat(h)}}async fetchAccounts(e={}){let t=this.safeString(this.options,"account-group"),i=void 0;if(void 0===t){i=await this.privateGetInfo(e);const s=this.safeValue(i,"data",{});t=this.safeString(s,"accountGroup"),this.options["account-group"]=t}return[{id:t,type:void 0,currency:void 0,info:i}]}async fetchBalance(e={}){await this.loadMarkets(),await this.loadAccounts();const t=this.safeString(this.options,"account-category","cash"),i=this.safeValue(this.options,"fetchBalance",{});let s=this.safeString(i,"account-category",t);s=this.safeString(e,"account-category",s),e=this.omit(e,"account-category");const a=this.safeValue(this.accounts,0,{}),r={"account-group":this.safeString(a,"id")};let o="accountCategoryGetBalance";"futures"===s?o="accountGroupGetFuturesCollateralBalance":r["account-category"]=s;const n=await this[o](this.extend(r,e)),c={info:n},d=this.safeValue(n,"data",[]);for(let e=0;e<d.length;e++){const t=d[e],i=this.safeCurrencyCode(this.safeString(t,"asset")),s=this.account();s.free=this.safeFloat(t,"availableBalance"),s.total=this.safeFloat(t,"totalBalance"),c[i]=s}return this.parseBalance(c)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id},a=await this.publicGetDepth(this.extend(s,i)),r=this.safeValue(a,"data",{}),o=this.safeValue(r,"data",{}),n=this.safeInteger(o,"ts"),c=this.parseOrderBook(o,n);return c.nonce=this.safeInteger(o,"seqnum"),c}parseTicker(e,t){const i=this.safeString(e,"symbol");let s=void 0;if(i in this.markets_by_id)t=this.markets_by_id[i];else if(void 0!==i){if("spot"===this.safeString(e,"type")){const[e,t]=i.split("/");s=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}}void 0===s&&void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"close"),r=this.safeValue(e,"bid",[]),o=this.safeValue(e,"ask",[]),n=this.safeFloat(e,"open");let c=void 0,d=void 0,h=void 0;return void 0!==n&&void 0!==a&&(c=a-n,n>0&&(d=c/n*100),h=this.sum(n,a)/2),{symbol:s,timestamp:void 0,datetime:this.iso8601(void 0),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(r,0),bidVolume:this.safeFloat(r,1),ask:this.safeFloat(o,0),askVolume:this.safeFloat(o,1),vwap:void 0,open:n,close:a,last:a,previousClose:void 0,change:c,percentage:d,average:h,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}parseTickers(e,t){const i=[];for(let t=0;t<e.length;t++)i.push(this.parseTicker(e[t]));return this.filterByArray(i,"symbol",t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.publicGetTicker(this.extend(s,t)),r=this.safeValue(a,"data",{});return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e);i.symbol=t.join(",")}const s=await this.publicGetTicker(this.extend(i,t)),a=this.safeValue(s,"data",[]);return this.parseTickers(a,e)}parseOHLCV(e,t){const i=this.safeValue(e,"data",{});return[this.safeInteger(i,"ts"),this.safeFloat(i,"o"),this.safeFloat(i,"h"),this.safeFloat(i,"l"),this.safeFloat(i,"c"),this.safeFloat(i,"v")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={symbol:r.id,interval:this.timeframes[t]},n=this.parseTimeframe(t),c=this.safeValue(this.options,"fetchOHLCV",{}),d=this.safeInteger(c,"limit",500);void 0!==i?(o.from=i,s=void 0===s?d:Math.min(s,d),o.to=this.sum(i,s*n*1e3,1)):void 0!==s&&(o.n=s);const h=await this.publicGetBarhist(this.extend(o,a)),l=this.safeValue(h,"data",[]);return this.parseOHLCVs(l,r,t,i,s)}parseTrade(e,t){const i=this.safeInteger(e,"ts"),s=this.safeFloat2(e,"price","p"),a=this.safeFloat(e,"q");let r=void 0;void 0!==s&&void 0!==a&&(r=s*a);const o=this.safeValue(e,"bm",!1),n=o?"maker":"taker",c=o?"buy":"sell";let d=void 0;return void 0===d&&void 0!==t&&(d=t.symbol),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:d,id:void 0,order:void 0,type:void 0,takerOrMaker:n,side:c,price:s,amount:a,cost:r,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id};void 0!==i&&(r.n=i);const o=await this.publicGetTrades(this.extend(r,s)),n=this.safeValue(o,"data",[]),c=this.safeValue(n,"data",[]);return this.parseTrades(c,a,t,i)}parseOrderStatus(e){return this.safeString({PendingNew:"open",New:"open",PartiallyFilled:"open",Filled:"closed",Canceled:"canceled",Rejected:"rejected"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"status")),s=this.safeString(e,"symbol"),a=this.safeSymbol(s,t,"/");let r=this.safeInteger2(e,"timestamp","sendingTime"),o=this.safeInteger(e,"lastExecTime");const n=this.safeFloat(e,"price"),c=this.safeFloat(e,"orderQty"),d=this.safeFloat(e,"avgPx"),h=this.safeFloat2(e,"cumFilledQty","cumQty");let l=void 0;void 0!==h&&(0===h&&(r=o,o=void 0),void 0!==c&&(l=Math.max(0,c-h)));let u=void 0;void 0!==d&&void 0!==h&&(u=d*h);const p=this.safeString(e,"orderId");let f=this.safeString(e,"id");void 0!==f&&f.length<1&&(f=void 0);const m=this.safeStringLower(e,"orderType"),v=this.safeStringLower(e,"side"),y=this.safeFloat(e,"cumFee");let g=void 0;if(void 0!==y){const t=this.safeString(e,"feeAsset");g={cost:y,currency:this.safeCurrencyCode(t)}}const b=this.safeFloat(e,"stopPrice");return{info:e,id:p,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:o,symbol:a,type:m,timeInForce:void 0,side:v,price:n,stopPrice:b,amount:c,cost:u,average:d,filled:h,remaining:l,status:i,fee:g,trades:void 0}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets(),await this.loadAccounts();const o=this.market(e),n=this.safeString(this.options,"account-category","cash"),d=this.safeValue(this.options,"createOrder",{});let h=this.safeString(d,"account-category",n);h=this.safeString(r,"account-category",h),r=this.omit(r,"account-category");const l=this.safeValue(this.accounts,0,{}),u=this.safeValue(l,"id"),p=this.safeString2(r,"clientOrderId","id"),f={"account-group":u,"account-category":h,symbol:o.id,time:this.milliseconds(),orderQty:this.amountToPrecision(e,s),orderType:t,side:i};if(void 0!==p&&(f.id=p,r=this.omit(r,["clientOrderId","id"])),"limit"!==t&&"stop_limit"!==t||(f.orderPrice=this.priceToPrecision(e,a)),"stop_limit"===t||"stop_market"===t){const i=this.safeFloat(r,"stopPrice");if(void 0===i)throw new c(this.id+" createOrder requires a stopPrice parameter for "+t+" orders");f.stopPrice=this.priceToPrecision(e,i),r=this.omit(r,"stopPrice")}const m=await this.accountCategoryPostOrder(this.extend(f,r)),v=this.safeValue(m,"data",{}),y=this.safeValue(v,"info",{});return this.parseOrder(y,o)}async fetchOrder(e,t,i={}){await this.loadMarkets(),await this.loadAccounts();const s=this.safeString(this.options,"account-category","cash"),a=this.safeValue(this.options,"fetchOrder",{});let r=this.safeString(a,"account-category",s);r=this.safeString(i,"account-category",r),i=this.omit(i,"account-category");const o=this.safeValue(this.accounts,0,{}),n={"account-group":this.safeValue(o,"id"),"account-category":r,orderId:e},c=await this.accountCategoryGetOrderStatus(this.extend(n,i)),d=this.safeValue(c,"data",{});return this.parseOrder(d)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets(),await this.loadAccounts();let a=void 0;void 0!==e&&(a=this.market(e));const r=this.safeString(this.options,"account-category","cash"),o=this.safeValue(this.options,"fetchOpenOrders",{});let n=this.safeString(o,"account-category",r);n=this.safeString(s,"account-category",n),s=this.omit(s,"account-category");const c=this.safeValue(this.accounts,0,{}),d={"account-group":this.safeValue(c,"id"),"account-category":n},h=await this.accountCategoryGetOrderOpen(this.extend(d,s)),l=this.safeValue(h,"data",[]);if("futures"===n)return this.parseOrders(l,a,t,i);const u=[];for(let e=0;e<l.length;e++){const t=this.parseOrder(l[e],a);u.push(t)}return this.filterBySymbolSinceLimit(u,e,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets(),await this.loadAccounts();let a=void 0;void 0!==e&&(a=this.market(e));const r=this.safeString(this.options,"account-category"),o=this.safeValue(this.options,"fetchClosedOrders",{});let n=this.safeString(o,"account-category",r);n=this.safeString(s,"account-category",n),s=this.omit(s,"account-category");const c=this.safeValue(this.accounts,0,{}),d={"account-group":this.safeValue(c,"id")};void 0!==e&&(a=this.market(e),d.symbol=a.id);const h=this.safeValue(o,"method","accountGroupGetOrderHist");"accountGroupGetOrderHist"===h?void 0!==n&&(d.category=n):d["account-category"]=n,void 0!==t&&(d.startTime=t),void 0!==i&&(d.pageSize=i);const l=await this[h](this.extend(d,s));let u=this.safeValue(l,"data");return Array.isArray(u)||(u=this.safeValue(u,"data",[])),this.parseOrders(u,a,t,i)}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets(),await this.loadAccounts();const s=this.market(t),r=this.safeString(this.options,"account-category","cash"),o=this.safeValue(this.options,"cancelOrder",{});let n=this.safeString(o,"account-category",r);n=this.safeString(i,"account-category",n),i=this.omit(i,"account-category");const c=this.safeValue(this.accounts,0,{}),d=this.safeValue(c,"id"),h=this.safeString2(i,"clientOrderId","id"),l={"account-group":d,"account-category":n,symbol:s.id,time:this.milliseconds(),id:"foobar"};void 0===h?l.orderId=e:(l.id=h,i=this.omit(i,["clientOrderId","id"]));const u=await this.accountCategoryDeleteOrder(this.extend(l,i)),p=this.safeValue(u,"data",{}),f=this.safeValue(p,"info",{});return this.parseOrder(f,s)}async cancelAllOrders(e,t={}){await this.loadMarkets(),await this.loadAccounts();const i=this.safeString(this.options,"account-category","cash"),s=this.safeValue(this.options,"cancelAllOrders",{});let a=this.safeString(s,"account-category",i);a=this.safeString(t,"account-category",a),t=this.omit(t,"account-category");const r=this.safeValue(this.accounts,0,{}),o={"account-group":this.safeValue(r,"id"),"account-category":a,time:this.milliseconds()};let n=void 0;void 0!==e&&(n=this.market(e),o.symbol=n.id);return await this.accountCategoryDeleteOrderAll(this.extend(o,t))}parseDepositAddress(e,t){const i=this.safeString(e,"address"),s=this.safeString(e,"tagId"),a=this.safeString(e,s);this.checkAddress(i);return{currency:void 0===t?void 0:t.code,address:i,tag:a,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s=this.safeString(t,"chainName");t=this.omit(t,"chainName");const r={asset:i.id},o=await this.privateGetWalletDepositAddress(this.extend(r,t)),n=this.safeValue(o,"data",{}),c=this.safeValue(n,"address",[]);let d=void 0;if(c.length>1){const e=this.indexBy(c,"chainName");if(void 0===s){const t=Object.keys(e).join(", ");throw new a(this.id+" fetchDepositAddress returned more than one address, a chainName parameter is required, one of "+t)}d=this.safeValue(e,s,{})}else d=this.safeValue(c,0,{});const h=this.parseDepositAddress(d,i);return this.extend(h,{info:o})}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({txType:"deposit"},s))}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({txType:"withdrawal"},s))}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.asset=r.id),void 0!==t&&(a.startTs=t),void 0!==i&&(a.pageSize=i);const o=await this.privateGetWalletTransactions(this.extend(a,s)),n=this.safeValue(o,"data",{}),c=this.safeValue(n,"data",[]);return this.parseTransactions(c,r,t,i)}parseTransactionStatus(e){return this.safeString({reviewing:"pending",pending:"pending",confirmed:"ok",rejected:"rejected"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"requestId"),s=this.safeFloat(e,"amount"),a=this.safeValue(e,"destAddress",{}),r=this.safeString(a,"address"),o=this.safeString(a,"destTag"),n=this.safeString(e,"networkTransactionId"),c=this.safeString(e,"transactionType"),d=this.safeInteger(e,"time"),h=this.safeString(e,"asset"),l=this.safeCurrencyCode(h,t),u=this.parseTransactionStatus(this.safeString(e,"status")),p=this.safeFloat(e,"commission");return{info:e,id:i,currency:l,amount:s,address:r,addressTo:r,addressFrom:void 0,tag:o,tagTo:o,tagFrom:void 0,status:u,type:c,updated:void 0,txid:n,timestamp:d,datetime:this.iso8601(d),fee:{currency:l,cost:p}}}sign(e,t="public",i="GET",s={},a,r){let o="",n=s;const c="accountCategory"===t;(c||"accountGroup"===t)&&(o+=this.implodeParams("/{account-group}",s),n=this.omit(s,"account-group"));const d=this.implodeParams(e,n);if(o+="/api/pro/"+this.version,c&&(o+=this.implodeParams("/{account-category}",n),n=this.omit(n,"account-category")),o+="/"+d,n=this.omit(n,this.extractParams(e)),"public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.milliseconds().toString(),t=e+"+"+d,s=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64");a={"x-auth-key":this.apiKey,"x-auth-timestamp":e,"x-auth-signature":s},"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):(a["Content-Type"]="application/json",r=this.json(n))}return o=this.urls.api+o,{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,r,n,c,d){if(void 0===n)return;const h=this.safeString(n,"code"),l=this.safeString(n,"message");if(void 0!==h&&"0"!==h||void 0!==l){const e=this.id+" "+r;throw this.throwExactlyMatchedException(this.exceptions.exact,h,e),this.throwExactlyMatchedException(this.exceptions.exact,l,e),this.throwBroadlyMatchedException(this.exceptions.broad,l,e),new o(e)}}}},function(e,t,i){"use strict";const s=i(1),{TICK_SIZE:a}=i(2),{AuthenticationError:r,BadRequest:o,DDoSProtection:n,ExchangeError:c,ExchangeNotAvailable:d,InsufficientFunds:h,InvalidOrder:l,OrderNotFound:u,PermissionDenied:p}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitmex",name:"BitMEX",countries:["SC"],version:"v1",userAgent:void 0,rateLimit:2e3,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:"emulated",withdraw:!0},timeframes:{"1m":"1m","5m":"5m","1h":"1h","1d":"1d"},urls:{test:{public:"https://testnet.bitmex.com",private:"https://testnet.bitmex.com"},logo:"https://user-images.githubusercontent.com/1294454/27766319-f653c6e6-5ed4-11e7-933d-f0bc3699ae8f.jpg",api:{public:"https://www.bitmex.com",private:"https://www.bitmex.com"},www:"https://www.bitmex.com",doc:["https://www.bitmex.com/app/apiOverview","https://github.com/BitMEX/api-connectors/tree/master/official-http"],fees:"https://www.bitmex.com/app/fees",referral:"https://www.bitmex.com/register/upZpOX"},api:{public:{get:["announcement","announcement/urgent","funding","instrument","instrument/active","instrument/activeAndIndices","instrument/activeIntervals","instrument/compositeIndex","instrument/indices","insurance","leaderboard","liquidation","orderBook","orderBook/L2","quote","quote/bucketed","schema","schema/websocketHelp","settlement","stats","stats/history","trade","trade/bucketed"]},private:{get:["apiKey","chat","chat/channels","chat/connected","execution","execution/tradeHistory","notification","order","position","user","user/affiliateStatus","user/checkReferralCode","user/commission","user/depositAddress","user/executionHistory","user/margin","user/minWithdrawalFee","user/wallet","user/walletHistory","user/walletSummary"],post:["apiKey","apiKey/disable","apiKey/enable","chat","order","order/bulk","order/cancelAllAfter","order/closePosition","position/isolate","position/leverage","position/riskLimit","position/transferMargin","user/cancelWithdrawal","user/confirmEmail","user/confirmEnableTFA","user/confirmWithdrawal","user/disableTFA","user/logout","user/logoutAll","user/preferences","user/requestEnableTFA","user/requestWithdrawal"],put:["order","order/bulk","user"],delete:["apiKey","order","order/all"]}},exceptions:{exact:{"Invalid API Key.":r,"This key is disabled.":p,"Access Denied":p,"Duplicate clOrdID":l,"orderQty is invalid":l,"Invalid price":l,"Invalid stopPx for ordType":l},broad:{"Signature not valid":r,overloaded:d,"Account has insufficient Available Balance":h,"Service unavailable":d,"Server Error":c}},precisionMode:a,options:{"api-expires":5,fetchOHLCVOpenTimestamp:!0}})}async fetchMarkets(e={}){const t=await this.publicGetInstrumentActiveAndIndices(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a="Unlisted"!==s.state,r=s.symbol,o=s.underlying,n=s.quoteCurrency,c=o+n,d=this.safeCurrencyCode(o),h=this.safeCurrencyCode(n),l=r===c,u=this.safeString2(s,"positionCurrency","quoteCurrency");let p=void 0,f=!1,m=!1;const v=this.safeCurrencyCode(u);let y=r;l?(p="swap",y=d+"/"+h):r.indexOf("B_")>=0?(m=!0,p="prediction"):(f=!0,p="future");const g={amount:void 0,price:void 0},b=this.safeFloat(s,"lotSize"),w=this.safeFloat(s,"tickSize");void 0!==b&&(g.amount=b),void 0!==w&&(g.price=w);const k={amount:{min:void 0,max:void 0},price:{min:w,max:this.safeFloat(s,"maxPrice")},cost:{min:void 0,max:void 0}};k[v===h?"cost":"amount"]={min:b,max:this.safeFloat(s,"maxOrderQty")},i.push({id:r,symbol:y,base:d,quote:h,baseId:o,quoteId:n,active:a,precision:g,limits:k,taker:this.safeFloat(s,"takerFee"),maker:this.safeFloat(s,"makerFee"),type:p,spot:!1,swap:l,future:f,prediction:m,info:s})}return i}parseBalanceResponse(e){const t={info:e};for(let i=0;i<e.length;i++){const s=e[i],a=this.safeString(s,"currency"),r=this.safeCurrencyCode(a),o=this.account();let n=this.safeFloat(s,"availableMargin"),c=this.safeFloat(s,"marginBalance");"BTC"===r&&(void 0!==n&&(n/=1e8),void 0!==c&&(c/=1e8)),o.free=n,o.total=c,t[r]=o}return this.parseBalance(t)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUserMargin(this.extend({currency:"all"},e));return this.parseBalanceResponse(t)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id};void 0!==t&&(s.depth=t);const a=await this.publicGetOrderBookL2(this.extend(s,i)),r={bids:[],asks:[],timestamp:void 0,datetime:void 0,nonce:void 0};for(let e=0;e<a.length;e++){const t=a[e],i="Sell"===t.side?"asks":"bids",s=this.safeFloat(t,"size"),o=this.safeFloat(t,"price");void 0!==o&&r[i].push([o,s])}return r.bids=this.sortBy(r.bids,0,!0),r.asks=this.sortBy(r.asks,0),r}async fetchOrder(e,t,i={}){const s={filter:{orderID:e}},a=await this.fetchOrders(t,void 0,void 0,this.deepExtend(s,i));if(1===a.length)return a[0];throw new u(this.id+": The order "+e+" not found.")}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0,r={};void 0!==e&&(a=this.market(e),r.symbol=a.id),void 0!==t&&(r.startTime=this.iso8601(t)),void 0!==i&&(r.count=i),r=this.deepExtend(r,s),"filter"in r&&(r.filter=this.json(r.filter));const o=await this.privateGetOrder(r);return this.parseOrders(o,a,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.deepExtend({filter:{open:!0}},s))}async fetchClosedOrders(e,t,i,s={}){const a=await this.fetchOrders(e,t,i,s);return this.filterBy(a,"status","closed")}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let a=void 0,r={};void 0!==e&&(a=this.market(e),r.symbol=a.id),void 0!==t&&(r.startTime=this.iso8601(t)),void 0!==i&&(r.count=i),r=this.deepExtend(r,s),"filter"in r&&(r.filter=this.json(r.filter));const o=await this.privateGetExecutionTradeHistory(r);return this.parseTrades(o,a,t,i)}parseLedgerEntryType(e){return this.safeString({Withdrawal:"transaction",RealisedPNL:"margin",UnrealisedPNL:"margin",Deposit:"transaction",Transfer:"transfer",AffiliatePayout:"referral"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"transactID"),s=this.safeString(e,"account"),a=this.safeString(e,"tx"),r=this.parseLedgerEntryType(this.safeString(e,"transactType")),o=this.safeString(e,"currency"),n=this.safeCurrencyCode(o,t);let c=this.safeFloat(e,"amount");void 0!==c&&(c/=1e8);let d=this.parse8601(this.safeString(e,"transactTime"));void 0===d&&(d=0);let h=this.safeFloat(e,"fee",0);void 0!==h&&(h/=1e8);const l={cost:h,currency:n};let u=this.safeFloat(e,"walletBalance");void 0!==u&&(u/=1e8);const p=this.sum(u,-c);let f=void 0;c<0?(f="out",c=Math.abs(c)):f="in";const m=this.parseTransactionStatus(this.safeString(e,"transactStatus"));return{id:i,info:e,timestamp:d,datetime:this.iso8601(d),direction:f,account:s,referenceId:a,referenceAccount:void 0,type:r,currency:n,amount:c,before:p,after:u,status:m,fee:l}}async fetchLedger(e,t,i,s={}){await this.loadMarkets();let a=void 0;void 0!==e&&(a=this.currency(e));const r={};void 0!==i&&(r.count=i);const o=await this.privateGetUserWalletHistory(this.extend(r,s));return this.parseLedger(o,a,t,i)}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const a={};void 0!==i&&(a.count=i);const r=await this.privateGetUserWalletHistory(this.extend(a,s)),o=this.filterByArray(r,"transactType",["Withdrawal","Deposit"],!1);let n=void 0;return void 0!==e&&(n=this.currency(e)),this.parseTransactions(o,n,t,i)}parseTransactionStatus(e){return this.safeString({Canceled:"canceled",Completed:"ok",Pending:"pending"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"transactID"),s=this.parse8601(this.safeString(e,"transactTime")),a=this.parse8601(this.safeString(e,"timestamp")),r=this.safeStringLower(e,"transactType");let o=void 0,n=void 0,c=void 0;"withdrawal"===r&&(o=this.safeString(e,"address"),n=this.safeString(e,"tx"),c=o);let d=this.safeInteger(e,"amount");void 0!==d&&(d=Math.abs(d)/1e7);let h=this.safeInteger(e,"fee");void 0!==h&&(h/=1e7);const l={cost:h,currency:"BTC"};let u=this.safeString(e,"transactStatus");return void 0!==u&&(u=this.parseTransactionStatus(u)),{info:e,id:i,txid:void 0,timestamp:s,datetime:this.iso8601(s),addressFrom:n,address:o,addressTo:c,tagFrom:void 0,tag:void 0,tagTo:void 0,type:r,amount:d,currency:"BTC",status:u,updated:a,comment:void 0,fee:l}}async fetchTicker(e,t={}){await this.loadMarkets();if(!this.market(e).active)throw new c(this.id+": symbol "+e+" is delisted");const i=await this.fetchTickers([e],t),s=this.safeValue(i,e);if(void 0===s)throw new c(this.id+" ticker symbol "+e+" not found");return s}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetInstrumentActiveAndIndices(t),s={};for(let e=0;e<i.length;e++){const t=this.parseTicker(i[e]),a=this.safeString(t,"symbol");void 0!==a&&(s[a]=t)}return this.filterByArray(s,"symbol",e)}parseTicker(e,t){let i=void 0;const s=this.safeString(e,"symbol");void 0!==(t=this.safeValue(this.markets_by_id,s,t))&&(i=t.symbol);const a=this.parse8601(this.safeString(e,"timestamp")),r=this.safeFloat(e,"prevPrice24h"),o=this.safeFloat(e,"lastPrice");let n=void 0,c=void 0;return void 0!==o&&void 0!==r&&(n=o-r,r>0&&(c=n/r*100)),{symbol:i,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:this.safeFloat(e,"bidPrice"),bidVolume:void 0,ask:this.safeFloat(e,"askPrice"),askVolume:void 0,vwap:this.safeFloat(e,"vwap"),open:r,close:o,last:o,previousClose:void 0,change:n,percentage:c,average:this.sum(r,o)/2,baseVolume:this.safeFloat(e,"homeNotional24h"),quoteVolume:this.safeFloat(e,"foreignNotional24h"),info:e}}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"timestamp")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={symbol:r.id,binSize:this.timeframes[t],partial:!0};void 0!==s&&(o.count=s);const n=1e3*this.parseTimeframe(t),c=this.safeValue(this.options,"fetchOHLCVOpenTimestamp",!0);if(void 0!==i){let e=i;c&&(e=this.sum(e,n));const t=this.ymdhms(e);o.startTime=t}else o.reverse=!0;const d=await this.publicGetTradeBucketed(this.extend(o,a)),h=this.parseOHLCVs(d,r,t,i,s);if(c)for(let e=0;e<h.length;e++)h[e][0]=h[e][0]-n;return h}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"timestamp")),s=this.safeFloat2(e,"avgPx","price"),a=this.safeFloat2(e,"size","lastQty"),r=this.safeString(e,"trdMatchID"),o=this.safeString(e,"orderID"),n=this.safeStringLower(e,"side");let c=this.safeFloat(e,"execCost");void 0!==c&&(c=Math.abs(c)/1e8);let d=void 0;if("execComm"in e){let t=this.safeFloat(e,"execComm");t/=1e8;const i=this.safeString(e,"settlCurrency");d={cost:t,currency:this.safeCurrencyCode(i),rate:this.safeFloat(e,"commission")}}let h=void 0;void 0!==d&&(h=d.cost<0?"maker":"taker");const l=this.safeString(e,"symbol"),u=this.safeSymbol(l,t),p=this.safeStringLower(e,"ordType");return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:u,id:r,order:o,type:p,takerOrMaker:h,side:n,price:s,cost:c,amount:a,fee:d}}parseOrderStatus(e){return this.safeString({New:"open",PartiallyFilled:"open",Filled:"closed",DoneForDay:"open",Canceled:"canceled",PendingCancel:"open",PendingNew:"open",Rejected:"rejected",Expired:"expired",Stopped:"open",Untriggered:"open",Triggered:"open"},e,e)}parseTimeInForce(e){return this.safeString({Day:"Day",GoodTillCancel:"GTC",ImmediateOrCancel:"IOC",FillOrKill:"FOK"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"ordStatus")),s=this.safeString(e,"symbol"),a=this.safeSymbol(s,t),r=this.parse8601(this.safeString(e,"timestamp")),o=this.parse8601(this.safeString(e,"transactTime")),n=this.safeFloat(e,"price"),c=this.safeFloat(e,"orderQty"),d=this.safeFloat(e,"cumQty",0);let h=void 0;void 0!==c&&void 0!==d&&(h=Math.max(c-d,0));const l=this.safeFloat(e,"avgPx");let u=void 0;void 0!==d&&(void 0!==l?u=l*d:void 0!==n&&(u=n*d));const p=this.safeString(e,"orderID"),f=this.safeStringLower(e,"ordType"),m=this.safeStringLower(e,"side"),v=this.safeString(e,"clOrdID"),y=this.parseTimeInForce(this.safeString(e,"timeInForce")),g=this.safeFloat(e,"stopPx");return{info:e,id:p,clientOrderId:v,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:o,symbol:a,type:f,timeInForce:y,side:m,price:n,stopPrice:g,amount:c,cost:u,average:l,filled:d,remaining:h,status:i,fee:void 0,trades:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id};void 0!==t?r.startTime=this.iso8601(t):r.reverse=!0,void 0!==i&&(r.count=i);const o=await this.publicGetTrade(this.extend(r,s));return this.parseTrades(o,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n=this.capitalize(t),c={symbol:o.id,side:this.capitalize(i),orderQty:s,ordType:n};if(void 0!==a)if("Stop"===n){const e=this.safeFloat2(r,"stopPx","stopPrice");c.stopPx=e,r=this.omit(r,["stopPx","stopPrice"])}else c.price=a;const d=this.safeString2(r,"clOrdID","clientOrderId");void 0!==d&&(c.clOrdID=d,r=this.omit(r,["clOrdID","clientOrderId"]));const h=await this.privatePostOrder(this.extend(c,r));return this.parseOrder(h,o)}async editOrder(e,t,i,s,a,r,o={}){await this.loadMarkets();const n={},c=this.safeString2(o,"origClOrdID","clientOrderId");if(void 0!==c){n.origClOrdID=c;const e=this.safeString(o,"clOrdID","clientOrderId");void 0!==e&&(n.clOrdID=e),o=this.omit(o,["origClOrdID","clOrdID","clientOrderId"])}else n.orderID=e;void 0!==a&&(n.orderQty=a),void 0!==r&&(n.price=r);const d=await this.privatePutOrder(this.extend(n,o));return this.parseOrder(d)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=this.safeString2(i,"clOrdID","clientOrderId"),a={};void 0===s?a.orderID=e:(a.clOrdID=s,i=this.omit(i,["clOrdID","clientOrderId"]));const r=await this.privateDeleteOrder(this.extend(a,i)),o=this.safeValue(r,0,{}),n=this.safeString(o,"error");if(void 0!==n&&n.indexOf("Unable to cancel order due to existing state")>=0)throw new u(this.id+" cancelOrder() failed: "+n);return this.parseOrder(o)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s=void 0;void 0!==e&&(s=this.market(e),i.symbol=s.id);const a=await this.privateDeleteOrderAll(this.extend(i,t));return this.parseOrders(a,s)}async fetchPositions(e,t,i,s={}){await this.loadMarkets();return await this.privateGetPosition(s)}isFiat(e){return"EUR"===e||"PLN"===e}async withdraw(e,t,i,s,a={}){if(this.checkAddress(i),await this.loadMarkets(),"BTC"!==e)throw new c(this.id+" supoprts BTC withdrawals only, other currencies coming soon...");const r={currency:"XBt",amount:t,address:i},o=await this.privatePostUserRequestWithdrawal(this.extend(r,a));return{info:o,id:this.safeString(o,"transactID")}}handleErrors(e,t,i,s,a,r,d,h,l){if(void 0!==d){if(429===e)throw new n(this.id+" "+r);if(e>=400){const t=this.safeValue(d,"error",{}),i=this.safeString(t,"message"),s=this.id+" "+r;if(this.throwExactlyMatchedException(this.exceptions.exact,i,s),this.throwBroadlyMatchedException(this.exceptions.broad,i,s),400===e)throw new o(s);throw new c(s)}}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o="/api/"+this.version+"/"+e;if("GET"===i)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{const e=this.safeString(s,"_format");void 0!==e&&(o+="?"+this.urlencode({_format:e}),s=this.omit(s,"_format"))}const n=this.urls.api[t]+o;if(this.apiKey&&this.secret){let e=i+o,t=this.safeInteger(this.options,"api-expires");a={"Content-Type":"application/json","api-key":this.apiKey},t=this.sum(this.seconds(),t),t=t.toString(),e+=t,a["api-expires"]=t,"POST"!==i&&"PUT"!==i&&"DELETE"!==i||Object.keys(s).length&&(e+=r=this.json(s)),a["api-signature"]=this.hmac(this.encode(e),this.encode(this.secret))}return{url:n,method:i,body:r,headers:a}}}},function(e,t,i){"use strict";const s=i(1),{AuthenticationError:a,ExchangeError:r,PermissionDenied:o,BadRequest:n,ArgumentsRequired:c,OrderNotFound:d,InsufficientFunds:h,ExchangeNotAvailable:l,DDoSProtection:u,InvalidAddress:p,InvalidOrder:f}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitpanda",name:"Bitpanda Pro",countries:["AT"],rateLimit:300,version:"v1",has:{CORS:!1,publicAPI:!0,privateAPI:!0,cancelAllOrders:!0,cancelOrder:!0,cancelOrders:!0,createDepositAddress:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDeposits:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFees:!0,fetchTicker:!0,fetchTickers:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1/MINUTES","5m":"5/MINUTES","15m":"15/MINUTES","30m":"30/MINUTES","1h":"1/HOURS","4h":"4/HOURS","1d":"1/DAYS","1w":"1/WEEKS","1M":"1/MONTHS"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87591171-9a377d80-c6f0-11ea-94ac-97a126eac3bc.jpg",api:{public:"https://api.exchange.bitpanda.com/public",private:"https://api.exchange.bitpanda.com/public"},www:"https://www.bitpanda.com/en/pro",doc:["https://developers.bitpanda.com/exchange/"],fees:"https://www.bitpanda.com/en/pro/fees"},api:{public:{get:["currencies","candlesticks/{instrument_code}","fees","instruments","order-book/{instrument_code}","market-ticker","market-ticker/{instrument_code}","price-ticks/{instrument_code}","time"]},private:{get:["account/balances","account/deposit/crypto/{currency_code}","account/deposit/fiat/EUR","account/deposits","account/deposits/bitpanda","account/withdrawals","account/withdrawals/bitpanda","account/fees","account/orders","account/orders/{order_id}","account/orders/{order_id}/trades","account/trades","account/trades/{trade_id}","account/trading-volume"],post:["account/deposit/crypto","account/withdraw/crypto","account/withdraw/fiat","account/fees","account/orders"],delete:["account/orders","account/orders/{order_id}","account/orders/client/{client_id}"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0015,maker:.001,tiers:[{taker:[[0,.0015],[100,.0013],[250,.0013],[1e3,.001],[5e3,9e-4],[1e4,75e-5],[2e4,65e-5]],maker:[[0,.001],[100,.001],[250,9e-4],[1e3,75e-5],[5e3,6e-4],[1e4,5e-4],[2e4,5e-4]]}]}},requiredCredentials:{apiKey:!0,secret:!1},exceptions:{exact:{INVALID_CLIENT_UUID:f,ORDER_NOT_FOUND:d,ONLY_ONE_ERC20_ADDRESS_ALLOWED:p,DEPOSIT_ADDRESS_NOT_USED:p,INVALID_CREDENTIALS:a,MISSING_CREDENTIALS:a,INVALID_APIKEY:a,INVALID_SCOPES:a,INVALID_SUBJECT:a,INVALID_ISSUER:a,INVALID_AUDIENCE:a,INVALID_DEVICE_ID:a,INVALID_IP_RESTRICTION:a,APIKEY_REVOKED:a,APIKEY_EXPIRED:a,SYNCHRONIZER_TOKEN_MISMATCH:a,SESSION_EXPIRED:a,INTERNAL_ERROR:a,CLIENT_IP_BLOCKED:o,MISSING_PERMISSION:o,ILLEGAL_CHARS:n,UNSUPPORTED_MEDIA_TYPE:n,ACCOUNT_HISTORY_TIME_RANGE_TOO_BIG:n,CANDLESTICKS_TIME_RANGE_TOO_BIG:n,INVALID_INSTRUMENT_CODE:n,INVALID_ORDER_TYPE:n,INVALID_UNIT:n,INVALID_PERIOD:n,INVALID_TIME:n,INVALID_DATE:n,INVALID_CURRENCY:n,INVALID_AMOUNT:n,INVALID_PRICE:n,INVALID_LIMIT:n,INVALID_QUERY:n,INVALID_CURSOR:n,INVALID_ACCOUNT_ID:n,INVALID_SIDE:f,INVALID_ACCOUNT_HISTORY_FROM_TIME:n,INVALID_ACCOUNT_HISTORY_MAX_PAGE_SIZE:n,INVALID_ACCOUNT_HISTORY_TIME_PERIOD:n,INVALID_ACCOUNT_HISTORY_TO_TIME:n,INVALID_CANDLESTICKS_GRANULARITY:n,INVALID_CANDLESTICKS_UNIT:n,INVALID_ORDER_BOOK_DEPTH:n,INVALID_ORDER_BOOK_LEVEL:n,INVALID_PAGE_CURSOR:n,INVALID_TIME_RANGE:n,INVALID_TRADE_ID:n,INVALID_UI_ACCOUNT_SETTINGS:n,NEGATIVE_AMOUNT:f,NEGATIVE_PRICE:f,MIN_SIZE_NOT_SATISFIED:f,BAD_AMOUNT_PRECISION:f,BAD_PRICE_PRECISION:f,BAD_TRIGGER_PRICE_PRECISION:f,MAX_OPEN_ORDERS_EXCEEDED:n,MISSING_PRICE:f,MISSING_ORDER_TYPE:f,MISSING_SIDE:f,MISSING_CANDLESTICKS_PERIOD_PARAM:c,MISSING_CANDLESTICKS_UNIT_PARAM:c,MISSING_FROM_PARAM:c,MISSING_INSTRUMENT_CODE:c,MISSING_ORDER_ID:f,MISSING_TO_PARAM:c,MISSING_TRADE_ID:c,INVALID_ORDER_ID:d,NOT_FOUND:d,INSUFFICIENT_LIQUIDITY:h,INSUFFICIENT_FUNDS:h,NO_TRADING:l,SERVICE_UNAVAILABLE:l,GATEWAY_TIMEOUT:l,RATELIMIT:u,CF_RATELIMIT:u,INTERNAL_SERVER_ERROR:r},broad:{}},commonCurrencies:{MIOTA:"IOTA"},options:{fetchTradingFees:{method:"fetchPrivateTradingFees"},fiat:["EUR","CHF"]}})}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.safeInteger(t,"epoch_millis")}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"code"),r=this.safeCurrencyCode(a);i[r]={id:a,code:r,name:void 0,info:s,active:void 0,fee:void 0,precision:this.safeInteger(s,"precision"),limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return i}async fetchMarkets(e={}){const t=await this.publicGetInstruments(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeValue(s,"base",{}),r=this.safeValue(s,"quote",{}),o=this.safeString(a,"code"),n=this.safeString(r,"code"),c=o+"_"+n,d=this.safeCurrencyCode(o),h=this.safeCurrencyCode(n),l=d+"/"+h,u={amount:this.safeInteger(s,"amount_precision"),price:this.safeInteger(s,"market_precision")},p={amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(s,"min_size"),max:void 0}},f="ACTIVE"===this.safeString(s,"state");i.push({id:c,symbol:l,base:d,quote:h,baseId:o,quoteId:n,precision:u,limits:p,info:s,active:f})}return i}async fetchTradingFees(e={}){let t=this.safeString(e,"method");if(e=this.omit(e,"method"),void 0===t){const e=this.safeValue(this.options,"fetchTradingFees",{});t=this.safeString(e,"method","fetchPrivateTradingFees")}return await this[t](e)}async fetchPublicTradingFees(e={}){await this.loadMarkets();const t=await this.publicGetFees(e),i=this.indexBy(t,"fee_group_id"),s=this.safeValue(this.options,"fee_group_id","default"),a=this.safeValue(i,s,{}),r=this.safeValue(a,"fee_tiers"),o={};for(let e=0;e<this.symbols.length;e++){const t=this.symbols[e],i={info:a,symbol:t,maker:void 0,taker:void 0,percentage:!0,tierBased:!0},s=[],n=[];for(let e=0;e<r.length;e++){const t=r[e],a=this.safeFloat(t,"volume");let o=this.safeFloat(t,"taker_fee"),c=this.safeFloat(t,"maker_fee");o/=100,c/=100,s.push([a,o]),n.push([a,c]),0===e&&(i.taker=o,i.maker=c)}const c={taker:s,maker:n};i.tiers=c,o[t]=i}return o}async fetchPrivateTradingFees(e={}){await this.loadMarkets();const t=await this.privateGetAccountFees(e),i=this.safeValue(t,"active_fee_tier",{}),s={info:t,maker:this.safeFloat(i,"maker_fee"),taker:this.safeFloat(i,"taker_fee"),percentage:!0,tierBased:!0},a=this.safeValue(t,"fee_tiers"),r=[],o=[];for(let e=0;e<a.length;e++){const t=a[e],i=this.safeFloat(t,"volume");let s=this.safeFloat(t,"taker_fee"),n=this.safeFloat(t,"maker_fee");s/=100,n/=100,r.push([i,s]),o.push([i,n])}const n={taker:r,maker:o};return s.tiers=n,s}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"time")),s=this.safeString(e,"instrument_code"),a=this.safeSymbol(s,t,"_"),r=this.safeFloat(e,"last_price"),o=this.safeFloat(e,"price_change_percentage"),n=this.safeFloat(e,"price_change");let c=void 0,d=void 0;void 0!==r&&void 0!==n&&(c=r-n,d=this.sum(r,c)/2);const h=this.safeFloat(e,"base_volume"),l=this.safeFloat(e,"quote_volume"),u=this.vwap(h,l);return{symbol:a,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"best_bid"),bidVolume:void 0,ask:this.safeFloat(e,"best_ask"),askVolume:void 0,vwap:u,open:c,close:r,last:r,previousClose:void 0,change:n,percentage:o,average:d,baseVolume:h,quoteVolume:l,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={instrument_code:i.id},a=await this.publicGetMarketTickerInstrumentCode(this.extend(s,t));return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketTicker(t),s={};for(let e=0;e<i.length;e++){const t=this.parseTicker(i[e]);s[t.symbol]=t}return this.filterByArray(s,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={instrument_code:this.marketId(e)};void 0!==t&&(s.depth=t);const a=await this.publicGetOrderBookInstrumentCode(this.extend(s,i)),r=this.parse8601(this.safeString(a,"time"));return this.parseOrderBook(a,r,"bids","asks","price","amount")}parseOHLCV(e,t){const i=this.safeValue(e,"granularity"),s=this.safeString(i,"unit"),a=this.safeString(i,"period")+this.safeString({MINUTES:"m",HOURS:"h",DAYS:"d",WEEKS:"w",MONTHS:"M"},s),r=1e3*this.parseTimeframe(a),o=this.parse8601(this.safeString(e,"time")),n=r*parseInt(o/r),c=this.safeValue(this.options,"fetchOHLCV",{}),d=this.safeString(c,"volume","total_amount");return[n,this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,d)]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o=this.safeString(this.timeframes,t),[n,c]=o.split("/"),d=1e3*this.parseTimeframe(t);void 0===s&&(s=1500);const h={instrument_code:r.id,period:n,unit:c};if(void 0===i){const e=this.milliseconds();h.to=this.iso8601(e),h.from=this.iso8601(e-s*d)}else h.from=this.iso8601(i),h.to=this.iso8601(this.sum(i,s*d));const l=await this.publicGetCandlesticksInstrumentCode(this.extend(h,a));return this.parseOHLCVs(l,r,t,i,s)}parseTrade(e,t){const i=this.safeValue(e,"fee",{});e=this.safeValue(e,"trade",e);const s=this.parse8601(this.safeString(e,"time")),a=this.safeStringLower2(e,"side","taker_side"),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=this.safeFloat(e,"volume");void 0===n&&void 0!==o&&void 0!==r&&(n=o*r);const c=this.safeString(e,"instrument_code"),d=this.safeSymbol(c,t,"_"),h=this.safeFloat(i,"fee_amount");let l=void 0,u=void 0;if(void 0!==h){const e=this.safeString(i,"fee_currency");u={cost:h,currency:this.safeCurrencyCode(e),rate:this.safeFloat(i,"fee_percentage")},l=this.safeStringLower(i,"fee_type")}return{id:this.safeString2(e,"trade_id","sequence"),order:this.safeString(e,"order_id"),timestamp:s,datetime:this.iso8601(s),symbol:d,type:void 0,side:a,price:r,amount:o,cost:n,takerOrMaker:l,fee:u,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={instrument_code:a.id};void 0!==t&&(r.from=this.iso8601(t),r.to=this.iso8601(this.sum(t,144e5)));const o=await this.publicGetPriceTicksInstrumentCode(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountBalances(e),i=this.safeValue(t,"balances",[]),s={info:t};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"currency_code"),r=this.safeCurrencyCode(a),o=this.account();o.free=this.safeFloat(t,"available"),o.used=this.safeFloat(t,"locked"),s[r]=o}return this.parseBalance(s)}parseDepositAddress(e,t){let i=void 0;void 0!==t&&(i=t.code);const s=this.safeString(e,"address"),a=this.safeString(e,"destination_tag");return this.checkAddress(s),{currency:i,address:s,tag:a,info:e}}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},a=await this.privatePostAccountDepositCrypto(this.extend(s,t));return this.parseDepositAddress(a,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency_code:i.id},a=await this.privateGetAccountDepositCryptoCurrencyCode(this.extend(s,t));return this.parseDepositAddress(a,i)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;if(void 0!==e&&(r=this.currency(e),a.currency_code=r.id),void 0!==i&&(a.max_page_size=i),void 0!==t){if(void 0===this.safeString(s,"to"))throw new c(this.id+' fetchDeposits requires a "to" iso8601 string param with the since argument is specified');a.from=this.iso8601(t)}const o=await this.privateGetAccountDeposits(this.extend(a,s)),n=this.safeValue(o,"deposit_history",[]);return this.parseTransactions(n,r,t,i,{type:"deposit"})}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;if(void 0!==e&&(r=this.currency(e),a.currency_code=r.id),void 0!==i&&(a.max_page_size=i),void 0!==t){if(void 0===this.safeString(s,"to"))throw new c(this.id+' fetchWithdrawals requires a "to" iso8601 string param with the since argument is specified');a.from=this.iso8601(t)}const o=await this.privateGetAccountWithdrawals(this.extend(a,s)),n=this.safeValue(o,"withdrawal_history",[]);return this.parseTransactions(n,r,t,i,{type:"withdrawal"})}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e),o={currency:e,amount:this.currencyToPrecision(e,t)},n=this.safeValue(this.options,"fiat",[]),d=this.inArray(e,n),h=d?"privatePostAccountWithdrawFiat":"privatePostAccountWithdrawCrypto";if(d){if(void 0===this.safeString(a,"payout_account_id"))throw c(this.id+" withdraw() requires a payout_account_id param for fiat "+e+" withdrawals")}else{const e={address:i};void 0!==s&&(e.destination_tag=s),o.recipient=e}const l=await this[h](this.extend(o,a));return this.parseTransaction(l,r)}parseTransaction(e,t){const i=this.safeString(e,"transaction_id"),s=this.safeFloat(e,"amount"),a=this.parse8601(this.safeString(e,"time")),r=this.safeString(e,"currency");t=this.safeCurrency(r,t);const o=this.safeFloat2(e,"fee_amount","fee");let n=void 0;const c=this.safeString(e,"recipient"),d=this.safeString(e,"destination_tag");if(void 0!==o){const t=this.safeString(e,"fee_currency",r);n={cost:o,currency:this.safeCurrencyCode(t)}}return{info:e,id:i,currency:t.code,amount:s,address:c,addressFrom:void 0,addressTo:c,tag:d,tagFrom:void 0,tagTo:d,status:"ok",type:void 0,updated:void 0,txid:this.safeString(e,"blockchain_transaction_id"),timestamp:a,datetime:this.iso8601(a),fee:n}}parseOrderStatus(e){return this.safeString({FILLED:"open",FILLED_FULLY:"closed",FILLED_CLOSED:"canceled",FILLED_REJECTED:"rejected",OPEN:"open",REJECTED:"rejected",CLOSED:"canceled",FAILED:"failed",STOP_TRIGGERED:"triggered"},e,e)}parseOrder(e,t){const i=this.safeValue(e,"trades",[]);e=this.safeValue(e,"order",e);const s=this.safeString(e,"order_id"),a=this.safeString(e,"client_id"),r=this.parse8601(this.safeString(e,"time"));let o=this.parseOrderStatus(this.safeString(e,"status"));const n=this.safeString(e,"instrument_code"),c=this.safeSymbol(n,t,"_"),d=this.safeFloat(e,"price"),h=this.safeFloat(e,"amount");let l=void 0;const u=this.safeFloat(e,"filled_amount");let p=void 0;void 0!==u&&void 0!==h&&(p=Math.max(0,h-u),void 0===o&&(o=p>0?"open":"closed"));const f=this.safeStringLower(e,"side"),m=this.safeStringLower(e,"type"),v=this.parseTrades(i,t,void 0,void 0),y=[];let g=void 0,b=void 0,w=void 0;if(v.length>0){g=v[0].timestamp,b=0,w=0;for(let e=0;e<v.length;e++){const t=v[e];y.push(t.fee),g=Math.max(g,t.timestamp),b=this.sum(b,t.cost),w=this.sum(w,t.amount)}}let k=this.safeFloat(e,"average_price");void 0===k&&void 0!==b&&void 0!==w&&0!==w&&(k=b/w),void 0===l&&void 0!==k&&void 0!==u&&(l=k*u);const x=this.parseTimeInForce(this.safeString(e,"time_in_force")),T=this.safeFloat(e,"trigger_price"),O={id:s,clientOrderId:a,info:e,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:g,symbol:c,type:m,timeInForce:x,side:f,price:d,stopPrice:T,amount:h,cost:l,average:k,filled:u,remaining:p,status:o,trades:v},_=y.length;if(_>0)if(1===_)O.fee=y[0];else{const e=this.groupBy(y,"currency"),t=Object.keys(e);if(1===t.length){const i=t[0],s=this.safeValue(e,i);let a=0;for(let e=0;e<s.length;e++)a=this.sum(a,s[e].cost);O.fee={cost:a,currency:i}}else O.fees=y}else O.fee=void 0;return O}parseTimeInForce(e){return this.safeString({GOOD_TILL_CANCELLED:"GTC",GOOD_TILL_TIME:"GTT",IMMEDIATE_OR_CANCELLED:"IOC",FILL_OR_KILL:"FOK"},e,e)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n=t.toUpperCase(),d={instrument_code:o.id,type:n,side:i.toUpperCase(),amount:this.amountToPrecision(e,s)};let h=!1;if("LIMIT"!==n&&"STOP"!==n||(h=!0),"STOP"===n){const i=this.safeFloat(r,"trigger_price");if(void 0===i)throw new c(this.id+" createOrder requires a trigger_price param for "+t+" orders");d.trigger_price=this.priceToPrecision(e,i),r=this.omit(r,"trigger_price")}h&&(d.price=this.priceToPrecision(e,a));const l=this.safeString2(r,"clientOrderId","client_id");void 0!==l&&(d.client_id=l,r=this.omit(r,["clientOrderId","client_id"]));const u=await this.privatePostAccountOrders(this.extend(d,r));return this.parseOrder(u,o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=this.safeString2(i,"clientOrderId","client_id");i=this.omit(i,["clientOrderId","client_id"]);let a="privateDeleteAccountOrdersOrderId";const r={};void 0!==s?(a="privateDeleteAccountOrdersClientClientId",r.client_id=s):r.order_id=e;return await this[a](this.extend(r,i))}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.market(e);i.instrument_code=t.id}return await this.privateDeleteAccountOrders(this.extend(i,t))}async cancelOrders(e,t,i={}){await this.loadMarkets();const s={ids:e.join(",")};return await this.privateDeleteAccountOrders(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},a=await this.privateGetAccountOrdersOrderId(this.extend(s,i));return this.parseOrder(a)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;if(void 0!==e&&(r=this.market(e),a.instrument_code=r.id),void 0!==t){if(void 0===this.safeString(s,"to"))throw new c(this.id+' fetchOrders requires a "to" iso8601 string param with the since argument is specified, max range is 100 days');a.from=this.iso8601(t)}void 0!==i&&(a.max_page_size=i);const o=await this.privateGetAccountOrders(this.extend(a,s)),n=this.safeValue(o,"order_history",[]);return this.parseOrders(n,r,t,i)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOpenOrders(e,t,i,this.extend({with_cancelled_and_rejected:!0},s))}async fetchOrderTrades(e,t,i,s,a={}){await this.loadMarkets();const r={order_id:e};void 0!==s&&(r.max_page_size=s);const o=await this.privateGetAccountOrdersOrderIdTrades(this.extend(r,a)),n=this.safeValue(o,"trade_history",[]);let c=void 0;return void 0!==t&&(c=this.market(t)),this.parseTrades(n,c,i,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;if(void 0!==e&&(r=this.market(e),a.instrument_code=r.id),void 0!==t){if(void 0===this.safeString(s,"to"))throw new c(this.id+' fetchMyTrades requires a "to" iso8601 string param with the since argument is specified, max range is 100 days');a.from=this.iso8601(t)}void 0!==i&&(a.max_page_size=i);const o=await this.privateGetAccountTrades(this.extend(a,s)),n=this.safeValue(o,"trade_history",[]);return this.parseTrades(n,r,t,i)}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));return"public"===t?Object.keys(n).length&&(o+="?"+this.urlencode(n)):"private"===t&&(this.checkRequiredCredentials(),a={Accept:"application/json",Authorization:"Bearer "+this.apiKey},"POST"===i?(r=this.json(n),a["Content-Type"]="application/json"):Object.keys(n).length&&(o+="?"+this.urlencode(n))),{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,o,n,c,d){if(void 0===n)return;const h=this.safeString(n,"error");if(void 0!==h){const e=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,h,e),this.throwBroadlyMatchedException(this.exceptions.broad,h,e),new r(e)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,InvalidNonce:r,AuthenticationError:o,OrderNotFound:n}=i(0),{TICK_SIZE:c}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitso",name:"Bitso",countries:["MX"],rateLimit:2e3,version:"v3",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87295554-11f98280-c50e-11ea-80d6-15b3bafa8cbf.jpg",api:"https://api.bitso.com",www:"https://bitso.com",doc:"https://bitso.com/api_info",fees:"https://bitso.com/fees",referral:"https://bitso.com/?ref=itej"},precisionMode:c,options:{precision:{XRP:1e-6,MXN:.01,TUSD:.01},defaultPrecision:1e-8},api:{public:{get:["available_books","ticker","order_book","trades"]},private:{get:["account_status","balance","fees","fundings","fundings/{fid}","funding_destination","kyc_documents","ledger","ledger/trades","ledger/fees","ledger/fundings","ledger/withdrawals","mx_bank_codes","open_orders","order_trades/{oid}","orders/{oid}","user_trades","user_trades/{tid}","withdrawals/","withdrawals/{wid}"],post:["bitcoin_withdrawal","debit_card_withdrawal","ether_withdrawal","ripple_withdrawal","bcash_withdrawal","litecoin_withdrawal","orders","phone_number","phone_verification","phone_withdrawal","spei_withdrawal","ripple_withdrawal","bcash_withdrawal","litecoin_withdrawal"],delete:["orders/{oid}","orders/all"]}},exceptions:{"0201":o,104:r}})}async fetchMarkets(e={}){const t=await this.publicGetAvailableBooks(e),i=this.safeValue(t,"payload"),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"book"),[r,o]=a.split("_");let n=r.toUpperCase(),c=o.toUpperCase();n=this.safeCurrencyCode(n),c=this.safeCurrencyCode(c);const d=n+"/"+c,h={amount:{min:this.safeFloat(t,"minimum_amount"),max:this.safeFloat(t,"maximum_amount")},price:{min:this.safeFloat(t,"minimum_price"),max:this.safeFloat(t,"maximum_price")},cost:{min:this.safeFloat(t,"minimum_value"),max:this.safeFloat(t,"maximum_value")}},l=this.safeFloat(this.options.precision,c,this.options.defaultPrecision),u=this.safeFloat(t,"tick_size",l),p={amount:this.safeFloat(this.options.precision,n,this.options.defaultPrecision),price:u},f=this.safeValue(t,"fees",{}),m=this.safeValue(f,"flat_rate",{}),v=this.safeFloat(m,"maker"),y=this.safeFloat(m,"taker"),g=this.safeValue(f,"structure",[]),b={maker:v,taker:y,percentage:!0,tierBased:!0},w=[],k=[];for(let e=0;e<g.length;e++){const t=g[e],i=this.safeFloat(t,"volume"),s=this.safeFloat(t,"taker"),a=this.safeFloat(t,"maker");w.push([i,s]),k.push([i,a]),0===e&&(b.taker=y,b.maker=v)}const x={taker:w,maker:k};b.tiers=x,s.push(this.extend({id:a,symbol:d,base:n,quote:c,baseId:r,quoteId:o,info:t,limits:h,precision:p,active:void 0},b))}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalance(e),i=this.safeValue(t.payload,"balances"),s={info:t};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"currency"),r=this.safeCurrencyCode(a),o={free:this.safeFloat(t,"available"),used:this.safeFloat(t,"locked"),total:this.safeFloat(t,"total")};s[r]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={book:this.marketId(e)},a=await this.publicGetOrderBook(this.extend(s,i)),r=this.safeValue(a,"payload"),o=this.parse8601(this.safeString(r,"updated_at"));return this.parseOrderBook(r,o,"bids","asks","price","amount")}async fetchTicker(e,t={}){await this.loadMarkets();const i={book:this.marketId(e)},s=await this.publicGetTicker(this.extend(i,t)),a=this.safeValue(s,"payload"),r=this.parse8601(this.safeString(a,"created_at")),o=this.safeFloat(a,"vwap"),n=this.safeFloat(a,"volume");let c=void 0;void 0!==n&&void 0!==o&&(c=n*o);const d=this.safeFloat(a,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(a,"high"),low:this.safeFloat(a,"low"),bid:this.safeFloat(a,"bid"),bidVolume:void 0,ask:this.safeFloat(a,"ask"),askVolume:void 0,vwap:o,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:n,quoteVolume:c,info:a}}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"book"),a=this.safeSymbol(s,t,"_"),r=this.safeString2(e,"side","maker_side");let o=this.safeFloat2(e,"amount","major");void 0!==o&&(o=Math.abs(o));let n=void 0;const c=this.safeFloat(e,"fees_amount");if(void 0!==c){const t=this.safeString(e,"fees_currency");n={cost:c,currency:this.safeCurrencyCode(t)}}let d=this.safeFloat(e,"minor");void 0!==d&&(d=Math.abs(d));const h=this.safeFloat(e,"price"),l=this.safeString(e,"oid");return{id:this.safeString(e,"tid"),info:e,timestamp:i,datetime:this.iso8601(i),symbol:a,order:l,type:void 0,side:r,takerOrMaker:void 0,price:h,amount:o,cost:d,fee:n}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={book:a.id},o=await this.publicGetTrades(this.extend(r,s));return this.parseTrades(o.payload,a,t,i)}async fetchMyTrades(e,t,i=25,s={}){await this.loadMarkets();const r=this.market(e),o="marker"in s;if(void 0!==t&&!o)throw new a(this.id+" fetchMyTrades does not support fetching trades starting from a timestamp with the `since` argument, use the `marker` extra param to filter starting from an integer trade id");o&&(s=this.extend(s,{marker:parseInt(s.marker)}));const n={book:r.id,limit:i},c=await this.privateGetUserTrades(this.extend(n,s));return this.parseTrades(c.payload,r,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o={book:this.marketId(e),side:i,type:t,major:this.amountToPrecision(e,s)};"limit"===t&&(o.price=this.priceToPrecision(e,a));const n=await this.privatePostOrders(this.extend(o,r));return{info:n,id:this.safeString(n.payload,"oid")}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={oid:e};return await this.privateDeleteOrdersOid(this.extend(s,i))}parseOrderStatus(e){return this.safeString({"partial-fill":"open",completed:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"oid"),s=this.safeString(e,"side"),a=this.parseOrderStatus(this.safeString(e,"status")),r=this.safeString(e,"book"),o=this.safeSymbol(r,t,"_"),n=this.safeString(e,"type"),c=this.parse8601(this.safeString(e,"created_at")),d=this.safeFloat(e,"price"),h=this.safeFloat(e,"original_amount"),l=this.safeFloat(e,"unfilled_amount");let u=void 0;void 0!==h&&void 0!==l&&(u=h-l);return{info:e,id:i,clientOrderId:this.safeString(e,"client_id"),timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:o,type:n,timeInForce:void 0,side:s,price:d,stopPrice:void 0,amount:h,cost:void 0,remaining:l,filled:u,status:a,fee:void 0,average:void 0,trades:void 0}}async fetchOpenOrders(e,t,i=25,s={}){await this.loadMarkets();const r=this.market(e),o="marker"in s;if(void 0!==t&&!o)throw new a(this.id+" fetchOpenOrders does not support fetching orders starting from a timestamp with the `since` argument, use the `marker` extra param to filter starting from an integer trade id");o&&(s=this.extend(s,{marker:parseInt(s.marker)}));const n={book:r.id,limit:i},c=await this.privateGetOpenOrders(this.extend(n,s));return this.parseOrders(c.payload,r,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=await this.privateGetOrdersOid({oid:e}),a=this.safeValue(s,"payload");if(Array.isArray(a)){if(1===s.payload.length)return this.parseOrder(a[0])}throw new n(this.id+": The order "+e+" not found.")}async fetchOrderTrades(e,t,i,s,a={}){await this.loadMarkets();const r=this.market(t),o={oid:e},n=await this.privateGetOrderTradesOid(this.extend(o,a));return this.parseTrades(n.payload,r)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={fund_currency:this.currency(e).id},s=await this.privateGetFundingDestination(this.extend(i,t));let a=this.safeString(s.payload,"account_identifier"),r=void 0;if(a.indexOf("?dt=")>=0){const e=a.split("?dt=");a=this.safeString(e,0),r=this.safeString(e,1)}return this.checkAddress(a),{currency:e,address:a,tag:r,info:s}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const o={BTC:"Bitcoin",ETH:"Ether",XRP:"Ripple",BCH:"Bcash",LTC:"Litecoin"},n=e in o?o[e]:void 0;if(void 0===n)throw new a(this.id+" not valid withdraw coin: "+e);const c={amount:t,address:i,destination_tag:s},d="privatePost"+n+"Withdrawal",h=await this[d](this.extend(c,r));return{info:h,id:this.safeString(h.payload,"wid")}}sign(e,t="public",i="GET",s={},a,r){let o="/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));"GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n));const c=this.urls.api+o;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();let t=[e,i,o].join("");"GET"!==i&&Object.keys(n).length&&(t+=r=this.json(n));const s=this.hmac(this.encode(t),this.encode(this.secret));a={Authorization:"Bitso "+(this.apiKey+":"+e+":"+s),"Content-Type":"application/json"}}return{url:c,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0!==n&&"success"in n){let e=this.safeValue(n,"success",!1);if("string"==typeof e&&(e="true"===e||"1"===e),!e){const e=this.id+" "+this.json(n),t=this.safeValue(n,"error");if(void 0===t)throw new a(e);const i=this.safeString(t,"code");throw this.throwExactlyMatchedException(this.exceptions,i,e),new a(e)}}}async request(e,t="public",i="GET",s={},r,o){const n=await this.fetch2(e,t,i,s,r,o);if("success"in n&&n.success)return n;throw new a(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(1),{AuthenticationError:a,ExchangeError:r,NotSupported:o,PermissionDenied:n,InvalidNonce:c,OrderNotFound:d,InsufficientFunds:h,InvalidAddress:l,InvalidOrder:u,ArgumentsRequired:p,OnMaintenance:f}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitstamp",name:"Bitstamp",countries:["GB"],rateLimit:1e3,version:"v2",userAgent:this.userAgents.chrome,pro:!0,has:{CORS:!0,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchFundingFees:!0,fetchFees:!0,fetchLedger:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27786377-8c8ab57e-5fe9-11e7-8ea4-2b05b6bcceec.jpg",api:{public:"https://www.bitstamp.net/api",private:"https://www.bitstamp.net/api",v1:"https://www.bitstamp.net/api"},www:"https://www.bitstamp.net",doc:"https://www.bitstamp.net/api"},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"259200"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["ohlc/{pair}/","order_book/{pair}/","ticker_hour/{pair}/","ticker/{pair}/","transactions/{pair}/","trading-pairs-info/"]},private:{post:["balance/","balance/{pair}/","bch_withdrawal/","bch_address/","user_transactions/","user_transactions/{pair}/","open_orders/all/","open_orders/{pair}/","order_status/","cancel_order/","buy/{pair}/","buy/market/{pair}/","buy/instant/{pair}/","sell/{pair}/","sell/market/{pair}/","sell/instant/{pair}/","ltc_withdrawal/","ltc_address/","eth_withdrawal/","eth_address/","xrp_withdrawal/","xrp_address/","xlm_withdrawal/","xlm_address/","pax_withdrawal/","pax_address/","link_withdrawal/","link_address/","usdc_withdrawal/","usdc_address/","omg_withdrawal/","omg_address/","transfer-to-main/","transfer-from-main/","withdrawal-requests/","withdrawal/open/","withdrawal/status/","withdrawal/cancel/","liquidation_address/new/","liquidation_address/info/"]},v1:{post:["bitcoin_deposit_address/","unconfirmed_btc/","bitcoin_withdrawal/","ripple_withdrawal/","ripple_address/"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.005,maker:.005,tiers:{taker:[[0,.005],[2e4,.0025],[1e5,.0024],[2e5,.0022],[4e5,.002],[6e5,.0015],[1e6,.14/100],[2e6,.0013],[4e6,.0012],[2e7,.0011],[5e7,.001],[1e8,.07/100],[5e8,5e-4],[2e9,3e-4],[6e9,1e-4],[1e10,5e-5],[10000000001,0]],maker:[[0,.005],[2e4,.0025],[1e5,.0024],[2e5,.0022],[4e5,.002],[6e5,.0015],[1e6,.14/100],[2e6,.0013],[4e6,.0012],[2e7,.0011],[5e7,.001],[1e8,.07/100],[5e8,5e-4],[2e9,3e-4],[6e9,1e-4],[1e10,5e-5],[10000000001,0]]}},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:5e-4,BCH:1e-4,LTC:.001,ETH:.001,XRP:.02,XLM:.005,PAX:.5,USD:25,EUR:3},deposit:{BTC:0,BCH:0,LTC:0,ETH:0,XRP:0,XLM:0,PAX:0,USD:7.5,EUR:0}}},exceptions:{exact:{"No permission found":n,"API key not found":a,"IP address not allowed":n,"Invalid nonce":c,"Invalid signature":a,"Authentication failed":a,"Missing key, signature and nonce parameters":a,"Your account is frozen":n,"Please update your profile with your FATCA information, before using API.":n,"Order not found":d,"Price is more than 20% below market price.":u,"Bitstamp.net is under scheduled maintenance.":f},broad:{"Minimum order size is":u,"Check your account balance for details.":h,"Ensure this value has at least":l}}})}async fetchMarkets(e={}){const t=await this.fetchMarketsFromCache(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"name");let[r,o]=a.split("/");const n=r.toLowerCase(),c=o.toLowerCase();r=this.safeCurrencyCode(r),o=this.safeCurrencyCode(o);const d=r+"/"+o,h=n+"_"+c,l=this.safeString(s,"url_symbol"),u={amount:s.base_decimals,price:s.counter_decimals},p=s.minimum_order.split(" ")[0],f="Enabled"===s.trading;i.push({id:l,symbol:d,base:r,quote:o,baseId:n,quoteId:c,symbolId:h,info:s,active:f,precision:u,limits:{amount:{min:Math.pow(10,-u.amount),max:void 0},price:{min:Math.pow(10,-u.price),max:void 0},cost:{min:parseFloat(p),max:void 0}}})}return i}constructCurrencyObject(e,t,i,s,a,r){let o="crypto";const n=this.describe();return this.isFiat(t)&&(o="fiat"),{id:e,code:t,info:r,type:o,name:i,active:!0,fee:this.safeFloat(n.fees.funding.withdraw,t),precision:s,limits:{amount:{min:Math.pow(10,-s),max:void 0},price:{min:Math.pow(10,-s),max:void 0},cost:{min:a,max:void 0},withdraw:{min:void 0,max:void 0}}}}async fetchMarketsFromCache(e={}){const t=this.safeValue(this.options,"fetchMarkets",{}),i=this.safeInteger(t,"timestamp"),s=this.safeInteger(t,"expires",1e3),a=this.milliseconds();if(void 0===i||a-i>s){const i=await this.publicGetTradingPairsInfo(e);this.options.fetchMarkets=this.extend(t,{response:i,timestamp:a})}return this.safeValue(this.options.fetchMarkets,"response")}async fetchCurrencies(e={}){const t=await this.fetchMarketsFromCache(e),i={};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"name");let[r,o]=a.split("/");const n=r.toLowerCase(),c=o.toLowerCase();r=this.safeCurrencyCode(r),o=this.safeCurrencyCode(o);const d=this.safeString(s,"description"),[h,l]=d.split(" / "),u=s.minimum_order.split(" ")[0];r in i||(i[r]=this.constructCurrencyObject(n,r,h,s.base_decimals,void 0,s)),o in i||(i[o]=this.constructCurrencyObject(c,o,l,s.counter_decimals,parseFloat(u),s))}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)},a=await this.publicGetOrderBookPair(this.extend(s,i)),r=this.safeInteger(a,"microtimestamp"),o=parseInt(r/1e3),n=this.parseOrderBook(a,o);return n.nonce=r,n}async fetchTicker(e,t={}){await this.loadMarkets();const i={pair:this.marketId(e)},s=await this.publicGetTickerPair(this.extend(i,t)),a=this.safeTimestamp(s,"timestamp"),r=this.safeFloat(s,"vwap"),o=this.safeFloat(s,"volume");let n=void 0;void 0!==o&&void 0!==r&&(n=o*r);const c=this.safeFloat(s,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:r,open:this.safeFloat(s,"open"),close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:o,quoteVolume:n,info:s}}getCurrencyIdFromTransaction(e){const t=this.safeStringLower(e,"currency");if(void 0!==t)return t;e=this.omit(e,["fee","price","datetime","type","status","id"]);const i=Object.keys(e);for(let t=0;t<i.length;t++){const s=i[t];if(s.indexOf("_")<0){const t=this.safeFloat(e,s);if(void 0!==t&&0!==t)return s}}}getMarketFromTrade(e){e=this.omit(e,["fee","price","datetime","tid","type","order_id","side"]);const t=Object.keys(e),i=t.length;if(i>2)throw new r(this.id+" getMarketFromTrade too many keys: "+this.json(t)+" in the trade: "+this.json(e));if(2===i){let e=t[0]+t[1];if(e in this.markets_by_id)return this.markets_by_id[e];if(e=t[1]+t[0],e in this.markets_by_id)return this.markets_by_id[e]}}getMarketFromTrades(e){const t=this.indexBy(e,"symbol"),i=Object.keys(t);if(1===i.length)return this.markets[i[0]]}parseTrade(e,t){const i=this.safeString2(e,"id","tid");let s=void 0,a=void 0,r=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");const n=this.safeString(e,"order_id");let c=this.safeFloat(e,"cost");if(void 0===t){const i=Object.keys(e);for(let e=0;e<i.length;e++)if(i[e].indexOf("_")>=0){const s=i[e].replace("_","");s in this.markets_by_id&&(t=this.markets_by_id[s])}void 0===t&&(t=this.getMarketFromTrade(e))}const d=this.safeFloat(e,"fee");let h=void 0;void 0!==t&&(r=this.safeFloat(e,t.symbolId,r),o=this.safeFloat(e,t.baseId,o),c=this.safeFloat(e,t.quoteId,c),h=t.quote,s=t.symbol);let l=this.safeString2(e,"date","datetime");void 0!==l&&(l.indexOf(" ")>=0?l=this.parse8601(l):(l=parseInt(l),l*=1e3)),"id"in e?void 0!==o&&(o<0?(a="sell",o=-o):a="buy"):(a=this.safeString(e,"type"),"1"===a?a="sell":"0"===a&&(a="buy")),void 0===c&&void 0!==r&&void 0!==o&&(c=r*o),void 0!==c&&(c=Math.abs(c));let u=void 0;return void 0!==d&&(u={cost:d,currency:h}),{id:i,info:e,timestamp:l,datetime:this.iso8601(l),symbol:s,order:n,type:void 0,side:a,takerOrMaker:void 0,price:r,amount:o,cost:c,fee:u}}parseTradingFee(e,t){const i=this.market(t),s=this.safeFloat(e,i.id+"_fee");return{symbol:t,maker:s,taker:s}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={pair:a.id,time:"hour"},o=await this.publicGetTransactionsPair(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,"timestamp"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={pair:r.id,step:this.timeframes[t]},n=this.parseTimeframe(t);if(void 0===s){if(void 0===i)throw new p(this.id+" fetchOHLCV requires a since argument or a limit argument");{s=1e3;const e=parseInt(i/1e3);o.start=e,o.end=this.sum(e,s*n),o.limit=s}}else{if(void 0!==i){const e=parseInt(i/1e3);o.start=e,o.end=this.sum(e,s*n)}o.limit=Math.min(s,1e3)}const c=await this.publicGetOhlcPair(this.extend(o,a)),d=this.safeValue(c,"data",{}),h=this.safeValue(d,"ohlc",[]);return this.parseOHLCVs(h,r,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){const a=s[e],r=this.currency(a).id,o=this.account();o.free=this.safeFloat(t,r+"_available"),o.used=this.safeFloat(t,r+"_reserved"),o.total=this.safeFloat(t,r+"_balance"),i[a]=o}return this.parseBalance(i)}async fetchTradingFee(e,t={}){await this.loadMarkets();const i={};let s="privatePostBalance",a=void 0;void 0!==e&&(a=this.market(e),i.pair=a.id,s+="Pair");const r=await this[s](this.extend(i,t));return{info:r,symbol:e,maker:r.fee,taker:r.fee}}praseTradingFees(e){const t={info:e},i=Object.keys(this.markets);for(let s=0;s<i.length;s++){const a=i[s],r=this.parseTradingFee(e,a);t[a]=r}return t}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e);return this.praseTradingFees(t)}parseFundingFees(e){const t={},i=Object.keys(e);for(let s=0;s<i.length;s++){const a=i[s];if(a.indexOf("_withdrawal_fee")>=0){const i=a.split("_")[0];t[this.safeCurrencyCode(i)]=this.safeFloat(e,a)}}return{info:e,withdraw:t,deposit:{}}}async fetchFundingFees(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e);return this.parseFundingFees(t)}async fetchFees(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e),i=this.praseTradingFees(t);delete i.info;const s=this.parseFundingFees(t);return delete s.info,{info:t,trading:i,funding:s}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e);let n="privatePost"+this.capitalize(i);const c={pair:o.id,amount:this.amountToPrecision(e,s)};"market"===t?n+="Market":"instant"===t?n+="Instant":c.price=this.priceToPrecision(e,a),n+="Pair";const d=await this[n](this.extend(c,r)),h=this.parseOrder(d,o);return this.extend(h,{type:t})}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e};return await this.privatePostCancelOrder(this.extend(s,i))}parseOrderStatus(e){return this.safeString({"In Queue":"open",Open:"open",Finished:"closed",Canceled:"canceled"},e,e)}async fetchOrderStatus(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privatePostOrderStatus(this.extend(s,i));return this.parseOrderStatus(this.safeString(a,"status"))}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=void 0;void 0!==t&&(s=this.market(t));const a={id:e},r=await this.privatePostOrderStatus(this.extend(a,i));return this.parseOrder(r,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={};let r="privatePostUserTransactions",o=void 0;void 0!==e&&(o=this.market(e),a.pair=o.id,r+="Pair"),void 0!==i&&(a.limit=i);const n=await this[r](this.extend(a,s)),c=this.filterBy(n,"type","2");return this.parseTrades(c,o,t,i)}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const a={};void 0!==i&&(a.limit=i);const r=await this.privatePostUserTransactions(this.extend(a,s));let o=void 0;void 0!==e&&(o=this.currency(e));const n=this.filterByArray(r,"type",["0","1"],!1);return this.parseTransactions(n,o,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const a={};a.timedelta=void 0!==t?this.milliseconds()-t:5e7;const r=await this.privatePostWithdrawalRequests(this.extend(a,s));return this.parseTransactions(r,void 0,t,i)}parseTransaction(e,t){const i=this.parse8601(this.safeString(e,"datetime")),s=this.safeString(e,"id"),a=this.getCurrencyIdFromTransaction(e),r=this.safeCurrencyCode(a,t),o=this.safeFloat(e,"fee");let n=void 0,c=void 0;"amount"in e?c=this.safeFloat(e,"amount"):void 0!==t?(c=this.safeFloat(e,t.id,c),n=t.code):void 0!==r&&void 0!==a&&(c=this.safeFloat(e,a,c),n=r),void 0!==c&&(c=Math.abs(c));let d="ok";"status"in e&&(d=this.parseTransactionStatus(this.safeString(e,"status")));let h=void 0;if("type"in e){const t=this.safeString(e,"type");"0"===t?h="deposit":"1"===t&&(h="withdrawal")}else h="withdrawal";const l=this.safeString(e,"transaction_id");let u=void 0,p=this.safeString(e,"address");if(void 0!==p){const e=p.split("?dt=");e.length>1&&(p=e[0],u=e[1])}const f=p,m=u;let v=void 0;return void 0!==o&&(v={currency:n,cost:o,rate:void 0}),{info:e,id:s,txid:l,timestamp:i,datetime:this.iso8601(i),addressFrom:void 0,addressTo:f,address:p,tagFrom:void 0,tagTo:m,tag:u,type:h,amount:c,currency:r,status:d,updated:void 0,fee:v}}parseTransactionStatus(e){return this.safeString({0:"pending",1:"pending",2:"ok",3:"canceled",4:"failed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id");let s=this.safeString(e,"type");void 0!==s&&(s="1"===s?"sell":"buy");const a=this.parse8601(this.safeString(e,"datetime"));let r=void 0,o=void 0,n=this.safeStringLower(e,"currency_pair");void 0!==n&&(n=n.replace("/",""),n in this.markets_by_id&&(o=(t=this.markets_by_id[n]).symbol));let c=this.safeFloat(e,"amount"),d=0;const h=[],l=this.safeValue(e,"transactions",[]);let u=void 0,p=void 0;const f=l.length;if(f>0){u=0;for(let e=0;e<f;e++){const a=this.parseTrade(this.extend({order_id:i,side:s},l[e]),t);d=this.sum(d,a.amount),u=this.sum(u,a.fee.cost),void 0===p&&(p=0),p=this.sum(p,a.cost),h.push(a)}r=h[f-1].timestamp}const m=this.parseOrderStatus(this.safeString(e,"status"));"closed"===m&&void 0===c&&(c=d);let v=void 0;void 0!==c&&(v=c-d);let y=this.safeFloat(e,"price");void 0===t&&(t=this.getMarketFromTrades(h));let g=void 0;void 0!==t&&(void 0===o&&(o=t.symbol),g=t.quote),void 0===p?void 0!==y&&(p=y*d):void 0===y&&d>0&&(y=p/d);let b=void 0;return void 0!==u&&void 0!==g&&(b={cost:u,currency:g}),{id:i,clientOrderId:void 0,datetime:this.iso8601(a),timestamp:a,lastTradeTimestamp:r,status:m,symbol:o,type:void 0,timeInForce:void 0,side:s,price:y,stopPrice:void 0,cost:p,amount:c,filled:d,remaining:v,trades:h,fee:b,info:e,average:void 0}}parseLedgerEntryType(e){return this.safeString({0:"transaction",1:"transaction",2:"trade",14:"transfer"},e,e)}parseLedgerEntry(e,t){const i=this.parseLedgerEntryType(this.safeString(e,"type"));if("trade"===i){const t=this.parseTrade(e);let s=void 0;const a=Object.keys(e);for(let e=0;e<a.length;e++)if(a[e].indexOf("_")>=0){const t=a[e].replace("_","");t in this.markets_by_id&&(s=this.markets_by_id[t])}void 0===s&&(s=this.getMarketFromTrade(e));const r="buy"===t.side?"in":"out";return{id:t.id,info:e,timestamp:t.timestamp,datetime:t.datetime,direction:r,account:void 0,referenceId:t.order,referenceAccount:void 0,type:i,currency:s.base,amount:t.amount,before:void 0,after:void 0,status:"ok",fee:t.fee}}{const t=this.parseTransaction(e);let s=void 0;if("amount"in e){s=this.safeFloat(e,"amount")>0?"in":"out"}else if("currency"in t&&void 0!==t.currency){const i=this.currencyId(t.currency);s=this.safeFloat(e,i)>0?"in":"out"}return{id:t.id,info:e,timestamp:t.timestamp,datetime:t.datetime,direction:s,account:void 0,referenceId:t.txid,referenceAccount:void 0,type:i,currency:t.currency,amount:t.amount,before:void 0,after:void 0,status:t.status,fee:t.fee}}}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const a={};void 0!==i&&(a.limit=i);const r=await this.privatePostUserTransactions(this.extend(a,s));let o=void 0;return void 0!==e&&(o=this.currency(e)),this.parseLedger(r,o,t,i)}async fetchOpenOrders(e,t,i,s={}){let a=void 0;await this.loadMarkets(),void 0!==e&&(a=this.market(e));const r=await this.privatePostOpenOrdersAll(s);return this.parseOrders(r,a,t,i,{status:"open",type:"limit"})}getCurrencyName(e){return"BTC"===e?"bitcoin":e.toLowerCase()}isFiat(e){return"USD"===e||"EUR"===e||"GBP"===e}async fetchDepositAddress(e,t={}){if(this.isFiat(e))throw new o(this.id+" fiat fetchDepositAddress() for "+e+" is not supported!");const i=this.getCurrencyName(e),s="BTC"===e;let a=s?"v1":"private";a+="Post"+this.capitalize(i),a+=s?"Deposit":"",a+="Address";let r=await this[a](t);s&&(r=JSON.parse(r));const n=s?r:this.safeString(r,"address"),c=s?void 0:this.safeString2(r,"memo_id","destination_tag");return this.checkAddress(n),{currency:e,address:n,tag:c,info:r}}async withdraw(e,t,i,s,a={}){await this.loadMarkets(),this.checkAddress(i);const r={amount:t};let o=void 0;if(this.isFiat(e)){o="privatePostWithdrawalOpen";const t=this.currency(e);r.iban=i,r.account_currency=t.id}else{const t=this.getCurrencyName(e);o="BTC"===e?"v1":"private",o+="Post"+this.capitalize(t)+"Withdrawal","XRP"===e&&void 0!==s&&(r.destination_tag=s),r.address=i}const n=await this[o](this.extend(r,a));return{info:n,id:n.id}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t]+"/";"v1"!==t&&(o+=this.version+"/"),o+=this.implodeParams(e,s);let n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();if("v1"===this.safeValue(this.options,"auth","v2")||"v1"===t){const e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.encode(this.hmac(this.encode(t),this.encode(this.secret)));n=this.extend({key:this.apiKey,signature:i.toUpperCase(),nonce:e},n),r=this.urlencode(n),a={"Content-Type":"application/x-www-form-urlencoded"}}else{const e="BITSTAMP "+this.apiKey,t=this.uuid(),s=this.milliseconds().toString(),c="v2";let d="";a={"X-Auth":e,"X-Auth-Nonce":t,"X-Auth-Timestamp":s,"X-Auth-Version":c},"POST"===i&&(Object.keys(n).length?(r=this.urlencode(n),d="application/x-www-form-urlencoded",a["Content-Type"]=d):(r=this.urlencode({foo:"bar"}),d="application/x-www-form-urlencoded",a["Content-Type"]=d));const h=r||"",l=e+i+o.replace("https://","")+d+t+s+c+h,u=this.hmac(this.encode(l),this.encode(this.secret));a["X-Auth-Signature"]=u}}return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,o,n,c,d,h){if(void 0===c)return;const l=this.safeString(c,"status"),u=this.safeValue(c,"error");if("error"===l||void 0!==u){let e=[];if("string"==typeof u)e.push(u);else if(void 0!==u){const t=Object.keys(u);for(let i=0;i<t.length;i++){const s=t[i],a=this.safeValue(u,s);Array.isArray(a)?e=this.arrayConcat(e,a):e.push(a)}}const t=this.safeValue(c,"reason",{});if("string"==typeof t)e.push(t);else{const i=this.safeValue(t,"__all__",[]);for(let t=0;t<i.length;t++)e.push(i[t])}if("API0005"===this.safeString(c,"code"))throw new a(this.id+" invalid signature, use the uid for the main account if you have subaccounts");const i=this.id+" "+n;for(let t=0;t<e.length;t++){const s=e[t];this.throwExactlyMatchedException(this.exceptions.exact,s,i),this.throwBroadlyMatchedException(this.exceptions.broad,s,i)}throw new r(i)}}}},function(e,t,i){"use strict";const s=i(1),{BadSymbol:a,ExchangeError:r,NotSupported:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitstamp1",name:"Bitstamp",countries:["GB"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchMyTrades:!0,fetchOrder:!1,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27786377-8c8ab57e-5fe9-11e7-8ea4-2b05b6bcceec.jpg",api:"https://www.bitstamp.net/api",www:"https://www.bitstamp.net",doc:"https://www.bitstamp.net/api"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["ticker","ticker_hour","order_book","transactions","eur_usd"]},private:{post:["balance","user_transactions","open_orders","order_status","cancel_order","cancel_all_orders","buy","sell","bitcoin_deposit_address","unconfirmed_btc","ripple_withdrawal","ripple_address","withdrawal_requests","bitcoin_withdrawal"]}},markets:{"BTC/USD":{id:"btcusd",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"btc",quoteId:"usd",maker:.005,taker:.005},"BTC/EUR":{id:"btceur",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"btc",quoteId:"eur",maker:.005,taker:.005},"EUR/USD":{id:"eurusd",symbol:"EUR/USD",base:"EUR",quote:"USD",baseId:"eur",quoteId:"usd",maker:.005,taker:.005},"XRP/USD":{id:"xrpusd",symbol:"XRP/USD",base:"XRP",quote:"USD",baseId:"xrp",quoteId:"usd",maker:.005,taker:.005},"XRP/EUR":{id:"xrpeur",symbol:"XRP/EUR",base:"XRP",quote:"EUR",baseId:"xrp",quoteId:"eur",maker:.005,taker:.005},"XRP/BTC":{id:"xrpbtc",symbol:"XRP/BTC",base:"XRP",quote:"BTC",baseId:"xrp",quoteId:"btc",maker:.005,taker:.005},"LTC/USD":{id:"ltcusd",symbol:"LTC/USD",base:"LTC",quote:"USD",baseId:"ltc",quoteId:"usd",maker:.005,taker:.005},"LTC/EUR":{id:"ltceur",symbol:"LTC/EUR",base:"LTC",quote:"EUR",baseId:"ltc",quoteId:"eur",maker:.005,taker:.005},"LTC/BTC":{id:"ltcbtc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc",maker:.005,taker:.005},"ETH/USD":{id:"ethusd",symbol:"ETH/USD",base:"ETH",quote:"USD",baseId:"eth",quoteId:"usd",maker:.005,taker:.005},"ETH/EUR":{id:"etheur",symbol:"ETH/EUR",base:"ETH",quote:"EUR",baseId:"eth",quoteId:"eur",maker:.005,taker:.005},"ETH/BTC":{id:"ethbtc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc",maker:.005,taker:.005}}})}async fetchOrderBook(e,t,i={}){if("BTC/USD"!==e)throw new r(this.id+" "+this.version+" fetchOrderBook doesn't support "+e+", use it for BTC/USD only");await this.loadMarkets();const s=await this.publicGetOrderBook(i),a=this.safeTimestamp(s,"timestamp");return this.parseOrderBook(s,a)}async fetchTicker(e,t={}){if("BTC/USD"!==e)throw new r(this.id+" "+this.version+" fetchTicker doesn't support "+e+", use it for BTC/USD only");await this.loadMarkets();const i=await this.publicGetTicker(t),s=this.safeTimestamp(i,"timestamp"),a=this.safeFloat(i,"vwap"),o=this.safeFloat(i,"volume");let n=void 0;void 0!==o&&void 0!==a&&(n=o*a);const c=this.safeFloat(i,"last");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:a,open:this.safeFloat(i,"open"),close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:o,quoteVolume:n,info:i}}parseTrade(e,t){const i=this.safeTimestamp2(e,"date","datetime"),s=0===e.type?"buy":"sell",a=this.safeString(e,"order_id");"currency_pair"in e&&e.currency_pair in this.markets_by_id&&(t=this.markets_by_id[e.currency_pair]);const r=this.safeString(e,"tid"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let c=void 0;void 0!==o&&void 0!==n&&(c=o*n);let d=void 0;return void 0!==t&&(d=t.symbol),{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:d,order:a,type:void 0,side:s,takerOrMaker:void 0,price:o,amount:n,cost:c,fee:void 0}}async fetchTrades(e,t,i,s={}){if("BTC/USD"!==e)throw new a(this.id+" "+this.version+" fetchTrades doesn't support "+e+", use it for BTC/USD only");await this.loadMarkets();const r=this.market(e),o=await this.publicGetTransactions(this.extend({time:"minute"},s));return this.parseTrades(o,r,t,i)}async fetchBalance(e={}){const t=await this.privatePostBalance(e),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){const a=s[e],r=this.currency(a).id,o=this.account();o.free=this.safeFloat(t,r+"_available"),o.used=this.safeFloat(t,r+"_reserved"),o.total=this.safeFloat(t,r+"_balance"),i[a]=o}return this.parseBalance(i)}async createOrder(e,t,i,s,a,o={}){if("limit"!==t)throw new r(this.id+" "+this.version+" accepts limit orders only");if("BTC/USD"!==e)throw new r(this.id+" v1 supports BTC/USD orders only");await this.loadMarkets();const n="privatePost"+this.capitalize(i),c={amount:s,price:a},d=await this[n](this.extend(c,o));return{info:d,id:this.safeString(d,"id")}}async cancelOrder(e,t,i={}){return await this.privatePostCancelOrder({id:e})}parseOrderStatus(e){return this.safeString({"In Queue":"open",Open:"open",Finished:"closed",Canceled:"canceled"},e,e)}async fetchOrderStatus(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privatePostOrderStatus(this.extend(s,i));return this.parseOrderStatus(a)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let a=void 0;void 0!==e&&(a=this.market(e));const r={id:a?a.id:"all"},o=await this.privatePostOpenOrdersId(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchOrder(e,t,i={}){throw new o(this.id+" fetchOrder is not implemented yet")}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.encode(this.hmac(this.encode(t),this.encode(this.secret)));n=this.extend({key:this.apiKey,signature:i.toUpperCase(),nonce:e},n),r=this.urlencode(n),a={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:r,headers:a}}async request(e,t="public",i="GET",s={},a,o){const n=await this.fetch2(e,t,i,s,a,o);if("status"in n&&"error"===n.status)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1),{BadSymbol:a,ExchangeError:r,ExchangeNotAvailable:o,AuthenticationError:n,InvalidOrder:c,InsufficientFunds:d,OrderNotFound:h,DDoSProtection:l,PermissionDenied:u,AddressPending:p,OnMaintenance:f,BadRequest:m}=i(0),{TRUNCATE:v,DECIMAL_PLACES:y}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bittrex",name:"Bittrex",countries:["US"],version:"v3",rateLimit:1500,certified:!0,pro:!0,has:{CORS:!1,cancelAllOrders:!0,cancelOrder:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchDeposits:!0,fetchDepositAddress:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMarkets:!0,fetchMyTrades:"emulated",fetchOHLCV:!0,fetchOrder:!0,fetchOrderTrades:!0,fetchOrderBook:!0,fetchOpenOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"MINUTE_1","5m":"MINUTE_5","1h":"HOUR_1","1d":"DAY_1"},hostname:"bittrex.com",urls:{logo:"https://user-images.githubusercontent.com/51840849/87153921-edf53180-c2c0-11ea-96b9-f2a9a95a455b.jpg",api:{public:"https://api.bittrex.com",private:"https://api.bittrex.com"},www:"https://bittrex.com",doc:["https://bittrex.github.io/api/v3"],fees:["https://bittrex.zendesk.com/hc/en-us/articles/115003684371-BITTREX-SERVICE-FEES-AND-WITHDRAWAL-LIMITATIONS","https://bittrex.zendesk.com/hc/en-us/articles/115000199651-What-fees-does-Bittrex-charge-"],referral:"https://bittrex.com/Account/Register?referralCode=1ZE-G0G-M3B"},api:{public:{get:["ping","currencies","currencies/{symbol}","markets","markets/tickers","markets/summaries","markets/{marketSymbol}","markets/{marketSymbol}/summary","markets/{marketSymbol}/orderbook","markets/{marketSymbol}/trades","markets/{marketSymbol}/ticker","markets/{marketSymbol}/candles/{candleInterval}/recent","markets/{marketSymbol}/candles/{candleInterval}/historical/{year}/{month}/{day}","markets/{marketSymbol}/candles/{candleInterval}/historical/{year}/{month}","markets/{marketSymbol}/candles/{candleInterval}/historical/{year}"]},private:{get:["account","account/volume","addresses","addresses/{currencySymbol}","balances","balances/{currencySymbol}","deposits/open","deposits/closed","deposits/ByTxId/{txId}","deposits/{depositId}","orders/closed","orders/open","orders/{orderId}","orders/{orderId}/executions","ping","subaccounts/{subaccountId}","subaccounts","withdrawals/open","withdrawals/closed","withdrawals/ByTxId/{txId}","withdrawals/{withdrawalId}","withdrawals/whitelistAddresses","conditional-orders/{conditionalOrderId}","conditional-orders/closed","conditional-orders/open","transfers/sent","transfers/received","transfers/{transferId}"],post:["addresses","orders","subaccounts","withdrawals","conditional-orders","transfers"],delete:["orders/open","orders/{orderId}","withdrawals/{withdrawalId}","conditional-orders/{conditionalOrderId}"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0025,taker:.0025},funding:{tierBased:!1,percentage:!1}},exceptions:{exact:{BAD_REQUEST:m,STARTDATE_OUT_OF_RANGE:m,APISIGN_NOT_PROVIDED:n,INVALID_SIGNATURE:n,INVALID_CURRENCY:r,INVALID_PERMISSION:n,INSUFFICIENT_FUNDS:d,INVALID_CEILING_MARKET_BUY:c,INVALID_FIAT_ACCOUNT:c,INVALID_ORDER_TYPE:c,QUANTITY_NOT_PROVIDED:c,MIN_TRADE_REQUIREMENT_NOT_MET:c,ORDER_NOT_OPEN:h,INVALID_ORDER:c,UUID_INVALID:h,RATE_NOT_PROVIDED:c,INVALID_MARKET:a,WHITELIST_VIOLATION_IP:u,DUST_TRADE_DISALLOWED_MIN_VALUE:c,RESTRICTED_MARKET:a,"We are down for scheduled maintenance, but well be back up shortly.":f},broad:{throttled:l,problem:o}},options:{fetchTicker:{method:"publicGetMarketsMarketSymbolTicker"},fetchTickers:{method:"publicGetMarketsTickers"},parseOrderStatus:!1,hasAlreadyAuthenticatedSuccessfully:!1,tag:{NXT:!0,CRYPTO_NOTE_PAYMENTID:!0,BITSHAREX:!0,RIPPLE:!0,NEM:!0,STELLAR:!0,STEEM:!0},subaccountId:void 0,fetchClosedOrdersFilterBySince:!0},commonCurrencies:{REPV2:"REP"}})}costToPrecision(e,t){return this.decimalToPrecision(t,v,this.markets[e].precision.price,y)}feeToPrecision(e,t){return this.decimalToPrecision(t,v,this.markets[e].precision.price,y)}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"baseCurrencySymbol"),r=this.safeString(s,"quoteCurrencySymbol"),o=this.safeString(s,"symbol"),n=this.safeCurrencyCode(a),c=this.safeCurrencyCode(r),d=n+"/"+c,h={amount:8,price:this.safeInteger(s,"precision",8)},l="ONLINE"===this.safeString(s,"status");i.push({id:o,symbol:d,base:n,quote:c,baseId:a,quoteId:r,active:l,info:s,precision:h,limits:{amount:{min:this.safeFloat(s,"minTradeSize"),max:void 0},price:{min:1/Math.pow(10,h.price),max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalances(e),i={info:t},s=this.indexBy(t,"currencySymbol"),a=Object.keys(s);for(let e=0;e<a.length;e++){const t=a[e],r=this.safeCurrencyCode(t),o=this.account(),n=s[t];o.free=this.safeFloat(n,"available"),o.total=this.safeFloat(n,"total"),i[r]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={marketSymbol:this.marketId(e)};if(void 0!==t){if(1!==t&&25!==t&&500!==t)throw new m(this.id+" fetchOrderBook() limit argument must be undefined, 1, 25 or 500, default is 25");s.depth=t}const a=await this.publicGetMarketsMarketSymbolOrderbook(this.extend(s,i)),r=this.safeInteger(this.last_response_headers,"Sequence"),o=this.parseOrderBook(a,void 0,"bid","ask","rate","quantity");return o.nonce=r,o}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"symbol"),r=this.safeCurrencyCode(a),o=8,n=this.safeFloat(s,"txFee"),c=this.safeString(s,"status");i[r]={id:a,code:r,address:this.safeString(s,"baseAddress"),info:s,type:this.safeString(s,"coinType"),name:this.safeString(s,"name"),active:"ONLINE"===c,fee:n,precision:o,limits:{amount:{min:1/Math.pow(10,o),max:void 0},price:{min:1/Math.pow(10,o),max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:n,max:void 0}}}}return i}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"updatedAt")),s=this.safeString(e,"symbol"),a=this.safeSymbol(s,t,"-"),r=this.safeFloat(e,"percentChange"),o=this.safeFloat(e,"lastTradeRate");return{symbol:a,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bidRate"),bidVolume:void 0,ask:this.safeFloat(e,"askRate"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:r,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.safeValue(this.options,"fetchTickers",{}),s=this.safeString(i,"method","publicGetMarketsTickers"),a=this.safeString(t,"method",s);t=this.omit(t,"method");const r=await this[a](t),o=[];for(let e=0;e<r.length;e++){const t=this.parseTicker(r[e]);o.push(t)}return this.filterByArray(o,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={marketSymbol:i.id},a=this.safeValue(this.options,"fetchTicker",{}),r=this.safeString(a,"method","publicGetMarketsMarketSymbolTicker"),o=this.safeString(t,"method",r);t=this.omit(t,"method");const n=await this[o](this.extend(s,t));return this.parseTicker(n,i)}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"executedAt")),s=this.safeString(e,"id"),a=this.safeString(e,"orderId"),r=this.safeString(e,"marketSymbol");t=this.safeMarket(r,t,"-");let o=void 0;const n=this.safeFloat(e,"rate"),c=this.safeFloat(e,"quantity");void 0!==c&&void 0!==n&&(o=n*c);let d=void 0;const h=this.safeValue(e,"isTaker");void 0!==h&&(d=h?"taker":"maker");let l=void 0;const u=this.safeFloat(e,"commission");void 0!==u&&(l={cost:u,currency:t.quote});const p=this.safeStringLower(e,"takerSide");return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:s,order:a,takerOrMaker:d,type:void 0,side:p,price:n,amount:c,cost:o,fee:l}}async fetchTime(e={}){const t=await this.publicGetPing(e);return this.safeInteger(t,"serverTime")}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={marketSymbol:this.marketId(e)},o=await this.publicGetMarketsMarketSymbolTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"startsAt")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o=r.baseId+"-"+r.quoteId,n={candleInterval:this.timeframes[t],marketSymbol:o};let c="publicGetMarketsMarketSymbolCandlesCandleIntervalRecent";if(void 0!==i){const e=this.milliseconds(),s=Math.abs(e-i),a=this.ymd(i).split("-"),r=this.safeInteger(a,0),o=this.safeInteger(a,1),d=this.safeInteger(a,2);"1d"===t?s>316224e5&&(c="publicGetMarketsMarketSymbolCandlesCandleIntervalHistoricalYear",n.year=r):"1h"===t?s>26784e5&&(c="publicGetMarketsMarketSymbolCandlesCandleIntervalHistoricalYearMonth",n.year=r,n.month=o):s>864e5&&(c="publicGetMarketsMarketSymbolCandlesCandleIntervalHistoricalYearMonthDay",n.year=r,n.month=o,n.day=d)}const d=await this[c](this.extend(n,a));return this.parseOHLCVs(d,r,t,i,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.market(e),a.marketSymbol=r.id);const o=await this.privateGetOrdersOpen(this.extend(a,s));return this.parseOrders(o,r,t,i)}async fetchOrderTrades(e,t,i,s,a={}){await this.loadMarkets();const r={orderId:e},o=await this.privateGetOrdersOrderIdExecutions(this.extend(r,a));let n=void 0;return void 0!==t&&(n=this.market(t)),this.parseTrades(o,n,i,s)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n=t.toUpperCase(),c={marketSymbol:o.baseId+"-"+o.quoteId,direction:i.toUpperCase(),type:n};"CEILING_LIMIT"===n||"CEILING_MARKET"===n?(c.ceiling=this.priceToPrecision(e,a),c.timeInForce="IMMEDIATE_OR_CANCEL"):(c.quantity=this.amountToPrecision(e,s),"LIMIT"===n?(c.limit=this.priceToPrecision(e,a),c.timeInForce="GOOD_TIL_CANCELLED"):c.timeInForce="IMMEDIATE_OR_CANCEL");const d=await this.privatePostOrders(this.extend(c,r));return this.parseOrder(d,o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},a=await this.privateDeleteOrdersOrderId(this.extend(s,i));return this.extend(this.parseOrder(a),{id:e,info:a,status:"canceled"})}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s=void 0;void 0!==e&&(s=this.market(e),i.marketSymbol=s.id);const a=await this.privateDeleteOrdersOpen(this.extend(i,t)),r=[];for(let e=0;e<a.length;e++){const t=this.safeValue(a[e],"result",{});r.push(t)}return this.parseOrders(r,s)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.currencySymbol=r.id);const o=await this.privateGetDepositsClosed(this.extend(a,s));return this.parseTransactions(o,r,void 0,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.currencySymbol=r.id);const o=await this.privateGetWithdrawalsClosed(this.extend(a,s));return this.parseTransactions(o,r,t,i)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeFloat(e,"quantity"),a=this.safeString(e,"cryptoAddress"),r=this.safeString(e,"txId"),o=this.parse8601(this.safeString(e,"updatedAt")),n=this.parse8601(this.safeString(e,"createdAt")),c=n||o,d=void 0===n?"deposit":"withdrawal",h=this.safeString(e,"currencySymbol"),l=this.safeCurrencyCode(h,t);let u="pending";if("deposit"===d)u="ok";else{const t=this.safeString(e,"status");"ERROR_INVALID_ADDRESS"===t?u="failed":"CANCELLED"===t?u="canceled":"PENDING"===t?u="pending":("COMPLETED"===t||"AUTHORIZED"===t&&void 0!==r)&&(u="ok")}let p=this.safeFloat(e,"txCost");return void 0===p&&"deposit"===d&&(p=0),{info:e,id:i,currency:l,amount:s,address:a,tag:void 0,status:u,type:d,updated:o,txid:r,timestamp:c,datetime:this.iso8601(c),fee:{currency:l,cost:p}}}parseTimeInForce(e){return this.safeString({GOOD_TIL_CANCELLED:"GTC",IMMEDIATE_OR_CANCEL:"IOC",FILL_OR_KILL:"FOK",POST_ONLY_GOOD_TIL_CANCELLED:"POST_ONLY_GOOD_TIL_CANCELLED"},e,e)}parseOrder(e,t){const i=this.safeString(e,"marketSymbol");let s=void 0,a=void 0;if(void 0!==i){const[e,t]=i.split("-"),r=this.safeCurrencyCode(e),o=this.safeCurrencyCode(t);s=r+"/"+o,a=o}const r=this.safeStringLower(e,"direction"),o=this.safeString(e,"createdAt"),n=this.safeString(e,"updatedAt"),c=this.safeString(e,"closedAt");let d=void 0;void 0!==c?d=this.parse8601(c):n&&(d=this.parse8601(n));const h=this.parse8601(o),l=this.safeStringLower(e,"type"),u=this.safeFloat(e,"quantity"),p=this.safeFloat(e,"limit"),f=this.safeFloat(e,"fillQuantity"),m=this.safeFloat(e,"commission"),v=this.safeFloat(e,"proceeds");let y=void 0,g=void 0;void 0!==f&&(void 0!==v&&(f>0?y=v/f:0===v&&(y=0)),void 0!==u&&(g=u-f));let b=this.safeStringLower(e,"status");"closed"===b&&void 0!==g&&g>0&&(b="canceled");const w=this.parseTimeInForce(this.safeString(e,"timeInForce"));return{id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:d,symbol:s,type:l,timeInForce:w,side:r,price:p,stopPrice:void 0,cost:v,average:y,amount:u,filled:f,remaining:g,status:b,fee:{cost:m,currency:a},info:e,trades:void 0}}parseOrders(e,t,i,s,a={}){return this.options.fetchClosedOrdersFilterBySince?super.parseOrders(e,t,i,s,a):super.parseOrders(e,t,void 0,s,a)}parseOrderStatus(e){return this.safeString({CLOSED:"closed",OPEN:"open",CANCELLED:"canceled",CANCELED:"canceled"},e,e)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=void 0;try{const t={orderId:e};s=await this.privateGetOrdersOrderId(this.extend(t,i))}catch(e){if(this.last_json_response){if("UUID_INVALID"===this.safeString(this.last_json_response,"message"))throw new h(this.id+" fetchOrder() error: "+this.last_http_response)}throw e}return this.parseOrder(s)}orderToTrade(e){const t=this.safeInteger2(e,"lastTradeTimestamp","timestamp");return{id:this.safeString(e,"id"),side:this.safeString(e,"side"),order:this.safeString(e,"id"),type:this.safeString(e,"type"),price:this.safeFloat(e,"average"),amount:this.safeFloat(e,"filled"),cost:this.safeFloat(e,"cost"),symbol:this.safeString(e,"symbol"),timestamp:t,datetime:this.iso8601(t),fee:this.safeValue(e,"fee"),info:e,takerOrMaker:void 0}}ordersToTrades(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.orderToTrade(e[i]));return t}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={};void 0!==i&&(a.pageSize=i),void 0!==t&&(a.startDate=this.ymdhms(t,"T")+"Z");let r=void 0;void 0!==e&&(r=this.market(e),a.marketSymbol=r.base+"-"+r.quote);const o=await this.privateGetOrdersClosed(this.extend(a,s)),n=this.parseOrders(o,r),c=this.ordersToTrades(n);return this.filterBySymbolSinceLimit(c,e,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const a={};void 0!==i&&(a.pageSize=i),void 0!==t&&(a.startDate=this.ymdhms(t,"T")+"Z");let r=void 0;void 0!==e&&(r=this.market(e),a.marketSymbol=r.base+"-"+r.quote);const o=await this.privateGetOrdersClosed(this.extend(a,s));return this.parseOrders(o,r,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currencySymbol:i.id},a=await this.privateGetAddressesCurrencySymbol(this.extend(s,t));let r=this.safeString(a,"cryptoAddress");const o=this.safeString(a,"status");if(!r||"REQUESTED"===o)throw new p(this.id+" the address for "+e+" is being generated (pending, not ready yet, retry again later)");let n=void 0;return i.type in this.options.tag&&(n=r,r=i.address),this.checkAddress(r),{currency:e,address:r,tag:n,info:a}}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r={currencySymbol:this.currency(e).id,quantity:t,cryptoAddress:i};void 0!==s&&(r.cryptoAddressTag=s);const o=await this.privatePostWithdrawals(this.extend(r,a));return{info:o,id:this.safeString(o,"id")}}sign(e,t="v3",i="GET",s={},a,r){let o=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/";if("private"===t){o+=this.version+"/",this.checkRequiredCredentials(),o+=this.implodeParams(e,s),s=this.omit(s,this.extractParams(e));let t="";"POST"===i?t=r=this.json(s):Object.keys(s).length&&(o+="?"+this.rawencode(s));const n=this.hash(this.encode(t),"sha512","hex"),c=this.milliseconds().toString();let d=c+o+i+n;const h=this.safeValue(this.options,"subaccountId");void 0!==h&&(d+=h);const l=this.hmac(this.encode(d),this.encode(this.secret),"sha512");a={"Api-Key":this.apiKey,"Api-Timestamp":c,"Api-Content-Hash":n,"Api-Signature":l},void 0!==h&&(a["Api-Subaccount-Id"]=h),"POST"===i&&(a["Content-Type"]="application/json")}else"public"===t&&(o+=this.version+"/"),o+=this.implodeParams(e,s),s=this.omit(s,this.extractParams(e)),Object.keys(s).length&&(o+="?"+this.urlencode(s));return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,o,c,d,u){if(void 0!==c&&"{"===o[0]){const e=this.id+" "+o;let t=this.safeValue(c,"success");if(void 0===t){const t=this.safeString(c,"code");return void(void 0!==t&&(this.throwExactlyMatchedException(this.exceptions.exact,t,e),this.throwBroadlyMatchedException(this.exceptions.broad,t,e)))}if("string"==typeof t&&(t="true"===t),!t){const t=this.safeString(c,"message");if("APIKEY_INVALID"===t)throw this.options.hasAlreadyAuthenticatedSuccessfully?new l(e):new n(e);if("INVALID_ORDER"===t){const e="cancel";if(i.indexOf(e)>=0){const e=i.split("?");if(e.length>1){const t=e[1].split("&"),i=t.length;let s=void 0;for(let e=0;e<i;e++){const i=t[e].split("=");if("uuid"===i[0]){s=i[1];break}}throw new h(void 0!==s?this.id+" cancelOrder "+s+" "+this.json(c):this.id+" cancelOrder "+this.json(c))}}}throw this.throwExactlyMatchedException(this.exceptions.exact,t,e),void 0!==t&&this.throwBroadlyMatchedException(this.exceptions.broad,t,e),new r(e)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,BadSymbol:r,AuthenticationError:o,InsufficientFunds:n,InvalidOrder:c,ArgumentsRequired:d,OrderNotFound:h,InvalidAddress:l,BadRequest:u,RateLimitExceeded:p,PermissionDenied:f,ExchangeNotAvailable:m,AccountSuspended:v,OnMaintenance:y}=i(0),{TRUNCATE:g}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitvavo",name:"Bitvavo",countries:["NL"],rateLimit:500,version:"v2",certified:!0,pro:!0,has:{CORS:!1,publicAPI:!0,privateAPI:!0,cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderBook:!0,fetchMarkets:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/83165440-2f1cf200-a116-11ea-9046-a255d09fb2ed.jpg",api:{public:"https://api.bitvavo.com",private:"https://api.bitvavo.com"},www:"https://bitvavo.com/",doc:"https://docs.bitvavo.com/",fees:"https://bitvavo.com/en/fees",referral:"https://bitvavo.com/?a=24F34952F7"},api:{public:{get:["time","markets","assets","{market}/book","{market}/trades","{market}/candles","ticker/price","ticker/book","ticker/24h"]},private:{get:["order","orders","ordersOpen","trades","balance","deposit","depositHistory","withdrawalHistory"],post:["order","withdrawal"],put:["order"],delete:["order","orders"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0025,maker:.002,tiers:{taker:[[0,.0025],[5e4,.0024],[1e5,.0022],[25e4,.002],[5e5,.0018],[1e6,.0016],[25e5,.0014],[5e6,.0012],[1e7,.001]],maker:[[0,.002],[5e4,.0015],[1e5,.001],[25e4,6e-4],[5e5,3e-4],[1e6,1e-4],[25e5,-1e-4],[5e6,-3e-4],[1e7,-5e-4]]}}},requiredCredentials:{apiKey:!0,secret:!0},exceptions:{exact:{101:a,102:u,103:p,104:p,105:f,107:m,108:m,109:m,110:u,200:u,201:u,202:u,203:r,204:u,205:u,206:u,210:c,211:c,212:c,213:c,214:c,215:c,216:n,217:c,230:a,231:a,232:u,233:c,234:c,235:a,236:u,240:h,300:o,301:o,302:o,303:o,304:o,305:o,306:o,307:f,308:o,309:o,310:f,311:f,312:f,315:u,317:v,400:a,401:a,402:f,403:f,404:y,405:a,406:u,407:a,408:n,409:l,410:a,411:u,412:l,413:l,414:a},broad:{"start parameter is invalid":u,"symbol parameter is invalid":r,"amount parameter is invalid":c,"orderId parameter is invalid":c}},options:{"BITVAVO-ACCESS-WINDOW":1e4,fetchCurrencies:{expires:1e3}},commonCurrencies:{MIOTA:"IOTA"}})}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.safeInteger(t,"time")}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=await this.fetchCurrenciesFromCache(e),s=this.indexBy(i,"symbol"),a=[];for(let e=0;e<t.length;e++){const i=t[e],r=this.safeString(i,"market"),o=this.safeString(i,"base"),n=this.safeString(i,"quote"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=c+"/"+d,l="trading"===this.safeString(i,"status"),u=this.safeValue(s,o);let p=void 0;void 0!==u&&(p=this.safeInteger(u,"decimals",8));const f={price:this.safeInteger(i,"pricePrecision"),amount:p};a.push({id:r,symbol:h,base:c,quote:d,baseId:o,quoteId:n,info:i,active:l,precision:f,limits:{amount:{min:this.safeFloat(i,"minOrderInBaseAsset"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(i,"minOrderInQuoteAsset"),max:void 0}}})}return a}async fetchCurrenciesFromCache(e={}){const t=this.safeValue(this.options,"fetchCurrencies",{}),i=this.safeInteger(t,"timestamp"),s=this.safeInteger(t,"expires",1e3),a=this.milliseconds();if(void 0===i||a-i>s){const i=await this.publicGetAssets(e);this.options.fetchCurrencies=this.extend(t,{response:i,timestamp:a})}return this.safeValue(this.options.fetchCurrencies,"response")}async fetchCurrencies(e={}){const t=await this.fetchCurrenciesFromCache(e),i={};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"symbol"),r=this.safeCurrencyCode(a),o="OK"===this.safeValue(s,"depositStatus"),n="OK"===this.safeValue(s,"withdrawalStatus"),c=o&&n,d=this.safeString(s,"name"),h=this.safeInteger(s,"decimals",8);i[r]={id:a,info:s,code:r,name:d,active:c,fee:this.safeFloat(s,"withdrawalFee"),precision:h,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(s,"withdrawalMinAmount"),max:void 0}}}}return i}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},a=await this.publicGetTicker24h(this.extend(s,t));return this.parseTicker(a,i)}parseTicker(e,t){const i=this.safeString(e,"market"),s=this.safeSymbol(i,t,"-"),a=this.safeInteger(e,"timestamp"),r=this.safeFloat(e,"last"),o=this.safeFloat(e,"volume"),n=this.safeFloat(e,"volumeQuote"),c=this.vwap(o,n);let d=void 0,h=void 0,l=void 0;const u=this.safeFloat(e,"open");void 0!==u&&void 0!==r&&(d=r-u,u>0&&(h=d/u*100),l=this.sum(u,r)/2);return{symbol:s,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:this.safeFloat(e,"bidSize"),ask:this.safeFloat(e,"ask"),askVolume:this.safeFloat(e,"askSize"),vwap:c,open:u,close:r,last:r,previousClose:void 0,change:d,percentage:h,average:l,baseVolume:o,quoteVolume:n,info:e}}parseTickers(e,t){const i=[];for(let t=0;t<e.length;t++)i.push(this.parseTicker(e[t]));return this.filterByArray(i,"symbol",t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker24h(t);return this.parseTickers(i,e)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market:a.id};void 0!==i&&(r.limit=i),void 0!==t&&(r.start=t);const o=await this.publicGetMarketTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseTrade(e,t){const i=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount");let a=void 0;void 0!==i&&void 0!==s&&(a=i*s);const r=this.safeInteger(e,"timestamp"),o=this.safeString(e,"side"),n=this.safeString2(e,"id","fillId"),c=this.safeInteger(e,"market"),d=this.safeSymbol(c,t,"-"),h=this.safeValue(e,"taker");let l=void 0;void 0!==h&&(l=h?"taker":"maker");const u=this.safeFloat(e,"fee");let p=void 0;if(void 0!==u){const t=this.safeString(e,"feeCurrency");p={cost:u,currency:this.safeCurrencyCode(t)}}const f=this.safeString(e,"orderId");return{info:e,id:n,symbol:d,timestamp:r,datetime:this.iso8601(r),order:f,type:void 0,side:o,takerOrMaker:l,price:i,amount:s,cost:a,fee:p}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.marketId(e)};void 0!==t&&(s.depth=t);const a=await this.publicGetMarketBook(this.extend(s,i)),r=this.parseOrderBook(a);return r.nonce=this.safeInteger(a,"nonce"),r}parseOHLCV(e,t){return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={market:r.id,interval:this.timeframes[t]};void 0!==i&&(o.start=i),void 0!==s&&(o.limit=s);const n=await this.publicGetMarketCandles(this.extend(o,a));return this.parseOHLCVs(n,r,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalance(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"symbol"),r=this.safeCurrencyCode(a),o={free:this.safeFloat(s,"available"),used:this.safeFloat(s,"inOrder")};i[r]=o}return this.parseBalance(i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={symbol:this.currency(e).id},s=await this.privateGetDeposit(this.extend(i,t)),a=this.safeString(s,"address"),r=this.safeString(s,"paymentId");return this.checkAddress(a),{currency:e,address:a,tag:r,info:s}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n={market:o.id,side:i,orderType:t};if("market"===t){let t=void 0;if(t=void 0!==a?s*a:this.safeFloat2(r,"cost","amountQuote"),void 0!==t){const e=o.precision.price;n.amountQuote=this.decimalToPrecision(t,g,e,this.precisionMode)}else n.amount=this.amountToPrecision(e,s);r=this.omit(r,["cost","amountQuote"])}else"limit"===t&&(n.price=this.priceToPrecision(e,a),n.amount=this.amountToPrecision(e,s));const c=await this.privatePostOrder(this.extend(n,r));return this.parseOrder(c,o)}async editOrder(e,t,i,s,a,r,o={}){await this.loadMarkets();const n=this.market(t);let c={};const h=this.safeFloat(o,"amountRemaining");if(o=this.omit(o,"amountRemaining"),void 0!==r&&(c.price=this.priceToPrecision(t,r)),void 0!==a&&(c.amount=this.amountToPrecision(t,a)),void 0!==h&&(c.amountRemaining=this.amountToPrecision(t,h)),c=this.extend(c,o),Object.keys(c).length){c.orderId=e,c.market=n.id;const t=await this.privatePutOrder(this.extend(c,o));return this.parseOrder(t,n)}throw new d(this.id+" editOrder requires an amount argument, or a price argument, or non-empty params")}async cancelOrder(e,t,i={}){if(void 0===t)throw new d(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a={orderId:e,market:s.id},r=await this.privateDeleteOrder(this.extend(a,i));return this.parseOrder(r,s)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s=void 0;void 0!==e&&(s=this.market(e),i.market=s.id);const a=await this.privateDeleteOrders(this.extend(i,t));return this.parseOrders(a,s)}async fetchOrder(e,t,i={}){if(void 0===t)throw new d(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets(),await this.loadMarkets();const s=this.market(t),a={orderId:e,market:s.id},r=await this.privateGetOrder(this.extend(a,i));return this.parseOrder(r,s)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e),r={market:a.id};void 0!==t&&(r.start=t),void 0!==i&&(r.limit=i);const o=await this.privateGetOrders(this.extend(r,s));return this.parseOrders(o,a,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.market(e),a.market=r.id),void 0!==t&&(a.start=t),void 0!==i&&(a.limit=i);const o=await this.privateGetOrdersOpen(this.extend(a,s));return this.parseOrders(o,r,t,i)}parseOrderStatus(e){return this.safeString({new:"open",canceled:"canceled",canceledAuction:"canceled",canceledSelfTradePrevention:"canceled",canceledIOC:"canceled",canceledFOK:"canceled",canceledMarketProtection:"canceled",canceledPostOnly:"canceled",filled:"closed",partiallyFilled:"open",expired:"canceled",rejected:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"orderId"),s=this.safeInteger(e,"created"),a=this.safeString(e,"market"),r=this.safeSymbol(a,t,"-"),o=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeString(e,"side"),c=this.safeString(e,"orderType"),d=this.safeFloat(e,"price"),h=this.safeFloat(e,"amount");let l=this.safeFloat(e,"amountRemaining"),u=this.safeFloat(e,"filledAmount");const p=this.safeFloat(e,"remainingCost");void 0!==p&&0===p&&(l=0),void 0!==h&&void 0!==l&&(u=Math.max(0,h-l));const f=this.safeFloat(e,"filledAmountQuote");let m=void 0;void 0!==f&&u&&(m=f/u);let v=void 0;const y=this.safeFloat(e,"feePaid");if(void 0!==y){const t=this.safeString(e,"feeCurrency");v={cost:y,currency:this.safeCurrencyCode(t)}}let g=void 0;const b=this.safeValue(e,"fills");let w=void 0;if(void 0!==b){w=this.parseTrades(b,t,void 0,void 0,{symbol:r,order:i,side:n});const e=w.length;if(e>0){g=this.safeValue(w,e-1).timestamp}}const k=this.safeString(e,"timeInForce");return{info:e,id:i,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:g,symbol:r,type:c,timeInForce:k,side:n,price:d,stopPrice:void 0,amount:h,cost:f,average:m,filled:u,remaining:l,status:o,fee:v,trades:w}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const a=this.market(e),r={market:a.id};void 0!==t&&(r.start=t),void 0!==i&&(r.limit=i);const o=await this.privateGetTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e),o={symbol:r.id,amount:this.currencyToPrecision(e,t),address:i};void 0!==s&&(o.paymentId=s);const n=await this.privatePostWithdrawal(this.extend(o,a));return this.parseTransaction(n,r)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.symbol=r.id),void 0!==t&&(a.start=t),void 0!==i&&(a.limit=i);const o=await this.privateGetWithdrawalHistory(this.extend(a,s));return this.parseTransactions(o,r,t,i)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.symbol=r.id),void 0!==t&&(a.start=t),void 0!==i&&(a.limit=i);const o=await this.privateGetDepositHistory(this.extend(a,s));return this.parseTransactions(o,r,t,i)}parseTransactionStatus(e){return this.safeString({awaiting_processing:"pending",awaiting_email_confirmation:"pending",awaiting_bitvavo_inspection:"pending",approved:"pending",sending:"pending",in_mempool:"pending",processed:"pending",completed:"ok",canceled:"canceled"},e,e)}parseTransaction(e,t){const i=this.safeInteger(e,"timestamp"),s=this.safeString(e,"symbol"),a=this.safeCurrencyCode(s,t),r=this.parseTransactionStatus(this.safeString(e,"status")),o=this.safeFloat(e,"amount"),n=this.safeString(e,"address"),c=this.safeString(e,"txId");let d=void 0;const h=this.safeFloat(e,"fee");void 0!==h&&(d={cost:h,currency:a});let l=void 0;l="success"in e?"withdrawal":void 0===r?"deposit":"withdrawal";const u=this.safeString(e,"paymentId");return{info:e,id:void 0,txid:c,timestamp:i,datetime:this.iso8601(i),addressFrom:void 0,address:n,addressTo:n,tagFrom:void 0,tag:u,tagTo:u,type:l,amount:o,currency:a,status:r,updated:void 0,fee:d}}sign(e,t="public",i="GET",s={},a,r){const o=this.omit(s,this.extractParams(e));let n="/"+this.version+"/"+this.implodeParams(e,s);const c="GET"===i||"DELETE"===i;if(c&&Object.keys(o).length&&(n+="?"+this.urlencode(o)),"private"===t){this.checkRequiredCredentials();let e="";c||Object.keys(o).length&&(e=r=this.json(o));const t=this.milliseconds().toString(),s=t+i+n+e,d=this.hmac(this.encode(s),this.encode(this.secret)),h=this.safeString(this.options,"BITVAVO-ACCESS-WINDOW","10000");a={"BITVAVO-ACCESS-KEY":this.apiKey,"BITVAVO-ACCESS-SIGNATURE":d,"BITVAVO-ACCESS-TIMESTAMP":t,"BITVAVO-ACCESS-WINDOW":h},c||(a["Content-Type"]="application/json")}return n=this.urls.api[t]+n,{url:n,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n)return;const h=this.safeString(n,"errorCode"),l=this.safeString(n,"error");if(void 0!==h){const e=this.id+" "+o;throw this.throwBroadlyMatchedException(this.exceptions.broad,l,e),this.throwExactlyMatchedException(this.exceptions.exact,h,e),new a(e)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,ExchangeNotAvailable:o,PermissionDenied:n,InvalidOrder:c,AuthenticationError:d,InsufficientFunds:h,OrderNotFound:l,DDoSProtection:u,OnMaintenance:p,RateLimitExceeded:f}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitz",name:"Bit-Z",countries:["HK"],rateLimit:2e3,version:"v2",userAgent:this.userAgents.chrome,has:{cancelOrder:!0,cancelOrders:!0,createOrder:!0,createMarketOrder:!1,fetchBalance:!0,fetchDeposits:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","4h":"4hour","1d":"1day","5d":"5day","1w":"1week","1M":"1mon"},hostname:"apiv2.bitz.com",urls:{logo:"https://user-images.githubusercontent.com/51840849/87443304-fec5e000-c5fd-11ea-98f8-ba8e67f7eaff.jpg",api:{market:"https://{hostname}",trade:"https://{hostname}",assets:"https://{hostname}"},www:"https://www.bitz.com",doc:"https://apidoc.bitz.com/en/",fees:"https://www.bitz.com/fee?type=1",referral:"https://u.bitz.com/register?invite_code=1429193"},api:{market:{get:["ticker","depth","order","tickerall","kline","symbolList","getServerTime","currencyRate","currencyCoinRate","coinRate"]},trade:{post:["addEntrustSheet","cancelEntrustSheet","cancelAllEntrustSheet","coinOut","getUserHistoryEntrustSheet","getUserNowEntrustSheet","getEntrustSheetInfo","depositOrWithdraw"]},assets:{post:["getUserAssets"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{BTC:"0.5%",DKKT:"0.5%",ETH:.01,USDT:"0.5%",LTC:"0.5%",FCT:"0.5%",LSK:"0.5%",HXI:"0.8%",ZEC:"0.5%",DOGE:"0.5%",MZC:"0.5%",ETC:"0.5%",GXS:"0.5%",XPM:"0.5%",PPC:"0.5%",BLK:"0.5%",XAS:"0.5%",HSR:"0.5%",NULS:5,VOISE:350,PAY:1.5,EOS:.6,YBCT:35,OMG:.3,OTN:.4,BTX:"0.5%",QTUM:"0.5%",DASH:"0.5%",GAME:"0.5%",BCH:"0.5%",GNT:9,SSS:1500,ARK:"0.5%",PART:"0.5%",LEO:"0.5%",DGB:"0.5%",ZSC:130,VIU:350,BTG:"0.5%",ARN:10,VTC:"0.5%",BCD:"0.5%",TRX:200,HWC:"0.5%",UNIT:"0.5%",OXY:"0.5%",MCO:.35,SBTC:"0.5%",BCX:"0.5%",ETF:"0.5%",PYLNT:.4,XRB:"0.5%",ETP:"0.5%"}}},precision:{amount:8,price:8},options:{fetchOHLCVVolume:!0,fetchOHLCVWarning:!0,lastNonceTimestamp:0},commonCurrencies:{BOX:"BOX Token",LEO:"LeoCoin",XRB:"NANO",PXC:"Pixiecoin",VTC:"VoteCoin",TTC:"TimesChain"},exceptions:{"-102":a,"-103":d,"-104":o,"-105":d,"-106":o,"-109":d,"-110":u,"-111":n,"-112":p,"-114":f,"-117":d,"-100015":d,"-100044":a,"-100101":a,"-100201":a,"-100301":a,"-100401":a,"-100302":a,"-100303":a,"-200003":d,"-200005":n,"-200025":o,"-200027":c,"-200028":c,"-200029":c,"-200030":c,"-200031":h,"-200032":a,"-200033":a,"-200034":l,"-200035":l,"-200037":c,"-200038":a,"-200055":l,"-300069":d,"-300101":a,"-300102":c,"-300103":d,"-301001":o}})}async fetchMarkets(e={}){const t=await this.marketGetSymbolList(e),i=this.safeValue(t,"data"),s=Object.keys(i),a=[];for(let e=0;e<s.length;e++){const t=s[e],r=i[t],o=this.safeString(r,"id"),n=this.safeString(r,"coinFrom"),c=this.safeString(r,"coinTo");let d=n.toUpperCase(),h=c.toUpperCase();d=this.safeCurrencyCode(d),h=this.safeCurrencyCode(h);const l=d+"/"+h,u={amount:this.safeInteger(r,"numberFloat"),price:this.safeInteger(r,"priceFloat")};a.push({info:r,id:t,numericId:o,symbol:l,base:d,quote:h,baseId:n,quoteId:c,active:!0,precision:u,limits:{amount:{min:this.safeFloat(r,"minTrade"),max:this.safeFloat(r,"maxTrade")},price:{min:Math.pow(10,-u.price),max:void 0},cost:{min:void 0,max:void 0}}})}return a}async fetchBalance(e={}){await this.loadMarkets();const t=await this.assetsPostGetUserAssets(e),i=this.safeValue(t.data,"info"),s={info:t};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"name"),r=this.safeCurrencyCode(a),o=this.account();o.used=this.safeFloat(t,"lock"),o.total=this.safeFloat(t,"num"),o.free=this.safeFloat(t,"over"),s[r]=o}return this.parseBalance(s)}parseTicker(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t,"_"),a=this.safeFloat(e,"now"),r=this.safeFloat(e,"open");let o=void 0,n=void 0;return void 0!==a&&void 0!==r&&(o=a-r,n=this.sum(a,r)/2),{symbol:s,timestamp:void 0,datetime:this.iso8601(void 0),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bidPrice"),bidVolume:this.safeFloat(e,"bidQty"),ask:this.safeFloat(e,"askPrice"),askVolume:this.safeFloat(e,"askQty"),vwap:void 0,open:r,close:a,last:a,previousClose:void 0,change:o,percentage:this.safeFloat(e,"priceChange24h"),average:n,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}parseMicrotime(e){if(void 0===e)return e;const t=e.split(" "),i=parseFloat(t[0]),s=parseInt(t[1]),a=this.sum(s,i);return parseInt(1e3*a)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.marketGetTicker(this.extend(s,t)),r=this.parseTicker(a.data,i),o=this.parseMicrotime(this.safeString(a,"microtime"));return this.extend(r,{timestamp:o,datetime:this.iso8601(o)})}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e);i.symbols=t.join(",")}const s=await this.marketGetTickerall(this.extend(i,t)),a=this.safeValue(s,"data"),r=this.parseMicrotime(this.safeString(s,"microtime")),o={},n=Object.keys(a);for(let e=0;e<n.length;e++){const t=n[e];let i=a[t],s=void 0;t in this.markets_by_id&&(s=this.markets_by_id[t]),i=this.parseTicker(a[t],s);let c=i.symbol;if(void 0===c)if(void 0!==s)c=s.symbol;else{const[e,i]=t.split("_");c=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(i)}void 0!==c&&(o[c]=this.extend(i,{timestamp:r,datetime:this.iso8601(r)}))}return this.filterByArray(o,"symbol",e)}async fetchTime(e={}){const t=await this.marketGetGetServerTime(e);return this.safeTimestamp(t,"time")}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)},a=await this.marketGetDepth(this.extend(s,i)),r=this.safeValue(a,"data"),o=this.parseMicrotime(this.safeString(a,"microtime"));return this.parseOrderBook(r,o)}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeTimestamp(e,"T");let a=void 0;void 0!==t&&(a=t.symbol);const r=this.safeFloat(e,"p"),o=this.safeFloat(e,"n");let n=void 0;void 0!==r&&void 0!==o&&(n=this.priceToPrecision(a,o*r));const c=this.safeString(e,"s");return{timestamp:s,datetime:this.iso8601(s),symbol:a,id:i,order:void 0,type:"limit",side:c,takerOrMaker:void 0,price:r,amount:o,cost:n,fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id},o=await this.marketGetOrder(this.extend(r,s));return this.parseTrades(o.data,a,t,i)}parseOHLCV(e,t){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const o=1e3*this.parseTimeframe(t),n=this.market(e),c={symbol:n.id,resolution:this.timeframes[t]};if(void 0!==s)c.size=Math.min(s,300),void 0!==i&&(c.to=this.sum(i,s*o*1e3));else if(void 0!==i)throw new r(this.id+" fetchOHLCV requires a limit argument if the since argument is specified");const d=await this.marketGetKline(this.extend(c,a)),h=this.safeValue(d,"data",{}),l=this.safeValue(h,"bars",[]);return this.parseOHLCVs(l,n,t,i,s)}parseOrderStatus(e){return this.safeString({0:"open",1:"open",2:"closed",3:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id");let s=void 0;if(void 0===t){const i=this.safeString(e,"coinFrom"),a=this.safeString(e,"coinTo");if(void 0!==i&&void 0!==a){const e=i+"_"+a;if(e in this.markets_by_id)t=this.safeValue(this.markets_by_id,e);else{s=this.safeCurrencyCode(i)+"/"+this.safeCurrencyCode(a)}}}void 0!==t&&(s=t.symbol);let a=this.safeString(e,"flag");void 0!==a&&(a="sale"===a?"sell":"buy");const r=this.safeFloat(e,"price"),o=this.safeFloat(e,"number"),n=this.safeFloat(e,"numberOver"),c=this.safeFloat(e,"numberDeal");let d=this.safeInteger(e,"timestamp");void 0===d&&(d=this.safeTimestamp(e,"created"));let h=this.safeFloat(e,"orderTotalPrice");void 0!==r&&void 0!==c&&(h=c*r);const l=this.parseOrderStatus(this.safeString(e,"status"));return{id:i,clientOrderId:void 0,datetime:this.iso8601(d),timestamp:d,lastTradeTimestamp:void 0,status:l,symbol:s,type:"limit",timeInForce:void 0,side:a,price:r,stopPrice:void 0,cost:h,amount:o,filled:c,remaining:n,trades:void 0,fee:void 0,info:e,average:void 0}}async createOrder(e,t,i,s,r,o={}){if(await this.loadMarkets(),"limit"!==t)throw new a(this.id+" createOrder allows limit orders only");const n=this.market(e),c="buy"===i?"1":"2";if(!this.password)throw new a(this.id+' createOrder() requires you to set exchange.password = "YOUR_TRADING_PASSWORD" (a trade password is NOT THE SAME as your login password)');const d={symbol:n.id,type:c,price:this.priceToPrecision(e,r),number:this.amountToPrecision(e,s),tradePwd:this.password},h=await this.tradePostAddEntrustSheet(this.extend(d,o)),l=this.parseMicrotime(this.safeString(h,"microtime")),u=this.extend({timestamp:l},h.data);return this.parseOrder(u,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={entrustSheetId:e};return await this.tradePostCancelEntrustSheet(this.extend(s,i))}async cancelOrders(e,t,i={}){await this.loadMarkets();const s={ids:e.join(",")};return await this.tradePostCancelEntrustSheet(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={entrustSheetId:e},a=await this.tradePostGetEntrustSheetInfo(this.extend(s,i));return this.parseOrder(a.data)}async fetchOrdersWithMethod(e,t,i,s,a={}){if(void 0===t)throw new r(this.id+" fetchOpenOrders requires a symbol argument");await this.loadMarkets();const o=this.market(t),n={coinFrom:o.baseId,coinTo:o.quoteId};void 0!==s&&(n.page=1,n.pageSize=s),void 0!==i&&(n.startTime=parseInt(i/1e3));const c=await this[e](this.extend(n,a)),d=this.safeValue(c.data,"data",[]);return this.parseOrders(d,void 0,i,s)}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("tradePostGetUserHistoryEntrustSheet",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("tradePostGetUserNowEntrustSheet",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("tradePostGetUserHistoryEntrustSheet",e,t,i,s)}parseTransactionStatus(e){return this.safeString({1:"pending",2:"pending",3:"pending",4:"ok",5:"canceled"},e,e)}parseTransaction(e,t){let i=this.safeInteger(e,"updated");0===i&&(i=void 0);const s=this.safeString(e,"coin"),a=this.safeCurrencyCode(s,t),r=this.safeStringLower(e,"type"),o=this.parseTransactionStatus(this.safeString(e,"status"));let n=void 0;const c=this.safeFloat(e,"network_fee");return void 0!==c&&(n={cost:c,code:a}),{id:this.safeString(e,"id"),txid:this.safeString(e,"txid"),timestamp:i,datetime:this.iso8601(i),address:this.safeString(e,"wallet"),tag:this.safeString(e,"memo"),type:r,amount:this.safeFloat(e,"number"),currency:a,status:o,updated:i,fee:n,info:e}}parseTransactionsByType(e,t,i,s,a){const r=[];for(let i=0;i<t.length;i++){const s=this.parseTransaction(this.extend({type:e},t[i]));r.push(s)}return this.filterByCurrencySinceLimit(r,i,s,a)}parseTransactionType(e){return this.safeInteger({deposit:1,withdrawal:2},e,e)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsForType("deposit",e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsForType("withdrawal",e,t,i,s)}async fetchTransactionsForType(e,t,i,s,a={}){if(void 0===t)throw new r(this.id+" fetchTransactions() requires a currency `code` argument");await this.loadMarkets();const o={coin:this.currency(t).id,type:this.parseTransactionType(e)};void 0!==i&&(o.startTime=parseInt(i/1e3).toString()),void 0!==s&&(o.page=1,o.pageSize=s);const n=await this.tradePostDepositOrWithdraw(this.extend(o,a)),c=this.safeValue(n.data,"data",[]);return this.parseTransactionsByType(e,c,t,i,s)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e),o={coin:r.id,number:this.currencyToPrecision(e,t),address:i};void 0!==s&&(o.memo=s);const n=await this.tradePostCoinOut(this.extend(o,a)),c=this.safeValue(n,"data",{});return this.parseTransaction(c,r)}nonce(){const e=this.seconds();return e>this.options.lastNonceTimestamp&&(this.options.lastNonceTimestamp=e,this.options.lastNonce=1e5),this.options.lastNonce=this.sum(this.options.lastNonce,1),this.options.lastNonce}sign(e,t="market",i="GET",s={},a,r){let o=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/"+this.capitalize(t)+"/"+e,n=void 0;return"market"===t?(n=this.urlencode(s),n.length&&(o+="?"+n)):(this.checkRequiredCredentials(),r=this.rawencode(this.keysort(this.extend({apiKey:this.apiKey,timeStamp:this.seconds(),nonce:this.nonce()},s))),r+="&sign="+this.hash(this.encode(r+this.secret)),a={"Content-type":"application/x-www-form-urlencoded"}),{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n)return;const h=this.safeString(n,"status");if(void 0!==h){const e=this.id+" "+o;if("200"===h){const t=this.safeInteger(n,"data");if(void 0!==t)throw this.throwExactlyMatchedException(this.exceptions,t,e),new a(e);return}throw this.throwExactlyMatchedException(this.exceptions,h,e),new a(e)}}}},function(e,t,i){"use strict";const s=i(1);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bl3p",name:"BL3P",countries:["NL","EU"],rateLimit:1e3,version:"1",comment:"An exchange market by BitonicNL",has:{CORS:!1,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28501752-60c21b82-6feb-11e7-818b-055ee6d0e754.jpg",api:"https://api.bl3p.eu",www:"https://bl3p.eu",doc:["https://github.com/BitonicNL/bl3p-api/tree/master/docs","https://bl3p.eu/api","https://bitonic.nl/en/api"]},api:{public:{get:["{market}/ticker","{market}/orderbook","{market}/trades"]},private:{post:["{market}/money/depth/full","{market}/money/order/add","{market}/money/order/cancel","{market}/money/order/result","{market}/money/orders","{market}/money/orders/history","{market}/money/trades/fetch","GENMKT/money/info","GENMKT/money/deposit_address","GENMKT/money/new_deposit_address","GENMKT/money/wallet/history","GENMKT/money/withdraw"]}},markets:{"BTC/EUR":{id:"BTCEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"BTC",quoteId:"EUR",maker:.0025,taker:.0025},"LTC/EUR":{id:"LTCEUR",symbol:"LTC/EUR",base:"LTC",quote:"EUR",baseId:"LTC",quoteId:"EUR",maker:.0025,taker:.0025}}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGENMKTMoneyInfo(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"wallets"),a={info:i},r=Object.keys(this.currencies);for(let e=0;e<r.length;e++){const t=r[e],i=this.currency(t).id,o=this.safeValue(s,i,{}),n=this.safeValue(o,"available",{}),c=this.safeValue(o,"balance",{}),d=this.account();d.free=this.safeFloat(n,"value"),d.total=this.safeFloat(c,"value"),a[t]=d}return this.parseBalance(a)}parseBidAsk(e,t=0,i=1){return[e[t]/1e5,e[i]/1e8]}async fetchOrderBook(e,t,i={}){const s={market:this.market(e).id},a=await this.publicGetMarketOrderbook(this.extend(s,i)),r=this.safeValue(a,"data");return this.parseOrderBook(r,void 0,"bids","asks","price_int","amount_int")}async fetchTicker(e,t={}){const i={market:this.marketId(e)},s=await this.publicGetMarketTicker(this.extend(i,t)),a=this.safeTimestamp(s,"timestamp"),r=this.safeFloat(s,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s.volume,"24h"),quoteVolume:void 0,info:s}}parseTrade(e,t){const i=this.safeString(e,"trade_id"),s=this.safeInteger(e,"date");let a=this.safeFloat(e,"price_int");void 0!==a&&(a/=1e5);let r=this.safeFloat(e,"amount_int");void 0!==r&&(r/=1e8);let o=void 0;void 0!==a&&void 0!==r&&(o=r*a);let n=void 0;return void 0!==t&&(n=t.symbol),{id:i,info:e,timestamp:s,datetime:this.iso8601(s),symbol:n,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:a,amount:r,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){const a=this.market(e),r=await this.publicGetMarketTrades(this.extend({market:a.id},s));return this.parseTrades(r.data.trades,a,t,i)}async createOrder(e,t,i,s,a,r={}){const o=this.market(e),n={market:o.id,amount_int:parseInt(1e8*s),fee_currency:o.quote,type:"buy"===i?"bid":"ask"};"limit"===t&&(n.price_int=parseInt(1e5*a));const c=await this.privatePostMarketMoneyOrderAdd(this.extend(n,r));return{info:c,id:this.safeString(c.data,"order_id")}}async cancelOrder(e,t,i={}){const s={order_id:e};return await this.privatePostMarketMoneyOrderCancel(this.extend(s,i))}sign(e,t="public",i="GET",s={},a,r){const o=this.implodeParams(e,s);let n=this.urls.api+"/"+this.version+"/"+o;const c=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(c).length&&(n+="?"+this.urlencode(c));else{this.checkRequiredCredentials();const e=this.nonce();r=this.urlencode(this.extend({nonce:e},c));const t=this.base64ToBinary(this.secret),i=o+"\0"+r,s=this.hmac(this.encode(i),t,"sha512","base64");a={"Content-Type":"application/x-www-form-urlencoded","Rest-Key":this.apiKey,"Rest-Sign":s}}return{url:n,method:i,body:r,headers:a}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,InvalidOrder:r,AuthenticationError:o,InsufficientFunds:n,BadRequest:c}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bleutrade",name:"Bleutrade",countries:["BR"],rateLimit:1e3,certified:!1,has:{cancelOrder:!0,CORS:!0,createLimitOrder:!1,createMarketOrder:!1,createOrder:!0,editOrder:!1,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchOrders:!1,fetchOrderTrades:!1,fetchTicker:!0,fetchTickers:!0,fetchTrades:!1,fetchWithdrawals:!0,withdraw:!1},timeframes:{"1h":"1h","4h":"4h","8h":"8h","1d":"1d","1w":"1w"},hostname:"bleutrade.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/30303000-b602dbe6-976d-11e7-956d-36c5049c01e7.jpg",api:{v3Private:"https://{hostname}/api/v3/private",v3Public:"https://{hostname}/api/v3/public"},www:"https://bleutrade.com",doc:["https://app.swaggerhub.com/apis-docs/bleu/white-label/3.0.0"],fees:"https://bleutrade.com/fees/"},api:{v3Public:{get:["getassets","getmarkets","getticker","getmarketsummary","getmarketsummaries","getorderbook","getmarkethistory","getcandles"]},v3Private:{get:["statement"],post:["getbalance","getbalances","buylimit","selllimit","buylimitami","selllimitami","buystoplimit","sellstoplimit","ordercancel","getopenorders","getcloseorders","getdeposithistory","getdepositaddress","getmytransactions","withdraw","directtransfer","getwithdrawhistory","getlimits"]}},commonCurrencies:{EPC:"Epacoin"},exceptions:{exact:{ERR_INSUFICIENT_BALANCE:n,ERR_LOW_VOLUME:c,"Invalid form":c},broad:{"Order is not open":r,"Invalid Account / Api KEY / Api Secret":o}},fees:{trading:{tierBased:!1,percentage:!0,taker:.0025,maker:.0025}},options:{parseOrderStatus:!0}})}async fetchCurrencies(e={}){const t=(await this.v3PublicGetGetassets(e)).result,i={};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"Asset"),r=this.safeCurrencyCode(a);i[r]={id:a,code:r,name:this.safeString(s,"AssetLong"),active:this.safeValue(s,"IsActive")&&!this.safeValue(s,"MaintenanceMode"),fee:this.safeFloat(s,"WithdrawTxFee"),precision:this.safeFloat(s,"DecimalPlaces"),info:s,limits:this.limits}}return i}async fetchMarkets(e={}){const t=await this.v3PublicGetGetmarkets(e),i=[],s=this.safeValue(t,"result");for(let e=0;e<s.length;e++){const t=s[e],a=this.safeString(t,"MarketName"),r=this.safeString(t,"MarketAsset"),o=this.safeString(t,"BaseAsset"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o),d=n+"/"+c,h={amount:8,price:8},l=this.safeValue(t,"IsActive",!1);i.push({id:a,symbol:d,base:n,quote:c,baseId:r,quoteId:o,active:l,info:t,precision:h,maker:this.fees.trading.maker,taker:this.fees.trading.taker,limits:{amount:{min:this.safeFloat(t,"MinTradeSize"),max:void 0},price:{min:Math.pow(10,-h.price),max:void 0}}})}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.marketId(e),type:"ALL"};void 0!==t&&(s.depth=t);const r=await this.v3PublicGetGetorderbook(this.extend(s,i)),o=this.safeValue(r,"result");if(!o)throw new a(this.id+" no orderbook data in "+this.json(r));return this.parseOrderBook(o,void 0,"buy","sell","Rate","Quantity")}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},a=await this.v3PublicGetGetmarketsummary(this.extend(s,t)),r=this.safeValue(a,"result",{});return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.v3PublicGetGetmarketsummaries(t),s=this.safeValue(i,"result"),a=[];for(let e=0;e<s.length;e++){const t=this.parseTicker(s[e]);a.push(t)}return this.filterByArray(a,"symbol",e)}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"TimeStamp")),s=this.safeString(e,"MarketName"),a=this.safeSymbol(s,t,"_"),r=this.safeFloat(e,"PrevDay"),o=this.safeFloat(e,"Last");let n=void 0,c=void 0;return void 0!==o&&void 0!==r&&(n=o-r,r>0&&(c=n/r*100)),{symbol:a,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"High"),low:this.safeFloat(e,"Low"),bid:this.safeFloat(e,"Bid"),bidVolume:void 0,ask:this.safeFloat(e,"Ask"),askVolume:void 0,vwap:void 0,open:r,close:o,last:o,previousClose:void 0,change:n,percentage:c,average:void 0,baseVolume:this.safeFloat(e,"Volume"),quoteVolume:this.safeFloat(e,"BaseVolume"),info:e}}parseOHLCV(e,t){return[this.parse8601(e.TimeStamp+"+00:00"),this.safeFloat(e,"Open"),this.safeFloat(e,"High"),this.safeFloat(e,"Low"),this.safeFloat(e,"Close"),this.safeFloat(e,"Volume")]}async fetchOHLCV(e,t="15m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={period:this.timeframes[t],market:r.id,count:s},n=await this.v3PublicGetGetcandles(this.extend(o,a)),c=this.safeValue(n,"result",[]);return this.parseOHLCVs(c,r,t,i,s)}async createOrder(e,t,i,s,a,o={}){if("limit"!==t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();const n={rate:this.priceToPrecision(e,a),quantity:this.amountToPrecision(e,s),tradeType:"buy"===i?"1":"0",market:this.marketId(e)};let c=void 0;return c="buy"===i?await this.v3PrivatePostBuylimit(this.extend(n,o)):await this.v3PrivatePostSelllimit(this.extend(n,o)),{info:c,id:this.safeString(c,"result")}}async cancelOrder(e,t,i={}){const s={orderid:e};return await this.v3PrivatePostOrdercancel(this.extend(s,i))}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.market(e),r.market=a.id);const o=await this.v3PrivatePostGetopenorders(this.extend(r,s)),n=this.safeValue(o,"result",[]);return this.parseOrders(n,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.v3PrivatePostGetbalances(e),i={info:t},s=t.result;for(let e=0;e<s.length;e++){const t=s[e],a=this.safeString(t,"Asset"),r=this.safeCurrencyCode(a),o=this.account();o.free=this.safeFloat(t,"Available"),o.total=this.safeFloat(t,"Balance"),i[r]=o}return this.parseBalance(i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.market(e),a.market=r.id);const o=await this.v3PrivatePostGetcloseorders(this.extend(a,s)),n=this.safeValue(o,"result",[]);return this.parseOrders(n,r,t,i)}async fetchTransactionsWithMethod(e,t,i,s,a={}){await this.loadMarkets();const r=await this[e](a),o=this.safeValue(r,"result",[]);return this.parseTransactions(o,t,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsWithMethod("v3PrivatePostGetdeposithistory",e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsWithMethod("v3PrivatePostGetwithdrawhistory",e,t,i,s)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={asset:this.currency(e).id},s=(await this.v3PrivatePostGetdepositaddress(this.extend(i,t))).result,a=this.safeString(s,"DepositAddress");return{currency:e,address:this.checkAddress(a),info:s}}parseLedgerEntryType(e){return this.safeString({TRADE:"trade",WITHDRAW:"transaction"},e,e)}parseLedgerEntry(e,t){const i=this.safeCurrencyCode(this.safeString(e,"CoinSymbol"),t),s=this.safeString(e,"Description"),a=this.parseLedgerEntryType(this.safeString(e,"Type"));let r=void 0,o=void 0;const n="trade"===a?", ":"; ",c=s.split(n);for(let e=0;e<c.length;e++){let t=c[e];if(0===t.indexOf("fee")){t=t.replace("fee ","");let e=parseFloat(t);e<0&&(e=-e),o={cost:e,currency:i}}else 0===t.indexOf("order id")&&(r=t.replace("order id ",""))}const d=this.parse8601(this.safeString(e,"TimeStamp"));let h=this.safeFloat(e,"Amount"),l=void 0;void 0!==h&&(l="in",h<0&&(l="out",h=-h));return{id:this.safeString(e,"ID"),info:e,timestamp:d,datetime:this.iso8601(d),direction:l,account:void 0,referenceId:r,referenceAccount:void 0,type:a,currency:i,amount:h,before:void 0,after:void 0,status:"ok",fee:o}}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const a=(await this.v3PrivatePostGetmytransactions(this.extend({},s))).result;return this.parseLedger(a,e,t,i)}parseOrder(e,t){const i=this.safeString(e,"Type").toLowerCase(),s=this.parseOrderStatus(this.safeString(e,"Status")),a=this.safeString(e,"Exchange"),r=this.safeSymbol(a,t,"_");let o=void 0;"Created"in e&&(o=this.parse8601(e.Created+"+00:00"));let n=this.safeFloat(e,"Price"),c=void 0;const d=this.safeFloat(e,"Quantity"),h=this.safeFloat(e,"QuantityRemaining");let l=void 0;void 0!==d&&void 0!==h&&(l=d-h),c||n&&l&&(c=n*l),n||c&&l&&(n=c/l);const u=this.safeFloat(e,"PricePerUnit");return{info:e,id:this.safeString(e,"OrderID"),clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:void 0,symbol:r,type:"limit",timeInForce:void 0,side:i,price:n,stopPrice:void 0,cost:c,average:u,amount:d,filled:l,remaining:h,status:s,fee:void 0,trades:void 0}}parseOrderStatus(e){return this.safeString({OK:"closed",OPEN:"open",CANCELED:"canceled"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"ID");let s=this.safeFloat(e,"Amount"),a="deposit";s<0&&(s=Math.abs(s),a="withdrawal");const r=this.safeString(e,"Asset"),o=this.safeCurrencyCode(r,t),n=this.safeString(e,"Label"),c=this.parse8601(this.safeString(e,"Timestamp"));let d=this.safeString(e,"TransactionID"),h=void 0,l=void 0;const u=n.split(";");3===u.length?(s=parseFloat(u[0]),h=u[1],l=parseFloat(u[2])):h=n;let p=void 0;void 0!==l&&(p={currency:o,cost:l});let f="ok";return"CANCELED"===d&&(d=void 0,f="canceled"),{info:e,timestamp:c,datetime:this.iso8601(c),id:i,currency:o,amount:s,address:h,tag:void 0,status:f,type:a,updated:void 0,txid:d,fee:p}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/";if("v3Private"===t){this.checkRequiredCredentials();const t={apikey:this.apiKey,nonce:this.nonce()};o+=e+"?"+this.urlencode(this.extend(t,s));a={apisign:this.hmac(this.encode(o),this.encode(this.secret),"sha512")}}else o+=e+"?"+this.urlencode(s);return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n)return;const h=this.safeValue(n,"success");if(void 0===h)throw new a(this.id+": malformed response: "+this.json(n));if(!h){const e=this.id+" "+o,t=this.safeString(n,"result");void 0!==t&&(this.throwBroadlyMatchedException(this.exceptions.broad,t,e),this.throwExactlyMatchedException(this.exceptions.exact,t,e));const i=this.safeString(n,"message");throw this.throwBroadlyMatchedException(this.exceptions.broad,i,e),this.throwExactlyMatchedException(this.exceptions.exact,i,e),new a(e)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,InvalidOrder:r,AuthenticationError:o,ArgumentsRequired:n}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"braziliex",name:"Braziliex",countries:["BR"],rateLimit:1e3,has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/34703593-c4498674-f504-11e7-8d14-ff8e44fb78c1.jpg",api:"https://braziliex.com/api/v1",www:"https://braziliex.com/",doc:"https://braziliex.com/exchange/api.php",fees:"https://braziliex.com/exchange/fees.php",referral:"https://braziliex.com/?ref=5FE61AB6F6D67DA885BC98BA27223465"},api:{public:{get:["currencies","ticker","ticker/{market}","orderbook/{market}","tradehistory/{market}"]},private:{post:["balance","complete_balance","open_orders","trade_history","deposit_address","sell","buy","cancel_order","order_status"]}},commonCurrencies:{EPC:"Epacoin",ABC:"Anti Bureaucracy Coin"},fees:{trading:{maker:.005,taker:.005}},precision:{amount:8,price:8},options:{fetchCurrencies:{expires:1e3}}})}async fetchCurrenciesFromCache(e={}){const t=this.safeValue(this.options,"fetchCurrencies",{}),i=this.safeInteger(t,"timestamp"),s=this.safeInteger(t,"expires",1e3),a=this.milliseconds();if(void 0===i||a-i>s){const i=await this.publicGetCurrencies(e);this.options.fetchCurrencies=this.extend(t,{response:i,timestamp:a})}return this.safeValue(this.options.fetchCurrencies,"response")}async fetchCurrencies(e={}){const t=await this.fetchCurrenciesFromCache(e);this.options.currencies={timestamp:this.milliseconds(),response:t};const i=Object.keys(t),s={};for(let e=0;e<i.length;e++){const a=i[e],r=t[a],o=this.safeInteger(r,"decimal"),n=this.safeCurrencyCode(a);let c=1===this.safeInteger(r,"active");0!==this.safeInteger(r,"under_maintenance")&&(c=!1);const d=1===this.safeInteger(r,"is_withdrawal_active"),h=1===this.safeInteger(r,"is_deposit_active");d&&h||(c=!1),s[n]={id:a,code:n,name:r.name,active:c,precision:o,funding:{withdraw:{active:d,fee:this.safeFloat(r,"txWithdrawalFee")},deposit:{active:h,fee:this.safeFloat(r,"txDepositFee")}},limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(r,"MinWithdrawal"),max:Math.pow(10,o)},deposit:{min:this.safeFloat(r,"minDeposit"),max:void 0}},info:r}}return s}async fetchMarkets(e={}){const t=await this.fetchCurrenciesFromCache(e),i=await this.publicGetTicker(),s=Object.keys(i),a=[];for(let e=0;e<s.length;e++){const r=s[e],o=i[r],[n,c]=r.split("_"),d=n.toUpperCase(),h=c.toUpperCase(),l=this.safeCurrencyCode(d),u=this.safeCurrencyCode(h),p=l+"/"+u,f=this.safeValue(t,n,{}),m=this.safeValue(t,c,{});let v=void 0;v=this.safeInteger(m,"is_fiat",0)?this.safeFloat(f,"minAmountTradeFIAT"):this.safeFloat(f,"minAmountTrade"+h);const y=1===this.safeInteger(o,"active"),g={amount:8,price:8};a.push({id:r,symbol:p,base:l,quote:u,baseId:n,quoteId:c,active:y,precision:g,limits:{amount:{min:Math.pow(10,-g.amount),max:Math.pow(10,g.amount)},price:{min:Math.pow(10,-g.price),max:Math.pow(10,g.price)},cost:{min:v,max:void 0}},info:o})}return a}parseTicker(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.milliseconds(),a=this.safeFloat(e,"last");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"highestBid24"),low:this.safeFloat(e,"lowestAsk24"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:this.safeFloat(e,"percentChange"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"baseVolume24"),quoteVolume:this.safeFloat(e,"quoteVolume24"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},a=await this.publicGetTickerMarket(this.extend(s,t));return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s={},a=Object.keys(i);for(let e=0;e<a.length;e++){const t=a[e],r=this.safeMarket(t);s[r.symbol]=this.parseTicker(i[t],r)}return this.filterByArray(s,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.marketId(e)},a=await this.publicGetOrderbookMarket(this.extend(s,i));return this.parseOrderBook(a,void 0,"bids","asks","price","amount")}parseTrade(e,t){const i=this.parse8601(this.safeString2(e,"date_exec","date")),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount");let r=void 0;void 0!==t&&(r=t.symbol);const o=this.safeFloat(e,"total"),n=this.safeString(e,"order_number"),c=this.safeString(e,"type");return{id:this.safeString(e,"_id"),info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,order:n,type:"limit",side:c,takerOrMaker:void 0,price:s,amount:a,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market:a.id},o=await this.publicGetTradehistoryMarket(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostCompleteBalance(e),i={info:t},s=Object.keys(t);for(let e=0;e<s.length;e++){const a=s[e],r=t[a],o=this.safeCurrencyCode(a),n=this.account();n.free=this.safeFloat(r,"available"),n.total=this.safeFloat(r,"total"),i[o]=n}return this.parseBalance(i)}parseOrder(e,t){const i=this.safeString(e,"market"),s=this.safeSymbol(i,t,"_");let a=this.safeInteger(e,"timestamp");void 0===a&&(a=this.parse8601(this.safeString(e,"date")));const r=this.safeFloat(e,"price"),o=this.safeFloat(e,"total",0),n=this.safeFloat(e,"amount"),c=this.safeFloat(e,"progress"),d=n*c,h=parseFloat(this.amountToPrecision(s,n-d));let l=e;"info"in l&&(l=e.info);const u=this.safeString(e,"order_number"),p=this.safeValue(e,"fee"),f=1===c?"closed":"open",m=this.safeString(e,"type");return{id:u,clientOrderId:void 0,datetime:this.iso8601(a),timestamp:a,lastTradeTimestamp:void 0,status:f,symbol:s,type:"limit",timeInForce:void 0,side:m,price:r,stopPrice:void 0,cost:o,amount:n,filled:d,remaining:h,trades:void 0,fee:p,info:l,average:void 0}}async createOrder(e,t,i,s,a,o={}){await this.loadMarkets();const n=this.market(e),c="privatePost"+this.capitalize(i),d={market:n.id,price:a,amount:s},h=await this[c](this.extend(d,o));if(1!==this.safeInteger(h,"success"))throw new r(this.id+" "+this.json(h));let l=this.safeString(h,"message").split(" / ");l=l.slice(1);const u=l[5].split(" "),p=l[2].split(" "),f=l[3].split(" "),m=l[4].split(" ");return this.parseOrder({timestamp:this.milliseconds(),order_number:h.order_number,type:this.safeStringLower(l,0),market:l[0].toLowerCase(),amount:this.safeString(p,1),price:this.safeString(f,1),total:this.safeString(m,1),fee:{cost:this.safeFloat(u,1),currency:this.safeString(u,2)},progress:"0.0",info:h},n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_number:e,market:this.market(t).id};return await this.privatePostCancelOrder(this.extend(s,i))}async fetchOrder(e,t,i={}){if(void 0===t)throw new n(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),a={order_number:e,market:s.id},r=await this.privatePostOrderStatus(this.extend(a,i));return this.parseOrder(r,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market:a.id},o=await this.privatePostOpenOrders(this.extend(r,s)),n=this.safeValue(o,"order_open",[]);return this.parseOrders(n,a,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market:a.id},o=await this.privatePostTradeHistory(this.extend(r,s)),n=this.safeValue(o,"trade_history",[]);return this.parseTrades(n,a,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privatePostDepositAddress(this.extend(i,t)),a=this.safeString(s,"deposit_address");this.checkAddress(a);return{currency:e,address:a,tag:this.safeString(s,"payment_id"),info:s}}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+t,n=this.omit(s,this.extractParams(e));if("public"===t)o+="/"+this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),n=this.extend({command:e,nonce:this.nonce()},n),r=this.urlencode(n);const t=this.hmac(this.encode(r),this.encode(this.secret),"sha512");a={"Content-type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:t}}return{url:o,method:i,body:r,headers:a}}async request(e,t="public",i="GET",s={},r,n){const c=await this.fetch2(e,t,i,s,r,n);if("string"==typeof c&&c.length<1)throw new a(this.id+" returned empty response");if("success"in c){if(0===this.safeInteger(c,"success")){const e=this.safeString(c,"message");if("Invalid APIKey"===e)throw new o(e);throw new a(e)}}return c}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,AuthenticationError:r,DDoSProtection:o,InvalidOrder:n,InsufficientFunds:c}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcalpha",name:"BTC-Alpha",countries:["US"],version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!1,fetchTrades:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","1d":"D"},urls:{logo:"https://user-images.githubusercontent.com/1294454/42625213-dabaa5da-85cf-11e8-8f99-aa8f8f7699f0.jpg",api:"https://btc-alpha.com/api",www:"https://btc-alpha.com",doc:"https://btc-alpha.github.io/api-docs",fees:"https://btc-alpha.com/fees/",referral:"https://btc-alpha.com/?r=123788"},api:{public:{get:["currencies/","pairs/","orderbook/{pair_name}/","exchanges/","charts/{pair}/{type}/chart/"]},private:{get:["wallets/","orders/own/","order/{id}/","exchanges/own/","deposits/","withdraws/"],post:["order/","order-cancel/"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{BTC:.00135,LTC:.0035,XMR:.018,ZEC:.002,ETH:.01,ETC:.01,SIB:1.5,CCRB:4,PZM:.05,ITI:.05,DCY:5,R:5,ATB:.05,BRIA:.05,KZC:.05,HWC:1,SPA:1,SMS:.001,REC:.01,SUP:1,BQ:100,GDS:.1,EVN:300,TRKC:.01,UNI:1,STN:1,BCH:void 0,QBIC:.5}}},commonCurrencies:{CBC:"Cashbery"},exceptions:{exact:{},broad:{"Out of balance":c}}})}async fetchMarkets(e={}){const t=await this.publicGetPairs(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"name"),r=this.safeString(s,"currency1"),o=this.safeString(s,"currency2"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o),d=n+"/"+c,h={amount:8,price:this.safeInteger(s,"price_precision")};i.push({id:a,symbol:d,base:n,quote:c,active:!0,precision:h,limits:{amount:{min:this.safeFloat(s,"minimum_order_size"),max:this.safeFloat(s,"maximum_order_size")},price:{min:Math.pow(10,-h.price),max:Math.pow(10,h.price)},cost:{min:void 0,max:void 0}},info:s,baseId:void 0,quoteId:void 0})}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair_name:this.marketId(e)};t&&(s.limit_sell=t,s.limit_buy=t);const a=await this.publicGetOrderbookPairName(this.extend(s,i));return this.parseOrderBook(a,void 0,"buy","sell","price","amount")}parseBidsAsks(e,t=0,i=1){const s=[];for(let a=0;a<e.length;a++){const r=e[a];r&&s.push(this.parseBidAsk(r,t,i))}return s}parseTrade(e,t){let i=void 0;void 0===t&&(t=this.safeValue(this.marketsById,e.pair)),void 0!==t&&(i=t.symbol);const s=this.safeTimestamp(e,"timestamp"),a=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount");let o=void 0;void 0!==a&&void 0!==r&&(o=parseFloat(this.costToPrecision(i,a*r)));const n=this.safeString2(e,"id","tid"),c=this.safeString2(e,"my_side","side"),d=this.safeString(e,"o_id");return{id:n,info:e,timestamp:s,datetime:this.iso8601(s),symbol:i,order:d,type:"limit",side:c,takerOrMaker:void 0,price:a,amount:r,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.market(e),r.pair=a.id),void 0!==i&&(r.limit=i);const o=await this.publicGetExchanges(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="5m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={pair:r.id,type:this.timeframes[t]};void 0!==s&&(o.limit=s),void 0!==i&&(o.since=parseInt(i/1e3));const n=await this.publicGetChartsPairTypeChart(this.extend(o,a));return this.parseOHLCVs(n,r,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetWallets(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"currency"),r=this.safeCurrencyCode(a),o=this.account();o.used=this.safeFloat(s,"reserve"),o.total=this.safeFloat(s,"balance"),i[r]=o}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({1:"open",2:"canceled",3:"closed"},e,e)}parseOrder(e,t){let i=void 0;void 0===t&&(t=this.safeValue(this.marketsById,e.pair)),void 0!==t&&(i=t.symbol);const s=this.safeTimestamp(e,"date"),a=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount"),o=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeString2(e,"oid","id");let c=this.safeValue(e,"trades",[]);c=this.parseTrades(c,t);const d=this.safeString2(e,"my_side","type");let h=void 0;const l=c.length;if(l>0){h=0;for(let e=0;e<l;e++)h=this.sum(h,c[e].amount)}let u=void 0;return void 0!==r&&r>0&&void 0!==h&&(u=Math.max(0,r-h)),{id:n,clientOrderId:void 0,datetime:this.iso8601(s),timestamp:s,status:o,symbol:i,type:"limit",timeInForce:void 0,side:d,price:a,stopPrice:void 0,cost:void 0,amount:r,filled:h,remaining:u,trades:c,fee:void 0,info:e,lastTradeTimestamp:void 0,average:void 0}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),c={pair:o.id,type:i,amount:s,price:this.priceToPrecision(e,a)},d=await this.privatePostOrder(this.extend(c,r));if(!d.success)throw new n(this.id+" "+this.json(d));const h=this.parseOrder(d,o);return s=h.amount>0?h.amount:s,this.extend(h,{amount:s})}async cancelOrder(e,t,i={}){const s={order:e};return await this.privatePostOrderCancel(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privateGetOrderId(this.extend(s,i));return this.parseOrder(a)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.market(e),a.pair=r.id),void 0!==i&&(a.limit=i);const o=await this.privateGetOrdersOwn(this.extend(a,s));return this.parseOrders(o,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"1"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"3"},s))}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={};if(void 0!==e){const t=this.market(e);a.pair=t.id}void 0!==i&&(a.limit=i);const r=await this.privateGetExchangesOwn(this.extend(a,s));return this.parseTrades(r,void 0,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){const o=this.urlencode(this.keysort(this.omit(s,this.extractParams(e))));let n=this.urls.api+"/";if("charts/{pair}/{type}/chart/"!==e&&(n+="v1/"),n+=this.implodeParams(e,s),a={Accept:"application/json"},"public"===t)o.length&&(n+="?"+o);else{this.checkRequiredCredentials();let e=this.apiKey;"POST"===i?(a["Content-Type"]="application/x-www-form-urlencoded",e+=r=o):o.length&&(n+="?"+o),a["X-KEY"]=this.apiKey,a["X-SIGN"]=this.hmac(this.encode(e),this.encode(this.secret)),a["X-NONCE"]=this.nonce().toString()}return{url:n,method:i,body:r,headers:a}}handleErrors(e,t,i,s,n,c,d,h,l){if(void 0===d)return;const u=this.safeString(d,"error"),p=this.id+" "+c;if(void 0!==u&&(this.throwExactlyMatchedException(this.exceptions.exact,u,p),this.throwBroadlyMatchedException(this.exceptions.broad,u,p)),401===e||403===e)throw new r(p);if(429===e)throw new o(p);if(!(e<400))throw new a(p)}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,InsufficientFunds:r,InvalidOrder:o,AuthenticationError:n,PermissionDenied:c,InvalidNonce:d,OrderNotFound:h,DDoSProtection:l}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcbox",name:"BtcBox",countries:["JP"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87327317-98c55400-c53c-11ea-9a11-81f7d951cc74.jpg",api:"https://www.btcbox.co.jp/api",www:"https://www.btcbox.co.jp/",doc:"https://blog.btcbox.jp/en/archives/8762",fees:"https://support.btcbox.co.jp/hc/en-us/articles/360001235694-Fees-introduction"},api:{public:{get:["depth","orders","ticker"]},private:{post:["balance","trade_add","trade_cancel","trade_list","trade_view","wallet"]}},markets:{"BTC/JPY":{id:"btc",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy",taker:5e-4,maker:5e-4},"ETH/JPY":{id:"eth",symbol:"ETH/JPY",base:"ETH",quote:"JPY",baseId:"eth",quoteId:"jpy",taker:.001,maker:.001},"LTC/JPY":{id:"ltc",symbol:"LTC/JPY",base:"LTC",quote:"JPY",baseId:"ltc",quoteId:"jpy",taker:.001,maker:.001},"BCH/JPY":{id:"bch",symbol:"BCH/JPY",base:"BCH",quote:"JPY",baseId:"bch",quoteId:"jpy",taker:.001,maker:.001}},exceptions:{104:n,105:c,106:d,107:o,200:r,201:o,202:o,203:h,401:h,402:l}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){const a=s[e],r=this.currency(a).id,o=r+"_balance";if(o in t){const e=this.account(),s=r+"_lock";e.free=this.safeFloat(t,o),e.used=this.safeFloat(t,s),i[a]=e}}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),a={};this.symbols.length>1&&(a.coin=s.baseId);const r=await this.publicGetDepth(this.extend(a,i));return this.parseOrderBook(r)}parseTicker(e,t){const i=this.milliseconds();let s=void 0;void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"volume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={};this.symbols.length>1&&(s.coin=i.baseId);const a=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(a,i)}parseTrade(e,t){const i=this.safeTimestamp(e,"date");let s=void 0;void 0!==t&&(s=t.symbol);const a=this.safeString(e,"tid"),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=void 0;void 0!==o&&void 0!==r&&(n=r*o);const c=this.safeString(e,"type");return{info:e,id:a,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:s,type:void 0,side:c,takerOrMaker:void 0,price:r,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={};this.symbols.length>1&&(r.coin=a.baseId);const o=await this.publicGetOrders(this.extend(r,s));return this.parseTrades(o,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n={amount:s,price:a,type:i,coin:o.baseId},c=await this.privatePostTradeAdd(this.extend(n,r));return this.parseOrder(c,o)}async cancelOrder(e,t,i={}){await this.loadMarkets(),void 0===t&&(t="BTC/JPY");const s=this.market(t),a={id:e,coin:s.baseId},r=await this.privatePostTradeCancel(this.extend(a,i));return this.parseOrder(r,s)}parseOrderStatus(e){return this.safeString({part:"open",all:"closed",cancelled:"canceled",closed:"closed",no:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id");let s=void 0;void 0!==this.safeString(e,"datetime")&&(s=this.parse8601(e.datetime+"+09:00"));const a=this.safeFloat(e,"amount_original"),r=this.safeFloat(e,"amount_outstanding");let o=void 0;void 0!==a&&void 0!==r&&(o=a-r);const n=this.safeFloat(e,"price");let c=void 0;void 0!==n&&void 0!==o&&(c=o*n);let d=this.parseOrderStatus(this.safeString(e,"status"));void 0===d&&void 0!==r&&0===r&&(d="closed");let h=void 0;void 0!==t&&(h=t.symbol);const l=this.safeString(e,"type");return{id:i,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,amount:a,remaining:r,filled:o,side:l,type:void 0,timeInForce:void 0,status:d,symbol:h,price:n,stopPrice:void 0,cost:c,trades:void 0,fee:void 0,info:e,average:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets(),void 0===t&&(t="BTC/JPY");const s=this.market(t),a=this.extend({id:e,coin:s.baseId},i),r=await this.privatePostTradeView(this.extend(a,i));return this.parseOrder(r,s)}async fetchOrdersByType(e,t,i,s,a={}){await this.loadMarkets(),void 0===t&&(t="BTC/JPY");const r=this.market(t),o={type:e,coin:r.baseId},n=await this.privatePostTradeList(this.extend(o,a)),c=this.parseOrders(n,r,i,s);if("open"===e)for(let e=0;e<c.length;e++)c[e].status="open";return c}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersByType("all",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByType("open",e,t,i,s)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.extend({key:this.apiKey,nonce:e},s),i=this.urlencode(t),o=this.hash(this.encode(this.secret));t.signature=this.hmac(this.encode(i),this.encode(o)),r=this.urlencode(t),a={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n)return;if(e>=400)return;const h=this.safeValue(n,"result");if(void 0===h||!0===h)return;const l=this.safeValue(n,"code"),u=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions,l,u),new a(u)}async request(e,t="public",i="GET",s={},r,o){let n=await this.fetch2(e,t,i,s,r,o);if("string"==typeof n){if(n=this.strip(n),!this.isJsonEncodedObject(n))throw new a(this.id+" "+n);n=JSON.parse(n)}return n}}},function(e,t,i){"use strict";const s=i(1),{ArgumentsRequired:a,ExchangeError:r,OrderNotFound:o,InvalidOrder:n,InsufficientFunds:c,DDoSProtection:d,BadRequest:h}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcmarkets",name:"BTC Markets",countries:["AU"],rateLimit:1e3,version:"v3",has:{cancelOrder:!0,cancelOrders:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:"emulated",fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/89731817-b3fb8480-da52-11ea-817f-783b08aaf32b.jpg",api:{public:"https://api.btcmarkets.net",private:"https://api.btcmarkets.net"},www:"https://btcmarkets.net",doc:["https://api.btcmarkets.net/doc/v3","https://github.com/BTCMarkets/API"]},api:{public:{get:["markets","markets/{marketId}/ticker","markets/{marketId}/trades","markets/{marketId}/orderbook","markets/{marketId}/candles","markets/tickers","markets/orderbooks","time"]},private:{get:["orders","orders/{id}","batchorders/{ids}","trades","trades/{id}","withdrawals","withdrawals/{id}","deposits","deposits/{id}","transfers","transfers/{id}","addresses","withdrawal-fees","assets","accounts/me/trading-fees","accounts/me/withdrawal-limits","accounts/me/balances","accounts/me/transactions","reports/{id}"],post:["orders","batchorders","withdrawals","reports"],delete:["orders","orders/{id}","batchorders/{ids}"],put:["orders/{id}"]}},timeframes:{"1m":"1m","1h":"1h","1d":"1d"},exceptions:{3:n,6:d,InsufficientFund:c,InvalidPrice:n,InvalidAmount:n,MissingArgument:n,OrderAlreadyCancelled:n,OrderNotFound:o,OrderStatusIsFinal:n,InvalidPaginationParameter:h},fees:{percentage:!0,tierBased:!0,maker:-5e-4,taker:.002},options:{fees:{AUD:{maker:.0085,taker:.0085}}}})}async fetchTransactionsWithMethod(e,t,i,s,a={}){await this.loadMarkets();const r={};void 0!==s&&(r.limit=s),void 0!==i&&(r.after=i);let o=void 0;void 0!==t&&(o=this.currency(t));const n=await this[e](this.extend(r,a));return this.parseTransactions(n,o,i,s)}async fetchTransactions(e,t,i,s={}){return await this.fetchTransactionsWithMethod("privateGetTransfers",e,t,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsWithMethod("privateGetDeposits",e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsWithMethod("privateGetWithdrawals",e,t,i,s)}parseTransactionStatus(e){return this.safeString({Complete:"ok"},e,e)}parseTransactionType(e){return this.safeString({Withdraw:"withdrawal",Deposit:"deposit"},e,e)}parseTransaction(e,t){const i=this.parse8601(this.safeString(e,"creationTime")),s=this.parse8601(this.safeString(e,"lastUpdate"));let a=this.parseTransactionType(this.safeStringLower(e,"type"));"withdraw"===a&&(a="withdrawal");const r=this.safeValue(e,"paymentDetail",{}),o=this.safeString(r,"txId");let n=this.safeString(r,"address"),c=void 0;if(void 0!==n){const e=n.split("?dt=");e.length>1&&(n=e[0],c=e[1])}const d=n,h=c,l=this.safeFloat(e,"fee"),u=this.parseTransactionStatus(this.safeString(e,"status")),p=this.safeString(e,"assetName"),f=this.safeCurrencyCode(p);let m=this.safeFloat(e,"amount");return l&&(m-=l),{id:this.safeString(e,"id"),txid:o,timestamp:i,datetime:this.iso8601(i),address:n,addressTo:d,addressFrom:void 0,tag:c,tagTo:h,tagFrom:void 0,type:a,amount:m,currency:f,status:u,updated:s,fee:{currency:f,cost:l},info:e}}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"baseAssetName"),r=this.safeString(s,"quoteAssetName"),o=this.safeString(s,"marketId"),n=this.safeCurrencyCode(a),c=this.safeCurrencyCode(r),d=n+"/"+c,h=this.safeValue(this.safeValue(this.options,"fees",{}),c,this.fees),l=this.safeFloat(s,"priceDecimals"),u=this.safeFloat(s,"amountDecimals"),p=this.safeFloat(s,"minOrderAmount"),f=this.safeFloat(s,"maxOrderAmount");let m=void 0;"AUD"===c&&(m=Math.pow(10,-l));const v={amount:u,price:l},y={amount:{min:p,max:f},price:{min:m,max:void 0},cost:{min:void 0,max:void 0}};i.push({info:s,id:o,symbol:d,base:n,quote:c,baseId:a,quoteId:r,active:void 0,maker:h.maker,taker:h.taker,limits:y,precision:v})}return i}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.parse8601(this.safeString(t,"timestamp"))}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountsMeBalances(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"assetName"),r=this.safeCurrencyCode(a),o=this.safeFloat(s,"balance"),n=this.safeFloat(s,"locked"),c=this.account();c.used=n,c.total=o,i[r]=c}return this.parseBalance(i)}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,0)),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={marketId:r.id,timeWindow:this.timeframes[t]};void 0!==i&&(o.from=this.iso8601(i)),void 0!==s&&(o.limit=s);const n=await this.publicGetMarketsMarketIdCandles(this.extend(o,a));return this.parseOHLCVs(n,r,t,i,s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={marketId:this.market(e).id},a=await this.publicGetMarketsMarketIdOrderbook(this.extend(s,i)),r=this.safeIntegerProduct(a,"snapshotId",.001),o=this.parseOrderBook(a,r);return o.nonce=this.safeInteger(a,"snapshotId"),o}parseTicker(e,t){let i=void 0;const s=this.safeString(e,"marketId");if(void 0!==s)if(s in this.markets_by_id)t=this.markets_by_id[s];else{const[e,t]=s.split("-");i=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===i&&void 0!==t&&(i=t.symbol);const a=this.parse8601(this.safeString(e,"timestamp")),r=this.safeFloat(e,"lastPrice"),o=this.safeFloat(e,"volume24h"),n=this.safeFloat(e,"volumeQte24h"),c=this.vwap(o,n),d=this.safeFloat(e,"price24h"),h=this.safeFloat(e,"pricePct24h");return{symbol:i,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(e,"high24h"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bestBid"),bidVolume:void 0,ask:this.safeFloat(e,"bestAsk"),askVolume:void 0,vwap:c,open:void 0,close:r,last:r,previousClose:void 0,change:d,percentage:h,average:void 0,baseVolume:o,quoteVolume:n,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={marketId:i.id},a=await this.publicGetMarketsMarketIdTicker(this.extend(s,t));return this.parseTicker(a,i)}async fetchTicker2(e,t={}){await this.loadMarkets();const i=this.market(e),s={id:i.id},a=await this.publicGetMarketIdTick(this.extend(s,t));return this.parseTicker(a,i)}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"timestamp")),s=this.safeString(e,"marketId");let a=void 0,r=void 0,o=void 0;if(void 0!==s)if(s in this.markets_by_id)t=this.markets_by_id[s];else{const[e,t]=s.split("-");r=this.safeCurrencyCode(e),o=this.safeCurrencyCode(t),a=r+"/"+o}void 0===a&&void 0!==t&&(a=t.symbol,r=t.base,o=t.quote);let n=void 0;n="AUD"===o?o:r;let c=this.safeString(e,"side");"Bid"===c?c="buy":"Ask"===c&&(c="sell");const d=this.safeString(e,"id"),h=this.safeFloat(e,"price"),l=this.safeFloat(e,"amount");let u=void 0;void 0!==l&&void 0!==h&&(u=l*h);const p=this.safeString(e,"orderId");let f=void 0;const m=this.safeFloat(e,"fee");void 0!==m&&(f={cost:m,currency:n});const v=this.safeStringLower(e,"liquidityType");return{info:e,id:d,timestamp:i,datetime:this.iso8601(i),order:p,symbol:a,type:void 0,side:c,price:h,amount:l,cost:u,takerOrMaker:v,fee:f}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={marketId:a.id},o=await this.publicGetMarketsMarketIdTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}async createOrder(e,t,i,s,r,o={}){await this.loadMarkets();const n=this.market(e),c={marketId:n.id,amount:this.amountToPrecision(e,s),side:"buy"===i?"Bid":"Ask"},d=t.toLowerCase(),h=this.safeValue(this.options,"orderTypes",{limit:"Limit",market:"Market",stop:"Stop","stop limit":"Stop Limit","take profit":"Take Profit"});c.type=this.safeString(h,d,t);let l=!1,u=!1;if("limit"===d?l=!0:"stop limit"===d?(u=!0,l=!0):("take profit"===d||"stop"===d)&&(u=!0),l){if(void 0===r)throw new a(this.id+" createOrder() requires a price argument for a "+t+"order");c.price=this.priceToPrecision(e,r)}if(u){const i=this.safeFloat(o,"triggerPrice");if(o=this.omit(o,"triggerPrice"),void 0===i)throw new a(this.id+" createOrder() requires a triggerPrice parameter for a "+t+"order");c.triggerPrice=this.priceToPrecision(e,i)}const p=this.safeString(o,"clientOrderId");void 0!==p&&(c.clientOrderId=p),o=this.omit(o,"clientOrderId");const f=await this.privatePostOrders(this.extend(c,o));return this.parseOrder(f,n)}async cancelOrders(e,t,i={}){await this.loadMarkets();for(let t=0;t<e.length;t++)e[t]=parseInt(e[t]);const s={ids:e};return await this.privateDeleteBatchordersIds(this.extend(s,i))}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e};return await this.privateDeleteOrdersId(this.extend(s,i))}calculateFee(e,t,i,s,a,r="taker",o={}){const n=this.markets[e],c=n[r];let d=void 0,h=void 0;return"AUD"===n.quote?(d=n.quote,h=parseFloat(this.costToPrecision(e,s*a))):(d=n.base,h=parseFloat(this.amountToPrecision(e,s))),{type:r,currency:d,rate:c,cost:parseFloat(this.feeToPrecision(e,c*h))}}parseOrderStatus(e){return this.safeString({Accepted:"open",Placed:"open","Partially Matched":"open","Fully Matched":"closed",Cancelled:"canceled","Partially Cancelled":"canceled",Failed:"rejected"},e,e)}parseOrder(e,t){const i=this.parse8601(this.safeString(e,"creationTime")),s=this.safeString(e,"marketId");let a=void 0;if(void 0!==s)if(s in this.markets_by_id)t=this.markets_by_id[s];else{const[e,t]=s.split("-");a=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===a&&void 0!==t&&(a=t.symbol);let r=this.safeString(e,"side");"Bid"===r?r="buy":"Ask"===r&&(r="sell");const o=this.safeStringLower(e,"type"),n=this.safeFloat(e,"price"),c=this.safeFloat(e,"amount"),d=this.safeFloat(e,"openAmount");let h=void 0;void 0!==c&&void 0!==d&&(h=Math.max(0,c-d));const l=this.parseOrderStatus(this.safeString(e,"status"));let u=void 0;void 0!==n&&void 0!==h&&(u=n*h);const p=this.safeString(e,"orderId"),f=this.safeString(e,"clientOrderId"),m=this.safeString(e,"timeInForce"),v=this.safeFloat(e,"triggerPrice");return{info:e,id:p,clientOrderId:f,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:a,type:o,timeInForce:m,side:r,price:n,stopPrice:v,cost:u,amount:c,filled:h,remaining:d,average:void 0,status:l,trades:void 0,fee:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privateGetOrdersId(this.extend(s,i));return this.parseOrder(a)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const a={status:"all"};let r=void 0;void 0!==e&&(r=this.market(e),a.marketId=r.id),void 0!==t&&(a.after=t),void 0!==i&&(a.limit=i);const o=await this.privateGetOrders(this.extend(a,s));return this.parseOrders(o,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"open"},s))}async fetchClosedOrders(e,t,i,s={}){const a=await this.fetchOrders(e,t,i,s);return this.filterBy(a,"status","closed")}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.market(e),a.marketId=r.id),void 0!==t&&(a.after=t),void 0!==i&&(a.limit=i);const o=await this.privateGetTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}lookupSymbolFromMarketId(e){let t=void 0,i=void 0;if(void 0!==e)if(e in this.markets_by_id)t=this.markets_by_id[e];else{const[t,s]=e.split("-");i=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(s)}return void 0===i&&void 0!==t&&(i=t.symbol),i}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o="/"+this.version+"/"+this.implodeParams(e,s);const n=this.keysort(this.omit(s,this.extractParams(e)));if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.base64ToBinary(this.encode(this.secret));let s=i+o+e;"GET"===i||"DELETE"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):s+=r=this.json(n);const c=this.hmac(this.encode(s),t,"sha512","base64");a={Accept:"application/json","Accept-Charset":"UTF-8","Content-Type":"application/json","BM-AUTH-APIKEY":this.apiKey,"BM-AUTH-TIMESTAMP":e,"BM-AUTH-SIGNATURE":c}}else"public"===t&&Object.keys(n).length&&(o+="?"+this.urlencode(n));return{url:this.urls.api[t]+o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,o,n,c,d){if(void 0!==n){if("success"in n&&!n.success){const e=this.safeString(n,"errorCode"),t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions,e,t),new r(t)}if(e>=400){const e=this.safeString(n,"code"),t=this.safeString(n,"message"),i=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions,e,i),this.throwExactlyMatchedException(this.exceptions,t,i),new r(i)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btctradeua",name:"BTC Trade UA",countries:["UA"],rateLimit:3e3,has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0,signIn:!0},urls:{referral:"https://btc-trade.com.ua/registration/22689",logo:"https://user-images.githubusercontent.com/1294454/27941483-79fc7350-62d9-11e7-9f61-ac47f28fcd96.jpg",api:"https://btc-trade.com.ua/api",www:"https://btc-trade.com.ua",doc:"https://docs.google.com/document/d/1ocYA0yMy_RXd561sfG3qEPZ80kyll36HUxvCRe5GbhE/edit"},api:{public:{get:["deals/{symbol}","trades/sell/{symbol}","trades/buy/{symbol}","japan_stat/high/{symbol}"]},private:{post:["auth","ask/{symbol}","balance","bid/{symbol}","buy/{symbol}","my_orders/{symbol}","order/status/{id}","remove/order/{id}","sell/{symbol}"]}},markets:{"BCH/UAH":{id:"bch_uah",symbol:"BCH/UAH",base:"BCH",quote:"UAH",baseId:"bch",quoteId:"uah"},"BTC/UAH":{id:"btc_uah",symbol:"BTC/UAH",base:"BTC",quote:"UAH",baseId:"btc",quoteId:"uah",precision:{price:1},limits:{amount:{min:1e-10}}},"DASH/BTC":{id:"dash_btc",symbol:"DASH/BTC",base:"DASH",quote:"BTC",baseId:"dash",quoteId:"btc"},"DASH/UAH":{id:"dash_uah",symbol:"DASH/UAH",base:"DASH",quote:"UAH",baseId:"dash",quoteId:"uah"},"DOGE/BTC":{id:"doge_btc",symbol:"DOGE/BTC",base:"DOGE",quote:"BTC",baseId:"doge",quoteId:"btc"},"DOGE/UAH":{id:"doge_uah",symbol:"DOGE/UAH",base:"DOGE",quote:"UAH",baseId:"doge",quoteId:"uah"},"ETH/UAH":{id:"eth_uah",symbol:"ETH/UAH",base:"ETH",quote:"UAH",baseId:"eth",quoteId:"uah"},"ITI/UAH":{id:"iti_uah",symbol:"ITI/UAH",base:"ITI",quote:"UAH",baseId:"iti",quoteId:"uah"},"KRB/UAH":{id:"krb_uah",symbol:"KRB/UAH",base:"KRB",quote:"UAH",baseId:"krb",quoteId:"uah"},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc"},"LTC/UAH":{id:"ltc_uah",symbol:"LTC/UAH",base:"LTC",quote:"UAH",baseId:"ltc",quoteId:"uah"},"NVC/BTC":{id:"nvc_btc",symbol:"NVC/BTC",base:"NVC",quote:"BTC",baseId:"nvc",quoteId:"btc"},"NVC/UAH":{id:"nvc_uah",symbol:"NVC/UAH",base:"NVC",quote:"UAH",baseId:"nvc",quoteId:"uah"},"PPC/BTC":{id:"ppc_btc",symbol:"PPC/BTC",base:"PPC",quote:"BTC",baseId:"ppc",quoteId:"btc"},"SIB/UAH":{id:"sib_uah",symbol:"SIB/UAH",base:"SIB",quote:"UAH",baseId:"sib",quoteId:"uah"},"XMR/UAH":{id:"xmr_uah",symbol:"XMR/UAH",base:"XMR",quote:"UAH",baseId:"xmr",quoteId:"uah"},"ZEC/UAH":{id:"zec_uah",symbol:"ZEC/UAH",base:"ZEC",quote:"UAH",baseId:"zec",quoteId:"uah"}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:6e-4,LTC:.01,NVC:.01,DOGE:10}}}})}async signIn(e={}){return await this.privatePostAuth(e)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e),i={info:t},s=this.safeValue(t,"accounts");for(let e=0;e<s.length;e++){const t=s[e],a=this.safeString(t,"currency"),r=this.safeCurrencyCode(a),o=this.account();o.total=this.safeFloat(t,"balance"),i[r]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id},a=await this.publicGetTradesBuySymbol(this.extend(s,i)),r=await this.publicGetTradesSellSymbol(this.extend(s,i)),o={bids:[],asks:[]};return a&&"list"in a&&(o.bids=a.list),r&&"list"in r&&(o.asks=r.list),this.parseOrderBook(o,void 0,"bids","asks","price","currency_trade")}async fetchTicker(e,t={}){await this.loadMarkets();const i={symbol:this.marketId(e)},s=await this.publicGetJapanStatHighSymbol(this.extend(i,t)),a=this.safeValue(s,"trades"),r=this.milliseconds(),o={symbol:e,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:void 0,last:void 0,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:a},n=a.length;if(n>0){for(let e=Math.max(n-48,0);e<a.length;e++){const t=a[e];void 0===o.open&&(o.open=t[1]),(void 0===o.high||o.high<t[2])&&(o.high=t[2]),(void 0===o.low||o.low>t[3])&&(o.low=t[3]),void 0===o.baseVolume?o.baseVolume=-t[5]:o.baseVolume-=t[5]}const e=n-1;o.last=a[e][4],o.close=o.last,o.baseVolume=-1*o.baseVolume}return o}convertCyrillicMonthNameToString(e){return this.safeString({"":"01","":"02","":"03","":"04","":"05","":"06","":"07","":"08","":"09","":"10","":"11","":"12"},e)}parseCyrillicDatetime(e){const t=e.split(" ");let i=t[0];const s=this.convertCyrillicMonthNameToString(t[1]);if(!s)throw new a(this.id+" parseTrade() undefined month name: "+e);const r=t[2];let o=t[4];7===o.length&&(o="0"+o),1===i.length&&(i="0"+i);const n=[r,s,i].join("-")+"T"+o,c=this.parse8601(n);let d=[s,i].join("");return d=parseInt(d),d<325||d>1028?c-72e5:c-108e5}parseTrade(e,t){const i=this.parseCyrillicDatetime(this.safeString(e,"pub_date")),s=this.safeString(e,"id"),a=this.safeString(e,"type"),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"amnt_trade");let n=void 0;void 0!==o&&void 0!==r&&(n=r*o);let c=void 0;return void 0!==t&&(c=t.symbol),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:c,type:"limit",side:a,order:void 0,takerOrMaker:void 0,price:r,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id},o=await this.publicGetDealsSymbol(this.extend(r,s)),n=[];for(let e=0;e<o.length;e++)o[e].id%2&&n.push(o[e]);return this.parseTrades(n,a,t,i)}async createOrder(e,t,i,s,r,o={}){if("market"===t)throw new a(this.id+" allows limit orders only");await this.loadMarkets();const n=this.market(e),c="privatePost"+this.capitalize(i)+"Id",d={count:s,currency1:n.quoteId,currency:n.baseId,price:r};return this[c](this.extend(d,o))}async cancelOrder(e,t,i={}){const s={id:e};return await this.privatePostRemoveOrderId(this.extend(s,i))}parseOrder(e,t){const i=this.milliseconds();let s=void 0;return void 0!==t&&(s=t.symbol),{id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:"open",symbol:s,type:void 0,timeInForce:void 0,side:this.safeString(e,"type"),price:this.safeFloat(e,"price"),stopPrice:void 0,amount:this.safeFloat(e,"amnt_trade"),filled:0,remaining:this.safeFloat(e,"amnt_trade"),trades:void 0,info:e,cost:void 0,average:void 0,fee:void 0}}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOpenOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e),o={symbol:a.id},n=await this.privatePostMyOrdersSymbol(this.extend(o,s)),c=this.safeValue(n,"your_open_orders");return this.parseOrders(c,a,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+=this.implodeParams(e,n));else{this.checkRequiredCredentials();const e=this.nonce(),t=(r=this.urlencode(this.extend({out_order_id:e,nonce:e},n)))+this.secret;a={"public-key":this.apiKey,"api-sign":this.hash(this.encode(t),"sha256"),"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:r,headers:a}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcturk",name:"BTCTurk",countries:["TR"],rateLimit:1e3,has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},timeframes:{"1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87153926-efbef500-c2c0-11ea-9842-05b63612c4b9.jpg",api:"https://www.btcturk.com/api",www:"https://www.btcturk.com",doc:"https://github.com/BTCTrader/broker-api-docs"},api:{public:{get:["ohlcdata","orderbook","ticker","trades"]},private:{get:["balance","openOrders","userTransactions"],post:["exchange","cancelOrder"]}},fees:{trading:{maker:.00236,taker:.003*1.18}}})}async fetchMarkets(e={}){const t=await this.publicGetTicker(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"pair");let r=a.slice(0,3),o=a.slice(3,6);const n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o);r=r.toLowerCase(),o=o.toLowerCase();const d=n+"/"+c,h={amount:8,price:8},l=!0;i.push({id:a,symbol:d,base:n,quote:c,baseId:r,quoteId:o,active:l,info:s,precision:h,limits:{amount:{min:Math.pow(10,-h.amount),max:void 0},price:{min:Math.pow(10,-h.price),max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalance(e),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){const a=s[e],r=this.currencies[a],o=r.id+"_available",n=r.id+"_balance",c=r.id+"_reserved";if(o in t){const e=this.account();e.free=this.safeFloat(t,o),e.total=this.safeFloat(t,n),e.used=this.safeFloat(t,c),i[a]=e}}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pairSymbol:this.market(e).id},a=await this.publicGetOrderbook(this.extend(s,i)),r=this.safeTimestamp(a,"timestamp");return this.parseOrderBook(a,r)}parseTicker(e,t){let i=void 0;t&&(i=t.symbol);const s=this.safeTimestamp(e,"timestamp"),a=this.safeFloat(e,"last");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"average"),baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s={};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"pair");let r=a,o=void 0;a in this.markets_by_id&&(o=this.markets_by_id[r],r=o.symbol),s[r]=this.parseTicker(t,o)}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=await this.fetchTickers(t);return this.safeValue2(s,i.id,e)}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid"),a=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount");let o=void 0;void 0!==r&&void 0!==a&&(o=r*a);let n=void 0;return void 0!==t&&(n=t.symbol),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:a,amount:r,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={pairSymbol:a.id},o=await this.publicGetTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"Time")),this.safeFloat(e,"Open"),this.safeFloat(e,"High"),this.safeFloat(e,"Low"),this.safeFloat(e,"Close"),this.safeFloat(e,"Volume")]}async fetchOHLCV(e,t="1d",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={};void 0!==s&&(o.last=s);const n=await this.publicGetOhlcdata(this.extend(o,a));return this.parseOHLCVs(n,r,t,i,s)}async createOrder(e,t,i,s,r,o={}){await this.loadMarkets();const n={PairSymbol:this.marketId(e),OrderType:"buy"===i?0:1,OrderMethod:"market"===t?1:0};if("market"===t){if(!("Total"in o))throw new a(this.id+' createOrder requires the "Total" extra parameter for market orders (amount and price are both ignored)')}else n.Price=r,n.Amount=s;const c=await this.privatePostExchange(this.extend(n,o));return{info:c,id:this.safeString(c,"id")}}async cancelOrder(e,t,i={}){const s={id:e};return await this.privatePostCancelOrder(this.extend(s,i))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,o){if("btctrader"===this.id)throw new a(this.id+" is an abstract base API for BTCExchange, BTCTurk");let n=this.urls.api+"/"+e;if("public"===t)Object.keys(s).length&&(n+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const e=this.nonce().toString();o=this.urlencode(s);const t=this.base64ToBinary(this.secret),i=this.apiKey+e;r={"X-PCK":this.apiKey,"X-Stamp":e,"X-Signature":this.hmac(this.encode(i),t,"sha256","base64"),"Content-Type":"application/x-www-form-urlencoded"}}return{url:n,method:i,body:o,headers:r}}}},function(e,t,i){"use strict";const s=i(1),{AddressPending:a,AuthenticationError:r,ExchangeError:o,NotSupported:n,PermissionDenied:c,ArgumentsRequired:d}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"buda",name:"Buda",countries:["AR","CL","CO","PE"],rateLimit:1e3,version:"v2",has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTrades:!0,fetchTicker:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/47380619-8a029200-d706-11e8-91e0-8a391fe48de3.jpg",api:"https://www.buda.com/api",www:"https://www.buda.com",doc:"https://api.buda.com",fees:"https://www.buda.com/comisiones"},status:{status:"error",updated:void 0,eta:void 0,url:void 0},api:{public:{get:["pairs","markets","currencies","markets/{market}","markets/{market}/ticker","markets/{market}/volume","markets/{market}/order_book","markets/{market}/trades","currencies/{currency}/fees/deposit","currencies/{currency}/fees/withdrawal","tv/history"],post:["markets/{market}/quotations"]},private:{get:["balances","balances/{currency}","currencies/{currency}/balances","orders","orders/{id}","markets/{market}/orders","deposits","currencies/{currency}/deposits","withdrawals","currencies/{currency}/withdrawals","currencies/{currency}/receive_addresses","currencies/{currency}/receive_addresses/{id}"],post:["markets/{market}/orders","currencies/{currency}/deposits","currencies/{currency}/withdrawals","currencies/{currency}/simulated_withdrawals","currencies/{currency}/receive_addresses"],put:["orders/{id}"]}},timeframes:{"1m":"1","5m":"5","30m":"30","1h":"60","2h":"120","1d":"D","1w":"W"},fees:{trading:{tierBased:!0,percentage:!0,taker:.008,maker:.004,tiers:{taker:[[0,.008],[2e3,.007],[2e4,.006],[1e5,.005],[5e5,.004],[25e5,.003],[125e5,.002]],maker:[[0,.004],[2e3,.0035],[2e4,.003],[1e5,.0025],[5e5,.002],[25e5,.0015],[125e5,.001]]}}},exceptions:{not_authorized:r,forbidden:c,invalid_record:o,not_found:o,parameter_missing:o,bad_parameter:o}})}async fetchCurrencyInfo(e,t){if(!t){const e=await this.publicGetCurrencies();t=this.safeValue(e,"currencies")}for(let i=0;i<t.length;i++){const s=t[i];if(s.id===e)return s}}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=this.safeValue(t,"markets"),s=await this.publicGetCurrencies(),a=this.safeValue(s,"currencies"),r=[];for(let e=0;e<i.length;e++){const t=i[e],s=this.safeString(t,"id"),o=this.safeString(t,"base_currency"),n=this.safeString(t,"quote_currency"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=await this.fetchCurrencyInfo(o,a),l=await this.fetchCurrencyInfo(n,a),u=c+"/"+d,p={amount:h.input_decimals,price:l.input_decimals},f={amount:{min:parseFloat(t.minimum_order_amount[0]),max:void 0},price:{min:Math.pow(10,-p.price),max:void 0}};f.cost={min:f.amount.min*f.price.min,max:void 0},r.push({id:s,symbol:u,base:c,quote:d,baseId:o,quoteId:n,active:!0,precision:p,limits:f,info:t})}return r}async fetchCurrencies(e={}){const t=(await this.publicGetCurrencies()).currencies,i={};for(let e=0;e<t.length;e++){const s=t[e];if(!s.managed)continue;const a=this.safeString(s,"id"),r=this.safeCurrencyCode(a),o=this.safeFloat(s,"input_decimals"),n=Math.pow(10,-o);i[r]={id:a,code:r,info:s,name:void 0,active:!0,fee:void 0,precision:o,limits:{amount:{min:n,max:void 0},price:{min:n,max:void 0},cost:{min:void 0,max:void 0},deposit:{min:parseFloat(s.deposit_minimum[0]),max:void 0},withdraw:{min:parseFloat(s.withdrawal_minimum[0])}}}}return i}async fetchFundingFees(e,t={}){await this.loadMarkets();const i={},s={},a={};void 0===e&&(e=Object.keys(this.currencies));for(let t=0;t<e.length;t++){const r=e[t],o={currency:this.currency(r).id},n=await this.publicGetCurrenciesCurrencyFeesWithdrawal(o),c=await this.publicGetCurrenciesCurrencyFeesDeposit(o);i[r]=this.parseFundingFee(n.fee),s[r]=this.parseFundingFee(c.fee),a[r]={withdraw:n,deposit:c}}return{withdraw:i,deposit:s,info:a}}parseFundingFee(e,t){return void 0===t&&(t=e.name),"withdrawal"===t&&(t="withdraw"),{type:t,currency:e.base[1],rate:e.percent,cost:parseFloat(e.base[0])}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},a=await this.publicGetMarketsMarketTicker(this.extend(s,t)),r=this.safeValue(a,"ticker");return this.parseTicker(r,i)}parseTicker(e,t){const i=this.milliseconds();let s=void 0;void 0!==t&&(s=t.symbol);const a=parseFloat(e.last_price[0]),r=parseFloat(e.price_variation_24h),o=parseFloat(this.priceToPrecision(s,a/(r+1))),n=a-o,c=this.sum(a,o)/2;return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:parseFloat(e.max_bid[0]),bidVolume:void 0,ask:parseFloat(e.min_ask[0]),askVolume:void 0,vwap:void 0,open:o,close:a,last:a,previousClose:o,change:n,percentage:100*r,average:c,baseVolume:parseFloat(e.volume[0]),quoteVolume:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market:a.id};void 0!==i&&(r.limit=i);const o=await this.publicGetMarketsMarketTrades(this.extend(r,s));return this.parseTrades(o.trades.entries,a,t,i)}parseTrade(e,t){let i=void 0,s=void 0;let a=void 0,r=void 0,o=void 0;let n=void 0,c=void 0;return t&&(n=t.symbol),Array.isArray(e)&&(i=parseInt(e[0]),a=parseFloat(e[1]),r=parseFloat(e[2]),c=a*r,s=e[3],o=e[4].toString()),{id:o,order:void 0,info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,type:void 0,side:s,takerOrMaker:void 0,price:a,amount:r,cost:c,fee:void 0}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id},a=await this.publicGetMarketsMarketOrderBook(this.extend(s,i)),r=this.safeValue(a,"order_book");return this.parseOrderBook(r)}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e);void 0===i&&(i=this.milliseconds()-864e5);const o={symbol:r.id,resolution:this.timeframes[t],from:i/1e3,to:this.seconds()},n=await this.publicGetTvHistory(this.extend(o,a));return this.parseTradingViewOHLCV(n,r,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalances(e),i={info:t},s=this.safeValue(t,"balances");for(let e=0;e<s.length;e++){const t=s[e],a=this.safeString(t,"id"),r=this.safeCurrencyCode(a),o=this.account();o.free=parseFloat(t.available_amount[0]),o.total=parseFloat(t.amount[0]),i[r]=o}return this.parseBalance(i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:parseInt(e)},a=await this.privateGetOrdersId(this.extend(s,i)),r=this.safeValue(a,"order");return this.parseOrder(r)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;void 0!==e&&(a=this.market(e));const r={market:a.id,per:i},o=await this.privateGetMarketsMarketOrders(this.extend(r,s)),n=this.safeValue(o,"orders");return this.parseOrders(n,a,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({state:"pending"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({state:"traded"},s))}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets(),i="buy"===i?"Bid":"Ask";const o={market:this.marketId(e),price_type:t,type:i,amount:this.amountToPrecision(e,s)};"limit"===t&&(o.limit=this.priceToPrecision(e,a));const n=await this.privatePostMarketsMarketOrders(this.extend(o,r)),c=this.safeValue(n,"order");return this.parseOrder(c)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:parseInt(e),state:"canceling"},a=await this.privatePutOrdersId(this.extend(s,i)),r=this.safeValue(a,"order");return this.parseOrder(r)}parseOrderStatus(e){return this.safeString({traded:"closed",received:"open",canceling:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"created_at")),a=this.safeString(e,"market_id"),r=this.safeSymbol(a,t),o=this.safeString(e,"price_type"),n=this.safeStringLower(e,"type"),c=this.parseOrderStatus(this.safeString(e,"state")),d=parseFloat(e.original_amount[0]),h=parseFloat(e.amount[0]),l=parseFloat(e.traded_amount[0]),u=parseFloat(e.total_exchanged[0]);let p=this.safeFloat(e,"limit");void 0!==p&&(p=parseFloat(p[0])),u>0&&l>0&&(p=this.priceToPrecision(r,u/l));const f={cost:parseFloat(e.paid_fee[0]),currency:e.paid_fee[1]};return{id:i,clientOrderId:void 0,datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:c,symbol:r,type:o,timeInForce:void 0,side:n,price:p,stopPrice:void 0,cost:u,amount:d,filled:l,remaining:h,trades:void 0,fee:f,info:e,average:void 0}}isFiat(e){return this.safeValue({ARS:!0,CLP:!0,COP:!0,PEN:!0},e,!1)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e);if(this.isFiat(e))throw new n(this.id+" fetchDepositAddress() for fiat "+e+" is not supported");const s={currency:i.id},r=await this.privateGetCurrenciesCurrencyReceiveAddresses(this.extend(s,t)),o=this.safeValue(r,"receive_addresses"),c=[];for(let e=1;e<o.length;e++){const t=o[e];if(t.ready){const e=t.address;this.checkAddress(e),c.push(e)}}if(c.length<1)throw new a(this.id+": there are no addresses ready for receiving "+e+", retry again later)");return{currency:e,address:c[0],tag:void 0,info:o}}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e);if(this.isFiat(e))throw new n(this.id+": fiat fetchDepositAddress() for "+e+" is not supported");const s={currency:i.id},a=await this.privatePostCurrenciesCurrencyReceiveAddresses(this.extend(s,t));return{currency:e,address:this.safeString(a.receive_address,"address"),tag:void 0,info:a}}parseTransactionStatus(e){return this.safeString({rejected:"failed",confirmed:"ok",anulled:"canceled",retained:"canceled",pending_confirmation:"pending"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"created_at")),a=this.safeString(e,"currency"),r=this.safeCurrencyCode(a,t),o=parseFloat(e.amount[0]),n=parseFloat(e.fee[0]),c=e.fee[1],d=this.parseTransactionStatus(this.safeString(e,"state")),h="deposit_data"in e?"deposit":"withdrawal",l=this.safeValue(e,h+"_data",{}),u=this.safeValue(l,"target_address"),p=this.safeString(l,"tx_hash"),f=this.parse8601(this.safeString(l,"updated_at"));return{info:e,id:i,txid:p,timestamp:s,datetime:this.iso8601(s),address:u,type:h,amount:o,currency:r,status:d,updated:f,fee:{cost:n,rate:c}}}async fetchDeposits(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new d(this.id+": fetchDeposits() requires a currency code argument");const a=this.currency(e),r={currency:a.id,per:i},o=await this.privateGetCurrenciesCurrencyDeposits(this.extend(r,s)),n=this.safeValue(o,"deposits");return this.parseTransactions(n,a,t,i)}async fetchWithdrawals(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new d(this.id+": fetchDeposits() requires a currency code argument");const a=this.currency(e),r={currency:a.id,per:i},o=await this.privateGetCurrenciesCurrencyWithdrawals(this.extend(r,s)),n=this.safeValue(o,"withdrawals");return this.parseTransactions(n,a,t,i)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r={currency:this.currency(e).id,amount:t,withdrawal_data:{target_address:i}},o=await this.privatePostCurrenciesCurrencyWithdrawals(this.extend(r,a)),n=this.safeValue(o,"withdrawal");return this.parseTransaction(n)}nonce(){return this.microseconds()}sign(e,t="public",i="GET",s={},a,r){let o=this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));Object.keys(n).length&&("GET"===i?o+="?"+this.urlencode(n):r=this.json(n));const c=this.urls.api+"/"+this.version+"/"+o;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t=[i,"/api/"+this.version+"/"+o];if(r){const e=this.stringToBase64(r);t.push(this.decode(e))}t.push(e);const s=t.join(" "),n=this.hmac(this.encode(s),this.encode(this.secret),"sha384");a={"X-SBTC-APIKEY":this.apiKey,"X-SBTC-SIGNATURE":n,"X-SBTC-NONCE":e,"Content-Type":"application/json"}}return{url:c,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,r,n,c,d){if(void 0!==n&&e>=400){const e=this.safeString(n,"code"),t=this.safeString(n,"message",r),i=this.id+" "+t;if(void 0!==e)throw this.throwExactlyMatchedException(this.exceptions,e,i),new o(i)}}}},function(e,t,i){"use strict";const s=i(1),{RateLimitExceeded:a,BadSymbol:r,OrderNotFound:o,ExchangeError:n,AuthenticationError:c,ArgumentsRequired:d,ExchangeNotAvailable:h}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bw",name:"BW",countries:["CN"],rateLimit:1500,version:"v1",has:{cancelAllOrders:!1,cancelOrder:!0,cancelOrders:!1,CORS:!1,createDepositAddress:!1,createLimitOrder:!0,createMarketOrder:!1,createOrder:!0,deposit:!1,editOrder:!1,fetchBalance:!0,fetchBidsAsks:!1,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!1,fetchL2OrderBook:!1,fetchLedger:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!1,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTradingLimits:!1,fetchTransactions:!1,fetchWithdrawals:!0,privateAPI:!1,publicAPI:!1,withdraw:!1},timeframes:{"1m":"1M","5m":"5M","15m":"15M","30m":"30M","1h":"1H","1w":"1W"},hostname:"bw.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/69436317-31128c80-0d52-11ea-91d1-eb7bb5818812.jpg",api:"https://www.{hostname}",www:"https://www.bw.com",doc:"https://github.com/bw-exchange/api_docs_en/wiki",fees:"https://www.bw.com/feesRate",referral:"https://www.bw.com/regGetCommission/N3JuT1R3bWxKTE0"},requiredCredentials:{apiKey:!0,secret:!0},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002},funding:{}},exceptions:{exact:{999:c,1e3:h,2012:o,5017:r,10001:a}},api:{public:{get:["api/data/v1/klines","api/data/v1/ticker","api/data/v1/tickers","api/data/v1/trades","api/data/v1/entrusts","exchange/config/controller/website/marketcontroller/getByWebId","exchange/config/controller/website/currencycontroller/getCurrencyList"]},private:{get:["exchange/entrust/controller/website/EntrustController/getEntrustById","exchange/entrust/controller/website/EntrustController/getUserEntrustRecordFromCacheWithPage","exchange/entrust/controller/website/EntrustController/getUserEntrustList","exchange/fund/controller/website/fundwebsitecontroller/getwithdrawaddress","exchange/fund/controller/website/fundwebsitecontroller/getpayoutcoinrecord","exchange/entrust/controller/website/EntrustController/getUserEntrustList"],post:["exchange/fund/controller/website/fundcontroller/getPayinAddress","exchange/fund/controller/website/fundcontroller/getPayinCoinRecord","exchange/fund/controller/website/fundcontroller/findbypage","exchange/entrust/controller/website/EntrustController/addEntrust","exchange/entrust/controller/website/EntrustController/cancelEntrust"]}}})}async fetchMarkets(e={}){const t=await this.publicGetExchangeConfigControllerWebsiteMarketcontrollerGetByWebId(e),i=this.safeValue(t,"datas",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"marketId"),r=parseInt(a),o=this.safeStringUpper(t,"name");let[n,c]=o.split("_");n=this.safeCurrencyCode(n),c=this.safeCurrencyCode(c);const d=this.safeString(t,"sellerCurrencyId"),h=this.safeString(t,"buyerCurrencyId"),l=parseInt(d),u=parseInt(h),p=n+"/"+c,f=1===this.safeInteger(t,"state"),m=this.safeFloat(t,"defaultFee");s.push({id:a,active:f,numericId:r,symbol:p,base:n,quote:c,baseId:d,quoteId:h,baseNumericId:l,quoteNumericId:u,maker:m,taker:m,info:t,precision:{amount:this.safeInteger(t,"amountDecimal"),price:this.safeInteger(t,"priceDecimal")},limits:{amount:{min:this.safeFloat(t,"minAmount"),max:void 0},price:{min:0,max:void 0},cost:{min:0,max:void 0}}})}return s}async fetchCurrencies(e={}){const t=await this.publicGetExchangeConfigControllerWebsiteCurrencycontrollerGetCurrencyList(e),i=this.safeValue(t,"datas",[]),s={};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"currencyId"),r=this.safeCurrencyCode(this.safeStringUpper(t,"name")),o=1===this.safeInteger(t,"state");s[r]={id:a,code:r,info:t,name:r,active:o,fee:this.safeFloat(t,"drawFee"),precision:void 0,limits:{amount:{min:this.safeFloat(t,"limitAmount",0),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:this.safeFloat(t,"onceDrawLimit")}}}}return s}parseTicker(e,t){const i=this.safeString(e,0),s=this.safeSymbol(i,t),a=this.milliseconds(),r=parseFloat(this.safeValue(e,1)),o=this.safeValue(e,"bid",{}),n=this.safeValue(e,"ask",{});return{symbol:s,timestamp:a,datetime:this.iso8601(a),high:parseFloat(this.safeValue(e,2)),low:parseFloat(this.safeValue(e,3)),bid:parseFloat(this.safeValue(e,7)),bidVolume:this.safeFloat(o,"quantity"),ask:parseFloat(this.safeValue(e,8)),askVolume:this.safeFloat(n,"quantity"),vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:parseFloat(this.safeValue(e,5)),percentage:void 0,average:void 0,baseVolume:parseFloat(this.safeValue(e,4)),quoteVolume:parseFloat(this.safeValue(e,9)),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={marketId:i.id},a=await this.publicGetApiDataV1Ticker(this.extend(s,t)),r=this.safeValue(a,"datas",[]);return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetApiDataV1Tickers(t),s=this.safeValue(i,"datas",[]),a={};for(let t=0;t<s.length;t++){const i=this.parseTicker(s[t]),r=i.symbol;(void 0===e||this.inArray(r,e))&&(a[r]=i)}return this.filterByArray(a,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={marketId:this.market(e).id};void 0!==t&&(s.dataSize=t);const a=await this.publicGetApiDataV1Entrusts(this.extend(s,i)),r=this.safeValue(a,"datas",[]),o=this.safeTimestamp(r,"timestamp");return this.parseOrderBook(r,o)}parseTrade(e,t){const i=this.safeTimestamp(e,2),s=this.safeFloat(e,5),a=this.safeFloat(e,6),r=this.safeString(e,1);let o=void 0;if(void 0!==r)if(r in this.markets_by_id)t=this.markets_by_id[r];else{const t=this.safeString(e,3),[i,s]=t.split("_");o=this.safeCurrencyCode(i)+"/"+this.safeCurrencyCode(s)}void 0===o&&void 0!==t&&(o=t.symbol);let n=void 0;void 0!==a&&void 0!==s&&(n=this.costToPrecision(o,s*a));const c="ask"===this.safeString(e,4)?"sell":"buy";return{id:void 0,timestamp:i,datetime:this.iso8601(i),symbol:o,order:void 0,type:"limit",side:c,takerOrMaker:void 0,price:s,amount:a,cost:parseFloat(n),fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={marketId:a.id};void 0!==i&&(r.dataSize=i);const o=await this.publicGetApiDataV1Trades(this.extend(r,s)),n=this.safeValue(o,"datas",[]);return this.parseTrades(n,a,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,3),this.safeFloat(e,4),this.safeFloat(e,5),this.safeFloat(e,6),this.safeFloat(e,7),this.safeFloat(e,8)]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={marketId:r.id,type:this.timeframes[t],dataSize:500};void 0!==s&&(o.dataSize=s);const n=await this.publicGetApiDataV1Klines(this.extend(o,a)),c=this.safeValue(n,"datas",[]);return this.parseOHLCVs(c,r,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostExchangeFundControllerWebsiteFundcontrollerFindbypage(e),i=this.safeValue(t,"datas",{}),s=this.safeValue(i,"list",[]),a={info:t};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"currencyTypeId"),r=this.safeCurrencyCode(i),o=this.account();o.free=this.safeFloat(t,"amount"),o.used=this.safeFloat(t,"freeze"),a[r]=o}return this.parseBalance(a)}async createOrder(e,t,i,s,a,r={}){if(void 0===a)throw new n(this.id+" allows limit orders only");await this.loadMarkets();const o=this.market(e),c={amount:this.amountToPrecision(e,s),price:this.priceToPrecision(e,a),type:"buy"===i?1:0,rangeType:0,marketId:o.id},d=await this.privatePostExchangeEntrustControllerWebsiteEntrustControllerAddEntrust(this.extend(c,r)),h=this.safeValue(d,"datas");return{id:this.safeString(h,"entrustId"),info:d,timestamp:void 0,datetime:void 0,lastTradeTimestamp:void 0,symbol:e,type:t,side:i,price:a,amount:s,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:"open",fee:void 0,trades:void 0,clientOrderId:void 0}}parseOrderStatus(e){return this.safeString({"-3":"canceled","-2":"canceled","-1":"canceled",0:"open",1:"canceled",2:"closed",3:"open",4:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"marketId"),s=this.safeSymbol(i,t),a=this.safeInteger(e,"createTime");let r=this.safeString(e,"type");"0"===r?r="sell":"1"===r&&(r="buy");const o=this.safeFloat(e,"amount"),n=this.safeFloat(e,"price"),c=this.safeFloat(e,"completeAmount");let d=this.safeFloat2(e,"availabelAmount","availableAmount"),h=this.safeFloat(e,"totalMoney");void 0!==c&&(void 0!==o&&void 0===d&&(d=o-c),void 0===h&&void 0!==n&&(h*=c));const l=this.parseOrderStatus(this.safeString(e,"status"));return{info:e,id:this.safeString(e,"entrustId"),clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:s,type:"limit",timeInForce:void 0,side:r,price:n,stopPrice:void 0,amount:o,cost:h,average:void 0,filled:c,remaining:d,status:l,fee:void 0,trades:void 0}}async fetchOrder(e,t,i={}){if(void 0===t)throw new d(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a={marketId:s.id,entrustId:e},r=await this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetEntrustById(this.extend(a,i)),o=this.safeValue(r,"datas",{});return this.parseOrder(o,s)}async cancelOrder(e,t,i={}){if(void 0===t)throw new d(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s={marketId:this.market(t).id,entrustId:e};return{info:await this.privatePostExchangeEntrustControllerWebsiteEntrustControllerCancelEntrust(this.extend(s,i)),id:e}}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const a=this.market(e),r={marketId:a.id};void 0!==i&&(r.pageSize=i);const o=await this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustRecordFromCacheWithPage(this.extend(r,s)),n=this.safeValue(o,"datas",{}),c=this.safeValue(n,"entrustList",[]);return this.parseOrders(c,a,t,i)}async fetchClosedOrders(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchClosedOrders() requires a symbol argument");await this.loadMarkets();const a=this.market(e),r={marketId:a.id};void 0!==i&&(r.pageSize=i),void 0!==t&&(r.startDateTime=t);const o=await this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustList(this.extend(r,s)),n=this.safeValue(o,"datas",{}),c=this.safeValue(n,"entrustList",[]);return this.parseOrders(c,a,t,i)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const a=this.market(e),r={marketId:a.id};void 0!==t&&(r.startDateTime=t),void 0!==i&&(r.pageSize=i);const o=await this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustList(this.extend(r,s)),n=this.safeValue(o,"datas",{}),c=this.safeValue(n,"entrustList",[]);return this.parseOrders(c,a,t,i)}sign(e,t="public",i="GET",s={},a,r){let o=this.implodeParams(this.urls.api,{hostname:this.hostname})+"/"+e;if("GET"===i?Object.keys(s).length&&(o+="?"+this.urlencode(s)):r=this.json(s),"private"===t){const e=this.milliseconds().toString();let t="";if("GET"===i){const e=this.keysort(s),i=Object.keys(e);for(let s=0;s<i.length;s++){const a=i[s];t+=a+e[a].toString()}}else t=r;const o=this.apiKey+e+t+this.secret,n=this.hash(this.encode(o),"md5");a||(a={}),a.Apiid=this.apiKey,a.Timestamp=e,a.Sign=n}return{url:o,method:i,body:r,headers:a}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currencyTypeName:this.currency(e).name},s=await this.privatePostExchangeFundControllerWebsiteFundcontrollerGetPayinAddress(this.extend(i,t)),a=this.safeValue(s,"datas",{}),r=this.safeString(a,"address"),o=this.safeString(a,"memo");return this.checkAddress(r),{currency:e,address:this.checkAddress(r),tag:o,info:s}}parseTransactionStatus(e){return this.safeString({"-1":"canceled",0:"pending",1:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"depositId","withdrawalId"),s=this.safeString2(e,"depositAddress","withdrawalAddress"),a=this.safeString2(e,"currencyId","currencyTypeId");let r=void 0;a in this.currencies_by_id&&(t=this.currencies_by_id[a]),void 0===r&&void 0!==t&&(r=t.code);const o="depositId"in e?"deposit":"withdrawal",n=this.safeFloat2(e,"actuallyAmount","amount"),c=this.parseTransactionStatus(this.safeString2(e,"verifyStatus","state")),d=this.safeInteger(e,"createTime"),h=this.safeString(e,"txId");let l=void 0;const u=this.safeFloat(e,"fees");return void 0!==u&&(l={cost:u,currency:r}),{info:e,id:i,txid:h,timestamp:d,datetime:this.iso8601(d),addressFrom:void 0,address:s,addressTo:void 0,tagFrom:void 0,tag:void 0,tagTo:void 0,type:o,amount:n,currency:r,status:c,updated:void 0,fee:l}}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchDeposits() requires a currency code argument");await this.loadMarkets();const a={currencyTypeName:this.currency(e).name};void 0!==i&&(a.pageSize=i);const r=await this.privatePostExchangeFundControllerWebsiteFundcontrollerGetPayinCoinRecord(this.extend(a,s)),o=this.safeValue(r,"datas",{}),n=this.safeValue(o,"list",[]);return this.parseTransactions(n,e,t,i)}async fetchWithdrawals(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchWithdrawals() requires a currency code argument");await this.loadMarkets();const a={currencyId:this.currency(e).id};void 0!==i&&(a.pageSize=i);const r=await this.privateGetExchangeFundControllerWebsiteFundwebsitecontrollerGetpayoutcoinrecord(this.extend(a,s)),o=this.safeValue(r,"datas",{}),n=this.safeValue(o,"list",[]);return this.parseTransactions(n,e,t,i)}handleErrors(e,t,i,s,a,r,o,c,d){if(!o)return;const h=this.safeValue(o,"resMsg"),l=this.safeString(h,"code");if("1"!==l){const e=this.id+" "+this.json(o);throw this.throwExactlyMatchedException(this.exceptions.exact,l,e),new n(e)}}}},function(e,t,i){"use strict";const s=i(1),{TICK_SIZE:a}=i(2),{AuthenticationError:r,ExchangeError:o,ArgumentsRequired:n,PermissionDenied:c,InvalidOrder:d,OrderNotFound:h,InsufficientFunds:l,BadRequest:u,RateLimitExceeded:p,InvalidNonce:f}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bybit",name:"Bybit",countries:["VG"],version:"v2",userAgent:void 0,rateLimit:100,has:{cancelOrder:!0,CORS:!0,cancelAllOrders:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0},timeframes:{"1m":"1","3m":"3","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","6h":"360","12h":"720","1d":"D","1w":"W","1M":"M","1y":"Y"},urls:{test:"https://api-testnet.bybit.com",logo:"https://user-images.githubusercontent.com/51840849/76547799-daff5b80-649e-11ea-87fb-3be9bac08954.jpg",api:"https://api.bybit.com",www:"https://www.bybit.com",doc:["https://bybit-exchange.github.io/docs/inverse/","https://bybit-exchange.github.io/docs/linear/","https://github.com/bybit-exchange"],fees:"https://help.bybit.com/hc/en-us/articles/360039261154",referral:"https://www.bybit.com/app/register?ref=X7Prm"},api:{public:{get:["orderBook/L2","kline/list","tickers","trading-records","symbols","liq-records","mark-price-kline","open-interest","big-deal","account-ratio","time","announcement"]},private:{get:["order/list","order","stop-order/list","stop-order","position/list","wallet/balance","execution/list","trade/closed-pnl/list","account/lcp","exchange-order/list"],post:["order/create","order/cancel","order/cancelAll","order/replace","stop-order/create","stop-order/cancel","stop-order/cancelAll","stop-order/replace"]},openapi:{get:["order/list","stop-order/list","wallet/risk-limit/list","funding/prev-funding-rate","funding/prev-funding","funding/predicted-funding","api-key","wallet/fund/records","wallet/withdraw/list"],post:["order/replace","stop-order/create","stop-order/cancel","stop-order/replace","position/trading-stop","wallet/risk-limit"]},publicLinear:{get:["kline","recent-trading-records","funding/prev-funding-rate","mark-price-kline","risk-limit"]},privateLinear:{get:["order/list","order/search","stop-order/list","stop-order/search","position/list","trade/execution/list","trade/closed-pnl/list","funding/prev-funding","funding/predicted-funding"],post:["order/create","order/cancel","order/cancel-all","order/replace","stop-order/create","stop-order/cancel","stop-order/cancel-all","stop-order/replace","position/switch-isolated","position/set-auto-add-margin","tpsl/switch-mode","position/set-leverage","position/trading-stop","position/add-margin"]},position:{post:["change-position-margin"]},user:{get:["leverage"],post:["leverage/save"]}},httpExceptions:{403:p},exceptions:{exact:{10001:u,10002:f,10003:r,10004:r,10005:c,10006:p,10007:r,10010:c,10017:u,20001:h,20003:d,20004:d,20005:d,20006:d,20007:d,20008:d,20009:d,20010:d,20011:d,20012:d,20013:d,20014:d,20015:d,20016:d,20017:d,20018:d,20019:d,20020:d,20021:d,20022:u,20023:u,20031:u,20070:u,20071:u,20084:u,30001:u,30003:d,30004:d,30005:d,30007:d,30008:d,30009:o,30010:l,30011:c,30012:c,30013:c,30014:d,30015:d,30016:o,30017:d,30018:d,30019:d,30020:d,30021:d,30022:d,30023:d,30024:d,30025:d,30026:d,30027:d,30028:d,30029:d,30030:d,30031:l,30032:d,30033:p,30034:h,30035:p,30036:o,30037:d,30041:o,30042:l,30043:c,30044:c,30045:c,30049:l,30050:o,30051:o,30052:o,30054:o,30057:o,30063:o,30067:l,30068:o,34026:o},broad:{"unknown orderInfo":h,"invalid api_key":r}},precisionMode:a,options:{marketTypes:{"BTC/USDT":"linear","ETH/USDT":"linear","LTC/USDT":"linear","XTZ/USDT":"linear","LINK/USDT":"linear"},code:"BTC",cancelAllOrders:{method:"privatePostOrderCancelAll"},recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1},fees:{trading:{tierBased:!1,percentage:!0,taker:75e-5,maker:-25e-5},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}}})}nonce(){return this.milliseconds()-this.options.timeDifference}async loadTimeDifference(e={}){const t=await this.fetchTime(e),i=this.milliseconds();return this.options.timeDifference=i-t,this.options.timeDifference}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.safeTimestamp(t,"time_now")}async fetchMarkets(e={}){this.options.adjustForTimeDifference&&await this.loadTimeDifference();const t=await this.publicGetSymbols(e),i=this.safeValue(t,"result",[]),s=this.safeValue(this.options,"fetchMarkets",{}),a=this.safeValue(s,"linear",{USDT:!0}),r=[];for(let e=0;e<i.length;e++){const t=i[e],s=this.safeString2(t,"name","symbol"),o=this.safeString(t,"base_currency"),n=this.safeString(t,"quote_currency"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=d in a,l=!h;let u=c+"/"+d;c+d!==s&&(u=s);const p=this.safeValue(t,"lot_size_filter",{}),f=this.safeValue(t,"price_filter",{}),m={amount:this.safeFloat(p,"qty_step"),price:this.safeFloat(f,"tick_size")},v=this.safeString(t,"status");let y=void 0;void 0!==v&&(y="Trading"===v),r.push({id:s,symbol:u,base:c,quote:d,active:y,precision:m,taker:this.safeFloat(t,"taker_fee"),maker:this.safeFloat(t,"maker_fee"),type:"future",spot:!1,future:!0,option:!1,linear:h,inverse:l,limits:{amount:{min:this.safeFloat(p,"min_trading_qty"),max:this.safeFloat(p,"max_trading_qty")},price:{min:this.safeFloat(f,"min_price"),max:this.safeFloat(f,"max_price")},cost:{min:void 0,max:void 0}},info:t})}return r}async fetchBalance(e={}){await this.loadMarkets();const t={},i=this.safeString(e,"coin"),s=this.safeString(e,"code");if(void 0!==i)t.coin=i;else if(void 0!==s){const e=this.currency(s);t.coin=e.id}const a=await this.privateGetWalletBalance(this.extend(t,e)),r={info:a},o=this.safeValue(a,"result",{}),n=Object.keys(o);for(let e=0;e<n.length;e++){const t=n[e],i=o[t],s=this.safeCurrencyCode(t),a=this.account();a.free=this.safeFloat(i,"available_balance"),a.used=this.safeFloat(i,"used_margin"),a.total=this.safeFloat(i,"equity"),r[s]=a}return this.parseBalance(r)}parseTicker(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t),a=this.safeFloat(e,"last_price"),r=this.safeFloat(e,"prev_price_24h");let o=this.safeFloat(e,"price_24h_pcnt");void 0!==o&&(o*=100);let n=void 0,c=void 0;void 0!==a&&void 0!==r&&(n=a-r,c=this.sum(r,a)/2);const d=this.safeFloat(e,"turnover_24h"),h=this.safeFloat(e,"volume_24h"),l=this.vwap(d,h);return{symbol:s,timestamp:void 0,datetime:this.iso8601(void 0),high:this.safeFloat(e,"high_price_24h"),low:this.safeFloat(e,"low_price_24h"),bid:this.safeFloat(e,"bid_price"),bidVolume:void 0,ask:this.safeFloat(e,"ask_price"),askVolume:void 0,vwap:l,open:r,close:a,last:a,previousClose:void 0,change:n,percentage:o,average:c,baseVolume:d,quoteVolume:h,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.publicGetTickers(this.extend(s,t)),r=this.safeValue(a,"result",[]),o=this.safeValue(r,0),n=this.safeTimestamp(a,"time_now"),c=this.parseTicker(o,i);return c.timestamp=n,c.datetime=this.iso8601(n),c}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s=this.safeValue(i,"result",[]),a={};for(let e=0;e<s.length;e++){const t=this.parseTicker(s[e]);a[t.symbol]=t}return this.filterByArray(a,"symbol",e)}parseOHLCV(e,t){return[this.safeTimestamp2(e,"open_time","start_at"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat2(e,"turnover","volume")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={symbol:r.id,interval:this.timeframes[t]},c=this.parseTimeframe(t),d=this.seconds();if(void 0===i){if(void 0===s)throw new n(this.id+" fetchOHLCV requires a since argument or a limit argument");o.from=d-s*c}else o.from=parseInt(i/1e3);void 0!==s&&(o.limit=s);const h=this.safeValue(this.options,"marketTypes",{}),l="linear"===this.safeString(h,e)?"publicLinearGetKline":"publicGetKlineList",u=await this[l](this.extend(o,a)),p=this.safeValue(u,"result",{});return this.parseOHLCVs(p,r,t,i,s)}parseTrade(e,t){const i=this.safeString2(e,"id","exec_id"),s=this.safeString(e,"symbol"),a=(t=this.safeMarket(s,t)).symbol,r=this.safeFloat2(e,"qty","exec_qty");let o=this.safeFloat(e,"exec_value");const n=this.safeFloat2(e,"exec_price","price");void 0===o&&void 0!==r&&void 0!==n&&(o=r*n);let c=this.parse8601(this.safeString(e,"time"));void 0===c&&(c=this.safeInteger(e,"trade_time_ms"));const d=this.safeStringLower(e,"side"),h="AddedLiquidity"===this.safeString(e,"last_liquidity_ind")?"maker":"taker",l=this.safeFloat(e,"exec_fee");let u=void 0;if(void 0!==l){u={cost:l,currency:t.inverse?t.base:t.quote,rate:this.safeFloat(e,"fee_rate")}}return{id:i,info:e,timestamp:c,datetime:this.iso8601(c),symbol:a,order:this.safeString(e,"order_id"),type:this.safeStringLower(e,"order_type"),side:d,takerOrMaker:h,price:n,amount:r,cost:o,fee:u}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id};void 0!==i&&(r.count=i);const o=this.safeValue(this.options,"marketTypes",{}),n="linear"===this.safeString(o,e)?"publicLinearGetRecentTradingRecords":"publicGetTradingRecords",c=await this[n](this.extend(r,s)),d=this.safeValue(c,"result",{});return this.parseTrades(d,a,t,i)}parseOrderBook(e,t,i="Buy",s="Sell",a="price",r="size"){const n=[],c=[];for(let t=0;t<e.length;t++){const i=e[t],s=this.safeString(i,"side");if("Buy"===s)n.push(this.parseBidAsk(i,a,r));else{if("Sell"!==s)throw new o(this.id+" parseOrderBook encountered an unrecognized bidask format: "+this.json(i));c.push(this.parseBidAsk(i,a,r))}}return{bids:this.sortBy(n,0,!0),asks:this.sortBy(c,0),timestamp:t,datetime:this.iso8601(t),nonce:void 0}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id},a=await this.publicGetOrderBookL2(this.extend(s,i)),r=this.safeValue(a,"result",[]),o=this.safeTimestamp(a,"time_now");return this.parseOrderBook(r,o,"Buy","Sell","price","size")}parseOrderStatus(e){return this.safeString({Created:"open",Rejected:"rejected",New:"open",PartiallyFilled:"open",Filled:"closed",Cancelled:"canceled",PendingCancel:"canceling",Active:"open",Untriggered:"open",Triggered:"closed",Deactivated:"canceled"},e,e)}parseTimeInForce(e){return this.safeString({GoodTillCancel:"GTC",ImmediateOrCancel:"IOC",FillOrKill:"FOK",PostOnly:"PO"},e,e)}parseOrder(e,t){const i=this.safeString(e,"symbol");t=this.safeMarket(i,t);let s=void 0,a=void 0;const r=this.parse8601(this.safeString(e,"created_at")),o=this.safeString2(e,"order_id","stop_order_id"),n=this.safeStringLower(e,"order_type");let c=this.safeFloat(e,"price");0===c&&(c=void 0);let d=this.safeFloat(e,"average_price");const h=this.safeFloat(e,"qty");let l=this.safeFloat(e,"cum_exec_value"),u=this.safeFloat(e,"cum_exec_qty"),p=this.safeFloat(e,"leaves_qty");void 0!==t&&(s=t.symbol,a=t.base);let f=this.safeTimestamp(e,"last_exec_time");0===f&&(f=void 0),void 0===u&&void 0!==h&&void 0!==p&&(u=h-p),void 0!==u&&(void 0===p&&void 0!==h&&(p=h-u),void 0===l&&void 0!==c&&(l=c*u),"market"===n&&void 0!==l&&l>0&&(c=void 0,void 0===d&&(d=u/l)));const m=this.parseOrderStatus(this.safeString2(e,"order_status","stop_order_status")),v=this.safeStringLower(e,"side");let y=this.safeFloat(e,"cum_exec_fee"),g=void 0;void 0!==y&&(y=Math.abs(y),g={cost:y,currency:a});let b=this.safeString(e,"order_link_id");void 0!==b&&b.length<1&&(b=void 0);const w=this.parseTimeInForce(this.safeString(e,"time_in_force")),k=this.safeFloat(e,"stop_px");return{info:e,id:o,clientOrderId:b,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:f,symbol:s,type:n,timeInForce:w,side:v,price:c,stopPrice:k,amount:h,cost:l,average:d,filled:u,remaining:p,status:m,fee:g,trades:void 0}}async fetchOrder(e,t,i={}){if(void 0===t)throw new n(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a={symbol:s.id},r=this.safeValue(this.options,"marketTypes",{}),o=this.safeString(r,t);let c="linear"===o?"privateLinearGetOrderSearch":"privateGetOrder";if(void 0===this.safeString(i,"stop_order_id")){void 0===this.safeString(i,"order_link_id")&&(a.order_id=e)}else c="linear"===o?"privateLinearGetStopOrderSearch":"privateGetStopOrder";const d=await this[c](this.extend(a,i)),h=this.safeValue(d,"result");return this.parseOrder(h,s)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e);let c=this.amountToPrecision(e,s);c=o.inverse?parseInt(c):parseFloat(c);const d={side:this.capitalize(i),symbol:o.id,order_type:this.capitalize(t),qty:c,time_in_force:"GoodTillCancel"};let h=!1;if("limit"===t&&(h=!0),h){if(void 0===a)throw new n(this.id+" createOrder requires a price argument for a "+t+" order");d.price=parseFloat(this.priceToPrecision(e,a))}const l=this.safeString2(r,"order_link_id","clientOrderId");void 0!==l&&(d.order_link_id=l,r=this.omit(r,["order_link_id","clientOrderId"]));const u=this.safeValue2(r,"stop_px","stopPrice"),p=this.safeValue(r,"base_price"),f=this.safeValue(this.options,"marketTypes",{}),m=this.safeString(f,e);let v="linear"===m?"privateLinearPostOrderCreate":"privatePostOrderCreate";if("linear"===m&&(v="privateLinearPostOrderCreate",d.reduce_only=!1,d.close_on_trigger=!1),void 0!==u){if(void 0===p)throw new n(this.id+" createOrder requires both the stop_px and base_price params for a conditional "+t+" order");v="linear"===m?"privateLinearPostStopOrderCreate":"openapiPostStopOrderCreate",d.stop_px=parseFloat(this.priceToPrecision(e,u)),d.base_price=parseFloat(this.priceToPrecision(e,p)),r=this.omit(r,["stop_px","stopPrice","base_price"])}else if(void 0!==p)throw new n(this.id+" createOrder requires both the stop_px and base_price params for a conditional "+t+" order");const y=await this[v](this.extend(d,r)),g=this.safeValue(y,"result");return this.parseOrder(g,o)}async editOrder(e,t,i,s,a,r,o={}){if(void 0===t)throw new n(this.id+" editOrder requires an symbol argument");const c=this.safeValue(this.options,"marketTypes",{}),d=this.safeString(c,t);await this.loadMarkets();const h={symbol:this.market(t).id};let l="linear"===d?"privateLinearPostOrderReplace":"openapiPostOrderReplace";const u=this.safeString(o,"stop_order_id");void 0!==u?(l="linear"===d?"privateLinearPostStopOrderReplace":"openapiPostStopOrderReplace",h.stop_order_id=u,o=this.omit(o,["stop_order_id"])):h.order_id=e,void 0!==a&&(h.p_r_qty=parseInt(this.amountToPrecision(t,a))),void 0!==r&&(h.p_r_price=parseFloat(this.priceToPrecision(t,r)));const p=await this[l](this.extend(h,o)),f=this.safeValue(p,"result",{});return{info:p,id:this.safeString2(f,"order_id","stop_order_id"),order_id:this.safeString(f,"order_id"),stop_order_id:this.safeString(f,"stop_order_id")}}async cancelOrder(e,t,i={}){if(void 0===t)throw new n(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a={symbol:s.id},r=this.safeValue(this.options,"marketTypes",{}),o=this.safeValue(r,t);let c="linear"===o?"privateLinearPostOrderCancel":"privatePostOrderCancel";if(void 0===this.safeString(i,"stop_order_id")){void 0===this.safeString(i,"order_link_id")&&(a.order_id=e)}else c="linear"===o?"privateLinearPostStopOrderCancel":"openapiPostStopOrderCancel";const d=await this[c](this.extend(a,i)),h=this.safeValue(d,"result",{});return this.parseOrder(h,s)}async cancelAllOrders(e,t={}){if(void 0===e)throw new n(this.id+" cancelAllOrders requires a symbol argument");await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=this.safeValue(this.options,"cancelAllOrders"),r=this.safeValue(this.options,"marketTypes",{}),o="linear"===this.safeString(r,e)?"privateLinearPostOrderCancelAll":"privatePostOrderCancelAll",c=this.safeString(a,"method",o),d=await this[c](this.extend(s,t)),h=this.safeValue(d,"result",[]);return this.parseOrders(h,i)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==i&&(a.limit=i);const o=this.safeValue(this.options,"fetchOrders",{}),n=this.safeValue(this.options,"marketTypes",{}),c=this.safeString(n,e);let d="linear"===c?"privateLinearGetOrderList":"openapiGetOrderList",h=s;if("stop_order_id"in s||"stop_order_status"in s){let e=this.safeValue(s,"stopOrderStatus");void 0!==e&&(Array.isArray(e)&&(e=e.join(",")),a.stop_order_status=e,h=this.omit(s,"stop_order_status")),d="linear"===c?"privateLinearGetStopOrderList":"openapiGetStopOrderList"}const l=this.safeString(o,"method",d),u=await this[l](this.extend(a,h)),p=this.safeValue(u,"result",{}),f=this.safeValue(p,"data",[]);return this.parseOrders(f,r,t,i)}async fetchClosedOrders(e,t,i,s={}){const a=this.safeValue(this.options,"fetchClosedOrders",{});let r=this.safeValue(a,"order_status",["Rejected","Filled","Cancelled"]);Array.isArray(r)&&(r=r.join(","));const o={},n=this.safeValue(s,"stop_order_status");return void 0===n?o.order_status=r:o.stop_order_status=n,await this.fetchOrders(e,t,i,this.extend(o,s))}async fetchOpenOrders(e,t,i,s={}){const a=this.safeValue(this.options,"fetchOpenOrders",{});let r=this.safeValue(a,"order_status",["Created","New","PartiallyFilled","PendingCancel"]);Array.isArray(r)&&(r=r.join(","));const o={},n=this.safeValue(s,"stop_order_status");return void 0===n?o.order_status=r:o.stop_order_status=n,await this.fetchOrders(e,t,i,this.extend(o,s))}async fetchOrderTrades(e,t,i,s,a={}){const r={order_id:e};return await this.fetchMyTrades(t,i,s,this.extend(r,a))}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;if(void 0===e){const e=this.safeString(s,"order_id");if(void 0===e)throw new n(this.id+" fetchMyTrades requires a symbol argument or an order_id param");a.order_id=e,s=this.omit(s,"order_id")}else r=this.market(e),a.symbol=r.id;void 0!==t&&(a.start_time=t),void 0!==i&&(a.limit=i);const o=this.safeValue(this.options,"marketTypes",{}),c="linear"===this.safeString(o,e)?"privateLinearGetTradeExecutionList":"privateGetExecutionList",d=await this[c](this.extend(a,s)),h=this.safeValue(d,"result",{}),l=this.safeValue2(h,"trade_list","data",[]);return this.parseTrades(l,r,t,i)}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchWithdrawals() requires a currency code argument");await this.loadMarkets();const a=this.currency(e),r={currency:a.id};void 0!==i&&(r.count=i);const o=await this.privateGetGetDeposits(this.extend(r,s)),c=this.safeValue(o,"result",{}),d=this.safeValue(c,"data",[]);return this.parseTransactions(d,a,t,i,s)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.coin=r.id),void 0!==t&&(a.start_date=this.iso8601(t)),void 0!==i&&(a.limit=i);const o=await this.openapiGetWalletWithdrawList(this.extend(a,s)),n=this.safeValue(o,"result",{}),c=this.safeValue(n,"data",[]);return this.parseTransactions(c,r,t,i,s)}parseTransactionStatus(e){return this.safeString({ToBeConfirmed:"pending",UnderReview:"pending",Pending:"pending",Success:"ok",CancelByUser:"canceled",Reject:"rejected",Expire:"expired"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"coin"),s=this.safeCurrencyCode(i,t),a=this.parse8601(this.safeString(e,"submited_at")),r=this.parse8601(this.safeString(e,"updated_at")),o=this.parseTransactionStatus(this.safeString(e,"status")),n=this.safeString(e,"address"),c=this.safeFloat(e,"fee");let d=void 0;return void 0!==c&&(d={cost:c,currency:s}),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"tx_id"),timestamp:a,datetime:this.iso8601(a),address:n,addressTo:void 0,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,type:"withdrawal",amount:this.safeFloat(e,"amount"),currency:s,status:o,updated:r,fee:d}}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.coin=r.id),void 0!==t&&(a.start_date=this.iso8601(t)),void 0!==i&&(a.limit=i);const o=await this.openapiGetWalletFundRecords(this.extend(a,s)),n=this.safeValue(o,"result",{}),c=this.safeValue(n,"data",[]);return this.parseLedger(c,r,t,i)}parseLedgerEntry(e,t){const i=this.safeString(e,"coin"),s=this.safeCurrencyCode(i,t),a=this.safeFloat(e,"amount"),r=this.safeFloat(e,"wallet_balance"),o=a<0?"out":"in";let n=void 0;if(void 0!==r&&void 0!==a){const e="out"===o?a:-a;n=this.sum(r,e)}const c=this.parse8601(this.safeString(e,"exec_time")),d=this.parseLedgerEntryType(this.safeString(e,"type")),h=this.safeString(e,"id"),l=this.safeString(e,"tx_id");return{id:h,currency:s,account:this.safeString(e,"wallet_id"),referenceAccount:void 0,referenceId:l,status:void 0,amount:a,before:n,after:r,fee:void 0,direction:o,timestamp:c,datetime:this.iso8601(c),type:d,info:e}}parseLedgerEntryType(e){return this.safeString({Deposit:"transaction",Withdraw:"transaction",RealisedPNL:"trade",Commission:"fee",Refund:"cashback",Prize:"prize",ExchangeOrderWithdraw:"transaction",ExchangeOrderDeposit:"transaction"},e,e)}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api,n=e;if("public"===t)n="/"+this.version+"/"+t+"/"+n,Object.keys(s).length&&(n+="?"+this.rawencode(s));else if("publicLinear"===t)n="/public/linear/"+n,Object.keys(s).length&&(n+="?"+this.rawencode(s));else{this.checkRequiredCredentials(),n="openapi"===t?"/open-api/"+n:"private"===t?"/"+this.version+"/"+t+"/"+n:"privateLinear"===t?"/private/linear/"+n:"/"+t+"/"+n;const o=this.nonce(),c=this.extend(s,{api_key:this.apiKey,recv_window:this.options.recvWindow,timestamp:o});let d=this.rawencode(this.keysort(c));e.indexOf("stop-order")>=0&&(d=d.replace(".0&","&"));const h=this.hmac(this.encode(d),this.encode(this.secret));"POST"===i?(r=this.json(this.extend(c,{sign:h})),a={"Content-Type":"application/json"}):n+="?"+d+"&sign="+h}return o+=n,{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,r,n,c,d){if(!n)return;const h=this.safeValue(n,"ret_code");if(0!==h){const e=this.id+" "+r;throw this.throwExactlyMatchedException(this.exceptions.exact,h,e),this.throwBroadlyMatchedException(this.exceptions.broad,r,e),new o(e)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,BadRequest:o,AuthenticationError:n,DDoSProtection:c,BadResponse:d}=i(0),{TRUNCATE:h,NO_PADDING:l,DECIMAL_PLACES:u}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bytetrade",name:"ByteTrade",countries:["HK"],rateLimit:500,requiresWeb3:!0,certified:!0,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchBidsAsks:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d","5d":"5d","1w":"1w","1M":"1M"},urls:{test:{market:"https://api-v2-test.byte-trade.com",public:"https://api-v2-test.byte-trade.com"},logo:"https://user-images.githubusercontent.com/1294454/67288762-2f04a600-f4e6-11e9-9fd6-c60641919491.jpg",api:{market:"https://api-v2.byte-trade.com",public:"https://api-v2.byte-trade.com"},www:"https://www.byte-trade.com",doc:"https://docs.byte-trade.com/#description"},api:{market:{get:["klines","depth","trades","tickers"]},public:{get:["symbols","currencies","balance","orders/open","orders/closed","orders/all","orders","orders/trades","depositaddress","withdrawals","deposits","transfers"],post:["transaction/createorder","transaction/cancelorder","transaction/withdraw","transaction/transfer"]}},fees:{trading:{taker:8e-4,maker:8e-4}},commonCurrencies:{1:"ByteTrade",44:"ByteHub",48:"Blocktonic",133:"TerraCredit"},exceptions:{"vertify error":n,"verify error":n,"transaction already in network":o,"invalid argument":o}})}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"code");let r=void 0;r=a in this.commonCurrencies?this.commonCurrencies[a]:this.safeString(s,"name");const o=this.safeString(s,"fullname"),n=this.safeValue(s,"active"),c=this.safeValue(s,"limits"),d=this.safeValue(c,"deposit"),h=this.safeInteger(s,"basePrecision");let l=this.safeFloat(d,"max");-1===l&&(l=void 0);const u=this.safeValue(c,"withdraw");let p=this.safeFloat(u,"max");-1===p&&(p=void 0),i[r]={id:a,code:r,name:o,active:n,precision:h,fee:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(d,"min"),max:l},withdraw:{min:this.safeFloat(u,"min"),max:p}},info:s}}return i}async fetchMarkets(e={}){const t=await this.publicGetSymbols(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"symbol");let r=this.safeString(s,"baseName"),o=this.safeString(s,"quoteName");const n=this.safeString(s,"base"),c=this.safeString(s,"quote"),d=r.split("@"+n)[0];let h=o.split("@"+c)[0];"126"===c&&(h="ZAR");const l=d+"/"+h;n in this.commonCurrencies&&(r=this.commonCurrencies[n]),c in this.commonCurrencies&&(o=this.commonCurrencies[c]);const u=r+"/"+o,p=this.safeValue(s,"limits",{}),f=this.safeValue(p,"amount",{}),m=this.safeValue(p,"price",{}),v=this.safeValue(s,"precision",{}),y={id:a,symbol:u,base:r,quote:o,baseId:n,quoteId:c,info:s,active:this.safeString(s,"active"),precision:{amount:this.safeInteger(v,"amount"),price:this.safeInteger(v,"price")},normalSymbol:l,limits:{amount:{min:this.safeFloat(f,"min"),max:this.safeFloat(f,"max")},price:{min:this.safeFloat(m,"min"),max:this.safeFloat(m,"max")},cost:{min:void 0,max:void 0}}};i.push(y)}return i}async fetchBalance(e={}){if(!("userid"in e)&&void 0===this.apiKey)throw new r(this.id+" fetchDeposits requires this.apiKey or userid argument");await this.loadMarkets();const t={userid:this.apiKey},i=await this.publicGetBalance(this.extend(t,e)),s={info:i};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"code"),r=this.safeCurrencyCode(a,void 0),o=this.account();o.free=this.safeFloat(t,"free"),o.used=this.safeFloat(t,"used"),s[r]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id};void 0!==t&&(s.limit=t);const a=await this.marketGetDepth(this.extend(s,i)),r=this.safeValue(a,"timestamp");return this.parseOrderBook(a,r)}parseTicker(e,t){const i=this.safeInteger(e,"timestamp");let s=void 0;const a=this.safeString(e,"symbol");if(a in this.markets_by_id)t=this.markets_by_id[a];else{const t=this.safeString(e,"base"),i=this.safeString(e,"quote");if(void 0!==t&&void 0!==i){s=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}}return void 0===s&&void 0!==t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:this.safeFloat(e,"weightedAvgPrice"),open:this.safeFloat(e,"open"),close:this.safeFloat(e,"close"),last:this.safeFloat(e,"last"),previousClose:void 0,change:this.safeFloat(e,"change"),percentage:this.safeFloat(e,"percentage"),average:void 0,baseVolume:this.safeFloat(e,"baseVolume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.marketGetTickers(this.extend(s,t));if(Array.isArray(a)){const e=this.safeValue(a,0);if(void 0===e)throw new d(this.id+" fetchTicker() returned an empty response");return this.parseTicker(e,i)}return this.parseTicker(a,i)}parseTickers(e,t){const i=[];for(let t=0;t<e.length;t++)i.push(this.parseTicker(e[t]));return this.filterByArray(i,"symbol",t)}async fetchBidsAsks(e,t={}){await this.loadMarkets();const i=await this.marketGetDepth(t);return this.parseTickers(i,e)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.marketGetTickers(t);return this.parseTickers(i,e)}parseOHLCV(e,t){return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={symbol:r.id,timeframe:this.timeframes[t]};void 0!==i&&(o.since=i),void 0!==s&&(o.limit=s);const n=await this.marketGetKlines(this.extend(o,a));return this.parseOHLCVs(n,r,t,i,s)}parseTrade(e,t){const i=this.safeInteger(e,"timestamp"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),r=this.safeFloat(e,"cost"),o=this.safeString(e,"id"),n=this.safeString(e,"type"),c=this.safeString(e,"takerOrMaker"),d=this.safeString(e,"side"),h=this.iso8601(i),l=this.safeString(e,"order"),u=this.safeValue(e,"fee");let p=void 0;if(void 0===t){const i=this.safeString(e,"symbol");t=this.safeValue(this.markets_by_id,i)}return void 0!==t&&(p=t.symbol),{info:e,timestamp:i,datetime:h,symbol:p,id:o,order:l,type:n,takerOrMaker:c,side:d,price:s,amount:a,cost:r,fee:u}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id};void 0!==t&&(r.since=t),void 0!==i&&(r.limit=i);const o=await this.marketGetTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseOrder(e,t){const i=this.safeString(e,"status");let s=void 0;const a=this.safeString(e,"symbol");if(a in this.markets_by_id)t=this.markets_by_id[a];else{const t=this.safeString(e,"base"),i=this.safeString(e,"quote");if(void 0!==t&&void 0!==i){s=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}}void 0===s&&void 0!==t&&(s=t.symbol);const r=this.safeInteger(e,"timestamp"),o=this.safeString(e,"datetime"),n=this.safeInteger(e,"lastTradeTimestamp"),c=this.safeFloat(e,"price"),d=this.safeFloat(e,"amount"),h=this.safeFloat(e,"filled"),l=this.safeFloat(e,"remaining"),u=this.safeFloat(e,"cost"),p=this.safeFloat(e,"average");return{info:e,id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:r,datetime:o,lastTradeTimestamp:n,symbol:s,type:this.safeString(e,"type"),timeInForce:void 0,side:this.safeString(e,"side"),price:c,stopPrice:void 0,amount:d,cost:u,average:p,filled:h,remaining:l,status:i,fee:this.safeValue(e,"fee"),trades:void 0}}async createOrder(e,t,i,s,a,o={}){if(this.checkRequiredDependencies(),void 0===this.apiKey)throw new r("createOrder requires this.apiKey or userid in params");await this.loadMarkets();const n=this.market(e);let c=void 0,d=void 0;c="sell"===i?1:2,"limit"===t?d=1:(d=2,a=0);const h=n.normalSymbol,l=n.baseId,u=this.currency(n.base),p=this.amountToPrecision(e,s),f=this.toWei(p,u.precision),m=n.quoteId,v=this.currency(n.quote),y=this.priceToPrecision(e,a),g=this.toWei(y,v.precision),b=this.milliseconds(),w=this.milliseconds();let k=this.iso8601(b);k=k.split(".")[0];let x=this.iso8601(w);x=x.split(".")[0];const T=this.safeString(o,"dappId","Sagittarius"),O=this.safeString(this.options,"fee","300000000000000"),_=this.safeString(o,"totalFeeRate",8),S=this.safeString(o,"chainFeeRate",1),C=this.safeString(o,"fee",O),I=this.integerPow("2","64"),M=[this.numberToBE(1,32),this.numberToLE(Math.floor(b/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(1,1),this.numberToLE(32,1),this.numberToLE(0,8),this.numberToLE(C,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(c,1),this.numberToLE(d,1),this.numberToLE(h.length,1),this.stringToBinary(this.encode(h)),this.numberToLE(this.integerDivide(f,I),8),this.numberToLE(this.integerModulo(f,I),8),this.numberToLE(this.integerDivide(g,I),8),this.numberToLE(this.integerModulo(g,I),8),this.numberToLE(0,2),this.numberToLE(Math.floor(b/1e3),4),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(1,1),this.numberToLE(parseInt(S),2),this.numberToLE(1,1),this.numberToLE(parseInt(_),2),this.numberToLE(parseInt(m),4),this.numberToLE(parseInt(l),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(T.length,1),this.stringToBinary(this.encode(T)),this.numberToLE(0,1)],F=[this.numberToLE(Math.floor(b/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(1,1),this.numberToLE(32,1),this.numberToLE(0,8),this.numberToLE(C,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(c,1),this.numberToLE(d,1),this.numberToLE(h.length,1),this.stringToBinary(this.encode(h)),this.numberToLE(this.integerDivide(f,I),8),this.numberToLE(this.integerModulo(f,I),8),this.numberToLE(this.integerDivide(g,I),8),this.numberToLE(this.integerModulo(g,I),8),this.numberToLE(0,2),this.numberToLE(Math.floor(b/1e3),4),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(1,1),this.numberToLE(parseInt(S),2),this.numberToLE(1,1),this.numberToLE(parseInt(_),2),this.numberToLE(parseInt(m),4),this.numberToLE(parseInt(l),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(T.length,1),this.stringToBinary(this.encode(T)),this.numberToLE(0,1)],E=this.binaryConcatArray(F),A=this.hash(E,"sha256","hex").slice(0,40),B=[this.numberToLE(A.length,1),this.stringToBinary(this.encode(A)),this.numberToBE(0,4)],P=this.binaryConcatArray(B),q=this.hash(P,"sha256","hex").slice(0,40),V=this.binaryConcatArray(M),L=this.hash(V,"sha256","hex"),D=this.ecdsa(L,this.secret,"secp256k1",void 0,!0),R=this.binaryToBase16(this.numberToLE(this.sum(D.v,31),1))+D.r+D.s,G={timestamp:k,expiration:x,operations:[[32,{now:k,expiration:x,fee:C,creator:this.apiKey,side:c,order_type:d,market_name:h,amount:f,price:g,use_btt_as_fee:!1,money_id:parseInt(m),stock_id:parseInt(l),custom_no_btt_fee_rate:parseInt(_),custom_btt_fee_rate:parseInt(S)}]],validate_type:0,dapp:T,signatures:[R]},j={trObj:this.json(G)},N=await this.publicPostTransactionCreateorder(j),H=this.milliseconds(),U="0"===this.safe_string(N,"code")?"open":"failed";return{info:N,id:q,timestamp:H,datetime:this.iso8601(H),lastTradeTimestamp:void 0,status:U,symbol:void 0,type:void 0,side:void 0,price:void 0,amount:void 0,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0}}async fetchOrder(e,t,i={}){if(!("userid"in i)&&void 0===this.apiKey)throw new r("fetchOrder requires this.apiKey or userid argument");await this.loadMarkets();const s={userid:this.apiKey};let a=void 0;void 0!==t&&(a=this.markets[t],s.symbol=a.id),s.id=e;const o=await this.publicGetOrders(this.extend(s,i));return this.parseOrder(o,a)}async fetchOpenOrders(e,t,i,s={}){if(!("userid"in s)&&void 0===this.apiKey)throw new r("fetchOpenOrders requires this.apiKey or userid argument");await this.loadMarkets();const a={userid:this.apiKey};let o=void 0;void 0!==e&&(o=this.market(e),a.symbol=o.id),void 0!==i&&(a.limit=i);const n=await this.publicGetOrdersOpen(this.extend(a,s));return this.parseOrders(n,o,t,i)}async fetchClosedOrders(e,t,i,s={}){if(!("userid"in s)&&void 0===this.apiKey)throw new r("fetchClosedOrders requires this.apiKey or userid argument");await this.loadMarkets();let a=void 0;const o={userid:this.apiKey};void 0!==e&&(a=this.market(e),o.symbol=a.id),void 0!==i&&(o.limit=i);const n=await this.publicGetOrdersClosed(this.extend(o,s));return this.parseOrders(n,a,t,i)}async fetchOrders(e,t,i,s={}){if(!("userid"in s)&&void 0===this.apiKey)throw new r("fetchOrders requires this.apiKey or userid argument");await this.loadMarkets();let a=void 0;const o={userid:this.apiKey};void 0!==e&&(a=this.market(e),o.symbol=a.id),void 0!==i&&(o.limit=i);const n=await this.publicGetOrdersAll(this.extend(o,s));return this.parseOrders(n,a,t,i)}async cancelOrder(e,t,i={}){if(void 0===this.apiKey)throw new r("cancelOrder requires hasAlreadyAuthenticatedSuccessfully");if(void 0===t)throw new r(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a=s.baseId,o=s.quoteId,n=s.normalSymbol,c=this.milliseconds();let d=this.iso8601(c);d=d.split(".")[0];let h=this.iso8601(0);h=h.split(".")[0];const l=this.safeString(i,"dappId","Sagittarius"),u=[this.numberToBE(1,32),this.numberToLE(Math.floor(c/1e3),4),this.numberToLE(1,1),this.numberToLE(0,4),this.numberToLE(1,1),this.numberToLE(33,1),this.numberToLE(0,8),this.numberToLE("300000000000000",8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(n.length,1),this.stringToBinary(this.encode(n)),this.base16ToBinary(e),this.numberToLE(parseInt(o),4),this.numberToLE(parseInt(a),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(l.length,1),this.stringToBinary(this.encode(l)),this.numberToLE(0,1)],p=this.binaryConcatArray(u),f=this.hash(p,"sha256","hex"),m=this.ecdsa(f,this.secret,"secp256k1",void 0,!0),v=this.binaryToBase16(this.numberToLE(this.sum(m.v,31),1))+m.r+m.s,y={timestamp:d,expiration:h,operations:[[33,{fee:"300000000000000",creator:this.apiKey,order_id:e,market_name:n,money_id:parseInt(o),stock_id:parseInt(a)}]],validate_type:0,dapp:l,signatures:[v]},g={trObj:this.json(y)},b=await this.publicPostTransactionCancelorder(g),w=this.milliseconds(),k="0"===this.safe_string(b,"code")?"canceled":"failed";return{info:b,id:void 0,timestamp:w,datetime:this.iso8601(w),lastTradeTimestamp:void 0,status:k,symbol:void 0,type:void 0,side:void 0,price:void 0,amount:void 0,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0}}async transfer(e,t,i,s="",a={}){if(this.checkRequiredDependencies(),void 0===this.apiKey)throw new r("transfer requires this.apiKey");await this.loadMarkets();const o=this.currency(e),n=this.decimalToPrecision(t,h,o.info.basePrecision-o.info.transferPrecision,u,l),c=this.toWei(n,o.precision),d=parseInt(o.id),p=this.milliseconds(),f=p;let m=this.iso8601(p);m=m.split(".")[0];let v=this.iso8601(f);v=v.split(".")[0];const y=this.safeString(a,"dappId","Sagittarius"),g=this.integerPow("2","64"),b=[this.numberToBE(1,32),this.numberToLE(Math.floor(p/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(f/1e3),4),this.numberToLE(1,1),this.numberToLE(28,1),this.numberToLE(0,8),this.numberToLE("300000000000000",8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(i.length,1),this.stringToBinary(this.encode(i)),this.numberToLE(d,4),this.numberToLE(this.integerDivide(c,g),8),this.numberToLE(this.integerModulo(c,g),8),this.numberToLE(1,1),this.numberToLE(s.length,1),this.stringToBinary(this.encode(s)),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(y.length,1),this.stringToBinary(this.encode(y)),this.numberToLE(0,1)],w=this.binaryConcatArray(b),k=this.hash(w,"sha256","hex"),x=this.ecdsa(k,this.secret,"secp256k1",void 0,!0),T=this.binaryToBase16(this.numberToLE(this.sum(x.v,31),1))+x.r+x.s,O={timestamp:m,expiration:v,operations:[[28,{fee:"300000000000000",from:this.apiKey,to:i,asset_type:parseInt(o.id),amount:c.toString(),message:s}]],validate_type:0,dapp:y,signatures:[T]},_={trObj:this.json(O)},S=await this.publicPostTransactionTransfer(_),C=this.milliseconds();let I="";return I="0"===this.safe_string(S,"code")?"submit success":"submit fail",{info:S,id:"",timestamp:C,datetime:this.iso8601(C),lastTradeTimestamp:void 0,status:I,symbol:void 0,type:void 0,side:void 0,price:void 0,amount:void 0,filled:void 0,remaining:void 0,cost:void 0,fee:void 0,clientOrderId:void 0,average:void 0,trades:void 0}}async fetchMyTrades(e,t,i,s={}){if(!("userid"in s)&&void 0===this.apiKey)throw new r("fetchMyTrades requires this.apiKey or userid argument");await this.loadMarkets();const a=this.market(e),o={userid:this.apiKey};void 0!==e&&(o.symbol=a.id),void 0!==i&&(o.limit=i);const n=await this.publicGetOrdersTrades(this.extend(o,s));return this.parseTrades(n,a,t,i)}async fetchDeposits(e,t,i,s={}){if(await this.loadMarkets(),!("userid"in s)&&void 0===this.apiKey)throw new r("fetchDeposits requires this.apiKey or userid argument");let a=void 0;const o={userid:this.apiKey};void 0!==e&&(a=this.currency(e),o.currency=a.id),void 0!==t&&(o.since=t),void 0!==i&&(o.limit=i);const n=await this.publicGetDeposits(this.extend(o,s));return this.parseTransactions(n,a,t,i)}async fetchWithdrawals(e,t,i,s={}){if(await this.loadMarkets(),!("userid"in s)&&void 0===this.apiKey)throw new r("fetchWithdrawals requires this.apiKey or userid argument");let a=void 0;const o={userid:this.apiKey};void 0!==e&&(a=this.currency(e),o.currency=a.id),void 0!==t&&(o.since=t),void 0!==i&&(o.limit=i);const n=await this.publicGetWithdrawals(this.extend(o,s));return this.parseTransactions(n,a,t,i)}parseTransactionStatus(e){return this.safeString({DEPOSIT_FAILED:"failed",FEE_SEND_FAILED:"failed",FEE_FAILED:"failed",PAY_SEND_FAILED:"failed",PAY_FAILED:"failed",BTT_FAILED:"failed",WITHDDRAW_FAILED:"failed",USER_FAILED:"failed",FEE_EXECUED:"pending",PAY_EXECUED:"pending",WITHDDRAW_EXECUTED:"pending",USER_EXECUED:"pending",BTT_SUCCED:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"address");let a=this.safeString(e,"tag");void 0!==a&&a.length<1&&(a=void 0);const r=this.safeValue(e,"txid"),o=this.safeString(e,"code"),n=this.safeCurrencyCode(o,t),c=this.safeInteger(e,"timestamp"),d=this.safeString(e,"datetime"),h=this.safeString(e,"type"),l=this.parseTransactionStatus(this.safeString(e,"status")),u=this.safeFloat(e,"amount"),p=this.safeValue(e,"fee"),f=this.safeFloat(p,"cost"),m=this.safeString(p,"code");return{info:e,id:i,txid:r,timestamp:c,datetime:d,address:s,tag:a,type:h,amount:u,currency:n,status:l,updated:void 0,fee:{cost:f,currency:this.safeCurrencyCode(m,t)}}}async fetchDepositAddress(e,t={}){if(await this.loadMarkets(),!("userid"in t)&&void 0===this.apiKey)throw new r("fetchDepositAddress requires this.apiKey or userid argument");const i=this.currency(e),s={userid:this.apiKey,code:i.id},a=await this.publicGetDepositaddress(s),o=this.safeString(a[0],"address"),n=this.safeString(a[0],"tag"),c=this.safeString(a[0],"chainType");return this.checkAddress(o),{currency:e,address:o,tag:n,chainType:c,info:a}}async withdraw(e,t,i,s,a={}){if(this.checkRequiredDependencies(),this.checkAddress(i),await this.loadMarkets(),void 0===this.apiKey)throw new r("withdraw requires this.apiKey");const o=await this.fetchDepositAddress(e),n=this.safeString(o,"chainType"),c=this.safeString(o.info[0],"chainId");let d="";d="eos"===n?i:this.safeString(o,"address");let p=18;"ethereum"!==n&&"etc"!==n&&"eos"!==n&&"cmt"!==n&&"naka"!==n&&(p=26);const f=this.milliseconds();let m=this.iso8601(f);m=m.split(".")[0];let v=this.iso8601(0);v=v.split(".")[0];const y=this.safeString(a,"dappId","Sagittarius"),g="300000000000000",b=this.currency(e),w=b.id,k=this.decimalToPrecision(t,h,b.info.basePrecision-b.info.transferPrecision,u,l),x=this.toWei(k,b.info.externalPrecision),T=this.integerPow("2","64");let O=0,_=[];26===p?(O=b.info.fee,_=[this.numberToBE(1,32),this.numberToLE(Math.floor(f/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(0),4),this.numberToLE(1,1),this.numberToLE(p,1),this.numberToLE(0,8),this.numberToLE(g,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(i.length,1),this.stringToBinary(this.encode(i)),this.numberToLE(parseInt(w),4),this.numberToLE(this.integerDivide(x,T),8),this.numberToLE(this.integerModulo(x,T),8),this.numberToLE(1,1),this.numberToLE(this.integerDivide(O,T),8),this.numberToLE(this.integerModulo(O,T),8),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(y.length,1),this.stringToBinary(this.encode(y)),this.numberToLE(0,1)]):_=[this.numberToBE(1,32),this.numberToLE(Math.floor(f/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(0),4),this.numberToLE(1,1),this.numberToLE(p,1),this.numberToLE(0,8),this.numberToLE(g,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(Math.floor(f/1e3),4),this.numberToLE(1,1),this.numberToLE(4,1),this.numberToLE(0,8),this.numberToLE(g,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(d.length,1),this.stringToBinary(this.encode(d)),this.numberToLE(parseInt(w),4),this.numberToLE(this.integerDivide(x,T),8),this.numberToLE(this.integerModulo(x,T),8),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(y.length,1),this.stringToBinary(this.encode(y)),this.numberToLE(0,1)];const S=this.binaryConcatArray(_),C=this.hash(S,"sha256","hex"),I=this.ecdsa(C,this.secret,"secp256k1",void 0,!0),M=this.binaryToBase16(this.numberToLE(this.sum(I.v,31),1))+I.r+I.s;let F=void 0,E=void 0,A=void 0;const B=this.safeString(b.info,"chainContractAddress");if(26===p)A={fee:g,from:this.apiKey,to_external_address:i,asset_type:parseInt(w),amount:x,asset_fee:O},F={timestamp:m,expiration:v,operations:[[p,A]],validate_type:0,dapp:y,signatures:[M]},E={chainType:c,trObj:this.json(F),chainContractAddress:B};else{A={fee:g,from:this.apiKey,to_external_address:d,asset_type:parseInt(w),amount:x,asset_fee:O};F={timestamp:m,expiration:v,operations:[[p,{fee:g,proposaler:this.apiKey,expiration_time:m,proposed_ops:[{op:[4,A]}]}]],validate_type:0,dapp:y,signatures:[M]},E="eos"===n?{chainType:c,toExternalAddress:"noneed",trObj:this.json(F),chainContractAddress:B}:{chainType:c,toExternalAddress:i,trObj:this.json(F),chainContractAddress:B}}const P=await this.publicPostTransactionWithdraw(E);return{info:P,id:this.safeString(P,"id")}}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t];return o+="/"+e,Object.keys(s).length&&(o+="?"+this.urlencode(s)),{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,d,h){if(503===e)throw new c(this.id+" "+e.toString()+" "+t+" "+o);if(void 0!==n&&"code"in n){if("1"===this.safeString(n,"code")){const e=this.safeString(n,"msg"),t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions,e,t),new a(t)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,AuthenticationError:o,NullResponse:n,InvalidOrder:c,NotSupported:d,InsufficientFunds:h,InvalidNonce:l,OrderNotFound:u,RateLimitExceeded:p,DDoSProtection:f}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"cex",name:"CEX.IO",countries:["GB","EU","CY","RU"],rateLimit:1500,has:{cancelOrder:!0,CORS:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},timeframes:{"1m":"1m"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766442-8ddc33b0-5ed8-11e7-8b98-f786aef0f3c9.jpg",api:"https://cex.io/api",www:"https://cex.io",doc:"https://cex.io/cex-api",fees:["https://cex.io/fee-schedule","https://cex.io/limits-commissions"],referral:"https://cex.io/r/0/up105393824/0/"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["currency_profile","currency_limits/","last_price/{pair}/","last_prices/{currencies}/","ohlcv/hd/{yyyymmdd}/{pair}","order_book/{pair}/","ticker/{pair}/","tickers/{currencies}/","trade_history/{pair}/"],post:["convert/{pair}","price_stats/{pair}"]},private:{post:["active_orders_status/","archived_orders/{pair}/","balance/","cancel_order/","cancel_orders/{pair}/","cancel_replace_order/{pair}/","close_position/{pair}/","get_address/","get_myfee/","get_order/","get_order_tx/","open_orders/{pair}/","open_orders/","open_position/{pair}/","open_positions/{pair}/","place_order/{pair}/"]}},fees:{trading:{maker:.0016,taker:.0025},funding:{withdraw:{BTC:.001,ETH:.01,BCH:.001,DASH:.01,BTG:.001,ZEC:.001,XRP:.02},deposit:{BTC:0,ETH:0,BCH:0,DASH:0,BTG:0,ZEC:0,XRP:0,XLM:0}}},exceptions:{exact:{},broad:{"Insufficient funds":h,"Nonce must be incremented":l,"Invalid Order":c,"Order not found":u,"limit exceeded":p,"Invalid API key":o,"There was an error while placing your order":c,"Sorry, too many clients already":f}},options:{fetchOHLCVWarning:!0,createMarketBuyOrderRequiresPrice:!0,order:{status:{c:"canceled",d:"closed",cd:"canceled",a:"open"}}}})}async fetchCurrenciesFromCache(e={}){const t=this.safeValue(this.options,"fetchCurrencies",{}),i=this.safeInteger(t,"timestamp"),s=this.safeInteger(t,"expires",1e3),a=this.milliseconds();if(void 0===i||a-i>s){const i=await this.publicGetCurrencyProfile(e);this.options.fetchCurrencies=this.extend(t,{response:i,timestamp:a})}return this.safeValue(this.options.fetchCurrencies,"response")}async fetchCurrencies(e={}){const t=await this.fetchCurrenciesFromCache(e);this.options.currencies={timestamp:this.milliseconds(),response:t};const i=this.safeValue(t,"data",[]),s=this.safeValue(i,"symbols",[]),a={};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"code"),r=this.safeCurrencyCode(i),o=this.safeInteger(t,"precision"),n=!0;a[r]={id:i,code:r,name:i,active:n,precision:o,fee:void 0,limits:{amount:{min:this.safeFloat(t,"minimumCurrencyAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(t,"minimalWithdrawalAmount"),max:void 0}},info:t}}return a}async fetchMarkets(e={}){const t=await this.fetchCurrenciesFromCache(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"symbols",[]),a=this.indexBy(s,"code"),r=this.safeValue(i,"pairs",[]),o=await this.publicGetCurrencyLimits(e),n=[],c=this.safeValue(o.data,"pairs");for(let e=0;e<c.length;e++){const t=c[e],i=this.safeString(t,"symbol1"),s=this.safeString(t,"symbol2"),o=i+"/"+s,d=this.safeCurrencyCode(i),h=this.safeCurrencyCode(s),l=d+"/"+h,u=this.safeValue(a,i,{}),p=this.safeValue(a,s,{});let f=this.safeInteger(p,"precision",8);for(let e=0;e<r.length;e++){const t=r[e];t.symbol1===i&&t.symbol2===s&&(f=this.safeInteger(t,"pricePrecision",f))}const m={amount:this.safeInteger(u,"precision",8)-this.safeInteger(u,"scale",0),price:f};n.push({id:o,info:t,symbol:l,base:d,quote:h,baseId:i,quoteId:s,precision:m,limits:{amount:{min:this.safeFloat(t,"minLotSize"),max:this.safeFloat(t,"maxLotSize")},price:{min:this.safeFloat(t,"minPrice"),max:this.safeFloat(t,"maxPrice")},cost:{min:this.safeFloat(t,"minLotSizeS2"),max:void 0}},active:void 0})}return n}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e),i={info:t},s=this.omit(t,["username","timestamp"]),a=Object.keys(s);for(let e=0;e<a.length;e++){const t=a[e],r=this.safeValue(s,t,{}),o=this.account();o.free=this.safeFloat(r,"available"),o.used=this.safeFloat(r,"orders",0);i[this.safeCurrencyCode(t)]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)};void 0!==t&&(s.depth=t);const a=await this.publicGetOrderBookPair(this.extend(s,i)),r=this.safeTimestamp(a,"timestamp");return this.parseOrderBook(a,r)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const o=this.market(e);if(void 0===i)i=this.milliseconds()-864e5;else if(this.options.fetchOHLCVWarning)throw new a(this.id+" fetchOHLCV warning: CEX can return historical candles for a certain date only, this might produce an empty or null reply. Set exchange.options['fetchOHLCVWarning'] = false or add ({ 'options': { 'fetchOHLCVWarning': false }}) to constructor params to suppress this warning message.");let c=this.ymd(i);c=c.split("-"),c=c.join("");const d={pair:o.id,yyyymmdd:c};try{const e=await this.publicGetOhlcvHdYyyymmddPair(this.extend(d,r)),a="data"+this.timeframes[t],n=this.safeString(e,a),c=JSON.parse(n);return this.parseOHLCVs(c,o,t,i,s)}catch(e){if(e instanceof n)return[]}}parseTicker(e,t){const i=this.safeTimestamp(e,"timestamp"),s=this.safeFloat(e,"volume"),a=this.safeFloat(e,"high"),r=this.safeFloat(e,"low"),o=this.safeFloat(e,"bid"),n=this.safeFloat(e,"ask"),c=this.safeFloat(e,"last");let d=void 0;return t&&(d=t.symbol),{symbol:d,timestamp:i,datetime:this.iso8601(i),high:a,low:r,bid:o,bidVolume:void 0,ask:n,askVolume:void 0,vwap:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:s,quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i={currencies:Object.keys(this.currencies).join("/")},s=(await this.publicGetTickersCurrencies(this.extend(i,t))).data,a={};for(let e=0;e<s.length;e++){const t=s[e],i=t.pair.replace(":","/"),r=this.markets[i];a[i]=this.parseTicker(t,r)}return this.filterByArray(a,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},a=await this.publicGetTickerPair(this.extend(s,t));return this.parseTicker(a,i)}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid"),a=this.safeString(e,"type"),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=void 0;void 0!==o&&void 0!==r&&(n=o*r);let c=void 0;return void 0!==t&&(c=t.symbol),{info:e,id:s,timestamp:i,datetime:this.iso8601(i),symbol:c,type:void 0,side:a,order:void 0,takerOrMaker:void 0,price:r,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={pair:a.id},o=await this.publicGetTradeHistoryPair(this.extend(r,s));return this.parseTrades(o,a,t,i)}async createOrder(e,t,i,s,a,r={}){if("market"===t&&"buy"===i&&this.options.createMarketBuyOrderRequiresPrice){if(void 0===a)throw new c(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");s*=a}await this.loadMarkets();const o={pair:this.marketId(e),type:i,amount:s};"limit"===t?o.price=a:o.order_type=t;const n=await this.privatePostPlaceOrderPair(this.extend(o,r)),d=this.safeFloat(n,"amount"),h=this.safeFloat(n,"pending"),l=this.safeValue(n,"time"),u=this.safeValue(n,"complete")?"closed":"open";let p=void 0;return void 0!==d&&void 0!==h&&(p=Math.max(d-h,0)),{id:this.safeString(n,"id"),info:n,clientOrderId:void 0,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,type:t,side:this.safeString(n,"type"),symbol:e,status:u,price:this.safeFloat(n,"price"),amount:d,cost:void 0,average:void 0,remaining:h,filled:p,fee:void 0,trades:void 0}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e};return await this.privatePostCancelOrder(this.extend(s,i))}parseOrder(e,t){let i=this.safeValue(e,"time");i="string"==typeof i&&i.indexOf("T")>=0?this.parse8601(i):parseInt(i);let s=void 0;if(void 0===t){const i=this.safeString(e,"symbol1"),a=this.safeString(e,"symbol2");s=this.safeCurrencyCode(i)+"/"+this.safeCurrencyCode(a),s in this.markets&&(t=this.market(s))}const a=this.parseOrderStatus(this.safeString(e,"status")),r=this.safeFloat(e,"price");let o=this.safeFloat(e,"amount");void 0!==o&&(o=Math.abs(o));const n=this.safeFloat2(e,"pending","remains"),c=o-n;let d=void 0,h=void 0;if(void 0!==t){s=t.symbol,h=this.safeFloat(e,"ta:"+t.quote),void 0===h&&(h=this.safeFloat(e,"tta:"+t.quote));const i="fa:"+t.base,a="tfa:"+t.base,r="fa:"+t.quote,o="tfa:"+t.quote;let n=this.safeFloat(e,"tradingFeeMaker");if(n||(n=this.safeFloat(e,"tradingFeeTaker",n)),n&&(n/=100),i in e||a in e){const s=this.safeFloat2(e,i,a);d={currency:t.base,rate:n,cost:s}}else if(r in e||o in e){const i=this.safeFloat2(e,r,o);d={currency:t.quote,rate:n,cost:i}}}h||(h=r*c);const l=e.type;let u=void 0;const p=e.id;if("vtx"in e){u=[];for(let i=0;i<e.vtx.length;i++){const a=e.vtx[i],r=this.safeString(a,"type");if("cancel"===r)continue;const o=this.safeFloat(a,"price");if(void 0===o)continue;if("costsNothing"===r)continue;const n=this.parse8601(this.safeString(a,"time")),c=this.safeFloat(a,"amount"),d=this.safeFloat(a,"fee_amount");let h=c<0?-c:c,l=void 0;"sell"===r?(l=h,h=this.sum(d,l)/o):l=h*o,u.push({id:this.safeString(a,"id"),timestamp:n,datetime:this.iso8601(n),order:p,symbol:s,price:o,amount:h,cost:l,side:r,fee:{cost:d,currency:t.quote},info:a,type:void 0,takerOrMaker:void 0})}}return{id:p,clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:a,symbol:s,type:void 0===r?"market":"limit",timeInForce:void 0,side:l,price:r,stopPrice:void 0,cost:h,amount:o,filled:c,remaining:n,trades:u,fee:d,info:e,average:void 0}}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a={};let r="privatePostOpenOrders",o=void 0;void 0!==e&&(o=this.market(e),a.pair=o.id,r+="Pair");const n=await this[r](this.extend(a,s));for(let e=0;e<n.length;e++)n[e]=this.extend(n[e],{status:"open"});return this.parseOrders(n,o,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();if(void 0===e)throw new r(this.id+" fetchClosedOrders requires a symbol argument");const a=this.market(e),o={pair:a.id},n=await this.privatePostArchivedOrdersPair(this.extend(o,s));return this.parseOrders(n,a,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e.toString()},a=await this.privatePostGetOrderTx(this.extend(s,i)),r=this.safeValue(a,"data",{});return this.parseOrder(r)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const a={limit:i,pair:this.market(e).id,dateFrom:t},r=await this.privatePostArchivedOrdersPair(this.extend(a,s)),o=[];for(let e=0;e<r.length;e++){const t=r[e],i=this.parseOrderStatus(this.safeString(t,"status")),s=this.safeString(t,"symbol1"),a=this.safeString(t,"symbol2"),n=this.safeCurrencyCode(s),c=this.safeCurrencyCode(a),d=n+"/"+c,h=this.safeString(t,"type"),l=this.safeFloat(t,"a:"+s+":cds"),u=this.safeFloat(t,"a:"+a+":cds"),p=this.safeFloat(t,"f:"+a+":cds"),f=this.safeFloat(t,"amount"),m=this.safeFloat(t,"price"),v=this.safeFloat(t,"remains"),y=f-v;let g=void 0,b=void 0,w=void 0,k=void 0;if(m){const e=this.safeFloat(t,"ta:"+a,0),i=this.safeFloat(t,"tta:"+a,0),s=this.safeFloat(t,"fa:"+a,0),r=this.safeFloat(t,"tfa:"+a,0);b="sell"===h?this.sum(this.sum(e,i),this.sum(s,r)):this.sum(e,i)-this.sum(s,r),k="limit",g=f,w=b/y}else k="market",g=l,b=u,w=g/b;const x=this.safeString(t,"time"),T=this.safeString(t,"lastTxTime"),O=this.parse8601(x);o.push({id:this.safeString(t,"id"),timestamp:O,datetime:this.iso8601(O),lastUpdated:this.parse8601(T),status:i,symbol:d,side:h,price:m,amount:g,average:w,type:k,filled:y,cost:b,remaining:v,fee:{cost:p,currency:c},info:t})}return o}parseOrderStatus(e){return this.safeString(this.options.order.status,e,e)}async editOrder(e,t,i,s,a,o,n={}){if(void 0===a)throw new r(this.id+" editOrder requires a amount argument");if(void 0===o)throw new r(this.id+" editOrder requires a price argument");await this.loadMarkets();const c=this.market(t),d={pair:c.id,type:s,amount:a,price:o,order_id:e},h=await this.privatePostCancelReplaceOrderPair(this.extend(d,n));return this.parseOrder(h,c)}async fetchDepositAddress(e,t={}){if("XRP"===e||"XLM"===e)throw new d(this.id+" fetchDepositAddress does not support XRP and XLM addresses yet (awaiting docs from CEX.io)");await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privatePostGetAddress(this.extend(i,t)),a=this.safeString(s,"data");return this.checkAddress(a),{currency:e,address:a,tag:void 0,info:s}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.hmac(this.encode(t),this.encode(this.secret));r=this.json(this.extend({key:this.apiKey,signature:i.toUpperCase(),nonce:e},n)),a={"Content-Type":"application/json"}}return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,c,d,h){if(Array.isArray(c))return c;if("true"!==o){if(void 0===c)throw new n(this.id+" returned "+this.json(c));if((!("e"in c)||!("ok"in c)||"ok"!==c.ok)&&"error"in c){const e=this.safeString(c,"error"),t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new a(t)}}}}},function(e,t,i){"use strict";const s=i(36);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"chilebit",name:"ChileBit",countries:["CL"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991414-1298f0d8-647f-11e7-9c40-d56409266336.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://chilebit.net",doc:"https://blinktrade.com/docs"},options:{brokerId:"9"}})}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,AuthenticationError:o,RateLimitExceeded:n}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinbase",name:"Coinbase",countries:["US"],rateLimit:400,version:"v2",userAgent:this.userAgents.chrome,headers:{"CB-VERSION":"2018-05-30"},has:{CORS:!0,cancelOrder:!1,createDepositAddress:!0,createOrder:!1,deposit:!1,fetchBalance:!0,fetchClosedOrders:!1,fetchCurrencies:!0,fetchDepositAddress:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!1,fetchOpenOrders:!1,fetchOrder:!1,fetchOrderBook:!1,fetchL2OrderBook:!1,fetchLedger:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!1,fetchTime:!0,fetchBidsAsks:!1,fetchTrades:!1,withdraw:!1,fetchTransactions:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchMySells:!0,fetchMyBuys:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/40811661-b6eceae2-653a-11e8-829e-10bfadb078cf.jpg",api:"https://api.coinbase.com",www:"https://www.coinbase.com",doc:"https://developers.coinbase.com/api/v2",fees:"https://support.coinbase.com/customer/portal/articles/2109597-buy-sell-bank-transfer-fees",referral:"https://www.coinbase.com/join/58cbe25a355148797479dbd2"},requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["currencies","time","exchange-rates","users/{user_id}","prices/{symbol}/buy","prices/{symbol}/sell","prices/{symbol}/spot"]},private:{get:["accounts","accounts/{account_id}","accounts/{account_id}/addresses","accounts/{account_id}/addresses/{address_id}","accounts/{account_id}/addresses/{address_id}/transactions","accounts/{account_id}/transactions","accounts/{account_id}/transactions/{transaction_id}","accounts/{account_id}/buys","accounts/{account_id}/buys/{buy_id}","accounts/{account_id}/sells","accounts/{account_id}/sells/{sell_id}","accounts/{account_id}/deposits","accounts/{account_id}/deposits/{deposit_id}","accounts/{account_id}/withdrawals","accounts/{account_id}/withdrawals/{withdrawal_id}","payment-methods","payment-methods/{payment_method_id}","user","user/auth"],post:["accounts","accounts/{account_id}/primary","accounts/{account_id}/addresses","accounts/{account_id}/transactions","accounts/{account_id}/transactions/{transaction_id}/complete","accounts/{account_id}/transactions/{transaction_id}/resend","accounts/{account_id}/buys","accounts/{account_id}/buys/{buy_id}/commit","accounts/{account_id}/sells","accounts/{account_id}/sells/{sell_id}/commit","accounts/{account_id}/deposists","accounts/{account_id}/deposists/{deposit_id}/commit","accounts/{account_id}/withdrawals","accounts/{account_id}/withdrawals/{withdrawal_id}/commit"],put:["accounts/{account_id}","user"],delete:["accounts/{id}","accounts/{account_id}/transactions/{transaction_id}"]}},exceptions:{two_factor_required:o,param_required:a,validation_error:a,invalid_request:a,personal_details_required:o,identity_verification_required:o,jumio_verification_required:o,jumio_face_match_verification_required:o,unverified_email:o,authentication_error:o,invalid_token:o,revoked_token:o,expired_token:o,invalid_scope:o,not_found:a,rate_limit_exceeded:n,internal_server_error:a},commonCurrencies:{CGLD:"CELO"},options:{fetchCurrencies:{expires:5e3},accounts:["wallet","fiat"]}})}async fetchTime(e={}){const t=await this.publicGetTime(e),i=this.safeValue(t,"data",{});return this.safeTimestamp(i,"epoch")}async fetchAccounts(e={}){const t=await this.privateGetAccounts(e),i=this.safeValue(t,"data",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeValue(t,"currency",{}),r=this.safeString(a,"code"),o=this.safeCurrencyCode(r);s.push({id:this.safeString(t,"id"),type:this.safeString(t,"type"),code:o,info:t})}return s}async createDepositAddress(e,t={}){let i=this.safeString(t,"account_id");if(t=this.omit(t,"account_id"),void 0===i){await this.loadAccounts();for(let t=0;t<this.accounts.length;t++){const s=this.accounts[t];if(s.code===e&&"wallet"===s.type){i=s.id;break}}}if(void 0===i)throw new a(this.id+" createDepositAddress could not find the account with matching currency code, specify an `account_id` extra param");const s={account_id:i},r=await this.privatePostAccountsAccountIdAddresses(this.extend(s,t)),o=this.safeValue(r,"data",{});return{currency:e,tag:this.safeString(o,"destination_tag"),address:this.safeString(o,"address"),info:r}}async fetchMySells(e,t,i,s={}){const a=await this.prepareAccountRequest(i,s);await this.loadMarkets();const r=this.omit(s,["account_id","accountId"]),o=await this.privateGetAccountsAccountIdSells(this.extend(a,r));return this.parseTrades(o.data,void 0,t,i)}async fetchMyBuys(e,t,i,s={}){const a=await this.prepareAccountRequest(i,s);await this.loadMarkets();const r=this.omit(s,["account_id","accountId"]),o=await this.privateGetAccountsAccountIdBuys(this.extend(a,r));return this.parseTrades(o.data,void 0,t,i)}async fetchTransactionsWithMethod(e,t,i,s,a={}){const r=await this.prepareAccountRequestWithCurrencyCode(t,s,a);await this.loadMarkets();const o=this.omit(a,["account_id","accountId"]),n=await this[e](this.extend(r,o));return this.parseTransactions(n.data,void 0,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsWithMethod("privateGetAccountsAccountIdWithdrawals",e,t,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsWithMethod("privateGetAccountsAccountIdDeposits",e,t,i,s)}parseTransactionStatus(e){return this.safeString({created:"pending",completed:"ok",canceled:"canceled"},e,e)}parseTransaction(e,t){const i=this.safeValue(e,"subtotal",{}),s=this.safeValue(e,"fee",{}),a=this.safeString(e,"id"),r=this.parse8601(this.safeValue(e,"created_at")),o=this.parse8601(this.safeValue(e,"updated_at")),n=this.safeString(e,"resource"),c=this.safeFloat(i,"amount"),d=this.safeString(i,"currency"),h=this.safeCurrencyCode(d),l=this.safeFloat(s,"amount"),u=this.safeString(s,"currency"),p={cost:l,currency:this.safeCurrencyCode(u)};let f=this.parseTransactionStatus(this.safeString(e,"status"));if(void 0===f){f=this.safeValue(e,"committed")?"ok":"pending"}return{info:e,id:a,txid:a,timestamp:r,datetime:this.iso8601(r),address:void 0,tag:void 0,type:n,amount:c,currency:h,status:f,updated:o,fee:p}}parseTrade(e,t){let i=void 0;const s=this.safeValue(e,"total",{}),a=this.safeValue(e,"amount",{}),r=this.safeValue(e,"subtotal",{}),o=this.safeValue(e,"fee",{}),n=this.safeString(e,"id"),c=this.parse8601(this.safeValue(e,"created_at"));if(void 0===t){const e=this.safeString(a,"currency"),t=this.safeString(s,"currency");if(void 0!==e&&void 0!==t){i=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}}const d=this.safeString(e,"resource"),h=this.safeFloat(r,"amount"),l=this.safeFloat(a,"amount");let u=void 0;void 0!==h&&void 0!==l&&l>0&&(u=h/l);const p=this.safeFloat(o,"amount"),f=this.safeString(o,"currency"),m={cost:p,currency:this.safeCurrencyCode(f)};return{info:e,id:n,order:void 0,timestamp:c,datetime:this.iso8601(c),symbol:i,type:void 0,side:d,takerOrMaker:void 0,price:u,amount:l,cost:h,fee:m}}async fetchMarkets(e={}){const t=await this.fetchCurrenciesFromCache(e),i=this.safeValue(t,"currencies",{}),s=this.safeValue(t,"exchangeRates",{}),a=this.safeValue(i,"data",[]),r=this.indexBy(a,"id"),o=this.safeValue(this.safeValue(s,"data",{}),"rates",{}),n=Object.keys(o),c=[];for(let e=0;e<n.length;e++){const t=n[e],i=this.safeCurrencyCode(t);if("crypto"===(t in r?"fiat":"crypto"))for(let e=0;e<a.length;e++){const s=a[e],r=this.safeString(s,"id"),o=this.safeCurrencyCode(r),n=i+"/"+o,d=t+"-"+r;c.push({id:d,symbol:n,base:i,quote:o,baseId:t,quoteId:r,active:void 0,info:s,precision:{amount:void 0,price:void 0},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(s,"min_size"),max:void 0}}})}}return c}async fetchCurrenciesFromCache(e={}){const t=this.safeValue(this.options,"fetchCurrencies",{}),i=this.safeInteger(t,"timestamp"),s=this.safeInteger(t,"expires",1e3),a=this.milliseconds();if(void 0===i||a-i>s){const i=await this.publicGetCurrencies(e),s=await this.publicGetExchangeRates(e);this.options.fetchCurrencies=this.extend(t,{currencies:i,exchangeRates:s,timestamp:a})}return this.safeValue(this.options,"fetchCurrencies",{})}async fetchCurrencies(e={}){const t=await this.fetchCurrenciesFromCache(e),i=this.safeValue(t,"currencies",{}),s=this.safeValue(t,"exchangeRates",{}),a=this.safeValue(i,"data",[]),r=this.indexBy(a,"id"),o=this.safeValue(this.safeValue(s,"data",{}),"rates",{}),n=Object.keys(o),c={};for(let e=0;e<n.length;e++){const t=n[e],i=t in r?"fiat":"crypto",s=this.safeValue(r,t,{}),a=this.safeString(s,"id",t),o=this.safeString(s,"name"),d=this.safeCurrencyCode(a);c[d]={id:a,code:d,info:s,type:i,name:o,active:!0,fee:void 0,precision:void 0,limits:{amount:{min:this.safeFloat(s,"min_size"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return c}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.seconds(),s=this.market(e),a=this.extend({symbol:s.id},t),r=await this.publicGetPricesSymbolBuy(a),o=await this.publicGetPricesSymbolSell(a),n=await this.publicGetPricesSymbolSpot(a),c=this.safeFloat(r.data,"amount"),d=this.safeFloat(o.data,"amount"),h=this.safeFloat(n.data,"amount");return{symbol:e,timestamp:i,datetime:this.iso8601(i),bid:d,ask:c,last:h,high:void 0,low:void 0,bidVolume:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:{buy:r,sell:o,spot:n}}}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccounts(e),i=this.safeValue(t,"data"),s=this.safeValue(e,"type",this.options.accounts),a={info:t};for(let e=0;e<i.length;e++){const t=i[e];if(this.inArray(t.type,s)){const e=this.safeString(t.balance,"currency"),i=this.safeCurrencyCode(e),s=this.safeFloat(t.balance,"amount"),r=s,o=void 0;if(i in a)a[i].free=this.sum(a[i].free,s),a[i].total=this.sum(a[i].total,s);else{const e={free:r,used:o,total:s};a[i]=e}}}return this.parseBalance(a)}async fetchLedger(e,t,i,s={}){await this.loadMarkets();let a=void 0;void 0!==e&&(a=this.currency(e));const r=await this.prepareAccountRequestWithCurrencyCode(e,i,s),o=this.omit(s,["account_id","accountId"]),n=await this.privateGetAccountsAccountIdTransactions(this.extend(r,o));return this.parseLedger(n.data,a,t,i)}parseLedgerEntryStatus(e){return this.safeString({completed:"ok"},e,e)}parseLedgerEntryType(e){return this.safeString({buy:"trade",sell:"trade",fiat_deposit:"transaction",fiat_withdrawal:"transaction",exchange_deposit:"transaction",exchange_withdrawal:"transaction",send:"transaction",pro_deposit:"transaction",pro_withdrawal:"transaction"},e,e)}parseLedgerEntry(e,t){const i=this.safeValue(e,"amount",{});let s=this.safeFloat(i,"amount"),a=void 0;s<0?(a="out",s=-s):a="in";const r=this.safeString(i,"currency"),o=this.safeCurrencyCode(r,t);let n=void 0;const c=this.safeValue(e,"network",{}),d=this.safeValue(c,"transaction_fee");if(void 0!==d){const e=this.safeString(d,"currency"),i=this.safeCurrencyCode(e,t);n={cost:this.safeFloat(d,"amount"),currency:i}}const h=this.parse8601(this.safeValue(e,"created_at")),l=this.safeString(e,"id"),u=this.parseLedgerEntryType(this.safeString(e,"type")),p=this.parseLedgerEntryStatus(this.safeString(e,"status")),f=this.safeString(e,"resource_path");let m=void 0;if(void 0!==f){const e=f.split("/");e.length>3&&(m=e[3])}return{info:e,id:l,timestamp:h,datetime:this.iso8601(h),direction:a,account:m,referenceId:void 0,referenceAccount:void 0,type:u,currency:o,amount:s,before:void 0,after:void 0,status:p,fee:n}}async findAccountId(e){await this.loadMarkets(),await this.loadAccounts();for(let t=0;t<this.accounts.length;t++){const i=this.accounts[t];if(i.code===e)return i.id}}prepareAccountRequest(e,t={}){const i=this.safeString2(t,"account_id","accountId");if(void 0===i)throw new r(this.id+" method requires an account_id (or accountId) parameter");const s={account_id:i};return void 0!==e&&(s.limit=e),s}async prepareAccountRequestWithCurrencyCode(e,t,i={}){let s=this.safeString2(i,"account_id","accountId");if(void 0===s){if(void 0===e)throw new r(this.id+" method requires an account_id (or accountId) parameter OR a currency code argument");if(s=await this.findAccountId(e),void 0===s)throw new a(this.id+" could not find account id for "+e)}const o={account_id:s};return void 0!==t&&(o.limit=t),o}sign(e,t="public",i="GET",s={},a,r){let o="/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));"GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n));const c=this.urls.api+o;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();let t="";"GET"!==i&&Object.keys(n).length&&(t=r=this.json(n));const s=e+i+o+t,c=this.hmac(this.encode(s),this.encode(this.secret));a={"CB-ACCESS-KEY":this.apiKey,"CB-ACCESS-SIGN":c,"CB-ACCESS-TIMESTAMP":e,"Content-Type":"application/json"}}return{url:c,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n)return;const h=this.id+" "+o;let l=this.safeString(n,"error");if(void 0!==l)throw this.throwExactlyMatchedException(this.exceptions,l,h),new a(h);const u=this.safeValue(n,"errors");if(void 0!==u&&Array.isArray(u)){if(u.length>0&&(l=this.safeString(u[0],"id"),void 0!==l))throw this.throwExactlyMatchedException(this.exceptions,l,h),new a(h)}if(void 0===this.safeValue(n,"data"))throw new a(this.id+" failed due to a malformed response "+this.json(n))}}},function(e,t,i){"use strict";const s=i(88);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinbaseprime",name:"Coinbase Prime",pro:!0,urls:{test:{public:"https://api-public.sandbox.prime.coinbase.com",private:"https://api-public.sandbox.prime.coinbase.com"},logo:"https://user-images.githubusercontent.com/1294454/44539184-29f26e00-a70c-11e8-868f-e907fc236a7c.jpg",api:{public:"https://api.prime.coinbase.com",private:"https://api.prime.coinbase.com"},www:"https://prime.coinbase.com",doc:"https://docs.prime.coinbase.com",fees:"https://support.prime.coinbase.com/customer/en/portal/articles/2945629-fees?b_id=17475"}})}}},function(e,t,i){"use strict";const s=i(1),{BadSymbol:a,ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coincheck",name:"coincheck",countries:["JP","ID"],rateLimit:1500,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchMyTrades:!0,fetchOrderBook:!0,fetchOpenOrders:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182088-1d6d6380-c2ec-11ea-9c64-8ab9f9b289f5.jpg",api:"https://coincheck.com/api",www:"https://coincheck.com",doc:"https://coincheck.com/documents/exchange/api",fees:["https://coincheck.com/exchange/fee","https://coincheck.com/info/fee"]},api:{public:{get:["exchange/orders/rate","order_books","rate/{pair}","ticker","trades"]},private:{get:["accounts","accounts/balance","accounts/leverage_balance","bank_accounts","deposit_money","exchange/orders/opens","exchange/orders/transactions","exchange/orders/transactions_pagination","exchange/leverage/positions","lending/borrows/matches","send_money","withdraws"],post:["bank_accounts","deposit_money/{id}/fast","exchange/orders","exchange/transfers/to_leverage","exchange/transfers/from_leverage","lending/borrows","lending/borrows/{id}/repay","send_money","withdraws"],delete:["bank_accounts/{id}","exchange/orders/{id}","withdraws/{id}"]}},markets:{"BTC/JPY":{id:"btc_jpy",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy"}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:0}}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountsBalance(e),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){const a=s[e],r=this.currencyId(a);if(r in t){const e=this.account(),s=r+"_reserved";e.free=this.safeFloat(t,r),e.used=this.safeFloat(t,s),i[a]=e}}return this.parseBalance(i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;void 0!==e&&(a=this.market(e));const r=await this.privateGetExchangeOrdersOpens(s),o=this.safeValue(r,"orders",[]),n=this.parseOrders(o,a,t,i),c=[];for(let e=0;e<n.length;e++)c.push(this.extend(n[e],{status:"open"}));return c}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"order_type"),a=this.parse8601(this.safeString(e,"created_at")),r=this.safeFloat(e,"pending_amount"),o=this.safeFloat(e,"pending_amount"),n=this.safeFloat(e,"rate");let c=void 0,d=void 0;void 0!==o&&void 0!==r&&(c=Math.max(r-o,0),void 0!==n&&(d=c*n));const h=this.safeString(e,"pair"),l=this.safeSymbol(h,t,"_");return{id:i,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,amount:r,remaining:o,filled:c,side:s,type:void 0,timeInForce:void 0,status:void 0,symbol:l,price:n,stopPrice:void 0,cost:d,fee:void 0,info:e,average:void 0,trades:void 0}}async fetchOrderBook(e,t,i={}){if("BTC/JPY"!==e)throw new a(this.id+" fetchOrderBook () supports BTC/JPY only");await this.loadMarkets();const s=await this.publicGetOrderBooks(i);return this.parseOrderBook(s)}async fetchTicker(e,t={}){if("BTC/JPY"!==e)throw new a(this.id+" fetchTicker () supports BTC/JPY only");await this.loadMarkets();const i=await this.publicGetTicker(t),s=this.safeTimestamp(i,"timestamp"),r=this.safeFloat(i,"last");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(i,"volume"),quoteVolume:void 0,info:i}}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"id"),a=this.safeFloat(e,"rate"),r=this.safeString(e,"pair");t=this.safeValue(this.markets_by_id,r,t);let o=void 0,n=void 0,c=void 0;if(void 0!==r)if(r in this.markets_by_id)n=(t=this.markets_by_id[r]).baseId,c=t.quoteId,o=t.symbol;else{const e=r.split("_");n=e[0],c=e[1];o=this.safeCurrencyCode(n)+"/"+this.safeCurrencyCode(c)}void 0===o&&void 0!==t&&(o=t.symbol);let d=void 0,h=void 0,l=void 0,u=void 0,p=void 0,f=void 0;if("liquidity"in e){"T"===this.safeString(e,"liquidity")?d="taker":"M"===this.safeString(e,"liquidity")&&(d="maker");const t=this.safeValue(e,"funds",{});h=this.safeFloat(t,n),l=this.safeFloat(t,c),p={currency:this.safeString(e,"fee_currency"),cost:this.safeFloat(e,"fee")},u=this.safeString(e,"side"),f=this.safeString(e,"order_id")}else h=this.safeFloat(e,"amount"),u=this.safeString(e,"order_type");return void 0===l&&void 0!==h&&void 0!==a&&(l=h*a),{id:s,info:e,datetime:this.iso8601(i),timestamp:i,symbol:o,type:void 0,side:u,order:f,takerOrMaker:d,price:a,amount:h,cost:l,fee:p}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r=await this.privateGetExchangeOrdersTransactions(this.extend({},s)),o=this.safeValue(r,"transactions",[]);return this.parseTrades(o,a,t,i)}async fetchTrades(e,t,i,s={}){if("BTC/JPY"!==e)throw new a(this.id+" fetchTrades () supports BTC/JPY only");await this.loadMarkets();const r=this.market(e),o={pair:r.id};void 0!==i&&(o.limit=i);const n=await this.publicGetTrades(this.extend(o,s)),c=this.safeValue(n,"data",[]);return this.parseTrades(c,r,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o={pair:this.marketId(e)};if("market"===t){const e=t+"_"+i;o.order_type=e;o[("buy"===i?e+"_":"")+"amount"]=s}else o.order_type=i,o.rate=a,o.amount=s;const n=await this.privatePostExchangeOrders(this.extend(o,r));return{info:n,id:this.safeString(n,"id")}}async cancelOrder(e,t,i={}){const s={id:e};return await this.privateDeleteExchangeOrdersId(this.extend(s,i))}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce().toString();let t="";"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(this.keysort(n))):Object.keys(n).length&&(t=r=this.urlencode(this.keysort(n)));const s=e+o+t;a={"Content-Type":"application/x-www-form-urlencoded","ACCESS-KEY":this.apiKey,"ACCESS-NONCE":e,"ACCESS-SIGNATURE":this.hmac(this.encode(s),this.encode(this.secret))}}return{url:o,method:i,body:r,headers:a}}async request(e,t="public",i="GET",s={},a,o){const n=await this.fetch2(e,t,i,s,a,o);if("public"===t)return n;if("success"in n&&n.success)return n;throw new r(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,AuthenticationError:r,InvalidNonce:o,InsufficientFunds:n,InvalidOrder:c,OrderNotFound:d,DDoSProtection:h}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinegg",name:"CoinEgg",countries:["CN","UK"],has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:!1,fetchOpenOrders:"emulated",fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/36770310-adfa764e-1c5a-11e8-8e09-449daac3d2fb.jpg",api:{web:"https://trade.coinegg.com/web",rest:"https://api.coinegg.com/api/v1"},www:"https://www.coinegg.com",doc:"https://www.coinegg.com/explain.api.html",fees:"https://www.coinegg.com/fee.html",referral:"https://www.coinegg.com/user/register?invite=523218"},api:{web:{get:["symbol/ticker?right_coin={quote}","{quote}/trends","{quote}/{base}/order","{quote}/{base}/trades","{quote}/{base}/depth.js"]},public:{get:["ticker/region/{quote}","depth/region/{quote}","orders/region/{quote}"]},private:{post:["balance","trade_add/region/{quote}","trade_cancel/region/{quote}","trade_view/region/{quote}","trade_list/region/{quote}"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:.008,BCH:.002,LTC:.001,ETH:.01,ETC:.01,NEO:0,QTUM:"1%",XRP:"1%",DOGE:"1%",LSK:"1%",XAS:"1%",BTS:"1%",GAME:"1%",GOOC:"1%",NXT:"1%",IFC:"1%",DNC:"1%",BLK:"1%",VRC:"1%",XPM:"1%",VTC:"1%",TFC:"1%",PLC:"1%",EAC:"1%",PPC:"1%",FZ:"1%",ZET:"1%",RSS:"1%",PGC:"1%",SKT:"1%",JBC:"1%",RIO:"1%",LKC:"1%",ZCC:"1%",MCC:"1%",QEC:"1%",MET:"1%",YTC:"1%",HLB:"1%",MRYC:"1%",MTC:"1%",KTC:0}}},exceptions:{103:r,104:r,105:r,106:o,200:n,201:c,202:c,203:d,402:h},errorMessages:{100:"Required parameters can not be empty",101:"Illegal parameter",102:"coin does not exist",103:"Key does not exist",104:"Signature does not match",105:"Insufficient permissions",106:"Request expired(nonce error)",200:"Lack of balance",201:"Too small for the number of trading",202:"Price must be in 0 - 1000000",203:"Order does not exist",204:"Pending order amount must be above 0.001 BTC",205:"Restrict pending order prices",206:"Decimal place error",401:"System error",402:"Requests are too frequent",403:"Non-open API",404:"IP restriction does not request the resource",405:"Currency transactions are temporarily closed"},options:{quoteIds:["btc","eth","usc","usdt"]},commonCurrencies:{JBC:"JubaoCoin"}})}async fetchMarkets(e={}){const t=this.options.quoteIds,i=[];for(let e=0;e<t.length;e++){const s=t[e],a=await this.webGetSymbolTickerRightCoinQuote({quote:s}),r=this.safeValue(a,"data",[]);for(let e=0;e<r.length;e++){const t=r[e],a=t.symbol,o=a.split("_")[0];let n=o.toUpperCase(),c=s.toUpperCase();n=this.safeCurrencyCode(n),c=this.safeCurrencyCode(c);const d=n+"/"+c,h={amount:8,price:8};i.push({id:a,symbol:d,base:n,quote:c,baseId:o,quoteId:s,active:!0,precision:h,limits:{amount:{min:Math.pow(10,-h.amount),max:Math.pow(10,h.amount)},price:{min:Math.pow(10,-h.price),max:Math.pow(10,h.price)},cost:{min:void 0,max:void 0}},info:t})}}return i}parseTicker(e,t){const i=t.symbol,s=this.milliseconds(),a=this.safeFloat(e,"last"),r=this.safeFloat(e,"change");let o=void 0,n=void 0,c=void 0;if(void 0!==r){const e=r/100;o=a/this.sum(1,e),n=a-o,c=this.sum(a,o)/2}return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:o,close:a,last:a,previousClose:void 0,change:n,percentage:r,average:c,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"quoteVol"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={coin:i.baseId,quote:i.quoteId},a=await this.publicGetTickerRegionQuote(this.extend(s,t));return this.parseTicker(a,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),a={coin:s.baseId,quote:s.quoteId},r=await this.publicGetDepthRegionQuote(this.extend(a,i));return this.parseOrderBook(r)}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),r=t.symbol;let o=void 0;void 0!==a&&void 0!==s&&(o=this.costToPrecision(r,s*a));const n=this.safeString(e,"type");return{id:this.safeString(e,"tid"),info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,order:void 0,type:"limit",side:n,takerOrMaker:void 0,price:s,amount:a,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={coin:a.baseId,quote:a.quoteId},o=await this.publicGetOrdersRegionQuote(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e),i={info:t},s=this.safeValue(t,"data",{}),a=this.omit(s,"uid"),r=Object.keys(a);for(let e=0;e<r.length;e++){const t=r[e],[s,o]=t.split("_"),n=this.safeCurrencyCode(s);n in i||(i[n]=this.account());const c="lock"===o?"used":"free";i[n][c]=this.safeFloat(a,t)}return this.parseBalance(i)}parseOrder(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.parse8601(this.safeString(e,"datetime")),a=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount_original"),o=this.safeFloat(e,"amount_outstanding");let n=void 0;void 0!==r&&void 0!==o&&(n=r-o);let c=this.safeString(e,"status");c="cancelled"===c?"canceled":o?"open":"closed";const d=this.safeValue(e,"info",e),h=this.safeString(e,"type");return{id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:c,symbol:i,type:"limit",timeInForce:void 0,side:h,price:a,stopPrice:void 0,cost:void 0,amount:r,filled:n,remaining:o,trades:void 0,fee:void 0,info:d,average:void 0}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n={coin:o.baseId,quote:o.quoteId,type:i,amount:s,price:a},c=await this.privatePostTradeAddRegionQuote(this.extend(n,r)),d=this.safeString(c,"id");return this.parseOrder({id:d,datetime:this.ymdhms(this.milliseconds()),amount_original:s,amount_outstanding:s,price:a,type:i,info:c},o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=this.market(t),a={id:e,coin:s.baseId,quote:s.quoteId};return await this.privatePostTradeCancelRegionQuote(this.extend(a,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=this.market(t),a={id:e,coin:s.baseId,quote:s.quoteId},r=await this.privatePostTradeViewRegionQuote(this.extend(a,i)),o=this.safeValue(r,"data");return this.parseOrder(o,s)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={coin:a.baseId,quote:a.quoteId};void 0!==t&&(r.since=t/1e3);const o=await this.privatePostTradeListRegionQuote(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseOrders(n,a,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({type:"open"},s))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o="rest";"web"===t&&(o=t);let n=this.urls.api[o]+"/"+this.implodeParams(e,s),c=this.omit(s,this.extractParams(e));if("public"===t||"web"===t)Object.keys(c).length&&(n+="?"+this.urlencode(c));else{this.checkRequiredCredentials(),c=this.urlencode(this.extend({key:this.apiKey,nonce:this.nonce()},c));const e=this.hash(this.encode(this.secret));c+="&signature="+this.hmac(this.encode(c),this.encode(e)),"GET"===i?n+="?"+c:(a={"Content-type":"application/x-www-form-urlencoded"},r=c)}return{url:n,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n)return;const h=this.safeValue(n,"result");if(void 0===h)return;if(!0===h)return;const l=this.safeString(n,"code"),u=this.errorMessages,p=this.safeString(u,l,"Unknown Error"),f=this.id+" "+p;throw this.throwExactlyMatchedException(this.exceptions,l,f),new a(this.id+" "+p)}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,InsufficientFunds:o,OrderNotFound:n,InvalidOrder:c,AuthenticationError:d}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinex",name:"CoinEx",version:"v1",countries:["CN"],rateLimit:1e3,has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"1day","3d":"3day","1w":"1week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182089-1e05fa00-c2ec-11ea-8da9-cc73b45abbbc.jpg",api:"https://api.coinex.com",www:"https://www.coinex.com",doc:"https://github.com/coinexcom/coinex_exchange_api/wiki",fees:"https://www.coinex.com/fees",referral:"https://www.coinex.com/register?refer_code=yw5fz"},api:{public:{get:["common/currency/rate","common/asset/config","market/info","market/list","market/ticker","market/ticker/all","market/depth","market/deals","market/kline"]},private:{get:["balance/coin/deposit","balance/coin/withdraw","balance/info","future/account","future/config","future/limitprice","future/loan/history","future/market","margin/account","margin/config","margin/loan/history","margin/market","order","order/deals","order/finished","order/finished/{id}","order/pending","order/status","order/status/batch","order/user/deals"],post:["balance/coin/withdraw","future/flat","future/loan","future/transfer","margin/flat","margin/loan","margin/transfer","order/batchlimit","order/ioc","order/limit","order/market","sub_account/transfer"],delete:["balance/coin/withdraw","order/pending/batch","order/pending"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BCH:0,BTC:.001,LTC:.001,ETH:.001,ZEC:1e-4,DASH:1e-4}}},limits:{amount:{min:.001,max:void 0}},precision:{amount:8,price:8},options:{createMarketBuyOrderRequiresPrice:!0}})}async fetchMarkets(e={}){const t=await this.publicGetMarketInfo(e),i=this.safeValue(t,"data",{}),s=[],a=Object.keys(i);for(let e=0;e<a.length;e++){const t=i[a[e]],r=this.safeString(t,"name"),o=this.safeString(t,"trading_name"),n=o,c=this.safeString(t,"pricing_name"),d=this.safeCurrencyCode(n),h=this.safeCurrencyCode(c);let l=d+"/"+h;o===r&&(l=r);const u={amount:this.safeInteger(t,"trading_decimal"),price:this.safeInteger(t,"pricing_decimal")},p=void 0;s.push({id:r,symbol:l,base:d,quote:h,baseId:n,quoteId:c,active:p,taker:this.safeFloat(t,"taker_fee_rate"),maker:this.safeFloat(t,"maker_fee_rate"),info:t,precision:u,limits:{amount:{min:this.safeFloat(t,"min_amount"),max:void 0},price:{min:Math.pow(10,-u.price),max:void 0}}})}return s}parseTicker(e,t){const i=this.safeInteger(e,"date");let s=void 0;void 0!==t&&(s=t.symbol),e=this.safeValue(e,"ticker",{});const a=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat2(e,"vol","volume"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},a=await this.publicGetMarketTicker(this.extend(s,t));return this.parseTicker(a.data,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketTickerAll(t),s=this.safeValue(i,"data"),a=this.safeInteger(s,"date"),r=this.safeValue(s,"ticker"),o=Object.keys(r),n={};for(let e=0;e<o.length;e++){const t=o[e],i=this.safeMarket(t),s=i.symbol,c=this.parseTicker({date:a,ticker:r[t]},i);c.symbol=s,n[s]=c}return this.filterByArray(n,"symbol",e)}async fetchOrderBook(e,t=20,i={}){await this.loadMarkets(),void 0===t&&(t=20);const s={market:this.marketId(e),merge:"0.0000000001",limit:t.toString()},a=await this.publicGetMarketDepth(this.extend(s,i));return this.parseOrderBook(a.data)}parseTrade(e,t){let i=this.safeTimestamp(e,"create_time");void 0===i&&(i=this.safeInteger(e,"date_ms"));const s=this.safeString(e,"id"),a=this.safeString(e,"order_id"),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),n=this.safeString(e,"market"),c=this.safeSymbol(n,t);let d=this.safeFloat(e,"deal_money");d||(d=parseFloat(this.costToPrecision(c,r*o)));let h=void 0;const l=this.safeFloat(e,"fee");if(void 0!==l){const t=this.safeString(e,"fee_asset");h={cost:l,currency:this.safeCurrencyCode(t)}}const u=this.safeString(e,"role"),p=this.safeString(e,"type");return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:c,id:s,order:a,type:void 0,side:p,takerOrMaker:u,price:r,amount:o,cost:d,fee:h}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market:a.id},o=await this.publicGetMarketDeals(this.extend(r,s));return this.parseTrades(o.data,a,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,5)]}async fetchOHLCV(e,t="5m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={market:r.id,type:this.timeframes[t]};void 0!==s&&(o.limit=s);const n=await this.publicGetMarketKline(this.extend(o,a)),c=this.safeValue(n,"data",[]);return this.parseOHLCVs(c,r,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalanceInfo(e),i={info:t},s=this.safeValue(t,"data"),a=Object.keys(s);for(let e=0;e<a.length;e++){const t=a[e],r=this.safeCurrencyCode(t),o=this.safeValue(s,t,{}),n=this.account();n.free=this.safeFloat(o,"available"),n.used=this.safeFloat(o,"frozen"),i[r]=n}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({not_deal:"open",part_deal:"open",done:"closed",cancel:"canceled"},e,e)}parseOrder(e,t){const i=this.safeTimestamp(e,"create_time"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"deal_money"),r=this.safeFloat(e,"amount"),o=this.safeFloat(e,"deal_amount"),n=this.safeFloat(e,"avg_price");let c=void 0;const d=this.safeString(e,"market");t=this.safeMarket(d,t);const h=this.safeString(e,"fee_asset");let l=this.safeCurrencyCode(h);void 0!==t&&(c=t.symbol,void 0===l&&(l=t.quote));const u=this.safeFloat(e,"left"),p=this.parseOrderStatus(this.safeString(e,"status")),f=this.safeString(e,"order_type"),m=this.safeString(e,"type");return{id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:p,symbol:c,type:f,timeInForce:void 0,side:m,price:s,stopPrice:void 0,cost:a,average:n,amount:r,filled:o,remaining:u,trades:void 0,fee:{currency:l,cost:this.safeFloat(e,"deal_fee")},info:e}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o="privatePostOrder"+this.capitalize(t),n=this.market(e),d={market:n.id,type:i};if(s=parseFloat(s),"market"===t&&"buy"===i)if(this.options.createMarketBuyOrderRequiresPrice){if(void 0===a)throw new c(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");a=parseFloat(a),d.amount=this.costToPrecision(e,s*a)}else d.amount=this.costToPrecision(e,s);else d.amount=this.amountToPrecision(e,s);"limit"!==t&&"ioc"!==t||(d.price=this.priceToPrecision(e,a));const h=await this[o](this.extend(d,r)),l=this.safeValue(h,"data");return this.parseOrder(l,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=this.market(t),a={id:e,market:s.id},r=await this.privateDeleteOrderPending(this.extend(a,i)),o=this.safeValue(r,"data");return this.parseOrder(o,s)}async fetchOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a={id:e,market:s.id},o=await this.privateGetOrder(this.extend(a,i)),n=this.safeValue(o,"data");return this.parseOrder(n,s)}async fetchOrdersByStatus(e,t,i,s,a={}){await this.loadMarkets(),void 0===s&&(s=100);const r={page:1,limit:s};let o=void 0;void 0!==t&&(o=this.market(t),r.market=o.id);const n="privateGetOrder"+this.capitalize(e),c=await this[n](this.extend(r,a)),d=this.safeValue(c,"data"),h=this.safeValue(d,"data",[]);return this.parseOrders(h,o,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("pending",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("finished",e,t,i,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets(),void 0===i&&(i=100);const a={page:1,limit:i};let r=void 0;void 0!==e&&(r=this.market(e),a.market=r.id);const o=await this.privateGetOrderUserDeals(this.extend(a,s)),n=this.safeValue(o,"data"),c=this.safeValue(n,"data",[]);return this.parseTrades(c,r,t,i)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e);s&&(i=i+":"+s);const o={coin_type:r.id,coin_address:i,actual_amount:parseFloat(t),transfer_method:"onchain"},n=await this.privatePostBalanceCoinWithdraw(this.extend(o,a)),c=this.safeValue(n,"data",{});return this.parseTransaction(c,r)}parseTransactionStatus(e){return this.safeString({audit:"pending",pass:"pending",processing:"pending",confirming:"pending",not_pass:"failed",cancel:"canceled",finish:"ok",fail:"failed"},e,e)}parseTransaction(e,t){const i=this.safeString2(e,"coin_withdraw_id","coin_deposit_id"),s=this.safeString(e,"coin_address");let a=this.safeString(e,"remark");void 0!==a&&a.length<1&&(a=void 0);let r=this.safeValue(e,"tx_id");void 0!==r&&r.length<1&&(r=void 0);const o=this.safeString(e,"coin_type"),n=this.safeCurrencyCode(o,t),c=this.safeTimestamp(e,"create_time"),d="coin_withdraw_id"in e?"withdraw":"deposit",h=this.parseTransactionStatus(this.safeString(e,"status")),l=this.safeFloat(e,"amount");let u=this.safeFloat(e,"tx_fee");"deposit"===d&&(u=0);const p={cost:u,currency:n};return{info:e,id:i,txid:r,timestamp:c,datetime:this.iso8601(c),address:s,tag:a,type:d,amount:l,currency:n,status:h,updated:void 0,fee:p}}async fetchWithdrawals(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchWithdrawals requires a currency code argument");await this.loadMarkets();const a=this.currency(e),o={coin_type:a.id};void 0!==i&&(o.Limit=i);const n=await this.privateGetBalanceCoinWithdraw(this.extend(o,s));let c=this.safeValue(n,"data");return Array.isArray(c)||(c=this.safeValue(c,"data",[])),this.parseTransactions(c,a,t,i)}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchDeposits requires a currency code argument");await this.loadMarkets();const a=this.currency(e),o={coin_type:a.id};void 0!==i&&(o.Limit=i);const n=await this.privateGetBalanceCoinDeposit(this.extend(o,s));let c=this.safeValue(n,"data");return Array.isArray(c)||(c=this.safeValue(c,"data",[])),this.parseTransactions(c,a,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){e=this.implodeParams(e,s);let o=this.urls.api+"/"+this.version+"/"+e,n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce();n=this.extend({access_id:this.apiKey,tonce:e.toString()},n),n=this.keysort(n);const t=this.urlencode(n);a={Authorization:this.hash(this.encode(t+"&secret_key="+this.secret)).toUpperCase(),"Content-Type":"application/json"},"GET"===i||"DELETE"===i?o+="?"+t:r=this.json(n)}return{url:o,method:i,body:r,headers:a}}async request(e,t="public",i="GET",s={},r,h){const l=await this.fetch2(e,t,i,s,r,h),u=this.safeString(l,"code"),p=this.safeValue(l,"data"),f=this.safeString(l,"message");if("0"!==u||void 0===p||"Ok"!==f&&!p){const e={24:d,25:d,107:o,600:n,601:c,602:c,606:c};throw new(this.safeValue(e,u,a))(l.message)}return l}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,AuthenticationError:r,RateLimitExceeded:o,ArgumentsRequired:n}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinfalcon",name:"CoinFalcon",countries:["GB"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/41822275-ed982188-77f5-11e8-92bb-496bcd14ca52.jpg",api:"https://coinfalcon.com",www:"https://coinfalcon.com",doc:"https://docs.coinfalcon.com",fees:"https://coinfalcon.com/fees",referral:"https://coinfalcon.com/?ref=CFJSVGTUPASB"},api:{public:{get:["markets","markets/{market}/orders","markets/{market}/trades"]},private:{get:["user/accounts","user/orders","user/orders/{id}","user/trades"],post:["user/orders"],delete:["user/orders/{id}"]}},fees:{trading:{tierBased:!0,maker:0,taker:.002}},precision:{amount:8,price:8}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=this.safeValue(t,"data"),s=[];for(let e=0;e<i.length;e++){const t=i[e],[a,r]=t.name.split("-"),o=this.safeCurrencyCode(a),n=this.safeCurrencyCode(r),c=o+"/"+n,d={amount:this.safeInteger(t,"size_precision"),price:this.safeInteger(t,"price_precision")};s.push({id:t.name,symbol:c,base:o,quote:n,baseId:a,quoteId:r,active:!0,precision:d,limits:{amount:{min:Math.pow(10,-d.amount),max:void 0},price:{min:Math.pow(10,-d.price),max:void 0},cost:{min:void 0,max:void 0}},info:t})}return s}parseTicker(e,t){const i=this.safeString(e,"name"),s=this.safeSymbol(i,t,"-"),a=this.milliseconds(),r=parseFloat(e.last_price);return{symbol:s,timestamp:a,datetime:this.iso8601(a),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:this.safeFloat(e,"change_in_24h"),percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"volume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();return(await this.fetchTickers(t))[e]}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarkets(t),s=this.safeValue(i,"data"),a={};for(let e=0;e<s.length;e++){const t=this.parseTicker(s[e]);a[t.symbol]=t}return this.filterByArray(a,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.marketId(e),level:"3"},a=await this.publicGetMarketsMarketOrders(this.extend(s,i)),r=this.safeValue(a,"data",{});return this.parseOrderBook(r,void 0,"bids","asks","price","size")}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"size"),r=t.symbol;let o=void 0;void 0!==s&&void 0!==a&&(o=parseFloat(this.costToPrecision(r,s*a)));const n=this.safeString(e,"id"),c=this.safeString(e,"side"),d=this.safeString(e,"order_id");let h=void 0;const l=this.safeFloat(e,"fee");if(void 0!==l){const t=this.safeString(e,"fee_currency_code");h={cost:l,currency:this.safeCurrencyCode(t)}}return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,id:n,order:d,type:void 0,side:c,takerOrMaker:void 0,price:s,amount:a,cost:o,fee:h}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const a=this.market(e),r={market:a.id};void 0!==t&&(r.start_time=this.iso8601(t)),void 0!==i&&(r.limit=i);const o=await this.privateGetUserTrades(this.extend(r,s)),c=this.safeValue(o,"data",[]);return this.parseTrades(c,a,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market:a.id};void 0!==t&&(r.since=this.iso8601(t));const o=await this.publicGetMarketsMarketTrades(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUserAccounts(e),i={info:t},s=this.safeValue(t,"data");for(let e=0;e<s.length;e++){const t=s[e],a=this.safeString(t,"currency_code"),r=this.safeCurrencyCode(a),o={free:this.safeFloat(t,"available_balance"),used:this.safeFloat(t,"hold_balance"),total:this.safeFloat(t,"balance")};i[r]=o}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({fulfilled:"closed",canceled:"canceled",pending:"open",open:"open",partially_filled:"open"},e,e)}parseOrder(e,t){const i=this.safeString(e,"market"),s=this.safeSymbol(i,t,"-"),a=this.parse8601(this.safeString(e,"created_at")),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"size"),n=this.safeFloat(e,"size_filled");let c=void 0,d=void 0;void 0!==o&&(void 0!==n&&(c=Math.max(0,o-n)),void 0!==r&&(d=n*r));const h=this.parseOrderStatus(this.safeString(e,"status"));let l=this.safeString(e,"operation_type");void 0!==l&&(l=l.split("_"),l=l[0]);const u=this.safeString(e,"order_type");return{id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(a),timestamp:a,status:h,symbol:s,type:l,timeInForce:void 0,side:u,price:r,stopPrice:void 0,cost:d,amount:o,filled:n,remaining:c,trades:void 0,fee:void 0,info:e,lastTradeTimestamp:void 0,average:void 0}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n={market:o.id,size:this.amountToPrecision(e,s),order_type:i};"limit"===t&&(a=this.priceToPrecision(e,a),n.price=a.toString()),n.operation_type=t+"_order";const c=await this.privatePostUserOrders(this.extend(n,r)),d=this.safeValue(c,"data",{});return this.parseOrder(d,o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privateDeleteUserOrdersId(this.extend(s,i)),r=this.market(t),o=this.safeValue(a,"data",{});return this.parseOrder(o,r)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privateGetUserOrdersId(this.extend(s,i)),r=this.safeValue(a,"data",{});return this.parseOrder(r)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.market(e),a.market=r.id),void 0!==t&&(a.since_time=this.iso8601(t));const o=await this.privateGetUserOrders(this.extend(a,s)),n=this.safeValue(o,"data",[]),c=this.filterByArray(n,"status",["pending","open","partially_filled"],!1);return this.parseOrders(c,r,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o="/api/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):r=this.json(n);const e=this.seconds().toString();let t=[e,i,o].join("|");r&&(t+="|"+r);const s=this.hmac(this.encode(t),this.encode(this.secret));a={"CF-API-KEY":this.apiKey,"CF-API-TIMESTAMP":e,"CF-API-SIGNATURE":s,"Content-Type":"application/json"}}return{url:this.urls.api+o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,n,c,d,h,l){if(e<400)return;throw new(this.safeValue({401:r,429:o},e,a))(c)}}},function(e,t,i){"use strict";const s=i(1),{InsufficientFunds:a,ExchangeError:r,InvalidNonce:o,InvalidOrder:n,ArgumentsRequired:c}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinfloor",name:"coinfloor",rateLimit:1e3,countries:["UK"],has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchLedger:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87153925-ef265e80-c2c0-11ea-91b5-020c804b90e0.jpg",api:"https://webapi.coinfloor.co.uk/bist",www:"https://www.coinfloor.co.uk",doc:["https://github.com/coinfloor/api","https://www.coinfloor.co.uk/api"]},requiredCredentials:{apiKey:!0,secret:!1,password:!0,uid:!0},api:{public:{get:["{id}/ticker/","{id}/order_book/","{id}/transactions/"]},private:{post:["{id}/balance/","{id}/user_transactions/","{id}/open_orders/","{symbol}/cancel_order/","{id}/buy/","{id}/sell/","{id}/buy_market/","{id}/sell_market/","{id}/estimate_sell_market/","{id}/estimate_buy_market/"]}},markets:{"BTC/GBP":{id:"XBT/GBP",symbol:"BTC/GBP",base:"BTC",quote:"GBP",baseId:"XBT",quoteId:"GBP",precision:{price:0,amount:4}},"BTC/EUR":{id:"XBT/EUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"XBT",quoteId:"EUR",precision:{price:0,amount:4}}},exceptions:{exact:{"You have insufficient funds.":a,"Tonce is out of sequence.":o}}})}async fetchBalance(e={}){await this.loadMarkets();let t=void 0,i=e;void 0!==this.safeString(e,"symbol")&&(t=this.market(e.symbol),i=this.omit(e,"symbol"));const s=this.safeString(e,"id");if(s in this.markets_by_id&&(t=this.markets_by_id[s]),void 0===t)throw new c(this.id+" fetchBalance requires a symbol param");const a={id:t.id},r=await this.privatePostIdBalance(this.extend(a,i)),o={info:r},n=t.base,d=t.quote,h=this.safeStringLower(t,"baseId"),l=this.safeStringLower(t,"quoteId");return o[n]={free:this.safeFloat(r,h+"_available"),used:this.safeFloat(r,h+"_reserved"),total:this.safeFloat(r,h+"_balance")},o[d]={free:this.safeFloat(r,l+"_available"),used:this.safeFloat(r,l+"_reserved"),total:this.safeFloat(r,l+"_balance")},this.parseBalance(o)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e)},a=await this.publicGetIdOrderBook(this.extend(s,i));return this.parseOrderBook(a)}parseTicker(e,t){const i=this.milliseconds();let s=void 0;void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"vwap"),r=this.safeFloat(e,"volume");let o=void 0;void 0!==a&&(o=r*a);const n=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:a,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:r,quoteVolume:o,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={id:i.id},a=await this.publicGetIdTicker(this.extend(s,t));return this.parseTicker(a,i)}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid"),a=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount");let o=void 0;void 0!==a&&void 0!==r&&(o=a*r);let n=void 0;return void 0!==t&&(n=t.symbol),{info:e,id:s,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:n,type:void 0,side:void 0,takerOrMaker:void 0,price:a,amount:r,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={id:a.id},o=await this.publicGetIdTransactions(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchLedger(e,t,i,s={}){await this.loadMarkets();let a=void 0;if(void 0!==e&&(a=this.market(e),void 0===a))throw new c(this.id+" fetchTransactions requires a code argument (a market symbol)");const r={id:a.id,limit:i},o=await this.privatePostIdUserTransactions(this.extend(r,s));return this.parseLedger(o,void 0,t,void 0)}parseLedgerEntryStatus(e){return this.safeString({completed:"ok"},e,e)}parseLedgerEntryType(e){return this.safeString({0:"transaction",1:"transaction",2:"trade"},e,e)}parseLedgerEntry(e,t){const i=Object.keys(e);let s=void 0,a=void 0,r=void 0,o=void 0;for(let t=0;t<i.length;t++){const n=i[t];if(n.indexOf("_")>0){const t=n.split("_");if(2===t.length){const i=this.safeFloat(e,t[0]),n=this.safeFloat(e,t[1]);void 0!==i&&void 0!==n&&(s=t[0],a=t[1],r=i,o=n)}}}const n=this.safeCurrencyCode(s),c=this.safeCurrencyCode(a),d=this.parseLedgerEntryType(this.safeString(e,"type")),h=this.safeString(e,"id"),l=this.parse8601(this.safeString(e,"datetime"));let u=void 0;const p=this.safeFloat(e,"fee"),f={id:void 0,timestamp:l,datetime:this.iso8601(l),amount:void 0,direction:void 0,currency:void 0,type:d,referenceId:h,referenceAccount:void 0,before:void 0,after:void 0,status:"ok",fee:u,info:e};if("trade"===d)return void 0!==p&&(u={cost:p,currency:c}),[this.extend(f,{currency:n,amount:Math.abs(r),direction:r>0?"in":"out"}),this.extend(f,{currency:c,amount:Math.abs(o),direction:o>0?"in":"out",fee:u})];{const e=0===r?o:r,t=0===r?c:n,i=e>0?"in":"out";return void 0!==p&&(u={cost:p,currency:t}),this.extend(f,{currency:t,amount:Math.abs(e),direction:i,fee:u})}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o={id:this.marketId(e)};let n="privatePostId"+this.capitalize(i);"market"===t?(o.quantity=s,n+="Market"):(o.price=a,o.amount=s);const c=await this[n](this.extend(o,r)),d=this.parse8601(this.safeString(c,"datetime"));return{id:this.safeString(c,"id"),clientOrderId:void 0,datetime:this.iso8601(d),timestamp:d,type:t,price:this.safeFloat(c,"price"),remaining:this.safeFloat(c,"amount"),info:c}}async cancelOrder(e,t,i={}){if(void 0===t)throw new c(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s={symbol:this.market(t).id,id:e},a=await this.privatePostSymbolCancelOrder(s);if("false"===a)throw new n(this.id+" cancel was rejected");return a}parseOrder(e,t){const i=this.parse8601(this.safeString(e,"datetime")),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount");let r=void 0;void 0!==s&&void 0!==a&&(r=s*a);let o=void 0;const n=this.safeString(e,"status");0===e.type?o="buy":1===e.type&&(o="sell");let c=void 0;void 0!==t&&(c=t.symbol);return{info:e,id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:n,symbol:c,type:"limit",timeInForce:void 0,side:o,price:s,stopPrice:void 0,amount:void 0,filled:void 0,remaining:a,cost:r,fee:void 0,average:void 0,trades:void 0}}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchOpenOrders requires a symbol param");await this.loadMarkets();const a=this.market(e),r={id:a.id},o=await this.privatePostIdOpenOrders(this.extend(r,s));return this.parseOrders(o,a,t,i,{status:"open"})}handleErrors(e,t,i,s,a,o,n,c,d){if(e<400)return;if(void 0===n)return;const h=this.safeString(n,"error_msg"),l=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,h,l),new r(l)}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce();r=this.urlencode(this.extend({nonce:e},n));const t=this.uid+"/"+this.apiKey+":"+this.password;a={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+this.decode(this.stringToBase64(t))}}return{url:o,method:i,body:r,headers:a}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coingi",name:"Coingi",rateLimit:1e3,countries:["PA","BG","CN","US"],has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{referral:"https://www.coingi.com/?r=XTPPMC",logo:"https://user-images.githubusercontent.com/1294454/28619707-5c9232a8-7212-11e7-86d6-98fe5d15cc6e.jpg",api:{www:"https://coingi.com",current:"https://api.coingi.com",user:"https://api.coingi.com"},www:"https://coingi.com",doc:"https://coingi.docs.apiary.io"},api:{www:{get:[""]},current:{get:["order-book/{pair}/{askCount}/{bidCount}/{depth}","transactions/{pair}/{maxCount}","24hour-rolling-aggregation"]},user:{post:["balance","add-order","cancel-order","orders","transactions","create-crypto-withdrawal"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,LTC:.01,DOGE:2,PPC:.02,VTC:.2,NMC:2,DASH:.002,USD:10,EUR:10},deposit:{BTC:0,LTC:0,DOGE:0,PPC:0,VTC:0,NMC:0,DASH:0,USD:5,EUR:1}}}})}async fetchMarkets(e={}){const t=(await this.wwwGet(e)).split('do=currencyPairSelector-selectCurrencyPair" class="active">')[1].split('<div class="currency-pair-label">'),i=[];for(let e=1;e<t.length;e++){let s=t[e].split("</div>")[0];s=s.replace("/","-"),s=s.toLowerCase();const[a,r]=s.split("-");let o=a.toUpperCase(),n=r.toUpperCase();o=this.safeCurrencyCode(o),n=this.safeCurrencyCode(n);const c=o+"/"+n,d={amount:8,price:8};i.push({id:s,symbol:c,base:o,quote:n,baseId:a,quoteId:r,info:s,active:!0,precision:d,limits:{amount:{min:Math.pow(10,-d.amount),max:Math.pow(10,d.amount)},price:{min:Math.pow(10,-d.price),max:void 0},cost:{min:0,max:void 0}}})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=[],i=Object.keys(this.currencies);for(let e=0;e<i.length;e++){const s=i[e];t.push(s.toLowerCase())}const s={currencies:t.join(",")},a=await this.userPostBalance(this.extend(s,e)),r={info:a};for(let e=0;e<a.length;e++){const t=a[e],i=this.safeString(t.currency,"name"),s=this.safeCurrencyCode(i),o=this.account();o.free=this.safeFloat(t,"available");const n=this.safeFloat(t,"blocked"),c=this.safeFloat(t,"inOrders"),d=this.safeFloat(t,"withdrawing");o.used=this.sum(n,c,d),r[s]=o}return this.parseBalance(r)}async fetchOrderBook(e,t=512,i={}){await this.loadMarkets();const s={pair:this.market(e).id,depth:32,askCount:t,bidCount:t},a=await this.currentGetOrderBookPairAskCountBidCountDepth(this.extend(s,i));return this.parseOrderBook(a,void 0,"bids","asks","price","baseAmount")}parseTicker(e,t){const i=this.milliseconds();let s=void 0;return void 0!==t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:void 0,last:void 0,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"baseVolume"),quoteVolume:this.safeFloat(e,"counterVolume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.currentGet24hourRollingAggregation(t),s={};for(let e=0;e<i.length;e++){const t=i[e],a=t.currencyPair.base.toUpperCase()+"/"+t.currencyPair.counter.toUpperCase();let r=void 0;a in this.markets&&(r=this.markets[a]),s[a]=this.parseTicker(t,r)}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=await this.fetchTickers(void 0,t);if(e in i)return i[e];throw new a(this.id+" return did not contain "+e)}parseTrade(e,t){const i=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount");let a=void 0;void 0!==i&&void 0!==s&&(a=i*s);const r=this.safeInteger(e,"timestamp"),o=this.safeString(e,"id"),n=this.safeString(e,"currencyPair"),c=this.safeSymbol(n,t);return{id:o,info:e,timestamp:r,datetime:this.iso8601(r),symbol:c,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:i,amount:s,cost:a,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={pair:a.id,maxCount:128},o=await this.currentGetTransactionsPairMaxCount(this.extend(r,s));return this.parseTrades(o,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o={currencyPair:this.marketId(e),volume:s,price:a,orderType:"buy"===i?0:1},n=await this.userPostAddOrder(this.extend(o,r));return{info:n,id:n.result}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e};return await this.userPostCancelOrder(this.extend(s,i))}sign(e,t="current",i="GET",s={},a,r){let o=this.urls.api[t];"www"!==t&&(o+="/"+t+"/"+this.implodeParams(e,s));const n=this.omit(s,this.extractParams(e));if("current"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else if("user"===t){this.checkRequiredCredentials();const e=this.nonce(),t=this.extend({token:this.apiKey,nonce:e},n),i=e.toString()+"$"+this.apiKey;t.signature=this.hmac(this.encode(i),this.encode(this.secret)),r=this.json(t),a={"Content-Type":"application/json"}}return{url:o,method:i,body:r,headers:a}}async request(e,t="current",i="GET",s={},r,o){const n=await this.fetch2(e,t,i,s,r,o);if("string"!=typeof n&&"errors"in n)throw new a(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinmarketcap",name:"CoinMarketCap",rateLimit:1e4,version:"v1",countries:["US"],has:{cancelOrder:!1,CORS:!0,createLimitOrder:!1,createMarketOrder:!1,createOrder:!1,editOrder:!1,privateAPI:!1,fetchBalance:!1,fetchCurrencies:!0,fetchL2OrderBook:!1,fetchMarkets:!0,fetchOHLCV:!1,fetchOrderBook:!1,fetchTicker:!0,fetchTickers:!0,fetchTrades:!1},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182086-1cd4cd00-c2ec-11ea-9ec4-d0cf2a2abf62.jpg",api:{public:"https://api.coinmarketcap.com",files:"https://files.coinmarketcap.com",charts:"https://graph.coinmarketcap.com"},www:"https://coinmarketcap.com",doc:"https://coinmarketcap.com/api"},requiredCredentials:{apiKey:!1,secret:!1},api:{files:{get:["generated/stats/global.json"]},graphs:{get:["currencies/{name}/"]},public:{get:["ticker/","ticker/{id}/","global/"]}},currencyCodes:["AUD","BRL","CAD","CHF","CNY","EUR","GBP","HKD","IDR","INR","JPY","KRW","MXN","RUB","USD","BTC","ETH","LTC"]})}async fetchOrderBook(e,t,i={}){throw new a("Fetching order books is not supported by the API of "+this.id)}currencyCode(e,t){return this.safeValue({ACChain:"ACChain",AdCoin:"AdCoin",BatCoin:"BatCoin","BigONE Token":"BigONE Token",Bitgem:"Bitgem",BlazeCoin:"BlazeCoin",BlockCAT:"BlockCAT","Blocktrade Token":"Blocktrade Token","BOX Token":"BOX Token",Catcoin:"Catcoin",CanYaCoin:"CanYaCoin",CryptoBossCoin:"CryptoBossCoin",Comet:"Comet",CPChain:"CPChain",CrowdCoin:"CrowdCoin",Cryptaur:"Cryptaur",Cubits:"Cubits","DAO.Casino":"DAO.Casino",DefiBox:"DefiBox","E-Dinar Coin":"E-Dinar Coin",EDRcoin:"EDRcoin",ENTCash:"ENTCash",FairCoin:"FairCoin","Fabric Token":"Fabric Token",GHOSTPRISM:"GHOSTPRISM","Global Tour Coin":"Global Tour Coin",GuccioneCoin:"GuccioneCoin",HarmonyCoin:"HarmonyCoin","Harvest Masternode Coin":"Harvest Masternode Coin","HOT Token":"HOT Token","Hydro Protocol":"Hydro Protocol",Huncoin:"Huncoin",iCoin:"iCoin","Infinity Economics":"Infinity Economics","IQ.cash":"IQ.cash","KingN Coin":"KingN Coin",LiteBitcoin:"LiteBitcoin",Maggie:"Maggie","Menlo One":"Menlo One","Mobilian Coin":"Mobilian Coin",Monarch:"Monarch","MTC Mesh Network":"MTC Mesh Network",IOTA:"IOTA",NetCoin:"NetCoin",PCHAIN:"PCHAIN",Penta:"Penta",Plair:"Plair",PlayChip:"PlayChip",Polcoin:"Polcoin",PutinCoin:"PutinCoin",Rcoin:"Rcoin",TerraCredit:"TerraCredit",Themis:"Themis","UNI COIN":"UNI COIN","UNICORN Token":"UNICORN Token",Universe:"Universe"},t,e)}async fetchMarkets(e={}){const t=await this.publicGetTicker(this.extend({limit:0},e)),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.currencyCodes;for(let e=0;e<a.length;e++){const t=a[e],r=t.toLowerCase(),o=s.id,n=this.currencyCode(s.symbol,s.name),c=n+"/"+t,d=o+"/"+r;i.push({id:d,symbol:c,base:n,quote:t,baseId:o,quoteId:r,info:s,active:void 0,precision:this.precision,limits:this.limits})}}return i}async fetchGlobal(e="USD"){await this.loadMarkets();const t={};return e&&(t.convert=e),await this.publicGetGlobal(t)}parseTicker(e,t){let i=this.safeTimestamp(e,"last_updated");void 0===i&&(i=this.milliseconds());const s=this.safeFloat(e,"percent_change_24h");let a=void 0,r=void 0,o=void 0;if(void 0!==t){r=t.symbol;const i="price_"+t.quoteId;a=this.safeFloat(e,i);const s="24h_volume_"+t.quoteId;o=this.safeFloat(e,s)}return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:s,average:void 0,baseVolume:void 0,quoteVolume:o,info:e}}async fetchTickers(e="USD",t={}){await this.loadMarkets();const i={limit:1e4};e&&(i.convert=e);const s=await this.publicGetTicker(this.extend(i,t)),a={};for(let t=0;t<s.length;t++){const i=s[t],r=e.toLowerCase(),o=i.id+"/"+r;let n=o,c=void 0;o in this.markets_by_id&&(c=this.markets_by_id[o],n=c.symbol),a[n]=this.parseTicker(i,c)}return a}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={convert:i.quote,id:i.baseId},a=(await this.publicGetTickerId(this.extend(s,t)))[0];return this.parseTicker(a,i)}async fetchCurrencies(e={}){const t=await this.publicGetTicker(this.extend({limit:0},e)),i={};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"symbol"),r=this.safeString(s,"name"),o=8,n=this.currencyCode(a,r);i[n]={id:a,code:n,info:s,name:r,active:!0,fee:void 0,precision:o,limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return i}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));return Object.keys(n).length&&(o+="?"+this.urlencode(n)),{url:o,method:i,body:r,headers:a}}async request(e,t="public",i="GET",s={},r,o){const n=await this.fetch2(e,t,i,s,r,o);if("error"in n&&n.error)throw new a(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,InvalidOrder:o,OrderNotFound:n,RateLimitExceeded:c,InsufficientFunds:d}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinmate",name:"CoinMate",countries:["GB","CZ","EU"],rateLimit:1e3,has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,fetchTransactions:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87460806-1c9f3f00-c616-11ea-8c46-a77018a8f3f4.jpg",api:"https://coinmate.io/api",www:"https://coinmate.io",fees:"https://coinmate.io/fees",doc:["https://coinmate.docs.apiary.io","https://coinmate.io/developers"],referral:"https://coinmate.io?referral=YTFkM1RsOWFObVpmY1ZjMGREQmpTRnBsWjJJNVp3PT0"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["orderBook","ticker","transactions","tradingPairs"]},private:{post:["balances","bitcoinCashWithdrawal","bitcoinCashDepositAddresses","bitcoinDepositAddresses","bitcoinWithdrawal","bitcoinWithdrawalFees","buyInstant","buyLimit","cancelOrder","cancelOrderWithInfo","createVoucher","dashDepositAddresses","dashWithdrawal","ethereumWithdrawal","ethereumDepositAddresses","litecoinWithdrawal","litecoinDepositAddresses","openOrders","order","orderHistory","orderById","pusherAuth","redeemVoucher","replaceByBuyLimit","replaceByBuyInstant","replaceBySellLimit","replaceBySellInstant","rippleDepositAddresses","rippleWithdrawal","sellInstant","sellLimit","transactionHistory","traderFees","tradeHistory","transfer","transferHistory","unconfirmedBitcoinDeposits","unconfirmedBitcoinCashDeposits","unconfirmedDashDeposits","unconfirmedEthereumDeposits","unconfirmedLitecoinDeposits","unconfirmedRippleDeposits"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.0012,taker:.0025,tiers:{taker:[[0,.0025],[1e4,.0023],[1e5,.0021],[25e4,.002],[5e5,.0015],[1e6,.0013],[3e6,.001],[15e6,5e-4]],maker:[[0,.0012],[1e4,.0011],[1e6,.001],[25e4,8e-4],[5e5,5e-4],[1e6,3e-4],[3e6,2e-4],[15e6,0]]}},promotional:{trading:{maker:5e-4,taker:.0015,tiers:{taker:[[0,.0015],[1e4,.14/100],[1e5,.0013],[25e4,.0012],[5e5,.0011],[1e6,.001],[3e6,8e-4],[15e6,5e-4]],maker:[[0,5e-4],[1e4,4e-4],[1e6,3e-4],[25e4,2e-4],[5e5,0],[1e6,0],[3e6,0],[15e6,0]]}}}},options:{promotionalMarkets:["ETH/EUR","ETH/CZK","ETH/BTC","XRP/EUR","XRP/CZK","XRP/BTC","DASH/EUR","DASH/CZK","DASH/BTC","BCH/EUR","BCH/CZK","BCH/BTC"]},exceptions:{exact:{"No order with given ID":n},broad:{"Not enough account balance available":d,"Incorrect order ID":o,"Minimum Order Size ":o,"TOO MANY REQUESTS":c}}})}async fetchMarkets(e={}){const t=await this.publicGetTradingPairs(e),i=this.safeValue(t,"data"),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"name"),r=this.safeString(t,"firstCurrency"),o=this.safeString(t,"secondCurrency"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o),d=n+"/"+c,h=this.safeValue(this.options,"promotionalMarkets",[]);let l=this.safeValue(this.fees,"trading");if(this.inArray(d,h)){const e=this.safeValue(this.fees,"promotional",{});l=this.safeValue(e,"trading",l)}s.push({id:a,symbol:d,base:n,quote:c,baseId:r,quoteId:o,active:void 0,maker:l.maker,taker:l.taker,info:t,precision:{price:this.safeInteger(t,"priceDecimals"),amount:this.safeInteger(t,"lotDecimals")},limits:{amount:{min:this.safeFloat(t,"minAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalances(e),i=this.safeValue(t,"data"),s={info:t},a=Object.keys(i);for(let e=0;e<a.length;e++){const t=a[e],r=this.safeCurrencyCode(t),o=this.safeValue(i,t),n=this.account();n.free=this.safeFloat(o,"available"),n.used=this.safeFloat(o,"reserved"),n.total=this.safeFloat(o,"balance"),s[r]=n}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currencyPair:this.marketId(e),groupByPriceLimit:"False"},a=(await this.publicGetOrderBook(this.extend(s,i))).data,r=this.safeTimestamp(a,"timestamp");return this.parseOrderBook(a,r,"bids","asks","price","amount")}async fetchTicker(e,t={}){await this.loadMarkets();const i={currencyPair:this.marketId(e)},s=await this.publicGetTicker(this.extend(i,t)),a=this.safeValue(s,"data"),r=this.safeTimestamp(a,"timestamp"),o=this.safeFloat(a,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(a,"high"),low:this.safeFloat(a,"low"),bid:this.safeFloat(a,"bid"),bidVolume:void 0,ask:this.safeFloat(a,"ask"),vwap:void 0,askVolume:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(a,"amount"),quoteVolume:void 0,info:a}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const a={limit:1e3};void 0!==i&&(a.limit=i),void 0!==t&&(a.timestampFrom=t),void 0!==e&&(a.currency=this.currencyId(e));const r=(await this.privatePostTransferHistory(this.extend(a,s))).data;return this.parseTransactions(r,void 0,t,i)}parseTransactionStatus(e){return this.safeString({COMPLETED:"ok"},e,e)}parseTransaction(e,t){const i=this.safeInteger(e,"timestamp"),s=this.safeFloat(e,"amount"),a=this.safeFloat(e,"fee"),r=this.safeString(e,"txid"),o=this.safeString(e,"destination"),n=this.safeString(e,"destinationTag"),c=this.safeString(e,"amountCurrency"),d=this.safeCurrencyCode(c,t),h=this.safeStringLower(e,"transferType"),l=this.parseTransactionStatus(this.safeString(e,"transferStatus"));return{id:this.safeString(e,"transactionId"),timestamp:i,datetime:this.iso8601(i),currency:d,amount:s,type:h,txid:r,address:o,tag:n,status:l,fee:{cost:a,currency:d},info:e}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets(),void 0===i&&(i=1e3);const a={limit:i};if(void 0!==e){const t=this.market(e);a.currencyPair=t.id}void 0!==t&&(a.timestampFrom=t);const r=(await this.privatePostTradeHistory(this.extend(a,s))).data;return this.parseTrades(r,void 0,t,i)}parseTrade(e,t){const i=this.safeString(e,"currencyPair");t=this.safeMarket(i,t,"_");const s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount");let r=void 0;void 0!==a&&void 0!==s&&(r=s*a);const o=this.safeStringLower2(e,"type","tradeType"),n=this.safeStringLower(e,"orderType"),c=this.safeString(e,"orderId"),d=this.safeString(e,"transactionId"),h=this.safeInteger2(e,"timestamp","createdTimestamp");let l=void 0;const u=this.safeFloat(e,"fee");void 0!==u&&(l={cost:u,currency:t.quote});let p=this.safeString(e,"feeType");return p="MAKER"===p?"maker":"taker",{id:d,info:e,timestamp:h,datetime:this.iso8601(h),symbol:t.symbol,type:n,side:o,order:c,takerOrMaker:p,price:s,amount:a,cost:r,fee:l}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={currencyPair:a.id,minutesIntoHistory:10},o=await this.publicGetTransactions(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,a,t,i)}async fetchOpenOrders(e,t,i,s={}){const a=await this.privatePostOpenOrders(this.extend({},s));return this.parseOrders(a.data,void 0,t,i,{status:"open"})}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e),o={currencyPair:a.id};void 0!==i&&(o.limit=i);const n=await this.privatePostOrderHistory(this.extend(o,s));return this.parseOrders(n.data,a,t,i)}parseOrderStatus(e){return this.safeString({FILLED:"closed",CANCELLED:"canceled",PARTIALLY_FILLED:"open",OPEN:"open"},e,e)}parseOrderType(e){return this.safeString({LIMIT:"limit",MARKET:"market"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeInteger(e,"timestamp"),a=this.safeStringLower(e,"type"),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"originalAmount");let n=this.safeFloat(e,"remainingAmount");void 0===n&&(n=this.safeFloat(e,"amount"));let c=this.parseOrderStatus(this.safeString(e,"status"));const d=this.parseOrderType(this.safeString(e,"orderTradeType"));let h=void 0,l=void 0;void 0!==o&&void 0!==n&&(h=Math.max(o-n,0),0===n&&(c="closed"),void 0!==r&&(l=h*r));const u=this.safeFloat(e,"avgPrice"),p=this.safeString(e,"currencyPair"),f=this.safeSymbol(p,t,"_"),m=this.safeString(e,"clientOrderId"),v=this.safeFloat(e,"stopPrice");return{id:i,clientOrderId:m,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:f,type:d,timeInForce:void 0,side:a,price:r,stopPrice:v,amount:o,cost:l,average:u,filled:h,remaining:n,status:c,trades:void 0,info:e,fee:void 0}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();let o="privatePost"+this.capitalize(i);const n={currencyPair:this.marketId(e)};"market"===t?("buy"===i?n.total=this.amountToPrecision(e,s):n.amount=this.amountToPrecision(e,s),o+="Instant"):(n.amount=this.amountToPrecision(e,s),n.price=this.priceToPrecision(e,a),o+=this.capitalize(t));const c=await this[o](this.extend(n,r));return{info:c,id:this.safeString(c,"data")}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e};let a=void 0;t&&(a=this.market(t));const r=await this.privatePostOrderById(this.extend(s,i)),o=this.safeValue(r,"data");return this.parseOrder(o,a)}async cancelOrder(e,t,i={}){const s={orderId:e};return{info:await this.privatePostCancelOrderWithInfo(this.extend(s,i))}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.hmac(this.encode(t),this.encode(this.secret));r=this.urlencode(this.extend({clientId:this.uid,nonce:e,publicKey:this.apiKey,signature:i.toUpperCase()},s)),a={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0!==n&&"error"in n&&n.error){const e=this.safeString(n,"errorMessage"),t=this.id+" "+e;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new a(this.id+" "+this.json(n))}if(e>400){if(o){const e=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,o,e),this.throwBroadlyMatchedException(this.exceptions.broad,o,e),new a(e)}throw new a(this.id+" "+o)}}}},function(e,t,i){"use strict";const s=i(1),{BadSymbol:a,BadRequest:r,ExchangeError:o,ArgumentsRequired:n,OrderNotFound:c,OnMaintenance:d}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinone",name:"CoinOne",countries:["KR"],rateLimit:667,version:"v2",has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchCurrencies:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchClosedOrders:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/38003300-adc12fba-323f-11e8-8525-725f53c4a659.jpg",api:"https://api.coinone.co.kr",www:"https://coinone.co.kr",doc:"https://doc.coinone.co.kr"},requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["orderbook/","trades/","ticker/"]},private:{post:["account/btc_deposit_address/","account/balance/","account/daily_balance/","account/user_info/","account/virtual_account/","order/cancel_all/","order/cancel/","order/limit_buy/","order/limit_sell/","order/complete_orders/","order/limit_orders/","order/order_info/","transaction/auth_number/","transaction/history/","transaction/krw/history/","transaction/btc/","transaction/coin/"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002}},precision:{price:4,amount:4,cost:8},exceptions:{405:d,104:c,108:a,107:r}})}async fetchMarkets(e={}){const t=await this.publicGetTicker({currency:"all"}),i=[],s=this.safeCurrencyCode("krw"),a=Object.keys(t);for(let e=0;e<a.length;e++){const r=a[e],o=this.safeValue(t,r,{});if(void 0===this.safeValue(o,"currency"))continue;const n=this.safeCurrencyCode(r);i.push({id:r,symbol:n+"/"+s,base:n,quote:s,baseId:r,quoteId:"krw",active:!0})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostAccountBalance(e),i={info:t},s=this.omit(t,["errorCode","result","normalWallets"]),a=Object.keys(s);for(let e=0;e<a.length;e++){const t=a[e],r=s[t],o=this.safeCurrencyCode(t),n=this.account();n.free=this.safeFloat(r,"avail"),n.total=this.safeFloat(r,"balance"),i[o]=n}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currency:this.market(e).id,format:"json"},a=await this.publicGetOrderbook(this.extend(s,i)),r=this.safeTimestamp(a,"timestamp");return this.parseOrderBook(a,r,"bid","ask","price","qty")}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(this.extend({currency:"all",format:"json"},t)),s={},a=Object.keys(i),r=this.safeTimestamp(i,"timestamp");for(let e=0;e<a.length;e++){const t=a[e];let o=t,n=void 0;if(t in this.markets_by_id){n=this.markets_by_id[t],o=n.symbol;const e=i[t];s[o]=this.parseTicker(e,n),s[o].timestamp=r}}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={currency:i.id,format:"json"},a=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(a,i)}parseTicker(e,t){const i=this.safeTimestamp(e,"timestamp"),s=this.safeFloat(e,"first"),a=this.safeFloat(e,"last");let r=void 0;void 0!==s&&void 0!==a&&(r=this.sum(s,a)/2);const o=this.safeFloat(e,"yesterday_last");let n=void 0,c=void 0;void 0!==a&&void 0!==o&&(n=a-o,0!==o&&(c=n/o*100));return{symbol:void 0!==t?t.symbol:void 0,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:s,close:a,last:a,previousClose:o,change:n,percentage:c,average:r,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}parseTrade(e,t){const i=this.safeTimestamp(e,"timestamp"),s=void 0!==t?t.symbol:void 0,a=this.safeString(e,"is_ask");let r=this.safeString(e,"type");void 0!==a?"1"===a?r="sell":"0"===a&&(r="buy"):"ask"===r?r="sell":"bid"===r&&(r="buy");const o=this.safeFloat(e,"price"),n=this.safeFloat(e,"qty");let c=void 0;void 0!==o&&void 0!==n&&(c=o*n);const d=this.safeString(e,"orderId");let h=this.safeFloat(e,"fee"),l=void 0;if(void 0!==h){h=Math.abs(h);let i=this.safeFloat(e,"feeRate");i=Math.abs(i);let s=void 0;void 0!==t&&(s="sell"===r?t.quote:t.base),l={cost:h,currency:s,rate:i}}return{id:this.safeString(e,"id"),info:e,timestamp:i,datetime:this.iso8601(i),order:d,symbol:s,type:void 0,side:r,takerOrMaker:void 0,price:o,amount:n,cost:c,fee:l}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={currency:a.id,format:"json"},o=await this.publicGetTrades(this.extend(r,s)),n=this.safeValue(o,"completeOrders",[]);return this.parseTrades(n,a,t,i)}async createOrder(e,t,i,s,a,r={}){if("limit"!==t)throw new o(this.id+" allows limit orders only");await this.loadMarkets();const n={price:a,currency:this.marketId(e),qty:s},c="privatePostOrder"+this.capitalize(t)+this.capitalize(i),d=await this[c](this.extend(n,r));return this.parseOrder(d)}async fetchOrder(e,t,i={}){if(void 0===t)throw new n(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a={order_id:e,currency:s.id},r=await this.privatePostOrderOrderInfo(this.extend(a,i)),o=this.safeValue(r,"info",{});return o.status=this.safeString(o,"status"),this.parseOrder(o,s)}parseOrderStatus(e){return this.safeString({live:"open",partially_filled:"open",filled:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"orderId"),s=this.safeFloat(e,"price"),a=this.safeTimestamp(e,"timestamp");let r=this.safeString(e,"type");"ask"===r?r="sell":"bid"===r&&(r="buy");const o=this.safeFloat(e,"remainQty");let n=void 0;const c=this.safeFloat(e,"qty");let d=this.safeString(e,"status");"live"===d&&void 0!==o&&void 0!==c&&o<c&&(d="canceled"),void 0!==o&&void 0!==c&&(n=Math.max(c-o)),d=this.parseOrderStatus(d);let h=void 0;void 0!==s&&void 0!==n&&(h=s*n);let l=void 0,u=void 0,p=void 0;const f=this.safeStringLower(e,"currency");void 0!==f&&(f in this.markets_by_id?t=this.markets_by_id[f]:(u=this.safeCurrencyCode(f),p="KRW",l=u+"/"+p)),void 0===l&&void 0!==t&&(l=t.symbol,u=t.base,p=t.quote);let m=void 0;const v=this.safeFloat(e,"fee");if(void 0!==v){const t="sell"===r?p:u;m={cost:v,rate:this.safeFloat(e,"feeRate"),currency:t}}return{info:e,id:i,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:l,type:"limit",timeInForce:void 0,side:r,price:s,stopPrice:void 0,cost:h,average:void 0,amount:c,filled:n,remaining:c,status:d,fee:m,trades:void 0}}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new o(this.id+" allows fetching closed orders with a specific symbol");await this.loadMarkets();const a=this.market(e),r={currency:a.id},n=await this.privatePostOrderLimitOrders(this.extend(r,s)),c=this.safeValue(n,"limitOrders",[]);return this.parseOrders(c,a,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const a=this.market(e),r={currency:a.id},o=await this.privatePostOrderCompleteOrders(this.extend(r,s)),c=this.safeValue(o,"completeOrders",[]);return this.parseTrades(c,a,t,i)}async cancelOrder(e,t,i={}){if(void 0===t)throw new n(this.id+" cancelOrder requires a symbol argument. To cancel the order, pass a symbol argument and {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument of cancelOrder.");const s=this.safeFloat(i,"price"),a=this.safeFloat(i,"qty"),r=this.safeInteger(i,"is_ask");if(void 0===s||void 0===a||void 0===r)throw new n(this.id+" cancelOrder requires {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument.");await this.loadMarkets();const o={order_id:e,price:s,qty:a,is_ask:r,currency:this.marketId(t)};return await this.privatePostOrderCancel(this.extend(o,i))}sign(e,t="public",i="GET",s={},a,r){const o=this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));let c=this.urls.api+"/";if("public"===t)c+=o,Object.keys(n).length&&(c+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),c+=this.version+"/"+o;const e=this.nonce().toString(),t=this.json(this.extend({access_token:this.apiKey,nonce:e},s)),i=this.stringToBase64(t);r=this.decode(i);const n=this.secret.toUpperCase();a={"Content-Type":"application/json","X-COINONE-PAYLOAD":i,"X-COINONE-SIGNATURE":this.hmac(i,this.encode(n),"sha512")}}return{url:c,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,r,n,c,d){if(void 0!==n){if(!("result"in n))throw new o(this.id+" "+r);if("success"!==n.result){const e=this.safeString(n,"errorCode"),t=this.id+" "+r;throw this.throwExactlyMatchedException(this.exceptions,e,t),new o(t)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,AuthenticationError:r,NotSupported:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinspot",name:"CoinSpot",countries:["AU"],rateLimit:1e3,has:{cancelOrder:!1,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28208429-3cacdf9a-6896-11e7-854e-4c79a772a30f.jpg",api:{public:"https://www.coinspot.com.au/pubapi",private:"https://www.coinspot.com.au/api"},www:"https://www.coinspot.com.au",doc:"https://www.coinspot.com.au/api",referral:"https://www.coinspot.com.au/register?code=PJURCU"},api:{public:{get:["latest"]},private:{post:["orders","orders/history","my/coin/deposit","my/coin/send","quote/buy","quote/sell","my/balances","my/orders","my/buy","my/sell","my/buy/cancel","my/sell/cancel","ro/my/balances","ro/my/balances/{cointype}","ro/my/deposits","ro/my/withdrawals","ro/my/transactions","ro/my/transactions/{cointype}","ro/my/transactions/open","ro/my/transactions/{cointype}/open","ro/my/sendreceive","ro/my/affiliatepayments","ro/my/referralpayments"]}},markets:{"BTC/AUD":{id:"btc",symbol:"BTC/AUD",base:"BTC",quote:"AUD",baseId:"btc",quoteId:"aud"},"LTC/AUD":{id:"ltc",symbol:"LTC/AUD",base:"LTC",quote:"AUD",baseId:"ltc",quoteId:"aud"},"DOGE/AUD":{id:"doge",symbol:"DOGE/AUD",base:"DOGE",quote:"AUD",baseId:"doge",quoteId:"aud"}},commonCurrencies:{DRK:"DASH"}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostMyBalances(e),i={info:t},s=this.safeValue(t,"balance",{}),a=Object.keys(s);for(let e=0;e<a.length;e++){const t=a[e],r=this.safeCurrencyCode(t),o=this.account();o.total=this.safeFloat(s,t),i[r]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={cointype:this.market(e).id},a=await this.privatePostOrders(this.extend(s,i));return this.parseOrderBook(a,void 0,"buyorders","sellorders","rate","amount")}async fetchTicker(e,t={}){await this.loadMarkets();const i=await this.publicGetLatest(t);let s=this.marketId(e);s=s.toLowerCase();const a=i.prices[s],r=this.milliseconds(),o=this.safeFloat(a,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:this.safeFloat(a,"bid"),bidVolume:void 0,ask:this.safeFloat(a,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:a}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={cointype:a.id},o=await this.privatePostOrdersHistory(this.extend(r,s)),n=this.safeValue(o,"orders",[]);return this.parseTrades(n,a,t,i)}parseTrade(e,t){const i=this.safeFloat(e,"rate"),s=this.safeFloat(e,"amount");let a=this.safeFloat(e,"total");void 0===a&&void 0!==i&&void 0!==s&&(a=i*s);const r=this.safeInteger(e,"solddate"),o=this.safeString(e,"market");return{info:e,id:void 0,symbol:this.safeSymbol(o,t,"/"),timestamp:r,datetime:this.iso8601(r),order:void 0,type:void 0,side:void 0,takerOrMaker:void 0,price:i,amount:s,cost:a,fee:void 0}}async createOrder(e,t,i,s,r,o={}){await this.loadMarkets();const n="privatePostMy"+this.capitalize(i);if("market"===t)throw new a(this.id+" allows limit orders only");const c={cointype:this.marketId(e),amount:s,rate:r};return await this[n](this.extend(c,o))}async cancelOrder(e,t,i={}){throw new o(this.id+" cancelOrder () is not fully implemented yet")}sign(e,t="public",i="GET",s={},a,o){if(!this.apiKey)throw new r(this.id+" requires apiKey for all requests");const n=this.urls.api[t]+"/"+e;if("private"===t){this.checkRequiredCredentials();const e=this.nonce();o=this.json(this.extend({nonce:e},s)),a={"Content-Type":"application/json",key:this.apiKey,sign:this.hmac(this.encode(o),this.encode(this.secret),"sha512")}}return{url:n,method:i,body:o,headers:a}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,BadRequest:r,InvalidNonce:o,RequestTimeout:n,ExchangeNotAvailable:c,InsufficientFunds:d,OrderNotFound:h,InvalidOrder:l,DDoSProtection:u,AuthenticationError:p,BadSymbol:f}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"crex24",name:"CREX24",countries:["EE"],rateLimit:500,version:"v2",has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchBidsAsks:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d","1w":"1w","1M":"1mo"},urls:{logo:"https://user-images.githubusercontent.com/1294454/47813922-6f12cc00-dd5d-11e8-97c6-70f957712d47.jpg",api:"https://api.crex24.com",www:"https://crex24.com",referral:"https://crex24.com/?refid=slxsjsjtil8xexl9hksr",doc:"https://docs.crex24.com/trade-api/v2",fees:"https://crex24.com/fees"},api:{public:{get:["currencies","instruments","tickers","recentTrades","orderBook","ohlcv"]},trading:{get:["orderStatus","orderTrades","activeOrders","orderHistory","tradeHistory","tradeFee","moneyTransferStatus"],post:["placeOrder","modifyOrder","cancelOrdersById","cancelOrdersByInstrument","cancelAllOrders"]},account:{get:["balance","depositAddress","moneyTransfers","moneyTransferStatus","previewWithdrawal"],post:["withdraw"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.001,maker:-1e-4},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{BCC:"BCH",BIT:"BitMoney",BULL:"BuySell",CREDIT:"TerraCredit",GHOST:"GHOSTPRISM",IQ:"IQ.Cash",PUT:"PutinCoin",UNI:"Universe",YOYO:"YOYOW"},options:{fetchOrdersMethod:"tradingGetOrderHistory",fetchClosedOrdersMethod:"tradingGetOrderHistory",fetchTickersMethod:"publicGetTicker24hr",defaultTimeInForce:"GTC",hasAlreadyAuthenticatedSuccessfully:!1,warnOnFetchOpenOrdersWithoutSymbol:!0,parseOrderToPrecision:!1,newOrderRespType:"RESULT"},exceptions:{exact:{"Parameter 'filter' contains invalid value.":r,"Mandatory parameter 'instrument' is missing.":r,"The value of parameter 'till' must be greater than or equal to the value of parameter 'from'.":r,"Failed to verify request signature.":p,"Nonce error. Make sure that the value passed in the 'X-CREX24-API-NONCE' header is greater in each consecutive request than in the previous one for the corresponding API-Key provided in 'X-CREX24-API-KEY' header.":o,"Market orders are not supported by the instrument currently.":l,"Parameter 'instrument' contains invalid value.":f},broad:{"API Key":p,"Insufficient funds":d,"has been delisted.":f,"Mandatory parameter":r}}})}nonce(){return this.milliseconds()}async fetchMarkets(e={}){const t=await this.publicGetInstruments(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"symbol"),r=this.safeString(s,"baseCurrency"),o=this.safeString(s,"quoteCurrency"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o),d=n+"/"+c,h=this.safeValue(s,"tickSize"),l=this.safeValue(s,"minPrice"),u=this.safeFloat(s,"minVolume"),p={amount:this.precisionFromString(this.numberToString(u)),price:this.precisionFromString(this.numberToString(h))},f="active"===s.state;i.push({id:a,symbol:d,base:n,quote:c,baseId:r,quoteId:o,info:s,active:f,precision:p,limits:{amount:{min:u,max:void 0},price:{min:l,max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"symbol"),r=this.safeCurrencyCode(a),o=this.safeInteger(s,"withdrawalPrecision"),n=this.safeValue(s,"BaseAddress"),c=s.depositsAllowed&&s.withdrawalsAllowed&&!s.isDelisted,d=s.isFiat?"fiat":"crypto";i[r]={id:a,code:r,address:n,info:s,type:d,name:this.safeString(s,"name"),active:c,fee:this.safeFloat(s,"flatWithdrawalFee"),precision:o,limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(s,"minDeposit"),max:void 0},withdraw:{min:this.safeFloat(s,"minWithdrawal"),max:this.safeFloat(s,"maxWithdrawal")}}}}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.accountGetBalance(this.extend({},e)),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"currency"),r=this.safeCurrencyCode(a),o=this.account();o.free=this.safeFloat(s,"available"),o.used=this.safeFloat(s,"reserved"),i[r]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={instrument:this.market(e).id};void 0!==t&&(s.limit=t);const a=await this.publicGetOrderBook(this.extend(s,i));return this.parseOrderBook(a,void 0,"buyLevels","sellLevels","price","volume")}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"timestamp")),s=this.safeString(e,"instrument"),a=this.safeSymbol(s,t,"-"),r=this.safeFloat(e,"last");return{symbol:a,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"percentChange"),average:void 0,baseVolume:this.safeFloat(e,"baseVolume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={instrument:i.id},r=await this.publicGetTickers(this.extend(s,t));if(r.length<1)throw new a(this.id+" fetchTicker could not load quotes for symbol "+e);return this.parseTicker(r[0],i)}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e);i.instrument=t.join(",")}const s=await this.publicGetTickers(this.extend(i,t));return this.parseTickers(s,e)}parseTickers(e,t){const i=[];for(let t=0;t<e.length;t++)i.push(this.parseTicker(e[t]));return this.filterByArray(i,"symbol",t)}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"timestamp")),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"volume");let r=void 0;void 0!==s&&void 0!==a&&(r=a*s);const o=this.safeString(e,"id"),n=this.safeString(e,"side"),c=this.safeString(e,"orderId"),d=this.safeString(e,"instrument"),h=this.safeSymbol(d,t,"-");let l=void 0;const u=this.safeString(e,"feeCurrency"),p=this.safeCurrencyCode(u),f=this.safeFloat(e,"fee");void 0!==f&&(l={cost:f,currency:p});return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:h,id:o,order:c,type:void 0,takerOrMaker:void 0,side:n,price:s,cost:r,amount:a,fee:l}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={instrument:a.id};void 0!==i&&(r.limit=i);const o=await this.publicGetRecentTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"timestamp")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={granularity:this.timeframes[t],instrument:r.id};void 0!==s&&(o.limit=s);const n=await this.publicGetOhlcv(this.extend(o,a));return this.parseOHLCVs(n,r,t,i,s)}parseOrderStatus(e){const t={submitting:"open",unfilledActive:"open",partiallyFilledActive:"open",filled:"closed",partiallyFilledCancelled:"canceled",unfilledCancelled:"canceled"};return e in t?t[e]:e}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"status")),s=this.safeString(e,"instrument"),a=this.safeSymbol(s,t,"-"),r=this.parse8601(this.safeString(e,"timestamp"));let o=this.safeFloat(e,"price");const n=this.safeFloat(e,"volume"),c=this.safeFloat(e,"remainingVolume");let d=void 0;const h=this.parse8601(this.safeString(e,"lastUpdate"));let l=void 0;void 0!==c&&void 0!==n&&(d=n-c,this.options.parseOrderToPrecision&&(d=parseFloat(this.amountToPrecision(a,d))),d=Math.max(d,0),void 0!==o&&(l=o*d));const u=this.safeString(e,"id"),p=this.safeString(e,"type");"market"===p&&0===o&&void 0!==l&&void 0!==d&&l>0&&d>0&&(o=l/d);const f=this.safeString(e,"side");let m=void 0;void 0!==l&&(d&&(m=l/d),this.options.parseOrderToPrecision&&(l=parseFloat(this.costToPrecision(a,l))));const v=this.safeString(e,"timeInForce"),y=this.safeFloat(e,"stopPrice");return{info:e,id:u,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:h,symbol:a,type:p,timeInForce:v,side:f,price:o,stopPrice:y,amount:n,cost:l,average:m,filled:d,remaining:c,status:i,fee:void 0,trades:void 0}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n={instrument:o.id,volume:this.amountToPrecision(e,s),type:t,side:i};let c=!1,d=!1;if("limit"===t?c=!0:"stopLimit"===t&&(c=!0,d=!0),c){if(void 0===a)throw new l(this.id+" createOrder method requires a price argument for a "+t+" order");n.price=this.priceToPrecision(e,a)}if(d){const i=this.safeFloat(r,"stopPrice");if(void 0===i)throw new l(this.id+" createOrder method requires a stopPrice extra param for a "+t+" order");n.stopPrice=this.priceToPrecision(e,i),r=this.omit(r,"stopPrice")}const h=await this.tradingPostPlaceOrder(this.extend(n,r));return this.parseOrder(h,o)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.tradingGetOrderStatus(this.extend(s,i));if(a.length<1)throw new h(this.id+" fetchOrder could not fetch order id "+e);return this.parseOrder(a[0])}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const a={};if(void 0!==t&&(a.from=this.ymdhms(t,"T")),void 0!==i&&(a.limit=i),void 0!==e){const t=this.market(e);a.instrument=t.id}const r=this.safeString(this.options,"fetchOrdersMethod","tradingGetOrderHistory"),o=await this[r](this.extend(a,s));return this.parseOrders(o)}async fetchOrdersByIds(e,t,i,s={}){await this.loadMarkets();const a={id:e.join(",")},r=await this.tradingGetOrderStatus(this.extend(a,s));return this.parseOrders(r,void 0,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.market(e),r.instrument=a.id);const o=await this.tradingGetActiveOrders(this.extend(r,s));return this.parseOrders(o,a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.market(e),r.instrument=a.id),void 0!==t&&(r.from=this.ymdhms(t,"T")),void 0!==i&&(r.limit=i);const o=this.safeString(this.options,"fetchClosedOrdersMethod","tradingGetOrderHistory"),n=await this[o](this.extend(r,s));return this.parseOrders(n,a,t,i)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={ids:[parseInt(e)]},a=await this.tradingPostCancelOrdersById(this.extend(s,i));return this.parseOrder(a)}async cancelAllOrders(e,t={}){return await this.tradingPostCancelAllOrders(t)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.market(e),r.instrument=a.id),void 0!==t&&(r.from=this.ymdhms(t,"T")),void 0!==i&&(r.limit=i);const o=await this.tradingGetTradeHistory(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==t&&(r.from=this.ymd(t,"T"));const o=await this.accountGetMoneyTransfers(this.extend(r,s));return this.parseTransactions(o,a,t,i)}async fetchDeposits(e,t,i,s={}){return this.fetchTransactions(e,t,i,this.extend({type:"deposit"},s))}async fetchWithdrawals(e,t,i,s={}){return this.fetchTransactions(e,t,i,this.extend({type:"withdrawal"},s))}parseTransactionStatus(e){return this.safeString({pending:"pending",success:"ok",failed:"failed"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"address"),a=this.safeString(e,"paymentId"),r=this.safeValue(e,"txId"),o=this.safeString(e,"currency"),n=this.safeCurrencyCode(o,t),c=this.safeString(e,"type"),d=this.parse8601(this.safeString(e,"createdAt")),h=this.parse8601(this.safeString(e,"processedAt")),l=this.parseTransactionStatus(this.safeString(e,"status")),u=this.safeFloat(e,"amount"),p={cost:this.safeFloat(e,"fee"),currency:n};return{info:e,id:i,txid:r,timestamp:d,datetime:this.iso8601(d),address:s,tag:a,type:c,amount:u,currency:n,status:l,updated:h,fee:p}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.accountGetDepositAddress(this.extend(i,t)),a=this.safeString(s,"address"),r=this.safeString(s,"paymentId");return{currency:e,address:this.checkAddress(a),tag:r,info:s}}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e),o={currency:r.id,address:i,amount:parseFloat(this.currencyToPrecision(e,t)),feeCurrency:r.id};void 0!==s&&(o.paymentId=s);const n=await this.accountPostWithdraw(this.extend(o,a));return this.parseTransaction(n)}sign(e,t="public",i="GET",s={},a,r){let o="/"+this.version+"/"+t+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));"GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n));const c=this.urls.api+o;if("trading"===t||"account"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.base64ToBinary(this.secret);let n=o+e;a={"X-CREX24-API-KEY":this.apiKey,"X-CREX24-API-NONCE":e},"POST"===i&&(a["Content-Type"]="application/json",n+=r=this.json(s)),a["X-CREX24-API-SIGN"]=this.hmac(this.encode(n),t,"sha512","base64")}return{url:c,method:i,body:r,headers:a}}handleErrors(e,t,i,s,o,d,h,l,f){if(!this.isJsonEncodedObject(d))return;if(e>=200&&e<300)return;const m=this.safeString(h,"errorDescription"),v=this.id+" "+d;if(this.throwExactlyMatchedException(this.exceptions.exact,m,v),this.throwBroadlyMatchedException(this.exceptions.broad,m,v),400===e)throw new r(v);if(401===e)throw new p(v);if(403===e)throw new p(v);if(429===e)throw new u(v);if(500===e)throw new a(v);if(503===e)throw new c(v);if(504===e)throw new n(v);throw new a(v)}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,ExchangeNotAvailable:o,InsufficientFunds:n,OrderNotFound:c,InvalidOrder:d,DDoSProtection:h,InvalidNonce:l,AuthenticationError:u,BadRequest:p}=i(0),{ROUND:f,TICK_SIZE:m}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"currencycom",name:"Currency.com",countries:["BY"],rateLimit:500,certified:!0,pro:!0,version:"v1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTradingFees:!0,fetchTrades:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d","1w":"1w"},urls:{logo:"https://user-images.githubusercontent.com/1294454/83718672-36745c00-a63e-11ea-81a9-677b1f789a4d.jpg",api:{public:"https://api-adapter.backend.currency.com/api",private:"https://api-adapter.backend.currency.com/api"},www:"https://www.currency.com",referral:"https://currency.com/trading/signup?c=362jaimv&pid=referral",doc:["https://currency.com/api"],fees:"https://currency.com/fees-charges"},api:{public:{get:["time","exchangeInfo","depth","aggTrades","klines","ticker/24hr"]},private:{get:["leverageSettings","openOrders","tradingPositions","account","myTrades"],post:["order","updateTradingPosition","updateTradingOrder","closeTradingPosition"],delete:["order"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002}},precisionMode:m,options:{defaultTimeInForce:"GTC",warnOnFetchOpenOrdersWithoutSymbol:!0,recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1,parseOrderToPrecision:!1,newOrderRespType:{market:"FULL",limit:"RESULT",stop:"RESULT"}},exceptions:{broad:{"FIELD_VALIDATION_ERROR Cancel is available only for LIMIT order":d,"API key does not exist":u,"Order would trigger immediately.":d,"Account has insufficient balance for requested action.":n,"Rest API trading is not enabled.":o},exact:{"-1000":o,"-1013":d,"-1021":l,"-1022":u,"-1100":d,"-1104":a,"-1025":u,"-1128":p,"-2010":a,"-2011":c,"-2013":c,"-2014":u,"-2015":u}},commonCurrencies:{IQ:"iQIYI"}})}nonce(){return this.milliseconds()-this.options.timeDifference}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.safeInteger(t,"serverTime")}async loadTimeDifference(e={}){const t=await this.publicGetTime(e),i=this.milliseconds();return this.options.timeDifference=parseInt(i-t.serverTime),this.options.timeDifference}async fetchMarkets(e={}){const t=await this.publicGetExchangeInfo(e);this.options.adjustForTimeDifference&&await this.loadTimeDifference();const i=this.safeValue(t,"symbols"),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"symbol"),r=this.safeString(t,"baseAsset"),o=this.safeString(t,"quoteAsset"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o);let d=n+"/"+c;a.indexOf("/")>=0&&(d=a);const h=this.safeValue(t,"filters",[]),l=this.indexBy(h,"filterType"),u={amount:1/Math.pow(1,this.safeInteger(t,"baseAssetPrecision")),price:this.safeFloat(t,"tickSize")},p="TRADING"===this.safeString(t,"status");let f=this.safeStringLower(t,"marketType");"leverage"===f&&(f="margin");const m={id:a,symbol:d,base:n,quote:c,baseId:r,quoteId:o,type:f,spot:"spot"===f,margin:"margin"===f,info:t,active:p,precision:u,limits:{amount:{min:Math.pow(10,-u.amount),max:void 0},price:{min:void 0,max:void 0},cost:{min:-1*Math.log10(u.amount),max:void 0}}},v=this.safeFloat2(t,"exchangeFee","tradingFee"),y=this.safeFloat(t,"makerFee",v),g=this.safeFloat(t,"takerFee",v);if(void 0!==y&&(m.maker=y/100),void 0!==g&&(m.taker=g/100),"PRICE_FILTER"in l){const e=this.safeValue(l,"PRICE_FILTER",{});m.precision.price=this.safeFloat(e,"tickSize"),m.limits.price={min:this.safeFloat(e,"minPrice"),max:void 0};const t=this.safeFloat(e,"maxPrice");void 0!==t&&t>0&&(m.limits.price.max=t)}if("LOT_SIZE"in l){const e=this.safeValue(l,"LOT_SIZE",{});m.precision.amount=this.safeFloat(e,"stepSize"),m.limits.amount={min:this.safeFloat(e,"minQty"),max:this.safeFloat(e,"maxQty")}}if("MARKET_LOT_SIZE"in l){const e=this.safeValue(l,"MARKET_LOT_SIZE",{});m.limits.market={min:this.safeFloat(e,"minQty"),max:this.safeFloat(e,"maxQty")}}if("MIN_NOTIONAL"in l){const e=this.safeValue(l,"MIN_NOTIONAL",{});m.limits.cost.min=this.safeFloat(e,"minNotional")}s.push(m)}return s}calculateFee(e,t,i,s,a,r="taker",o={}){const n=this.markets[e];let c="quote";const d=n[r];let h=s*d,l=n.precision.price;return"sell"===i?h*=a:(c="base",l=n.precision.amount),h=this.decimalToPrecision(h,f,l,this.precisionMode),{type:r,currency:n[c],rate:d,cost:parseFloat(h)}}async fetchAccounts(e={}){const t=await this.privateGetAccount(e),i=this.safeValue(t,"balances",[]),s=[];for(let e=0;e<i.length;e++){const a=i[e],r=this.safeInteger(a,"accountId"),o=this.safeString(a,"asset"),n=this.safeCurrencyCode(o);s.push({id:r,type:void 0,currency:n,info:t})}return s}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privateGetAccount(e);return{info:t,maker:this.safeFloat(t,"makerCommission"),taker:this.safeFloat(t,"takerCommission")}}parseBalanceResponse(e){const t={info:e},i=this.safeValue(e,"balances",[]);for(let e=0;e<i.length;e++){const s=i[e],a=this.safeString(s,"asset"),r=this.safeCurrencyCode(a),o=this.account();o.free=this.safeFloat(s,"free"),o.used=this.safeFloat(s,"locked"),t[r]=o}return this.parseBalance(t)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccount(e);return this.parseBalanceResponse(t)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id};void 0!==t&&(s.limit=t);const a=await this.publicGetDepth(this.extend(s,i)),r=this.parseOrderBook(a);return r.nonce=this.safeInteger(a,"lastUpdateId"),r}parseTicker(e,t){const i=this.safeInteger(e,"closeTime"),s=this.safeString(e,"symbol"),a=this.safeSymbol(s,t),r=this.safeFloat(e,"lastPrice"),o=this.safeFloat(e,"openPrice");let n=void 0;return void 0!==o&&void 0!==r&&(n=this.sum(o,r)/2),{symbol:a,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:this.safeFloat(e,"bidPrice"),bidVolume:this.safeFloat(e,"bidQty"),ask:this.safeFloat(e,"askPrice"),askVolume:this.safeFloat(e,"askQty"),vwap:this.safeFloat(e,"weightedAvgPrice"),open:o,close:r,last:r,previousClose:this.safeFloat(e,"prevClosePrice"),change:this.safeFloat(e,"priceChange"),percentage:this.safeFloat(e,"priceChangePercent"),average:n,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.publicGetTicker24hr(this.extend(s,t));return this.parseTicker(a,i)}parseTickers(e,t){const i=[];for(let t=0;t<e.length;t++)i.push(this.parseTicker(e[t]));return this.filterByArray(i,"symbol",t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker24hr(t);return this.parseTickers(i,e)}parseOHLCV(e,t){return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={symbol:r.id,interval:this.timeframes[t]};void 0!==i&&(o.startTime=i),void 0!==s&&(o.limit=s);const n=await this.publicGetKlines(this.extend(o,a));return this.parseOHLCVs(n,r,t,i,s)}parseTrade(e,t){const i=this.safeInteger2(e,"T","time"),s=this.safeFloat2(e,"p","price"),a=this.safeFloat2(e,"q","qty"),r=this.safeString2(e,"a","id");let o=void 0;const n=this.safeString(e,"orderId");"m"in e?o=e.m?"sell":"buy":"isBuyerMaker"in e?o=e.isBuyerMaker?"sell":"buy":"isBuyer"in e&&(o=e.isBuyer?"buy":"sell");let c=void 0;"commission"in e&&(c={cost:this.safeFloat(e,"commission"),currency:this.safeCurrencyCode(this.safeString(e,"commissionAsset"))});let d=void 0;"isMaker"in e&&(d=e.isMaker?"maker":"taker");const h=this.safeString(e,"symbol"),l=this.safeSymbol(h,t);return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:l,id:r,order:n,type:void 0,takerOrMaker:d,side:o,price:s,amount:a,cost:s*a,fee:c}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id};void 0!==i&&(r.limit=i);const o=await this.publicGetAggTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseOrderStatus(e){return this.safeString({NEW:"open",PARTIALLY_FILLED:"open",FILLED:"closed",CANCELED:"canceled",PENDING_CANCEL:"canceling",REJECTED:"rejected",EXPIRED:"expired"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"status")),s=this.safeString(e,"symbol"),a=this.safeSymbol(s,t,"/");let r=void 0;"time"in e?r=this.safeInteger(e,"time"):"transactTime"in e&&(r=this.safeInteger(e,"transactTime"));let o=this.safeFloat(e,"price");const n=this.safeFloat(e,"origQty"),c=this.safeFloat(e,"executedQty");let d=void 0,h=this.safeFloat(e,"cummulativeQuoteQty");void 0!==c&&(void 0!==n&&(d=n-c,this.options.parseOrderToPrecision&&(d=parseFloat(this.amountToPrecision(a,d))),d=Math.max(d,0)),void 0!==o&&void 0===h&&(h=o*c));const l=this.safeString(e,"orderId"),u=this.safeStringLower(e,"type");"market"===u&&0===o&&void 0!==h&&void 0!==c&&h>0&&c>0&&(o=h/c);const p=this.safeStringLower(e,"side");let f=void 0,m=void 0;const v=this.safeValue(e,"fills");if(void 0!==v){m=this.parseTrades(v,t);if(m.length>0){h=m[0].cost,f={cost:m[0].fee.cost,currency:m[0].fee.currency};for(let e=1;e<m.length;e++)h=this.sum(h,m[e].cost),f.cost=this.sum(f.cost,m[e].fee.cost)}}let y=void 0;void 0!==h&&(c&&(y=h/c),this.options.parseOrderToPrecision&&(h=parseFloat(this.costToPrecision(a,h))));const g=this.safeString(e,"timeInForce");return{info:e,id:l,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:a,type:u,timeInForce:g,side:p,price:o,stopPrice:void 0,amount:n,cost:h,average:y,filled:c,remaining:d,status:i,fee:f,trades:m}}async createOrder(e,t,i,s,a,o={}){await this.loadMarkets();const n=this.market(e);let c=void 0;if(n.margin&&(c=this.safeInteger(o,"accountId"),void 0===c))throw new r(this.id+" createOrder requires an accountId parameter for "+n.type+" market "+e);const d=t.toUpperCase(),h=this.safeValue(this.options.newOrderRespType,t,"RESULT"),l={symbol:n.id,quantity:this.amountToPrecision(e,s),type:d,side:i.toUpperCase(),newOrderRespType:h};"LIMIT"===d?(l.price=this.priceToPrecision(e,a),l.timeInForce=this.options.defaultTimeInForce):"STOP"===d&&(l.price=this.priceToPrecision(e,a));const u=await this.privatePostOrder(this.extend(l,o));return this.parseOrder(u,n)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;const o={};if(void 0!==e)r=this.market(e),o.symbol=r.id;else if(this.options.warnOnFetchOpenOrdersWithoutSymbol){const e=this.symbols.length,t=parseInt(e/2);throw new a(this.id+" fetchOpenOrders WARNING: fetching open orders without specifying a symbol is rate-limited to one call per "+t.toString()+" seconds. Do not call this method frequently to avoid ban. Set "+this.id+'.options["warnOnFetchOpenOrdersWithoutSymbol"] = false to suppress this warning message.')}const n=await this.privateGetOpenOrders(this.extend(o,s));return this.parseOrders(n,r,t,i)}async cancelOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a=this.safeValue(i,"origClientOrderId"),o={symbol:s.id};void 0===a?o.orderId=e:o.origClientOrderId=a;const n=await this.privateDeleteOrder(this.extend(o,i));return this.parseOrder(n,s)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const a=this.market(e),o={symbol:a.id};void 0!==i&&(o.limit=i);const n=await this.privateGetMyTrades(this.extend(o,s));return this.parseTrades(n,a,t,i)}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t]+"/"+this.version+"/"+e;if("historicalTrades"===e&&(a={"X-MBX-APIKEY":this.apiKey}),"private"===t){this.checkRequiredCredentials();let e=this.urlencode(this.extend({timestamp:this.nonce(),recvWindow:this.options.recvWindow},s));e+="&signature="+this.hmac(this.encode(e),this.encode(this.secret)),a={"X-MBX-APIKEY":this.apiKey},"GET"===i||"DELETE"===i?o+="?"+e:(r=e,a["Content-Type"]="application/x-www-form-urlencoded")}else Object.keys(s).length&&(o+="?"+this.urlencode(s));return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,l){if(418===e||429===e)throw new h(this.id+" "+e.toString()+" "+t+" "+o);if(e>=400){if(o.indexOf("Price * QTY is zero or less")>=0)throw new d(this.id+" order cost = amount * price is zero or less "+o);if(o.indexOf("LOT_SIZE")>=0)throw new d(this.id+" order amount should be evenly divisible by lot size "+o);if(o.indexOf("PRICE_FILTER")>=0)throw new d(this.id+" order price is invalid, i.e. exceeds allowed price precision, exceeds min price or max price limits or is invalid float value in general, use this.priceToPrecision (symbol, amount) "+o)}if(void 0===n)return;const u=this.safeString(n,"code");if(void 0!==u&&"0"!==u){const e=this.id+" "+this.json(n);this.throwExactlyMatchedException(this.exceptions.exact,u,e);const t=this.safeString(n,"msg");throw this.throwBroadlyMatchedException(this.exceptions.broad,t,e),new a(e)}}}},function(e,t,i){"use strict";const s=i(1),{TICK_SIZE:a}=i(2),{AuthenticationError:r,ExchangeError:o,ArgumentsRequired:n,PermissionDenied:c,InvalidOrder:d,OrderNotFound:h,DDoSProtection:l,NotSupported:u,ExchangeNotAvailable:p,InsufficientFunds:f,BadRequest:m,InvalidAddress:v,OnMaintenance:y}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"deribit",name:"Deribit",countries:["NL"],version:"v2",userAgent:void 0,rateLimit:500,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!0,createDepositAddress:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchOrderTrades:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1","3m":"3","5m":"5","10m":"10","15m":"15","30m":"30","1h":"60","2h":"120","3h":"180","6h":"360","12h":"720","1d":"1D"},urls:{test:"https://test.deribit.com",logo:"https://user-images.githubusercontent.com/1294454/41933112-9e2dd65a-798b-11e8-8440-5bab2959fcb8.jpg",api:"https://www.deribit.com",www:"https://www.deribit.com",doc:["https://docs.deribit.com/v2","https://github.com/deribit"],fees:"https://www.deribit.com/pages/information/fees",referral:"https://www.deribit.com/reg-1189.4038"},api:{public:{get:["auth","exchange_token","fork_token","set_heartbeat","disable_heartbeat","get_time","hello","test","subscribe","unsubscribe","get_announcements","get_book_summary_by_currency","get_book_summary_by_instrument","get_contract_size","get_currencies","get_funding_chart_data","get_funding_rate_history","get_funding_rate_value","get_historical_volatility","get_index","get_instruments","get_last_settlements_by_currency","get_last_settlements_by_instrument","get_last_trades_by_currency","get_last_trades_by_currency_and_time","get_last_trades_by_instrument","get_last_trades_by_instrument_and_time","get_order_book","get_trade_volumes","get_tradingview_chart_data","ticker"]},private:{get:["logout","enable_cancel_on_disconnect","disable_cancel_on_disconnect","get_cancel_on_disconnect","subscribe","unsubscribe","change_api_key_name","change_scope_in_api_key","change_subaccount_name","create_api_key","create_subaccount","disable_api_key","disable_tfa_for_subaccount","enable_api_key","get_account_summary","get_email_language","get_new_announcements","get_position","get_positions","get_subaccounts","list_api_keys","remove_api_key","reset_api_key","set_announcement_as_read","set_api_key_as_default","set_email_for_subaccount","set_email_language","set_password_for_subaccount","toggle_notifications_from_subaccount","toggle_subaccount_login","execute_block_trade","get_block_trade","get_last_block_trades_by_currency","invalidate_block_trade_signature","verify_block_trade","buy","sell","edit","cancel","cancel_all","cancel_all_by_currency","cancel_all_by_instrument","cancel_by_label","close_position","get_margins","get_open_orders_by_currency","get_open_orders_by_instrument","get_order_history_by_currency","get_order_history_by_instrument","get_order_margin_by_ids","get_order_state","get_stop_order_history","get_user_trades_by_currency","get_user_trades_by_currency_and_time","get_user_trades_by_instrument","get_user_trades_by_instrument_and_time","get_user_trades_by_order","get_settlement_history_by_instrument","get_settlement_history_by_currency","cancel_transfer_by_id","cancel_withdrawal","create_deposit_address","get_current_deposit_address","get_deposits","get_transfers","get_withdrawals","submit_transfer_to_subaccount","submit_transfer_to_user","withdraw"]}},exceptions:{9999:c,1e4:r,10001:o,10002:d,10003:d,10004:h,10005:d,10006:d,10007:d,10008:d,10009:f,10010:h,10011:d,10012:d,10013:c,10014:c,10015:c,10016:c,10017:c,10018:c,10019:c,10020:o,10021:d,10022:d,10023:d,10024:d,10025:d,10026:d,10027:d,10028:l,10029:h,10030:o,10031:o,10032:d,10033:u,10034:d,10035:d,10036:d,10040:p,10041:y,10043:d,10044:d,10045:d,10046:d,10047:l,10048:o,11008:d,11029:m,11030:o,11031:o,11035:l,11036:d,11037:m,11038:d,11039:d,11041:d,11042:c,11043:m,11044:d,11045:m,11046:m,11047:m,11048:o,11049:m,11050:m,11051:y,11052:o,11053:o,11090:v,11091:v,11092:v,11093:l,11094:o,11095:o,11096:o,12e3:r,12001:l,12002:o,12998:r,12003:r,12004:r,12005:r,12100:o,12999:r,13e3:r,13001:r,13002:c,13003:r,13004:r,13005:r,13006:r,13007:r,13008:o,13009:r,13010:m,13011:m,13012:c,13013:m,13014:m,13015:m,13016:m,13017:o,13018:o,13019:o,13020:o,13021:c,13025:o,"-32602":m,"-32601":m,"-32700":m,"-32000":m},precisionMode:a,options:{code:"BTC",fetchBalance:{code:"BTC"}}})}async fetchTime(e={}){const t=await this.publicGetGetTime(e);return this.safeInteger(t,"result")}codeFromOptions(e){const t=this.safeValue(this.options,"code","BTC"),i=this.safeValue(this.options,e,{});return this.safeValue(i,"code",t)}async fetchStatus(e={}){return await this.publicGetTest(this.extend({},e)),this.status=this.extend(this.status,{status:"ok",updated:this.milliseconds()}),this.status}async fetchMarkets(e={}){const t=await this.publicGetGetCurrencies(e),i=this.safeValue(t,"result",[]),s=[];for(let t=0;t<i.length;t++){const a={currency:this.safeString(i[t],"currency")},r=await this.publicGetGetInstruments(this.extend(a,e)),o=this.safeValue(r,"result",[]);for(let e=0;e<o.length;e++){const t=o[e],i=this.safeString(t,"instrument_name"),a=this.safeString(t,"base_currency"),r=this.safeString(t,"quote_currency"),n=this.safeCurrencyCode(a),c=this.safeCurrencyCode(r),d=this.safeString(t,"kind"),h="future"===d,l="option"===d,u=this.safeValue(t,"is_active"),p=this.safeFloat(t,"min_trade_amount"),f=this.safeFloat(t,"tick_size"),m={amount:p,price:f};s.push({id:i,symbol:i,base:n,quote:c,active:u,precision:m,taker:this.safeFloat(t,"taker_commission"),maker:this.safeFloat(t,"maker_commission"),limits:{amount:{min:p,max:void 0},price:{min:f,max:void 0},cost:{min:void 0,max:void 0}},type:d,spot:!1,future:h,option:l,info:t})}}return s}async fetchBalance(e={}){await this.loadMarkets();const t=this.codeFromOptions("fetchBalance"),i={currency:this.currency(t).id},s=await this.privateGetGetAccountSummary(this.extend(i,e)),a={info:s},r=this.safeValue(s,"result",{}),o=this.safeString(r,"currency"),n=this.safeCurrencyCode(o),c=this.account();return c.free=this.safeFloat(r,"availableFunds"),c.used=this.safeFloat(r,"maintenanceMargin"),c.total=this.safeFloat(r,"equity"),a[n]=c,this.parseBalance(a)}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetCreateDepositAddress(this.extend(i,t)),a=this.safeValue(s,"result",{}),r=this.safeString(a,"address");return this.checkAddress(r),{currency:e,address:r,tag:void 0,info:s}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetGetCurrentDepositAddress(this.extend(i,t)),a=this.safeValue(s,"result",{}),r=this.safeString(a,"address");return this.checkAddress(r),{currency:e,address:r,tag:void 0,info:s}}parseTicker(e,t){const i=this.safeInteger2(e,"timestamp","creation_timestamp"),s=this.safeString(e,"instrument_name"),a=this.safeSymbol(s,t),r=this.safeFloat2(e,"last_price","last"),o=this.safeValue(e,"stats",e);return{symbol:a,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat2(o,"high","max_price"),low:this.safeFloat2(o,"low","min_price"),bid:this.safeFloat2(e,"best_bid_price","bid_price"),bidVolume:this.safeFloat(e,"best_bid_amount"),ask:this.safeFloat2(e,"best_ask_price","ask_price"),askVolume:this.safeFloat(e,"best_ask_amount"),vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(o,"volume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={instrument_name:i.id},a=await this.publicGetTicker(this.extend(s,t)),r=this.safeValue(a,"result");return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.codeFromOptions("fetchTickers"),s={currency:this.currency(i).id},a=await this.publicGetGetBookSummaryByCurrency(this.extend(s,t)),r=this.safeValue(a,"result",[]),o={};for(let e=0;e<r.length;e++){const t=this.parseTicker(r[e]);o[t.symbol]=t}return this.filterByArray(o,"symbol",e)}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={instrument_name:r.id,resolution:this.timeframes[t]},c=this.parseTimeframe(t),d=this.milliseconds();if(void 0===i){if(void 0===s)throw new n(this.id+" fetchOHLCV requires a since argument or a limit argument");o.start_timestamp=d-(s-1)*c*1e3,o.end_timestamp=d}else o.start_timestamp=i,o.end_timestamp=void 0===s?d:this.sum(i,s*c*1e3);const h=await this.publicGetGetTradingviewChartData(this.extend(o,a)),l=this.safeValue(h,"result",{}),u=this.convertTradingViewToOHLCV(l,"ticks","open","high","low","close","volume",!0);return this.parseOHLCVs(u,r,t,i,s)}parseTrade(e,t){const i=this.safeString(e,"trade_id"),s=this.safeString(e,"instrument_name"),a=this.safeSymbol(s,t),r=this.safeInteger(e,"timestamp"),o=this.safeString(e,"direction"),n=this.safeFloat(e,"price"),c=this.safeFloat(e,"amount");let d=void 0;void 0!==c&&void 0!==n&&(d=c*n);const h=this.safeString(e,"liquidity");let l=void 0;void 0!==h&&(l="M"===h?"maker":"taker");const u=this.safeFloat(e,"fee");let p=void 0;if(void 0!==u){const t=this.safeString(e,"fee_currency");p={cost:u,currency:this.safeCurrencyCode(t)}}return{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:a,order:this.safeString(e,"order_id"),type:this.safeString(e,"order_type"),side:o,takerOrMaker:l,price:n,amount:c,cost:d,fee:p}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={instrument_name:a.id,include_old:!0},o=void 0===t?"publicGetGetLastTradesByInstrument":"publicGetGetLastTradesByInstrumentAndTime";void 0!==t&&(r.start_timestamp=t),void 0!==i&&(r.count=i);const n=await this[o](this.extend(r,s)),c=this.safeValue(n,"result",{}),d=this.safeValue(c,"trades",[]);return this.parseTrades(d,a,t,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={instrument_name:this.market(e).id};void 0!==t&&(s.depth=t);const a=await this.publicGetGetOrderBook(this.extend(s,i)),r=this.safeValue(a,"result",{}),o=this.safeInteger(r,"timestamp"),n=this.safeInteger(r,"change_id"),c=this.parseOrderBook(r,o);return c.nonce=n,c}parseOrderStatus(e){return this.safeString({open:"open",cancelled:"canceled",filled:"closed",rejected:"rejected"},e,e)}parseTimeInForce(e){return this.safeString({good_til_cancelled:"GTC",fill_or_kill:"FOK",immediate_or_cancel:"IOC"},e,e)}parseOrder(e,t){const i=this.safeInteger(e,"creation_timestamp"),s=this.safeInteger(e,"last_update_timestamp"),a=this.safeString(e,"order_id"),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"average_price"),n=this.safeFloat(e,"amount"),c=this.safeFloat(e,"filled_amount");let d=void 0;void 0!==c&&c>0&&(d=s);let h=void 0,l=void 0;void 0!==c&&(void 0!==n&&(h=n-c),void 0!==r&&(l=r*c));const u=this.parseOrderStatus(this.safeString(e,"order_state")),p=this.safeString(e,"instrument_name");t=this.safeMarket(p,t);const f=this.safeStringLower(e,"direction");let m=this.safeFloat(e,"commission"),v=void 0;void 0!==m&&(m=Math.abs(m),v={cost:m,currency:t.base});const y=this.safeString(e,"order_type");let g=this.safeValue(e,"trades");void 0!==g&&(g=this.parseTrades(g,t));const b=this.parseTimeInForce(this.safeString(e,"time_in_force"));return{info:e,id:a,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:d,symbol:t.symbol,type:y,timeInForce:b,side:f,price:r,stopPrice:void 0,amount:n,cost:l,average:o,filled:c,remaining:h,status:u,fee:v,trades:g}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},a=await this.privateGetGetOrderState(this.extend(s,i)),r=this.safeValue(a,"result");return this.parseOrder(r)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),c={instrument_name:o.id,amount:this.amountToPrecision(e,s),type:t};let d=!1,h=!1;if("limit"===t?d=!0:"stop_limit"===t&&(d=!0,h=!0),d){if(void 0===a)throw new n(this.id+" createOrder requires a price argument for a "+t+" order");c.price=this.priceToPrecision(e,a)}if(h){const i=this.safeFloat2(r,"stop_price","stopPrice");if(void 0===i)throw new n(this.id+" createOrder requires a stop_price or stopPrice param for a "+t+" order");c.stop_price=this.priceToPrecision(e,i),r=this.omit(r,["stop_price","stopPrice"])}const l="privateGet"+this.capitalize(i),u=await this[l](this.extend(c,r)),p=this.safeValue(u,"result",{}),f=this.safeValue(p,"order"),m=this.safeValue(p,"trades",[]);return f.trades=m,this.parseOrder(f,o)}async editOrder(e,t,i,s,a,r,o={}){if(void 0===a)throw new n(this.id+" editOrder requires an amount argument");if(void 0===r)throw new n(this.id+" editOrder requires a price argument");await this.loadMarkets();const c={order_id:e,amount:this.amountToPrecision(t,a),price:this.priceToPrecision(t,r)},d=await this.privateGetEdit(this.extend(c,o)),h=this.safeValue(d,"result",{}),l=this.safeValue(h,"order"),u=this.safeValue(h,"trades",[]);return l.trades=u,this.parseOrder(l)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},a=await this.privateGetCancel(this.extend(s,i)),r=this.safeValue(a,"result",{});return this.parseOrder(r)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s=void 0;if(void 0===e)s="privateGetCancelAll";else{s="privateGetCancelAllByInstrument";const t=this.market(e);i.instrument_name=t.id}return await this[s](this.extend(i,t))}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0,o=void 0;if(void 0===e){const e=this.codeFromOptions("fetchOpenOrders"),t=this.currency(e);a.currency=t.id,o="privateGetGetOpenOrdersByCurrency"}else r=this.market(e),a.instrument_name=r.id,o="privateGetGetOpenOrdersByInstrument";const n=await this[o](this.extend(a,s)),c=this.safeValue(n,"result",[]);return this.parseOrders(c,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0,o=void 0;if(void 0===e){const e=this.codeFromOptions("fetchClosedOrders"),t=this.currency(e);a.currency=t.id,o="privateGetGetOrderHistoryByCurrency"}else r=this.market(e),a.instrument_name=r.id,o="privateGetGetOrderHistoryByInstrument";const n=await this[o](this.extend(a,s)),c=this.safeValue(n,"result",[]);return this.parseOrders(c,r,t,i)}async fetchOrderTrades(e,t,i,s,a={}){await this.loadMarkets();const r={order_id:e},o=await this.privateGetGetUserTradesByOrder(this.extend(r,a)),n=this.safeValue(o,"result",{}),c=this.safeValue(n,"trades",[]);return this.parseTrades(c,void 0,i,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={include_old:!0};let r=void 0,o=void 0;if(void 0===e){const e=this.codeFromOptions("fetchMyTrades"),i=this.currency(e);a.currency=i.id,void 0===t?o="privateGetGetUserTradesByCurrency":(o="privateGetGetUserTradesByCurrencyAndTime",a.start_timestamp=t)}else r=this.market(e),a.instrument_name=r.id,void 0===t?o="privateGetGetUserTradesByInstrument":(o="privateGetGetUserTradesByInstrumentAndTime",a.start_timestamp=t);void 0!==i&&(a.count=i);const n=await this[o](this.extend(a,s)),c=this.safeValue(n,"result",{}),d=this.safeValue(c,"trades",[]);return this.parseTrades(d,r,t,i)}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchDeposits() requires a currency code argument");await this.loadMarkets();const a=this.currency(e),r={currency:a.id};void 0!==i&&(r.count=i);const o=await this.privateGetGetDeposits(this.extend(r,s)),c=this.safeValue(o,"result",{}),d=this.safeValue(c,"data",[]);return this.parseTransactions(d,a,t,i,s)}async fetchWithdrawals(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchWithdrawals() requires a currency code argument");await this.loadMarkets();const a=this.currency(e),r={currency:a.id};void 0!==i&&(r.count=i);const o=await this.privateGetGetWithdrawals(this.extend(r,s)),c=this.safeValue(o,"result",{}),d=this.safeValue(c,"data",[]);return this.parseTransactions(d,a,t,i,s)}parseTransactionStatus(e){return this.safeString({completed:"ok",unconfirmed:"pending"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"currency"),s=this.safeCurrencyCode(i,t),a=this.safeInteger2(e,"created_timestamp","received_timestamp"),r=this.safeInteger(e,"updated_timestamp"),o=this.parseTransactionStatus(this.safeString(e,"state")),n=this.safeString(e,"address"),c=this.safeFloat(e,"fee");let d="deposit",h=void 0;return void 0!==c&&(d="withdrawal",h={cost:c,currency:s}),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"transaction_id"),timestamp:a,datetime:this.iso8601(a),address:n,addressTo:n,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,type:d,amount:this.safeFloat(e,"amount"),currency:s,status:o,updated:r,fee:h}}async fetchPosition(e,t={}){await this.loadMarkets();const i={instrument_name:this.market(e).id},s=await this.privateGetPosition(this.extend(i,t));return this.safeValue(s,"result")}async fetchPositions(e,t,i,s={}){await this.loadMarkets();const a=this.codeFromOptions("fetchPositions"),r={currency:this.currency(a).id},o=await this.privateGetPositions(this.extend(r,s));return this.safeValue(o,"result",[])}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r={currency:this.currency(e).id,address:i,amount:t};void 0!==this.twofa&&(r.tfa=this.oath());const o=await this.privateGetWithdraw(this.extend(r,a));return{info:o,id:this.safeString(o,"id")}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o="/api/"+this.version+"/"+t+"/"+e;if("public"===t&&Object.keys(s).length&&(o+="?"+this.urlencode(s)),"private"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.milliseconds().toString(),r="";Object.keys(s).length&&(o+="?"+this.urlencode(s));const n=t+"\n"+e+"\n"+(i+"\n"+o+"\n"+r+"\n"),c=this.hmac(this.encode(n),this.encode(this.secret),"sha256");a={Authorization:"deri-hmac-sha256 id="+this.apiKey+",ts="+t+",sig="+c+",nonce="+e}}return{url:this.urls.api+o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,r,n,c,d){if(!n)return;const h=this.safeValue(n,"error");if(void 0!==h){const e=this.safeString(h,"code"),t=this.id+" "+r;throw this.throwExactlyMatchedException(this.exceptions,e,t),new o(t)}}}},function(e,t,i){"use strict";const s=i(1),{AccountSuspended:a,BadRequest:r,BadResponse:o,NetworkError:n,DDoSProtection:c,AuthenticationError:d,PermissionDenied:h,ArgumentsRequired:l,ExchangeError:u,InsufficientFunds:p,InvalidOrder:f,InvalidNonce:m,OrderNotFound:v,InvalidAddress:y,RateLimitExceeded:g,BadSymbol:b}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"digifinex",name:"DigiFinex",countries:["SG"],version:"v3",rateLimit:900,has:{cancelOrder:!0,cancelOrders:!0,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","12h":"720","1d":"1D","1w":"1W"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87443315-01283a00-c5fe-11ea-8628-c2a0feaf07ac.jpg",api:"https://openapi.digifinex.com",www:"https://www.digifinex.com",doc:["https://docs.digifinex.com"],fees:"https://digifinex.zendesk.com/hc/en-us/articles/360000328422-Fee-Structure-on-DigiFinex",referral:"https://www.digifinex.com/en-ww/from/DhOzBg?channelCode=ljaUPp"},api:{v2:{get:["ticker"]},public:{get:["{market}/symbols","kline","margin/currencies","margin/symbols","markets","order_book","ping","spot/symbols","time","trades","trades/symbols","ticker","currencies"]},private:{get:["{market}/financelog","{market}/mytrades","{market}/order","{market}/order/detail","{market}/order/current","{market}/order/history","margin/assets","margin/financelog","margin/mytrades","margin/order","margin/order/current","margin/order/history","margin/positions","otc/financelog","spot/assets","spot/financelog","spot/mytrades","spot/order","spot/order/current","spot/order/history","deposit/address","deposit/history","withdraw/history"],post:["{market}/order/cancel","{market}/order/new","{market}/order/batch_new","margin/order/cancel","margin/order/new","margin/position/close","spot/order/cancel","spot/order/new","transfer","withdraw/new","withdraw/cancel"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{10001:[r,"Wrong request method, please check it's a GET ot POST request"],10002:[d,"Invalid ApiKey"],10003:[d,"Sign doesn't match"],10004:[r,"Illegal request parameters"],10005:[c,"Request frequency exceeds the limit"],10006:[h,"Unauthorized to execute this request"],10007:[h,"IP address Unauthorized"],10008:[m,"Timestamp for this request is invalid, timestamp must within 1 minute"],10009:[n,"Unexist endpoint, please check endpoint URL"],10011:[a,"ApiKey expired. Please go to client side to re-create an ApiKey"],20001:[h,"Trade is not open for this trading pair"],20002:[h,"Trade of this trading pair is suspended"],20003:[f,"Invalid price or amount"],20007:[f,"Price precision error"],20008:[f,"Amount precision error"],20009:[f,"Amount is less than the minimum requirement"],20010:[f,"Cash Amount is less than the minimum requirement"],20011:[p,"Insufficient balance"],20012:[r,"Invalid trade type, valid value: buy/sell)"],20013:[f,"No order info found"],20014:[r,"Invalid date, Valid format: 2018-07-25)"],20015:[r,"Date exceeds the limit"],20018:[h,"Your trading rights have been banned by the system"],20019:[r,'Wrong trading pair symbol. Correct format:"usdt_btc". Quote asset is in the front'],20020:[c,"You have violated the API operation trading rules and temporarily forbid trading. At present, we have certain restrictions on the user's transaction rate and withdrawal rate."],5e4:[u,"Exception error"],20021:[r,"Invalid currency"],20022:[r,"The ending timestamp must be larger than the starting timestamp"],20023:[r,"Invalid transfer type"],20024:[r,"Invalid amount"],20025:[r,"This currency is not transferable at the moment"],20026:[p,"Transfer amount exceed your balance"],20027:[h,"Abnormal account status"],20028:[h,"Blacklist for transfer"],20029:[h,"Transfer amount exceed your daily limit"],20030:[r,"You have no position on this trading pair"],20032:[h,"Withdrawal limited"],20033:[r,"Wrong Withdrawal ID"],20034:[h,"Withdrawal service of this crypto has been closed"],20035:[h,"Withdrawal limit"],20036:[u,"Withdrawal cancellation failed"],20037:[y,"The withdrawal address, Tag or chain type is not included in the withdrawal management list"],20038:[y,"The withdrawal address is not on the white list"],20039:[u,"Can't be canceled in current status"],20040:[g,"Withdraw too frequently; limitation: 3 times a minute, 100 times a day"],20041:[h,"Beyond the daily withdrawal limit"],20042:[b,"Current trading pair does not support API trading"]},broad:{}},options:{defaultType:"spot",types:["spot","margin","otc"]},commonCurrencies:{BHT:"Black House Test",MBN:"Mobilian Coin",TEL:"TEL666"}})}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i=this.safeValue(t,"data",[]),s={};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"currency"),r=this.safeCurrencyCode(a),o=this.safeValue(t,"deposit_status",1),n=this.safeValue(t,"withdraw_status",1),c=o&&n,d=this.safeFloat(t,"withdraw_fee_rate");r in s?Array.isArray(s[r].info)?s[r].info.push(t):s[r].info=[s[r].info,t]:s[r]={id:a,code:r,info:t,type:void 0,name:void 0,active:c,fee:d,precision:8,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(t,"min_withdraw_amount"),max:void 0}}}}return s}async fetchMarkets(e={}){const t=this.safeValue(this.options,"fetchMarkets",{}),i=this.safeString(t,"method","fetch_markets_v2");return await this[i](e)}async fetchMarketsV2(e={}){const t=await this.publicGetTradesSymbols(e),i=this.safeValue(t,"symbol_list",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"symbol"),r=this.safeString(t,"base_asset"),o=this.safeString(t,"quote_asset"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o),d=n+"/"+c,h={amount:this.safeInteger(t,"amount_precision"),price:this.safeInteger(t,"price_precision")},l={amount:{min:this.safeFloat(t,"minimum_amount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(t,"minimum_value"),max:void 0}},u=!!this.safeValue(t,"is_allow",1),p="spot",f="spot"===p,m="margin"===p;s.push({id:a,symbol:d,base:n,quote:c,baseId:r,quoteId:o,active:u,type:p,spot:f,margin:m,precision:h,limits:l,info:t})}return s}async fetchMarketsV1(e={}){const t=await this.publicGetMarkets(e),i=this.safeValue(t,"data",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"market"),[r,o]=a.split("_"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o),d=n+"/"+c,h={amount:this.safeInteger(t,"volume_precision"),price:this.safeInteger(t,"price_precision")},l={amount:{min:this.safeFloat(t,"min_volume"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(t,"min_amount"),max:void 0}},u=void 0;s.push({id:a,symbol:d,base:n,quote:c,baseId:r,quoteId:o,active:u,precision:h,limits:l,info:t})}return s}async fetchBalance(e={}){const t=this.safeString(this.options,"defaultType","spot"),i=this.safeString(e,"type",t);e=this.omit(e,"type");const s="privateGet"+this.capitalize(i)+"Assets",a=await this[s](e),r=this.safeValue(a,"list",[]),o={info:a};for(let e=0;e<r.length;e++){const t=r[e],i=this.safeString(t,"currency"),s=this.safeCurrencyCode(i),a=this.account();a.used=this.safeFloat(t,"frozen"),a.free=this.safeFloat(t,"free"),a.total=this.safeFloat(t,"total"),o[s]=a}return this.parseBalance(o)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id};void 0!==t&&(s.limit=t);const a=await this.publicGetOrderBook(this.extend(s,i)),r=this.safeTimestamp(a,"date");return this.parseOrderBook(a,r)}async fetchTickers(e,t={}){const i=this.safeValue(t,"apiKey",this.apiKey);if(!i)throw new l(this.id+" fetchTicker is a private v2 endpoint that requires an `exchange.apiKey` credential or an `apiKey` extra parameter");await this.loadMarkets();const s={apiKey:i},a=await this.v2GetTicker(this.extend(s,t)),r={},o=this.safeValue(a,"ticker",{}),n=this.safeInteger(a,"date"),c=Object.keys(o);for(let e=0;e<c.length;e++){const t=c[e],i=this.extend({date:n},o[t]),[s,a]=t.split("_"),d=a.toUpperCase()+"_"+s.toUpperCase(),h=this.safeMarket(d,void 0,"_");r[h.symbol]=this.parseTicker(i,h)}return this.filterByArray(r,"symbol",e)}async fetchTicker(e,t={}){const i=this.safeValue(t,"apiKey",this.apiKey);if(!i)throw new l(this.id+" fetchTicker is a private v2 endpoint that requires an `exchange.apiKey` credential or an `apiKey` extra parameter");await this.loadMarkets();const s=this.market(e),a=s.quoteId.toLowerCase()+"_"+s.baseId.toLowerCase(),r={symbol:a,apiKey:i},o=await this.v2GetTicker(this.extend(r,t)),n=this.safeInteger(o,"date"),c=this.safeValue(o,"ticker",{});let d=this.safeValue(c,a,{});return d=this.extend({date:n},d),this.parseTicker(d,s)}parseTicker(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.safeTimestamp(e,"date"),a=this.safeFloat(e,"last"),r=this.safeFloat(e,"change");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:r,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"base_vol"),info:e}}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"order_id"),a=this.safeTimestamp2(e,"date","timestamp"),r=this.safeString2(e,"type","side"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let c=void 0;void 0!==o&&void 0!==n&&(c=o*n);const d=this.safeString(e,"symbol"),h=this.safeSymbol(d,t,"_"),l=this.safeValue(e,"is_maker"),u=this.safeFloat(e,"fee");let p=void 0;if(void 0!==u){const t=this.safeString(e,"fee_currency");p={cost:u,currency:this.safeCurrencyCode(t)}}return{id:i,info:e,timestamp:a,datetime:this.iso8601(a),symbol:h,type:void 0,order:s,side:r,price:o,amount:n,cost:c,takerOrMaker:l,fee:p}}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.safeTimestamp(t,"server_time")}async fetchStatus(e={}){return await this.publicGetPing(e),this.status=this.extend(this.status,{status:"ok",updated:this.milliseconds()}),this.status}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id};void 0!==i&&(r.limit=i);const o=await this.publicGetTrades(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,a,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeFloat(e,5),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,1)]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={symbol:r.id,period:this.timeframes[t]};if(void 0!==i){const e=parseInt(i/1e3);if(o.start_time=e,void 0!==s){const i=this.parseTimeframe(t);o.end_time=this.sum(e,s*i)}}else if(void 0!==s){const e=this.seconds(),i=this.parseTimeframe(t);o.startTime=this.sum(e,-s*i)}const n=await this.publicGetKline(this.extend(o,a)),c=this.safeValue(n,"data",[]);return this.parseOHLCVs(c,r,t,i,s)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n=this.safeString(this.options,"defaultType","spot"),c=this.safeString(r,"type",n);r=this.omit(r,"type");const d={market:c,symbol:o.id,amount:this.amountToPrecision(e,s)};let h="";"market"===t?h="_market":d.price=this.priceToPrecision(e,a),d.type=i+h;const l=await this.privatePostMarketOrderNew(this.extend(d,r)),u=this.parseOrder(l,o);return this.extend(u,{symbol:e,side:i,type:t,amount:s,price:a})}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=this.safeString(this.options,"defaultType","spot"),a=this.safeString(i,"type",s);i=this.omit(i,"type");const r={market:a,order_id:e},o=await this.privatePostMarketOrderCancel(this.extend(r,i));if(1!==this.safeValue(o,"success",[]).length)throw new v(this.id+" cancelOrder "+e+" not found");return o}async cancelOrders(e,t,i={}){await this.loadMarkets();const s=this.safeString(this.options,"defaultType","spot"),a=this.safeString(i,"type",s);i=this.omit(i,"type");const r={market:a,order_id:e.join(",")},o=await this.privatePostCancelOrder(this.extend(r,i));if(this.safeValue(o,"success",[]).length<1)throw new v(this.id+" cancelOrders error");return o}parseOrderStatus(e){return this.safeString({0:"open",1:"open",2:"closed",3:"canceled",4:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"order_id"),s=this.safeTimestamp(e,"created_date"),a=this.safeTimestamp(e,"finished_date");let r=this.safeString(e,"type"),o=void 0;if(void 0!==r){const e=r.split("_");e.length>1?(r=e[0],o=e[1]):o="limit"}const n=this.parseOrderStatus(this.safeString(e,"status")),c=this.safeString(e,"symbol"),d=this.safeSymbol(c,t,"_"),h=this.safeFloat(e,"amount"),l=this.safeFloat(e,"executed_amount"),u=this.safeFloat(e,"price"),p=this.safeFloat(e,"avg_price");let f=void 0,m=void 0;return void 0!==l&&(void 0!==p&&(m=l*p),void 0!==h&&(f=Math.max(0,h-l))),{info:e,id:i,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:a,symbol:d,type:o,timeInForce:void 0,side:r,price:u,stopPrice:void 0,amount:h,filled:l,remaining:f,cost:m,average:p,status:n,fee:void 0,trades:void 0}}async fetchOpenOrders(e,t,i,s={}){const a=this.safeString(this.options,"defaultType","spot"),r=this.safeString(s,"type",a);s=this.omit(s,"type"),await this.loadMarkets();let o=void 0;const n={market:r};void 0!==e&&(o=this.market(e),n.symbol=o.id);const c=await this.privateGetMarketOrderCurrent(this.extend(n,s)),d=this.safeValue(c,"data",[]);return this.parseOrders(d,o,t,i)}async fetchOrders(e,t,i,s={}){const a=this.safeString(this.options,"defaultType","spot"),r=this.safeString(s,"type",a);s=this.omit(s,"type"),await this.loadMarkets();let o=void 0;const n={market:r};void 0!==e&&(o=this.market(e),n.symbol=o.id),void 0!==t&&(n.start_time=parseInt(t/1e3)),void 0!==i&&(n.limit=i);const c=await this.privateGetMarketOrderHistory(this.extend(n,s)),d=this.safeValue(c,"data",[]);return this.parseOrders(d,o,t,i)}async fetchOrder(e,t,i={}){const s=this.safeString(this.options,"defaultType","spot"),a=this.safeString(i,"type",s);i=this.omit(i,"type"),await this.loadMarkets();let r=void 0;void 0!==t&&(r=this.market(t));const o={market:a,order_id:e},n=await this.privateGetMarketOrder(this.extend(o,i)),c=this.safeValue(n,"data",[]),d=this.safeValue(c,0);if(void 0===d)throw new v(this.id+" fetchOrder() order "+e+" not found");return this.parseOrder(d,r)}async fetchMyTrades(e,t,i,s={}){const a=this.safeString(this.options,"defaultType","spot"),r=this.safeString(s,"type",a);s=this.omit(s,"type"),await this.loadMarkets();let o=void 0;const n={market:r};void 0!==e&&(o=this.market(e),n.symbol=o.id),void 0!==t&&(n.start_time=parseInt(t/1e3)),void 0!==i&&(n.limit=i);const c=await this.privateGetMarketMytrades(this.extend(n,s)),d=this.safeValue(c,"list",[]);return this.parseTrades(d,o,t,i)}parseLedgerEntryType(e){return this.safeString({},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"num"),s=this.parseLedgerEntryType(this.safeString(e,"type")),a=this.safeCurrencyCode(this.safeString(e,"currency_mark"),t),r=this.safeTimestamp(e,"time");return{info:e,id:i,direction:void 0,account:void 0,referenceId:void 0,referenceAccount:void 0,type:s,currency:a,amount:void 0,before:void 0,after:this.safeFloat(e,"balance"),status:"ok",timestamp:r,datetime:this.iso8601(r),fee:void 0}}async fetchLedger(e,t,i,s={}){const a=this.safeString(this.options,"defaultType","spot"),r=this.safeString(s,"type",a);s=this.omit(s,"type"),await this.loadMarkets();const o={market:r};let n=void 0;void 0!==e&&(n=this.currency(e),o.currency_mark=n.id),void 0!==t&&(o.start_time=parseInt(t/1e3)),void 0!==i&&(o.limit=i);const c=await this.privateGetMarketFinancelog(this.extend(o,s)),d=this.safeValue(c,"data",{}),h=this.safeValue(d,"finance",[]);return this.parseLedger(h,n,t,i)}parseDepositAddresses(e){const t={};for(let i=0;i<e.length;i++){const s=this.parseDepositAddress(e[i]);t[s.currency]=s}return t}parseDepositAddress(e,t){const i=this.safeString(e,"address"),s=this.safeString(e,"addressTag"),a=this.safeStringUpper(e,"currency");return{info:e,code:this.safeCurrencCode(a),address:i,tag:s}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetDepositAddress(this.extend(i,t)),a=this.safeValue(s,"data",[]),r=this.parseDepositAddresses(a),o=this.safeValue(r,e);if(void 0===o)throw new y(this.id+" fetchDepositAddress did not return an address for "+e+" - create the deposit address in the user settings on the exchange website first.");return o}async fetchTransactionsByType(e,t,i,s,a={}){await this.loadMarkets();let r=void 0;const o={};void 0!==t&&(r=this.currency(t),o.currency=r.id),void 0!==s&&(o.size=Math.min(500,s));const n="deposit"===e?"privateGetDepositHistory":"privateGetWithdrawHistory",c=await this[n](this.extend(o,a)),d=this.safeValue(c,"data",[]);return this.parseTransactions(d,r,i,s,{type:e})}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsByType("deposit",e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsByType("withdrawal",e,t,i,s)}parseTransactionStatus(e){return this.safeString({0:"pending",1:"canceled",2:"pending",3:"failed",4:"pending",5:"failed",6:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString2(e,"id","withdraw_id"),s=this.safeString(e,"address");let a=this.safeString(e,"memo");void 0!==a&&a.length<1&&(a=void 0);const r=this.safeString(e,"hash"),o=this.safeStringUpper(e,"currency"),n=this.safeCurrencyCode(o,t),c=this.parse8601(this.safeString(e,"created_date")),d=this.parse8601(this.safeString(e,"finished_date")),h=this.parseTransactionStatus(this.safeString(e,"state")),l=this.safeFloat(e,"amount"),u=this.safeFloat(e,"fee");let p=void 0;return void 0!==u&&(p={currency:n,cost:u}),{info:e,id:i,txid:r,timestamp:c,datetime:this.iso8601(c),address:s,addressTo:s,addressFrom:void 0,tag:a,tagTo:a,tagFrom:void 0,type:void 0,amount:l,currency:n,status:h,updated:d,fee:p}}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e),o={address:i,amount:parseFloat(t),currency:r.id};void 0!==s&&(o.memo=s);const n=await this.privatePostWithdrawNew(this.extend(o,a));return this.parseTransaction(n,r)}sign(e,t="public",i="GET",s={},a,r){const o="v2"===t?t:this.version;let n=this.urls.api+"/"+o+"/"+this.implodeParams(e,s);const c=this.omit(s,this.extractParams(e)),d=this.urlencode(this.keysort(c));if("private"===t){const e=this.nonce().toString(),t=d,s=this.hmac(this.encode(t),this.encode(this.secret));"GET"===i?d&&(n+="?"+d):"POST"===i&&(a={"Content-Type":"application/x-www-form-urlencoded"},d&&(r=d)),a={"ACCESS-KEY":this.apiKey,"ACCESS-SIGN":s,"ACCESS-TIMESTAMP":e}}else d&&(n+="?"+d);return{url:n,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,r,n,c,d){if(!n)return;const h=this.safeString(n,"code");if("0"===h||"200"===h)return;const l=this.id+" "+r;if(void 0===h)throw new o(l);const p=[u,l],[f,m]=this.safeValue(this.exceptions.exact,h,p);throw new f(m)}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,ExchangeNotAvailable:o,InvalidNonce:n,BadRequest:c,InsufficientFunds:d,PermissionDenied:h,DDoSProtection:l,InvalidOrder:u,AuthenticationError:p}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"dsx",name:"DSX",countries:["UK"],rateLimit:1500,version:"v3",has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!1,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTransactions:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/76909626-cb2bb100-68bc-11ea-99e0-28ba54f04792.jpg",api:{public:"https://dsxglobal.com/mapi",private:"https://dsxglobal.com/tapi",dwapi:"https://dsxglobal.com/dwapi"},www:"https://dsxglobal.com",doc:["https://dsxglobal.com/developers/publicApi"]},fees:{trading:{tierBased:!0,percentage:!0,maker:.0015,taker:.0025}},timeframes:{"1m":"m","1h":"h","1d":"d"},api:{public:{get:["barsFromMoment/{pair}/{period}/{start}","depth/{pair}","info","lastBars/{pair}/{period}/{amount}","periodBars/{pair}/{period}/{start}/{end}","ticker/{pair}","trades/{pair}"]},private:{post:["info/account","history/transactions","history/trades","history/orders","orders","order/cancel","order/status","order/new","volume","fees"]},dwapi:{post:["deposit/cryptoaddress","withdraw/crypto","withdraw/fiat","withdraw/submit","transaction/status"]}},exceptions:{exact:{"Sign is invalid":p,"Order was rejected. Incorrect price.":u,"Order was rejected. You don't have enough money.":d,"This method is blocked for your pair of keys":h},broad:{INVALID_PARAMETER:c,"Invalid pair name":a,"invalid api key":p,"invalid sign":p,"api key dont have trade permission":p,"invalid parameter":u,"invalid order":u,"Requests too often":l,"not available":o,"data unavailable":o,"external service unavailable":o,"nonce is invalid":n,"Incorrect volume":u}},options:{fetchTickersMaxLength:250},commonCurrencies:{DSH:"DASH"}})}async fetchMarkets(e={}){const t=await this.publicGetInfo(e),i=this.safeValue(t,"pairs"),s=Object.keys(i),a=[];for(let e=0;e<s.length;e++){const t=s[e],r=i[t],o=this.safeString(r,"base_currency"),n=this.safeString(r,"quoted_currency"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=c+"/"+d,l={amount:this.safeInteger(r,"decimal_places"),price:this.safeInteger(r,"decimal_places")},u={amount:{min:this.safeFloat(r,"min_amount"),max:this.safeFloat(r,"max_amount")},price:{min:this.safeFloat(r,"min_price"),max:this.safeFloat(r,"max_price")},cost:{min:this.safeFloat(r,"min_total")}},p=0===this.safeInteger(r,"hidden"),f=c.toLowerCase()+d.toLowerCase();a.push({id:t,otherId:f,symbol:h,base:c,quote:d,baseId:o,quoteId:n,active:p,precision:l,limits:u,info:r})}return a}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostInfoAccount(),i=this.safeValue(t,"return"),s={info:t},a=this.safeValue(i,"funds"),r=Object.keys(a);for(let e=0;e<r.length;e++){const t=r[e],i=this.safeCurrencyCode(t),o=this.safeValue(a,t,{}),n=this.account();n.free=this.safeFloat(o,"available"),n.total=this.safeFloat(o,"total"),s[i]=n}return this.parseBalance(s)}parseTicker(e,t){const i=this.safeTimestamp(e,"updated");let s=void 0;const a=this.safeString(e,"pair");void 0!==(t=this.parseMarket(a))&&(s=t.symbol);let r=this.safeFloat(e,"avg");void 0!==r&&r>0&&(r=1/r);const o=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:r,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"vol_cur"),info:e}}parseTrade(e,t){const i=this.safeTimestamp(e,"timestamp");let s=this.safeString(e,"type");"ask"===s?s="sell":"bid"===s&&(s="buy");const a=this.safeFloat2(e,"rate","price"),r=this.safeString2(e,"number","id"),o=this.safeString(e,"orderId"),n=this.safeString(e,"pair");let c=void 0;void 0!==(t=this.parseMarket(n))&&(c=t.symbol);const d=this.safeFloat2(e,"amount","volume");let h=void 0,l=void 0;const u=this.safeFloat(e,"commission");if(void 0!==u){const t=this.safeString(e,"commissionCurrency");l={cost:u,currency:this.safeCurrencyCode(t)}}const p=this.safeValue(e,"is_your_order");void 0!==p&&(h="taker",p&&(h="maker"),void 0===l&&(l=this.calculateFee(c,"limit",s,d,a,h)));let f=void 0;return void 0!==a&&void 0!==d&&(f=a*d),{id:r,order:o,timestamp:i,datetime:this.iso8601(i),symbol:c,type:"limit",side:s,takerOrMaker:h,price:a,amount:d,cost:f,fee:l,info:e}}parseTrades(e,t,i,s,a={}){let r=[];if(Array.isArray(e))for(let i=0;i<e.length;i++)r.push(this.parseTrade(e[i],t));else{const i=Object.keys(e);for(let s=0;s<i.length;s++){const o=i[s],n=this.parseTrade(e[o],t);r.push(this.extend(n,{id:o},a))}}r=this.sortBy(r,"timestamp");const o=void 0!==t?t.symbol:void 0;return this.filterBySymbolSinceLimit(r,o,i,s)}calculateFee(e,t,i,s,a,r="taker",o={}){const n=this.markets[e];let c="quote";const d=n[r];let h=parseFloat(this.costToPrecision(e,s*d));return"sell"===i?h*=a:c="base",{type:r,currency:n[c],rate:d,cost:h}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={pair:s.id};void 0!==t&&(r.limit=t);const o=await this.publicGetDepthPair(this.extend(r,i));if(!(s.id in o))throw new a(this.id+" "+s.symbol+" order book is empty or not available");const n=o[s.id];return this.parseOrderBook(n)}async fetchOrderBooks(e,t,i={}){await this.loadMarkets();let s=void 0;if(void 0===e){if(s=this.ids.join("-"),s.length>2048){const e=this.ids.length;throw new a(this.id+" has "+e.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks")}}else s=this.marketIds(e),s=s.join("-");const r={pair:s};void 0!==t&&(r.limit=t);const o=await this.publicGetDepthPair(this.extend(r,i)),n={};s=Object.keys(o);for(let e=0;e<s.length;e++){const t=s[e];let i=t;if(t in this.markets_by_id){i=this.markets_by_id[t].symbol}n[i]=this.parseOrderBook(o[t])}return n}async fetchTickers(e,t={}){await this.loadMarkets();let i=this.ids;if(void 0===e){const e=i.length;i=i.join("-");const t=this.safeInteger(this.options,"fetchTickersMaxLength",2048);if(i.length>this.options.fetchTickersMaxLength)throw new r(this.id+" has "+e.toString()+" markets exceeding max URL length for this endpoint ("+t.toString()+" characters), please, specify a list of symbols of interest in the first argument to fetchTickers")}else i=this.marketIds(e),i=i.join("-");const s={pair:i},a=await this.publicGetTickerPair(this.extend(s,t)),o={},n=Object.keys(a);for(let e=0;e<n.length;e++){const t=n[e],i=a[t];let s=t,r=void 0;t in this.markets_by_id&&(r=this.markets_by_id[t],s=r.symbol),o[s]=this.parseTicker(i,r)}return this.filterByArray(o,"symbol",e)}async fetchTicker(e,t={}){return(await this.fetchTickers([e],t))[e]}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={pair:a.id};void 0!==i&&(r.limit=i);const o=await this.publicGetTradesPair(this.extend(r,s));if(Array.isArray(o)){if(0===o.length)return[]}return this.parseTrades(o[a.id],a,t,i)}parseOHLCV(e,t){return[this.safeInteger(e,"timestamp"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"amount")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={pair:r.id,period:this.timeframes[t]};let n="publicGetLastBarsPairPeriodAmount";if(void 0===i)void 0===s&&(s=100),o.amount=s;else if(n="publicGetPeriodBarsPairPeriodStartEnd",o.start=parseInt(i/1e3),void 0===s)o.end=this.seconds();else{const e=1e3*this.parseTimeframe(t),a=this.sum(i,e*s);o.end=parseInt(a/1e3)}const c=await this[n](this.extend(o,a)),d=this.safeValue(c,r.id,[]);return this.parseOHLCVs(d,r,t,i,s)}async createOrder(e,t,i,s,a,o={}){await this.loadMarkets();const n=this.market(e);if("market"===t&&void 0===a)throw new r(this.id+" createOrder requires a price argument even for market orders, that is the worst price that you agree to fill your order for");const c={pair:n.id,type:i,volume:this.amountToPrecision(e,s),rate:this.priceToPrecision(e,a),orderType:t};a=parseFloat(a),s=parseFloat(s);const d=await this.privatePostOrderNew(this.extend(c,o));let h="open",l=0,u=s;const p=this.safeValue(d,"return");let f=this.safeString2(p,"orderId","order_id");"0"===f&&(f=this.safeString(p,"initOrderId","init_order_id"),h="closed"),l=this.safeFloat(p,"received",0),u=this.safeFloat(p,"remains",s);const m=this.milliseconds();return{info:d,id:f,timestamp:m,datetime:this.iso8601(m),lastTradeTimestamp:void 0,status:h,symbol:e,type:t,side:i,price:a,cost:a*l,amount:s,remaining:u,filled:l,fee:void 0}}parseOrderStatus(e){return this.safeString({0:"open",1:"closed",2:"canceled",3:"canceling",7:"canceled"},e,e)}parseMarket(e){if(e in this.markets_by_id)return this.markets_by_id[e];{let t=this.safeValue(this.options,"markets_by_other_id");if(void 0===t&&(this.options.markets_by_other_id=this.indexBy(this.markets,"otherId"),t=this.options.markets_by_other_id),e in t)return t[e]}}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parseOrderStatus(this.safeString(e,"status")),a=this.safeTimestamp(e,"timestampCreated"),r=this.safeString(e,"pair");let o=void 0;void 0!==(t=this.parseMarket(r))&&(o=t.symbol);const n=this.safeFloat(e,"remainingVolume"),c=this.safeFloat(e,"volume"),d=this.safeFloat(e,"rate");let h=void 0,l=void 0;void 0!==c&&void 0!==n&&(h=c-n,l=d*h);const u=this.safeString(e,"orderType"),p=this.safeString(e,"type");let f=void 0;const m=this.safeValue(e,"deals",[]);let v=void 0,y=void 0;if(m.length>0){v=this.parseTrades(m);let e=void 0,t=void 0;for(let i=0;i<v.length;i++){const s=v[i];void 0===e&&(e=0),e=this.sum(e,s.fee.cost),t=s.fee.currency,y=s.timestamp}void 0!==e&&(f={cost:e,currency:t})}return{info:e,id:i,clientOrderId:void 0,symbol:o,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:y,type:u,timeInForce:void 0,side:p,price:d,stopPrice:void 0,cost:l,amount:c,remaining:n,filled:h,status:s,fee:f,trades:v}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderId:parseInt(e)},a=await this.privatePostOrderStatus(this.extend(s,i));return this.parseOrder(this.extend({id:e},a.return))}parseOrdersById(e,t,i,s){const a=Object.keys(e),r=[];for(let t=0;t<a.length;t++){const i=a[t],s=this.parseOrder(this.extend({id:i.toString()},e[i]));r.push(s)}return this.filterBySymbolSinceLimit(r,t,i,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a=await this.privatePostOrders(this.extend({},s));return this.parseOrdersById(this.safeValue(a,"return",{}),e,t,i)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const a={};void 0!==i&&(a.count=i);const r=await this.privatePostHistoryOrders(this.extend(a,s));return this.parseOrdersById(this.safeValue(r,"return",{}),e,t,i)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e};return await this.privatePostOrderCancel(this.extend(s,i))}parseOrders(e,t,i,s,a={}){const r=[],o=Object.keys(e);let n=void 0;void 0!==t&&(n=t.symbol);for(let i=0;i<o.length;i++){const s=o[i],n=this.extend({id:s},e[s]);r.push(this.extend(this.parseOrder(n,t),a))}return this.filterBySymbolSinceLimit(r,n,i,s)}async fetchClosedOrders(e,t,i,s={}){const a=await this.fetchOrders(e,t,i,s);return this.filterBy(a,"status","closed")}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.market(e),r.pair=a.id),void 0!==i&&(r.count=parseInt(i)),void 0!==t&&(r.since=parseInt(t/1e3));const o=await this.privatePostHistoryTrades(this.extend(r,s));let n=[];return"return"in o&&(n=o.return),this.parseTrades(n,a,t,i)}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==t&&(r.since=t),void 0!==i&&(r.count=i);const o=await this.privatePostHistoryTransactions(this.extend(r,s)),n=this.safeValue(o,"return",[]);return this.parseTransactions(n,a,t,i)}parseTransactionStatus(e){return this.safeString({1:"failed",2:"ok",3:"pending",4:"failed"},e,e)}parseTransaction(e,t){const i=this.safeTimestamp(e,"timestamp");let s=this.safeString(e,"type");void 0!==s&&("Incoming"===s?s="deposit":"Withdraw"===s&&(s="withdrawal"));const a=this.safeString(e,"currency"),r=this.safeCurrencyCode(a,t),o=this.parseTransactionStatus(this.safeString(e,"status"));return{id:this.safeString(e,"id"),txid:this.safeString(e,"txid"),timestamp:i,datetime:this.iso8601(i),address:this.safeString(e,"address"),type:s,amount:this.safeFloat(e,"amount"),currency:r,status:o,fee:{currency:r,cost:this.safeFloat(e,"commission"),rate:void 0},info:e}}async createDepositAddress(e,t={}){return await this.fetchDepositAddress(e,this.extend({new:1},t))}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.dwapiPostDepositCryptoaddress(this.extend(i,t)),a=this.safeValue(s,"return",{}),r=this.safeString(a,"address");return this.checkAddress(r),{currency:e,address:r,tag:void 0,info:s}}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const o=this.currency(e),n=this.safeValue(a,"commission");if(void 0===n)throw new r(this.id+" withdraw() requires a `commission` (withdrawal fee) parameter (string)");a=this.omit(a,n);const c={currency:o.id,amount:parseFloat(t),address:i,commission:n};void 0!==s&&(c.address+=":"+s);const d=await this.dwapiPostWithdrawCrypto(this.extend(c,a)),h=this.safeValue(d,"return",{});return{info:d,id:this.safeString(h,"transactionId")}}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t];const n=this.omit(s,this.extractParams(e));if("private"===t||"dwapi"===t){o+="/"+this.version+"/"+this.implodeParams(e,s),this.checkRequiredCredentials();const t=this.nonce();r=this.urlencode(this.extend({nonce:t},n));const i=this.hmac(this.encode(r),this.encode(this.secret),"sha512","base64");a={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:i}}else"public"===t?(o+="/"+this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n))):(o+="/"+this.implodeParams(e,s),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(r=this.json(n),a={"Content-Type":"application/json"}));return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0!==n&&"success"in n){let e=this.safeValue(n,"success",!1);if("string"==typeof e&&(e="true"===e||"1"===e),!e){const e=this.safeString(n,"code"),t=this.safeString(n,"error"),i=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,e,i),this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i),new a(i)}}}}},function(e,t,i){"use strict";const s=i(1),{ArgumentsRequired:a,InvalidOrder:r,ExchangeError:o,BadRequest:n,BadSymbol:c}=i(0),{TRUNCATE:d,SIGNIFICANT_DIGITS:h}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"eterbase",name:"Eterbase",countries:["SK"],rateLimit:500,version:"v1",certified:!0,has:{CORS:!1,publicAPI:!0,privateAPI:!0,cancelOrder:!0,createOrder:!0,deposit:!1,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","1h":"60","4h":"240","1d":"1440","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/1294454/82067900-faeb0f80-96d9-11ea-9f22-0071cfcb9871.jpg",api:"https://api.eterbase.exchange",www:"https://www.eterbase.com",doc:"https://developers.eterbase.exchange",fees:"https://www.eterbase.com/exchange/fees",referral:"https://eterbase.exchange/invite/1wjjh4Pe"},api:{markets:{get:["{id}/order-book"]},public:{get:["ping","assets","markets","tickers","tickers/{id}/ticker","markets/{id}/trades","markets/{id}/ohlcv","wstoken"]},private:{get:["accounts/{id}/balances","accounts/{id}/orders","accounts/{id}/fills","orders/{id}/fills","orders/{id}"],post:["orders","accounts/{id}/withdrawals"],delete:["orders/{id}"]},feed:{get:["feed"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.35/100,maker:.35/100}},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},precisionMode:h,options:{createMarketBuyOrderRequiresPrice:!0},exceptions:{exact:{"Invalid cost":r,"Invalid order ID":r,"Invalid market !":c},broad:{"Failed to convert argument":n}}})}async fetchTime(e={}){const t=await this.publicGetPing(e);return this.safeInteger(t,"pong")}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[];for(let e=0;e<t.length;e++){const s=this.parseMarket(t[e]);i.push(s)}return i}parseMarket(e){const t=this.safeString(e,"id"),i=this.safeString(e,"base"),s=this.safeString(e,"quote"),a=this.safeCurrencyCode(i),r=this.safeCurrencyCode(s),o=a+"/"+r,n="Trading"===this.safeString(e,"state"),c={price:this.safeInteger(e,"priceSigDigs"),amount:this.safeInteger(e,"qtySigDigs"),cost:this.safeInteger(e,"costSigDigs")},d=this.safeValue(e,"tradingRules",[]);let h=void 0,l=void 0,u=void 0,p=void 0;for(let e=0;e<d.length;e++){const t=d[e],i=this.safeString(t,"attribute"),s=this.safeString(t,"condition"),a=this.safeFloat(t,"value");"Qty"===i&&"Min"===s?h=a:"Qty"===i&&"Max"===s?l=a:"Cost"===i&&"Min"===s?u=a:"Cost"===i&&"Max"===s&&(p=a)}return{id:t,symbol:o,base:a,quote:r,baseId:i,quoteId:s,info:e,active:n,precision:c,limits:{amount:{min:h,max:l},price:{min:void 0,max:void 0},cost:{min:u,max:p}}}}async fetchCurrencies(e={}){const t=await this.publicGetAssets(e),i={};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"id"),r=this.safeInteger(s,"precisionDisplay"),o=this.safeCurrencyCode(a),n=this.safeValue(s,"depositEnabled"),c=this.safeValue(s,"withdrawalEnabled"),d=this.safeString(s,"state"),h=n&&c&&"Active"===d,l=this.safeStringLower(s,"type"),u=this.safeString(s,"name");i[o]={id:a,info:s,code:o,type:l,name:u,active:h,fee:this.safeFloat(s,"withdrawalFee"),precision:r,limits:{amount:{min:Math.pow(10,-r),max:Math.pow(10,r)},price:{min:Math.pow(10,-r),max:Math.pow(10,r)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(s,"withdrawalMin"),max:this.safeFloat(s,"withdrawalMax")}}}}return i}parseTicker(e,t){const i=this.safeString(e,"marketId"),s=this.safeSymbol(i,t),a=this.safeInteger(e,"time"),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"volumeBase"),n=this.safeFloat(e,"volume"),c=this.vwap(o,n),d=this.safeFloat(e,"change");return{symbol:s,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:c,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:d,average:void 0,baseVolume:o,quoteVolume:n,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={id:i.id},a=await this.publicGetTickersIdTicker(this.extend(s,t));return this.parseTicker(a,i)}parseTickers(e,t){const i=[];for(let t=0;t<e.length;t++)i.push(this.parseTicker(e[t]));return this.filterByArray(i,"symbol",t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(this.extend({},t));return this.parseTickers(i,e)}parseTrade(e,t){const i=this.safeFloat(e,"price"),s=this.safeFloat(e,"qty");let a=void 0;const r=this.safeFloat(e,"fee");if(void 0!==r){const t=this.safeString(e,"feeAsset");a={cost:r,currency:this.safeCurrencyCode(t)}}let o=this.safeFloat(e,"qty");void 0===o&&void 0!==i&&void 0!==s&&(o=i*s);const n=this.safeInteger2(e,"executedAt","filledAt"),c="1"===this.safeString(e,"side")?"buy":"sell",d=this.safeString(e,"liquidity");let h=void 0;void 0!==d&&(h="1"===d?"maker":"taker");const l=this.safeString(e,"orderId"),u=this.safeString(e,"id"),p=this.safeString(e,"marketId");return{info:e,id:u,symbol:this.safeSymbol(p,t),timestamp:n,datetime:this.iso8601(n),order:l,type:void 0,side:c,takerOrMaker:h,price:i,amount:s,cost:o,fee:a}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={id:a.id};void 0!==i&&(r.limit=i);const o=await this.publicGetMarketsIdTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e)},a=await this.marketsGetIdOrderBook(this.extend(s,i)),r=this.safeInteger(a,"timestamp");return this.parseOrderBook(a,r)}parseOHLCV(e,t){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){const o={interval:this.timeframes[t]},n=this.parseTimeframe(t),c=this.milliseconds();if(void 0!==i)o.start=i,o.end=void 0===s?c:this.sum(i,n*s*1e3);else{if(void 0===s)throw new a(this.id+" fetchOHLCV requires a since argument, or a limit argument, or both");o.start=c-n*s*1e3,o.end=c}await this.loadMarkets();const d=this.market(e);o.id=d.id;const h=await this.publicGetMarketsIdOhlcv(this.extend(o,r));return this.parseOHLCVs(h,d,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t={id:this.uid},i=await this.privateGetAccountsIdBalances(this.extend(t,e)),s={info:i};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"assetId"),r=this.safeCurrencyCode(a),o={free:this.safeFloat(t,"available"),used:this.safeFloat(t,"reserved"),total:this.safeFloat(t,"balance")};s[r]=o}return this.parseBalance(s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privateGetOrdersId(this.extend(s,i));return this.parseOrder(a)}parseOrderStatus(e){const t={1:void 0,2:"open",3:"open",4:"closed",FILLED:"closed",USER_REQUESTED_CANCEL:"canceled",ADMINISTRATIVE_CANCEL:"canceled",NOT_ENOUGH_LIQUIDITY:"canceled",EXPIRED:"expired",ONE_CANCELS_OTHER:"canceled"};return this.safeString(t,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeInteger(e,"placedAt"),a=this.safeInteger(e,"marketId"),r=this.safeSymbol(a,t);let o=this.parseOrderStatus(this.safeString(e,"state"));"closed"===o&&(o=this.parseOrderStatus(this.safeString(e,"closeReason")));const n="1"===this.safeString(e,"side")?"buy":"sell",c=this.safeString(e,"type");let d=void 0;d="1"===c?"market":"2"===c?"limit":"3"===c?"stopmarket":"stoplimit";let h=this.safeFloat(e,"limitPrice");const l=this.safeFloat(e,"qty");let u=this.safeFloat(e,"remainingQty"),p=void 0;const f=this.safeFloat(e,"remainingCost");void 0!==f&&0===f&&(u=0),void 0!==l&&void 0!==u&&(p=Math.max(0,l-u));const m=this.safeFloat(e,"cost");"market"===d&&0===h&&void 0!==m&&void 0!==p&&m>0&&p>0&&(h=m/p);let v=void 0;void 0!==m&&p&&(v=m/p);const y=this.safeString(e,"timeInForce"),g=this.safeFloat(e,"stopPrice");return{info:e,id:i,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:r,type:d,side:n,timeInForce:y,price:h,stopPrice:g,amount:l,cost:m,average:v,filled:p,remaining:u,status:o,fee:void 0,trades:void 0}}async fetchOrdersByState(e,t,i,s,a={}){const r=this.milliseconds(),o={id:this.uid,state:e};void 0===i?(o.from=r-7776e6,o.to=r):(o.from=i,o.to=this.sum(i,7776e6)),await this.loadMarkets();let n=void 0;void 0!==t&&(n=this.market(t),o.marketId=n.id),void 0!==s&&(o.limit=s);const c=await this.privateGetAccountsIdOrders(this.extend(o,a));return this.parseOrders(c,n,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByState("INACTIVE",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByState("ACTIVE",e,t,i,s)}async fetchMyTrades(e,t,i,s={}){const a=this.milliseconds(),r={id:this.uid};void 0===t?(r.from=a-7776e6,r.to=a):(r.from=t,r.to=this.sum(t,7776e6)),await this.loadMarkets();let o=void 0;void 0!==e&&(o=this.market(e),r.marketId=o.id),void 0!==i&&(r.limit=i);const n=await this.privateGetAccountsIdFills(this.extend(r,s));return this.parseTrades(n,o,t,i)}async fetchOrderTrades(e,t,i,s,a={}){await this.loadMarkets();const r={id:e},o=await this.privateGetOrdersIdFills(this.extend(r,a));return this.parseTrades(o)}async createOrder(e,t,i,s,a,o={}){await this.loadMarkets();const n=this.market(e),c=t.toUpperCase();"MARKET"===c?t=1:"LIMIT"===c?t=2:"STOPMARKET"===c?t=3:"STOPLIMIT"===c&&(t=4);const h=i.toUpperCase();i="BUY"===h?1:2;const l={accountId:this.uid,marketId:n.id,type:t,side:i},u=this.safeValue2(o,"refId","clientOrderId");let p=o;if(void 0!==u&&(l.refId=u,p=this.omit(o,["refId","clientOrderId"])),"MARKET"===c&&"BUY"===h){let e=this.safeFloat(o,"cost");if(this.options.createMarketBuyOrderRequiresPrice){if(void 0===e){if(void 0===a)throw new r(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");e=s*a}}else e=void 0===e?s:e;const t=n.precision.price;l.cost=this.decimalToPrecision(e,d,t,this.precisionMode)}else l.qty=this.amountToPrecision(e,s);"LIMIT"===c&&(l.limitPrice=this.priceToPrecision(e,a));const f=await this.privatePostOrders(this.extend(l,p));return this.parseOrder(f,n)}async cancelOrder(e,t,i={}){const s={id:e};return await this.privateDeleteOrdersId(this.extend(s,i))}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e),o={id:this.uid,accountId:this.uid,assetId:r.id,amount:t};void 0!==i&&(o.cryptoAddress=i,void 0!==s&&(o.memo=s));const n=await this.privatePostAccountsIdWithdrawals(this.extend(o,a));return{info:n,id:this.safeString(n,"id")}}sign(e,t="public",i="GET",s={},a,r){const o=this.omit(s,this.extractParams(e));let n="/";"public"===t||"private"===t?n+="api/"+this.version:"markets"===t&&(n+="api/"+t),n+="/"+this.implodeParams(e,s),"GET"===i&&Object.keys(o).length&&(n+="?"+this.urlencode(o));const c=this.urls.api+n;if("private"===t){this.checkRequiredCredentials();let e="";"GET"!==i&&Object.keys(o).length&&(e=r=this.json(o));const t="POST"===i||"PUT"===i||"PATCH"===i,s=this.rfc2616(this.milliseconds());let c="date request-line",d="date: "+s+"\n"+i+" "+n+" HTTP/1.1",h="";t&&(h="SHA-256="+this.hash(e,"sha256","base64"),d+="\ndigest: "+h,c+=" digest");const l=this.hmac(this.encode(d),this.encode(this.secret),"sha256","base64");a={Date:s,Authorization:'hmac username="'+this.apiKey+'",algorithm="hmac-sha256",headers="'+c+'",signature="'+l+'"',"Content-Type":"application/json"},t&&(a.Digest=h)}return{url:c,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,r,n,c,d){if(void 0===n)return;const h=this.safeString(n,"message");if(void 0!==h){const e=this.id+" "+r;throw this.throwExactlyMatchedException(this.exceptions.exact,h,e),this.throwBroadlyMatchedException(this.exceptions.broad,h,e),new o(e)}}}},function(e,t,i){"use strict";const s=i(1),{ArgumentsRequired:a,ExchangeError:r,OrderNotFound:o,AuthenticationError:n,InsufficientFunds:c,InvalidOrder:d,InvalidNonce:h,NotSupported:l,OnMaintenance:u,RateLimitExceeded:p,BadRequest:f,PermissionDenied:m}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"exmo",name:"EXMO",countries:["ES","RU"],rateLimit:350,version:"v1.1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:"emulated",fetchOrderBook:!0,fetchOrderBooks:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","45m":"45","1h":"60","2h":"120","3h":"180","4h":"240","1d":"D","1w":"W","1M":"M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766491-1b0ea956-5eda-11e7-9225-40d67b481b8d.jpg",api:{public:"https://api.exmo.com",private:"https://api.exmo.com",web:"https://exmo.me"},www:"https://exmo.me",referral:"https://exmo.me/?ref=131685",doc:["https://exmo.me/en/api_doc?ref=131685","https://github.com/exmo-dev/exmo_api_lib/tree/master/nodejs"],fees:"https://exmo.com/en/docs/fees"},api:{web:{get:["ctrl/feesAndLimits","en/docs/fees"]},public:{get:["currency","currency/list/extended","order_book","pair_settings","ticker","trades","candles_history","required_amount","payments/providers/crypto/list"]},private:{post:["user_info","order_create","order_cancel","stop_market_order_create","stop_market_order_cancel","user_open_orders","user_trades","user_cancelled_orders","order_trades","deposit_address","withdraw_crypt","withdraw_get_txid","excode_create","excode_load","code_check","wallet_history","wallet_operations"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002},funding:{tierBased:!1,percentage:!1}},options:{useWebapiForFetchingFees:!1,feesAndLimits:{success:1,ctlr:"feesAndLimits",error:"",data:{limits:[{pair:"BTC/USD",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"30000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BTC/RUB",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"2000000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"BTC/EUR",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"30000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BTC/GBP",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"30000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BTC/UAH",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"15000000",min_a:"10",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"BTC/PLN",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"20000000",min_a:"50",max_a:"2000000",taker:"0.4",maker:"0.4"},{pair:"BTC/TRY",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"800000",min_a:"40",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"BTC/KZT",min_q:"0.0001",max_q:"1000",min_p:"1000",max_p:"12000000",min_a:"1000",max_a:"100000000",taker:"0.4",maker:"0.4"},{pair:"BTC/USDT",min_q:"0.0001",max_q:"1000",min_p:"0.01",max_p:"30000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"ETH/BTC",min_q:"0.001",max_q:"5000",min_p:"0.00000001",max_p:"10",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ETH/USD",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETH/RUB",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"150",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"XRP/BTC",min_q:"1",max_q:"5000000",min_p:"0.0000001",max_p:"1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"XRP/USD",min_q:"1",max_q:"5000000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XRP/RUB",min_q:"1",max_q:"5000000",min_p:"0.000001",max_p:"1000",min_a:"0.01",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ADA/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ADA/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"ADA/USD",min_q:"0.01",max_q:"10000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ALGO/EXM",min_q:"1",max_q:"1000000",min_p:"0.001",max_p:"10000",min_a:"1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ALGO/BTC",min_q:"1",max_q:"1000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"50",taker:"0.4",maker:"0.4"},{pair:"ALGO/USDT",min_q:"1",max_q:"1000000",min_p:"0.001",max_p:"1000",min_a:"1",max_a:"500000",taker:"0",maker:"0"},{pair:"ALGO/RUB",min_q:"1",max_q:"1000000",min_p:"0.000001",max_p:"10000",min_a:"1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ALGO/EUR",min_q:"1",max_q:"1000000",min_p:"0.001",max_p:"1000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ATOM/EXM",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"200",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ATOM/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ATOM/USD",min_q:"1",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ATOM/EUR",min_q:"1",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BCH/USD",min_q:"0.003",max_q:"5000",min_p:"0.00000001",max_p:"30000",min_a:"0.0001",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BCH/RUB",min_q:"0.003",max_q:"5000",min_p:"0.00000001",max_p:"2000000",min_a:"0.0001",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"BCH/EUR",min_q:"0.003",max_q:"5000",min_p:"0.01",max_p:"300000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BCH/UAH",min_q:"0.003",max_q:"5000",min_p:"0.1",max_p:"30000",min_a:"10",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"BCH/BTC",min_q:"0.003",max_q:"5000",min_p:"0.00000001",max_p:"5",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"BCH/ETH",min_q:"0.003",max_q:"5000",min_p:"0.0000001",max_p:"200",min_a:"0.0001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"BCH/USDT",min_q:"0.003",max_q:"5000",min_p:"0.01",max_p:"5000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"BTG/USD",min_q:"0.01",max_q:"100000",min_p:"0.001",max_p:"1000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BTG/BTC",min_q:"0.01",max_q:"100000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"BTG/ETH",min_q:"0.01",max_q:"100000",min_p:"0.0001",max_p:"100",min_a:"0.01",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"BTT/RUB",min_q:"1",max_q:"500000000",min_p:"0.000001",max_p:"1000",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"BTT/UAH",min_q:"1",max_q:"500000000",min_p:"0.000001",max_p:"1000",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"BTT/BTC",min_q:"1",max_q:"500000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"CRON/BTC",min_q:"1",max_q:"100000",min_p:"0.0000001",max_p:"1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"CRON/ETH",min_q:"1",max_q:"100000",min_p:"0.0000001",max_p:"10",min_a:"0.00001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"CRON/USDT",min_q:"1",max_q:"100000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0",maker:"0"},{pair:"CRON/EXM",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1000",min_a:"0.01",max_a:"100000",taker:"0.4",maker:"0.4"},{pair:"DAI/USD",min_q:"1",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"DAI/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"0.5",max_a:"30000000",taker:"0.4",maker:"0.4"},{pair:"DAI/BTC",min_q:"1",max_q:"500000",min_p:"0.0000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"DAI/ETH",min_q:"1",max_q:"500000",min_p:"0.000001",max_p:"10",min_a:"0.0001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"DASH/USD",min_q:"0.01",max_q:"10000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"DASH/RUB",min_q:"0.01",max_q:"10000",min_p:"0.01",max_p:"100000",min_a:"150",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"DASH/UAH",min_q:"0.01",max_q:"10000",min_p:"0.01",max_p:"200000",min_a:"10",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"DASH/BTC",min_q:"0.01",max_q:"10000",min_p:"0.0001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"DASH/USDT",min_q:"0.01",max_q:"10000",min_p:"0.01",max_p:"5000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"DCR/RUB",min_q:"0.01",max_q:"50000",min_p:"0.00001",max_p:"100000",min_a:"0.5",max_a:"3000000",taker:"0.4",maker:"0.4"},{pair:"DCR/UAH",min_q:"0.01",max_q:"50000",min_p:"0.00001",max_p:"100000",min_a:"0.25",max_a:"1000000",taker:"0.4",maker:"0.4"},{pair:"DCR/BTC",min_q:"0.01",max_q:"50000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"DOGE/USD",min_q:"100",max_q:"500000000",min_p:"0.0000001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"DOGE/BTC",min_q:"100",max_q:"500000000",min_p:"0.0000001",max_p:"1",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"EOS/USD",min_q:"0.01",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"EOS/EUR",min_q:"0.01",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"EOS/BTC",min_q:"0.01",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ETC/USD",min_q:"0.2",max_q:"100000",min_p:"0.01",max_p:"10000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETC/RUB",min_q:"0.2",max_q:"100000",min_p:"0.01",max_p:"10000",min_a:"0.01",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ETC/BTC",min_q:"0.2",max_q:"100000",min_p:"0.0001",max_p:"0.5",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ETH/EUR",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETH/GBP",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETH/UAH",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"1000000",min_a:"90",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"ETH/PLN",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"50",max_a:"2000000",taker:"0.4",maker:"0.4"},{pair:"ETH/TRY",min_q:"0.001",max_q:"5000",min_p:"0.1",max_p:"80000",min_a:"10",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"ETH/KZT",min_q:"0.001",max_q:"5000",min_p:"4",max_p:"40000000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETH/USDT",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"ETH/LTC",min_q:"0.001",max_q:"5000",min_p:"0.00000001",max_p:"100000",min_a:"0.05",max_a:"100000",taker:"0.4",maker:"0.4"},{pair:"ETZ/BTC",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"ETZ/ETH",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"100",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ETZ/USDT",min_q:"1",max_q:"50000000",min_p:"0.000001",max_p:"1000",min_a:"0.01",max_a:"1000",taker:"0",maker:"0"},{pair:"EXM/USDT",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1000",min_a:"0.01",max_a:"100000",taker:"0",maker:"0"},{pair:"EXM/ETH",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"GAS/USD",min_q:"0.01",max_q:"500000",min_p:"0.01",max_p:"50000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"GAS/BTC",min_q:"0.01",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"GNT/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"GNT/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"GUSD/USD",min_q:"1",max_q:"500000",min_p:"0.1",max_p:"10",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"GUSD/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"GUSD/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.0015",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"HP/BTC",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"HB/BTC",min_q:"10",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"LSK/USD",min_q:"0.1",max_q:"500000",min_p:"0.1",max_p:"1000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"LSK/RUB",min_q:"0.1",max_q:"500000",min_p:"0.001",max_p:"100000",min_a:"0.5",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"LSK/BTC",min_q:"1",max_q:"500000",min_p:"0.0000001",max_p:"1",min_a:"0.0015",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"LTC/USD",min_q:"0.05",max_q:"10000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"LTC/RUB",min_q:"0.05",max_q:"10000",min_p:"0.01",max_p:"100000",min_a:"150",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"LTC/EUR",min_q:"0.05",max_q:"10000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"LTC/UAH",min_q:"0.05",max_q:"10000",min_p:"0.01",max_p:"300000",min_a:"5",max_a:"18000000",taker:"0.4",maker:"0.4"},{pair:"LTC/BTC",min_q:"0.05",max_q:"10000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"MKR/BTC",min_q:"0.0001",max_q:"1000",min_p:"0.0001",max_p:"100",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"MKR/DAI",min_q:"0.0001",max_q:"1000",min_p:"0.5",max_p:"500000",min_a:"0.005",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"MNC/USD",min_q:"10",max_q:"500000000",min_p:"0.000001",max_p:"10000",min_a:"0.01",max_a:"100000",taker:"0.4",maker:"0.4"},{pair:"MNC/BTC",min_q:"10",max_q:"500000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"MNC/ETH",min_q:"10",max_q:"500000000",min_p:"0.0000001",max_p:"10",min_a:"0.00001",max_a:"1000",taker:"0.4",maker:"0.4"},{pair:"NEO/USD",min_q:"0.01",max_q:"100000",min_p:"0.01",max_p:"50000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"NEO/RUB",min_q:"0.01",max_q:"100000",min_p:"0.001",max_p:"1500000",min_a:"50",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"NEO/BTC",min_q:"0.1",max_q:"100000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"OMG/USD",min_q:"0.01",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"OMG/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"OMG/ETH",min_q:"0.01",max_q:"500000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"ONG/EXM",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"100",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"ONG/BTC",min_q:"1",max_q:"1000000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"ONG/RUB",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"100",max_a:"250000",taker:"0.4",maker:"0.4"},{pair:"ONG/UAH",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"50",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"ONT/EXM",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"200",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"ONT/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"ONT/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"100",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"ONT/UAH",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"200",max_a:"250000",taker:"0.4",maker:"0.4"},{pair:"PTI/RUB",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"600000",min_a:"10",max_a:"600000",taker:"0.4",maker:"0.4"},{pair:"PTI/BTC",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"PTI/EOS",min_q:"1",max_q:"50000000",min_p:"0.0000001",max_p:"5000",min_a:"0.01",max_a:"20000",taker:"0.4",maker:"0.4"},{pair:"PTI/USDT",min_q:"1",max_q:"50000000",min_p:"0.000001",max_p:"10000",min_a:"0.01",max_a:"100000",taker:"0",maker:"0"},{pair:"QTUM/USD",min_q:"0.1",max_q:"500000",min_p:"0.00000001",max_p:"10000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"QTUM/BTC",min_q:"0.1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"QTUM/ETH",min_q:"0.1",max_q:"500000",min_p:"0.00000001",max_p:"100",min_a:"0.001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"ROOBEE/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"SMART/USD",min_q:"10",max_q:"100000000",min_p:"0.000001",max_p:"1000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"SMART/RUB",min_q:"10",max_q:"100000000",min_p:"0.0001",max_p:"100000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"SMART/EUR",min_q:"10",max_q:"100000000",min_p:"0.000001",max_p:"1000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"SMART/BTC",min_q:"10",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"TRX/USD",min_q:"1",max_q:"50000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"TRX/EUR",min_q:"0.01",max_q:"50000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"TRX/RUB",min_q:"1",max_q:"50000000",min_p:"0.000001",max_p:"100000",min_a:"0.1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"TRX/UAH",min_q:"1",max_q:"50000000",min_p:"0.000001",max_p:"100000",min_a:"0.1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"TRX/BTC",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"USDC/USD",min_q:"1",max_q:"500000",min_p:"0.0001",max_p:"1000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"USDC/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"USDC/ETH",min_q:"1",max_q:"500000",min_p:"0.0000001",max_p:"100",min_a:"0.001",max_a:"1000",taker:"0.4",maker:"0.4"},{pair:"USDC/USDT",min_q:"1",max_q:"500000",min_p:"0.0001",max_p:"1000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"USDT/USD",min_q:"1",max_q:"500000",min_p:"0.5",max_p:"10",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"USDT/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"USDT/EUR",min_q:"0.01",max_q:"500000",min_p:"0.1",max_p:"10",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"USDT/GBP",min_q:"1",max_q:"500000",min_p:"0.5",max_p:"10",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"USDT/UAH",min_q:"0.01",max_q:"500000",min_p:"1",max_p:"3000",min_a:"2",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"USDT/KZT",min_q:"1",max_q:"500000",min_p:"200",max_p:"4000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"VLX/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"WAVES/USD",min_q:"0.5",max_q:"500000",min_p:"0.001",max_p:"3500",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"WAVES/RUB",min_q:"0.5",max_q:"500000",min_p:"0.01",max_p:"10000",min_a:"1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"WAVES/BTC",min_q:"0.5",max_q:"500000",min_p:"0.000001",max_p:"1",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"WAVES/ETH",min_q:"0.5",max_q:"500000",min_p:"0.00001",max_p:"30",min_a:"0.0035",max_a:"3500",taker:"0.4",maker:"0.4"},{pair:"XEM/USD",min_q:"10",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XEM/EUR",min_q:"10",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XEM/UAH",min_q:"1",max_q:"10000000",min_p:"0.0001",max_p:"30000",min_a:"10",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"XEM/BTC",min_q:"10",max_q:"10000000",min_p:"0.0000001",max_p:"1",min_a:"0.00015",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"XLM/USD",min_q:"0.01",max_q:"5000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XLM/RUB",min_q:"0.01",max_q:"5000000",min_p:"0.00001",max_p:"100000",min_a:"0.1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"XLM/TRY",min_q:"0.01",max_q:"5000000",min_p:"0.00001",max_p:"100000",min_a:"0.1",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"XLM/BTC",min_q:"1",max_q:"5000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"XMR/USD",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XMR/RUB",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"600000",min_a:"10",max_a:"16000000",taker:"0.4",maker:"0.4"},{pair:"XMR/EUR",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XMR/UAH",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"300000",min_a:"5",max_a:"16000000",taker:"0.4",maker:"0.4"},{pair:"XMR/BTC",min_q:"0.01",max_q:"10000",min_p:"0.0001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"XMR/ETH",min_q:"0.01",max_q:"10000",min_p:"0.00000001",max_p:"100",min_a:"0.001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"XRP/EUR",min_q:"1",max_q:"5000000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XRP/GBP",min_q:"1",max_q:"5000000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XRP/TRY",min_q:"1",max_q:"5000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"XRP/UAH",min_q:"1",max_q:"5000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"XRP/USDT",min_q:"1",max_q:"5000000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0",maker:"0"},{pair:"XRP/ETH",min_q:"1",max_q:"5000000",min_p:"0.00000001",max_p:"10",min_a:"0.00001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"XTZ/USD",min_q:"0.1",max_q:"100000",min_p:"0.0001",max_p:"1000",min_a:"0.1",max_a:"100000",taker:"0.4",maker:"0.4"},{pair:"XTZ/RUB",min_q:"0.1",max_q:"100000",min_p:"0.00001",max_p:"100000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XTZ/BTC",min_q:"0.1",max_q:"100000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"XTZ/ETH",min_q:"0.1",max_q:"100000",min_p:"0.0000001",max_p:"10",min_a:"0.0001",max_a:"1000",taker:"0.4",maker:"0.4"},{pair:"ZEC/USD",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"5000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ZEC/RUB",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"100000",min_a:"0.1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ZEC/EUR",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"5000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ZEC/BTC",min_q:"0.01",max_q:"10000",min_p:"0.00001",max_p:"10",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ZRX/USD",min_q:"0.01",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ZRX/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ZRX/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"ZAG/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"USD/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"EXM/BTC",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.0000001",max_a:"1",taker:"0.4",maker:"0.4"}],fees:[{group:"crypto",title:"Cryptocurrency",items:[{prov:"EXM",dep:"0%",wd:"1 EXM"},{prov:"BTC",dep:"0%",wd:"0.0004 BTC"},{prov:"LTC",dep:"0%",wd:"0.01 LTC"},{prov:"DOGE",dep:"0%",wd:"1 Doge"},{prov:"DASH",dep:"0%",wd:"0.002 DASH"},{prov:"ETH",dep:"0%",wd:"0.003 ETH"},{prov:"WAVES",dep:"0%",wd:"0.001 WAVES"},{prov:"ZEC",dep:"0%",wd:"0.001 ZEC"},{prov:"USDT",dep:"0%",wd:""},{prov:"XMR",dep:"0%",wd:"0.001 XMR"},{prov:"XRP",dep:"0%",wd:"0.02 XRP"},{prov:"ETC",dep:"0%",wd:"0.01 ETC"},{prov:"BCH",dep:"0%",wd:"0.001 BCH"},{prov:"BTG",dep:"0%",wd:"0.001 BTG"},{prov:"EOS",dep:"0%",wd:"0.05 EOS"},{prov:"XLM",dep:"0%",wd:"0.01 XLM"},{prov:"OMG",dep:"0.1 OMG",wd:"0.5 OMG"},{prov:"TRX",dep:"0%",wd:"1 TRX"},{prov:"ADA",dep:"0%",wd:"1 ADA"},{prov:"NEO",dep:"0%",wd:"0%"},{prov:"GAS",dep:"0%",wd:"0%"},{prov:"ZRX",dep:"0%",wd:"1 ZRX"},{prov:"GNT",dep:"0%",wd:"1 GNT"},{prov:"GUSD",dep:"0%",wd:"0.5 GUSD"},{prov:"LSK",dep:"0%",wd:"0.1 LSK"},{prov:"XEM",dep:"0%",wd:"5 XEM"},{prov:"SMART",dep:"0%",wd:"0.5 SMART"},{prov:"QTUM",dep:"0%",wd:"0.01 QTUM"},{prov:"HB",dep:"0%",wd:"10 HB"},{prov:"DAI",dep:"0%",wd:"1 DAI"},{prov:"MKR",dep:"0%",wd:"0.005 MKR"},{prov:"MNC",dep:"0%",wd:"15 MNC"},{prov:"PTI",dep:"-",wd:"10 PTI"},{prov:"ETZ",dep:"0%",wd:"1 ETZ"},{prov:"USDC",dep:"0%",wd:"0.5 USDC"},{prov:"ROOBEE",dep:"0%",wd:"200 ROOBEE"},{prov:"DCR",dep:"0%",wd:"0.01 DCR"},{prov:"ZAG",dep:"0%",wd:"0%"},{prov:"BTT",dep:"0 BTT",wd:"100 BTT"},{prov:"VLX",dep:"0%",wd:"1 VLX"},{prov:"CRON",dep:"0%",wd:"5 CRON"},{prov:"ONT",dep:"0%",wd:"1 ONT"},{prov:"ONG",dep:"0%",wd:"5 ONG"},{prov:"ALGO",dep:"0%",wd:"0.01 ALGO"},{prov:"ATOM",dep:"0%",wd:"0.05 ATOM"}]},{group:"usd",title:"USD",items:[{prov:"Payeer",dep:"3.95%",wd:"-"},{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"AdvCash",dep:"0%",wd:"2.49%"},{prov:"Visa/MasterCard (Simplex)",dep:"4.5% + 0.5 USD",wd:"-"},{prov:"Visa",dep:"3.45%",wd:"-"},{prov:"Frick Bank",dep:"0 USD",wd:"-"}]},{group:"eur",title:"EUR",items:[{prov:"Visa/MasterCard",dep:"4.5% + 0.5  EUR",wd:"-"},{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Visa",dep:"2.95%",wd:"-"},{prov:"Frick Internal Transfer",dep:"0 EUR",wd:"-"},{prov:"SEPA Frick Bank",dep:"0 EUR",wd:"1 EUR"},{prov:"WIRE Frick Bank",dep:"0%",wd:"20 EUR"},{prov:"SEPA Weg Ag",dep:"-",wd:"1 EUR"}]},{group:"gbp",title:"GBP",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"WIRE Frick Bank",dep:"10 GBP",wd:"-"}]},{group:"rub",title:"RUB",items:[{prov:"Payeer",dep:"2.49%",wd:"3.49%"},{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Qiwi",dep:"1.49%",wd:"2.49%"},{prov:"Yandex Money",dep:"1.49%",wd:"1.95 %"},{prov:"AdvCash",dep:"0.99%",wd:"0.99%"},{prov:"Visa/MasterCard",dep:"2.99%",wd:"3.99% + 60 RUB"}]},{group:"pln",title:"PLN",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"}]},{group:"try",title:"TRY",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Visa",dep:"3.05%",wd:"-"},{prov:"Visa/MasterCard (Simplex)",dep:"4.5% + 2 TRY",wd:"-"},{prov:"AdvCash",dep:"0%",wd:"-"}]},{group:"uah",title:"UAH",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Terminal",dep:"2.6%",wd:"-"},{prov:"Visa/MasterCard EasyTransfer",dep:"-",wd:"2.99%"},{prov:"Visa/MasterCard",dep:"1% + 5 UAH",wd:"-"}]},{group:"kzt",title:"KZT",items:[{prov:"Visa/MasterCard",dep:"3.5%",wd:"2.99% + 450 KZT"},{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"AdvCash",dep:"0%",wd:"-"}]}]}}},exceptions:{exact:{40005:n,40009:h,40015:r,40016:u,40017:n,40032:m,40034:p,50052:c,50054:c,50304:o,50173:o,50277:d,50319:d,50321:d},broad:{"range period is too long":f,"invalid syntax":f,"API rate limit exceeded":p}},orders:{}})}async fetchTradingFees(e={}){if(this.options.useWebapiForFetchingFees){let t=(await this.webGetEnDocsFees(e)).split('<td class="th_fees_2" colspan="2">'),i=t.length;if(2!==i)throw new l(this.id+" fetchTradingFees format has changed");if(t=t[1].split("</td>"),i=t.length,i<2)throw new l(this.id+" fetchTradingFees format has changed");const s=.01*parseFloat(t[0].replace("%",""));return{maker:s,taker:s}}return{maker:this.fees.trading.maker,taker:this.fees.trading.taker}}parseFixedFloatValue(e){if(void 0===e||"-"===e)return;if(""===e)return 0;const t=e.indexOf("%")>=0,i=e.split(" ")[0].replace("%",""),s=parseFloat(i);if(s>0&&t)throw new r(this.id+" parseFixedFloatValue detected an unsupported non-zero percentage-based fee "+e);return s}async fetchFundingFees(e={}){let t=void 0;t=this.options.useWebapiForFetchingFees?await this.webGetCtrlFeesAndLimits(e):this.options.feesAndLimits;const i={},s={},a=this.safeValue(t.data,"fees"),r=this.indexBy(a,"group"),o=r.crypto.items;for(let e=0;e<o.length;e++){const t=o[e],a=this.safeCurrencyCode(this.safeString(t,"prov")),r=this.safeString(t,"wd"),n=this.safeString(t,"dep");void 0!==r&&(i[a]=this.parseFixedFloatValue(r)),void 0!==n&&(s[a]=this.parseFixedFloatValue(n))}const n=this.toArray(this.omit(r,"crypto"));for(let e=0;e<n.length;e++){const t=this.safeCurrencyCode(this.safeString(n[e],"title"));i[t]=void 0,s[t]=void 0}const c={info:t,withdraw:i,deposit:s};return this.options.fundingFees=c,c}async fetchCurrencies(e={}){const t=await this.fetchFundingFees(e),i=Object.keys(t.withdraw),s=this.indexBy(t.info.data.limits,"pair"),a=Object.keys(s),r={},o={},n={},c={},d={},h={};for(let e=0;e<a.length;e++){const t=a[e],i=s[t],[l,u]=t.split("/"),p=this.safeCurrencyCode(l),f=this.safeCurrencyCode(u),m=this.safeFloat(i,"max_q"),v=this.safeFloat(i,"max_p"),y=this.safeFloat(i,"max_a"),g=this.safeFloat(i,"min_q"),b=this.safeFloat(i,"min_p"),w=this.safeFloat(i,"min_a");r[p]=Math.min(this.safeFloat(r,p,g),g),c[p]=Math.max(this.safeFloat(c,p,m),m),o[f]=Math.min(this.safeFloat(o,f,b),b),n[f]=Math.min(this.safeFloat(n,f,w),w),d[f]=Math.max(this.safeFloat(d,f,v),v),h[f]=Math.max(this.safeFloat(h,f,y),y)}const l={};for(let e=0;e<i.length;e++){const s=i[e],a=this.safeCurrencyCode(s),u=this.safeValue(t.withdraw,a),p=!0;l[a]={id:s,code:a,name:a,active:p,fee:u,precision:8,limits:{amount:{min:this.safeFloat(r,a),max:this.safeFloat(c,a)},price:{min:this.safeFloat(o,a),max:this.safeFloat(d,a)},cost:{min:this.safeFloat(n,a),max:this.safeFloat(h,a)}},info:s}}return l}async fetchMarkets(e={}){const t=await this.publicGetPairSettings(e),i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){const a=i[e],r=t[a],o=a.replace("_","/"),[n,c]=o.split("/"),d=this.safeCurrencyCode(n),h=this.safeCurrencyCode(c),l=this.safeFloat(r,"commission_taker_percent"),u=this.safeFloat(r,"commission_maker_percent");s.push({id:a,symbol:o,base:d,quote:h,baseId:n,quoteId:c,active:!0,taker:l/100,maker:u/100,limits:{amount:{min:this.safeFloat(r,"min_quantity"),max:this.safeFloat(r,"max_quantity")},price:{min:this.safeFloat(r,"min_price"),max:this.safeFloat(r,"max_price")},cost:{min:this.safeFloat(r,"min_amount"),max:this.safeFloat(r,"max_amount")}},precision:{amount:8,price:this.safeInteger(r,"price_precision")},info:r})}return s}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const o=this.market(e),n={symbol:o.id,resolution:this.timeframes[t]},c=this.safeValue(this.options,"fetchOHLCV"),d=this.safeInteger(c,"maxLimit",3e3),h=this.parseTimeframe(t),l=this.milliseconds();if(void 0===i){if(void 0===s)throw new a(this.id+" fetchOHLCV requires a since argument or a limit argument");if(s>d)throw new f(this.id+" fetchOHLCV will serve "+d.toString()+" candles at most");n.from=parseInt(l/1e3)-s*h-1,n.to=parseInt(l/1e3)}else if(n.from=parseInt(i/1e3)-1,void 0===s)n.to=parseInt(l/1e3);else{if(s>d)throw new f(this.id+" fetchOHLCV will serve "+d.toString()+" candles at most");const e=this.sum(i,s*h*1e3);n.to=parseInt(e/1e3)}const u=await this.publicGetCandlesHistory(this.extend(n,r)),p=this.safeValue(u,"candles",[]);return this.parseOHLCVs(p,o,t,i,s)}parseOHLCV(e,t){return[this.safeInteger(e,"t"),this.safeFloat(e,"o"),this.safeFloat(e,"h"),this.safeFloat(e,"l"),this.safeFloat(e,"c"),this.safeFloat(e,"v")]}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostUserInfo(e),i={info:t},s=this.safeValue(t,"balances",{}),a=this.safeValue(t,"reserved",{}),r=Object.keys(s);for(let e=0;e<r.length;e++){const t=r[e],o=this.currencyId(t),n=this.account();o in s&&(n.free=this.safeFloat(s,o)),o in a&&(n.used=this.safeFloat(a,o)),i[t]=n}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),a={pair:s.id};void 0!==t&&(a.limit=t);const r=await this.publicGetOrderBook(this.extend(a,i)),o=this.safeValue(r,s.id);return this.parseOrderBook(o,void 0,"bid","ask")}async fetchOrderBooks(e,t,i={}){await this.loadMarkets();let s=void 0;if(void 0===e){if(s=this.ids.join(","),s.length>2048){const e=this.ids.length;throw new r(this.id+" has "+e.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks")}}else s=this.marketIds(e),s=s.join(",");const a={pair:s};void 0!==t&&(a.limit=t);const o=await this.publicGetOrderBook(this.extend(a,i)),n={},c=Object.keys(o);for(let e=0;e<c.length;e++){const t=c[e];let i=t;if(t in this.markets_by_id){i=this.markets_by_id[t].symbol}n[i]=this.parseOrderBook(o[t],void 0,"bid","ask")}return n}parseTicker(e,t){const i=this.safeTimestamp(e,"updated");let s=void 0;void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"last_trade");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy_price"),bidVolume:void 0,ask:this.safeFloat(e,"sell_price"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"vol_curr"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s={},a=Object.keys(i);for(let e=0;e<a.length;e++){const t=a[e],r=this.markets_by_id[t],o=r.symbol,n=i[t];s[o]=this.parseTicker(n,r)}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s=this.market(e);return this.parseTicker(i[s.id],s)}parseTrade(e,t){const i=this.safeTimestamp(e,"date");let s=void 0;const a=this.safeString(e,"trade_id"),r=this.safeString(e,"order_id"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"quantity"),c=this.safeFloat(e,"amount"),d=this.safeString(e,"type"),h=this.safeString(e,"pair");if(void 0!==h)if(h in this.markets_by_id)t=this.markets_by_id[h];else{const[e,t]=h.split("_");s=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===s&&void 0!==t&&(s=t.symbol);const l=this.safeString(e,"exec_type");let u=void 0;const p=this.safeFloat(e,"commission_amount");if(void 0!==p){const t=this.safeString(e,"commission_currency"),i=this.safeCurrencyCode(t);let s=this.safeFloat(e,"commission_percent");void 0!==s&&(s/=1e3),u={cost:p,currency:i,rate:s}}return{id:a,info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,order:r,type:void 0,side:d,takerOrMaker:l,price:o,amount:n,cost:c,fee:u}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={pair:a.id},o=await this.publicGetTrades(this.extend(r,s)),n=this.safeValue(o,a.id,[]);return this.parseTrades(n,a,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades() requires a symbol argument (a single symbol or an array)");await this.loadMarkets();let r=void 0,o=void 0;if(Array.isArray(e)){if(e.length<1)throw new a(this.id+" fetchMyTrades() requires a non-empty symbol array");r=this.marketIds(e).join(",")}else o=this.market(e),r=o.id;const n={pair:r};void 0!==i&&(n.limit=i);const c=await this.privatePostUserTrades(this.extend(n,s));let d=[];const h=Object.keys(c);for(let e=0;e<h.length;e++){const s=h[e];let a=void 0;if(s in this.markets_by_id)o=this.markets_by_id[s],a=o.symbol;else{const[e,t]=s.split("_");a=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}const r=c[s],n=this.parseTrades(r,o,t,i,{symbol:a});d=this.arrayConcat(d,n)}return this.filterBySinceLimit(d,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o="market"===t?t+"_":"";"market"===t&&void 0===a&&(a=0);const n={pair:this.market(e).id,quantity:this.amountToPrecision(e,s),type:o+i,price:this.priceToPrecision(e,a)},c=await this.privatePostOrderCreate(this.extend(n,r)),d=this.safeString(c,"order_id"),h=this.milliseconds();s=parseFloat(s),a=parseFloat(a);return{id:d,info:c,timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:void 0,status:"open",symbol:e,type:t,side:i,price:a,cost:a*s,amount:s,remaining:s,filled:0,fee:void 0,trades:void 0,clientOrderId:void 0,average:void 0}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e};return await this.privatePostOrderCancel(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e.toString()},a=await this.privatePostOrderTrades(this.extend(s,i)),r=this.parseOrder(a);return this.extend(r,{id:e.toString()})}async fetchOrderTrades(e,t,i,s,a={}){let r=void 0;void 0!==t&&(r=this.market(t));const o={order_id:e.toString()},n=await this.privatePostOrderTrades(this.extend(o,a)),c=this.safeValue(n,"trades");return this.parseTrades(c,r,i,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a=await this.privatePostUserOpenOrders(s),r=Object.keys(a);let o=[];for(let e=0;e<r.length;e++){const t=r[e];let i=void 0;t in this.markets_by_id&&(i=this.markets_by_id[t]);const s=this.parseOrders(a[t],i);o=this.arrayConcat(o,s)}return this.filterBySymbolSinceLimit(o,e,t,i)}parseOrder(e,t){let i=this.safeString(e,"order_id"),s=this.safeTimestamp(e,"created"),a=void 0;const r=this.safeString(e,"type");if(void 0===t){let i=void 0;"pair"in e?i=e.pair:"in_currency"in e&&"out_currency"in e&&(i="buy"===r?e.in_currency+"_"+e.out_currency:e.out_currency+"_"+e.in_currency),void 0!==i&&i in this.markets_by_id&&(t=this.markets_by_id[i])}let o=this.safeFloat(e,"quantity");if(void 0===o){const t="buy"===r?"in_amount":"out_amount";o=this.safeFloat(e,t)}let n=this.safeFloat(e,"price"),c=this.safeFloat(e,"amount"),d=0;const h=[],l=this.safeValue(e,"trades",[]);let u=void 0,p=void 0,f=void 0;const m=l.length;if(m>0){u=0;for(let e=0;e<m;e++){const a=this.parseTrade(l[e],t);void 0===i&&(i=a.order),void 0===s&&(s=a.timestamp),s>a.timestamp&&(s=a.timestamp),d=this.sum(d,a.amount),u=this.sum(u,a.fee.cost),h.push(a)}p=h[m-1].timestamp}let v=this.safeString(e,"status"),y=void 0;void 0!==o&&(y=o-d,v=d>=o?"closed":"open"),void 0===t&&(t=this.getMarketFromTrades(h));let g=void 0;void 0!==t&&(a=t.symbol,g=t.quote),void 0===c?void 0!==n&&(c=n*d):d>0&&(void 0===f&&(f=c/d),void 0===n&&(n=c/d));const b={cost:u,currency:g};return{id:i,clientOrderId:void 0,datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:p,status:v,symbol:a,type:"limit",timeInForce:void 0,side:r,price:n,stopPrice:void 0,cost:c,amount:o,filled:d,remaining:y,average:f,trades:h,fee:b,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=await this.privatePostDepositAddress(t),s=this.safeString(i,e);let a=void 0,r=void 0;if(s){const e=s.split(",");a=e[0];e.length>1&&(r=e[1])}return this.checkAddress(a),{currency:e,address:a,tag:r,info:i}}getMarketFromTrades(e){const t=this.indexBy(e,"pair"),i=Object.keys(t);if(1===i.length)return this.markets[i[0]]}calculateFee(e,t,i,s,a,r="taker",o={}){const n=this.markets[e],c=n[r];let d=parseFloat(this.costToPrecision(e,s*c)),h="quote";return"sell"===i?d*=a:h="base",{type:r,currency:n[h],rate:c,cost:parseFloat(this.feeToPrecision(e,d))}}async withdraw(e,t,i,s,a={}){await this.loadMarkets();const r={amount:t,currency:this.currency(e).id,address:i};void 0!==s&&(r.invoice=s);const o=await this.privatePostWithdrawCrypt(this.extend(r,a));return{info:o,id:o.task_id}}parseTransactionStatus(e){return this.safeString({transferred:"ok",paid:"ok",pending:"pending",processing:"pending"},e,e)}parseTransaction(e,t){const i=this.safeTimestamp(e,"dt");let s=this.safeFloat(e,"amount");void 0!==s&&(s=Math.abs(s));const a=this.parseTransactionStatus(this.safeString(e,"status")),r=this.safeString(e,"txid"),o=this.safeString(e,"type"),n=this.safeString(e,"curr"),c=this.safeCurrencyCode(n,t);let d=this.safeString(e,"account");if(void 0!==d){const e=d.split(":");2===e.length&&(d=e[1].replace(" ",""))}let h=void 0;if(!this.fees.funding.percentage){const t="withdrawal"===o?"withdraw":"deposit";let i=this.safeFloat(this.options.fundingFees[t],c);"cashback"===this.safeString(e,"provider")&&(i=0),void 0!==i&&("withdrawal"===o&&(s-=i),h={cost:i,currency:c,rate:void 0})}return{info:e,id:void 0,currency:c,amount:s,address:d,tag:void 0,status:a,type:o,updated:void 0,txid:r,timestamp:i,datetime:this.iso8601(i),fee:h}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const a={};void 0!==t&&(a.date=parseInt(t/1e3));let r=void 0;void 0!==e&&(r=this.currency(e));const o=await this.privatePostWalletHistory(this.extend(a,s));return this.parseTransactions(o.history,r,t,i)}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t]+"/";if("web"!==t&&(o+=this.version+"/"),o+=e,"public"===t||"web"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else if("private"===t){this.checkRequiredCredentials();const e=this.nonce();r=this.urlencode(this.extend({nonce:e},s)),a={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(r),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:r,headers:a}}nonce(){return this.milliseconds()}handleErrors(e,t,i,s,a,o,n,c,d){if(void 0!==n&&("result"in n||"errmsg"in n)){let e=this.safeValue(n,"result",!1);if("string"==typeof e&&(e="true"===e||"1"===e),!e){let e=void 0;const t=this.safeString2(n,"error","errmsg"),i=t.split(":");if(i.length>1){const t=i[0].split(" ");e=t.length>1?t[1]:t[0]}const s=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,e,s),this.throwBroadlyMatchedException(this.exceptions.broad,t,s),new r(s)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,AuthenticationError:r,ExchangeNotAvailable:o,ArgumentsRequired:n}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"exx",name:"EXX",countries:["CN"],rateLimit:100,userAgent:this.userAgents.chrome,has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/37770292-fbf613d0-2de4-11e8-9f79-f2dc451b8ccb.jpg",api:{public:"https://api.exx.com/data/v1",private:"https://trade.exx.com/api"},www:"https://www.exx.com/",doc:"https://www.exx.com/help/restApi",fees:"https://www.exx.com/help/rate",referral:"https://www.exx.com/r/fde4260159e53ab8a58cc9186d35501f?recommQd=1"},api:{public:{get:["markets","tickers","ticker","depth","trades"]},private:{get:["order","cancel","getOrder","getOpenOrders","getBalance"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BCC:3e-4,BCD:0,BOT:10,BTC:.001,BTG:0,BTM:25,BTS:3,EOS:1,ETC:.01,ETH:.01,ETP:.012,HPY:0,HSR:.001,INK:20,LTC:.005,MCO:.6,MONA:.01,QASH:5,QCASH:5,QTUM:.01,USDT:5}}},commonCurrencies:{DOS:"DEMOS",TV:"TIV"},exceptions:{103:r}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){const a=i[e],r=t[a],[o,n]=a.split("_"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=c+"/"+d,l=!0===r.isOpen,u={amount:parseInt(r.amountScale),price:parseInt(r.priceScale)};s.push({id:a,symbol:h,base:c,quote:d,baseId:o,quoteId:n,active:l,precision:u,limits:{amount:{min:Math.pow(10,-u.amount),max:Math.pow(10,u.amount)},price:{min:Math.pow(10,-u.price),max:Math.pow(10,u.price)},cost:{min:void 0,max:void 0}},info:r})}return s}parseTicker(e,t){const i=t.symbol,s=this.safeInteger(e,"date");e=e.ticker;const a=this.safeFloat(e,"last");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:this.safeFloat(e,"riseRate"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={currency:i.id},a=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s={},a=this.milliseconds(),r=Object.keys(i);for(let e=0;e<r.length;e++){const t=r[e];if(!(t in this.marketsById))continue;const o=this.marketsById[t],n=o.symbol,c={date:a,ticker:i[t]};s[n]=this.parseTicker(c,o)}return this.filterByArray(s,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currency:this.marketId(e)},a=await this.publicGetDepth(this.extend(s,i)),r=this.safeTimestamp(a,"timestamp");return this.parseOrderBook(a,r)}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount");let r=void 0;void 0!==s&&void 0!==a&&(r=s*a);let o=void 0;void 0!==t&&(o=t.symbol);const n=this.safeString(e,"type");return{id:this.safeString(e,"tid"),info:e,timestamp:i,datetime:this.iso8601(i),symbol:o,order:void 0,type:"limit",side:n,takerOrMaker:void 0,price:s,amount:a,cost:r,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={currency:a.id},o=await this.publicGetTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetGetBalance(e),i={info:t},s=this.safeValue(t,"funds"),a=Object.keys(s);for(let e=0;e<a.length;e++){const t=a[e],r=s[t],o=this.safeCurrencyCode(t),n={free:this.safeFloat(r,"balance"),used:this.safeFloat(r,"freeze"),total:this.safeFloat(r,"total")};i[o]=n}return this.parseBalance(i)}parseOrder(e,t){const i=t.symbol,s=parseInt(e.trade_date),a=this.safeFloat(e,"price"),r=this.safeFloat(e,"trade_money"),o=this.safeFloat(e,"total_amount"),n=this.safeFloat(e,"trade_amount",0),c=parseFloat(this.amountToPrecision(i,o-n));let d=this.safeInteger(e,"status");d=1===d?"canceled":2===d?"closed":"open";let h=void 0;return"fees"in e&&(h={cost:this.safeFloat(e,"fees"),currency:t.quote}),{id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:d,symbol:i,type:"limit",timeInForce:void 0,side:e.type,price:a,stopPrice:void 0,cost:r,amount:o,filled:n,remaining:c,trades:void 0,fee:h,info:e,average:void 0}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n={currency:o.id,type:i,price:a,amount:s},c=await this.privateGetOrder(this.extend(n,r)),d=this.safeString(c,"id");return this.parseOrder({id:d,trade_date:this.milliseconds(),total_amount:s,price:a,type:i,info:c},o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e,currency:this.market(t).id};return await this.privateGetCancel(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=this.market(t),a={id:e,currency:s.id},r=await this.privateGetGetOrder(this.extend(a,i));return this.parseOrder(r,s)}async fetchOpenOrders(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new n(this.id+" fetchOpenOrders requires a symbol argument");const a=this.market(e),r={currency:a.id},o=await this.privateGetGetOpenOrders(this.extend(r,s));return Array.isArray(o)?this.parseOrders(o,a,t,i):[]}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t]+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const e=this.urlencode(this.keysort(this.extend({accesskey:this.apiKey,nonce:this.nonce()},s)));o+="?"+e+"&signature="+this.hmac(this.encode(e),this.encode(this.secret),"sha512"),a={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,n,c,d,h){if(void 0===c)return;const l=this.safeString(c,"code"),u=this.safeString(c,"message"),p=this.id+" "+n;if("100"===l)return;if(void 0!==l){if(this.throwExactlyMatchedException(this.exceptions,l,p),"308"===l)return;throw new a(p)}const f=this.safeValue(c,"result");if(void 0!==f&&!f)throw""===u?new o(p):new a(p)}}},function(e,t,i){"use strict";const s=i(89);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"fcoinjp",name:"FCoinJP",countries:["JP"],hostname:"fcoinjp.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/54219174-08b66b00-4500-11e9-862d-f522d0fe08c6.jpg",fees:"https://fcoinjp.zendesk.com/hc/en-us/articles/360018727371",www:"https://www.fcoinjp.com",referral:void 0}})}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"flowbtc",name:"flowBTC",countries:["BR"],version:"v1",rateLimit:1e3,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87443317-01c0d080-c5fe-11ea-95c2-9ebe1a8fafd9.jpg",api:"https://publicapi.flowbtc.com.br",www:"https://www.flowbtc.com.br",doc:"https://www.flowbtc.com.br/api.html"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{post:["GetTicker","GetTrades","GetTradesByDate","GetOrderBook","GetProductPairs","GetProducts"]},private:{post:["CreateAccount","GetUserInfo","SetUserInfo","GetAccountInfo","GetAccountTrades","GetDepositAddresses","Withdraw","CreateOrder","ModifyOrder","CancelOrder","CancelAllOrders","GetAccountOpenOrders","GetOrderFee"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0025,taker:.005}}})}async fetchMarkets(e={}){const t=await this.publicPostGetProductPairs(e),i=this.safeValue(t,"productPairs"),s={};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"name"),r=this.safeString(t,"product1Label"),o=this.safeString(t,"product2Label"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o),d={amount:this.safeInteger(t,"product1DecimalPlaces"),price:this.safeInteger(t,"product2DecimalPlaces")},h=n+"/"+c;s[h]={id:a,symbol:h,base:n,quote:c,baseId:r,quoteId:o,precision:d,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:t,active:void 0}}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetAccountInfo(e),i=this.safeValue(t,"currencies"),s={info:t};for(let e=0;e<i.length;e++){const t=i[e],a=t.name,r=this.safeCurrencyCode(a),o=this.account();o.free=this.safeFloat(t,"balance"),o.total=this.safeFloat(t,"hold"),s[r]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={productPair:this.market(e).id},a=await this.publicPostGetOrderBook(this.extend(s,i));return this.parseOrderBook(a,void 0,"bids","asks","px","qty")}async fetchTicker(e,t={}){await this.loadMarkets();const i={productPair:this.market(e).id},s=await this.publicPostGetTicker(this.extend(i,t)),a=this.milliseconds(),r=this.safeFloat(s,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,"volume24hr"),quoteVolume:this.safeFloat(s,"volume24hrProduct2"),info:s}}parseTrade(e,t){const i=this.safeTimestamp(e,"unixtime"),s=0===e.incomingOrderSide?"buy":"sell",a=this.safeString(e,"tid"),r=this.safeFloat(e,"px"),o=this.safeFloat(e,"qty");let n=void 0;return void 0!==r&&void 0!==o&&(n=r*o),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:a,order:void 0,type:void 0,side:s,price:r,amount:o,cost:n,takerOrMaker:void 0,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={ins:a.id,startIndex:-1},o=await this.publicPostGetTrades(this.extend(r,s));return this.parseTrades(o.trades,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o="market"===t?1:0,n={ins:this.marketId(e),side:i,orderType:o,qty:s,px:this.priceToPrecision(e,a)},c=await this.privatePostCreateOrder(this.extend(n,r));return{info:c,id:c.serverOrderId}}async cancelOrder(e,t,i={}){if(await this.loadMarkets(),"ins"in i){const t={serverOrderId:e};return await this.privatePostCancelOrder(this.extend(t,i))}throw new a(this.id+" requires `ins` symbol parameter for cancelling an order")}sign(e,t="public",i="GET",s={},a,r){const o=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(s).length&&(r=this.json(s));else{this.checkRequiredCredentials();const e=this.nonce(),t=e.toString()+this.uid+this.apiKey,i=this.hmac(this.encode(t),this.encode(this.secret));r=this.json(this.extend({apiKey:this.apiKey,apiNonce:e,apiSig:i.toUpperCase()},s)),a={"Content-Type":"application/json"}}return{url:o,method:i,body:r,headers:a}}async request(e,t="public",i="GET",s={},r,o){const n=await this.fetch2(e,t,i,s,r,o);if("isAccepted"in n&&n.isAccepted)return n;throw new a(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(1),{TICK_SIZE:a}=i(2),{ExchangeError:r,InvalidOrder:o,BadRequest:n,InsufficientFunds:c,OrderNotFound:d,AuthenticationError:h}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"ftx",name:"FTX",countries:["HK"],rateLimit:100,certified:!0,pro:!0,hostname:"ftx.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/67149189-df896480-f2b0-11e9-8816-41593e17f9ec.jpg",www:"https://ftx.com",api:{public:"https://{hostname}",private:"https://{hostname}"},doc:"https://github.com/ftexchange/ftx",fees:"https://ftexchange.zendesk.com/hc/en-us/articles/360024479432-Fees",referral:"https://ftx.com/#a=1623029"},has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!1,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFees:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"15s":"15","1m":"60","5m":"300","15m":"900","1h":"3600","4h":"14400","1d":"86400"},api:{public:{get:["coins","markets","markets/{market_name}","markets/{market_name}/orderbook","markets/{market_name}/trades","markets/{market_name}/candles","futures","futures/{future_name}","futures/{future_name}/stats","funding_rates","indexes/{index_name}/weights","expired_futures","indexes/{market_name}/candles","lt/tokens","lt/{token_name}","options/requests","options/trades","stats/24h_options_volume","options/historical_volumes/BTC","options/open_interest/BTC","options/historical_open_interest/BTC"]},private:{get:["account","positions","wallet/coins","wallet/balances","wallet/all_balances","wallet/deposit_address/{coin}","wallet/deposits","wallet/withdrawals","orders","orders/history","orders/{order_id}","orders/by_client_id/{client_order_id}","conditional_orders","conditional_orders/{conditional_order_id}/triggers","conditional_orders/history","fills","funding_payments","lt/balances","lt/creations","lt/redemptions","subaccounts","subaccounts/{nickname}/balances","otc/quotes/{quoteId}","options/my_requests","options/requests/{request_id}/quotes","options/my_quotes","options/account_info","options/positions","options/fills"],post:["account/leverage","wallet/withdrawals","orders","conditional_orders","orders/{order_id}/modify","orders/by_client_id/{client_order_id}/modify","conditional_orders/{order_id}/modify","lt/{token_name}/create","lt/{token_name}/redeem","subaccounts","subaccounts/update_name","subaccounts/transfer","otc/quotes/{quote_id}/accept","otc/quotes","options/requests","options/requests/{request_id}/quotes","options/quotes/{quote_id}/accept"],delete:["orders/{order_id}","orders/by_client_id/{client_order_id}","orders","conditional_orders/{order_id}","subaccounts","options/requests/{request_id}","options/quotes/{quote_id}"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:2e-4,taker:.07/100,tiers:{taker:[[0,.07/100],[1e6,6e-4],[5e6,55e-5],[1e7,5e-4],[15e6,45e-5],[35e6,4e-4]],maker:[[0,2e-4],[1e6,2e-4],[5e6,15e-5],[1e7,15e-5],[15e6,1e-4],[35e6,1e-4]]}},funding:{withdraw:{}}},exceptions:{exact:{"Not logged in":h,"Not enough balances":c,InvalidPrice:o,"Size too small":o,"Missing parameter price":o,"Order not found":d,"Order already closed":o},broad:{"Invalid parameter":n,"The requested URL was not found on the server":n,"No such coin":n,"No such market":n,"An unexpected error occurred":r}},precisionMode:a,options:{cancelOrder:{method:"privateDeleteOrdersOrderId"},fetchOpenOrders:{method:"privateGetOrders"},fetchOrders:{method:"privateGetOrdersHistory"},sign:{"ftx.com":"FTX","ftx.us":"FTXUS"}}})}async fetchCurrencies(e={}){const t=await this.publicGetCoins(e),i=this.safeValue(t,"result",[]),s={};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"id"),r=this.safeCurrencyCode(a),o=this.safeString(t,"name");s[r]={id:a,code:r,info:t,type:void 0,name:o,active:void 0,fee:void 0,precision:void 0,limits:{withdraw:{min:void 0,max:void 0},amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}}}return s}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[],s=this.safeValue(t,"result",[]);for(let e=0;e<s.length;e++){const t=s[e],a=this.safeString(t,"name"),r=this.safeString2(t,"baseCurrency","underlying"),o=this.safeString(t,"quoteCurrency","USD"),n=this.safeString(t,"type"),c=this.safeCurrencyCode(r),d=this.safeCurrencyCode(o),h="future"===n?this.safeString(t,"name"):c+"/"+d,l=this.safeValue(t,"enabled"),u=this.safeFloat(t,"sizeIncrement"),p=this.safeFloat(t,"priceIncrement"),f={id:a,symbol:h,base:c,quote:d,baseId:r,quoteId:o,type:n,future:"future"===n,spot:"spot"===n,active:l,precision:{amount:u,price:p},limits:{amount:{min:u,max:void 0},price:{min:p,max:void 0},cost:{min:void 0,max:void 0}},info:t};i.push(f)}return i}parseTicker(e,t){let i=void 0;const s=this.safeString(e,"name");if(s in this.markets_by_id)t=this.markets_by_id[s];else{if("future"===this.safeString(e,"type"))i=s;else{const t=this.safeCurrencyCode(this.safeString(e,"baseCurrency")),s=this.safeCurrencyCode(this.safeString(e,"quoteCurrency"));void 0!==t&&void 0!==s&&(i=t+"/"+s)}}void 0===i&&void 0!==t&&(i=t.symbol);const a=this.safeFloat(e,"last"),r=this.safeTimestamp(e,"time",this.milliseconds());return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:this.safeFloat(e,"bidSize"),ask:this.safeFloat(e,"ask"),askVolume:this.safeFloat(e,"askSize"),vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"change24h"),average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"quoteVolume24h"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market_name:i.id},a=await this.publicGetMarketsMarketName(this.extend(s,t)),r=this.safeValue(a,"result",{});return this.parseTicker(r,i)}parseTickers(e,t){const i=[];for(let t=0;t<e.length;t++)i.push(this.parseTicker(e[t]));return this.filterByArray(i,"symbol",t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarkets(t),s=this.safeValue(i,"result",[]);return this.parseTickers(s,e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market_name:this.market(e).id};void 0!==t&&(s.depth=t);const a=await this.publicGetMarketsMarketNameOrderbook(this.extend(s,i)),r=this.safeValue(a,"result",{});return this.parseOrderBook(r)}parseOHLCV(e,t){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}getMarketId(e,t,i={}){const s=this.getMarketParams(e,t,i);return this.safeString(s,1,e)}getMarketParams(e,t,i={}){let s=void 0,a=void 0;return e in this.markets?(s=this.market(e),a=s.id):a=this.safeString(i,t,e),[s,a]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const[r,o]=this.getMarketParams(e,"market_name",a),n={resolution:this.timeframes[t],market_name:o};s=void 0===s?1501:s,void 0===i?(n.end_time=this.seconds(),n.limit=s,n.start_time=n.end_time-s*this.parseTimeframe(t)):(n.start_time=parseInt(i/1e3),n.limit=s,n.end_time=this.sum(n.start_time,s*this.parseTimeframe(t)));const c=await this.publicGetMarketsMarketNameCandles(this.extend(n,a)),d=this.safeValue(c,"result",[]);return this.parseOHLCVs(d,r,t,i,s)}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"liquidity"),a=this.safeString(e,"market");let r=void 0;if(void 0!==a)if(a in this.markets_by_id)r=(t=this.markets_by_id[a]).symbol;else{const t=this.safeCurrencyCode(this.safeString(e,"baseCurrency")),i=this.safeCurrencyCode(this.safeString(e,"quoteCurrency"));r=void 0!==t&&void 0!==i?t+"/"+i:a}const o=this.parse8601(this.safeString(e,"time")),n=this.safeFloat(e,"price"),c=this.safeFloat(e,"size");void 0===r&&void 0!==t&&(r=t.symbol);const d=this.safeString(e,"side");let h=void 0;void 0!==n&&void 0!==c&&(h=n*c);let l=void 0;const u=this.safeFloat(e,"fee");if(void 0!==u){const t=this.safeString(e,"feeCurrency");l={cost:u,currency:this.safeCurrencyCode(t),rate:this.safeFloat(e,"feeRate")}}const p=this.safeString(e,"orderId");return{info:e,timestamp:o,datetime:this.iso8601(o),symbol:r,id:i,order:p,type:void 0,takerOrMaker:s,side:d,price:n,amount:c,cost:h,fee:l}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const[a,r]=this.getMarketParams(e,"market_name",s),o={market_name:r};void 0!==t&&(o.start_time=parseInt(t/1e3),o.end_time=this.seconds()),void 0!==i&&(o.limit=i);const n=await this.publicGetMarketsMarketNameTrades(this.extend(o,s)),c=this.safeValue(n,"result",[]);return this.parseTrades(c,a,t,i)}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privateGetAccount(e),i=this.safeValue(t,"result",{});return{info:t,maker:this.safeFloat(i,"makerFee"),taker:this.safeFloat(i,"takerFee")}}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetWalletBalances(e),i={info:t},s=this.safeValue(t,"result",[]);for(let e=0;e<s.length;e++){const t=s[e],a=this.safeCurrencyCode(this.safeString(t,"coin")),r=this.account();r.free=this.safeFloat(t,"free"),r.total=this.safeFloat(t,"total"),i[a]=r}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({new:"open",open:"open",closed:"closed",triggered:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"createdAt"));let a=this.parseOrderStatus(this.safeString(e,"status"));const r=this.safeFloat(e,"size"),o=this.safeFloat(e,"filledSize");let n=this.safeFloat(e,"remainingSize");0===n&&void 0!==r&&void 0!==o&&(n=Math.max(r-o,0),n>0&&(a="canceled"));let c=void 0;const d=this.safeString(e,"market");void 0!==d&&(c=d in this.markets_by_id?(t=this.markets_by_id[d]).symbol:d),void 0===c&&void 0!==t&&(c=t.symbol);const h=this.safeString(e,"side"),l=this.safeString(e,"type"),u=this.safeFloat(e,"avgFillPrice"),p=this.safeFloat2(e,"price","triggerPrice",u);let f=void 0;void 0!==o&&void 0!==p&&(f=o*p);const m=this.parse8601(this.safeString(e,"triggeredAt")),v=this.safeString(e,"clientId"),y=this.safeFloat(e,"triggerPrice");return{info:e,id:i,clientOrderId:v,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:m,symbol:c,type:l,timeInForce:void 0,side:h,price:p,stopPrice:y,amount:r,cost:f,average:u,filled:o,remaining:n,status:a,fee:void 0,trades:void 0}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const n=this.market(e),c={market:n.id,side:i,type:t,size:parseFloat(this.amountToPrecision(e,s))},d=this.safeString2(r,"clientId","clientOrderId");void 0!==d&&(c.clientId=d,r=this.omit(r,["clientId","clientOrderId"]));let h=void 0;void 0!==a&&(h=parseFloat(this.priceToPrecision(e,a)));let l="privatePostConditionalOrders";if("limit"===t)l="privatePostOrders",c.price=h;else if("market"===t)l="privatePostOrders",c.price=null;else if("stop"===t||"takeProfit"===t)c.triggerPrice=h;else{if("trailingStop"!==t)throw new o(this.id+" createOrder () does not support order type "+t+", only limit, market, stop, trailingStop, or takeProfit orders are supported");c.trailValue=h}const u=await this[l](this.extend(c,r)),p=this.safeValue(u,"result",[]);return this.parseOrder(p,n)}async editOrder(e,t,i,s,a,r,o={}){await this.loadMarkets();const n=this.market(t),c={};let d=void 0;const h=this.safeString2(o,"client_order_id","clientOrderId"),l=this.safeFloat(o,"triggerPrice"),u=this.safeFloat(o,"orderPrice"),p=this.safeFloat(o,"trailValue");o=this.omit(o,["client_order_id","clientOrderId","triggerPrice","orderPrice","trailValue"]);const f=void 0!==l,m=void 0!==u,v=void 0!==p;f||m||v?(d="privatePostConditionalOrdersOrderIdModify",c.order_id=e,f&&(c.triggerPrice=parseFloat(this.priceToPrecision(t,l))),m&&(c.orderPrice=parseFloat(this.priceToPrecision(t,u))),v&&(c.trailValue=parseFloat(this.priceToPrecision(t,p)))):(void 0===h?(d="privatePostOrdersByClientIdClientOrderIdModify",c.client_order_id=h):(d="privatePostOrdersOrderIdModify",c.order_id=e),void 0!==r&&(c.price=parseFloat(this.priceToPrecision(t,r)))),void 0!==a&&(c.size=parseFloat(this.amountToPrecision(t,a)));const y=await this[d](this.extend(c,o)),g=this.safeValue(y,"result",{});return this.parseOrder(g,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)},a=this.safeValue(this.options,"cancelOrder",{}),r=this.safeString(a,"method","privateDeleteOrdersOrderId");let o=this.safeString(i,"method",r);const n=this.safeValue(i,"type"),c=this.safeValue2(i,"client_order_id","clientOrderId");void 0===c?(s.order_id=parseInt(e),"stop"!==n&&"trailingStop"!==n&&"takeProfit"!==n||(o="privateDeleteConditionalOrdersOrderId")):(s.client_order_id=c,o="privateDeleteOrdersByClientIdClientOrderId");const d=this.omit(i,["method","type","client_order_id","clientOrderId"]),h=await this[o](this.extend(s,d));return this.safeValue(h,"result",{})}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={conditionalOrdersOnly:!1,limitOrdersOnly:!1},s=this.getMarketId(e,"market",t);void 0!==s&&(i.market=s);const a=await this.privateDeleteOrders(this.extend(i,t));return this.safeValue(a,"result",{})}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={},a=this.safeValue2(i,"client_order_id","clientOrderId");let r="privateGetOrdersOrderId";void 0===a?s.order_id=e:(s.client_order_id=a,i=this.omit(i,["client_order_id","clientOrderId"]),r="privateGetOrdersByClientIdClientOrderId");const o=await this[r](this.extend(s,i)),n=this.safeValue(o,"result",{});return this.parseOrder(n)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a={},[r,o]=this.getMarketParams(e,"market",s);void 0!==o&&(a.market=o);const n=this.safeValue(this.options,"fetchOpenOrders",{}),c=this.safeString(n,"method","privateGetOrders");let d=this.safeString(s,"method",c);const h=this.safeValue(s,"type");"stop"!==h&&"trailingStop"!==h&&"takeProfit"!==h||(d="privateGetConditionalOrders");const l=this.omit(s,["method","type"]),u=await this[d](this.extend(a,l)),p=this.safeValue(u,"result",[]);return this.parseOrders(p,r,t,i)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const a={},[r,o]=this.getMarketParams(e,"market",s);void 0!==o&&(a.market=o),void 0!==i&&(a.limit=i),void 0!==t&&(a.start_time=parseInt(t/1e3));const n=this.safeValue(this.options,"fetchOrders",{}),c=this.safeString(n,"method","privateGetOrdersHistory");let d=this.safeString(s,"method",c);const h=this.safeValue(s,"type");"stop"!==h&&"trailingStop"!==h&&"takeProfit"!==h||(d="privateGetConditionalOrdersHistory");const l=this.omit(s,["method","type"]),u=await this[d](this.extend(a,l)),p=this.safeValue(u,"result",[]);return this.parseOrders(p,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const[a,r]=this.getMarketParams(e,"market",s),o={};void 0!==r&&(o.market=r),void 0!==i&&(o.limit=i),void 0!==t&&(o.start_time=parseInt(t/1e3));const n=await this.privateGetFills(this.extend(o,s)),c=this.safeValue(n,"result",[]);return this.parseTrades(c,a,t,i)}async withdraw(e,t,i,s,a={}){await this.loadMarkets(),this.checkAddress(i);const r=this.currency(e),o={coin:r.id,size:t,address:i};void 0!==this.password&&(o.password=this.password),void 0!==s&&(o.tag=s);const n=await this.privatePostWalletWithdrawals(this.extend(o,a)),c=this.safeValue(n,"result",{});return this.parseTransaction(c,r)}async fetchPositions(e,t,i,s={}){await this.loadMarkets();const a=await this.privateGetAccount(s),r=this.safeValue(a,"result",{});return this.safeValue(r,"positions",[])}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={coin:this.currency(e).id},s=await this.privateGetWalletDepositAddressCoin(this.extend(i,t)),a=this.safeValue(s,"result",{}),r=this.safeString(a,"address"),o=this.safeString(a,"tag");return this.checkAddress(r),{currency:e,address:r,tag:o,info:s}}parseTransactionStatus(e){return this.safeString({confirmed:"ok",complete:"ok"},e,e)}parseTransaction(e,t){const i=this.safeCurrencyCode(this.safeString(e,"coin")),s=this.safeString(e,"id"),a=this.safeFloat(e,"size"),r=this.parseTransactionStatus(this.safeString(e,"status")),o=this.parse8601(this.safeString(e,"time")),n=this.safeString(e,"txid");let c=void 0,d=this.safeValue(e,"address");"string"!=typeof d&&(c=this.safeString(d,"tag"),d=this.safeString(d,"address"));const h=this.safeFloat(e,"fee"),l="destinationName"in e?"withdrawal":"deposit";return{info:e,id:s,txid:n,timestamp:o,datetime:this.iso8601(o),addressFrom:void 0,address:d,addressTo:d,tagFrom:void 0,tag:c,tagTo:c,type:l,amount:a,currency:i,status:r,updated:void 0,fee:{currency:i,cost:h,rate:void 0}}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const a=await this.privateGetWalletDeposits(s),r=this.safeValue(a,"result",[]);let o=void 0;return void 0!==e&&(o=this.currency(e)),this.parseTransactions(r,o,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const a=await this.privateGetWalletWithdrawals(s),r=this.safeValue(a,"result",[]);let o=void 0;return void 0!==e&&(o=this.currency(e)),this.parseTransactions(r,o,t,i)}sign(e,t="public",i="GET",s={},a,r){let o="/api/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));let c=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+o;if("POST"!==i&&Object.keys(n).length){const e="?"+this.urlencode(n);c+=e,o+=e}if("private"===t){this.checkRequiredCredentials();const e=this.milliseconds().toString();let t=e+i+o;a={},"POST"!==i&&"DELETE"!==i||(t+=r=this.json(n),a["Content-Type"]="application/json");const s=this.hmac(this.encode(t),this.encode(this.secret),"sha256"),c=this.safeValue(this.options,"sign",{}),d=this.safeString(c,this.hostname,"FTX"),h=d+"-TS",l=d+"-SIGN";a[d+"-KEY"]=this.apiKey,a[h]=e,a[l]=s}return{url:c,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,o,n,c,d){if(void 0===n)return;if(!this.safeValue(n,"success")){const e=this.id+" "+o,t=this.safeString(n,"error");throw this.throwExactlyMatchedException(this.exceptions.exact,t,e),this.throwBroadlyMatchedException(this.exceptions.broad,t,e),new r(e)}}}},function(e,t,i){"use strict";const s=i(1),{AuthenticationError:a,ExchangeError:r,ArgumentsRequired:o,InvalidAddress:n,OrderNotFound:c,NotSupported:d,DDoSProtection:h,InsufficientFunds:l,InvalidOrder:u}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"gateio",name:"Gate.io",countries:["CN"],version:"2",rateLimit:1e3,pro:!0,has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!1,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":60,"5m":300,"10m":600,"15m":900,"30m":1800,"1h":3600,"2h":7200,"4h":14400,"6h":21600,"12h":43200,"1d":86400,"1w":604800},urls:{logo:"https://user-images.githubusercontent.com/1294454/31784029-0313c702-b509-11e7-9ccc-bc0da6a0e435.jpg",api:{public:"https://data.gate.io/api",private:"https://data.gate.io/api"},www:"https://gate.io/",doc:"https://gate.io/api2",fees:["https://gate.io/fee","https://support.gate.io/hc/en-us/articles/115003577673"],referral:"https://www.gate.io/signup/2436035"},api:{public:{get:["candlestick2/{id}","pairs","coininfo","marketinfo","marketlist","coininfo","tickers","ticker/{id}","orderBook/{id}","trade/{id}","tradeHistory/{id}","tradeHistory/{id}/{tid}"]},private:{post:["balances","depositAddress","newAddress","depositsWithdrawals","buy","sell","cancelOrder","cancelAllOrders","getOrder","openOrders","tradeHistory","feelist","withdraw"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{4:h,5:a,6:a,7:d,8:d,9:d,15:h,16:c,17:c,20:u,21:l},errorCodeNames:{1:"Invalid request",2:"Invalid version",3:"Invalid request",4:"Too many attempts",5:"Invalid sign",6:"Invalid sign",7:"Currency is not supported",8:"Currency is not supported",9:"Currency is not supported",10:"Verified failed",11:"Obtaining address failed",12:"Empty params",13:"Internal error, please report to administrator",14:"Invalid user",15:"Cancel order too fast, please wait 1 min and try again",16:"Invalid order id or order is already closed",17:"Invalid orderid",18:"Invalid amount",19:"Not permitted or trade is disabled",20:"Your order size is too small",21:"You don't have enough fund"}},options:{limits:{cost:{min:{BTC:1e-4,ETH:.001,USDT:1}}}},commonCurrencies:{BOX:"DefiBox",BTCBEAR:"BEAR",BTCBULL:"BULL",TNC:"Trinity Network Credit"}})}async fetchCurrencies(e={}){const t=await this.publicGetCoininfo(e),i=this.safeValue(t,"coins");if(!i)throw new r(this.id+" fetchCurrencies got an unrecognized response");const s={};for(let e=0;e<i.length;e++){const t=i[e],a=Object.keys(t);for(let e=0;e<a.length;e++){const i=a[e],r=t[i],o=this.safeCurrencyCode(i),n=this.safeValue(r,"delisted",0),c=0===this.safeValue(r,"withdraw_disabled",0),d=0===this.safeValue(r,"deposit_disabled",0),h=0===this.safeValue(r,"trade_disabled",0),l=0===n&&c&&d&&h;s[o]={id:i,code:o,active:l,info:r,name:void 0,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}}return s}async fetchMarkets(e={}){const t=await this.publicGetMarketinfo(e),i=this.safeValue(t,"pairs");if(!i)throw new r(this.id+" fetchMarkets got an unrecognized response");const s=[];for(let e=0;e<i.length;e++){const t=i[e],a=Object.keys(t),r=this.safeString(a,0),o=t[r],n=r.split("_"),c=n.length;let d=n[0],h=n[1];c>2&&(d=n[0]+"_"+n[1],h=n[2]);const l=this.safeCurrencyCode(d),u=this.safeCurrencyCode(h),p=l+"/"+u,f={amount:this.safeInteger(o,"amount_decimal_places"),price:this.safeInteger(o,"decimal_places")},m={min:this.safeFloat(o,"min_amount"),max:void 0},v={min:Math.pow(10,-f.price),max:void 0},y=m.min*v.min,g={amount:m,price:v,cost:{min:this.safeFloat(this.options.limits.cost.min,u,y),max:void 0}},b=!this.safeValue(o,"trade_disabled"),w=r.toUpperCase(),k=this.safeFloat(o,"fee");s.push({id:r,uppercaseId:w,symbol:p,base:l,quote:u,baseId:d,quoteId:h,info:t,active:b,maker:k/100,taker:k/100,precision:f,limits:g})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalances(e),i={info:t};let s=this.safeValue(t,"available",{});Array.isArray(s)&&(s={});const a=this.safeValue(t,"locked",{}),r=Object.keys(s);for(let e=0;e<r.length;e++){const t=r[e],o=this.safeCurrencyCode(t),n=this.account();n.free=this.safeFloat(s,t),n.used=this.safeFloat(a,t),i[o]=n}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e)},a=await this.publicGetOrderBookId(this.extend(s,i));return this.parseOrderBook(a)}parseOHLCV(e,t){return[this.safeInteger(e,0),this.safeFloat(e,5),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,1)]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={id:r.id,group_sec:this.timeframes[t]};if(void 0!==s){const e=this.parseTimeframe(t),i=parseInt(e*s/3600);o.range_hour=Math.max(0,i-1)}const n=await this.publicGetCandlestick2Id(this.extend(o,a)),c=this.safeValue(n,"data",[]);return this.parseOHLCVs(c,r,t,i,s)}parseTicker(e,t){const i=this.milliseconds();let s=void 0;t&&(s=t.symbol);const a=this.safeFloat(e,"last"),r=this.safeFloat(e,"percentChange");let o=void 0,n=void 0,c=void 0;if(void 0!==a&&void 0!==r){const e=r/100;o=a/this.sum(1,e),n=a-o,c=this.sum(a,o)/2}return o=this.safeFloat(e,"open",o),n=this.safeFloat(e,"change",n),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat2(e,"high24hr","high"),low:this.safeFloat2(e,"low24hr","low"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:o,close:a,last:a,previousClose:void 0,change:n,percentage:r,average:c,baseVolume:this.safeFloat(e,"quoteVolume"),quoteVolume:this.safeFloat(e,"baseVolume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s={},a=Object.keys(i);for(let e=0;e<a.length;e++){const t=a[e],r=this.safeMarket(t,void 0,"_");s[r.symbol]=this.parseTicker(i[t],r)}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=await this.publicGetTickerId(this.extend({id:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=this.safeTimestamp2(e,"timestamp","time_unix");i=this.safeTimestamp(e,"time",i);const s=this.safeString2(e,"tradeID","id"),a=this.safeString2(e,"orderid","orderNumber"),r=this.safeFloat2(e,"rate","price"),o=this.safeFloat(e,"amount"),n=this.safeString(e,"type"),c=this.safeString(e,"role");let d=void 0;void 0!==r&&void 0!==o&&(d=r*o);let h=void 0;void 0!==t&&(h=t.symbol);let l=void 0,u=this.safeCurrencyCode(this.safeString(e,"fee_coin")),p=this.safeFloat(e,"point_fee");return void 0===p||0===p?(p=this.safeFloat(e,"gt_fee"),void 0===p||0===p?p=this.safeFloat(e,"fee"):u=this.safeCurrencyCode("GT")):u=this.safeCurrencyCode("POINT"),void 0!==p&&(l={cost:p,currency:u}),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:h,order:a,type:void 0,side:n,takerOrMaker:c,price:r,amount:o,cost:d,fee:l}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={id:a.id};let o=void 0;o="tid"in s?"publicGetTradeHistoryIdTid":"publicGetTradeHistoryId";const n=await this[o](this.extend(r,s));return this.parseTrades(n.data,a,t,i)}async fetchOrders(e,t,i,s={}){const a=await this.privatePostOpenOrders(s);return this.parseOrders(a.orders,void 0,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderNumber:e,currencyPair:this.marketId(t)},a=await this.privatePostGetOrder(this.extend(s,i));return this.parseOrder(a.order)}parseOrderStatus(e){return this.safeString({cancelled:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString2(e,"orderNumber","id"),s=this.safeString(e,"currencyPair"),a=this.safeSymbol(s,t,"_"),r=this.safeTimestamp2(e,"timestamp","ctime"),o=this.safeTimestamp(e,"mtime"),n=this.parseOrderStatus(this.safeString(e,"status"));let c=this.safeString(e,"type");"1"===c?c="sell":"2"===c&&(c="buy");const d=this.safeFloat2(e,"initialRate","rate"),h=this.safeFloat(e,"filledRate"),l=this.safeFloat2(e,"initialAmount","amount"),u=this.safeFloat(e,"filledAmount");let p=this.safeFloat2(e,"leftAmount","left");void 0===p&&(p=l-u);const f=this.safeFloat(e,"feeValue"),m=this.safeString(e,"feeCurrency"),v=this.safeCurrencyCode(m);let y=this.safeFloat(e,"feePercentage");return void 0!==y&&(y/=100),{id:i,clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:o,status:n,symbol:a,type:"limit",timeInForce:void 0,side:c,price:d,stopPrice:void 0,cost:void 0,amount:l,filled:u,remaining:p,average:h,trades:void 0,fee:{cost:f,currency:v,rate:y},info:e}}async createOrder(e,t,i,s,a,o={}){if("market"===t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();const n="privatePost"+this.capitalize(i),c=this.market(e),d={currencyPair:c.id,rate:a,amount:s},h=await this[n](this.extend(d,o));return this.parseOrder(this.extend({status:"open",type:i,initialAmount:s},h),c)}async cancelOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" cancelOrder requires symbol argument");await this.loadMarkets();const s={orderNumber:e,currencyPair:this.marketId(t)};return await this.privatePostCancelOrder(this.extend(s,i))}async queryDepositAddress(e,t,i={}){await this.loadMarkets();const s=this.currency(t);e="privatePost"+e+"Address";const a={currency:s.id},r=await this[e](this.extend(a,i));let o=this.safeString(r,"addr"),c=void 0;if(void 0!==o&&o.indexOf("address")>=0)throw new n(this.id+" queryDepositAddress "+o);if("XRP"===t){const e=o.split(" ");o=e[0],c=e[1]}return{currency:s,address:o,tag:c,info:r}}async createDepositAddress(e,t={}){return await this.queryDepositAddress("New",e,t)}async fetchDepositAddress(e,t={}){return await this.queryDepositAddress("Deposit",e,t)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;void 0!==e&&(a=this.market(e));const r=await this.privatePostOpenOrders(s);return this.parseOrders(r.orders,a,t,i)}async fetchOrderTrades(e,t,i,s,a={}){if(void 0===t)throw new o(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const r=this.market(t),n={currencyPair:r.id,orderNumber:e},c=await this.privatePostTradeHistory(this.extend(n,a));return this.parseTrades(c.trades,r,i,s)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchMyTrades requires symbol argument");await this.loadMarkets();const a=this.market(e),r={currencyPair:a.id},n=await this.privatePostTradeHistory(this.extend(r,s));return this.parseTrades(n.trades,a,t,i)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r={currency:this.currency(e).id,amount:t,address:i};void 0!==s&&(r.address+=" "+s);return{info:await this.privatePostWithdraw(this.extend(r,a)),id:void 0}}async fetchTransactionsByType(e,t,i,s,a={}){await this.loadMarkets();const r={};void 0!==i&&(r.start=i);const o=await this.privatePostDepositsWithdrawals(this.extend(r,a));let n=void 0;if(void 0===e){const e=this.safeValue(o,"deposits",[]),t=this.safeValue(o,"withdraws",[]);n=this.arrayConcat(e,t)}else n=this.safeValue(o,e,[]);let c=void 0;return void 0!==t&&(c=this.currency(t)),this.parseTransactions(n,c,i,s)}async fetchTransactions(e,t,i,s={}){return await this.fetchTransactionsByType(void 0,e,t,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsByType("deposits",e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsByType("withdraws",e,t,i,s)}parseTransaction(e,t){const i=this.safeString(e,"currency"),s=this.safeCurrencyCode(i,t),a=this.safeString(e,"id"),r=this.safeString(e,"txid"),o=this.safeFloat(e,"amount");let n=this.safeString(e,"address");"false"===n&&(n=void 0);const c=this.safeTimestamp(e,"timestamp");return{info:e,id:a,txid:r,currency:s,amount:o,address:n,tag:void 0,status:this.parseTransactionStatus(this.safeString(e,"status")),type:this.parseTransactionType(a[0]),timestamp:c,datetime:this.iso8601(c),fee:void 0}}parseTransactionStatus(e){return this.safeString({PEND:"pending",REQUEST:"pending",DMOVE:"pending",CANCEL:"failed",DONE:"ok"},e,e)}parseTransactionType(e){return this.safeString({d:"deposit",w:"withdrawal"},e,e)}handleErrors(e,t,i,s,a,r,o,n,c){if(void 0===o)return;if("false"!==this.safeString(o,"result",""))return;const d=this.safeString(o,"code"),h=this.safeString(o,"message",r);if(void 0!==d){const e=this.safeString(this.exceptions.errorCodeNames,d,h);this.throwExactlyMatchedException(this.exceptions.exact,d,e)}}sign(e,t="public",i="GET",s={},a,r){const o="private"===t?t+"/":"";let n=this.urls.api[t]+this.version+"/1/"+o+this.implodeParams(e,s);const c=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(c).length&&(n+="?"+this.urlencode(c));else{this.checkRequiredCredentials();const e={nonce:this.nonce()};r=(r=this.rawencode(this.extend(e,c))).replace("+"," ");const t=this.hmac(this.encode(r),this.encode(this.secret),"sha512");a={Key:this.apiKey,Sign:t,"Content-Type":"application/x-www-form-urlencoded"}}return{url:n,method:i,body:r,headers:a}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,BadRequest:o,OrderNotFound:n,InvalidOrder:c,InvalidNonce:d,InsufficientFunds:h,AuthenticationError:l,PermissionDenied:u,NotSupported:p,OnMaintenance:f,RateLimitExceeded:m,ExchangeNotAvailable:v}=i(0),{TICK_SIZE:y}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"gemini",name:"Gemini",countries:["US"],rateLimit:1500,version:"v1",has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchBidsAsks:!1,fetchClosedOrders:!1,fetchDepositAddress:!1,fetchDeposits:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!1,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27816857-ce7be644-6096-11e7-82d6-3c257263229c.jpg",api:{public:"https://api.gemini.com",private:"https://api.gemini.com",web:"https://docs.gemini.com"},www:"https://gemini.com/",doc:["https://docs.gemini.com/rest-api","https://docs.sandbox.gemini.com"],test:{public:"https://api.sandbox.gemini.com",private:"https://api.sandbox.gemini.com",web:"https://docs.gemini.com"},fees:["https://gemini.com/api-fee-schedule","https://gemini.com/trading-fees","https://gemini.com/transfer-fees"]},api:{web:{get:["rest-api"]},public:{get:["v1/symbols","v1/pricefeed","v1/pubticker/{symbol}","v1/book/{symbol}","v1/trades/{symbol}","v1/auction/{symbol}","v1/auction/{symbol}/history","v2/candles/{symbol}/{timeframe}","v2/ticker/{symbol}"]},private:{post:["v1/order/new","v1/order/cancel","v1/order/cancel/session","v1/order/cancel/all","v1/order/status","v1/orders","v1/mytrades","v1/notionalvolume","v1/tradevolume","v1/transfers","v1/balances","v1/deposit/{currency}/newAddress","v1/withdraw/{currency}","v1/heartbeat","v1/transfers"]}},precisionMode:y,fees:{trading:{taker:.0035,maker:.001}},httpExceptions:{400:o,403:u,404:n,406:h,429:m,500:a,502:v,503:f},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1hr","6h":"6hr","1d":"1day"},exceptions:{exact:{AuctionNotOpen:o,ClientOrderIdTooLong:o,ClientOrderIdMustBeString:o,ConflictingOptions:o,EndpointMismatch:o,EndpointNotFound:o,IneligibleTiming:o,InsufficientFunds:h,InvalidJson:o,InvalidNonce:d,InvalidOrderType:c,InvalidPrice:c,InvalidQuantity:c,InvalidSide:c,InvalidSignature:l,InvalidSymbol:o,InvalidTimestampInPayload:o,Maintenance:f,MarketNotOpen:c,MissingApikeyHeader:l,MissingOrderField:c,MissingRole:l,MissingPayloadHeader:l,MissingSignatureHeader:l,NoSSL:l,OptionsMustBeArray:o,OrderNotFound:n,RateLimit:m,System:a,UnsupportedOption:o},broad:{"The Gemini Exchange is currently undergoing maintenance.":f,"We are investigating technical issues with the Gemini Exchange.":v}},options:{fetchMarketsMethod:"fetch_markets_from_web",fetchTickerMethod:"fetchTickerV1"}})}async fetchMarkets(e={}){const t=this.safeValue(this.options,"fetchMarketsMethod","fetch_markets_from_api");return await this[t](e)}async fetchMarketsFromWeb(e={}){const t=(await this.webGetRestApi(e)).split('<h1 id="symbols-and-minimums">Symbols and minimums</h1>'),i=t.length,s=this.id+" the "+this.name+" API doc HTML markup has changed, breaking the parser of order limits and precision info for "+this.name+" markets.";if(2!==i)throw new p(s);const a=t[1].split("tbody>");if(a.length<2)throw new p(s);const r=a[1].split("\n<tr>\n"),o=r.length;if(o<2)throw new p(s);const n=[];for(let e=1;e<o;e++){const t=r[e],i=t.split("</td>\n");if(i.length<5)throw new p(s);const a=i[0].replace("<td>",""),o=i[1].replace("<td>","").split(" "),c=this.safeFloat(o,0),d=i[2].replace("<td>","").split(" "),h=this.safeFloat(d,0),l=a.length-0,u=a.slice(l-3,l),f=this.safeCurrencyCode(u),m=i[3].replace("<td>","").split(" "),v=this.safeFloat(m,0),y=a.replace(u,""),g=this.safeCurrencyCode(y),b=g+"/"+f,w=void 0;n.push({id:a,info:t,symbol:b,base:g,quote:f,baseId:y,quoteId:u,active:w,precision:{amount:h,price:v},limits:{amount:{min:c,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}})}return n}async fetchMarketsFromAPI(e={}){const t=await this.publicGetV1Symbols(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=s,r=s.length-0,o=s.slice(0,r-3),n=s.slice(r-3,r),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=c+"/"+d,l={amount:void 0,price:void 0};i.push({id:s,info:a,symbol:h,base:c,quote:d,baseId:o,quoteId:n,precision:l,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},active:void 0})}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.limit_bids=t,s.limit_asks=t);const a=await this.publicGetV1BookSymbol(this.extend(s,i));return this.parseOrderBook(a,void 0,"bids","asks","price","amount")}async fetchTickerV1(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.publicGetV1PubtickerSymbol(this.extend(s,t));return this.parseTicker(a,i)}async fetchTickerV2(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.publicGetV2TickerSymbol(this.extend(s,t));return this.parseTicker(a,i)}async fetchTickerV1AndV2(e,t={}){const i=await this.fetchTickerV1(e,t),s=await this.fetchTickerV2(e,t);return this.deepExtend(i,{open:s.open,high:s.high,low:s.low,change:s.change,percentage:s.percentage,average:s.average,info:s.info})}async fetchTicker(e,t={}){const i=this.safeValue(this.options,"fetchTickerMethod","fetchTickerV1");return await this[i](e,t)}parseTicker(e,t){const i=this.safeValue(e,"volume",{}),s=this.safeInteger(i,"timestamp");let a=void 0;const r=this.safeString(e,"pair");let o=void 0,n=void 0,c=void 0,d=void 0;if(void 0!==r)if(r in this.markets_by_id)t=this.markets_by_id[r];else{7===r.length-0?(o=r.slice(0,4),n=r.slice(4,7)):(o=r.slice(0,3),n=r.slice(3,6)),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),a=c+"/"+d}void 0===a&&void 0!==t&&(a=t.symbol,o=t.baseId.toUpperCase(),n=t.quoteId.toUpperCase(),c=t.base,d=t.quote);const h=this.safeFloat(e,"price"),l=this.safeFloat2(e,"last","close",h);let u=this.safeFloat(e,"percentChange24h"),p=void 0,f=this.safeFloat(e,"open"),m=void 0;void 0!==l&&(void 0!==f?(p=l-f,0!==f&&(u=p/f*100),m=this.sum(l,f)/2):void 0!==u&&(p=l*u,void 0===f&&(f=l-p),m=this.sum(l,f)/2));const v=this.safeFloat(i,o),y=this.safeFloat(i,n),g=this.vwap(v,y);return{symbol:a,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:g,open:f,close:l,last:l,previousClose:void 0,change:p,percentage:u,average:m,baseVolume:v,quoteVolume:y,info:e}}parseTickers(e,t){const i=[];for(let t=0;t<e.length;t++)i.push(this.parseTicker(e[t]));return this.filterByArray(i,"symbol",t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetV1Pricefeed(t);return this.parseTickers(i,e)}parseTrade(e,t){const i=this.safeInteger(e,"timestampms"),s=this.safeString(e,"tid"),a=this.safeString(e,"order_id"),r=this.safeString(e,"fee_currency"),o=this.safeCurrencyCode(r),n={cost:this.safeFloat(e,"fee_amount"),currency:o},c=this.safeFloat(e,"price"),d=this.safeFloat(e,"amount");let h=void 0;void 0!==c&&void 0!==d&&(h=c*d);const l=this.safeStringLower(e,"type"),u=this.safeSymbol(void 0,t);return{id:s,order:a,info:e,timestamp:i,datetime:this.iso8601(i),symbol:u,type:void 0,side:l,takerOrMaker:void 0,price:c,cost:h,amount:d,fee:n}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id},o=await this.publicGetV1TradesSymbol(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostV1Balances(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"currency"),r=this.safeCurrencyCode(a),o=this.account();o.free=this.safeFloat(s,"available"),o.total=this.safeFloat(s,"amount"),i[r]=o}return this.parseBalance(i)}parseOrder(e,t){const i=this.safeInteger(e,"timestampms"),s=this.safeFloat(e,"original_amount"),a=this.safeFloat(e,"remaining_amount"),r=this.safeFloat(e,"executed_amount");let o="closed";e.is_live&&(o="open"),e.is_cancelled&&(o="canceled");const n=this.safeFloat(e,"price"),c=this.safeFloat(e,"avg_execution_price");let d=void 0;void 0!==r&&void 0!==c&&(d=r*c);let h=this.safeString(e,"type");h="exchange limit"===h?"limit":"market buy"===h||"market sell"===h?"market":e.type;const l=this.safeString(e,"symbol"),u=this.safeSymbol(l,t),p=this.safeString(e,"order_id"),f=this.safeStringLower(e,"side");return{id:p,clientOrderId:this.safeString(e,"client_order_id"),info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:o,symbol:u,type:h,timeInForce:void 0,side:f,price:n,stopPrice:void 0,average:c,cost:d,amount:s,filled:r,remaining:a,fee:void 0,trades:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},a=await this.privatePostV1OrderStatus(this.extend(s,i));return this.parseOrder(a)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a=await this.privatePostV1Orders(s);let r=void 0;return void 0!==e&&(r=this.market(e)),this.parseOrders(a,r,t,i)}async createOrder(e,t,i,s,r,o={}){if(await this.loadMarkets(),"market"===t)throw new a(this.id+" allows limit orders only");const n={client_order_id:this.nonce().toString(),symbol:this.marketId(e),amount:s.toString(),price:r.toString(),side:i,type:"exchange limit"},c=await this.privatePostV1OrderNew(this.extend(n,o));return{info:c,id:c.order_id}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e};return await this.privatePostV1OrderCancel(this.extend(s,i))}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const a=this.market(e),o={symbol:a.id};void 0!==i&&(o.limit_trades=i),void 0!==t&&(o.timestamp=parseInt(t/1e3));const n=await this.privatePostV1Mytrades(this.extend(o,s));return this.parseTrades(n,a,t,i)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r={currency:this.currency(e).id,amount:t,address:i},o=await this.privatePostV1WithdrawCurrency(this.extend(r,a));return{info:o,id:this.safeString(o,"txHash")}}nonce(){return this.milliseconds()}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const a={};void 0!==i&&(a.limit_transfers=i),void 0!==t&&(a.timestamp=t);const r=await this.privatePostV1Transfers(this.extend(a,s));return this.parseTransactions(r)}parseTransaction(e,t){const i=this.safeInteger(e,"timestampms"),s=this.safeString(e,"currency"),a=this.safeCurrencyCode(s,t),r=this.safeString(e,"destination"),o=this.safeStringLower(e,"type");let n="pending";e.status&&(n="ok");let c=void 0;const d=this.safeFloat(e,"feeAmount");return void 0!==d&&(c={cost:d,currency:a}),{info:e,id:this.safeString(e,"eid"),txid:this.safeString(e,"txHash"),timestamp:i,datetime:this.iso8601(i),address:r,tag:void 0,type:o,amount:this.safeFloat(e,"amount"),currency:a,status:n,updated:void 0,fee:c}}sign(e,t="public",i="GET",s={},a,r){let o="/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();const e=this.nonce(),t=this.extend({request:o,nonce:e},n);let i=this.json(t);i=this.stringToBase64(i);const s=this.hmac(i,this.encode(this.secret),"sha384");a={"Content-Type":"text/plain","X-GEMINI-APIKEY":this.apiKey,"X-GEMINI-PAYLOAD":this.decode(i),"X-GEMINI-SIGNATURE":s}}else Object.keys(n).length&&(o+="?"+this.urlencode(n));return o=this.urls.api[t]+o,{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n){if("string"==typeof o){const e=this.id+" "+o;this.throwBroadlyMatchedException(this.exceptions.broad,o,e)}return}if("error"===this.safeString(n,"result")){const e=this.safeString(n,"reason"),t=this.safeString(n,"message"),i=this.id+" "+t;throw this.throwExactlyMatchedException(this.exceptions.exact,e,i),this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i),new a(i)}}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privatePostV1DepositCurrencyNewAddress(this.extend(i,t)),a=this.safeString(s,"address");return this.checkAddress(a),{currency:e,address:a,tag:void 0,info:s}}async fetchOHLCV(e,t="5m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={timeframe:this.timeframes[t],symbol:r.id},n=await this.publicGetV2CandlesSymbolTimeframe(this.extend(o,a));return this.parseOHLCVs(n,r,t,i,s)}}},function(e,t,i){"use strict";const s=i(1),{AuthenticationError:a,ExchangeError:r,OrderNotFound:o,ArgumentsRequired:n,BadSymbol:c,BadRequest:d,NullResponse:h,InvalidOrder:l,BadResponse:u,NotSupported:p,ExchangeNotAvailable:f,RequestTimeout:m,RateLimitExceeded:v,PermissionDenied:y,InsufficientFunds:g,InvalidAddress:b}=i(0),{TICK_SIZE:w,TRUNCATE:k}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"hbtc",name:"HBTC",countries:["CN"],rateLimit:2e3,version:"v1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchBidAsk:!0,fetchBidsAsks:!0,fetchClosedOrders:!0,fetchCurrencies:!1,fetchDepositAddress:!1,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingLimits:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/51840849/80134449-70663300-85a7-11ea-8942-e204cdeaab5d.jpg",api:{quote:"https://api.hbtc.com/openapi/quote",contract:"https://api.hbtc.com/openapi/contract",option:"https://api.hbtc.com/openapi/option",public:"https://api.hbtc.com/openapi",private:"https://api.hbtc.com/openapi",zendesk:"https://hbtc.zendesk.com/hc/en-us"},www:"https://www.hbtc.com",referral:"https://www.hbtc.com/register/O2S8NS",doc:"https://github.com/bhexopen/BHEX-OpenApi/tree/master/doc",fees:"https://hbtc.zendesk.com/hc/zh-cn/articles/360009274694"},api:{public:{get:["ping","time","brokerInfo","getOptions"]},quote:{get:["depth","depth/merged","trades","klines","ticker/24hr","ticker/price","ticker/bookTicker","contract/index","contract/depth","contract/depth/merged","contract/trades","contract/klines","contract/ticker/24hr","option/index","option/depth","option/depth/merged","option/trades","option/klines","option/ticker/24hr"]},contract:{get:["insurance","fundingRate","openOrders","historyOrders","getOrder","myTrades","positions","account"],post:["order","modifyMargin"],delete:["order/cancel","order/batchCancel"]},option:{get:["openOrders","positions","historyOrders","myTrades","settlements","account"],post:["order"],delete:["order/cancel"]},private:{get:["order","openOrders","historyOrders","account","myTrades","depositOrders","withdrawalOrders","withdraw/detail","balance_flow"],post:["order","order/test","userDataStream","subAccount/query","transfer","user/transfer","withdraw"],put:["userDataStream"],delete:["order","userDataStream"]}},precisionMode:w,fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001}},exceptions:{exact:{"-1000":r,"-1001":r,"-1002":a,"-1003":v,"-1004":d,"-1005":y,"-1006":u,"-1007":m,"-1014":l,"-1015":v,"-1016":f,"-1020":p,"-1021":d,"-1022":a,"-1100":d,"-1101":d,"-1102":d,"-1103":d,"-1104":d,"-1105":d,"-1106":d,"-1111":d,"-1112":h,"-1114":l,"-1115":l,"-1116":l,"-1117":l,"-1118":l,"-1119":l,"-1120":d,"-1121":c,"-1125":a,"-1127":d,"-1128":d,"-1130":d,"-1131":g,"-1132":l,"-1133":l,"-1134":l,"-1135":l,"-1136":l,"-1137":l,"-1138":l,"-1139":l,"-1140":l,"-1141":l,"-1142":l,"-1143":o,"-1144":l,"-1145":l,"-1146":m,"-1147":m,"-1149":l,"-1187":b,"-2010":l,"-2011":l,"-2013":o,"-2014":a,"-2015":a,"-2016":r}},options:{fetchTickers:{method:"quoteGetTicker24hr"}}})}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.safeInteger(t,"serverTime")}parseMarket(e,t="spot"){const i=this.safeValue(e,"filters",[]),s=this.safeString(e,"symbol");let a=this.safeString(e,"baseAsset");const r=this.safeString(e,"quoteAsset");let o=this.safeCurrencyCode(a);const n=this.safeCurrencyCode(r);let c=o+"/"+n,d=!0,h=!1,l=!1,u=!1;"future"===t?(c=s,d=!1,h=!0,u=this.safeValue(e,"inverse",!1),a=this.safeString(e,"underlying"),o=this.safeCurrencyCode(a)):"option"===t&&(c=s,d=!1,l=!0);let p=void 0,f=void 0,m=void 0,v=void 0,y=void 0;for(let e=0;e<i.length;e++){const t=i[e],s=this.safeString(t,"filterType");"LOT_SIZE"===s&&(p=this.safeFloat(t,"minQty"),f=this.safeFloat(t,"maxQty")),"PRICE_FILTER"===s&&(m=this.safeFloat(t,"minPrice"),v=this.safeFloat(t,"maxPrice")),"MIN_NOTIONAL"===s&&(y=this.safeFloat(t,"minNotional"))}void 0===y&&void 0!==p&&void 0!==m&&(y=p*m);return{id:s,symbol:c,base:o,quote:n,baseId:a,quoteId:r,active:!0,type:t,spot:d,future:h,option:l,inverse:u,precision:{price:this.safeFloat2(e,"quotePrecision","quoteAssetPrecision"),amount:this.safeFloat(e,"baseAssetPrecision")},limits:{amount:{min:p,max:f},price:{min:m,max:v},cost:{min:y,max:void 0}},info:e}}async fetchMarkets(e={}){const t=await this.publicGetBrokerInfo(e),i=[],s=this.safeValue(t,"symbols",[]);for(let e=0;e<s.length;e++){const t=this.parseMarket(s[e],"spot");i.push(t)}const a=this.safeValue(t,"options",[]);for(let e=0;e<a.length;e++){const t=this.parseMarket(a[e],"option");i.push(t)}const r=this.safeValue(t,"contracts",[]);for(let e=0;e<r.length;e++){const t=this.parseMarket(r[e],"future");i.push(t)}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id};void 0!==t&&(s.limit=t);const a=await this.quoteGetDepth(this.extend(s,i)),r=this.safeInteger(a,"time");return this.parseOrderBook(a,r)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.quoteGetTicker24hr(this.extend(s,t));return this.parseTicker(a,i)}parseTickers(e,t){const i=[];for(let t=0;t<e.length;t++)i.push(this.parseTicker(e[t]));return this.filterByArray(i,"symbol",t)}async fetchBidAsk(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.quoteGetTickerBookTicker(this.extend(s,t));return this.parseTicker(a,i)}async fetchBidsAsks(e,t={}){await this.loadMarkets();const i=await this.quoteGetTickerBookTicker(t);return this.parseTickers(i,e)}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.safeValue(this.options,"fetchTickers",{}),s=this.safeString(i,"method","quoteGetTicker24hr"),a=this.safeString(i,"type","spot"),r=this.safeString(t,"type",a),o=this.omit(t,"type");let n=s;"future"===r?n="quoteGetContractTicker24hr":"option"===r&&(n="quoteGetOptionTicker24hr");const c=await this[n](o);return this.parseTickers(c,e)}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeValue(this.options,"fetchBalance",{}),i=this.safeString(t,"type","spot"),s=this.safeString(e,"type",i),a=this.omit(e,"type");let r="privateGetAccount";"future"===s?r="contractGetAccount":"option"===s&&(r="optionGetAccount");const o=await this[r](a),n=this.safeValue(o,"balances"),c={info:o};if(void 0!==n)for(let e=0;e<n.length;e++){const t=n[e],i=this.safeString2(t,"asset","tokenName"),s=this.safeCurrencyCode(i),a=this.account();a.free=this.safeFloat(t,"free"),a.used=this.safeFloat(t,"locked"),c[s]=a}else{const e=Object.keys(o);for(let t=0;t<e.length;t++){const i=e[t],s=this.safeCurrencyCode(i),a=o[i],r=this.account();r.free=this.safeFloat(a,"availableMargin"),r.total=this.safeFloat(a,"total"),c[s]=r}}return this.parseBalance(c)}async fetchTrades(e,t,i=50,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id};void 0!==i&&(r.limit=i);const o=await this.quoteGetTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseOHLCV(e,t){return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={symbol:r.id,interval:this.timeframes[t]};void 0!==i&&(o.startTime=i),void 0!==s&&(o.limit=s);const n=await this.quoteGetKlines(this.extend(o,a));return this.parseOHLCVs(n,r,t,i,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={},o=this.safeString(this.options,"type","spot"),c=this.safeValue(this.options,"fetchMyTrades",{}),d=this.safeString(c,"type",o);let h=this.safeString(s,"type",d);void 0!==e&&(a=this.market(e),r.symbol=a.id,h=a.type);const l=this.omit(s,"type");void 0!==i&&(r.limit=i);let u="privateGetMyTrades";if("future"===h)u="contractGetMyTrades";else if("option"===h)u="optionGetMyTrades";else{if(void 0===e)throw new n(this.id+" fetchMyTrades requires a `symbol` argument for "+h+" markets");const i=this.market(e);r.symbol=i.id,void 0!==t&&(r.startTime=t)}void 0!==t&&(r.startTime=t);const p=await this[u](this.extend(r,l));return this.parseTrades(p,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),c=i.toUpperCase(),d=t.toUpperCase(),h={symbol:o.id,side:c};let u=r,f="privatePostOrder";if("future"===o.type){if("BUY_OPEN"!==c&&"SELL_OPEN"!==c&&"BUY_CLOSE"!==c&&"SELL_CLOSE"!==c)throw new p(this.id+" createOrder() does not support order side "+i+" for "+o.type+" markets, only BUY_OPEN, SELL_OPEN, BUY_CLOSE and SELL_CLOSE are supported");if("LIMIT"!==d&&"STOP"!==d)throw new p(this.id+" createOrder() does not support order type "+t+" for "+o.type+" markets, only LIMIT and STOP are supported");const l=this.safeValue(r,"clientOrderId");if(void 0===l)throw new n(this.id+" createOrder() requires a clientOrderId parameter for "+o.type+" markets, supply clientOrderId in the params argument");const u=this.safeValue(r,"leverage");if(void 0===u&&("BUY_OPEN"===c||"SELL_OPEN"===c))throw new p(this.id+" createOrder() requires a leverage parameter for "+o.type+" markets if orderSide is BUY_OPEN or SELL_OPEN");f="contractPostOrder";const m=this.safeString(r,"priceType");void 0===m?h.price=this.priceToPrecision(e,a):(h.priceType=m,"INPUT"===m&&(h.price=this.priceToPrecision(e,a))),h.orderType=t.toUpperCase(),h.quantity=this.amountToPrecision(e,s),h.leverage=u,h.clientOrderId=l}else{"option"===o.type&&(f="optionPostOrder");const n=this.safeValue2(r,"clientOrderId","newClientOrderId");if(void 0!==n&&(h.newClientOrderId=n),h.type=d,"limit"===t)h.price=this.priceToPrecision(e,a),h.quantity=this.amountToPrecision(e,s);else if("market"===t)if("buy"===i){if(this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){if(void 0===a)throw new l(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument (the exchange-specific behaviour)");s*=a}const e=o.precision.price;h.quantity=this.decimalToPrecision(s,k,e,this.precisionMode)}else h.quantity=this.amountToPrecision(e,s)}u=this.omit(u,["clientOrderId","newClientOrderId"]);const m=await this[f](this.extend(h,u));return this.parseOrder(m,o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=this.safeValue2(i,"origClientOrderId","clientOrderId"),a={},r=this.safeString(this.options,"type","spot"),o=this.safeValue(this.options,"cancelOrder",{}),c=this.safeString(o,"type",r);let d=this.safeString(i,"type",c),h=this.omit(i,"type");void 0!==s?(a.origClientOrderId=s,h=this.omit(h,["origClientOrderId","clientOrderId"])):a.orderId=e;let l="privateDeleteOrder";const u=this.safeString(h,"orderType");if(void 0!==u&&(d="future"),"future"===d){if(l="contractDeleteOrderCancel",void 0===u)throw new n(this.id+" cancelOrder() requires an orderType parameter, pass the { 'orderType': 'LIMIT' } or { 'orderType': 'STOP' } in params argument");a.orderType=u}else"option"===d&&(l="optionDeleteOrderCancel");const p=await this[l](this.extend(a,h));return this.parseOrder(p)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={},o=this.safeString(this.options,"type","spot"),n=this.safeValue(this.options,"fetchOpenOrders",{}),c=this.safeString(n,"type",o);let d=this.safeString(s,"type",c);void 0!==e&&(a=this.market(e),r.symbol=a.id,d=a.type);const h=this.omit(s,"type");void 0!==i&&(r.limit=i);let l="privateGetOpenOrders";"future"===d?l="contractGetOpenOrders":"option"===d&&(l="optionGetOpenOrders");const u=await this[l](this.extend(r,h));return this.parseOrders(u,a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={},o=this.safeString(this.options,"type","spot"),n=this.safeValue(this.options,"fetchClosedOrders",{}),c=this.safeString(n,"type",o);let d=this.safeString(s,"type",c);void 0!==e&&(a=this.market(e),r.symbol=a.id,d=a.type);const h=this.omit(s,"type");void 0!==i&&(r.limit=i),void 0!==t&&(r.startTime=t);let l="privateGetHistoryOrders";"future"===d?l="contractGetHistoryOrders":"option"===d&&(l="optionGetHistoryOrders");const u=await this[l](this.extend(r,h));return this.parseOrders(u,a,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=this.safeValue2(i,"origClientOrderId","clientOrderId"),a={},r=this.safeString(this.options,"type","spot"),o=this.safeValue(this.options,"fetchOrder",{}),n=this.safeString(o,"type",r),c=this.safeString(i,"type",n);let d=this.omit(i,"type");void 0!==s?(a.origClientOrderId=s,d=this.omit(d,["origClientOrderId","clientOrderId"])):a.orderId=e;let h="privateGetOrder";"future"===c?h="contractGetGetOrder":"option"===c&&(h="optionGetGetOrder");const l=await this[h](this.extend(a,d));return this.parseOrder(l)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.currency(e)),void 0!==t&&(r.startTime=t),void 0!==i&&(r.limit=i);const o=await this.privateGetDepositOrders(this.extend(r,s));return this.parseTransactions(o,a,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.currency(e),r.token=a.id),void 0!==t&&(r.startTime=t),void 0!==i&&(r.limit=i);const o=await this.privateGetWithdrawalOrders(this.extend(r,s));return this.parseTransactions(o,a,t,i)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e),o={clientOrderId:this.safeString(a,"clientOrderId",this.uuid()),tokenId:r.id,address:i,withdrawQuantity:t};void 0!==s&&(o.addressExt=s);const n=await this.privatePostWithdraw(this.extend(o,a));return{info:n,id:this.safeString(n,"orderId")}}async fetchAccounts(e={}){const t=await this.privatePostSubAccountQuery(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"accountId"),r=this.safeString(s,"accountType");let o=r;"1"===r?o="spot":"2"===r?o="option":"3"===r&&(o="future"),i.push({id:a,type:o,currency:void 0,info:s})}return i}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const a={accountType:1,accountIndex:0,fromFlowId:"",endFlowId:"",endTime:1588450533040};let r=void 0;void 0!==e&&(r=this.currency(e),a.tokenId=r.id),void 0!==t&&(a.startTime=t),void 0!==i&&(a.limit=i);const o=await this.privateGetBalanceFlow(this.extend(a,s));return this.parseLedger(o,r,t,i)}parseLedgerEntry(e,t){const i=this.safeString(e,"tokenId"),s=this.safeCurrencyCode(i,t),a=this.safeFloat(e,"change"),r=this.safeFloat(e,"total"),o=a<0?"out":"in";let n=void 0;if(void 0!==r&&void 0!==a){const e="out"===o?a:-a;n=this.sum(r,e)}const c=this.safeInteger(e,"created"),d=this.parseLedgerEntryType(this.safeString(e,"flowType"));return{id:this.safeString(e,"id"),currency:s,account:this.safeString(e,"accountId"),referenceAccount:void 0,referenceId:void 0,status:void 0,amount:a,before:n,after:r,fee:void 0,direction:o,timestamp:c,datetime:this.iso8601(c),type:d,info:e}}parseLedgerEntryType(e){return this.safeString({TRADE:"trade",FEE:"fee",TRANSFER:"transfer",DEPOSIT:"transaction",MAKER_REWARD:"rebate",PNL:"pnl",SETTLEMENT:"settlement",LIQUIDATION:"liquidation",FUNDING_SETTLEMENT:"settlement",USER_ACCOUNT_TRANSFER:"transfer",OTC_BUY_COIN:"trade",OTC_SELL_COIN:"trade",OTC_FEE:"fee",OTC_TRADE:"trade",ACTIVITY_AWARD:"referral",INVITATION_REFERRAL_BONUS:"referral",REGISTER_BONUS:"referral",AIRDROP:"airdrop",MINE_REWARD:"reward"},e,e)}parseTransactionStatus(e){return this.safeString({BROKER_AUDITING_STATUS:"pending",BROKER_REJECT_STATUS:"failed",AUDITING_STATUS:"pending",AUDIT_REJECT_STATUS:"failed",PROCESSING_STATUS:"pending",WITHDRAWAL_SUCCESS_STATUS:"ok",WITHDRAWAL_FAILURE_STATUS:"failed",BLOCK_MINING_STATUS:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"orderId"),s=this.safeString(e,"address");let a=this.safeString2(e,"addressExt","addressTag");void 0!==a&&a.length<1&&(a=void 0);const r=this.safeString(e,"fromAddress");let o=this.safeString(e,"fromAddressTag");void 0!==o&&o.length<1&&(o=void 0);const n=this.safeString(e,"tokenId"),c=this.safeCurrencyCode(n,t),d=this.safeInteger(e,"time");let h=this.safeString(e,"txid");""===h&&(h=void 0);let l=void 0,u=this.parseTransactionStatus(this.safeString(e,"statusCode"));void 0===u?(l="deposit",u="ok"):l="withdrawal";const p=this.safeFloat(e,"quantity"),f=this.safeFloat(e,"fee");let m=void 0;if(void 0!==f){const t=this.safeString(e,"feeTokenId");m={currency:this.safeCurrencyCode(t),cost:f}}return{info:e,id:i,txid:h,timestamp:d,datetime:this.iso8601(d),addressFrom:r,address:s,addressTo:s,tagFrom:o,tag:a,tagTo:a,type:l,amount:p,currency:c,status:u,updated:void 0,fee:m}}parseTicker(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t),a=this.safeInteger(e,"time"),r=this.safeFloat(e,"openPrice"),o=this.safeFloat(e,"lastPrice");let n=void 0,c=void 0,d=void 0;void 0!==r&&void 0!==o&&(n=o-r,d=this.sum(r,o)/2,void 0!==o&&o>0&&(c=n/r*100));const h=this.safeFloat(e,"quoteVolume"),l=this.safeFloat(e,"volume"),u=this.vwap(l,h);return{symbol:s,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:this.safeFloat2(e,"bestBidPrice","bidPrice"),bidVolume:this.safeFloat(e,"bidQty"),ask:this.safeFloat2(e,"bestAskPrice","askPrice"),askVolume:this.safeFloat(e,"askQty"),vwap:u,open:r,close:o,last:o,previousClose:void 0,change:n,percentage:c,average:d,baseVolume:l,quoteVolume:h,info:e}}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeFloat(e,"time"),a=this.safeString(e,"orderId"),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"qty");let n=void 0;void 0!==r&&void 0!==o&&(n=r*o);let c=void 0,d=void 0;if("isBuyerMaker"in e)c=e.isBuyerMaker?"sell":"buy";else{const t=this.safeValue(e,"isMaker");void 0!==t&&(d=t?"maker":"taker");c=this.safeValue(e,"isBuyer")?"buy":"sell"}let h=void 0;const l=this.safeFloat(e,"commission");if(void 0!==l){const t=this.safeString(e,"commissionAsset");h={cost:l,currency:this.safeCurrencyCode(t)}}let u=void 0;return void 0===u&&void 0!==t&&(u=t.symbol),{id:i,info:e,timestamp:s,datetime:this.iso8601(s),symbol:u,type:void 0,order:a,side:c,takerOrMaker:d,price:r,amount:o,cost:n,fee:h}}parseOrder(e,t){const i=this.safeString(e,"orderId"),s=this.safeString(e,"clientOrderId");let a=this.safeInteger(e,"time");void 0===a&&(a=this.safeInteger(e,"transactTime"));const r=this.safeString(e,"symbol"),o=this.safeSymbol(r,t);let n=this.safeStringLower(e,"type");const c=this.safeStringLower(e,"side");let d=this.safeFloat(e,"price"),h=this.safeFloat(e,"avgPrice"),l=void 0,u=this.safeFloat(e,"cummulativeQuoteQty"),p=void 0,f=void 0;void 0===n?(n=this.safeStringLower(e,"orderType"),void 0!==t&&t.inverse&&(u=this.safeFloat(e,"executedQty"),l=void 0),0===u&&(p=0)):(l=this.safeFloat(e,"origQty"),"market"===n&&(d=void 0,"buy"===c&&(l=void 0)),p=this.safeFloat(e,"executedQty"),void 0!==p&&void 0!==l&&(f=l-p)),0===h&&(h=void 0);const m=this.parseOrderStatus(this.safeString(e,"status")),v=this.safeString(e,"timeInForce"),y=this.safeFloat(e,"stopPrice"),g={info:e,id:i,clientOrderId:s,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:o,type:n,timeInForce:v,side:c,price:d,stopPrice:y,average:h,cost:u,amount:l,filled:p,remaining:f,status:m,trades:void 0,fee:void 0,fees:void 0},b=this.safeValue(e,"fees",[]);if(b.length>0){g.fees=[];for(let e=0;e<b.length;e++){const t=this.safeFloat(b[e],"fee");if(void 0!==t){const i=this.safeString(b[e],"feeToken"),s=this.safeCurrencyCode(i);g.fees.push({cost:t,currency:s})}}}return g}parseOrderStatus(e){return this.safeString({NEW:"open",CANCELED:"canceled",FILLED:"closed",PENDING_CANCEL:"canceled"},e,e)}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t||"quote"===t||"contract"===t&&("insurance"===e||"fundingRate"===e))Object.keys(s).length&&(o+="?"+this.urlencode(s));else{const e=this.milliseconds();this.checkRequiredCredentials();const t=this.extend({timestamp:e},n),s=this.urlencode(t),c=this.hmac(this.encode(s),this.encode(this.secret),"sha256");t.signature=c,a={"X-BH-APIKEY":this.apiKey},"POST"===i?(r=this.urlencode(t),a=this.extend({"Content-Type":"application/x-www-form-urlencoded"},a)):o+="?"+this.urlencode(t)}return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,o,n,c,d){if(void 0!==n&&"code"in n){const e=this.safeString(n,"code");if("0"!==e){const t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),new r(t)}}}}},function(e,t,i){"use strict";const s=i(1),{BadRequest:a,AuthenticationError:r,NetworkError:o,ArgumentsRequired:n,OrderNotFound:c,InsufficientFunds:d}=i(0),{TICK_SIZE:h}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"hollaex",name:"HollaEx",countries:["KR"],rateLimit:333,version:"v1",has:{CORS:!1,fetchMarkets:!0,fetchCurrencies:!0,fetchTicker:!0,fetchTickers:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTrades:!0,fetchOHLCV:!0,fetchBalance:!0,createOrder:!0,createLimitBuyOrder:!0,createLimitSellOrder:!0,createMarketBuyOrder:!0,createMarketSellOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!1,fetchOpenOrder:!0,fetchOrder:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1,fetchOrders:!1,fetchMyTrades:!0,withdraw:!0,fetchDepositAddress:!0},timeframes:{"1h":"1h","1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/75841031-ca375180-5ddd-11ea-8417-b975674c23cb.jpg",api:"https://api.hollaex.com",www:"https://hollaex.com",doc:"https://apidocs.hollaex.com",referral:"https://pro.hollaex.com/signup?affiliation_code=QSWA6G"},precisionMode:h,requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["health","constant","ticker","ticker/all","orderbooks","trades","chart","udf/config","udf/history","udf/symbols"]},private:{get:["user","user/balance","user/trades","user/orders","user/orders/{order_id}","user/deposits","user/withdrawals","user/withdraw/{currency}/fee"],post:["user/request-withdrawal","order"],delete:["user/orders","user/orders/{order_id}"]}},fees:{trading:{tierBased:!0,percentage:!0}},exceptions:{broad:{"Invalid token":r,"Order not found":c,"Insufficient balance":d},exact:{400:a,403:r,404:a,405:a,410:a,429:a,500:o,503:o}},options:{"api-expires":parseInt(this.timeout/1e3)}})}async fetchMarkets(e={}){const t=await this.publicGetConstant(e),i=this.safeValue(t,"pairs",{}),s=Object.keys(i),a=[];for(let e=0;e<s.length;e++){const t=i[s[e]],r=this.safeString(t,"name"),o=this.safeString(t,"pair_base"),n=this.safeString(t,"pair_2"),c=this.commonCurrencyCode(o.toUpperCase()),d=this.commonCurrencyCode(n.toUpperCase()),h=c+"/"+d,l=this.safeValue(t,"active");a.push({id:r,symbol:h,base:c,quote:d,baseId:o,quoteId:n,active:l,precision:{price:this.safeFloat(t,"increment_price"),amount:this.safeFloat(t,"increment_size")},limits:{amount:{min:this.safeFloat(t,"min_size"),max:this.safeFloat(t,"max_size")},price:{min:this.safeFloat(t,"min_price"),max:this.safeFloat(t,"max_price")},cost:{min:void 0,max:void 0}},info:t})}return a}async fetchCurrencies(e={}){const t=await this.publicGetConstant(e),i=this.safeValue(t,"coins",{}),s=Object.keys(i),a={};for(let e=0;e<s.length;e++){const t=i[s[e]],r=this.safeString(t,"symbol"),o=this.safeInteger(t,"id"),n=this.safeCurrencyCode(r),c=this.safeString(t,"fullname"),d=this.safeValue(t,"active"),h=this.safeFloat(t,"withdrawal_fee"),l=this.safeFloat(t,"increment_unit"),u=this.safeValue(t,"withdrawal_limits",[]);a[n]={id:r,numericId:o,code:n,info:t,name:c,active:d,fee:h,precision:l,limits:{amount:{min:this.safeFloat(t,"min"),max:this.safeFloat(t,"max")},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:this.safeValue(u,0)}}}}return a}async fetchOrderBooks(e,t,i={}){await this.loadMarkets();const s=await this.publicGetOrderbooks(i),a={},r=Object.keys(s);for(let e=0;e<r.length;e++){const t=r[e],i=s[t],o=this.safeSymbol(t,void 0,"-"),n=this.parse8601(this.safeString(i,"timestamp"));a[o]=this.parseOrderBook(s[t],n)}return a}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.marketId(e),a={symbol:s},r=await this.publicGetOrderbooks(this.extend(a,i)),o=this.safeValue(r,s),n=this.parse8601(this.safeString(o,"timestamp"));return this.parseOrderBook(o,n)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickerAll(this.extend(t));return this.parseTickers(i,e)}parseTickers(e,t){const i={},s=Object.keys(e);for(let t=0;t<s.length;t++){const a=s[t],r=e[a],o=this.safeString(r,"symbol",a),n=this.safeMarket(o,void 0,"-");i[n.symbol]=this.parseTicker(r,n)}return this.filterByArray(i,"symbol",t)}parseTicker(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t,"-"),a=this.parse8601(this.safeString2(e,"time","timestamp")),r=this.safeFloat(e,"close");return{symbol:s,info:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:r,last:this.safeFloat(e,"last",r),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id},o=await this.publicGetTrades(this.extend(r,s)),n=this.safeValue(o,a.id,[]);return this.parseTrades(n,a,t,i)}parseTrade(e,t){const i=this.safeString(e,"symbol"),s=(t=this.safeMarket(i,t,"-")).symbol,a=this.safeString(e,"timestamp"),r=this.parse8601(a),o=this.safeString(e,"side"),n=this.safeFloat(e,"price"),c=this.safeFloat(e,"size");let d=void 0;void 0!==n&&void 0!==c&&(d=n*c);const h=this.safeFloat(e,"fee");let l=void 0;if(void 0!==h){const e=t.quote;l={cost:h,currency:void 0!==t?t.quote:e}}return{info:e,id:void 0,timestamp:r,datetime:a,symbol:s,order:void 0,type:void 0,side:o,takerOrMaker:void 0,price:n,amount:c,cost:d,fee:l}}async fetchOHLCV(e,t="1h",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={symbol:r.id,resolution:this.timeframes[t]},c=this.parseTimeframe(t);if(void 0===i){if(void 0===s)throw new n(this.id+" fetchOHLCV requires a 'since' or a 'limit' argument");{const e=this.seconds(),t=e-c*s;o.to=e,o.from=t}}else if(void 0===s)o.from=parseInt(i/1e3),o.to=this.seconds();else{const e=parseInt(i/1e3);o.from=e,o.to=this.sum(e,c*s)}const d=await this.publicGetChart(this.extend(o,a));return this.parseOHLCVs(d,r,t,i,s)}parseOHLCV(e,t,i="1h",s,a){return[this.parse8601(this.safeString(e,"time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUserBalance(e),i={info:t},s=Object.keys(this.currencies_by_id);for(let e=0;e<s.length;e++){const a=s[e],r=this.safeCurrencyCode(a),o=this.account();o.free=this.safeFloat(t,a+"_available"),o.total=this.safeFloat(t,a+"_balance"),i[r]=o}return this.parseBalance(i)}async fetchOpenOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},a=await this.privateGetUserOrdersOrderId(this.extend(s,i));return this.parseOrder(a)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.market(e),r.symbol=a.id);const o=await this.privateGetUserOrders(this.extend(r,s));return this.parseOrders(o,a)}parseOrder(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t,"-"),a=this.safeString(e,"id"),r=this.parse8601(this.safeString(e,"created_at")),o=this.safeString(e,"type"),n=this.safeString(e,"side"),c=this.safeFloat(e,"price"),d=this.safeFloat(e,"size"),h=this.safeFloat(e,"filled");let l=void 0,u=void 0;void 0!==h&&(void 0!==d&&(u=d-h),void 0!==c&&(l=h*c));const p="market"===o?"closed":"open";return{id:a,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:p,symbol:s,type:o,timeInForce:void 0,side:n,price:c,stopPrice:void 0,amount:d,filled:h,remaining:u,cost:l,trades:void 0,fee:void 0,info:e,average:void 0}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n={symbol:o.id,side:i,size:s,type:t};"market"!==t&&(n.price=a);const c=await this.privatePostOrder(this.extend(n,r));return this.parseOrder(c,o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},a=await this.privateDeleteUserOrdersOrderId(this.extend(s,i));return this.parseOrder(a)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s=void 0;void 0!==e&&(s=this.markets(e),i.symbol=s.id);const a=await this.privateDeleteUserOrders(this.extend(i,t));return this.parseOrders(a,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==i&&(a.limit=i),void 0!==t&&(a.start_date=this.iso8601(t));const o=await this.privateGetUserTrades(this.extend(a,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,r,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s=await this.privateGetUser(t),a=this.safeValue(s,"crypto_wallet");let r=this.safeString(a,i.id),o=void 0;if(void 0!==r){const e=r.split(":");r=this.safeString(e,0),o=this.safeString(e,1)}return this.checkAddress(r),{currency:e,address:r,tag:o,info:s}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.currency=r.id),void 0!==i&&(a.limit=i),void 0!==t&&(a.start_date=this.iso8601(t));const o=await this.privateGetUserDeposits(this.extend(a,s)),n=this.safeValue(o,"data",[]);return this.parseTransactions(n,r,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.currency=r.id),void 0!==i&&(a.limit=i),void 0!==t&&(a.start_date=this.iso8601(t));const o=await this.privateGetUserWithdrawals(this.extend(a,s)),n=this.safeValue(o,"data",[]);return this.parseTransactions(n,r,t,i)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"transaction_id"),a=this.parse8601(this.safeString(e,"created_at")),r=this.parse8601(this.safeString(e,"updated_at")),o=this.safeString(e,"type"),n=this.safeFloat(e,"amount");let c=this.safeString(e,"address"),d=void 0;let h=void 0,l=void 0;if(void 0!==c){const e=c.split(":");c=this.safeString(e,0),h=this.safeString(e,1),d=c,l=h}const u=this.safeString(e,"currency"),p=this.safeCurrencyCode(u);let f=this.safeValue(e,"status");const m=this.safeValue(e,"dismissed"),v=this.safeValue(e,"rejected");f=f?"ok":m?"canceled":v?"failed":"pending";const y={currency:p,cost:this.safeFloat(e,"fee")};return{info:e,id:i,txid:s,timestamp:a,datetime:this.iso8601(a),addressFrom:void 0,address:c,addressTo:d,tagFrom:void 0,tag:h,tagTo:l,type:o,amount:n,currency:p,status:f,updated:r,fee:y}}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();void 0!==s&&(i+=":"+s);const r={currency:this.currency(e).id,amount:t,address:i};let o=this.safeString(a,"otp_code");void 0===o&&void 0===this.twofa||(void 0===o&&(o=this.oath()),r.otp_code=o);return{info:await this.privatePostUserRequestWithdrawal(this.extend(r,a)),id:void 0}}sign(e,t="public",i="GET",s={},a,r){const o=this.omit(s,this.extractParams(e));e="/"+this.version+"/"+this.implodeParams(e,s),"GET"===i&&Object.keys(o).length&&(e+="?"+this.urlencode(o));const n=this.urls.api+e;if("private"===t){this.checkRequiredCredentials();const t=this.safeInteger2(this.options,"api-expires","expires",parseInt(this.timeout/1e3)),s=this.sum(this.seconds(),t).toString();let n=i+e+s;a={"api-key":this.encode(this.apiKey),"api-expires":s},"POST"===i&&(a["Content-type"]="application/json",Object.keys(o).length&&(n+=r=this.json(o)));const c=this.hmac(this.encode(n),this.encode(this.secret));a["api-signature"]=c}return{url:n,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,r,o,n,c){if(void 0!==o&&e>=400&&e<=503){const t=this.id+" "+r,i=this.safeString(o,"message");this.throwBroadlyMatchedException(this.exceptions.broad,i,t);const s=e.toString();this.throwExactlyMatchedException(this.exceptions.exact,s,t)}}}},function(e,t,i){"use strict";const s=i(45),{NotSupported:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"huobijp",name:"Huobi Japan",countries:["JP"],hostname:"api-cloud.huobi.co.jp",pro:!0,has:{fetchDepositAddress:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/85734211-85755480-b705-11ea-8b35-0b7f1db33a2f.jpg",api:{market:"https://{hostname}",public:"https://{hostname}",private:"https://{hostname}"},www:"https://www.huobi.co.jp",referral:"https://www.huobi.co.jp/register/?invite_code=znnq3",doc:"https://api-doc.huobi.co.jp",fees:"https://www.huobi.co.jp/support/fee"}})}async fetchDepositAddress(e,t={}){throw new a(this.id+" fetchDepositAddress not supported yet")}}},function(e,t,i){"use strict";const s=i(45);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"huobiru",name:"Huobi Russia",countries:["RU"],hostname:"www.huobi.com.ru",pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/52978816-e8552e00-33e3-11e9-98ed-845acfece834.jpg",api:{market:"https://{hostname}/api",public:"https://{hostname}/api",private:"https://{hostname}/api"},www:"https://www.huobi.com.ru/ru-ru",referral:"https://www.huobi.com.ru/invite?invite_code=esc74",doc:"https://github.com/cloudapidoc/API_Docs_en",fees:"https://www.huobi.com.ru/ru-ru/about/fee/"}})}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,AuthenticationError:r,ArgumentsRequired:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"ice3x",name:"ICE3X",countries:["ZA"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87460809-1dd06c00-c616-11ea-98ad-7d5e1cb7fcdd.jpg",api:"https://ice3x.com/api",www:"https://ice3x.com",doc:"https://ice3x.co.za/ice-cubed-bitcoin-exchange-api-documentation-1-june-2017",fees:["https://help.ice3.com/support/solutions/articles/11000033293-trading-fees","https://help.ice3.com/support/solutions/articles/11000033288-fees-explained","https://help.ice3.com/support/solutions/articles/11000008131-what-are-your-fiat-deposit-and-withdrawal-fees-","https://help.ice3.com/support/solutions/articles/11000033289-deposit-fees"],referral:"https://ice3x.com?ref=14341802"},api:{public:{get:["currency/list","currency/info","pair/list","pair/info","stats/marketdepthfull","stats/marketdepthbtcav","stats/marketdepth","orderbook/info","trade/list","trade/info"]},private:{post:["balance/list","balance/info","order/new","order/cancel","order/list","order/info","trade/list","trade/info","transaction/list","transaction/info","invoice/list","invoice/info","invoice/pdf"]}},fees:{trading:{maker:.005,taker:.005}},precision:{amount:8,price:8}})}async fetchCurrencies(e={}){const t=(await this.publicGetCurrencyList(e)).response.entities,i=this.precision.amount,s={};for(let e=0;e<t.length;e++){const a=t[e],r=this.safeString(a,"currency_id"),o=this.safeString(a,"iso"),n=this.safeCurrencyCode(o);s[n]={id:r,code:n,name:a.name,active:!0,precision:i,limits:{amount:{min:void 0,max:Math.pow(10,i)},price:{min:Math.pow(10,-i),max:Math.pow(10,i)},cost:{min:void 0,max:void 0}},info:a,fee:void 0}}return s}async fetchMarkets(e={}){void 0===this.currencies_by_id&&(this.currencies=await this.fetchCurrencies(),this.currencies_by_id=this.indexBy(this.currencies,"id"));const t=await this.publicGetPairList(e),i=this.safeValue(t.response,"entities"),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"pair_id"),r=this.safeString(t,"currency_id_from"),o=this.safeString(t,"currency_id_to"),n=this.currencies_by_id[r],c=this.currencies_by_id[o],d=n.code,h=c.code,l=d+"/"+h;s.push({id:a,symbol:l,base:d,quote:h,baseId:r,quoteId:o,active:void 0,info:t,precision:this.precision,limits:this.limits})}return s}parseTicker(e,t){const i=this.milliseconds(),s=t.symbol,a=this.safeFloat(e,"last_price");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"max"),low:this.safeFloat(e,"min"),bid:this.safeFloat(e,"max_bid"),bidVolume:void 0,ask:this.safeFloat(e,"min_ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:void 0,quoteVolume:this.safeFloat(e,"vol"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair_id:i.id},a=await this.publicGetStatsMarketdepthfull(this.extend(s,t)),r=this.safeValue(a.response,"entity");return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetStatsMarketdepthfull(t),s=this.safeValue(i.response,"entities"),a={};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"pair_id"),r=this.safeValue(this.marketsById,i);if(void 0!==r){a[r.symbol]=this.parseTicker(t,r)}}return this.filterByArray(a,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair_id:this.marketId(e)};if(void 0!==t){const e=this.safeString(i,"type");if("ask"!==e&&"bid"!==e)throw new o(this.id+" fetchOrderBook requires an exchange-specific extra 'type' param ('bid' or 'ask') when used with a limit");s.items_per_page=t}const a=await this.publicGetOrderbookInfo(this.extend(s,i)),r=this.safeValue(a.response,"entities");return this.parseOrderBook(r,void 0,"bids","asks","price","amount")}parseTrade(e,t){const i=this.safeTimestamp(e,"created"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"volume");let r=void 0;void 0!==s&&void 0!==a&&(r=s*a);let o=void 0;const n=this.safeFloat(e,"fee");void 0!==n&&(o={cost:n,currency:t.quote});const c=this.safeString(e,"type"),d=this.safeString(e,"trade_id");let h=void 0;return void 0!==t&&(h=t.symbol),{id:d,info:e,timestamp:i,datetime:this.iso8601(i),symbol:h,order:void 0,type:"limit",side:c,takerOrMaker:void 0,price:s,amount:a,cost:r,fee:o}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={pair_id:a.id},o=await this.publicGetTradeList(this.extend(r,s)),n=this.safeValue(o.response,"entities");return this.parseTrades(n,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalanceList(e),i={info:t},s=this.safeValue(t.response,"entities",[]);for(let e=0;e<s.length;e++){const t=s[e],a=this.safeString(t,"currency_id"),r=this.safeCurrencyCode(a),o=this.account();o.total=this.safeFloat(t,"balance"),i[r]=o}return this.parseBalance(i)}parseOrder(e,t){const i=this.safeInteger(e,"pair_id");let s=void 0;i&&!t&&i in this.marketsById&&(s=(t=this.marketsById[i]).symbol);const a=this.safeTimestamp(e,"created"),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"volume");let n=this.safeInteger(e,"active"),c=this.safeFloat(e,"remaining"),d=void 0;1===n?n="open":(n="closed",c=0,d=o);let h=void 0;const l=this.safeFloat(e,"fee");return void 0!==l&&(h={cost:l},void 0!==t&&(h.currency=t.quote)),{id:this.safeString(e,"order_id"),clientOrderId:void 0,datetime:this.iso8601(a),timestamp:a,lastTradeTimestamp:void 0,status:n,symbol:s,type:"limit",timeInForce:void 0,side:this.safeString(e,"type"),price:r,stopPrice:void 0,cost:void 0,amount:o,filled:d,remaining:c,trades:void 0,fee:h,info:e,average:void 0}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n={pair_id:o.id,type:i,amount:s,price:a},c=await this.privatePostOrderNew(this.extend(n,r));return this.parseOrder({order_id:c.response.entity.order_id,created:this.seconds(),active:1,type:i,price:a,volume:s,remaining:s,info:c},o)}async cancelOrder(e,t,i={}){const s={order_id:e};return await this.privatePostOrderCancel(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={"order _id":e},a=await this.privatePostOrderInfo(this.extend(s,i)),r=this.safeValue(a,"response",{}),o=this.safeValue(r,"entity");return this.parseOrder(o)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a=await this.privatePostOrderList(s),r=this.safeValue(a,"response",{}),o=this.safeValue(r,"entities",[]);let n=void 0;return void 0!==e&&(n=this.market(e)),this.parseOrders(o,n,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={pair_id:a.id};void 0!==i&&(r.items_per_page=i),void 0!==t&&(r.date_from=parseInt(t/1e3));const o=await this.privatePostTradeList(this.extend(r,s)),n=this.safeValue(o,"response",{}),c=this.safeValue(n,"entities",[]);return this.parseTrades(c,a,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency_id:this.currency(e).id},s=await this.privatePostBalanceInfo(this.extend(i,t)),a=this.safeValue(s,"response",{}),r=this.safeValue(a,"entity",{}),o=this.safeString(r,"address");return{currency:e,address:o,tag:void 0,status:o?"ok":"none",info:s}}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+this.version+"/"+e;return"public"===t?Object.keys(s).length&&(o+="?"+this.urlencode(s)):(this.checkRequiredCredentials(),r=this.urlencode(this.extend({nonce:this.nonce()},s)),a={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(r),this.encode(this.secret),"sha512")}),{url:o,method:i,body:r,headers:a}}async request(e,t="public",i="GET",s={},o,n){const c=await this.fetch2(e,t,i,s,o,n),d=this.safeValue(c,"errors"),h=this.safeValue(c,"response");if(d||!h){const e=["Key","user_id","Sign"];for(let t=0;t<e.length;t++){const i=e[t],s=this.safeString(d,i);if(s&&!("user_id"===i&&s.indexOf("authorization")<0))throw new r(s)}throw new a(this.json(d))}return c}}},function(e,t,i){"use strict";const s=i(1),{PAD_WITH_ZERO:a}=i(2),{InvalidOrder:r,InsufficientFunds:o,ExchangeError:n,ExchangeNotAvailable:c,DDoSProtection:d,BadRequest:h,NotSupported:l,InvalidAddress:u,AuthenticationError:p}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"idex",name:"IDEX",countries:["US"],rateLimit:1500,version:"v2",certified:!0,pro:!0,requiresWeb3:!0,has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrders:!1,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!1,fetchDeposits:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","6h":"6h","1d":"1d"},urls:{test:{public:"https://api-sandbox.idex.io",private:"https://api-sandbox.idex.io"},logo:"https://user-images.githubusercontent.com/51840849/94481303-2f222100-01e0-11eb-97dd-bc14c5943a86.jpg",api:{public:"https://api.idex.io",private:"https://api.idex.io"},www:"https://idex.io",doc:["https://docs.idex.io/"]},api:{public:{get:["ping","time","exchange","assets","markets","tickers","candles","trades","orderbook","wsToken"]},private:{get:["user","wallets","balances","orders","fills","deposits","withdrawals"],post:["wallets","orders","orders/test","withdrawals"],delete:["orders"]}},options:{defaultTimeInForce:"gtc",defaultSelfTradePrevention:"cn"},exceptions:{INVALID_ORDER_QUANTITY:r,INSUFFICIENT_FUNDS:o,SERVICE_UNAVAILABLE:c,EXCEEDED_RATE_LIMIT:d,INVALID_PARAMETER:h,WALLET_NOT_ASSOCIATED:u,INVALID_WALLET_SIGNATURE:p},requiredCredentials:{walletAddress:!0,privateKey:!0,apiKey:!0,secret:!0},paddingMode:a,commonCurrencies:{},requireCredentials:{privateKey:!0,apiKey:!0,secret:!0}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"market"),r=this.safeString(s,"baseAsset"),o=this.safeString(s,"quoteAsset"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o),d=n+"/"+c,h=this.safeInteger(s,"baseAssetPrecision"),l=this.safeInteger(s,"quoteAssetPrecision"),u="active"===this.safeString(s,"status"),p={amount:h,price:l};i.push({symbol:d,id:a,base:n,quote:c,baseId:r,quoteId:o,active:u,info:s,precision:p,limits:{amount:{min:Math.pow(10,-p.amount),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},a=await this.publicGetTickers(this.extend(s,t)),r=this.safeValue(a,0);return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t);return this.parseTickers(i,e)}parseTickers(e,t){const i=[];for(let t=0;t<e.length;t++)i.push(this.parseTicker(e[t]));return this.filterByArray(i,"symbol",t)}parseTicker(e,t){const i=this.safeString(e,"market"),s=this.safeSymbol(i,t,"-"),a=this.safeFloat(e,"baseVolume"),r=this.safeFloat(e,"quoteVolume"),o=this.safeInteger(e,"time"),n=this.safeFloat(e,"open"),c=this.safeFloat(e,"high"),d=this.safeFloat(e,"low"),h=this.safeFloat(e,"close"),l=this.safeFloat(e,"ask"),u=this.safeFloat(e,"bid");let p=this.safeFloat(e,"percentChange");void 0!==p&&(p=1+p/100);let f=void 0;return void 0!==h&&void 0!==n&&(f=h-n),{symbol:s,timestamp:o,datetime:this.iso8601(o),high:c,low:d,bid:u,bidVolume:void 0,ask:l,askVolume:void 0,vwap:void 0,open:n,close:h,last:h,previousClose:void 0,change:f,percentage:p,average:void 0,baseVolume:a,quoteVolume:r,info:e}}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={market:r.id,interval:t};void 0!==i&&(o.start=i),void 0!==s&&(o.limit=s);const n=await this.publicGetCandles(this.extend(o,a));return Array.isArray(n)?this.parseOHLCVs(n,r,t,i,s):[]}parseOHLCV(e,t){return[this.safeInteger(e,"start"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market:a.id};void 0!==t&&(r.start=t),void 0!==i&&(r.limit=i);const o=await this.publicGetTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseTrade(e,t){const i=this.safeString(e,"fillId"),s=this.safeFloat(e,"price"),a=this.safeFloat(e,"quantity"),r=this.safeFloat(e,"quoteQuantity"),o=this.safeInteger(e,"time"),n=this.safeString(e,"market"),c=this.safeSymbol(n,t,"-"),d="buy"===this.safeString(e,"makerSide")?"sell":"buy",h=this.safeString(e,"side",d),l=this.safeString(e,"liquidity","taker"),u=this.safeFloat(e,"fee");let p=void 0;if(void 0!==u){const t=this.safeString(e,"feeAsset");p={cost:u,currency:this.safeCurrencyCode(t)}}const f=this.safeString(e,"orderId");return{info:e,timestamp:o,datetime:this.iso8601(o),symbol:c,id:i,order:f,type:"limit",side:h,takerOrMaker:l,price:s,amount:a,cost:r,fee:p}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id,level:2};void 0!==t&&(s.limit=t);const a=await this.publicGetOrderbook(this.extend(s,i));return{timestamp:void 0,datetime:void 0,nonce:this.safeInteger(a,"sequence"),bids:this.parseSide(a,"bids"),asks:this.parseSide(a,"asks")}}parseSide(e,t){const i=this.safeValue(e,t,[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeFloat(t,0),r=this.safeFloat(t,1),o=this.safeInteger(t,2);s.push([a,r,o])}const a="bids"===t;return this.sortBy(s,0,a)}async fetchCurrencies(e={}){const t=await this.publicGetAssets(e),i={};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"name"),r=this.safeString(s,"symbol"),o=this.safeInteger(s,"exchangeDecimals"),n=this.safeCurrencyCode(r),c=Math.pow(-10,o);i[n]={id:r,code:n,info:s,type:void 0,name:a,active:void 0,fee:void 0,precision:o,limits:{amount:{min:c,max:void 0},price:{min:c,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:c,max:void 0}}}}return i}async fetchBalance(e={}){this.checkRequiredCredentials(),await this.loadMarkets();const t={nonce:this.uuidv1(),wallet:this.walletAddress},i=this.extend(t,e);if(void 0===i.wallet)throw new h(this.id+' wallet is undefined, set this.walletAddress or "address" in params');let s=void 0;try{s=await this.privateGetBalances(i)}catch(e){if(!(e instanceof u))throw e;{const e=i.wallet;await this.associateWallet(e),s=await this.privateGetBalances(i)}}const a={info:s};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"asset"),r=this.safeCurrencyCode(i),o=this.safeFloat(t,"quantity"),n=this.safeFloat(t,"availableForTrade"),c=this.safeFloat(t,"locked");a[r]={free:n,used:c,total:o}}return this.parseBalance(a)}async fetchMyTrades(e,t,i,s={}){this.checkRequiredCredentials(),await this.loadMarkets();let a=void 0;const r={nonce:this.uuidv1(),wallet:this.walletAddress};void 0!==e&&(a=this.market(e),r.market=a.id),void 0!==t&&(r.start=t),void 0!==i&&(r.limit=i);const o=this.extend(r,s);if(void 0===o.wallet)throw new h(this.id+' walletAddress is undefined, set this.walletAddress or "address" in params');let n=void 0;try{n=await this.privateGetFills(o)}catch(e){if(!(e instanceof u))throw e;{const e=o.wallet;await this.associateWallet(e),n=await this.privateGetFills(o)}}return this.parseTrades(n,a,t,i)}async fetchOrder(e,t,i={}){const s={orderId:e};return await this.fetchOrdersHelper(t,void 0,void 0,this.extend(s,i))}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersHelper(e,t,i,this.extend({closed:!1},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersHelper(e,t,i,this.extend({closed:!0},s))}async fetchOrdersHelper(e,t,i,s={}){await this.loadMarkets();const a={nonce:this.uuidv1(),wallet:this.walletAddress};let r=void 0;void 0!==e&&(r=this.market(e),a.market=r.id),void 0!==t&&(a.start=t),void 0!==i&&(a.limit=i);const o=await this.privateGetOrders(this.extend(a,s));return Array.isArray(o)?this.parseOrders(o,r,t,i):this.parseOrder(o,r)}parseOrderStatus(e){return this.safeString({active:"open",partiallyFilled:"open",rejected:"canceled",filled:"closed"},e,e)}parseOrder(e,t){const i=this.safeInteger(e,"time"),s=this.safeValue(e,"fills",[]),a=this.safeString(e,"orderId"),r=this.safeString(e,"clientOrderId"),o=this.safeString(e,"market"),n=this.safeString(e,"side"),c=this.safeSymbol(o,t,"-"),d=this.parseTrades(s,t),h=this.safeString(e,"type"),l=this.safeFloat(e,"originalQuantity"),u=this.safeFloat(e,"executedQuantity");let p=void 0;void 0!==l&&void 0!==u&&(p=l-u);const f=this.safeFloat(e,"avgExecutionPrice"),m=this.safeFloat(e,"price",f);let v=void 0;void 0!==l&&void 0!==m&&(v=l*m);const y=this.safeString(e,"status"),g=this.parseOrderStatus(y),b={currency:void 0,cost:void 0};let w=void 0;for(let e=0;e<d.length;e++)w=d[e],b.currency=w.fee.currency,b.cost=this.sum(b.cost,w.fee.cost);const k=this.safeInteger(w,"timestamp");return{info:e,id:a,clientOrderId:r,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:k,symbol:c,type:h,timeInForce:void 0,side:n,price:m,stopPrice:void 0,amount:l,cost:v,average:f,filled:u,remaining:p,status:g,fee:b,trades:d}}async associateWallet(e,t={}){const i=this.uuidv1(),s=this.remove0xPrefix(e),a=[this.base16ToBinary(i),this.base16ToBinary(s)],r=this.binaryConcatArray(a),o=this.hash(r,"keccak","hex"),n={parameters:{nonce:i,wallet:e},signature:this.signMessageString(o,this.privateKey)};return await this.privatePostWallets(n)}async createOrder(e,t,i,s,a,r={}){this.checkRequiredCredentials(),await this.loadMarkets();const o=this.market(e),n=this.uuidv1();let c=void 0;const d={stopLoss:3,stopLossLimit:4,takeProfit:5,takeProfitLimit:6};let u=void 0;if("stopLossLimit"===t||"takeProfitLimit"===t||"stopPrice"in r){if(!("stopPrice"in r))throw new h(this.id+" stopPrice is a required parameter for "+t+"orders");u=this.priceToPrecision(e,r.stopPrice)}const p={limit:1,limitMaker:2};let f=void 0;const m=t.toLowerCase().indexOf("limit")>-1;if(t in p)c=p[t],f=this.priceToPrecision(e,a);else if(t in d)c=d[t],f=this.priceToPrecision(e,a);else{if("market"!==t)throw new h(this.id+" "+t+" is not a valid order type");c=0}let v=0;if("quoteOrderQuantity"in r){if("market"!==t)throw new l(this.id+" quoteOrderQuantity is not supported for "+t+" orders, only supported for market orders");v=1,s=this.safeFloat(r,"quoteOrderQuantity")}const y="buy"===i?0:1,g=this.remove0xPrefix(this.walletAddress),b=this.amountToPrecision(e,s),w={gtc:0,ioc:2,fok:3},k=this.safeString(this.options,"defaultTimeInForce","gtc"),x=this.safeString(r,"timeInForce",k);let T=void 0;if(!(x in w)){const e=Object.keys(w).join(", ");throw new h(this.id+" "+x+" is not a valid timeInForce, please choose one of "+e)}T=w[x];const O={dc:0,co:1,cn:2,cb:3},_=this.safeString(this.options,"defaultSelfTradePrevention","cn"),S=this.safeString(r,"selfTradePrevention",_);let C=void 0;if(!(S in O)){const e=Object.keys(O).join(", ");throw new h(this.id+" "+S+" is not a valid selfTradePrevention, please choose one of "+e)}C=O[S];const I=[this.numberToBE(1,1),this.base16ToBinary(n),this.base16ToBinary(g),this.stringToBinary(this.encode(o.id)),this.numberToBE(c,1),this.numberToBE(y,1),this.stringToBinary(this.encode(b)),this.numberToBE(v,1)];if(m){const e=this.stringToBinary(this.encode(f));I.push(e)}if(t in d){const e=this.stringToBinary(this.encode(u||f));I.push(e)}const M=this.safeString(r,"clientOrderId");void 0!==M&&I.push(this.stringToBinary(this.encode(M)));const F=[this.numberToBE(T,1),this.numberToBE(C,1),this.numberToBE(0,8)],E=this.arrayConcat(I,F),A=this.binaryConcatArray(E),B=this.hash(A,"keccak","hex"),P=this.signMessageString(B,this.privateKey),q={parameters:{nonce:n,market:o.id,side:i,type:t,wallet:this.walletAddress,timeInForce:x,selfTradePrevention:S},signature:P};m&&(q.parameters.price=f),t in d&&(q.parameters.stopPrice=u||f),0===v?q.parameters.quantity=b:q.parameters.quoteOrderQuantity=b,void 0!==M&&(q.parameters.clientOrderId=M);const V=await this.privatePostOrders(q);return this.parseOrder(V,o)}async withdraw(e,t,i,s,a={}){this.checkRequiredCredentials(),await this.loadMarkets();const r=this.uuidv1(),o=this.currencyToPrecision(e,t),n=this.currency(e),c=this.remove0xPrefix(this.walletAddress),d=[this.base16ToBinary(r),this.base16ToBinary(c),this.stringToBinary(this.encode(n.id)),this.stringToBinary(this.encode(o)),this.numberToBE(1,1)],h=this.binaryConcatArray(d),l=this.hash(h,"keccak","hex"),u=this.signMessageString(l,this.privateKey),p={parameters:{nonce:r,wallet:i,asset:n.id,quantity:o},signature:u},f=await this.privatePostWithdrawals(p);return{info:f,id:this.safeString(f,"withdrawalId")}}async cancelOrder(e,t,i={}){this.checkRequiredCredentials(),await this.loadMarkets();let s=void 0;void 0!==t&&(s=this.market(t));const a=this.uuidv1(),r=this.remove0xPrefix(this.walletAddress),o=[this.base16ToBinary(a),this.base16ToBinary(r),this.stringToBinary(this.encode(e))],n=this.binaryConcatArray(o),c=this.hash(n,"keccak","hex"),d=this.signMessageString(c,this.privateKey),h={parameters:{nonce:a,wallet:this.walletAddress,orderId:e},signature:d},l=await this.privateDeleteOrders(this.extend(h,i)),u=this.safeValue(l,0);return this.parseOrder(u,s)}handleErrors(e,t,i,s,a,r,o,c,d){const h=this.safeString(o,"code"),l=this.safeString(o,"message");if(h in this.exceptions){throw new(0,this.exceptions[h])(this.id+" "+l)}if(void 0!==h)throw new n(this.id+" "+l)}async fetchDeposits(e,t,i,s={}){return s=this.extend({method:"privateGetDeposits"},s),this.fetchTransactionsHelper(e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return s=this.extend({method:"privateGetWithdrawals"},s),this.fetchTransactionsHelper(e,t,i,s)}async fetchTransactionsHelper(e,t,i,s={}){await this.loadMarkets();const a={nonce:this.uuidv1(),wallet:this.walletAddress};let r=void 0;void 0!==e&&(r=this.currency(e),a.asset=r.id),void 0!==t&&(a.start=t),void 0!==i&&(a.limit=i);const o=s.method;s=this.omit(s,"method");const n=await this[o](this.extend(a,s));return this.parseTransactions(n,r,t,i)}parseTransactionStatus(e){return this.safeString({mined:"ok"},e,e)}parseTransaction(e,t){let i=void 0;"depositId"in e?i="deposit":"withdrawalId"in e&&(i="withdrawal");const s=this.safeString2(e,"depositId","withdrawId"),a=this.safeCurrencyCode(this.safeString(e,"asset"),t),r=this.safeFloat(e,"quantity"),o=this.safeString(e,"txId"),n=this.safeInteger(e,"txTime");let c=void 0;"fee"in e&&(c={cost:this.safeFloat(e,"fee"),currency:"ETH"});const d=this.safeString(e,"txStatus"),h=this.parseTransactionStatus(d),l=this.safeInteger(e,"confirmationTime");return{info:e,id:s,txid:o,timestamp:n,datetime:this.iso8601(n),address:void 0,tag:void 0,type:i,amount:r,currency:a,status:h,updated:l,fee:c}}sign(e,t="public",i="GET",s={},a,r){const o=this.safeString(this.options,"version","v1");let n=this.urls.api[t]+"/"+o+"/"+e;let c=void 0;if(Object.keys(s).length>0&&("GET"===i?(c=this.urlencode(s),n=n+"?"+c):r=this.json(s)),a={"Content-Type":"application/json"},void 0!==this.apiKey&&(a["IDEX-API-Key"]=this.apiKey),"private"===t){let e=void 0;e="GET"===i?c:r,a["IDEX-HMAC-Signature"]=this.hmac(this.encode(e),this.encode(this.secret),"sha256","hex")}return{url:n,method:i,body:r,headers:a}}}},function(e,t,i){"use strict";const s=i(1);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"independentreserve",name:"Independent Reserve",countries:["AU","NZ"],rateLimit:1e3,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182090-1e9e9080-c2ec-11ea-8e49-563db9a38f37.jpg",api:{public:"https://api.independentreserve.com/Public",private:"https://api.independentreserve.com/Private"},www:"https://www.independentreserve.com",doc:"https://www.independentreserve.com/API"},api:{public:{get:["GetValidPrimaryCurrencyCodes","GetValidSecondaryCurrencyCodes","GetValidLimitOrderTypes","GetValidMarketOrderTypes","GetValidOrderTypes","GetValidTransactionTypes","GetMarketSummary","GetOrderBook","GetAllOrders","GetTradeHistorySummary","GetRecentTrades","GetFxRates"]},private:{post:["PlaceLimitOrder","PlaceMarketOrder","CancelOrder","GetOpenOrders","GetClosedOrders","GetClosedFilledOrders","GetOrderDetails","GetAccounts","GetTransactions","GetDigitalCurrencyDepositAddress","GetDigitalCurrencyDepositAddresses","SynchDigitalCurrencyDepositAddressWithBlockchain","WithdrawDigitalCurrency","RequestFiatWithdrawal","GetTrades","GetBrokerageFees"]}},fees:{trading:{taker:.005,maker:.005,percentage:!0,tierBased:!1}},commonCurrencies:{PLA:"PlayChip"}})}async fetchMarkets(e={}){const t=await this.publicGetGetValidPrimaryCurrencyCodes(e),i=await this.publicGetGetValidSecondaryCurrencyCodes(e),s=[];for(let e=0;e<t.length;e++){const a=t[e],r=this.safeCurrencyCode(a);for(let e=0;e<i.length;e++){const t=i[e],o=this.safeCurrencyCode(t),n=a+"/"+t,c=r+"/"+o;s.push({id:n,symbol:c,base:r,quote:o,baseId:a,quoteId:t,info:n,active:void 0,precision:this.precision,limits:this.limits})}}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetAccounts(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"CurrencyCode"),r=this.safeCurrencyCode(a),o=this.account();o.free=this.safeFloat(s,"AvailableBalance"),o.total=this.safeFloat(s,"TotalBalance"),i[r]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),a={primaryCurrencyCode:s.baseId,secondaryCurrencyCode:s.quoteId},r=await this.publicGetGetOrderBook(this.extend(a,i)),o=this.parse8601(this.safeString(r,"CreatedTimestampUtc"));return this.parseOrderBook(r,o,"BuyOrders","SellOrders","Price","Volume")}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"CreatedTimestampUtc"));let s=void 0;t&&(s=t.symbol);const a=this.safeFloat(e,"LastPrice");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"DayHighestPrice"),low:this.safeFloat(e,"DayLowestPrice"),bid:this.safeFloat(e,"CurrentHighestBidPrice"),bidVolume:void 0,ask:this.safeFloat(e,"CurrentLowestOfferPrice"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"DayAvgPrice"),baseVolume:this.safeFloat(e,"DayVolumeXbtInSecondaryCurrrency"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={primaryCurrencyCode:i.baseId,secondaryCurrencyCode:i.quoteId},a=await this.publicGetGetMarketSummary(this.extend(s,t));return this.parseTicker(a,i)}parseOrder(e,t){let i=void 0;const s=this.safeString(e,"PrimaryCurrencyCode"),a=this.safeString(e,"SecondaryCurrencyCode");let r=void 0,o=void 0;void 0!==s&&void 0!==a?(r=this.safeCurrencyCode(s),o=this.safeCurrencyCode(a),i=r+"/"+o):void 0!==t&&(i=t.symbol,r=t.base,o=t.quote);let n=this.safeString2(e,"Type","OrderType"),c=void 0;n.indexOf("Bid")>=0?c="buy":n.indexOf("Offer")>=0&&(c="sell"),n.indexOf("Market")>=0?n="market":n.indexOf("Limit")>=0&&(n="limit");const d=this.parse8601(this.safeString(e,"CreatedTimestampUtc")),h=this.safeFloat2(e,"VolumeOrdered","Volume");let l=this.safeFloat(e,"VolumeFilled"),u=this.safeFloat(e,"Outstanding");void 0===l&&void 0!==u&&void 0!==h&&(l=Math.max(0,h-u)),void 0===u&&void 0!==l&&void 0!==h&&(u=Math.max(0,h-l));const p=this.safeFloat(e,"FeePercent");let f=void 0;void 0!==p&&(f=p*l);const m={rate:p,cost:f,currency:r},v=this.safeString(e,"OrderGuid"),y=this.parseOrderStatus(this.safeString(e,"Status")),g=this.safeFloat(e,"Value"),b=this.safeFloat(e,"AvgPrice"),w=this.safeFloat(e,"Price",b);return{info:e,id:v,clientOrderId:void 0,timestamp:d,datetime:this.iso8601(d),lastTradeTimestamp:void 0,symbol:i,type:n,timeInForce:void 0,side:c,price:w,stopPrice:void 0,cost:g,average:b,amount:h,filled:l,remaining:u,status:y,fee:m,trades:void 0}}parseOrderStatus(e){return this.safeString({Open:"open",PartiallyFilled:"open",Filled:"closed",PartiallyFilledAndCancelled:"canceled",Cancelled:"canceled",PartiallyFilledAndExpired:"canceled",Expired:"canceled"},e,e)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=await this.privatePostGetOrderDetails(this.extend({orderGuid:e},i));let a=void 0;return void 0!==t&&(a=this.market(t)),this.parseOrder(s,a)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a=this.ordered({});let r=void 0;void 0!==e&&(r=this.market(e),a.primaryCurrencyCode=r.baseId,a.secondaryCurrencyCode=r.quoteId),void 0===i&&(i=50),a.pageIndex=1,a.pageSize=i;const o=await this.privatePostGetOpenOrders(this.extend(a,s)),n=this.safeValue(o,"Data",[]);return this.parseOrders(n,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const a=this.ordered({});let r=void 0;void 0!==e&&(r=this.market(e),a.primaryCurrencyCode=r.baseId,a.secondaryCurrencyCode=r.quoteId),void 0===i&&(i=50),a.pageIndex=1,a.pageSize=i;const o=await this.privatePostGetClosedOrders(this.extend(a,s)),n=this.safeValue(o,"Data",[]);return this.parseOrders(n,r,t,i)}async fetchMyTrades(e,t,i=50,s={}){await this.loadMarkets();const a=this.safeInteger(s,"pageIndex",1);void 0===i&&(i=50);const r=this.ordered({pageIndex:a,pageSize:i}),o=await this.privatePostGetTrades(this.extend(r,s));let n=void 0;return void 0!==e&&(n=this.market(e)),this.parseTrades(o.Data,n,t,i)}parseTrade(e,t){const i=this.parse8601(e.TradeTimestampUtc),s=this.safeString(e,"TradeGuid"),a=this.safeString(e,"OrderGuid"),r=this.safeFloat2(e,"Price","SecondaryCurrencyTradePrice"),o=this.safeFloat2(e,"VolumeTraded","PrimaryCurrencyAmount");let n=void 0;void 0!==r&&void 0!==o&&(n=r*o);let c=void 0;void 0!==t&&(c=t.symbol);let d=this.safeString(e,"OrderType");return void 0!==d&&(d.indexOf("Bid")>=0?d="buy":d.indexOf("Offer")>=0&&(d="sell")),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:c,order:a,type:void 0,side:d,takerOrMaker:void 0,price:r,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={primaryCurrencyCode:a.baseId,secondaryCurrencyCode:a.quoteId,numberOfRecentTradesToRetrieve:50},o=await this.publicGetGetRecentTrades(this.extend(r,s));return this.parseTrades(o.Trades,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n=this.capitalize(t),c="privatePostPlace"+n+"Order";let d=n;d+="sell"===i?"Offer":"Bid";const h=this.ordered({primaryCurrencyCode:o.baseId,secondaryCurrencyCode:o.quoteId,orderType:d});"limit"===t&&(h.price=a),h.volume=s;const l=await this[c](this.extend(h,r));return{info:l,id:l.OrderGuid}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderGuid:e};return await this.privatePostCancelOrder(this.extend(s,i))}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t]+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const e=this.nonce(),t=[o,"apiKey="+this.apiKey,"nonce="+e.toString()],i=Object.keys(s);for(let e=0;e<i.length;e++){const a=i[e],r=s[a].toString();t.push(a+"="+r)}const n=t.join(","),c=this.hmac(this.encode(n),this.encode(this.secret)),d=this.ordered({});d.apiKey=this.apiKey,d.nonce=e,d.signature=c.toUpperCase();for(let e=0;e<i.length;e++){const t=i[e];d[t]=s[t]}r=this.json(d),a={"Content-Type":"application/json"}}return{url:o,method:i,body:r,headers:a}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,InsufficientFunds:o,InvalidOrder:n,OrderNotFound:c,AuthenticationError:d,BadSymbol:h}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"indodax",name:"INDODAX",countries:["ID"],has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!1,fetchTime:!0,fetchTrades:!0,withdraw:!0},version:"2.0",urls:{logo:"https://user-images.githubusercontent.com/51840849/87070508-9358c880-c221-11ea-8dc5-5391afbbb422.jpg",api:{public:"https://indodax.com/api",private:"https://indodax.com/tapi"},www:"https://www.indodax.com",doc:"https://github.com/btcid/indodax-official-api-docs",referral:"https://indodax.com/ref/testbitcoincoid/1"},api:{public:{get:["server_time","pairs","{pair}/ticker","{pair}/trades","{pair}/depth"]},private:{post:["getInfo","transHistory","trade","tradeHistory","getOrder","openOrders","cancelOrder","orderHistory","withdrawCoin"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:.003}},exceptions:{exact:{invalid_pair:h,"Insufficient balance.":o,"invalid order.":c,"Invalid credentials. API not found or session has expired.":d,"Invalid credentials. Bad sign.":d},broad:{"Minimum price":n,"Minimum order":n}},options:{recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1},commonCurrencies:{STR:"XLM",BCHABC:"BCH",BCHSV:"BSV",DRK:"DASH",NEM:"XEM"}})}nonce(){return this.milliseconds()-this.options.timeDifference}async fetchTime(e={}){const t=await this.publicGetServerTime(e);return this.safeInteger(t,"server_time")}async loadTimeDifference(e={}){const t=await this.fetchTime(e),i=this.milliseconds();return this.options.timeDifference=i-t,this.options.timeDifference}async fetchMarkets(e={}){const t=await this.publicGetPairs(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"ticker_id"),r=this.safeString(s,"traded_currency"),o=this.safeString(s,"base_currency"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o),d=n+"/"+c,h=this.safeFloat(s,"trade_fee_percent"),l=!this.safeInteger(s,"is_maintenance"),u={amount:8,price:this.safeInteger(s,"price_round")},p={amount:{min:this.safeFloat(s,"trade_min_traded_currency"),max:void 0},price:{min:this.safeFloat(s,"trade_min_base_currency"),max:void 0},cost:{min:void 0,max:void 0}};i.push({id:a,symbol:d,base:n,quote:c,baseId:r,quoteId:o,taker:h,percentage:!0,precision:u,limits:p,info:s,active:l})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetInfo(e),i=this.safeValue(t,"return",{}),s=this.safeValue(i,"balance",{}),a=this.safeValue(i,"balance_hold",{}),r={info:t},o=Object.keys(s);for(let e=0;e<o.length;e++){const t=o[e],i=this.safeCurrencyCode(t),n=this.account();n.free=this.safeFloat(s,t),n.used=this.safeFloat(a,t),r[i]=n}return this.parseBalance(r)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)},a=await this.publicGetPairDepth(this.extend(s,i));return this.parseOrderBook(a,void 0,"buy","sell")}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},a=(await this.publicGetPairTicker(this.extend(s,t))).ticker,r=this.safeTimestamp(a,"server_time"),o="vol_"+i.baseId.toLowerCase(),n="vol_"+i.quoteId.toLowerCase(),c=this.safeFloat(a,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(a,"high"),low:this.safeFloat(a,"low"),bid:this.safeFloat(a,"buy"),bidVolume:void 0,ask:this.safeFloat(a,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(a,o),quoteVolume:this.safeFloat(a,n),info:a}}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid");let a=void 0;void 0!==t&&(a=t.symbol);const r=this.safeString(e,"type"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let c=void 0;return void 0!==o&&void 0!==n&&(c=o*n),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:a,type:void 0,side:r,order:void 0,takerOrMaker:void 0,price:o,amount:n,cost:c,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={pair:a.id},o=await this.publicGetPairTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseOrderStatus(e){return this.safeString({open:"open",filled:"closed",cancelled:"canceled"},e,e)}parseOrder(e,t){let i=void 0;"type"in e&&(i=e.type);const s=this.parseOrderStatus(this.safeString(e,"status","open"));let a=void 0,r=void 0;const o=this.safeFloat(e,"price");let n=void 0,c=void 0,d=void 0;if(void 0!==t){a=t.symbol;let i=t.quoteId,s=t.baseId;if("idr"===t.quoteId&&"order_rp"in e&&(i="rp"),"idr"===t.baseId&&"remain_rp"in e&&(s="rp"),r=this.safeFloat(e,"order_"+i),r){n=r/o;const t=this.safeFloat(e,"remain_"+i);void 0!==t&&(c=t/o,d=n-c)}else n=this.safeFloat(e,"order_"+s),r=o*n,c=this.safeFloat(e,"remain_"+s),d=n-c}let h=void 0;d&&(h=r/d);const l=this.safeInteger(e,"submit_time");return{info:e,id:this.safeString(e,"order_id"),clientOrderId:void 0,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,symbol:a,type:"limit",timeInForce:void 0,side:i,price:o,stopPrice:void 0,cost:r,average:h,amount:n,filled:d,remaining:c,status:s,fee:void 0,trades:void 0}}async fetchOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" fetchOrder requires a symbol");await this.loadMarkets();const s=this.market(t),a={pair:s.id,order_id:e},o=await this.privatePostGetOrder(this.extend(a,i)),n=o.return,c=this.parseOrder(this.extend({id:e},n.order),s);return this.extend({info:o},c)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.market(e),r.pair=a.id);const o=(await this.privatePostOpenOrders(this.extend(r,s))).return.orders;if(!o)return[];if(void 0!==e)return this.parseOrders(o,a,t,i);const n=Object.keys(o);let c=[];for(let e=0;e<n.length;e++){const s=n[e],r=o[s];a=this.markets_by_id[s];const d=this.parseOrders(r,a,t,i);c=this.arrayConcat(c,d)}return c}async fetchClosedOrders(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();const a={};let o=void 0;void 0!==e&&(o=this.market(e),a.pair=o.id);const n=await this.privatePostOrderHistory(this.extend(a,s));let c=this.parseOrders(n.return.orders,o);return c=this.filterBy(c,"status","closed"),this.filterBySymbolSinceLimit(c,e,t,i)}async createOrder(e,t,i,s,r,o={}){if("limit"!==t)throw new a(this.id+" allows limit orders only");await this.loadMarkets();const n=this.market(e),c={pair:n.id,type:i,price:r},d=n.baseId;"buy"===i?c[n.quoteId]=s*r:c[n.baseId]=s,c[d]=s;const h=await this.privatePostTrade(this.extend(c,o)),l=this.safeValue(h,"return",{});return{info:h,id:this.safeString(l,"order_id")}}async cancelOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" cancelOrder requires a symbol argument");const s=this.safeValue(i,"side");if(void 0===s)throw new r(this.id+' cancelOrder requires an extra "side" param');await this.loadMarkets();const a={order_id:e,pair:this.market(t).id,type:s};return await this.privatePostCancelOrder(this.extend(a,i))}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e),o=this.milliseconds(),n={currency:r.id,withdraw_amount:t,withdraw_address:i,request_id:o.toString()};s&&(n.withdraw_memo=s);const c=await this.privatePostWithdrawCoin(this.extend(n,a));let d=void 0;return"txid"in c&&c.txid.length>0&&(d=c.txid),{info:c,id:d}}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t];return"public"===t?o+="/"+this.implodeParams(e,s):(this.checkRequiredCredentials(),r=this.urlencode(this.extend({method:e,timestamp:this.nonce(),recvWindow:this.options.recvWindow},s)),a={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(r),this.encode(this.secret),"sha512")}),{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n)return;if(Array.isArray(n))return;const h=this.safeValue(n,"error","");if(!("success"in n)&&""===h)return;if(1===this.safeInteger(n,"success",0)){if("return"in n)return;throw new a(this.id+": malformed response: "+this.json(n))}const l=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,h,l),this.throwBroadlyMatchedException(this.exceptions.broad,h,l),new a(l)}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,AuthenticationError:r,ArgumentsRequired:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"itbit",name:"itBit",countries:["US"],rateLimit:2e3,version:"v1",has:{cancelOrder:!0,CORS:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,fetchTransactions:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27822159-66153620-60ad-11e7-89e7-005f6d7f3de0.jpg",api:"https://api.itbit.com",www:"https://www.itbit.com",doc:["https://api.itbit.com/docs","https://www.itbit.com/api"]},api:{public:{get:["markets/{symbol}/ticker","markets/{symbol}/order_book","markets/{symbol}/trades"]},private:{get:["wallets","wallets/{walletId}","wallets/{walletId}/balances/{currencyCode}","wallets/{walletId}/funding_history","wallets/{walletId}/trades","wallets/{walletId}/orders","wallets/{walletId}/orders/{id}"],post:["wallet_transfers","wallets","wallets/{walletId}/cryptocurrency_deposits","wallets/{walletId}/cryptocurrency_withdrawals","wallets/{walletId}/orders","wire_withdrawal"],delete:["wallets/{walletId}/orders/{id}"]}},markets:{"BTC/USD":{id:"XBTUSD",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"XBT",quoteId:"USD"},"BTC/SGD":{id:"XBTSGD",symbol:"BTC/SGD",base:"BTC",quote:"SGD",baseId:"XBT",quoteId:"SGD"},"BTC/EUR":{id:"XBTEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"XBT",quoteId:"EUR"},"ETH/USD":{id:"ETHUSD",symbol:"ETH/USD",base:"ETH",quote:"USD",baseId:"ETH",quoteId:"USD"},"ETH/EUR":{id:"ETHEUR",symbol:"ETH/EUR",base:"ETH",quote:"EUR",baseId:"ETH",quoteId:"EUR"},"ETH/SGD":{id:"ETHSGD",symbol:"ETH/SGD",base:"ETH",quote:"SGD",baseId:"ETH",quoteId:"SGD"},PAXGUSD:{id:"PAXGUSD",symbol:"PAXG/USD",base:"PAXG",quote:"USD",baseId:"PAXG",quoteId:"USD"},BCHUSD:{id:"BCHUSD",symbol:"BCH/USD",base:"BCH",quote:"USD",baseId:"BCH",quoteId:"USD"},LTCUSD:{id:"LTCUSD",symbol:"LTC/USD",base:"LTC",quote:"USD",baseId:"LTC",quoteId:"USD"}},fees:{trading:{maker:-3e-4,taker:.35/100}},commonCurrencies:{XBT:"BTC"}})}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)},a=await this.publicGetMarketsSymbolOrderBook(this.extend(s,i));return this.parseOrderBook(a)}async fetchTicker(e,t={}){await this.loadMarkets();const i={symbol:this.marketId(e)},s=await this.publicGetMarketsSymbolTicker(this.extend(i,t)),r=this.safeString(s,"serverTimeUTC");if(!r)throw new a(this.id+" fetchTicker returned a bad response: "+this.json(s));const o=this.parse8601(r),n=this.safeFloat(s,"vwap24h"),c=this.safeFloat(s,"volume24h");let d=void 0;void 0!==c&&void 0!==n&&(d=c*n);const h=this.safeFloat(s,"lastPrice");return{symbol:e,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(s,"high24h"),low:this.safeFloat(s,"low24h"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:n,open:this.safeFloat(s,"openToday"),close:h,last:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:c,quoteVolume:d,info:s}}parseTrade(e,t){const i=this.safeString2(e,"executionId","matchNumber"),s=this.parse8601(this.safeString(e,"timestamp")),a=this.safeString(e,"direction"),r=this.safeString(e,"orderId");let o=this.safeFloat(e,"commissionPaid");const n=this.safeString(e,"commissionCurrency"),c=this.safeCurrencyCode(n);let d=this.safeFloat(e,"rebatesApplied");void 0!==d&&(d=-d);const h=this.safeString(e,"rebateCurrency"),l=this.safeCurrencyCode(h),u=this.safeFloat2(e,"price","rate"),p=this.safeFloat2(e,"currency1Amount","amount");let f=void 0;void 0!==u&&void 0!==p&&(f=u*p);let m=void 0;const v=this.safeString(e,"instrument");if(void 0!==v)if(v in this.markets_by_id)t=this.markets_by_id[v];else{const t=this.safeString(e,"currency1"),i=this.safeString(e,"currency2");m=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}void 0===m&&void 0!==t&&(m=t.symbol);const y={info:e,id:i,timestamp:s,datetime:this.iso8601(s),symbol:m,order:r,type:void 0,side:a,takerOrMaker:void 0,price:u,amount:p,cost:f,fee:void 0};return void 0!==o&&(void 0!==d?c===l?(o=this.sum(o,d),y.fee={cost:o,currency:c}):y.fees=[{cost:o,currency:c},{cost:d,currency:l}]:y.fee={cost:o,currency:c}),"fee"in y||"fees"in y||(y.fee=void 0),y}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const a=this.safeString(s,"walletId");if(void 0===a)throw new o(this.id+" fetchMyTrades requires a walletId parameter");const r={walletId:a};void 0!==i&&(r.perPage=i);const n=(await this.privateGetWalletsWalletIdFundingHistory(this.extend(r,s))).fundingHistory,c=[];for(let e=0;e<n.length;e++){const t=n[e],i=this.safeString(t,"time"),s=this.parse8601(i),a=this.safeString(t,"currency"),r=this.safeString(t,"destinationAddress"),o=this.safeString(t,"txnHash"),d=this.safeStringLower(t,"transactionType"),h=this.safeString(t,"status"),l=this.parseTransferStatus(h);c.push({id:this.safeString(t,"withdrawalId"),timestamp:s,datetime:this.iso8601(s),currency:this.safeCurrencyCode(a),address:r,tag:void 0,txid:o,type:d,status:l,amount:this.safeFloat(t,"amount"),fee:void 0,info:t})}return c}parseTransferStatus(e){return this.safeString({cancelled:"canceled",completed:"ok"},e,"pending")}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r=this.safeString(s,"walletId");if(void 0===r)throw new a(this.id+" fetchMyTrades requires a walletId parameter");const o={walletId:r};void 0!==t&&(o.rangeStart=this.ymdhms(t,"T")),void 0!==i&&(o.perPage=i);const n=await this.privateGetWalletsWalletIdTrades(this.extend(o,s)),c=this.safeValue(n,"tradingHistory",[]);let d=void 0;return void 0!==e&&(d=this.market(e)),this.parseTrades(c,d,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id},o=await this.publicGetMarketsSymbolTrades(this.extend(r,s)),n=this.safeValue(o,"recentTrades",[]);return this.parseTrades(n,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.fetchWallets(e),i=t[0].balances,s={info:t};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"currency"),r=this.safeCurrencyCode(a),o=this.account();o.free=this.safeFloat(t,"availableBalance"),o.total=this.safeFloat(t,"totalBalance"),s[r]=o}return this.parseBalance(s)}async fetchWallets(e={}){if(await this.loadMarkets(),!this.uid)throw new r(this.id+" fetchWallets requires uid API credential");const t={userId:this.uid};return await this.privateGetWallets(this.extend(t,e))}async fetchWallet(e,t={}){await this.loadMarkets();const i={walletId:e};return await this.privateGetWalletsWalletId(this.extend(i,t))}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"open"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"filled"},s))}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));if(!("walletId"in s))throw new a(this.id+" fetchOrders requires a walletId parameter");const o={walletId:s.walletId},n=await this.privateGetWalletsWalletIdOrders(this.extend(o,s));return this.parseOrders(n,r,t,i)}parseOrderStatus(e){return this.safeString({submitted:"open",open:"open",filled:"closed",cancelled:"canceled",rejected:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"side"),s=this.safeString(e,"type"),a=this.markets_by_id[e.instrument].symbol,r=this.parse8601(e.createdTime),o=this.safeFloat(e,"amount"),n=this.safeFloat(e,"amountFilled");let c=void 0,d=void 0;const h=this.safeFloat(e,"price"),l=this.safeFloat(e,"volumeWeightedAveragePrice");void 0!==n&&(void 0!==o&&(c=o-n),void 0!==l&&(d=n*l));const u=this.safeString(e,"clientOrderIdentifier");return{id:this.safeString(e,"id"),clientOrderId:u,info:e,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:this.parseOrderStatus(this.safeString(e,"status")),symbol:a,type:s,timeInForce:void 0,side:i,price:h,stopPrice:void 0,cost:d,average:l,amount:o,filled:n,remaining:c,fee:void 0,trades:void 0}}nonce(){return this.milliseconds()}async createOrder(e,t,i,s,r,o={}){if(await this.loadMarkets(),"market"===t)throw new a(this.id+" allows limit orders only");if(!("walletId"in o))throw new a(this.id+" createOrder requires a walletId parameter");s=s.toString(),r=r.toString();const n=this.market(e),c={side:i,type:t,currency:n.id.replace(n.quote,""),amount:s,display:s,price:r,instrument:n.id},d=await this.privatePostWalletsWalletIdOrders(this.extend(c,o));return{info:d,id:d.id}}async fetchOrder(e,t,i={}){await this.loadMarkets();if(!("walletId"in i))throw new a(this.id+" fetchOrder requires a walletId parameter");const s={id:e},r=await this.privateGetWalletsWalletIdOrdersId(this.extend(s,i));return this.parseOrder(r)}async cancelOrder(e,t,i={}){if(!("walletId"in i))throw new a(this.id+" cancelOrder requires a walletId parameter");const s={id:e};return await this.privateDeleteWalletsWalletIdOrdersId(this.extend(s,i))}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n)),"POST"===i&&Object.keys(n).length&&(r=this.json(n)),"private"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t=e,s=[i,o,"POST"===i?r:"",e,t],n=e+this.json(s).replace("\\/","/"),c=this.hash(this.encode(n),"sha256","binary"),d=this.stringToBinary(this.encode(o)),h=this.binaryConcat(d,c),l=this.hmac(h,this.encode(this.secret),"sha512","base64");a={Authorization:this.apiKey+":"+l,"Content-Type":"application/json","X-Auth-Timestamp":t,"X-Auth-Nonce":e}}return{url:o,method:i,body:r,headers:a}}async request(e,t="public",i="GET",s={},r,o){const n=await this.fetch2(e,t,i,s,r,o);if("code"in n)throw new a(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1),{BadSymbol:a,ExchangeNotAvailable:r,ArgumentsRequired:o,PermissionDenied:n,AuthenticationError:c,ExchangeError:d,OrderNotFound:h,DDoSProtection:l,InvalidNonce:u,InsufficientFunds:p,CancelPending:f,InvalidOrder:m,InvalidAddress:v}=i(0),{TRUNCATE:y,DECIMAL_PLACES:g}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kraken",name:"Kraken",countries:["US"],version:"0",rateLimit:3e3,certified:!0,pro:!0,has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchLedgerEntry:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:"emulated",fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchWithdrawals:!0,withdraw:!0},marketsByAltname:{},timeframes:{"1m":1,"5m":5,"15m":15,"30m":30,"1h":60,"4h":240,"1d":1440,"1w":10080,"2w":21600},urls:{logo:"https://user-images.githubusercontent.com/51840849/76173629-fc67fb00-61b1-11ea-84fe-f2de582f58a3.jpg",api:{public:"https://api.kraken.com",private:"https://api.kraken.com",zendesk:"https://kraken.zendesk.com/api/v2/help_center/en-us/articles"},www:"https://www.kraken.com",doc:"https://www.kraken.com/features/api",fees:"https://www.kraken.com/en-us/features/fee-schedule"},fees:{trading:{tierBased:!0,percentage:!0,taker:.0026,maker:.0016,tiers:{taker:[[0,.0026],[5e4,.0024],[1e5,.0022],[25e4,.002],[5e5,.0018],[1e6,.0016],[25e5,.0014],[5e6,.0012],[1e7,1e-4]],maker:[[0,.0016],[5e4,.0014],[1e5,.0012],[25e4,.001],[5e5,8e-4],[1e6,6e-4],[25e5,4e-4],[5e6,2e-4],[1e7,0]]}},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,ETH:.005,XRP:.02,XLM:2e-5,LTC:.02,DOGE:2,ZEC:1e-4,ICN:.02,REP:.01,ETC:.005,MLN:.003,XMR:.05,DASH:.005,GNO:.01,EOS:.5,BCH:.001,XTZ:.05,USD:5,EUR:5,CAD:10,JPY:300},deposit:{BTC:0,ETH:0,XRP:0,XLM:0,LTC:0,DOGE:0,ZEC:0,ICN:0,REP:0,ETC:0,MLN:0,XMR:0,DASH:0,GNO:0,EOS:0,BCH:0,XTZ:.05,USD:5,EUR:0,CAD:5,JPY:0}}},api:{zendesk:{get:["360000292886","201893608"]},public:{get:["Assets","AssetPairs","Depth","OHLC","Spread","Ticker","Time","Trades"]},private:{post:["AddOrder","AddExport","Balance","CancelOrder","ClosedOrders","DepositAddresses","DepositMethods","DepositStatus","ExportStatus","GetWebSocketsToken","Ledgers","OpenOrders","OpenPositions","QueryLedgers","QueryOrders","QueryTrades","RetrieveExport","RemoveExport","TradeBalance","TradesHistory","TradeVolume","Withdraw","WithdrawCancel","WithdrawInfo","WithdrawStatus"]}},commonCurrencies:{XBT:"BTC",XDG:"DOGE",REPV2:"REP",REP:"REPV1"},options:{cacheDepositMethodsOnFetchDepositAddress:!0,depositMethods:{},delistedMarketsById:{},inactiveCurrencies:["CAD","USD","JPY","GBP"]},exceptions:{"EQuery:Invalid asset pair":a,"EAPI:Invalid key":c,"EFunding:Unknown withdraw key":d,"EFunding:Invalid amount":p,"EService:Unavailable":r,"EDatabase:Internal error":r,"EService:Busy":r,"EQuery:Unknown asset":d,"EAPI:Rate limit exceeded":l,"EOrder:Rate limit exceeded":l,"EGeneral:Internal error":r,"EGeneral:Temporary lockout":l,"EGeneral:Permission denied":n,"EOrder:Unknown order":m,"EOrder:Order minimum not met":m}})}costToPrecision(e,t){return this.decimalToPrecision(t,y,this.markets[e].precision.price,g)}feeToPrecision(e,t){return this.decimalToPrecision(t,y,this.markets[e].precision.amount,g)}async fetchMarkets(e={}){const t=await this.publicGetAssetPairs(e),i=Object.keys(t.result);let s=[];for(let e=0;e<i.length;e++){const a=i[e],r=t.result[a],o=r.base,n=r.quote,c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=a.indexOf(".d")>=0,l=h?r.altname:c+"/"+d;let u=void 0;"fees_maker"in r&&(u=parseFloat(r.fees_maker[0][1])/100);const p={amount:r.lot_decimals,price:r.pair_decimals},f=this.safeFloat(r,"ordermin");s.push({id:a,symbol:l,base:c,quote:d,baseId:o,quoteId:n,darkpool:h,info:r,altname:r.altname,maker:u,taker:parseFloat(r.fees[0][1])/100,active:!0,precision:p,limits:{amount:{min:f,max:Math.pow(10,p.amount)},price:{min:Math.pow(10,-p.price),max:void 0},cost:{min:0,max:void 0}}})}return s=this.appendInactiveMarkets(s),this.marketsByAltname=this.indexBy(s,"altname"),s}safeCurrencyCode(e,t){return e.length>3&&(0!==e.indexOf("X")&&0!==e.indexOf("Z")||(e=e.slice(1))),super.safeCurrencyCode(e,t)}appendInactiveMarkets(e){const t={amount:8,price:8},i={min:0,max:void 0},s={min:Math.pow(10,-t.price),max:void 0},a={darkpool:!1,info:void 0,maker:void 0,taker:void 0,active:!1,precision:t,limits:{amount:{min:Math.pow(10,-t.amount),max:Math.pow(10,t.amount)},price:s,cost:i}},r=[];for(let t=0;t<r.length;t++)e.push(this.extend(a,r[t]));return e}async fetchCurrencies(e={}){const t=await this.publicGetAssets(e),i=this.safeValue(t,"result"),s=Object.keys(i),a={};for(let e=0;e<s.length;e++){const t=s[e],r=i[t],o=this.safeCurrencyCode(this.safeString(r,"altname")),n=this.safeInteger(r,"decimals"),c=!this.inArray(o,this.options.inactiveCurrencies);a[o]={id:t,code:o,info:r,name:o,active:c,fee:void 0,precision:n,limits:{amount:{min:Math.pow(10,-n),max:Math.pow(10,n)},price:{min:Math.pow(10,-n),max:Math.pow(10,n)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,n)}}}}return a}async fetchTradingFees(e={}){await this.loadMarkets(),this.checkRequiredCredentials();const t=await this.privatePostTradeVolume(e),i=this.safeFloat(t.result,"volume"),s=this.fees.trading.tiers;let a=s.taker[1],r=s.maker[1];for(let e=0;e<s.taker.length;e++)i>=s.taker[e][0]&&(a=s.taker[e][1]);for(let e=0;e<s.maker.length;e++)i>=s.maker[e][0]&&(r=s.maker[e][1]);return{info:t,maker:r,taker:a}}parseBidAsk(e,t=0,i=1){return[this.safeFloat(e,t),this.safeFloat(e,i),this.safeInteger(e,2)]}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e);if(s.darkpool)throw new d(this.id+" does not provide an order book for darkpool symbol "+e);const a={pair:s.id};void 0!==t&&(a.count=t);const r=await this.publicGetDepth(this.extend(a,i)),o=this.safeValue(r,"result",{}),n=this.safeValue(o,s.id);return this.parseOrderBook(n)}parseTicker(e,t){const i=this.milliseconds();let s=void 0;t&&(s=t.symbol);const a=parseFloat(e.v[1]),r=parseFloat(e.p[1]);let o=void 0;void 0!==a&&void 0!==r&&(o=a*r);const n=parseFloat(e.c[0]);return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.h[1]),low:parseFloat(e.l[1]),bid:parseFloat(e.b[0]),bidVolume:void 0,ask:parseFloat(e.a[0]),askVolume:void 0,vwap:r,open:this.safeFloat(e,"o"),close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:o,info:e}}async fetchTickers(e,t={}){await this.loadMarkets(),e=void 0===e?this.symbols:e;const i=[];for(let t=0;t<e.length;t++){const s=e[t],a=this.markets[s];a.active&&!a.darkpool&&i.push(a.id)}const s={pair:i.join(",")},a=(await this.publicGetTicker(this.extend(s,t))).result,r=Object.keys(a),o={};for(let e=0;e<r.length;e++){const t=r[e],i=this.markets_by_id[t],s=i.symbol,n=a[t];o[s]=this.parseTicker(n,i)}return this.filterByArray(o,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();if(e.indexOf(".d")>=0)throw new d(this.id+" does not provide a ticker for darkpool symbol "+e);const i=this.market(e),s={pair:i.id},a=(await this.publicGetTicker(this.extend(s,t))).result[i.id];return this.parseTicker(a,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,6)]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={pair:r.id,interval:this.timeframes[t]};void 0!==i&&(o.since=parseInt((i-1)/1e3));const n=await this.publicGetOHLC(this.extend(o,a)),c=this.safeValue(n,"result",{}),d=this.safeValue(c,r.id,[]);return this.parseOHLCVs(d,r,t,i,s)}parseLedgerEntryType(e){return this.safeString({trade:"trade",withdrawal:"transaction",deposit:"transaction",transfer:"transfer",margin:"margin"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"id");let s=void 0;const a=this.safeString(e,"refid"),r=this.parseLedgerEntryType(this.safeString(e,"type")),o=this.safeCurrencyCode(this.safeString(e,"asset"),t);let n=this.safeFloat(e,"amount");n<0?(s="out",n=Math.abs(n)):s="in";const c=this.safeFloat(e,"time");let d=void 0;void 0!==c&&(d=parseInt(1e3*c));const h={cost:this.safeFloat(e,"fee"),currency:o};return{info:e,id:i,direction:s,account:void 0,referenceId:a,referenceAccount:void 0,type:r,currency:o,amount:n,before:void 0,after:this.safeFloat(e,"balance"),status:"ok",timestamp:d,datetime:this.iso8601(d),fee:h}}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.asset=r.id),void 0!==t&&(a.start=parseInt(t/1e3));const o=await this.privatePostLedgers(this.extend(a,s)),n=this.safeValue(o,"result",{}),c=this.safeValue(n,"ledger",{}),d=Object.keys(c),h=[];for(let e=0;e<d.length;e++){const t=d[e],i=c[t];i.id=t,h.push(i)}return this.parseLedger(h,r,t,i)}async fetchLedgerEntriesByIds(e,t,i={}){await this.loadMarkets(),e=e.join(",");const s=this.extend({id:e},i),a=(await this.privatePostQueryLedgers(s)).result,r=Object.keys(a),o=[];for(let e=0;e<r.length;e++){const t=r[e],i=a[t];i.id=t,o.push(i)}return this.parseLedger(o)}async fetchLedgerEntry(e,t,i={}){return(await this.fetchLedgerEntriesByIds([e],t,i))[0]}parseTrade(e,t){let i=void 0,s=void 0,a=void 0,r=void 0,o=void 0,n=void 0,c=void 0,d=void 0,h=void 0,l=void 0;if(Array.isArray(e)){i=this.safeTimestamp(e,2),s="s"===e[3]?"sell":"buy",a="l"===e[4]?"limit":"market",r=this.safeFloat(e,0),o=this.safeFloat(e,1);e.length>6&&(c=this.safeString(e,6))}else if("string"==typeof e)c=e;else if("ordertxid"in e){const n=this.safeString(e,"pair"),l=this.findMarketByAltnameOrId(n);if(void 0!==l?t=l:void 0!==n&&(t=this.getDelistedMarketById(n)),d=e.ordertxid,c=this.safeString2(e,"id","postxid"),i=this.safeTimestamp(e,"time"),s=this.safeString(e,"type"),a=this.safeString(e,"ordertype"),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"vol"),"fee"in e){let i=void 0;void 0!==t&&(i=t.quote),h={cost:this.safeFloat(e,"fee"),currency:i}}}return void 0!==t&&(l=t.symbol),void 0!==r&&void 0!==o&&(n=r*o),{id:c,order:d,info:e,timestamp:i,datetime:this.iso8601(i),symbol:l,type:a,side:s,takerOrMaker:void 0,price:r,amount:o,cost:n,fee:h}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r=a.id,o={pair:r};if(void 0!==t&&(o.since=1e6*t,o.since=t.toString()+"000000"),void 0!==i&&1e3!==i){if(this.safeValue(this.options,"fetchTradesWarning",!0))throw new d(this.id+" fetchTrades() cannot serve "+i.toString()+" trades without breaking the pagination, see https://github.com/ccxt/ccxt/issues/5698 for more details. Set exchange.options['fetchTradesWarning'] to acknowledge this warning and silence it.")}const n=(await this.publicGetTrades(this.extend(o,s))).result,c=n[r],h=c.length;if(h<=0)return[];const l=c[h-1],u=this.safeString(n,"last");return l.push(u),this.parseTrades(c,a,t,i)}async fetchBalance(e={}){const t=await this.privatePostBalance(e),i=this.safeValue(t,"result",{}),s={info:i},a=Object.keys(i);for(let e=0;e<a.length;e++){const t=a[e],r=this.safeCurrencyCode(t),o=this.account();o.total=this.safeFloat(i,t),s[r]=o}return this.parseBalance(s)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o={pair:this.market(e).id,type:i,ordertype:t,volume:this.amountToPrecision(e,s)},n=this.safeString2(r,"userref","clientOrderId"),c=this.omit(r,["userref","clientOrderId"]);void 0!==n&&(o.userref=n);("limit"===t||!("market"===t)&&void 0!==a)&&(o.price=this.priceToPrecision(e,a));const d=await this.privatePostAddOrder(this.extend(o,c)),h=this.safeValue(d,"result");return this.parseOrder(h)}findMarketByAltnameOrId(e){return e in this.marketsByAltname?this.marketsByAltname[e]:e in this.markets_by_id?this.markets_by_id[e]:void 0}getDelistedMarketById(e){if(void 0===e)return e;let t=this.safeValue(this.options.delistedMarketsById,e);if(void 0!==t)return t;let i=3,s=3,a=6;8===e.length?(i=4,s=4,a=8):7===e.length&&(i=4,s=4,a=7);const r=e.slice(0,i),o=e.slice(s,a),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o);return t={symbol:n+"/"+c,base:n,quote:c,baseId:r,quoteId:o},this.options.delistedMarketsById[e]=t,t}parseOrderStatus(e){return this.safeString({pending:"open",open:"open",closed:"closed",canceled:"canceled",expired:"expired"},e,e)}parseOrder(e,t){const i=this.safeValue(e,"descr",{}),s=this.safeString(i,"order");let a=void 0,r=void 0,o=void 0,n=void 0,c=void 0;if(void 0!==s){const e=s.split(" ");a=this.safeString(e,0),c=this.safeFloat(e,1),o=this.safeString(e,2),r=this.safeString(e,4),n=this.safeFloat(e,5)}a=this.safeString(i,"type",a),r=this.safeString(i,"ordertype",r),o=this.safeString(i,"pair",o);const d=this.findMarketByAltnameOrId(o);let h=void 0;void 0!==d?t=d:void 0!==o&&(t=this.getDelistedMarketById(o));const l=this.safeTimestamp(e,"opentm");c=this.safeFloat(e,"vol",c);const u=this.safeFloat(e,"vol_exec");let p=void 0;void 0!==c&&void 0!==u&&(p=c-u);let f=void 0;const m=this.safeFloat(e,"cost");n=this.safeFloat(i,"price",n),void 0!==n&&0!==n||(n=this.safeFloat(i,"price2")),void 0!==n&&0!==n||(n=this.safeFloat(e,"price",n));const v=this.safeFloat(e,"price");if(void 0!==t&&(h=t.symbol,"fee"in e)){const i=e.oflags;f={cost:this.safeFloat(e,"fee"),rate:void 0},i.indexOf("fciq")>=0?f.currency=t.quote:i.indexOf("fcib")>=0&&(f.currency=t.base)}const y=this.parseOrderStatus(this.safeString(e,"status"));let g=this.safeString(e,"id");if(void 0===g){const t=this.safeValue(e,"txid");g=this.safeString(t,0)}const b=this.safeString(e,"userref"),w=this.safeValue(e,"trades");let k=void 0;void 0!==w&&(k=this.parseTrades(w,t,void 0,void 0,{order:g}));const x=this.safeFloat(e,"stopprice");return{id:g,clientOrderId:b,info:e,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,status:y,symbol:h,type:r,timeInForce:void 0,side:a,price:n,stopPrice:x,cost:m,amount:c,filled:u,average:v,remaining:p,fee:f,trades:k}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=this.safeValue2(i,"userref","clientOrderId"),a={trades:!0};let r=i;void 0!==s?(a.userref=s,r=this.omit(i,["userref","clientOrderId"])):a.txid=e;const o=await this.privatePostQueryOrders(this.extend(a,r)),n=this.safeValue(o,"result",[]),c=this.parseOrder(this.extend({id:e},n[e]));return this.extend({info:o},c)}async fetchOrderTrades(e,t,i,s,a={}){const r=this.safeValue(a,"trades"),n=[];if(void 0===r)throw new o(this.id+" fetchOrderTrades requires a unified order structure in the params argument or a 'trades' param (an array of trade id strings)");for(let e=0;e<r.length;e++){const t=r[e];"string"==typeof t?n.push(t):n.push(t.id)}await this.loadMarkets();const c=this.safeValue(this.options,"fetchOrderTrades",{}),d=this.safeInteger(c,"batchSize",20);let h=parseInt(n/d);h=this.sum(h,1);const l=n.length;let u=[];for(let e=0;e<h;e++){const a=[];for(let t=0;t<d;t++){const i=this.sum(e*d,t);i<l&&a.push(n[i])}const r={txid:a.join(",")},o=await this.privatePostQueryTrades(r),c=this.safeValue(o,"result"),h=Object.keys(c);for(let e=0;e<h.length;e++)c[h[e]].id=h[e];const p=this.parseTrades(c,void 0,i,s),f=this.filterBySymbol(p,t);u=this.arrayConcat(u,f)}return u}async fetchOrdersByIds(e,t,i={}){await this.loadMarkets();const s=await this.privatePostQueryOrders(this.extend({trades:!0,txid:e.join(",")},i)),a=this.safeValue(s,"result",{}),r=[],o=Object.keys(a);for(let e=0;e<o.length;e++){const t=o[e],i=a[t],s=this.parseOrder(this.extend({id:t},i));r.push(s)}return r}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={};void 0!==t&&(a.start=parseInt(t/1e3));const r=(await this.privatePostTradesHistory(this.extend(a,s))).result.trades,o=Object.keys(r);for(let e=0;e<o.length;e++)r[o[e]].id=o[e];let n=void 0;return void 0!==e&&(n=this.market(e)),this.parseTrades(r,n,t,i)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=void 0;try{s=await this.privatePostCancelOrder(this.extend({txid:e},i))}catch(e){if(this.last_http_response&&this.last_http_response.indexOf("EOrder:Unknown order")>=0)throw new h(this.id+" cancelOrder() error "+this.last_http_response);throw e}return s}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a={};void 0!==t&&(a.start=parseInt(t/1e3));const r=await this.privatePostOpenOrders(this.extend(a,s));let o=void 0;void 0!==e&&(o=this.market(e));const n=this.safeValue(r,"result",{}),c=this.safeValue(n,"open",[]);return this.parseOrders(c,o,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const a={};void 0!==t&&(a.start=parseInt(t/1e3));const r=await this.privatePostClosedOrders(this.extend(a,s));let o=void 0;void 0!==e&&(o=this.market(e));const n=this.safeValue(r,"result",{}),c=this.safeValue(n,"closed",[]);return this.parseOrders(c,o,t,i)}async fetchDepositMethods(e,t={}){await this.loadMarkets();const i={asset:this.currency(e).id},s=await this.privatePostDepositMethods(this.extend(i,t));return this.safeValue(s,"result")}parseTransactionStatus(e){return this.safeString({Initial:"pending",Pending:"pending",Success:"ok",Settled:"pending",Failure:"failed",Partial:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"refid"),s=this.safeString(e,"txid"),a=this.safeTimestamp(e,"time"),r=this.safeString(e,"asset"),o=this.safeCurrencyCode(r,t),n=this.safeString(e,"info"),c=this.safeFloat(e,"amount"),d=this.parseTransactionStatus(this.safeString(e,"status")),h=this.safeString(e,"type");let l=this.safeFloat(e,"fee");return void 0===l&&"deposit"===h&&(l=0),{info:e,id:i,currency:o,amount:c,address:n,tag:void 0,status:d,type:h,updated:void 0,txid:s,timestamp:a,datetime:this.iso8601(a),fee:{currency:o,cost:l}}}parseTransactionsByType(e,t,i,s,a){const r=[];for(let i=0;i<t.length;i++){const s=this.parseTransaction(this.extend({type:e},t[i]));r.push(s)}return this.filterByCurrencySinceLimit(r,i,s,a)}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchDeposits requires a currency code argument");await this.loadMarkets();const a={asset:this.currency(e).id},r=await this.privatePostDepositStatus(this.extend(a,s));return this.parseTransactionsByType("deposit",r.result,e,t,i)}async fetchTime(e={}){const t=await this.publicGetTime(e),i=this.safeValue(t,"result",{});return this.safeTimestamp(i,"unixtime")}async fetchWithdrawals(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchWithdrawals requires a currency code argument");await this.loadMarkets();const a={asset:this.currency(e).id},r=await this.privatePostWithdrawStatus(this.extend(a,s));return this.parseTransactionsByType("withdrawal",r.result,e,t,i)}async createDepositAddress(e,t={}){const i=await this.fetchDepositAddress(e,this.extend({new:"true"},t)),s=this.safeString(i,"address");return this.checkAddress(s),{currency:e,address:s,info:i}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e);let s=this.safeString(t,"method");if(void 0===s){if(!this.options.cacheDepositMethodsOnFetchDepositAddress)throw new o(this.id+' fetchDepositAddress() requires an extra `method` parameter. Use fetchDepositMethods ("'+e+'") to get a list of available deposit methods or enable the exchange property .options["cacheDepositMethodsOnFetchDepositAddress"] = true');e in this.options.depositMethods||(this.options.depositMethods[e]=await this.fetchDepositMethods(e)),s=this.options.depositMethods[e][0].method}const a={asset:i.id,method:s},r=await this.privatePostDepositAddresses(this.extend(a,t)),n=r.result;if(n.length<1)throw new v(this.id+" privatePostDepositAddresses() returned no addresses");const c=this.safeString(n[0],"address"),d=this.safeString2(n[0],"tag","memo");return this.checkAddress(c),{currency:e,address:c,tag:d,info:r}}async withdraw(e,t,i,s,a={}){if(this.checkAddress(i),"key"in a){await this.loadMarkets();const i={asset:this.currency(e).id,amount:t},s=await this.privatePostWithdraw(this.extend(i,a));return{info:s,id:s.result}}throw new d(this.id+" withdraw requires a 'key' parameter (withdrawal key name, as set up on your account)")}sign(e,t="public",i="GET",s={},a,r){let o="/"+this.version+"/"+t+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();r=this.urlencode(this.extend({nonce:e},s));const t=this.encode(e+r),i=this.hash(t,"sha256","binary"),n=this.stringToBinary(this.encode(o)),c=this.binaryConcat(n,i),d=this.base64ToBinary(this.secret),h=this.hmac(c,d,"sha512","base64");a={"API-Key":this.apiKey,"API-Sign":h,"Content-Type":"application/x-www-form-urlencoded"}}else o="/"+e;return o=this.urls.api[t]+o,{url:o,method:i,body:r,headers:a}}nonce(){return this.milliseconds()}handleErrors(e,t,i,s,a,o,n,c,h){if(520===e)throw new r(this.id+" "+e.toString()+" "+t);if(o.indexOf("Invalid order")>=0)throw new m(this.id+" "+o);if(o.indexOf("Invalid nonce")>=0)throw new u(this.id+" "+o);if(o.indexOf("Insufficient funds")>=0)throw new p(this.id+" "+o);if(o.indexOf("Cancel pending")>=0)throw new f(this.id+" "+o);if(o.indexOf("Invalid arguments:volume")>=0)throw new m(this.id+" "+o);if("{"===o[0]&&"string"!=typeof n&&"error"in n){if(n.error.length){const e=this.id+" "+o;for(let t=0;t<n.error.length;t++){const i=n.error[t];this.throwExactlyMatchedException(this.exceptions,i,e)}throw new d(e)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,ExchangeNotAvailable:o,InsufficientFunds:n,OrderNotFound:c,InvalidOrder:d,AccountSuspended:h,InvalidNonce:l,NotSupported:u,BadRequest:p,AuthenticationError:f,BadSymbol:m,RateLimitExceeded:v,PermissionDenied:y}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kucoin",name:"KuCoin",countries:["SC"],rateLimit:334,version:"v2",certified:!1,pro:!0,comment:"Platform 2.0",has:{CORS:!1,fetchStatus:!0,fetchTime:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchTicker:!0,fetchTickers:!0,fetchOrderBook:!0,fetchOrder:!0,fetchClosedOrders:!0,fetchOpenOrders:!0,fetchDepositAddress:!0,createDepositAddress:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchBalance:!0,fetchTrades:!0,fetchMyTrades:!0,createOrder:!0,cancelOrder:!0,fetchAccounts:!0,fetchFundingFee:!0,fetchOHLCV:!0,fetchLedger:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87295558-132aaf80-c50e-11ea-9801-a2fb0c57c799.jpg",referral:"https://www.kucoin.com/?rcode=E5wkqe",api:{public:"https://openapi-v2.kucoin.com",private:"https://openapi-v2.kucoin.com"},test:{public:"https://openapi-sandbox.kucoin.com",private:"https://openapi-sandbox.kucoin.com"},www:"https://www.kucoin.com",doc:["https://docs.kucoin.com"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},api:{public:{get:["timestamp","status","symbols","markets","market/allTickers","market/orderbook/level{level}","market/orderbook/level2","market/orderbook/level2_20","market/orderbook/level2_100","market/orderbook/level3","market/histories","market/candles","market/stats","currencies","currencies/{currency}","prices","mark-price/{symbol}/current","margin/config"],post:["bullet-public"]},private:{get:["accounts","accounts/{accountId}","accounts/{accountId}/ledgers","accounts/{accountId}/holds","accounts/transferable","sub/user","sub-accounts","sub-accounts/{subUserId}","deposit-addresses","deposits","hist-deposits","hist-orders","hist-withdrawals","withdrawals","withdrawals/quotas","orders","orders/{orderId}","limit/orders","fills","limit/fills","margin/account","margin/borrow","margin/borrow/outstanding","margin/borrow/borrow/repaid","margin/lend/active","margin/lend/done","margin/lend/trade/unsettled","margin/lend/trade/settled","margin/lend/assets","margin/market","margin/trade/last"],post:["accounts","accounts/inner-transfer","accounts/sub-transfer","deposit-addresses","withdrawals","orders","orders/multi","margin/borrow","margin/repay/all","margin/repay/single","margin/lend","margin/toggle-auto-lend","bullet-private"],delete:["withdrawals/{withdrawalId}","orders","orders/{orderId}","margin/lend/{orderId}"]}},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","8h":"8hour","12h":"12hour","1d":"1day","1w":"1week"},exceptions:{exact:{"order not exist":c,"order not exist.":c,order_not_exist:c,order_not_exist_or_not_allow_to_cancel:d,"Order size below the minimum requirement.":d,"The withdrawal amount is below the minimum requirement.":a,400:p,401:f,403:u,404:u,405:u,429:v,500:o,503:o,101030:y,200004:n,230003:n,260100:n,3e5:d,4e5:m,400001:f,400002:l,400003:f,400004:f,400005:f,400006:f,400007:f,400008:u,400100:p,411100:h,415e3:p,5e5:a},broad:{"Exceeded the access frequency":v,"require more permission":y}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{HOT:"HOTNOW",EDGE:"DADI",WAX:"WAXP",TRY:"Trias"},options:{version:"v1",symbolSeparator:"-",fetchMyTradesMethod:"private_get_fills",fetchBalance:{type:"trade"},versions:{public:{GET:{status:"v1","market/orderbook/level{level}":"v1","market/orderbook/level2":"v2","market/orderbook/level2_20":"v1","market/orderbook/level2_100":"v1"}},private:{POST:{"accounts/inner-transfer":"v2","accounts/sub-transfer":"v2"}}}}})}nonce(){return this.milliseconds()}async loadTimeDifference(e={}){const t=await this.publicGetTimestamp(e),i=this.milliseconds(),s=this.safeInteger(t,"data");return this.options.timeDifference=parseInt(i-s),this.options.timeDifference}async fetchTime(e={}){const t=await this.publicGetTimestamp(e);return this.safeInteger(t,"data")}async fetchStatus(e={}){const t=await this.publicGetStatus(e),i=this.safeValue(t,"data",{});let s=this.safeValue(i,"status");return void 0!==s&&(s="open"===s?"ok":"maintenance",this.status=this.extend(this.status,{status:s,updated:this.milliseconds()})),this.status}async fetchMarkets(e={}){const t=(await this.publicGetSymbols(e)).data,i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"symbol"),[r,o]=a.split("-"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o),d=n+"/"+c,h=this.safeValue(s,"enableTrading"),l=this.safeFloat(s,"baseMaxSize"),u=this.safeFloat(s,"baseMinSize"),p=this.safeFloat(s,"quoteMaxSize"),f=this.safeFloat(s,"quoteMinSize"),m={amount:this.precisionFromString(this.safeString(s,"baseIncrement")),price:this.precisionFromString(this.safeString(s,"priceIncrement"))},v={amount:{min:u,max:l},price:{min:this.safeFloat(s,"priceIncrement"),max:p/u},cost:{min:f,max:p}};i.push({id:a,symbol:d,baseId:r,quoteId:o,base:n,quote:c,active:h,precision:m,limits:v,info:s})}return i}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i=this.safeValue(t,"data",[]),s={};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"currency"),r=this.safeString(t,"fullName"),o=this.safeCurrencyCode(a),n=this.safeInteger(t,"precision"),c=this.safeValue(t,"isWithdrawEnabled",!1),d=this.safeValue(t,"isDepositEnabled",!1),h=this.safeFloat(t,"withdrawalMinFee"),l=c&&d;s[o]={id:a,name:r,code:o,precision:n,info:t,active:l,fee:h,limits:this.limits}}return s}async fetchAccounts(e={}){const t=await this.privateGetAccounts(e),i=this.safeValue(t,"data"),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"id"),r=this.safeString(t,"currency"),o=this.safeCurrencyCode(r),n=this.safeString(t,"type");s.push({id:a,type:n,currency:o,info:t})}return s}async fetchFundingFee(e,t={}){const i={currency:this.currencyId(e)},s=await this.privateGetWithdrawalsQuotas(this.extend(i,t)),a=s.data,r={};return r[e]=this.safeFloat(a,"withdrawMinFee"),{info:s,withdraw:r,deposit:{}}}parseTicker(e,t){let i=this.safeFloat(e,"changeRate");void 0!==i&&(i*=100);const s=this.safeFloat2(e,"last","lastTradedPrice"),a=this.safeString(e,"symbol"),r=this.safeSymbol(a,t,"-"),o=this.safeFloat(e,"vol"),n=this.safeFloat(e,"volValue"),c=this.vwap(o,n),d=this.safeInteger2(e,"time","datetime");return{symbol:r,timestamp:d,datetime:this.iso8601(d),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:c,open:this.safeFloat(e,"open"),close:s,last:s,previousClose:void 0,change:this.safeFloat(e,"changePrice"),percentage:i,average:this.safeFloat(e,"averagePrice"),baseVolume:o,quoteVolume:n,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketAllTickers(t),s=this.safeValue(i,"data",{}),a=this.safeValue(s,"ticker",[]),r={};for(let e=0;e<a.length;e++){const t=this.parseTicker(a[e]),i=this.safeString(t,"symbol");void 0!==i&&(r[i]=t)}return this.filterByArray(r,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.publicGetMarketStats(this.extend(s,t));return this.parseTicker(a.data,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,5)]}async fetchOHLCV(e,t="15m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={symbol:r.id,type:this.timeframes[t]},n=1e3*this.parseTimeframe(t);let c=this.milliseconds();void 0!==i?(o.startAt=parseInt(Math.floor(i/1e3)),void 0===s&&(s=this.safeInteger(this.options,"fetchOHLCVLimit",1500)),c=this.sum(i,s*n)):void 0!==s&&(i=c-s*n,o.startAt=parseInt(Math.floor(i/1e3))),o.endAt=parseInt(Math.floor(c/1e3));const d=await this.publicGetMarketCandles(this.extend(o,a)),h=this.safeValue(d,"data",[]);return this.parseOHLCVs(h,r,t,i,s)}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currencyId(e)},s=await this.privatePostDepositAddresses(this.extend(i,t)),a=this.safeValue(s,"data",{});let r=this.safeString(a,"address");void 0!==r&&(r=r.replace("bitcoincash:",""));const o=this.safeString(a,"memo");return this.checkAddress(r),{info:s,currency:e,address:r,tag:o}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currencyId(e)},s=await this.privateGetDepositAddresses(this.extend(i,t)),a=this.safeValue(s,"data",{});let r=this.safeString(a,"address");void 0!==r&&(r=r.replace("bitcoincash:",""));const o=this.safeString(a,"memo");return this.checkAddress(r),{info:s,currency:e,address:r,tag:o}}async fetchL3OrderBook(e,t,i={}){return await this.fetchOrderBook(e,t,{level:3})}async fetchOrderBook(e,t,i={}){const s=this.safeInteger(i,"level",2);let r=s.toString();if("2"===r&&void 0!==t){if(20!==t&&100!==t)throw new a(this.id+" fetchOrderBook limit argument must be undefined, 20 or 100");r+="_"+t.toString()}await this.loadMarkets();const o={symbol:this.marketId(e),level:r},n=await this.publicGetMarketOrderbookLevelLevel(this.extend(o,i)),c=this.safeValue(n,"data",{}),d=this.safeInteger(c,"time"),h=this.parseOrderBook(c,d,"bids","asks",s-2,s-1);return h.nonce=this.safeInteger(c,"sequence"),h}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.marketId(e),n=this.safeString2(r,"clientOid","clientOrderId",this.uuid());r=this.omit(r,["clientOid","clientOrderId"]);const c={clientOid:n,side:i,symbol:o,type:t};"market"!==t?(c.price=this.priceToPrecision(e,a),c.size=this.amountToPrecision(e,s)):this.safeValue(r,"quoteAmount")?c.funds=this.amountToPrecision(e,s):c.size=this.amountToPrecision(e,s);const d=await this.privatePostOrders(this.extend(c,r)),h=this.safeValue(d,"data",{}),l=this.milliseconds(),u={id:this.safeString(h,"orderId"),clientOrderId:n,info:h,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,symbol:e,type:t,side:i,price:a,amount:void 0,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:void 0,fee:void 0,trades:void 0};return this.safeValue(r,"quoteAmount")||(u.amount=s),u}async cancelOrder(e,t,i={}){const s={orderId:e};return await this.privateDeleteOrdersOrderId(this.extend(s,i))}async fetchOrdersByStatus(e,t,i,s,a={}){await this.loadMarkets();const r={status:e};let o=void 0;void 0!==t&&(o=this.market(t),r.symbol=o.id),void 0!==i&&(r.startAt=i),void 0!==s&&(r.pageSize=s);const n=await this.privateGetOrders(this.extend(r,a)),c=this.safeValue(n,"data",{}),d=this.safeValue(c,"items",[]);return this.parseOrders(d,o,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("done",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("active",e,t,i,s)}async fetchOrder(e,t,i={}){if(await this.loadMarkets(),void 0===e)throw new d(this.id+" fetchOrder requires an order id");const s={orderId:e};let a=void 0;void 0!==t&&(a=this.market(t));const r=await this.privateGetOrdersOrderId(this.extend(s,i)),o=this.safeValue(r,"data");return this.parseOrder(o,a)}parseOrder(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t,"-"),a=this.safeString(e,"id"),r=this.safeString(e,"type"),o=this.safeInteger(e,"createdAt"),n=this.iso8601(o);let c=this.safeFloat(e,"price");const d=this.safeString(e,"side"),h=this.safeString(e,"feeCurrency"),l=this.safeCurrencyCode(h),u=this.safeFloat(e,"fee"),p=this.safeFloat(e,"size"),f=this.safeFloat(e,"dealSize"),m=this.safeFloat(e,"dealFunds"),v=p-f;let y=this.safeValue(e,"isActive",!1)?"open":"closed";y=this.safeValue(e,"cancelExist",!1)?"canceled":y;const g={currency:l,cost:u};"market"===r&&0===c&&void 0!==m&&void 0!==f&&m>0&&f>0&&(c=m/f);return{id:a,clientOrderId:this.safeString(e,"clientOid"),symbol:s,type:r,timeInForce:this.safeString(e,"timeInForce"),side:d,amount:p,price:c,stopPrice:this.safeFloat(e,"stopPrice"),cost:m,filled:f,remaining:v,timestamp:o,datetime:n,fee:g,status:y,info:e,lastTradeTimestamp:void 0,average:void 0,trades:void 0}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let o=void 0;void 0!==e&&(o=this.market(e),r.symbol=o.id),void 0!==i&&(r.pageSize=i);const n=this.options.fetchMyTradesMethod;let c=!1;if("private_get_fills"===n)void 0!==t&&(r.startAt=t);else if("private_get_limit_fills"===n)c=!0;else{if("private_get_hist_orders"!==n)throw new a(this.id+" invalid fetchClosedOrder method");void 0!==t&&(r.startAt=parseInt(t/1e3))}const d=await this[n](this.extend(r,s)),h=this.safeValue(d,"data",{});let l=void 0;return l=c?h:this.safeValue(h,"items",[]),this.parseTrades(l,o,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id};void 0!==t&&(r.startAt=Math.floor(t/1e3)),void 0!==i&&(r.pageSize=i);const o=await this.publicGetMarketHistories(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,a,t,i)}parseTrade(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t,"-"),a=this.safeString2(e,"tradeId","id"),r=this.safeString(e,"orderId"),o=this.safeString(e,"liquidity"),n=this.safeFloat2(e,"size","amount");let c=this.safeInteger(e,"time");void 0!==c?c=parseInt(c/1e6):(c=this.safeInteger(e,"createdAt"),"dealValue"in e&&void 0!==c&&(c*=1e3));const d=this.safeFloat2(e,"price","dealPrice"),h=this.safeString(e,"side");let l=void 0;const u=this.safeFloat(e,"fee");if(void 0!==u){const i=this.safeString(e,"feeCurrency");let s=this.safeCurrencyCode(i);void 0===s&&void 0!==t&&(s="sell"===h?t.quote:t.base),l={cost:u,currency:s,rate:this.safeFloat(e,"feeRate")}}let p=this.safeString(e,"type");"match"===p&&(p=void 0);let f=this.safeFloat2(e,"funds","dealValue");return void 0===f&&void 0!==n&&void 0!==d&&(f=n*d),{info:e,id:a,order:r,timestamp:c,datetime:this.iso8601(c),symbol:s,type:p,takerOrMaker:o,side:h,price:d,amount:n,cost:f,fee:l}}async withdraw(e,t,i,s,a={}){await this.loadMarkets(),this.checkAddress(i);const r={currency:this.currencyId(e),address:i,amount:t};void 0!==s&&(r.memo=s);const o=await this.privatePostWithdrawals(this.extend(r,a)),n=this.safeValue(o,"data",{});return{id:this.safeString(n,"withdrawalId"),info:o}}parseTransactionStatus(e){return this.safeString({SUCCESS:"ok",PROCESSING:"ok",FAILURE:"failed"},e)}parseTransaction(e,t){const i=this.safeString(e,"currency"),s=this.safeCurrencyCode(i,t);let a=this.safeString(e,"address");const r=this.safeFloat(e,"amount");let o=this.safeString(e,"walletTxId");if(void 0!==o){const e=o.split("@");e.length>1&&void 0===a&&e[1].length>1&&(a=e[1]),o=e[0]}let n=void 0===o?"withdrawal":"deposit";const c=this.safeString(e,"status"),d=this.parseTransactionStatus(c);let h=void 0;const l=this.safeFloat(e,"fee");if(void 0!==l){let e=void 0;void 0!==r&&(e=l/r),h={cost:l,rate:e,currency:s}}const u=this.safeString(e,"memo");let p=this.safeInteger2(e,"createdAt","createAt");const f=this.safeString(e,"id");let m=this.safeInteger(e,"updatedAt");return!("createdAt"in e)&&(n="address"in e?"withdrawal":"deposit",void 0!==p&&(p*=1e3),void 0!==m&&(m*=1e3)),{id:f,address:a,tag:u,currency:s,amount:r,txid:o,type:n,status:d,fee:h,timestamp:p,datetime:this.iso8601(p),updated:m,info:e}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.currency=r.id),void 0!==i&&(a.pageSize=i);let o="privateGetDeposits";void 0!==t&&(t<1550448e6?(a.startAt=parseInt(t/1e3),o="privateGetHistDeposits"):a.startAt=t);const n=(await this[o](this.extend(a,s))).data.items;return this.parseTransactions(n,r,t,i,{type:"deposit"})}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.currency=r.id),void 0!==i&&(a.pageSize=i);let o="privateGetWithdrawals";void 0!==t&&(t<1550448e6?(a.startAt=parseInt(t/1e3),o="privateGetHistWithdrawals"):a.startAt=t);const n=(await this[o](this.extend(a,s))).data.items;return this.parseTransactions(n,r,t,i,{type:"withdrawal"})}async fetchBalance(e={}){await this.loadMarkets();let t=void 0;const i={};if("type"in e)t=e.type,void 0!==t&&(i.type=t),e=this.omit(e,"type");else{const e=this.safeValue(this.options,"fetchBalance",{});t=this.safeString(e,"type","trade")}const s=await this.privateGetAccounts(this.extend(i,e)),a=this.safeValue(s,"data",[]),r={info:s};for(let e=0;e<a.length;e++){const i=a[e];if(this.safeString(i,"type")===t){const e=this.safeString(i,"currency"),t=this.safeCurrencyCode(e),s=this.account();s.total=this.safeFloat(i,"balance"),s.free=this.safeFloat(i,"available"),s.used=this.safeFloat(i,"holds"),r[t]=s}}return this.parseBalance(r)}async fetchLedger(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchLedger requires a code param");await this.loadMarkets(),await this.loadAccounts();const o=this.currency(e);let n=this.safeString(s,"accountId");if(void 0===n)for(let t=0;t<this.accounts.length;t++){const i=this.accounts[t];if(i.currency===e&&"main"===i.type){n=i.id;break}}if(void 0===n)throw new a(this.id+" "+e+"main account is not loaded in loadAccounts");const c={accountId:n};void 0!==t&&(c.startAt=Math.floor(t/1e3));const d=(await this.privateGetAccountsAccountIdLedgers(this.extend(c,s))).data.items;return this.parseLedger(d,o,t,i)}parseLedgerEntry(e,t){const i=this.safeString(e,"currency"),s=this.safeCurrencyCode(i,t),a={cost:this.safeFloat(e,"fee"),code:s},r=this.safeFloat(e,"amount"),o=this.safeFloat(e,"balance"),n=this.safeString(e,"direction");let c=void 0;if(void 0!==o&&void 0!==r){const e="out"===n?r:-r;c=this.sum(o,e)}const d=this.safeInteger(e,"createdAt"),h=this.parseLedgerEntryType(this.safeString(e,"bizType")),l=this.safeString(e,"context");let u=void 0,p=void 0;if(this.isJsonEncodedObject(l)){const e=this.parseJson(l);u=this.safeString(e,"orderId"),"trade"===h?p=this.safeString(e,"tradeId"):"transaction"===h&&(p=this.safeString(e,"txId"))}return{id:u,currency:s,account:void 0,referenceAccount:void 0,referenceId:p,status:void 0,amount:r,before:c,after:o,fee:a,direction:n,timestamp:d,datetime:this.iso8601(d),type:h,info:e}}parseLedgerEntryType(e){return this.safeString({Exchange:"trade",Withdrawal:"transaction",Deposit:"transaction",Transfer:"transfer"},e,e)}sign(e,t="public",i="GET",s={},a,r){const o=this.safeValue(this.options,"versions",{}),n=this.safeValue(o,t),c=this.safeValue(n,i,{}),d=this.safeString(c,e,this.options.version),h=this.safeString(s,"version",d);s=this.omit(s,"version");let l="/api/"+h+"/"+this.implodeParams(e,s);const u=this.omit(s,this.extractParams(e));let p="";a=void 0!==a?a:{},Object.keys(u).length&&("GET"!==i?(p=r=this.json(u),a["Content-Type"]="application/json"):l+="?"+this.urlencode(u));const f=this.urls.api[t]+l;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();a=this.extend({"KC-API-KEY":this.apiKey,"KC-API-TIMESTAMP":e,"KC-API-PASSPHRASE":this.password},a);const t=e+i+l+p,s=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64");a["KC-API-SIGN"]=s;const r=this.safeValue(this.options,"partner",{}),o=this.safeString(r,"id"),n=this.safeString(r,"secret");if(void 0!==o&&void 0!==n){const t=e+o+this.apiKey,i=this.hmac(this.encode(t),this.encode(n),"sha256","base64");a["KC-API-PARTNER-SIGN"]=i,a["KC-API-PARTNER"]=o}}return{url:f,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,r,o,n,c){if(!o)return void this.throwBroadlyMatchedException(this.exceptions.broad,r,r);const d=this.safeString(o,"code"),h=this.safeString(o,"msg");this.throwExactlyMatchedException(this.exceptions.exact,h,h),this.throwExactlyMatchedException(this.exceptions.exact,d,h)}}},function(e,t,i){"use strict";const s=i(84),{ArgumentsRequired:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kuna",name:"Kuna",countries:["UA"],rateLimit:1e3,version:"v2",has:{CORS:!1,fetchTickers:!0,fetchOHLCV:"emulated",fetchOpenOrders:!0,fetchMyTrades:!0,withdraw:!1},timeframes:void 0,urls:{referral:"https://kuna.io?r=kunaid-gvfihe8az7o4",logo:"https://user-images.githubusercontent.com/51840849/87153927-f0578b80-c2c0-11ea-84b6-74612568e9e1.jpg",api:"https://kuna.io",www:"https://kuna.io",doc:"https://kuna.io/documents/api",fees:"https://kuna.io/documents/api"},fees:{trading:{taker:.0025,maker:.0025},funding:{withdraw:{UAH:"1%",BTC:.001,BCH:.001,ETH:.01,WAVES:.01,GOL:0,GBG:0},deposit:{}}}})}async fetchMarkets(e={}){const t=["btc","eth","eurs","rub","uah","usd","usdt","gol"],i={UAH:0},s=[],a=await this.publicGetTickers(e),r=Object.keys(a);for(let e=0;e<r.length;e++){const a=r[e];for(let e=0;e<t.length;e++){const r=t[e],o=a.indexOf(r),n=a.slice(o);if(o>0&&n===r){const e=a.replace(r,""),t=this.safeCurrencyCode(e),o=this.safeCurrencyCode(r),n=t+"/"+o,c={amount:6,price:this.safeInteger(i,o,6)};s.push({id:a,symbol:n,base:t,quote:o,baseId:e,quoteId:r,precision:c,limits:{amount:{min:Math.pow(10,-c.amount),max:Math.pow(10,c.amount)},price:{min:Math.pow(10,-c.price),max:Math.pow(10,c.price)},cost:{min:void 0,max:void 0}},active:void 0,info:void 0});break}}}return s}async fetchL3OrderBook(e,t,i={}){return await this.fetchOrderBook(e,t,i)}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOpenOrders requires a symbol argument");await this.loadMarkets();const r=this.market(e),o={market:r.id},n=await this.privateGetOrders(this.extend(o,s));return this.parseOrders(n,r,t,i)}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at"));let s=void 0;t&&(s=t.symbol);let a=this.safeString2(e,"side","trend");if(void 0!==a){const e={ask:"sell",bid:"buy"};a=this.safeString(e,a,a)}const r=this.safeFloat(e,"price"),o=this.safeFloat(e,"volume"),n=this.safeFloat(e,"funds"),c=this.safeString(e,"order_id");return{id:this.safeString(e,"id"),info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,type:void 0,side:a,order:c,takerOrMaker:void 0,price:r,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market:a.id},o=await this.publicGetTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOpenOrders requires a symbol argument");await this.loadMarkets();const r=this.market(e),o={market:r.id},n=await this.privateGetTradesMy(this.extend(o,s));return this.parseTrades(n,r,t,i)}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=await this.fetchTrades(e,i,s,a),o=this.buildOHLCVC(r,t,i,s),n=[];for(let e=0;e<o.length;e++){const t=o[e];n.push([t[0],t[1],t[2],t[3],t[4],t[5]])}return n}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,AuthenticationError:r,BadSymbol:o,InvalidOrder:n,InsufficientFunds:c}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"lakebtc",name:"LakeBTC",countries:["US"],version:"api_v2",rateLimit:1e3,has:{cancelOrder:!0,CORS:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28074120-72b7c38a-6660-11e7-92d9-d9027502281d.jpg",api:"https://api.lakebtc.com",www:"https://www.lakebtc.com",doc:["https://www.lakebtc.com/s/api_v2","https://www.lakebtc.com/s/api"]},api:{public:{get:["bcorderbook","bctrades","ticker"]},private:{post:["buyOrder","cancelOrders","getAccountInfo","getExternalAccounts","getOrders","getTrades","openOrders","sellOrder"]}},fees:{trading:{maker:.0015,taker:.002}},exceptions:{broad:{Signature:r,"invalid symbol":o,"Volume doit":n,insufficient_balance:c}}})}async fetchMarkets(e={}){const t=await this.publicGetTicker(e),i=[],s=Object.keys(t);for(let e=0;e<s.length;e++){const a=s[e],r=t[a],o=a.slice(0,3),n=a.slice(3,6),c=o.toUpperCase(),d=n.toUpperCase(),h=c+"/"+d;i.push({id:a,symbol:h,base:c,quote:d,baseId:o,quoteId:n,info:r,active:void 0,precision:this.precision,limits:this.limits})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetAccountInfo(e),i=this.safeValue(t,"balance",{}),s={info:t},a=Object.keys(i);for(let e=0;e<a.length;e++){const t=a[e],r=this.safeCurrencyCode(t),o=this.account();o.total=this.safeFloat(i,t),s[r]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)},a=await this.publicGetBcorderbook(this.extend(s,i));return this.parseOrderBook(a)}parseTicker(e,t){const i=this.milliseconds();let s=void 0;void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s=Object.keys(i),a={};for(let e=0;e<s.length;e++){const t=s[e],r=i[t],o=this.safeMarket(t);a[o.symbol]=this.parseTicker(r,o)}return this.filterByArray(a,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=await this.publicGetTicker(t);return this.parseTicker(s[i.id],i)}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid"),a=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount");let o=void 0;void 0!==a&&void 0!==r&&(o=a*r);let n=void 0;return void 0!==t&&(n=t.symbol),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,order:void 0,type:void 0,side:void 0,takerOrMaker:void 0,price:a,amount:r,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id},o=await this.publicGetBctrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}async createOrder(e,t,i,s,r,o={}){if(await this.loadMarkets(),"market"===t)throw new a(this.id+" allows limit orders only");const n="privatePost"+this.capitalize(i)+"Order",c={params:[r,s,this.market(e).id]},d=await this[n](this.extend(c,o));return{info:d,id:this.safeString(d,"id")}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={params:[e]};return await this.privatePostCancelOrder(this.extend(s,i))}nonce(){return this.microseconds()}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+this.version;if("public"===t)o+="/"+e,Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const t=this.nonce().toString(),o=this.seconds();let n="";if("params"in s){const t=s.params,i=[];for(let e=0;e<t.length;e++){let s=t[e];"string"!=typeof t&&(s=s.toString()),i.push(s)}n=i.join(","),r={method:e,params:s.params,id:o}}else r={method:e,params:"",id:o};r=this.json(r);let c=["tonce="+t,"accesskey="+this.apiKey,"requestmethod="+i.toLowerCase(),"id="+o.toString(),"method="+e,"params="+n];c=c.join("&");const d=this.hmac(this.encode(c),this.encode(this.secret),"sha1"),h=this.apiKey+":"+d;a={"Json-Rpc-Tonce":t,Authorization:"Basic "+this.decode(this.stringToBase64(h)),"Content-Type":"application/json"}}return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n)return;const h=this.id+" "+o,l=this.safeString(n,"error");if(void 0!==l)throw this.throwBroadlyMatchedException(this.exceptions.broad,l,h),new a(h)}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,InvalidNonce:o,OrderNotFound:n,InvalidOrder:c,DDoSProtection:d,BadRequest:h,AuthenticationError:l}=i(0),{ROUND:u}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"latoken",name:"Latoken",countries:["KY"],version:"v1",rateLimit:2e3,certified:!1,userAgent:this.userAgents.chrome,has:{CORS:!1,publicAPI:!0,privateAPI:!0,cancelOrder:!0,cancelAllOrders:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchCanceledOrders:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!1,fetchOrdersByStatus:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/61511972-24c39f00-aa01-11e9-9f7c-471f1d6e5214.jpg",api:"https://api.latoken.com",www:"https://latoken.com",doc:["https://api.latoken.com"]},api:{public:{get:["ExchangeInfo/time","ExchangeInfo/limits","ExchangeInfo/pairs","ExchangeInfo/pairs/{currency}","ExchangeInfo/pair","ExchangeInfo/currencies","ExchangeInfo/currencies/{symbol}","MarketData/tickers","MarketData/ticker/{symbol}","MarketData/orderBook/{symbol}","MarketData/orderBook/{symbol}/{limit}","MarketData/trades/{symbol}","MarketData/trades/{symbol}/{limit}"]},private:{get:["Account/balances","Account/balances/{currency}","Order/status","Order/active","Order/get_order","Order/trades"],post:["Order/new","Order/test-order","Order/cancel","Order/cancel_all"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001}},commonCurrencies:{MT:"Monarch",TSL:"Treasure SL"},options:{createOrderMethod:"private_post_order_new"},exceptions:{exact:{"Signature or ApiKey is not valid":l,"Request is out of time":o,"Symbol must be specified":h},broad:{"Request limit reached":d,Pair:h,"Price needs to be greater than":c,"Amount needs to be greater than":c,"The Symbol field is required":c,"OrderType is not valid":c,"Side is not valid":c,"Cancelable order whit":n,Order:n}}})}nonce(){return this.milliseconds()}async fetchTime(e={}){const t=await this.publicGetExchangeInfoTime(e);return this.safeInteger(t,"unixTimeMiliseconds")}async fetchMarkets(e={}){const t=await this.publicGetExchangeInfoPairs(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"symbol"),r=this.safeString(s,"baseCurrency"),o=this.safeString(s,"quotedCurrency"),n=this.safeInteger(s,"pairId"),c=this.safeCurrencyCode(r),d=this.safeCurrencyCode(o),h=c+"/"+d,l={price:this.safeInteger(s,"pricePrecision"),amount:this.safeInteger(s,"amountPrecision")},u={amount:{min:this.safeFloat(s,"minQty"),max:void 0},price:{min:Math.pow(10,-l.price),max:void 0},cost:{min:void 0,max:void 0}};i.push({id:a,numericId:n,info:s,symbol:h,base:c,quote:d,baseId:r,quoteId:o,active:void 0,precision:l,limits:u})}return i}async fetchCurrencies(e={}){const t=await this.publicGetExchangeInfoCurrencies(e),i={};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"symbol"),r=this.safeInteger(s,"currencyId"),o=this.safeCurrencyCode(a),n=this.safeInteger(s,"precission"),c=this.safeFloat(s,"fee"),d=void 0;i[o]={id:a,numericId:r,code:o,info:s,name:o,active:d,fee:c,precision:n,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return i}calculateFee(e,t,i,s,a,r="taker",o={}){const n=this.markets[e];let c="quote";const d=n[r];let h=s*d,l=n.precision.price;return"sell"===i?h*=a:(c="base",l=n.precision.amount),h=this.decimalToPrecision(h,u,l,this.precisionMode),{type:r,currency:n[c],rate:d,cost:parseFloat(h)}}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountBalances(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"symbol"),r=this.safeCurrencyCode(a),o=this.safeFloat(s,"frozen"),n=this.safeFloat(s,"pending"),c=this.sum(o,n),d={free:this.safeFloat(s,"available"),used:c,total:this.safeFloat(s,"amount")};i[r]=d}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id,limit:10};void 0!==t&&(s.limit=t);const a=await this.publicGetMarketDataOrderBookSymbolLimit(this.extend(s,i));return this.parseOrderBook(a,void 0,"bids","asks","price","quantity")}parseTicker(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t),a=this.safeFloat(e,"open"),r=this.safeFloat(e,"close");let o=void 0;void 0!==a&&void 0!==r&&(o=r-a);const n=this.safeFloat(e,"priceChange"),c=this.nonce();return{symbol:s,timestamp:c,datetime:this.iso8601(c),low:this.safeFloat(e,"low"),high:this.safeFloat(e,"high"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:a,close:r,last:r,previousClose:void 0,change:o,percentage:n,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"volume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.publicGetMarketDataTickerSymbol(this.extend(s,t));return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketDataTickers(t),s={};for(let e=0;e<i.length;e++){const t=this.parseTicker(i[e]);s[t.symbol]=t}return this.filterByArray(s,"symbol",e)}parseTrade(e,t){let i=this.safeInteger2(e,"timestamp","time");void 0!==i&&i<12309408e5&&(i*=1e3);const s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),r=this.safeString(e,"side");let o=void 0;void 0!==a&&void 0!==s&&(o=a*s);let n=void 0;void 0!==t&&(n=t.symbol);const c=this.safeString(e,"id"),d=this.safeString(e,"orderId"),h=this.safeFloat(e,"commission");let l=void 0;return void 0!==h&&(l={cost:h,currency:void 0}),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,id:c,order:d,type:void 0,takerOrMaker:void 0,side:r,price:s,amount:a,cost:o,fee:l}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id};void 0!==i&&(r.limit=i);const o=await this.publicGetMarketDataTradesSymbol(this.extend(r,s)),n=this.safeValue(o,"trades",[]);return this.parseTrades(n,a,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const a=this.market(e),o={symbol:a.id},n=await this.privateGetOrderTrades(this.extend(o,s)),c=this.safeValue(n,"trades",[]);return this.parseTrades(c,a,t,i)}parseOrderStatus(e){return this.safeString({active:"open",partiallyFilled:"open",filled:"closed",cancelled:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"orderId"),s=this.safeTimestamp(e,"timeCreated"),a=this.safeString(e,"symbol"),r=this.safeSymbol(a,t),o=this.safeString(e,"side"),n=this.safeString(e,"orderType"),c=this.safeFloat(e,"price"),d=this.safeFloat(e,"amount"),h=this.safeFloat(e,"executedAmount");let l=void 0;void 0!==d&&void 0!==h&&(l=d-h);const u=this.parseOrderStatus(this.safeString(e,"orderStatus"));let p=void 0;void 0!==h&&void 0!==c&&(p=h*c);const f=this.safeTimestamp(e,"timeFilled");let m=void 0;void 0!==f&&f>0&&(m=f);return{id:i,clientOrderId:this.safeString(e,"cliOrdId"),info:e,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:m,status:u,symbol:r,type:n,timeInForce:void 0,side:o,price:c,stopPrice:void 0,cost:p,amount:d,filled:h,average:void 0,remaining:l,fee:void 0,trades:void 0}}async fetchOpenOrders(e,t,i,s={}){return this.fetchOrdersWithMethod("private_get_order_active",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return this.fetchOrdersByStatus("filled",e,t,i,s)}async fetchCanceledOrders(e,t,i,s={}){return this.fetchOrdersByStatus("cancelled",e,t,i,s)}async fetchOrdersByStatus(e,t,i,s,a={}){const r={status:e};return this.fetchOrdersWithMethod("private_get_order_status",t,i,s,this.extend(r,a))}async fetchOrdersWithMethod(e,t,i,s,a={}){if(void 0===t)throw new r(this.id+" fetchOrdersWithMethod requires a symbol argument");await this.loadMarkets();const o=this.market(t),n={symbol:o.id};void 0!==s&&(n.limit=s);const c=await this[e](this.extend(n,a));return this.parseOrders(c,o,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},a=await this.privateGetOrderGetOrder(this.extend(s,i));return this.parseOrder(a)}async createOrder(e,t,i,s,r,o={}){if(await this.loadMarkets(),"limit"!==t)throw new a(this.id+" allows limit orders only");const n={symbol:this.marketId(e),side:i,price:this.priceToPrecision(e,r),amount:this.amountToPrecision(e,s),orderType:t},c=this.safeString(this.options,"createOrderMethod","private_post_order_new"),d=await this[c](this.extend(n,o));return this.parseOrder(d)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},a=await this.privatePostOrderCancel(this.extend(s,i));return this.parseOrder(a)}async cancelAllOrders(e,t={}){if(void 0===e)throw new r(this.id+" cancelAllOrders requires a symbol argument");await this.loadMarkets();const i=this.marketId(e),s={symbol:i},a=await this.privatePostOrderCancelAll(this.extend(s,t)),o=[],n=this.safeValue(a,"cancelledOrders",[]);for(let e=0;e<n.length;e++){const t=this.parseOrder({symbol:i,orderId:n[e],orderStatus:"canceled"});o.push(t)}return o}sign(e,t="public",i="GET",s,a,r){let o="/api/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("private"===t){const e=this.nonce();n=this.extend({timestamp:e},n)}const c=this.urlencode(n);if(Object.keys(n).length&&(o+="?"+c),"private"===t){this.checkRequiredCredentials();const e=this.hmac(this.encode(o),this.encode(this.secret));a={"X-LA-KEY":this.apiKey,"X-LA-SIGNATURE":e},"POST"===i&&(a["Content-Type"]="application/x-www-form-urlencoded",r=c)}return{url:this.urls.api+o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(!n)return;const h=this.safeString(n,"message"),l=this.id+" "+o;void 0!==h&&(this.throwExactlyMatchedException(this.exceptions.exact,h,l),this.throwBroadlyMatchedException(this.exceptions.broad,h,l));const u=this.safeValue(n,"error",{}),p=this.safeString(u,"message");if(void 0!==p)throw this.throwExactlyMatchedException(this.exceptions.exact,p,l),this.throwBroadlyMatchedException(this.exceptions.broad,p,l),new a(l)}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,DDoSProtection:r,AuthenticationError:o,InvalidOrder:n,ArgumentsRequired:c}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"lbank",name:"LBank",countries:["CN"],version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!1,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"minute1","5m":"minute5","15m":"minute15","30m":"minute30","1h":"hour1","2h":"hour2","4h":"hour4","6h":"hour6","8h":"hour8","12h":"hour12","1d":"day1","1w":"week1"},urls:{logo:"https://user-images.githubusercontent.com/1294454/38063602-9605e28a-3302-11e8-81be-64b1e53c4cfb.jpg",api:"https://api.lbank.info",www:"https://www.lbank.info",doc:"https://github.com/LBank-exchange/lbank-official-api-docs",fees:"https://lbankinfo.zendesk.com/hc/en-gb/articles/360012072873-Trading-Fees",referral:"https://www.lbex.io/invite?icode=7QCY"},api:{public:{get:["currencyPairs","ticker","depth","trades","kline","accuracy"]},private:{post:["user_info","create_order","cancel_order","orders_info","orders_info_history","withdraw","withdrawCancel","withdraws","withdrawConfigs"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:void 0,ZEC:.01,ETH:.01,ETC:.01,VEN:10,BCH:2e-4,SC:50,BTM:20,NAS:1,EOS:1,XWC:5,BTS:1,INK:10,BOT:3,YOYOW:15,TGC:10,NEO:0,CMT:20,SEER:2e3,FIL:void 0,BTG:void 0}}},commonCurrencies:{VET_ERC20:"VEN",PNT:"Penta"},options:{cacheSecretAsPem:!0}})}async fetchMarkets(e={}){const t=await this.publicGetAccuracy(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=s.symbol,r=a.split("_");let o=void 0,n=void 0;r.length>2?(o=r[0]+"_"+r[1],n=r[2]):(o=r[0],n=r[1]);const c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=c+"/"+d,l={amount:this.safeInteger(s,"quantityAccuracy"),price:this.safeInteger(s,"priceAccuracy")};i.push({id:a,symbol:h,base:c,quote:d,baseId:o,quoteId:n,active:!0,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:void 0},price:{min:Math.pow(10,-l.price),max:Math.pow(10,l.price)},cost:{min:void 0,max:void 0}},info:a})}return i}parseTicker(e,t){let i=void 0;if(void 0===t){const t=this.safeString(e,"symbol");if(t in this.markets_by_id){i=this.marketsById[t].symbol}else{const e=t.split("_");let s=void 0,a=void 0;e.length>2?(s=e[0]+"_"+e[1],a=e[2]):(s=e[0],a=e[1]);i=this.safeCurrencyCode(s)+"/"+this.safeCurrencyCode(a)}}const s=this.safeInteger(e,"timestamp"),a=e;e=a.ticker;const r=this.safeFloat(e,"latest"),o=this.safeFloat(e,"change");let n=void 0;if(void 0!==o){const e=this.sum(1,o/100);e>0&&(n=r/this.sum(1,e))}let c=void 0,d=void 0;return void 0!==r&&void 0!==n&&(c=r-n,d=this.sum(r,n)/2),void 0!==t&&(i=t.symbol),{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:c,percentage:o,average:d,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"turnover"),info:a}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(this.extend({symbol:"all"},t)),s={};for(let e=0;e<i.length;e++){const t=this.parseTicker(i[e]);s[t.symbol]=t}return this.filterByArray(s,"symbol",e)}async fetchOrderBook(e,t=60,i={}){await this.loadMarkets();let s=60;void 0!==t&&(s=Math.min(t,s));const a={symbol:this.marketId(e),size:s},r=await this.publicGetDepth(this.extend(a,i));return this.parseOrderBook(r)}parseTrade(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.safeInteger(e,"date_ms"),a=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount");let o=void 0;void 0!==a&&void 0!==r&&(o=parseFloat(this.costToPrecision(i,a*r)));const n=this.safeString(e,"tid"),c=this.safeString(e,"type");return{id:n,info:this.safeValue(e,"info",e),timestamp:s,datetime:this.iso8601(s),symbol:i,order:void 0,type:void 0,side:c,takerOrMaker:void 0,price:a,amount:r,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id,size:100};void 0!==t&&(r.time=parseInt(t)),void 0!==i&&(r.size=i);const o=await this.publicGetTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}async fetchOHLCV(e,t="5m",i,s=1e3,a={}){await this.loadMarkets();const r=this.market(e);if(void 0===i)throw new c(this.id+" fetchOHLCV requires a `since` argument");if(void 0===s)throw new c(this.id+" fetchOHLCV requires a `limit` argument");const o={symbol:r.id,type:this.timeframes[t],size:s,time:parseInt(i/1e3)},n=await this.publicGetKline(this.extend(o,a));return this.parseOHLCVs(n,r,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostUserInfo(e),i={info:t},s=this.safeValue(t,"info",{}),a=this.safeValue(s,"free",{}),r=this.safeValue(s,"freeze",{}),o=this.safeValue(s,"asset",{}),n=Object.keys(a);for(let e=0;e<n.length;e++){const t=n[e],s=this.safeCurrencyCode(t),c=this.account();c.free=this.safeFloat(a,t),c.used=this.safeFloat(r,t),c.total=this.safeFloat(o,t),i[s]=c}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({"-1":"cancelled",0:"open",1:"open",2:"closed",4:"closed"},e)}parseOrder(e,t){let i=void 0;const s=this.safeValue(this.marketsById,e.symbol);void 0!==s?i=s.symbol:void 0!==t&&(i=t.symbol);const a=this.safeInteger(e,"create_time"),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount",0),n=this.safeFloat(e,"deal_amount",0),c=this.safeFloat(e,"avg_price");let d=void 0;void 0!==c&&(d=n*c);const h=this.parseOrderStatus(this.safeString(e,"status")),l=this.safeString(e,"order_id"),u=this.safeString(e,"order_type"),p=this.safeString(e,"type");let f=void 0;return void 0!==o&&void 0!==n&&(f=o-n),{id:l,clientOrderId:void 0,datetime:this.iso8601(a),timestamp:a,lastTradeTimestamp:void 0,status:h,symbol:i,type:u,timeInForce:void 0,side:p,price:r,stopPrice:void 0,cost:d,amount:o,filled:n,remaining:f,trades:void 0,fee:void 0,info:this.safeValue(e,"info",e),average:void 0}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e);let n={symbol:o.id,type:i,amount:s};"market"===t?n.type+="_market":n.price=a;const c=await this.privatePostCreateOrder(this.extend(n,r));return n=this.omit(n,"type"),n.order_id=c.order_id,n.type=i,n.order_type=t,n.create_time=this.milliseconds(),n.info=c,this.parseOrder(n,o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(t).id,order_id:e};return await this.privatePostCancelOrder(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=this.market(t),a={symbol:s.id,order_id:e},r=await this.privatePostOrdersInfo(this.extend(a,i)),o=this.safeValue(r,"orders",[]),n=this.parseOrders(o,s);return 1===n.length?n[0]:n}async fetchOrders(e,t,i,s={}){await this.loadMarkets(),void 0===i&&(i=100);const a={symbol:this.market(e).id,current_page:1,page_length:i},r=await this.privatePostOrdersInfoHistory(this.extend(a,s)),o=this.safeValue(r,"orders",[]);return this.parseOrders(o,void 0,t,i)}async fetchClosedOrders(e,t,i,s={}){const a=await this.fetchOrders(e,t,i,s),r=this.filterBy(a,"status","closed"),o=this.filterBy(a,"status","cancelled"),n=this.arrayConcat(r,o);return this.filterBySymbolSinceLimit(n,e,t,i)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r={assetCode:this.currency(e).id,amount:t,account:i};void 0!==s&&(r.memo=s);const o=this.privatePostWithdraw(this.extend(r,a));return{id:this.safeString(o,"id"),info:o}}convertSecretToPem(e){const t=e.length-0;let i=parseInt(t/64);i=this.sum(i,1);let s="-----BEGIN PRIVATE KEY-----\n";for(let e=0;e<i;e++){const t=64*e,i=this.sum(t,64);s+=this.secret.slice(t,i)+"\n"}return s+"-----END PRIVATE KEY-----"}sign(e,t="public",i="GET",s={},a,r){const o=this.omit(s,this.extractParams(e));let n=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);if(n+=".do","public"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials();const e=this.keysort(this.extend({api_key:this.apiKey},s)),t=this.rawencode(e),i=this.hash(this.encode(t)).toUpperCase();let o=void 0;this.safeValue(this.options,"cacheSecretAsPem",!0)?(o=this.safeValue(this.options,"pem"),void 0===o&&(o=this.convertSecretToPem(this.secret),this.options.pem=o)):o=this.convertSecretToPem(this.secret);const n=this.binaryToBase64(this.rsa(i,this.encode(o),"RS256"));e.sign=n,r=this.urlencode(e),a={"Content-Type":"application/x-www-form-urlencoded"}}return{url:n,method:i,body:r,headers:a}}async request(e,t="public",i="GET",s={},c,d){const h=await this.fetch2(e,t,i,s,c,d);if("false"===this.safeString(h,"result")){const e=this.safeString(h,"error_code"),t=this.safeString({1e4:"Internal error",10001:"The required parameters can not be empty",10002:"verification failed",10003:"Illegal parameters",10004:"User requests are too frequent",10005:"Key does not exist",10006:"user does not exist",10007:"Invalid signature",10008:"This currency pair is not supported",10009:"Limit orders can not be missing orders and the number of orders",10010:"Order price or order quantity must be greater than 0",10011:"Market orders can not be missing the amount of the order",10012:"market sell orders can not be missing orders",10013:"is less than the minimum trading position 0.001",10014:"Account number is not enough",10015:"The order type is wrong",10016:"Account balance is not enough",10017:"Abnormal server",10018:"order inquiry can not be more than 50 less than one",10019:"withdrawal orders can not be more than 3 less than one",10020:"less than the minimum amount of the transaction limit of 0.001",10022:"Insufficient key authority"},e,this.json(h));throw new(this.safeValue({10002:o,10004:r,10005:o,10006:o,10007:o,10009:n,10010:n,10011:n,10012:n,10013:n,10014:n,10015:n,10016:n,10022:o},e,a))(t)}return h}}},function(e,t,i){"use strict";const s=i(1),{TICK_SIZE:a}=i(2),{ExchangeError:r,ArgumentsRequired:o,InvalidNonce:n,OrderNotFound:c,InvalidOrder:d,InsufficientFunds:h,AuthenticationError:l,DDoSProtection:u,NotSupported:p}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"liquid",name:"Liquid",countries:["JP","CN","TW"],version:"2",rateLimit:1e3,has:{cancelOrder:!0,CORS:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/45798859-1a872600-bcb4-11e8-8746-69291ce87b04.jpg",api:"https://api.liquid.com",www:"https://www.liquid.com",doc:["https://developers.liquid.com"],fees:"https://help.liquid.com/getting-started-with-liquid/the-platform/fee-structure",referral:"https://www.liquid.com/sign-up/?affiliate=SbzC62lt30976"},api:{public:{get:["currencies","products","products/{id}","products/{id}/price_levels","executions","ir_ladders/{currency}","fees"]},private:{get:["accounts","accounts/balance","accounts/main_asset","accounts/{id}","accounts/{currency}/reserved_balance_details","crypto_accounts","crypto_withdrawals","executions/me","fiat_accounts","fund_infos","loan_bids","loans","orders","orders/{id}","orders/{id}/trades","trades","trades/{id}/loans","trading_accounts","trading_accounts/{id}","transactions","withdrawals"],post:["crypto_withdrawals","fund_infos","fiat_accounts","loan_bids","orders","withdrawals"],put:["crypto_withdrawal/{id}/cancel","loan_bids/{id}/close","loans/{id}","orders/{id}","orders/{id}/cancel","trades/{id}","trades/{id}/adjust_margin","trades/{id}/close","trades/close_all","trading_accounts/{id}","withdrawals/{id}/cancel"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0015,maker:0,tiers:{perpetual:{maker:[[0,0],[25e3,0],[5e4,-25e-5],[1e5,-25e-5],[1e6,-25e-5],[1e7,-25e-5],[25e6,-25e-5],[5e7,-25e-5],[75e6,-25e-5],[1e8,-25e-5],[2e8,-25e-5],[3e8,-25e-5]],taker:[[0,6e-4],[25e3,575e-6],[5e4,55e-5],[1e5,525e-6],[1e6,5e-4],[1e7,475e-6],[25e6,45e-5],[5e7,425e-6],[75e6,4e-4],[1e8,375e-6],[2e8,35e-5],[3e8,325e-6]]},spot:{taker:[[0,.0015],[1e4,.0015],[2e4,.0014],[5e4,.0013],[1e5,.001],[1e6,8e-4],[5e6,6e-4],[1e7,5e-4],[25e6,5e-4],[5e7,45e-5],[1e8,4e-4],[2e8,3e-4]],maker:[[0,0],[1e4,.0015],[2e4,.14],[5e4,.13],[1e5,.08],[1e6,4e-4],[5e6,35e-5],[1e7,25e-5],[25e6,0],[5e7,0],[1e8,0],[2e8,0]]}}}},precisionMode:a,exceptions:{"API rate limit exceeded. Please retry after 300s":u,"API Authentication failed":l,"Nonce is too small":n,"Order not found":c,"Can not update partially filled order":d,"Can not update non-live order":c,not_enough_free_balance:h,must_be_positive:d,less_than_order_size:d,price_too_high:d},commonCurrencies:{WIN:"WCOIN",HOT:"HOT Token",MIOTA:"IOTA"},options:{cancelOrderException:!0}})}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"currency"),r=this.safeCurrencyCode(a),o=s.depositable&&s.withdrawable,n=this.safeInteger(s,"display_precision"),c=this.safeInteger(s,"quoting_precision"),d=Math.max(n,c),h=1/Math.pow(10,d);i[r]={id:a,code:r,info:s,name:r,active:o,fee:this.safeFloat(s,"withdrawal_fee"),precision:h,limits:{amount:{min:Math.pow(10,-n),max:Math.pow(10,n)},price:{min:Math.pow(10,-c),max:Math.pow(10,c)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(s,"minimum_withdrawal"),max:void 0}}}}return i}async fetchMarkets(e={}){const t=await this.publicGetProducts(e),i=await this.publicGetProducts({perpetual:"1"}),s=await this.fetchCurrencies(),a=this.indexBy(s,"code"),r=[],o=this.arrayConcat(t,i);for(let e=0;e<o.length;e++){const t=o[e],i=this.safeString(t,"id"),s=this.safeString(t,"base_currency"),n=this.safeString(t,"quoted_currency");let c="spot",d=!0,h=!1;"Perpetual"===this.safeString(t,"product_type")&&(d=!1,h=!0,c="swap");const l=this.safeCurrencyCode(s),u=this.safeCurrencyCode(n);let p=void 0;p=h?this.safeString(t,"currency_pair_code"):l+"/"+u;let f=this.fees.trading.maker,m=this.fees.trading.taker;"swap"===c&&(f=this.safeFloat(t,"maker_fee",this.fees.trading.maker),m=this.safeFloat(t,"taker_fee",this.fees.trading.taker));const v=!this.safeValue(t,"disabled",!1),y=this.safeValue(a,l),g={amount:1e-8,price:this.safeFloat(t,"tick_size")};let b=void 0;void 0!==y&&(b=this.safeFloat(y.info,"minimum_order_quantity"));const w={amount:{min:b,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}};r.push({id:i,symbol:p,base:l,quote:u,baseId:s,quoteId:n,type:c,spot:d,swap:h,maker:f,taker:m,limits:w,precision:g,active:v,info:t})}return r}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccounts(e),i={info:t},s=this.safeValue(t,"crypto_accounts",[]),a=this.safeValue(t,"fiat_accounts",[]);for(let e=0;e<s.length;e++){const t=s[e],a=this.safeString(t,"currency"),r=this.safeCurrencyCode(a),o=this.account();o.total=this.safeFloat(t,"balance"),o.used=this.safeFloat(t,"reserved_balance"),i[r]=o}for(let e=0;e<a.length;e++){const t=a[e],s=this.safeString(t,"currency"),r=this.safeCurrencyCode(s),o=this.account();o.total=this.safeFloat(t,"balance"),o.used=this.safeFloat(t,"reserved_balance"),i[r]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e)},a=await this.publicGetProductsIdPriceLevels(this.extend(s,i));return this.parseOrderBook(a,void 0,"buy_price_levels","sell_price_levels")}parseTicker(e,t){const i=this.milliseconds();let s=void 0;if("last_traded_price"in e&&e.last_traded_price){e.last_traded_price.length>0&&(s=this.safeFloat(e,"last_traded_price"))}let a=void 0;if(void 0===t){const i=this.safeString(e,"id");if(i in this.markets_by_id)t=this.markets_by_id[i];else{const i=this.safeString(e,"base_currency"),s=this.safeString(e,"quoted_currency");a in this.markets?t=this.markets[a]:a=this.safeCurrencyCode(i)+"/"+this.safeCurrencyCode(s)}}void 0!==t&&(a=t.symbol);let r=void 0,o=void 0,n=void 0;const c=this.safeFloat(e,"last_price_24h");return void 0!==c&&void 0!==s&&(r=s-c,n=this.sum(s,c)/2,c>0&&(o=r/c*100)),{symbol:a,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high_market_ask"),low:this.safeFloat(e,"low_market_bid"),bid:this.safeFloat(e,"market_bid"),bidVolume:void 0,ask:this.safeFloat(e,"market_ask"),askVolume:void 0,vwap:void 0,open:c,close:s,last:s,previousClose:void 0,change:r,percentage:o,average:n,baseVolume:this.safeFloat(e,"volume_24h"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetProducts(t),s={};for(let e=0;e<i.length;e++){const t=this.parseTicker(i[e]);s[t.symbol]=t}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={id:i.id},a=await this.publicGetProductsId(this.extend(s,t));return this.parseTicker(a,i)}parseTrade(e,t){const i=this.safeTimestamp(e,"created_at"),s=this.safeString(e,"order_id"),a=this.safeString(e,"taker_side"),r=this.safeString(e,"my_side"),o=void 0!==r?r:a;let n=void 0;void 0!==r&&(n=a===r?"taker":"maker");let c=void 0;const d=this.safeFloat(e,"price"),h=this.safeFloat(e,"quantity");void 0!==d&&void 0!==h&&(c=d*h);const l=this.safeString(e,"id");let u=void 0;return void 0!==t&&(u=t.symbol),{info:e,id:l,order:s,timestamp:i,datetime:this.iso8601(i),symbol:u,type:void 0,side:o,takerOrMaker:n,price:d,amount:h,cost:c,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={product_id:a.id};void 0!==i&&(r.limit=i),void 0!==t&&(r.timestamp=parseInt(t/1e3));const o=await this.publicGetExecutions(this.extend(r,s)),n=void 0!==t?o:o.models;return this.parseTrades(n,a,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={product_id:a.id,with_details:!0};void 0!==i&&(r.limit=i);const o=await this.privateGetExecutionsMe(this.extend(r,s));return this.parseTrades(o.models,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.safeString2(r,"clientOrderId","client_order_id");r=this.omit(r,["clientOrderId","client_order_id"]);const n={order_type:t,product_id:this.marketId(e),side:i,quantity:this.amountToPrecision(e,s)};void 0!==o&&(n.client_order_id=o),"limit"!==t&&"limit_post_only"!==t&&"market_with_range"!==t&&"stop"!==t||(n.price=this.priceToPrecision(e,a));const c=await this.privatePostOrders(this.extend(n,r));return this.parseOrder(c)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privatePutOrdersIdCancel(this.extend(s,i)),r=this.parseOrder(a);if("closed"===r.status&&this.options.cancelOrderException)throw new c(this.id+" order closed already: "+this.json(a));return r}async editOrder(e,t,i,s,a,r,n={}){if(await this.loadMarkets(),void 0===r)throw new o(this.id+" editOrder requires the price argument");const c={order:{quantity:this.amountToPrecision(t,a),price:this.priceToPrecision(t,r)},id:e},d=await this.privatePutOrdersId(this.extend(c,n));return this.parseOrder(d)}parseOrderStatus(e){return this.safeString({live:"open",filled:"closed",cancelled:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeTimestamp(e,"created_at"),a=this.safeString(e,"product_id");t=this.safeValue(this.markets_by_id,a);const r=this.parseOrderStatus(this.safeString(e,"status")),o=this.safeFloat(e,"quantity");let n=this.safeFloat(e,"filled_quantity");const c=this.safeFloat(e,"price");let d=void 0,h=void 0;void 0!==t&&(d=t.symbol,h=t.quote);const l=this.safeString(e,"order_type");let u=0,p=0,f=this.safeFloat(e,"average_price");const m=this.parseTrades(this.safeValue(e,"executions",[]),t,void 0,void 0,{order:i,type:l}),v=m.length;for(let e=0;e<v;e++){const t=m[e];t.order=i,t.type=l,p=this.sum(p,t.amount),u=this.sum(u,t.cost)}let y=void 0,g=void 0;v>0&&(g=m[v-1].timestamp,!f&&p>0&&(f=u/p),void 0===y&&(y=u),void 0===n&&(n=p));let b=void 0;void 0!==o&&void 0!==n&&(b=o-n);const w=this.safeString(e,"side");return{id:i,clientOrderId:this.safeString(e,"client_order_id"),timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:g,type:l,timeInForce:void 0,status:r,symbol:d,side:w,price:c,stopPrice:void 0,amount:o,filled:n,cost:y,remaining:b,average:f,trades:m,fee:{currency:h,cost:this.safeFloat(e,"order_fee")},info:e}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privateGetOrdersId(this.extend(s,i));return this.parseOrder(a)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={with_details:1};void 0!==e&&(a=this.market(e),r.product_id=a.id),void 0!==i&&(r.limit=i);const o=await this.privateGetOrders(this.extend(r,s)),n=this.safeValue(o,"models",[]);return this.parseOrders(n,a,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"live"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"filled"},s))}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e),o={currency:r.id,address:i,amount:this.currencyToPrecision(e,t)};if(void 0!==s)if("XRP"===e)o.payment_id=s;else{if("XLM"!==e)throw new p(this.id+" withdraw() only supports a tag along the address for XRP or XLM");o.memo_type="text",o.memo_value=s}const n=await this.privatePostCryptoWithdrawals(this.extend(o,a));return this.parseTransaction(n,r)}parseTransactionStatus(e){return this.safeString({pending:"pending",cancelled:"canceled",approved:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"address"),a=this.safeString2(e,"payment_id","memo_value"),r=this.safeString(e,"asset"),o=this.safeCurrencyCode(r,t),n=this.safeTimestamp(e,"created_at"),c=this.safeTimestamp(e,"updated_at"),d=this.parseTransactionStatus(this.safeString(e,"state")),h=this.safeFloat(e,"amount");return{info:e,id:i,txid:void 0,timestamp:n,datetime:this.iso8601(n),address:s,tag:a,type:"withdrawal",amount:h,currency:o,status:d,updated:c,fee:void 0}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o="/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if(a={"X-Quoine-API-Version":this.version,"Content-Type":"application/json"},"private"===t){this.checkRequiredCredentials(),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(r=this.json(n));const e=this.nonce(),t={path:o,token_id:this.apiKey,iat:Math.floor(e/1e3)};"client_order_id"in n||(t.nonce=e),a["X-Quoine-Auth"]=this.jwt(t,this.encode(this.secret))}else Object.keys(n).length&&(o+="?"+this.urlencode(n));return o=this.urls.api+o,{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,o,n,c,d){if(e>=200&&e<300)return;if(401===e)return void this.throwExactlyMatchedException(this.exceptions,o,o);if(429===e)throw new u(this.id+" "+o);if(void 0===n)return;const h=this.id+" "+o,l=this.safeString(n,"message"),p=this.safeValue(n,"errors");if(void 0!==l)this.throwExactlyMatchedException(this.exceptions,l,h);else{if(void 0===p)throw new r(h);{const e=Object.keys(p);for(let t=0;t<e.length;t++){const i=p[e[t]];for(let e=0;e<i.length;e++){const t=i[e];this.throwExactlyMatchedException(this.exceptions,t,h)}}}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,OnMaintenance:r,BadResponse:o,ArgumentsRequired:n,AuthenticationError:c,NotSupported:d,InvalidOrder:h,OrderNotFound:l,ExchangeNotAvailable:u,RateLimitExceeded:p,InsufficientFunds:f}=i(0),{TRUNCATE:m,DECIMAL_PLACES:v}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"livecoin",name:"LiveCoin",countries:["US","UK","RU"],rateLimit:1e3,userAgent:this.userAgents.chrome,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27980768-f22fc424-638a-11e7-89c9-6010a54ff9be.jpg",api:"https://api.livecoin.net",www:"https://www.livecoin.net",doc:"https://www.livecoin.net/api?lang=en",referral:"https://livecoin.net/?from=Livecoin-CQ1hfx44"},api:{public:{get:["exchange/all/order_book","exchange/last_trades","exchange/maxbid_minask","exchange/order_book","exchange/restrictions","exchange/ticker","info/coinInfo"]},private:{get:["exchange/client_orders","exchange/order","exchange/trades","exchange/commission","exchange/commissionCommonInfo","payment/balances","payment/balance","payment/get/address","payment/history/size","payment/history/transactions"],post:["exchange/buylimit","exchange/buymarket","exchange/cancellimit","exchange/selllimit","exchange/sellmarket","payment/out/capitalist","payment/out/card","payment/out/coin","payment/out/okpay","payment/out/payeer","payment/out/perfectmoney","payment/voucher/amount","payment/voucher/make","payment/voucher/redeem"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0018,taker:.0018}},commonCurrencies:{BIT:"First Bitcoin",BTCH:"Bithash",CPC:"Capricoin",CBC:"CryptoBossCoin",CPT:"Cryptos",EDR:"E-Dinar Coin",eETT:"EETT",FirstBlood:"1ST",FORTYTWO:"42",LEO:"LeoCoin",MIOTA:"IOTA",ORE:"Orectic",PLN:"Plutaneum",RUR:"RUB",SCT:"SpaceCoin",TPI:"ThaneCoin",UNUS:"LEO",WAX:"WAXP",wETT:"WETT",XBT:"Bricktox"},exceptions:{exact:{1:a,10:c,100:a,101:c,102:c,103:h,104:h,105:h,11:c,12:c,2:c,20:c,30:c,31:d,32:a,429:p,503:u},broad:{"insufficient funds":f,"NOT FOUND":l,"Cannot find order":l,"Minimal amount is":h}}})}async fetchMarkets(e={}){const t=await this.publicGetExchangeTicker(e),i=await this.publicGetExchangeRestrictions(),s=this.indexBy(i.restrictions,"currencyPair"),a=[];for(let e=0;e<t.length;e++){const i=t[e],r=this.safeString(i,"symbol"),[o,n]=r.split("/"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=c+"/"+d,l=this.safeValue(s,h),u={price:5,amount:8,cost:8},p={amount:{min:Math.pow(10,-u.amount),max:Math.pow(10,u.amount)}};l&&(u.price=this.safeInteger(l,"priceScale",5),p.amount.min=this.safeFloat(l,"minLimitQuantity",p.amount.min)),p.price={min:Math.pow(10,-u.price),max:Math.pow(10,u.price)},a.push({id:r,symbol:h,base:c,quote:d,baseId:o,quoteId:n,active:!0,precision:u,limits:p,info:i})}return a}async fetchCurrencies(e={}){const t=await this.publicGetInfoCoinInfo(e);if("string"==typeof t)throw t.indexOf("site is under maintenance")>=0?new r(this.id+" fetchCurrencies() failed to fetch the currencies, the exchange is on maintenance"):new o(this.id+" fetchCurrencies() failed to fetch the currencies");const i=this.safeValue(t,"info");let s={};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"symbol"),r=this.safeCurrencyCode(a),o=8,n="normal"===this.safeString(t,"walletStatus"),c=this.safeString(t,"name"),d=this.safeFloat(t,"withdrawFee");s[r]={id:a,code:r,info:t,name:c,active:n,fee:d,precision:o,limits:{amount:{min:this.safeFloat(t,"minOrderAmount"),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:this.safeFloat(t,"minOrderAmount"),max:void 0},withdraw:{min:this.safeFloat(t,"minWithdrawAmount"),max:Math.pow(10,o)},deposit:{min:this.safeFloat(t,"minDepositAmount"),max:void 0}}}}return s=this.appendFiatCurrencies(s),s}appendFiatCurrencies(e){const t={info:void 0,active:!0,fee:void 0,precision:8,limits:{withdraw:{min:void 0,max:void 0},deposit:{min:void 0,max:void 0},amount:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},price:{min:Math.pow(10,-8),max:Math.pow(10,8)}},id:void 0,code:void 0,name:void 0},i=[{id:"USD",code:"USD",name:"US Dollar"},{id:"EUR",code:"EUR",name:"Euro"}];i.push({id:"RUR",code:this.safeCurrencyCode("RUR"),name:"Russian ruble"});for(let s=0;s<i.length;s++){const a=i[s];e[a.code]=this.extend(t,a)}return e}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetPaymentBalances(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"currency"),r=this.safeCurrencyCode(a);let o=void 0;o=r in i?i[r]:this.account(),"total"===s.type&&(o.total=this.safeFloat(s,"value")),"available"===s.type&&(o.free=this.safeFloat(s,"value")),"trade"===s.type&&(o.used=this.safeFloat(s,"value")),i[r]=o}return this.parseBalance(i)}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privateGetExchangeCommissionCommonInfo(e),i=this.safeFloat(t,"commission");return{info:t,maker:i,taker:i}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currencyPair:this.marketId(e),groupByPrice:"false"};void 0!==t&&(s.depth=t);const a=await this.publicGetExchangeOrderBook(this.extend(s,i)),r=this.safeInteger(a,"timestamp");return this.parseOrderBook(a,r)}parseTicker(e,t){const i=this.milliseconds();let s=void 0;t&&(s=t.symbol);const a=this.safeFloat(e,"vwap"),r=this.safeFloat(e,"volume");let o=void 0;void 0!==r&&void 0!==a&&(o=r*a);const n=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"best_bid"),bidVolume:void 0,ask:this.safeFloat(e,"best_ask"),askVolume:void 0,vwap:this.safeFloat(e,"vwap"),open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:r,quoteVolume:o,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetExchangeTicker(t),s=this.indexBy(i,"symbol"),a=Object.keys(s),r={};for(let e=0;e<a.length;e++){const t=a[e],i=this.safeMarket(t),o=i.symbol,n=s[t];r[o]=this.parseTicker(n,i)}return this.filterByArray(r,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={currencyPair:i.id},a=await this.publicGetExchangeTicker(this.extend(s,t));return this.parseTicker(a,i)}parseTrade(e,t){const i=this.safeTimestamp2(e,"time","datetime");let s=void 0;const a=this.safeFloat(e,"commission");if(void 0!==a){s={cost:a,currency:t?t.quote:void 0}}const r=this.safeString(e,"clientorderid"),o=this.safeString(e,"id"),n=this.safeStringLower(e,"type"),c=this.safeFloat(e,"quantity"),d=this.safeFloat(e,"price");let h=void 0;void 0!==c&&void 0!==d&&(h=c*d);const l=this.safeString(e,"symbol"),u=this.safeSymbol(l,t,"/");return{id:o,info:e,timestamp:i,datetime:this.iso8601(i),symbol:u,order:r,type:void 0,side:n,takerOrMaker:void 0,price:d,amount:c,cost:h,fee:s}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.market(e),a.currencyPair=r.id),void 0!==i&&(a.limit=i);const o=await this.privateGetExchangeTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={currencyPair:a.id},o=await this.publicGetExchangeLastTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},a=await this.privateGetExchangeOrder(this.extend(s,i));return this.parseOrder(a)}parseOrderStatus(e){return this.safeString({OPEN:"open",PARTIALLY_FILLED:"open",EXECUTED:"closed",CANCELLED:"canceled",PARTIALLY_FILLED_AND_CANCELLED:"canceled"},e,e)}parseOrder(e,t){let i=void 0;"lastModificationTime"in e&&(i=this.safeString(e,"lastModificationTime"),void 0!==i&&(i=i.indexOf("T")>=0?this.parse8601(i):this.safeInteger(e,"lastModificationTime")));const s=this.parseOrderStatus(this.safeString2(e,"status","orderStatus")),a=this.safeString2(e,"symbol","currencyPair"),r=this.safeSymbol(a,t,"/");let o=this.safeStringLower(e,"type"),n=void 0;if(void 0!==o){const e=o.split("_");o=e[0],n=e[1]}const c=this.safeFloat(e,"price");let d=this.safeFloat(e,"remainingQuantity");d=this.safeFloat(e,"remaining_quantity",d);const h=this.safeFloat(e,"quantity",d);let l=void 0;void 0!==d&&(l=h-d);let u=void 0;void 0!==l&&void 0!==c&&(u=l*c);const p=this.safeFloat(e,"commission_rate");let f=void 0;void 0!==u&&void 0!==p&&(f=u*p),void 0===t&&r in this.markets&&(t=this.markets[r]);let m=void 0;return void 0!==t&&(m=t.quote),{info:e,id:e.id,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:s,symbol:r,type:o,timeInForce:void 0,side:n,price:c,stopPrice:void 0,amount:h,cost:u,filled:l,remaining:d,trades:void 0,fee:{cost:f,currency:m,rate:p},average:void 0}}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.market(e),r.currencyPair=a.id),void 0!==t&&(r.issuedFrom=parseInt(t)),void 0!==i&&(r.endRow=i-1);const o=await this.privateGetExchangeClientOrders(this.extend(r,s)),n=[];let c=[];o.data&&(c=o.data);for(let e=0;e<c.length;e++){const t=c[e];n.push(this.parseOrder(t,a))}return this.sortBy(n,"timestamp")}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({openClosed:"OPEN"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({openClosed:"CLOSED"},s))}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o="privatePostExchange"+this.capitalize(i)+t,n=this.market(e),c={quantity:this.amountToPrecision(e,s),currencyPair:n.id};"limit"===t&&(c.price=this.priceToPrecision(e,a));const d=await this[o](this.extend(c,r)),h={info:d,id:d.orderId.toString()};return this.safeValue(d,"success")&&(h.status="open"),h}async cancelOrder(e,t,i={}){if(void 0===t)throw new n(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s={orderId:e,currencyPair:this.market(t).id},r=await this.privatePostExchangeCancellimit(this.extend(s,i)),o=this.safeString(r,"message",this.json(r));if("success"in r){if(!r.success)throw new h(o);if("cancelled"in r){if(r.cancelled)return{status:"canceled",info:r};throw new l(o)}}throw new a(this.id+" cancelOrder() failed: "+this.json(r))}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e);let o=i;void 0!==s&&(o+="::"+s);const n={amount:this.decimalToPrecision(t,m,r.precision,v),currency:r.id,wallet:o},c=await this.privatePostPaymentOutCoin(this.extend(n,a)),d=this.safeInteger(c,"id");if(void 0===d)throw new f(this.id+" insufficient funds to cover requested withdrawal amount post fees "+this.json(c));return{info:c,id:d}}parseTransaction(e,t){let i=void 0,s=void 0;const a=this.safeString(e,"documentId"),r=this.safeFloat(e,"amount"),o=this.safeInteger(e,"date"),n=this.safeStringLower(e,"type"),c=this.safeString(e,"fixedCurrency"),d=this.safeFloat(e,"fee"),h=this.safeCurrencyCode(c,t);"withdrawal"===n?(i=this.safeString(e,"externalKey"),s=this.safeString(e,"id")):"deposit"===n&&(s=this.safeString(e,"externalKey"),i=this.safeString(e,"id"));let l=void 0;return"deposit"===n&&(l="ok"),{info:e,id:a,currency:h,amount:r,address:s,tag:void 0,status:l,type:n,updated:void 0,txid:i,timestamp:o,datetime:this.iso8601(o),fee:{currency:h,cost:d}}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const a=this.milliseconds(),r={types:"DEPOSIT",end:a,start:void 0!==t?parseInt(t):a-25056e5};let o=void 0;void 0!==e&&(o=this.currency(e)),void 0!==i&&(r.limit=i);const n=await this.privateGetPaymentHistoryTransactions(this.extend(r,s));return this.parseTransactions(n,o,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const a=this.milliseconds(),r={types:"WITHDRAWAL",end:a,start:void 0!==t?parseInt(t):a-25056e5};let o=void 0;void 0!==e&&(o=this.currency(e)),void 0!==i&&(r.limit=i),void 0!==t&&(r.start=t);const n=await this.privateGetPaymentHistoryTransactions(this.extend(r,s));return this.parseTransactions(n,o,t,i)}async fetchDepositAddress(e,t={}){const i={currency:e},s=await this.privateGetPaymentGetAddress(this.extend(i,t));let a=this.safeString(s,"wallet"),r=void 0;if(a.indexOf(":")>=0){const e=a.split(":");a=e[0],r=e[2]}return this.checkAddress(a),{currency:e,address:a,tag:r,info:s}}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+e;const n=this.urlencode(this.keysort(s));if("GET"===i&&Object.keys(s).length&&(o+="?"+n),"private"===t){this.checkRequiredCredentials(),"POST"===i&&(r=n);const e=this.hmac(this.encode(n),this.encode(this.secret),"sha256");a={"Api-Key":this.apiKey,Sign:e.toUpperCase(),"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n)return;if(e>=300){const e=this.id+" "+o,t=this.safeString(n,"errorCode");throw this.throwExactlyMatchedException(this.exceptions.exact,t,e),new a(e)}if(!this.safeValue(n,"success",!0)){const e=this.id+" "+o,t=this.safeString2(n,"message","exception");throw void 0!==t&&this.throwBroadlyMatchedException(this.exceptions.broad,t,e),new a(e)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"luno",name:"luno",countries:["GB","SG","ZA"],rateLimit:1e3,version:"1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0},urls:{referral:"https://www.luno.com/invite/44893A",logo:"https://user-images.githubusercontent.com/1294454/27766607-8c1a69d8-5ede-11e7-930c-540b5eb9be24.jpg",api:{public:"https://api.luno.com/api",private:"https://api.luno.com/api",exchange:"https://api.luno.com/api/exchange"},www:"https://www.luno.com",doc:["https://www.luno.com/en/api","https://npmjs.org/package/bitx","https://github.com/bausmeier/node-bitx"]},api:{exchange:{get:["markets"]},public:{get:["orderbook","orderbook_top","ticker","tickers","trades"]},private:{get:["accounts/{id}/pending","accounts/{id}/transactions","balance","beneficiaries","fee_info","funding_address","listorders","listtrades","orders/{id}","quotes/{id}","withdrawals","withdrawals/{id}"],post:["accounts","accounts/{id}/name","postorder","marketorder","stoporder","funding_address","withdrawals","send","quotes","oauth2/grant"],put:["accounts/{id}/name","quotes/{id}"],delete:["quotes/{id}","withdrawals/{id}"]}}})}async fetchMarkets(e={}){const t=await this.publicGetTickers(e),i=[];for(let e=0;e<t.tickers.length;e++){const s=t.tickers[e],a=s.pair,r=a.slice(0,3),o=a.slice(3,6),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o),d=n+"/"+c;i.push({id:a,symbol:d,base:n,quote:c,baseId:r,quoteId:o,info:s,active:void 0,precision:this.precision,limits:this.limits})}return i}async fetchAccounts(e={}){const t=await this.privateGetBalance(e),i=this.safeValue(t,"balance",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"account_id"),r=this.safeString(t,"asset"),o=this.safeCurrencyCode(r);s.push({id:a,type:void 0,currency:o,info:t})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalance(e),i=this.safeValue(t,"balance",[]),s={info:t};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"asset"),r=this.safeCurrencyCode(a),o=this.safeFloat(t,"reserved"),n=this.safeFloat(t,"unconfirmed"),c=this.safeFloat(t,"balance"),d=this.account();d.used=this.sum(o,n),d.total=this.sum(c,n),s[r]=d}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s="publicGetOrderbook";void 0!==t&&t<=100&&(s+="Top");const a={pair:this.marketId(e)},r=await this[s](this.extend(a,i)),o=this.safeInteger(r,"timestamp");return this.parseOrderBook(r,o,"bids","asks","price","volume")}parseOrderStatus(e){return this.safeString({PENDING:"open"},e,e)}parseOrder(e,t){const i=this.safeInteger(e,"creation_timestamp");let s=this.parseOrderStatus(this.safeString(e,"state"));s=s;const a="ASK"===e.type?"sell":"buy",r=this.safeString(e,"pair"),o=this.safeSymbol(r,t),n=this.safeFloat(e,"limit_price"),c=this.safeFloat(e,"limit_volume"),d=this.safeFloat(e,"fee_counter"),h=this.safeFloat(e,"fee_base"),l=this.safeFloat(e,"base"),u=this.safeFloat(e,"counter");let p=void 0;void 0!==c&&void 0!==l&&(p=Math.max(0,c-l));const f={currency:void 0};d?(f.cost=d,void 0!==t&&(f.currency=t.quote)):(f.cost=h,void 0!==t&&(f.currency=t.base));return{id:this.safeString(e,"order_id"),clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:s,symbol:o,type:void 0,timeInForce:void 0,side:a,price:n,stopPrice:void 0,amount:c,filled:l,cost:u,remaining:p,trades:void 0,fee:f,info:e,average:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privateGetOrdersId(this.extend(s,i));return this.parseOrder(a)}async fetchOrdersByState(e,t,i,s,a={}){await this.loadMarkets();const r={};let o=void 0;void 0!==e&&(r.state=e),void 0!==t&&(o=this.market(t),r.pair=o.id);const n=await this.privateGetListorders(this.extend(r,a)),c=this.safeValue(n,"orders",[]);return this.parseOrders(c,o,i,s)}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersByState(void 0,e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByState("PENDING",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByState("COMPLETE",e,t,i,s)}parseTicker(e,t){const i=this.safeInteger(e,"timestamp");let s=void 0;t&&(s=t.symbol);const a=this.safeFloat(e,"last_trade");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"rolling_24_hour_volume"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s=this.indexBy(i.tickers,"pair"),a=Object.keys(s),r={};for(let e=0;e<a.length;e++){const t=a[e],i=this.safeMarket(t),o=i.symbol,n=s[t];r[o]=this.parseTicker(n,i)}return this.filterByArray(r,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},a=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(a,i)}parseTrade(e,t){const i=this.safeString(e,"order_id");let s=void 0,a=void 0;void 0!==i?(a="ASK"===e.type?"sell":"buy",s="sell"===a&&e.is_buy?"maker":"buy"!==a||e.is_buy?"taker":"maker"):a=e.is_buy?"buy":"sell";const r=this.safeFloat(e,"fee_base"),o=this.safeFloat(e,"fee_counter");let n=void 0,c=void 0;void 0!==r?0!==r&&(n=t.base,c=r):void 0!==o&&0!==o&&(n=t.quote,c=o);const d=this.safeInteger(e,"timestamp");return{info:e,id:void 0,timestamp:d,datetime:this.iso8601(d),symbol:t.symbol,order:i,type:void 0,side:a,takerOrMaker:s,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),cost:this.safeFloat(e,"counter"),fee:{cost:c,currency:n}}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={pair:a.id};void 0!==t&&(r.since=t);const o=await this.publicGetTrades(this.extend(r,s)),n=this.safeValue(o,"trades",[]);return this.parseTrades(n,a,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const a=this.market(e),o={pair:a.id};void 0!==t&&(o.since=t),void 0!==i&&(o.limit=i);const n=await this.privateGetListtrades(this.extend(o,s)),c=this.safeValue(n,"trades",[]);return this.parseTrades(c,a,t,i)}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privateGetFeeInfo(e);return{info:t,maker:this.safeFloat(t,"maker_fee"),taker:this.safeFloat(t,"taker_fee")}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();let o="privatePost";const n={pair:this.marketId(e)};"market"===t?(o+="Marketorder",n.type=i.toUpperCase(),"buy"===i?n.counter_volume=s:n.base_volume=s):(o+="Postorder",n.volume=s,n.price=a,n.type="buy"===i?"BID":"ASK");const c=await this[o](this.extend(n,r));return{info:c,id:c.order_id}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e};return await this.privatePostStoporder(this.extend(s,i))}async fetchLedgerByEntries(e,t=-1,i=1,s={}){const a={min_row:t,max_row:this.sum(t,i)};return await this.fetchLedger(e,void 0,i,this.extend(a,s))}async fetchLedger(e,t,i,s={}){await this.loadMarkets(),await this.loadAccounts();let o=void 0,n=this.safeString(s,"id"),c=this.safeValue(s,"min_row"),d=this.safeValue(s,"max_row");if(void 0===n){if(void 0===e)throw new r(this.id+" fetchLedger() requires a currency code argument if no account id specified in params");o=this.currency(e);const t=this.indexBy(this.accounts,"currency"),i=this.safeValue(t,e);if(void 0===i)throw new a(this.id+" fetchLedger() could not find account id for "+e);n=i.id}if(void 0===c&&void 0===d)d=0,c=-1e3;else if(void 0===c||void 0===d)throw new a(this.id+" fetchLedger() require both params 'max_row' and 'min_row' or neither to be defined");if(void 0!==i&&d-c>i&&(d<=0?c=d-i:c>0&&(d=c+i)),d-c>1e3)throw new a(this.id+" fetchLedger() requires the params 'max_row' - 'min_row' <= 1000");const h={id:n,min_row:c,max_row:d},l=await this.privateGetAccountsIdTransactions(this.extend(s,h)),u=this.safeValue(l,"transactions",[]);return this.parseLedger(u,o,t,i)}parseLedgerComment(e){const t=e.split(" ");let i=void 0;const s=this.safeString(t,0),a=this.safeString(t,2),r=this.safeString(t,3);let o=this.safeString({Withdrawal:"fee",Trading:"fee",Payment:"transaction",Sent:"transaction",Deposit:"transaction",Received:"transaction",Released:"released",Reserved:"reserved",Sold:"trade",Bought:"trade",Failure:"failed"},s,void 0);return void 0===o&&"fee"===a&&(o="fee"),"reserved"===o&&"order"===r&&(i=this.safeString(t,4)),{type:o,referenceId:i}}parseLedgerEntry(e,t){const i=this.safeString(e,"row_index"),s=this.safeString(e,"account_id"),a=this.safeValue(e,"timestamp"),r=this.safeString(e,"currency"),o=this.safeCurrencyCode(r,t),n=this.safeFloat(e,"available_delta"),c=this.safeFloat(e,"balance_delta"),d=this.safeFloat(e,"balance"),h=this.safeString(e,"description");let l=d,u=0;const p=this.parseLedgerComment(h),f=p.type,m=p.referenceId;let v=void 0,y=void 0;return 0!==c?(l=d-c,y="ok",u=Math.abs(c)):n<0?(y="pending",u=Math.abs(n)):n>0&&(y="canceled",u=Math.abs(n)),c>0||n>0?v="in":(c<0||n<0)&&(v="out"),{id:i,direction:v,account:s,referenceId:m,referenceAccount:void 0,type:f,currency:o,amount:u,timestamp:a,datetime:this.iso8601(a),before:l,after:d,status:y,fee:void 0,info:e}}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if(Object.keys(n).length&&(o+="?"+this.urlencode(n)),"private"===t){this.checkRequiredCredentials();const e=this.stringToBase64(this.apiKey+":"+this.secret);a={Authorization:"Basic "+this.decode(e)}}return{url:o,method:i,body:r,headers:a}}async request(e,t="public",i="GET",s={},r,o){const n=await this.fetch2(e,t,i,s,r,o);if("error"in n)throw new a(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"lykke",name:"Lykke",countries:["CH"],version:"v1",rateLimit:200,has:{CORS:!1,fetchOHLCV:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchTrades:!0,fetchMyTrades:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchBalance:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchTicker:!0},timeframes:{"1m":"Minute","5m":"Min5","15m":"Min15","30m":"Min30","1h":"Hour","4h":"Hour4","6h":"Hour6","12h":"Hour12","1d":"Day","1w":"Week","1M":"Month"},requiredCredentials:{apiKey:!0,secret:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/34487620-3139a7b0-efe6-11e7-90f5-e520cef74451.jpg",api:{mobile:"https://public-api.lykke.com/api",public:"https://hft-api.lykke.com/api",private:"https://hft-api.lykke.com/api"},test:{mobile:"https://public-api.lykke.com/api",public:"https://hft-service-dev.lykkex.net/api",private:"https://hft-service-dev.lykkex.net/api"},www:"https://www.lykke.com",doc:["https://hft-api.lykke.com/swagger/ui/","https://www.lykke.com/lykke_api"],fees:"https://www.lykke.com/trading-conditions"},api:{mobile:{get:["AssetPairs/rate","AssetPairs/rate/{assetPairId}","AssetPairs/dictionary/{market}","Assets/dictionary","Candles/history/{market}/available","Candles/history/{market}/{assetPair}/{period}/{type}/{from}/{to}","Company/ownershipStructure","Company/registrationsCount","IsAlive","Market","Market/{market}","Market/capitalization/{market}","OrderBook","OrderBook/{assetPairId}","Trades/{AssetPairId}","Trades/Last/{assetPair}/{n}"],post:["AssetPairs/rate/history","AssetPairs/rate/history/{assetPairId}"]},public:{get:["AssetPairs","AssetPairs/{id}","IsAlive","OrderBooks","OrderBooks/{AssetPairId}"]},private:{get:["Orders","Orders/{id}","Wallets","History/trades"],post:["Orders/limit","Orders/market","Orders/{id}/Cancel","Orders/v2/market","Orders/v2/limit","Orders/stoplimit","Orders/bulk"],delete:["Orders","Orders/{id}"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:0},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001},deposit:{BTC:0}}},commonCurrencies:{XPD:"Lykke XPD"}})}parseTrade(e,t){const i=this.safeString(e,"AssetPairId"),s=this.safeSymbol(i,t),a=this.safeString2(e,"id","Id"),r=this.safeString(e,"OrderId"),o=this.parse8601(this.safeString2(e,"dateTime","DateTime")),n=this.safeFloat2(e,"price","Price");let c=this.safeFloat2(e,"volume","Amount"),d=this.safeStringLower(e,"action");void 0===d&&(d=c<0?"sell":"buy"),c=Math.abs(c);const h=n*c,l={cost:0,currency:t.quote};return{id:a,info:e,timestamp:o,datetime:this.iso8601(o),symbol:s,type:void 0,order:r,side:d,takerOrMaker:void 0,price:n,amount:c,cost:h,fee:l}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e);void 0===i&&(i=100);const r={AssetPairId:a.id,skip:0,take:i},o=await this.mobileGetTradesAssetPairId(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==i&&(a.take=i),void 0!==e&&(r=this.market(e),a.assetPairId=r.id);const o=await this.privateGetHistoryTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetWallets(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"AssetId"),r=this.safeCurrencyCode(a),o=this.account();o.total=this.safeFloat(s,"Balance"),o.used=this.safeFloat(s,"Reserved"),i[r]=o}return this.parseBalance(i)}async cancelOrder(e,t,i={}){const s={id:e};return await this.privateDeleteOrdersId(this.extend(s,i))}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s=void 0;return void 0!==e&&(s=this.market(e),i.assetPairId=s.id),await this.privateDeleteOrders(this.extend(i,t))}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n={AssetPairId:o.id,OrderAction:this.capitalize(i),Volume:s,Asset:o.baseId};"limit"===t&&(n.Price=a);const c="privatePostOrdersV2"+this.capitalize(t),d=await this[c](this.extend(n,r));return{id:this.safeString(d,"Id"),info:d,clientOrderId:void 0,timestamp:void 0,datetime:void 0,lastTradeTimestamp:void 0,symbol:e,type:t,side:i,price:a=this.safeFloat(d,"Price"),amount:s,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:void 0,fee:void 0,trades:void 0}}async fetchMarkets(e={}){const t=await this.publicGetAssetPairs(),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"Id"),r=this.safeString(s,"Name"),[o,n]=r.split("/"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=c+"/"+d,l={price:this.safeInteger(s,"Accuracy"),amount:this.safeInteger(s,"InvertedAccuracy")};i.push({id:a,symbol:h,base:c,quote:d,active:!0,info:s,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:Math.pow(10,l.amount)},price:{min:Math.pow(10,-l.price),max:Math.pow(10,l.price)},cost:{min:void 0,max:void 0}},baseId:void 0,quoteId:void 0})}return i}parseTicker(e,t){const i=this.milliseconds();let s=void 0;t&&(s=t.symbol);const a=this.safeFloat(e,"lastPrice");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"volume24H"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},a=await this.mobileGetMarketMarket(this.extend(s,t));return this.parseTicker(a,i)}parseOrderStatus(e){return this.safeString({Open:"open",Pending:"open",InOrderBook:"open",Processing:"open",Matched:"closed",Cancelled:"canceled",Rejected:"rejected",Replaced:"canceled",Placed:"open"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"Status")),s=this.safeString(e,"AssetPairId"),a=this.safeSymbol(s,t),r=this.parse8601(this.safeString(e,"LastMatchTime"));let o=void 0;"Registered"in e&&e.Registered?o=this.parse8601(e.Registered):"CreatedAt"in e&&e.CreatedAt&&(o=this.parse8601(e.CreatedAt));const n=this.safeFloat(e,"Price");let c=void 0,d=this.safeFloat(e,"Volume");d<0?(c="sell",d=Math.abs(d)):c="buy";const h=Math.abs(this.safeFloat(e,"RemainingVolume")),l=d-h,u=l*n;return{info:e,id:this.safeString(e,"Id"),clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:r,symbol:a,type:void 0,timeInForce:void 0,side:c,price:n,stopPrice:void 0,cost:u,average:void 0,amount:d,filled:l,remaining:h,status:i,fee:void 0,trades:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privateGetOrdersId(this.extend(s,i));return this.parseOrder(a)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const a=await this.privateGetOrders(s);let r=void 0;return void 0!==e&&(r=this.market(e)),this.parseOrders(a,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"InOrderBook"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"Matched"},s))}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=await this.publicGetOrderBooksAssetPairId(this.extend({AssetPairId:this.marketId(e)},i)),a={timestamp:void 0,bids:[],asks:[]};let r=void 0;for(let e=0;e<s.length;e++){const t=s[e];t.IsBuy?a.bids=this.arrayConcat(a.bids,t.Prices):a.asks=this.arrayConcat(a.asks,t.Prices);const i=this.parse8601(t.Timestamp);r=void 0===r?i:Math.max(r,i)}return this.parseOrderBook(a,r,"bids","asks","Price","Volume")}parseBidAsk(e,t=0,i=1){const s=this.safeFloat(e,t);let a=this.safeFloat(e,i);return a<0&&(a=-a),[s,a]}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t]+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));return"mobile"===t||"public"===t?Object.keys(n).length&&(o+="?"+this.urlencode(n)):"private"===t&&("GET"!==i&&"DELETE"!==i||Object.keys(n).length&&(o+="?"+this.urlencode(n)),this.checkRequiredCredentials(),a={"api-key":this.apiKey,Accept:"application/json","Content-Type":"application/json"},"POST"===i&&Object.keys(s).length&&(r=this.json(s))),{url:o,method:i,body:r,headers:a}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,InvalidOrder:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"mercado",name:"Mercado Bitcoin",countries:["BR"],rateLimit:1e3,version:"v3",has:{cancelOrder:!0,CORS:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","6h":"6h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","2w":"2w"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27837060-e7c58714-60ea-11e7-9192-f05e86adb83f.jpg",api:{public:"https://www.mercadobitcoin.net/api",private:"https://www.mercadobitcoin.net/tapi",v4Public:"https://www.mercadobitcoin.com.br/v4"},www:"https://www.mercadobitcoin.com.br",doc:["https://www.mercadobitcoin.com.br/api-doc","https://www.mercadobitcoin.com.br/trade-api"]},api:{public:{get:["{coin}/orderbook/","{coin}/ticker/","{coin}/trades/","{coin}/trades/{from}/","{coin}/trades/{from}/{to}","{coin}/day-summary/{year}/{month}/{day}/"]},private:{post:["cancel_order","get_account_info","get_order","get_withdrawal","list_system_messages","list_orders","list_orderbook","place_buy_order","place_sell_order","place_market_buy_order","place_market_sell_order","withdraw_coin"]},v4Public:{get:["{coin}/candle/"]}},markets:{"BTC/BRL":{id:"BRLBTC",symbol:"BTC/BRL",base:"BTC",quote:"BRL",precision:{amount:8,price:5},suffix:"Bitcoin"},"LTC/BRL":{id:"BRLLTC",symbol:"LTC/BRL",base:"LTC",quote:"BRL",precision:{amount:8,price:5},suffix:"Litecoin"},"BCH/BRL":{id:"BRLBCH",symbol:"BCH/BRL",base:"BCH",quote:"BRL",precision:{amount:8,price:5},suffix:"BCash"},"XRP/BRL":{id:"BRLXRP",symbol:"XRP/BRL",base:"XRP",quote:"BRL",precision:{amount:8,price:5},suffix:"Ripple"},"ETH/BRL":{id:"BRLETH",symbol:"ETH/BRL",base:"ETH",quote:"BRL",precision:{amount:8,price:5},suffix:"Ethereum"},"USDC/BRL":{id:"BRLUSDC",symbol:"USDC/BRL",base:"USDC",quote:"BRL",precision:{amount:8,price:5},suffix:"USDC"}},fees:{trading:{maker:.003,taker:.7/100}}})}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={coin:this.market(e).base},a=await this.publicGetCoinOrderbook(this.extend(s,i));return this.parseOrderBook(a)}async fetchTicker(e,t={}){await this.loadMarkets();const i={coin:this.market(e).base},s=await this.publicGetCoinTicker(this.extend(i,t)),a=this.safeValue(s,"ticker",{}),r=this.safeTimestamp(a,"date"),o=this.safeFloat(a,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(a,"high"),low:this.safeFloat(a,"low"),bid:this.safeFloat(a,"buy"),bidVolume:void 0,ask:this.safeFloat(a,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(a,"vol"),quoteVolume:void 0,info:a}}parseTrade(e,t){const i=this.safeTimestamp(e,"date");let s=void 0;void 0!==t&&(s=t.symbol);const a=this.safeString(e,"tid"),r=this.safeString(e,"type"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let c=void 0;return void 0!==o&&void 0!==n&&(c=o*n),{id:a,info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,order:void 0,type:void 0,side:r,takerOrMaker:void 0,price:o,amount:n,cost:c,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e);let r="publicGetCoinTrades";const o={coin:a.base};void 0!==t&&(r+="From",o.from=parseInt(t/1e3));void 0!==this.safeInteger(s,"to")&&(r+="To");const n=await this[r](this.extend(o,s));return this.parseTrades(n,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetAccountInfo(e),i=this.safeValue(t,"response_data",{}),s=this.safeValue(i,"balance",{}),a={info:t},r=Object.keys(s);for(let e=0;e<r.length;e++){const t=r[e],i=this.safeCurrencyCode(t);if(t in s){const e=this.safeValue(s,t,{}),r=this.account();r.free=this.safeFloat(e,"available"),r.total=this.safeFloat(e,"total"),a[i]=r}}return this.parseBalance(a)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const n={coin_pair:this.marketId(e)};let c=this.capitalize(i)+"Order";if("limit"===t)c="privatePostPlace"+c,n.limit_price=this.priceToPrecision(e,a),n.quantity=this.amountToPrecision(e,s);else if(c="privatePostPlaceMarket"+c,"buy"===i){if(void 0===a)throw new o(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount");n.cost=this.priceToPrecision(e,s*a)}else n.quantity=this.amountToPrecision(e,s);const d=await this[c](this.extend(n,r));return{info:d,id:d.response_data.order.order_id.toString()}}async cancelOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" cancelOrder () requires a symbol argument");await this.loadMarkets();const s=this.market(t),a={coin_pair:s.id,order_id:e},o=await this.privatePostCancelOrder(this.extend(a,i)),n=this.safeValue(o,"response_data",{}),c=this.safeValue(n,"order",{});return this.parseOrder(c,s)}parseOrderStatus(e){return this.safeString({2:"open",3:"canceled",4:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"order_id");let s=void 0;"order_type"in e&&(s=1===e.order_type?"buy":"sell");const a=this.parseOrderStatus(this.safeString(e,"status")),r=this.safeString(e,"coin_pair");t=this.safeMarket(r,t);const o=this.safeTimestamp(e,"created_timestamp"),n={cost:this.safeFloat(e,"fee"),currency:t.quote},c=this.safeFloat(e,"limit_price"),d=this.safeFloat(e,"executed_price_avg"),h=this.safeFloat(e,"quantity"),l=this.safeFloat(e,"executed_quantity"),u=h-l,p=l*d,f=this.safeTimestamp(e,"updated_timestamp");return{info:e,id:i,clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:f,symbol:t.symbol,type:"limit",timeInForce:void 0,side:s,price:c,stopPrice:void 0,cost:p,average:d,amount:h,filled:l,remaining:u,status:a,fee:n,trades:void 0}}async fetchOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" fetchOrder () requires a symbol argument");await this.loadMarkets();const s=this.market(t),a={coin_pair:s.id,order_id:parseInt(e)},o=await this.privatePostGetOrder(this.extend(a,i)),n=this.safeValue(o,"response_data",{}),c=this.safeValue(n,"order");return this.parseOrder(c,s)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const o={coin:this.currency(e).id,quantity:t.toFixed(10),address:i};if("BRL"===e){if(!("account_ref"in a))throw new r(this.id+" requires account_ref parameter to withdraw "+e)}else if("LTC"!==e){if(!("tx_fee"in a))throw new r(this.id+" requires tx_fee parameter to withdraw "+e);if("XRP"===e)if(void 0===s){if(!("destination_tag"in a))throw new r(this.id+" requires a tag argument or destination_tag parameter to withdraw "+e)}else o.destination_tag=s}const n=await this.privatePostWithdrawCoin(this.extend(o,a));return{info:n,id:n.response_data.withdrawal.id}}parseOHLCV(e,t){return[this.safeTimestamp(e,"timestamp"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="5m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={precision:this.timeframes[t],coin:r.id.toLowerCase()};void 0!==s&&void 0!==i?(o.from=parseInt(i/1e3),o.to=this.sum(o.from,s*this.parseTimeframe(t))):void 0!==i?(o.from=parseInt(i/1e3),o.to=this.sum(this.seconds(),1)):void 0!==s&&(o.to=this.seconds(),o.from=o.to-s*this.parseTimeframe(t));const n=await this.v4PublicGetCoinCandle(this.extend(o,a)),c=this.safeValue(n,"candles",[]);return this.parseOHLCVs(c,r,t,i,s)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOrders () requires a symbol argument");await this.loadMarkets();const a=this.market(e),o={coin_pair:a.id},n=await this.privatePostListOrders(this.extend(o,s)),c=this.safeValue(n,"response_data",{}),d=this.safeValue(c,"orders",[]);return this.parseOrders(d,a,t,i)}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t]+"/";const n=this.omit(s,this.extractParams(e));if("public"===t||"v4Public"===t)o+=this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),o+=this.version+"/";const t=this.nonce();r=this.urlencode(this.extend({tapi_method:e,tapi_nonce:t},s));const i="/tapi/"+this.version+"/?"+r;a={"Content-Type":"application/x-www-form-urlencoded","TAPI-ID":this.apiKey,"TAPI-MAC":this.hmac(this.encode(i),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:r,headers:a}}async request(e,t="public",i="GET",s={},r,o){const n=await this.fetch2(e,t,i,s,r,o);if("error_message"in n)throw new a(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"mixcoins",name:"MixCoins",countries:["GB","HK"],rateLimit:1500,version:"v1",userAgent:this.userAgents.chrome,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87460810-1dd06c00-c616-11ea-9276-956f400d6ffa.jpg",api:"https://mixcoins.com/api",www:"https://mixcoins.com",doc:"https://mixcoins.com/help/api/"},api:{public:{get:["ticker/","trades/","depth/"]},private:{post:["cancel","info","orders","order","transactions","trade"]}},markets:{"BTC/USDT":{id:"btc_usdt",symbol:"BTC/USDT",base:"BTC",quote:"USDT",baseId:"btc",quoteId:"usdt",maker:.0015,taker:.0025},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc",maker:.001,taker:.0015},"BCH/BTC":{id:"bch_btc",symbol:"BCH/BTC",base:"BCH",quote:"BTC",baseId:"bch",quoteId:"btc",maker:.001,taker:.0015},"LSK/BTC":{id:"lsk_btc",symbol:"LSK/BTC",base:"LSK",quote:"BTC",baseId:"lsk",quoteId:"btc",maker:.0015,taker:.0025},"BCH/USDT":{id:"bch_usdt",symbol:"BCH/USDT",base:"BCH",quote:"USDT",baseId:"bch",quoteId:"usdt",maker:.001,taker:.0015},"ETH/USDT":{id:"eth_usdt",symbol:"ETH/USDT",base:"ETH",quote:"USDT",baseId:"eth",quoteId:"usdt",maker:.001,taker:.0015}}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostInfo(e),i=this.safeValue(t.result,"wallet"),s={info:t},a=Object.keys(i);for(let e=0;e<a.length;e++){const t=a[e],r=this.safeCurrencyCode(t),o=this.safeValue(i,t,{}),n=this.account();n.free=this.safeFloat(o,"avail"),n.used=this.safeFloat(o,"lock"),s[r]=n}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.marketId(e)},a=await this.publicGetDepth(this.extend(s,i));return this.parseOrderBook(a.result)}async fetchTicker(e,t={}){await this.loadMarkets();const i={market:this.marketId(e)},s=await this.publicGetTicker(this.extend(i,t)),a=this.safeValue(s,"result"),r=this.milliseconds(),o=this.safeFloat(a,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(a,"high"),low:this.safeFloat(a,"low"),bid:this.safeFloat(a,"buy"),bidVolume:void 0,ask:this.safeFloat(a,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(a,"vol"),quoteVolume:void 0,info:a}}parseTrade(e,t){const i=this.safeTimestamp(e,"date");let s=void 0;void 0!==t&&(s=t.symbol);const a=this.safeString(e,"id"),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=void 0;return void 0!==r&&void 0!==o&&(n=r*o),{id:a,info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:r,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market:a.id},o=await this.publicGetTrades(this.extend(r,s));return this.parseTrades(o.result,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o={market:this.marketId(e),op:i,amount:s};"market"===t?(o.order_type=1,o.price=a):o.order_type=0;const n=await this.privatePostTrade(this.extend(o,r));return{info:n,id:n.result.id.toString()}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e};return await this.privatePostCancel(this.extend(s,i))}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const e=this.nonce();r=this.urlencode(this.extend({nonce:e},s)),a={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(r),this.secret,"sha512")}}return{url:o,method:i,body:r,headers:a}}async request(e,t="public",i="GET",s={},r,o){const n=await this.fetch2(e,t,i,s,r,o);if("status"in n&&200===n.status)return n;throw new a(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(1),{AuthenticationError:a,ExchangeError:r,PermissionDenied:o,BadRequest:n,CancelPending:c,OrderNotFound:d,InsufficientFunds:h,RateLimitExceeded:l,InvalidOrder:u,AccountSuspended:p,BadSymbol:f,OnMaintenance:m}=i(0),{TRUNCATE:v}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"novadax",name:"NovaDAX",countries:["BR"],rateLimit:50,version:"v1",has:{CORS:!1,cancelOrder:!0,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"ONE_MIN","5m":"FIVE_MIN","15m":"FIFTEEN_MIN","30m":"HALF_HOU","1h":"ONE_HOU","1d":"ONE_DAY","1w":"ONE_WEE","1M":"ONE_MON"},urls:{logo:"https://user-images.githubusercontent.com/1294454/92337550-2b085500-f0b3-11ea-98e7-5794fb07dd3b.jpg",api:{public:"https://api.novadax.com",private:"https://api.novadax.com"},www:"https://www.novadax.com.br",doc:["https://doc.novadax.com/pt-BR/"],fees:"https://www.novadax.com.br/fees-and-limits",referral:"https://www.novadax.com.br/?s=ccxt"},api:{public:{get:["common/symbol","common/symbols","common/timestamp","market/tickers","market/ticker","market/depth","market/trades","market/kline/history"]},private:{get:["orders/get","orders/list","orders/fill","orders/fills","account/getBalance","account/subs","account/subs/balance","account/subs/transfer/record","wallet/query/deposit-withdraw"],post:["orders/create","orders/cancel","account/withdraw/coin","account/subs/transfer"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.005,maker:.003}},requiredCredentials:{apiKey:!0,secret:!0},exceptions:{exact:{A99999:r,A10001:n,A10002:r,A10003:a,A10004:l,A10005:o,A10006:p,A10007:n,A10011:f,A10012:f,A10013:m,A30001:d,A30002:u,A30003:u,A30004:u,A30005:u,A30006:u,A30007:h,A30008:u,A30009:u,A30010:c,A30011:u,A30012:u},broad:{}},options:{fetchOHLCV:{volume:"amount"}}})}async fetchTime(e={}){const t=await this.publicGetCommonTimestamp(e);return this.safeInteger(t,"data")}async fetchMarkets(e={}){const t=await this.publicGetCommonSymbols(e),i=[],s=this.safeValue(t,"data",[]);for(let e=0;e<s.length;e++){const t=s[e],a=this.safeString(t,"baseCurrency"),r=this.safeString(t,"quoteCurrency"),o=this.safeString(t,"symbol"),n=this.safeCurrencyCode(a),c=this.safeCurrencyCode(r),d=n+"/"+c,h={amount:this.safeInteger(t,"amountPrecision"),price:this.safeInteger(t,"pricePrecision"),cost:this.safeInteger(t,"valuePrecision")},l={amount:{min:this.safeFloat(t,"minOrderAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(t,"minOrderValue"),max:void 0}},u="ONLINE"===this.safeString(t,"status");i.push({id:o,symbol:d,base:n,quote:c,baseId:a,quoteId:r,precision:h,limits:l,info:t,active:u})}return i}parseTicker(e,t){const i=this.safeInteger(e,"timestamp"),s=this.safeString(e,"symbol"),a=this.safeSymbol(s,t,"_"),r=this.safeFloat(e,"open24h"),o=this.safeFloat(e,"lastPrice");let n=void 0,c=void 0,d=void 0;void 0!==o&&void 0!==r&&(c=o-r,n=c/r*100,d=this.sum(o,r)/2);const h=this.safeFloat(e,"baseVolume24h"),l=this.safeFloat(e,"quoteVolume24h"),u=this.vwap(h,l);return{symbol:a,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high24h"),low:this.safeFloat(e,"low24h"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:u,open:r,close:o,last:o,previousClose:void 0,change:c,percentage:n,average:d,baseVolume:h,quoteVolume:l,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.publicGetMarketTicker(this.extend(s,t)),r=this.safeValue(a,"data",{});return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketTickers(t),s=this.safeValue(i,"data",[]),a={};for(let e=0;e<s.length;e++){const t=this.parseTicker(s[e]);a[t.symbol]=t}return this.filterByArray(a,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.limit=t);const a=await this.publicGetMarketDepth(this.extend(s,i)),r=this.safeValue(a,"data",{}),o=this.safeInteger(r,"timestamp");return this.parseOrderBook(r,o,"bids","asks")}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"orderId"),a=this.safeInteger(e,"timestamp"),r=this.safeStringLower(e,"side"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let c=this.safeFloat(e,"volume");void 0===c&&void 0!==n&&void 0!==o&&(c=n*o);const d=this.safeString(e,"symbol"),h=this.safeSymbol(d,t,"_"),l=this.safeStringLower(e,"role"),u=this.safeString(e,"fee");let p=void 0;if(void 0!==u){const e=u.split(" "),t=this.safeString(e,1),i=this.safeCurrencyCode(t);p={cost:this.safeFloat(e,0),currency:i}}return{id:i,order:s,timestamp:a,datetime:this.iso8601(a),symbol:h,type:void 0,side:r,price:o,amount:n,cost:c,takerOrMaker:l,fee:p,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id};void 0!==i&&(r.limit=i);const o=await this.publicGetMarketTrades(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,a,t,i)}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={symbol:r.id,unit:this.timeframes[t]},n=this.parseTimeframe(t),c=this.seconds();if(void 0===s&&(s=3e3),void 0===i)o.from=c-s*n,o.to=c;else{const e=parseInt(i/1e3);o.from=e,o.to=this.sum(e,s*n)}const d=await this.publicGetMarketKlineHistory(this.extend(o,a)),h=this.safeValue(d,"data",[]);return this.parseOHLCVs(h,r,t,i,s)}parseOHLCV(e,t){const i=this.safeValue(this.options,"fetchOHLCV",{}),s=this.safeString(i,"volume","amount");return[this.safeTimestamp(e,"score"),this.safeFloat(e,"openPrice"),this.safeFloat(e,"highPrice"),this.safeFloat(e,"lowPrice"),this.safeFloat(e,"closePrice"),this.safeFloat(e,s)]}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountGetBalance(e),i=this.safeValue(t,"data",[]),s={info:t};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"currency"),r=this.safeCurrencyCode(a),o=this.account();o.total=this.safeFloat(t,"available"),o.free=this.safeFloat(t,"balance"),o.used=this.safeFloat(t,"hold"),s[r]=o}return this.parseBalance(s)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n=t.toUpperCase(),c=i.toUpperCase(),d={symbol:o.id,type:n,side:c};if("LIMIT"===n)d.price=this.priceToPrecision(e,a),d.amount=this.amountToPrecision(e,s);else if("MARKET"===n)if("SELL"===c)d.amount=this.amountToPrecision(e,s);else if("BUY"===c){let e=this.safeFloat(r,"value");if(this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){if(void 0!==a)void 0===e&&(e=s*a);else if(void 0===e)throw new u(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'value' extra parameter (the exchange-specific behaviour)")}else e=void 0===e?s:e;const t=o.precision.price;d.value=this.decimalToPrecision(e,v,t,this.precisionMode)}const h=await this.privatePostOrdersCreate(this.extend(d,r)),l=this.safeValue(h,"data",{});return this.parseOrder(l,o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privatePostOrdersCancel(this.extend(s,i)),r=this.safeValue(a,"data",{});return this.parseOrder(r)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privateGetOrdersGet(this.extend(s,i)),r=this.safeValue(a,"data",{});return this.parseOrder(r)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==i&&(a.limit=i),void 0!==t&&(a.fromTimestamp=t);const o=await this.privateGetOrdersList(this.extend(a,s)),n=this.safeValue(o,"data",[]);return this.parseOrders(n,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"SUBMITTED,PROCESSING,PARTIAL_FILLED,CANCELING"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"FILLED,CANCELED,REJECTED"},s))}async fetchOrderTrades(e,t,i,s,a={}){await this.loadMarkets();const r={id:e},o=await this.privateGetOrdersFill(this.extend(r,a));let n=void 0;void 0!==t&&(n=this.market(t));const c=this.safeValue(o,"data",[]);return this.parseTrades(c,n,i,s)}parseOrderStatus(e){return this.safeString({SUBMITTED:"open",PROCESSING:"open",PARTIAL_FILLED:"open",CANCELING:"open",FILLED:"closed",CANCELED:"canceled",REJECTED:"rejected"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeFloat(e,"amount"),a=this.safeFloat(e,"price"),r=this.safeFloat(e,"filledValue"),o=this.safeStringLower(e,"type"),n=this.safeStringLower(e,"side"),c=this.parseOrderStatus(this.safeString(e,"status")),d=this.safeInteger(e,"timestamp"),h=this.safeFloat(e,"averagePrice"),l=this.safeFloat(e,"filledAmount");let u=void 0;void 0!==s&&void 0!==l&&(u=Math.max(0,s-l));let p=void 0;const f=this.safeFloat(e,"filledFee");void 0!==f&&(p={cost:f,currency:void 0});const m=this.safeString(e,"symbol"),v=this.safeSymbol(m,t,"_");return{id:i,clientOrderId:void 0,info:e,timestamp:d,datetime:this.iso8601(d),lastTradeTimestamp:void 0,symbol:v,type:o,timeInForce:void 0,side:n,price:a,stopPrice:void 0,amount:s,cost:r,average:h,filled:l,remaining:u,status:c,fee:p,trades:void 0}}async withdraw(e,t,i,s,a={}){await this.loadMarkets();const r=this.currency(e),o={code:r.id,amount:this.currencyToPrecision(e,t),wallet:i};void 0!==s&&(o.tag=s);const n=await this.privatePostAccountWithdrawCoin(this.extend(o,a));return this.parseTransaction(n,r)}async fetchAccounts(e={}){const t=await this.privateGetAccountSubs(e),i=this.safeValue(t,"data",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"subId"),r=this.safeString(t,"subAccount");s.push({id:a,type:r,currency:void 0,info:t})}return s}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({type:"coin_in"},s))}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({type:"coin_out"},s))}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.currency=r.id),void 0!==i&&(a.size=i);const o=await this.privateGetWalletQueryDepositWithdraw(this.extend(a,s)),n=this.safeValue(o,"data",[]);return this.parseTransactions(n,r,t,i)}parseTransactionStatus(e){const t=e.split(" ");e=this.safeString(t,1,e);return this.safeString({Pending:"pending",confirming:"pending",SUCCESS:"ok",FAIL:"failed"},e,e)}parseTransaction(e,t){const i=this.safeString2(e,"id","data");let s=this.safeString(e,"type");"COIN_IN"===s?s="deposit":"COIN_OUT"===s&&(s="withdraw");const a=this.safeFloat(e,"amount"),r=this.safeString(e,"address"),o=this.safeString(e,"addressTag"),n=this.safeString(e,"txHash"),c=this.safeInteger(e,"createdAt"),d=this.safeInteger(e,"updatedAt"),h=this.safeString(e,"currency");return{info:e,id:i,currency:this.safeCurrencyCode(h,t),amount:a,address:r,addressTo:r,addressFrom:void 0,tag:o,tagTo:o,tagFrom:void 0,status:this.parseTransactionStatus(this.safeString(e,"state")),type:s,updated:d,txid:n,timestamp:c,datetime:this.iso8601(c),fee:void 0}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==i&&(a.limit=i),void 0!==t&&(a.fromTimestamp=t);const o=await this.privateGetOrdersFills(this.extend(a,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,r,t,i)}sign(e,t="public",i="GET",s={},a,r){const o="/"+this.version+"/"+this.implodeParams(e,s);let n=this.urls.api[t]+o;const c=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(c).length&&(n+="?"+this.urlencode(c));else if("private"===t){this.checkRequiredCredentials();const e=this.milliseconds().toString();a={"X-Nova-Access-Key":this.apiKey,"X-Nova-Timestamp":e};let t=void 0;"POST"===i?(r=this.json(c),t=this.hash(r,"md5"),a["Content-Type"]="application/json"):(Object.keys(c).length&&(n+="?"+this.urlencode(c)),t=this.urlencode(this.keysort(c)));const s=i+"\n"+o+"\n"+t+"\n"+e;a["X-Nova-Signature"]=this.hmac(this.encode(s),this.encode(this.secret))}return{url:n,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,o,n,c,d){if(void 0===n)return;const h=this.safeString(n,"code");if("A10000"!==h){const e=this.safeString(n,"message"),t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,h,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new r(t)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,AuthenticationError:r,ArgumentsRequired:o,BadRequest:n,InvalidOrder:c,InsufficientFunds:d,OrderNotFound:h,PermissionDenied:l}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"oceanex",name:"OceanEx",countries:["US"],version:"v1",rateLimit:3e3,urls:{logo:"https://user-images.githubusercontent.com/1294454/58385970-794e2d80-8001-11e9-889c-0567cd79b78e.jpg",api:"https://api.oceanex.pro",www:"https://www.oceanex.pro.com",doc:"https://api.oceanex.pro/doc/v1",referral:"https://oceanex.pro/signup?referral=VE24QX"},has:{fetchMarkets:!0,fetchCurrencies:!1,fetchTicker:!0,fetchTickers:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTrades:!0,fetchTradingLimits:!1,fetchTradingFees:!1,fetchAllTradingFees:!0,fetchFundingFees:!1,fetchTime:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchBalance:!0,createMarketOrder:!0,createOrder:!0,cancelOrder:!0,cancelOrders:!0,cancelAllOrders:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","12h":"12h","1d":"1d","1w":"1w"},api:{public:{get:["markets","tickers/{pair}","tickers_multi","order_book","order_book/multi","fees/trading","trades","timestamp"]},private:{get:["key","members/me","orders","orders/filter"],post:["orders","orders/multi","order/delete","order/delete/multi","orders/clear"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001}},commonCurrencies:{PLA:"Plair"},exceptions:{codes:{"-1":n,"-2":n,1001:n,1004:o,1006:r,1008:r,1010:r,1011:l,2001:r,2002:c,2004:h,9003:l},exact:{"market does not have a valid value":n,"side does not have a valid value":n,"Account::AccountError: Cannot lock funds":d,"The account does not exist":r}}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(this.extend({show_details:!0},e)),i=[],s=this.safeValue(t,"data");for(let e=0;e<s.length;e++){const t=s[e],a=this.safeValue(t,"id"),r=this.safeValue(t,"name");let[o,n]=r.split("/");const c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n);o=o.toLowerCase(),n=n.toLowerCase();const h=c+"/"+d;i.push({id:a,symbol:h,base:c,quote:d,baseId:o,quoteId:n,active:!0,info:t,precision:{amount:this.safeValue(t,"amount_precision"),price:this.safeValue(t,"price_precision"),base:this.safeValue(t,"ask_precision"),quote:this.safeValue(t,"bid_precision")},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeValue(t,"minimum_trading_amount"),max:void 0}}})}return i}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},a=await this.publicGetTickersPair(this.extend(s,t)),r=this.safeValue(a,"data",{});return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets(),void 0===e&&(e=this.symbols);const i={markets:this.marketIds(e)},s=await this.publicGetTickersMulti(this.extend(i,t)),a=this.safeValue(s,"data"),r={};for(let e=0;e<a.length;e++){const t=a[e],i=this.safeString(t,"market"),s=this.safeMarket(i);r[s.symbol]=this.parseTicker(t,s)}return this.filterByArray(r,"symbol",e)}parseTicker(e,t){const i=this.safeValue(e,"ticker",{}),s=this.safeTimestamp(e,"at");return{symbol:t.symbol,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"buy"),bidVolume:void 0,ask:this.safeFloat(i,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:this.safeFloat(i,"last"),last:this.safeFloat(i,"last"),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(i,"volume"),quoteVolume:void 0,info:i}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id};void 0!==t&&(s.limit=t);const a=await this.publicGetOrderBook(this.extend(s,i)),r=this.safeValue(a,"data",{}),o=this.safeTimestamp(r,"timestamp");return this.parseOrderBook(r,o)}async fetchOrderBooks(e,t,i={}){await this.loadMarkets(),void 0===e&&(e=this.symbols);const s={markets:this.marketIds(e)};void 0!==t&&(s.limit=t);const a=await this.publicGetOrderBookMulti(this.extend(s,i)),r=this.safeValue(a,"data",[]),o={};for(let e=0;e<r.length;e++){const t=r[e],i=this.safeString(t,"market"),s=this.safeSymbol(i),a=this.safeTimestamp(t,"timestamp");o[s]=this.parseOrderBook(t,a)}return o}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market:a.id};void 0!==i&&(r.limit=i);const o=await this.publicGetTrades(this.extend(r,s)),n=this.safeValue(o,"data");return this.parseTrades(n,a,t,i)}parseTrade(e,t){let i=this.safeValue(e,"side");"bid"===i?i="buy":"ask"===i&&(i="sell");const s=this.safeValue(e,"market"),a=this.safeSymbol(s,t);let r=this.safeTimestamp(e,"created_on");return void 0===r&&(r=this.parse8601(this.safeString(e,"created_at"))),{info:e,timestamp:r,datetime:this.iso8601(r),symbol:a,id:this.safeString(e,"id"),order:void 0,type:"limit",takerOrMaker:void 0,side:i,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),cost:void 0,fee:void 0}}async fetchTime(e={}){const t=await this.publicGetTimestamp(e);return this.safeTimestamp(t,"data")}async fetchAllTradingFees(e={}){const t=await this.publicGetFeesTrading(e),i=this.safeValue(t,"data"),s={};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeValue(t,"ask_fee",{}),r=this.safeValue(t,"bid_fee",{}),o=this.safeString(t,"market"),n=this.safeSymbol(o);s[n]={info:t,symbol:n,maker:this.safeFloat(a,"value"),taker:this.safeFloat(r,"value")}}return s}async fetchKey(e={}){const t=await this.privateGetKey(e);return this.safeValue(t,"data")}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetMembersMe(e),i=this.safeValue(t,"data"),s=this.safeValue(i,"accounts"),a={info:t};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeValue(t,"currency"),r=this.safeCurrencyCode(i),o=this.account();o.free=this.safeFloat(t,"balance"),o.used=this.safeFloat(t,"locked"),a[r]=o}return this.parseBalance(a)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n={market:o.id,side:i,ord_type:t,volume:this.amountToPrecision(e,s)};"limit"===t&&(n.price=this.priceToPrecision(e,a));const c=await this.privatePostOrders(this.extend(n,r)),d=this.safeValue(c,"data");return this.parseOrder(d,o)}async fetchOrder(e,t,i={}){let s=e;Array.isArray(e)||(s=[e]),await this.loadMarkets();let a=void 0;void 0!==t&&(a=this.market(t));const r={ids:s},o=await this.privateGetOrders(this.extend(r,i)),n=this.safeValue(o,"data"),c=n.length;if(void 0===n)throw new h(this.id+" could not found matching order");if(Array.isArray(e))return this.parseOrders(n,a);if(0===c)throw new h(this.id+" could not found matching order");return this.parseOrder(n[0],a)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({states:["wait"]},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({states:["done","cancel"]},s))}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchOrders requires a `symbol` argument");await this.loadMarkets();const a=this.market(e),r=this.safeValue(s,"states",["wait","done","cancel"]),n=this.omit(s,"states"),c={market:a.id,states:r,need_price:"True"};void 0!==i&&(c.limit=i);const d=await this.privateGetOrdersFilter(this.extend(c,n)),h=this.safeValue(d,"data",[]);let l=[];for(let e=0;e<h.length;e++){const s=this.safeValue(h[e],"orders",[]),r=this.parseOrderStatus(this.safeValue(h[e],"state")),o=this.parseOrders(s,a,t,i,{status:r});l=this.arrayConcat(l,o)}return l}parseOrder(e,t){const i=this.parseOrderStatus(this.safeValue(e,"state")),s=this.safeString2(e,"market","market_id"),a=this.safeSymbol(s);let r=this.safeTimestamp(e,"created_on");return void 0===r&&(r=this.parse8601(this.safeString(e,"created_at"))),{info:e,id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:a,type:this.safeValue(e,"ord_type"),timeInForce:void 0,side:this.safeValue(e,"side"),price:this.safeFloat(e,"price"),stopPrice:void 0,average:this.safeFloat(e,"avg_price"),amount:this.safeFloat(e,"volume"),remaining:this.safeFloat(e,"remaining_volume"),filled:this.safeFloat(e,"executed_volume"),status:i,cost:void 0,trades:void 0,fee:void 0}}parseOrderStatus(e){return this.safeString({wait:"open",done:"closed",cancel:"canceled"},e,e)}async createOrders(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id,orders:t},a=(await this.privatePostOrdersMulti(this.extend(s,i))).data;return this.parseOrders(a)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=await this.privatePostOrderDelete(this.extend({id:e},i)),a=this.safeValue(s,"data");return this.parseOrder(a)}async cancelOrders(e,t,i={}){await this.loadMarkets();const s=await this.privatePostOrderDeleteMulti(this.extend({ids:e},i)),a=this.safeValue(s,"data");return this.parseOrders(a)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i=await this.privatePostOrdersClear(t),s=this.safeValue(i,"data");return this.parseOrders(s)}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)if("tickers_multi"===e||"order_book/multi"===e){let e="?";const t=this.safeValue(s,"markets");for(let i=0;i<t.length;i++)e+="markets[]="+t[i]+"&";const i=this.safeValue(s,"limit");void 0!==i&&(e+="limit="+i),o+=e}else Object.keys(n).length&&(o+="?"+this.urlencode(n));else if("private"===t){this.checkRequiredCredentials();const e={uid:this.apiKey,data:n};o+="?user_jwt="+this.jwt(e,this.encode(this.secret),"RS256")}return{url:o,method:i,body:r,headers:{"Content-Type":"application/json"}}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n)return;const h=this.safeString(n,"code"),l=this.safeString(n,"message");if(void 0!==h&&"0"!==h){const e=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.codes,h,e),this.throwExactlyMatchedException(this.exceptions.exact,l,e),new a(n)}}}},function(e,t,i){"use strict";const s=i(90);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"okcoin",name:"OKCoin",countries:["CN","US"],hostname:"okcoin.com",pro:!0,urls:{logo:"https://user-images.githubusercontent.com/51840849/87295551-102fbf00-c50e-11ea-90a9-462eebba5829.jpg",www:"https://www.okcoin.com",doc:"https://www.okcoin.com/docs/en/",fees:"https://www.okcoin.com/coin-fees",referral:"https://www.okcoin.com/account/register?flag=activity&channelId=600001513"},fees:{trading:{taker:.002,maker:.001}},options:{fetchMarkets:["spot"]}})}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"paymium",name:"Paymium",countries:["FR","EU"],rateLimit:2e3,version:"v1",has:{CORS:!0,fetchBalance:!0,fetchTicker:!0,fetchTrades:!0,fetchOrderBook:!0,createOrder:!0,cancelOrder:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87153930-f0f02200-c2c0-11ea-9c0a-40337375ae89.jpg",api:"https://paymium.com/api",www:"https://www.paymium.com",fees:"https://www.paymium.com/page/help/fees",doc:["https://github.com/Paymium/api-documentation","https://www.paymium.com/page/developers"],referral:"https://www.paymium.com/page/sign-up?referral=eDAzPoRQFMvaAB8sf-qj"},api:{public:{get:["countries","data/{currency}/ticker","data/{currency}/trades","data/{currency}/depth","bitcoin_charts/{id}/trades","bitcoin_charts/{id}/depth"]},private:{get:["user","user/addresses","user/addresses/{address}","user/orders","user/orders/{uuid}","user/price_alerts","merchant/get_payment/{uuid}"],post:["user/addresses","user/orders","user/withdrawals","user/email_transfers","user/payment_requests","user/price_alerts","merchant/create_payment"],delete:["user/orders/{uuid}","user/orders/{uuid}/cancel","user/price_alerts/{id}"]}},markets:{"BTC/EUR":{id:"eur",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"btc",quoteId:"eur"}},fees:{trading:{maker:.002,taker:.002}}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUser(e),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){const a=s[e],r=this.currencyId(a),o="balance_"+r;if(o in t){const e=this.account(),s="locked_"+r;e.free=this.safeFloat(t,o),e.used=this.safeFloat(t,s),i[a]=e}}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currency:this.marketId(e)},a=await this.publicGetDataCurrencyDepth(this.extend(s,i));return this.parseOrderBook(a,void 0,"bids","asks","price","amount")}async fetchTicker(e,t={}){await this.loadMarkets();const i={currency:this.marketId(e)},s=await this.publicGetDataCurrencyTicker(this.extend(i,t)),a=this.safeTimestamp(s,"at"),r=this.safeFloat(s,"vwap"),o=this.safeFloat(s,"volume");let n=void 0;void 0!==o&&void 0!==r&&(n=o*r);const c=this.safeFloat(s,"price");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:r,open:this.safeFloat(s,"open"),close:c,last:c,previousClose:void 0,change:void 0,percentage:this.safeFloat(s,"variation"),average:void 0,baseVolume:o,quoteVolume:n,info:s}}parseTrade(e,t){const i=this.safeTimestamp(e,"created_at_int"),s=this.safeString(e,"uuid");let a=void 0;void 0!==t&&(a=t.symbol);const r=this.safeString(e,"side"),o=this.safeFloat(e,"price"),n="traded_"+t.base.toLowerCase(),c=this.safeFloat(e,n);let d=void 0;return void 0!==o&&void 0!==c&&(d=c*o),{info:e,id:s,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:a,type:void 0,side:r,takerOrMaker:void 0,price:o,amount:c,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={currency:a.id},o=await this.publicGetDataCurrencyTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o={type:this.capitalize(t)+"Order",currency:this.marketId(e),direction:i,amount:s};"market"!==t&&(o.price=a);const n=await this.privatePostUserOrders(this.extend(o,r));return{info:n,id:n.uuid}}async cancelOrder(e,t,i={}){const s={uuid:e};return await this.privateDeleteUserOrdersUuidCancel(this.extend(s,i))}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce().toString();let t=e+o;if(a={"Api-Key":this.apiKey,"Api-Nonce":e},"POST"===i)Object.keys(n).length&&(t+=r=this.json(n),a["Content-Type"]="application/json");else if(Object.keys(n).length){const e=this.urlencode(n);t+=e,o+="?"+e}a["Api-Signature"]=this.hmac(this.encode(t),this.encode(this.secret))}return{url:o,method:i,body:r,headers:a}}async request(e,t="public",i="GET",s={},r,o){const n=await this.fetch2(e,t,i,s,r,o);if("errors"in n)throw new a(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,BadSymbol:r,AuthenticationError:o,InsufficientFunds:n,InvalidOrder:c,ArgumentsRequired:d,OrderNotFound:h,BadRequest:l,PermissionDenied:u,AccountSuspended:p,CancelPending:f,DDoSProtection:m,DuplicateOrderId:v,NotSupported:y}=i(0),{TICK_SIZE:g,ROUND:b,DECIMAL_PLACES:w}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"phemex",name:"Phemex",countries:["CN"],rateLimit:100,version:"v1",certified:!1,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,fetchWithdrawals:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/85225056-221eb600-b3d7-11ea-930d-564d2690e3f6.jpg",test:{v1:"https://testnet-api.phemex.com/v1",public:"https://testnet-api.phemex.com/exchange/public",private:"https://testnet-api.phemex.com"},api:{v1:"https://api.phemex.com/v1",public:"https://api.phemex.com/exchange/public",private:"https://api.phemex.com"},www:"https://phemex.com",doc:"https://github.com/phemex/phemex-api-docs",fees:"https://phemex.com/fees-conditions",referral:"https://phemex.com/register?referralCode=EDNVJ"},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","3h":"10800","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800","1M":"2592000"},api:{public:{get:["cfg/v2/products","products","nomics/trades","md/kline"]},v1:{get:["md/orderbook","md/trade","md/ticker/24hr","md/ticker/24hr/all","md/spot/ticker/24hr","md/spot/ticker/24hr/all","exchange/public/products"]},private:{get:["spot/orders/active","spot/orders","spot/wallets","exchange/spot/order","exchange/spot/order/trades","accounts/accountPositions","orders/activeList","exchange/order/list","exchange/order","exchange/order/trade","phemex-user/users/children","phemex-user/wallets/v2/depositAddress","exchange/margins/transfer","exchange/wallets/confirm/withdraw","exchange/wallets/withdrawList","exchange/wallets/depositList","exchange/wallets/v2/depositAddress"],post:["spot/orders","orders","positions/assign","exchange/wallets/transferOut","exchange/wallets/transferIn","exchange/margins","exchange/wallets/createWithdraw","exchange/wallets/cancelWithdraw","exchange/wallets/createWithdrawAddress"],put:["spot/orders","orders/replace","positions/leverage","positions/riskLimit"],delete:["spot/orders","orders/cancel","orders","orders/all"]}},precisionMode:g,fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},requiredCredentials:{apiKey:!0,secret:!0},exceptions:{exact:{412:l,6001:l,19999:l,10001:v,10002:h,10003:f,10004:f,10005:f,11001:n,11002:c,11003:n,11004:c,11005:n,11006:a,11007:a,11008:a,11009:a,11010:n,11011:c,11012:c,11013:c,11014:c,11015:c,11016:l,11017:a,11018:a,11019:a,11020:a,11021:a,11022:p,11023:a,11024:a,11025:l,11026:a,11027:r,11028:r,11029:a,11030:a,11031:m,11032:m,11033:v,11034:c,11035:c,11036:c,11037:c,11038:c,11039:c,11040:c,11041:c,11042:c,11043:c,11044:c,11045:c,11046:c,11047:c,11048:c,11049:c,11050:c,11051:c,11052:c,11053:c,11054:c,11055:c,11056:c,11057:c,11058:c,11059:c,11060:c,11061:f,11062:c,11063:c,11064:c,11065:c,11066:c,11067:c,11068:c,11069:a,11070:r,11071:c,11072:c,11073:c,11074:c,11075:c,11076:c,11077:c,11078:c,11079:c,11080:c,11081:c,11082:n,11083:c,11084:c,11085:v,11086:c,11087:c,11088:c,11089:c,11090:c,11091:c,11092:c,11093:c,11094:c,11095:c,11096:c,11097:l,11098:l,11099:a,11100:n,11101:n,11102:l,11103:l,11104:l,11105:n,11106:n,11107:a,11108:c,11109:c,11110:c,11111:c,11112:c,11113:l,11114:c,11115:c,30018:l,39996:u},broad:{"Failed to find api-key":o,"Missing required parameter":l,"API Signature verification failed":o}},options:{"x-phemex-request-expiry":60,createOrderByQuoteRequiresPrice:!0}})}parseSafeFloat(e){if(void 0===e)return e;const t=(e=e.replace(",","")).split(" ");return this.safeFloat(t,0)}parseSwapMarket(e){const t=this.safeString(e,"symbol"),i=this.safeString(e,"baseCurrency","contractUnderlyingAssets"),s=this.safeString(e,"quoteCurrency"),a=this.safeCurrencyCode(i),r=this.safeCurrencyCode(s),o=a+"/"+r,n=this.safeStringLower(e,"type");let c=void 0,d=void 0,h=!1;this.safeString(e,"settlementCurrency")!==s&&(h=!0);const l=!h,u={amount:this.safeFloat(e,"lotSize"),price:this.safeFloat(e,"tickSize")},p=this.safeInteger(e,"priceScale"),f=this.safeInteger(e,"ratioScale"),m=this.safeInteger(e,"valueScale"),v=this.safeFloat(e,"minPriceEp"),y=this.safeFloat(e,"maxPriceEp"),g=this.safeFloat(e,"makerFeeRateEr"),b=this.safeFloat(e,"takerFeeRateEr");void 0!==g&&(d=this.fromEn(g,f,1e-8)),void 0!==b&&(c=this.fromEn(b,f,1e-8));return{id:t,symbol:o,base:a,quote:r,baseId:i,quoteId:s,info:e,type:n,spot:!1,swap:!0,linear:l,inverse:h,active:void 0,taker:c,maker:d,priceScale:p,valueScale:m,ratioScale:f,precision:u,limits:{amount:{min:u.amount,max:void 0},price:{min:this.fromEn(v,p,u.price),max:this.fromEn(y,p,u.price)},cost:{min:void 0,max:this.parseSafeFloat(this.safeString(e,"maxOrderQty"))}}}}parseSpotMarket(e){const t=this.safeStringLower(e,"type"),i=this.safeString(e,"symbol"),s=this.safeString(e,"quoteCurrency"),a=this.safeString(e,"baseCurrency"),r=this.safeFloat(e,"defaultTakerFee"),o=this.safeFloat(e,"defaultMakerFee"),n={amount:this.parseSafeFloat(this.safeString(e,"baseTickSize")),price:this.parseSafeFloat(this.safeString(e,"quoteTickSize"))},c={amount:{min:n.amount,max:this.parseSafeFloat(this.safeString(e,"maxBaseOrderSize"))},price:{min:n.price,max:void 0},cost:{min:this.parseSafeFloat(this.safeString(e,"minOrderValue")),max:this.parseSafeFloat(this.safeString(e,"maxOrderValue"))}},d=this.safeCurrencyCode(a),h=this.safeCurrencyCode(s);return{id:i,symbol:d+"/"+h,base:d,quote:h,baseId:a,quoteId:s,info:e,type:t,spot:!0,swap:!1,linear:void 0,inverse:void 0,active:void 0,taker:r,maker:o,precision:n,priceScale:8,valueScale:8,ratioScale:8,limits:c}}async fetchMarkets(e={}){const t=await this.publicGetCfgV2Products(e),i=await this.v1GetExchangePublicProducts(e),s=this.safeValue(i,"data",[]),a=this.safeValue(t,"data",{}),r=this.safeValue(a,"products",[]),o=this.safeValue(a,"riskLimits",[]),n=this.indexBy(o,"symbol"),c=this.indexBy(s,"symbol"),d=[];for(let e=0;e<r.length;e++){let t=r[e];if("perpetual"===this.safeStringLower(t,"type")){const e=this.safeString(t,"symbol"),i=this.safeValue(n,e,{});t=this.extend(t,i);const s=this.safeValue(c,e,{});t=this.extend(t,s),t=this.parseSwapMarket(t)}else t=this.parseSpotMarket(t);d.push(t)}return d}async fetchCurrencies(e={}){const t=await this.publicGetCfgV2Products(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"currencies",[]),a={};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"currency"),r=this.safeString(t,"name"),o=this.safeCurrencyCode(i),n=this.safeInteger(t,"valueScale"),c=this.safeFloat(t,"minValueEv"),d=this.safeFloat(t,"maxValueEv");let h=void 0,l=void 0,u=void 0;void 0!==n&&(u=Math.pow(10,-n),u=parseFloat(this.decimalToPrecision(u,b,1e-8,this.precisionMode)),void 0!==c&&(h=parseFloat(this.decimalToPrecision(c*u,b,1e-8,this.precisionMode))),void 0!==d&&(l=parseFloat(this.decimalToPrecision(d*u,b,1e-8,this.precisionMode)))),a[o]={id:i,info:t,code:o,name:r,active:void 0,fee:void 0,precision:u,limits:{amount:{min:h,max:l},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}},valueScale:n}}return a}parseBidAsk(e,t=0,i=1,s){if(void 0===s)throw new d(this.id+" parseBidAsk requires a market argument");let a=this.safeFloat(e,i);return s.spot&&(a=this.fromEv(a,s)),[this.fromEp(this.safeFloat(e,t),s),a]}parseOrderBook(e,t,i="bids",s="asks",a=0,r=1,o){const n={timestamp:t,datetime:this.iso8601(t),nonce:void 0},c=[i,s];for(let t=0;t<c.length;t++){const i=c[t],s=[],d=this.safeValue(e,i);for(let e=0;e<d.length;e++)s.push(this.parseBidAsk(d[e],a,r,o));n[i]=s}return n[i]=this.sortBy(n[i],0,!0),n[s]=this.sortBy(n[s],0),n}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),a={symbol:s.id},r=await this.v1GetMdOrderbook(this.extend(a,i)),o=this.safeValue(r,"result",{}),n=this.safeValue(o,"book",{}),c=this.safeIntegerProduct(o,"timestamp",1e-6),d=this.parseOrderBook(n,c,"bids","asks",0,1,s);return d.nonce=this.safeInteger(o,"sequence"),d}toEn(e,t,i){return parseInt(this.decimalToPrecision(e*Math.pow(10,t),b,i,w))}toEv(e,t){return void 0===e||void 0===t?e:this.toEn(e,t.valueScale,0)}toEp(e,t){return void 0===e||void 0===t?e:this.toEn(e,t.priceScale,0)}fromEn(e,t,i,s){return s=void 0===s?this.precisionMode:s,parseFloat(this.decimalToPrecision(e*Math.pow(10,-t),b,i,s))}fromEp(e,t){return void 0===e||void 0===t?e:this.fromEn(e,t.priceScale,t.precision.price)}fromEv(e,t){return void 0===e||void 0===t?e:t.spot?this.fromEn(e,t.valueScale,t.precision.amount):this.fromEn(e,t.valueScale,1/Math.pow(10,t.valueScale))}fromEr(e,t){return void 0===e||void 0===t?e:this.fromEn(e,t.ratioScale,1e-8)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.fromEp(this.safeFloat(e,3),t),this.fromEp(this.safeFloat(e,4),t),this.fromEp(this.safeFloat(e,5),t),this.fromEp(this.safeFloat(e,6),t),this.fromEv(this.safeFloat(e,7),t)]}async fetchOHLCV(e,t="1m",i,s,a={}){const r={resolution:this.timeframes[t]},o=this.parseTimeframe(t),n=this.seconds();if(void 0!==i)void 0===s&&(s=2e3),i=parseInt(i/1e3),r.from=i,r.to=Math.min(n,this.sum(i,o*s));else{if(void 0===s)throw new d(this.id+" fetchOHLCV requires a since argument, or a limit argument, or both");s=Math.min(s,2e3),r.from=n-o*this.sum(s,1),r.to=n}await this.loadMarkets();const c=this.market(e);r.symbol=c.id;const h=await this.publicGetMdKline(this.extend(r,a)),l=this.safeValue(h,"data",{}),u=this.safeValue(l,"rows",[]);return this.parseOHLCVs(u,c,t,i,s)}parseTicker(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t),a=this.safeIntegerProduct(e,"timestamp",1e-6),r=this.fromEp(this.safeFloat(e,"lastEp"),t),o=this.fromEp(this.safeFloat(e,"turnoverEv"),t);let n=this.safeFloat(e,"volume");void 0===n&&(n=this.fromEv(this.safeFloat(e,"volumeEv")));let c=void 0;void 0!==t&&t.spot&&(c=this.vwap(n,o));let d=void 0,h=void 0,l=void 0;const u=this.fromEp(this.safeFloat(e,"openEp"),t);void 0!==u&&void 0!==r&&(d=r-u,u>0&&(h=d/u*100),l=this.sum(u,r)/2);return{symbol:s,timestamp:a,datetime:this.iso8601(a),high:this.fromEp(this.safeFloat(e,"highEp"),t),low:this.fromEp(this.safeFloat(e,"lowEp"),t),bid:this.fromEp(this.safeFloat(e,"bidEp"),t),bidVolume:void 0,ask:this.fromEp(this.safeFloat(e,"askEp"),t),askVolume:void 0,vwap:c,open:u,close:r,last:r,previousClose:void 0,change:d,percentage:h,average:l,baseVolume:n,quoteVolume:o,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=i.spot?"v1GetMdSpotTicker24hr":"v1GetMdTicker24hr",r=await this[a](this.extend(s,t)),o=this.safeValue(r,"result",{});return this.parseTicker(o,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id},o=await this.v1GetMdTrade(this.extend(r,s)),n=this.safeValue(o,"result",{}),c=this.safeValue(n,"trades",[]);return this.parseTrades(c,a,t,i)}parseTrade(e,t){let i=void 0,s=void 0,a=void 0,r=void 0,o=void 0,n=void 0,c=void 0,d=void 0;const h=this.safeString(e,"symbol"),l=(t=this.safeMarket(h,t)).symbol;let u=void 0,p=void 0;if(Array.isArray(e)){const c=e.length;a=this.safeIntegerProduct(e,0,1e-6),c>4&&(r=this.safeString(e,c-4)),o=this.safeStringLower(e,c-3),i=this.fromEp(this.safeFloat(e,c-2),t),s=this.fromEv(this.safeFloat(e,c-1),t),t.spot&&void 0!==i&&void 0!==s&&(n=i*s)}else{a=this.safeIntegerProduct(e,"transactTimeNs",1e-6),r=this.safeString2(e,"execId","execID"),u=this.safeString(e,"orderID"),o=this.safeStringLower(e,"side"),c=this.parseOrderType(this.safeString(e,"ordType"));"MakerFill"===this.safeString(e,"execStatus")&&(p="maker"),i=this.fromEp(this.safeFloat(e,"execPriceEp"),t),s=this.fromEv(this.safeFloat(e,"execBaseQtyEv"),t),s=this.safeFloat(e,"execQty",s),n=this.fromEv(this.safeFloat2(e,"execQuoteQtyEv","execValueEv"),t);const h=this.fromEv(this.safeFloat(e,"execFeeEv"),t);if(void 0!==h){let i=void 0,s=this.safeFloat(e,"feeRateEr");s<0?(s=Math.abs(s),i=this.fromEr(s,t),i=-i):i=this.fromEr(s,t);let a=void 0;if(t.spot)a="buy"===o?t.base:t.quote;else{const e=this.safeValue(t,"info");if(void 0!==e){const t=this.safeString(e,"settlementCurrency");a=this.safeCurrencyCode(t)}}d={cost:h,rate:i,currency:a}}}return{info:e,id:r,symbol:l,timestamp:a,datetime:this.iso8601(a),order:u,type:c,side:o,takerOrMaker:p,price:i,amount:s,cost:n,fee:d}}parseSpotBalance(e){const t={info:e},i=this.safeValue(e,"data",[]);for(let e=0;e<i.length;e++){const s=i[e],a=this.safeString(s,"currency"),r=this.safeCurrencyCode(a),o=this.safeValue(this.currencies,r,{}),n=this.safeInteger(o,"valueScale",8),c=this.account(),d=this.safeFloat(s,"balanceEv"),h=this.safeFloat(s,"lockedTradingBalanceEv"),l=this.safeFloat(s,"lockedWithdrawEv"),u=this.fromEn(d,n,n,w),p=this.fromEn(h,n,n,w),f=this.fromEn(l,n,n,w),m=this.sum(p,f);c.total=u,c.used=m,t[r]=c}return this.parseBalance(t)}parseSwapBalance(e){const t={info:e},i=this.safeValue(e,"data",{}),s=this.safeValue(i,"account",{}),a=this.safeString(s,"currency"),r=this.safeCurrencyCode(a),o=this.currency(r),n=this.account(),c=this.safeFloat(s,"accountBalanceEv"),d=this.safeFloat(s,"totalUsedBalanceEv"),h=this.safeInteger(o,"valueScale",8);return n.total=this.fromEn(c,h,h,w),n.used=this.fromEn(d,h,h,w),t[r]=n,this.parseBalance(t)}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString2(this.options,"defaultType","fetchBalance","spot"),i=this.safeString(e,"type",t);let s="privateGetSpotWallets";const a={};if("swap"===i){const t=this.safeString(e,"code");if(void 0!==t){const i=this.currency(t);a.currency=i.id,e=this.omit(e,"code")}else{if(void 0===this.safeString(e,"currency"))throw new d(this.id+" fetchBalance requires a code parameter or a currency parameter for "+i+" type")}s="privateGetAccountsAccountPositions"}e=this.omit(e,"type");const r=await this[s](this.extend(a,e));return"swap"===i?this.parseSwapBalance(r):this.parseSpotBalance(r)}parseOrderStatus(e){return this.safeString({Created:"open",Untriggered:"open",Deactivated:"closed",Triggered:"open",Rejected:"rejected",New:"open",PartiallyFilled:"open",Filled:"closed",Canceled:"canceled"},e,e)}parseOrderType(e){return this.safeString({Limit:"limit",Market:"market"},e,e)}parseTimeInForce(e){return this.safeString({GoodTillCancel:"GTC",PostOnly:"PO",ImmediateOrCancel:"IOC",FillOrKill:"FOK"},e,e)}parseSpotOrder(e,t){const i=this.safeString(e,"orderID");let s=this.safeString(e,"clOrdID");void 0!==s&&s.length<1&&(s=void 0);const a=this.safeString(e,"symbol"),r=this.safeSymbol(a,t);let o=this.fromEp(this.safeFloat(e,"priceEp"),t);0===o&&(o=void 0);const n=this.fromEv(this.safeFloat(e,"baseQtyEv"),t),c=this.fromEv(this.safeFloat(e,"leavesBaseQtyEv"),t);let d=this.fromEv(this.safeFloat(e,"cumBaseQtyEv"),t);const h=this.fromEv(this.safeFloat(e,"quoteQtyEv"),t),l=this.fromEp(this.safeFloat(e,"avgPriceEp"),t),u=this.parseOrderStatus(this.safeString(e,"ordStatus")),p=this.safeStringLower(e,"side"),f=this.parseOrderType(this.safeString(e,"ordType")),m=this.safeIntegerProduct2(e,"actionTimeNs","createTimeNs",1e-6);let v=void 0;const y=this.fromEv(this.safeFloat(e,"cumFeeEv"),t);void 0!==y&&(v={cost:y,currency:void 0}),void 0===d&&void 0!==n&&void 0!==c&&(d=Math.min(0,n-c));const g=this.parseTimeInForce(this.safeString(e,"timeInForce")),b=this.fromEp(this.safeFloat(e,"stopPxEp",t));return{info:e,id:i,clientOrderId:s,timestamp:m,datetime:this.iso8601(m),lastTradeTimestamp:void 0,symbol:r,type:f,timeInForce:g,side:p,price:o,stopPrice:b,amount:n,cost:h,average:l,filled:d,remaining:c,status:u,fee:v,trades:void 0}}parseSwapOrder(e,t){const i=this.safeString(e,"orderID");let s=this.safeString(e,"clOrdID");void 0!==s&&s.length<1&&(s=void 0);const a=this.safeString(e,"symbol"),r=this.safeSymbol(a,t),o=this.parseOrderStatus(this.safeString(e,"ordStatus")),n=this.safeStringLower(e,"side"),c=this.parseOrderType(this.safeString(e,"orderType")),d=this.fromEp(this.safeFloat(e,"priceEp"),t),h=this.safeFloat(e,"orderQty"),l=this.safeFloat(e,"cumQty"),u=this.safeFloat(e,"leavesQty"),p=this.safeIntegerProduct(e,"actionTimeNs",1e-6),f=this.safeFloat(e,"cumValue");let m=this.safeIntegerProduct(e,"transactTimeNs",1e-6);0===m&&(m=void 0);const v=this.parseTimeInForce(this.safeString(e,"timeInForce")),y=this.safeFloat(e,"stopPx");return{info:e,id:i,clientOrderId:s,datetime:this.iso8601(p),timestamp:p,lastTradeTimestamp:m,symbol:r,type:c,timeInForce:v,side:n,price:d,stopPrice:y,amount:h,filled:l,remaining:u,cost:f,average:void 0,status:o,fee:void 0,trades:void 0}}parseOrder(e,t){return"closedPnl"in e?this.parseSwapOrder(e,t):this.parseSpotOrder(e,t)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e);i=this.capitalize(i),t=this.capitalize(t);const n={symbol:o.id,side:i,ordType:t};if(o.spot){let e=this.safeValue(r,"qtyType","ByBase");if(void 0!==a&&(e="ByQuote"),n.qtyType=e,"ByQuote"===e){let t=this.safeFloat(r,"cost");if(r=this.omit(r,"cost"),this.options.createOrderByQuoteRequiresPrice)if(void 0!==a)t=s*a;else if(void 0===t)throw new d(this.id+" createOrder "+e+" requires a price argument or a cost parameter");t=void 0===t?s:t,n.quoteQtyEv=this.toEp(t,o)}else n.baseQtyEv=this.toEv(s,o)}else o.swap&&(n.orderQty=parseInt(s));"Limit"===t&&(n.priceEp=this.toEp(a,o));const c=this.safeFloat2(r,"stopPx","stopPrice");void 0!==c&&(n.stopPxEp=this.toEp(c,o)),r=this.omit(r,["stopPx","stopPrice"]);const h=o.spot?"privatePostSpotOrders":"privatePostOrders",l=await this[h](this.extend(n,r)),u=this.safeValue(l,"data",{});return this.parseOrder(u,o)}async cancelOrder(e,t,i={}){if(void 0===t)throw new d(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a={symbol:s.id},r=this.safeString2(i,"clientOrderId","clOrdID");i=this.omit(i,["clientOrderId","clOrdID"]),void 0!==r?a.clOrdID=r:a.orderID=e;const o=s.spot?"privateDeleteSpotOrders":"privateDeleteOrdersCancel",n=await this[o](this.extend(a,i)),c=this.safeValue(n,"data",{});return this.parseOrder(c,s)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s=void 0;if(void 0!==e){if(s=this.market(e),!s.swap)throw new y(this.id+" cancelAllOrders() supports swap market type orders only");i.symbol=s.id}return await this.privateDeleteOrdersAll(this.extend(i,t))}async fetchOrder(e,t,i={}){if(void 0===t)throw new d(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a=s.spot?"privateGetSpotOrdersActive":"privateGetExchangeOrder",r={symbol:s.id},o=this.safeString2(i,"clientOrderId","clOrdID");i=this.omit(i,["clientOrderId","clOrdID"]),void 0!==o?r.clOrdID=o:r.orderID=e;const n=await this[a](this.extend(r,i)),c=this.safeValue(n,"data",{});let l=c;if(Array.isArray(c)){if(c.length<1)throw new h(void 0!==o?this.id+" fetchOrder "+t+" order with clientOrderId "+o+" not found":this.id+" fetchOrder "+t+" order with id "+e+" not found");l=this.safeValue(c,0,{})}return this.parseOrder(l,s)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e),r=a.spot?"privateGetSpotOrders":"privateGetExchangeOrderList",o={symbol:a.id};void 0!==t&&(o.start=t),void 0!==i&&(o.limit=i);const n=await this[r](this.extend(o,s)),c=this.safeValue(n,"data",{}),h=this.safeValue(c,"rows",[]);return this.parseOrders(h,a,t,i)}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchOpenOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e),r=a.spot?"privateGetSpotOrders":"privateGetOrdersActiveList",o={symbol:a.id};try{const e=await this[r](this.extend(o,s)),n=this.safeValue(e,"data",{});if(Array.isArray(n))return this.parseOrders(n,a,t,i);{const e=this.safeValue(n,"rows",[]);return this.parseOrders(e,a,t,i)}}catch(e){return[]}}async fetchClosedOrders(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchClosedOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e),r=a.spot?"privateGetExchangeSpotOrder":"privateGetExchangeOrderList",o={symbol:a.id};void 0!==t&&(o.start=t),void 0!==i&&(o.limit=i);const n=await this[r](this.extend(o,s)),c=this.safeValue(n,"data",{});if(Array.isArray(c))return this.parseOrders(c,a,t,i);{const e=this.safeValue(c,"rows",[]);return this.parseOrders(e,a,t,i)}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchClosedOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e),r=a.spot?"privateGetExchangeSpotOrderTrades":"privateGetExchangeOrderTrade",o={symbol:a.id};void 0!==t&&(o.start=t),a.swap&&void 0!==i&&(o.limit=i);const n=await this[r](this.extend(o,s)),c=this.safeValue(n,"data",{}),h=this.safeValue(c,"rows",[]);return this.parseTrades(h,a,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetPhemexUserWalletsV2DepositAddress(this.extend(i,t)),a=this.safeValue(s,"data",{}),r=this.safeString(a,"address"),o=this.safeString(a,"tag");return this.checkAddress(r),{currency:e,address:r,tag:o,info:s}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();let a=void 0;void 0!==e&&(a=this.currency(e));const r=await this.privateGetExchangeWalletsDepositList(s),o=this.safeValue(r,"data",{});return this.parseTransactions(o,a,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();let a=void 0;void 0!==e&&(a=this.currency(e));const r=await this.privateGetExchangeWalletsWithdrawList(s),o=this.safeValue(r,"data",{});return this.parseTransactions(o,a,t,i)}parseTransactionStatus(e){return this.safeString({Success:"ok",Succeed:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"address"),a=this.safeString(e,"txHash"),r=this.safeString(e,"currency"),o=(t=this.safeCurrency(r,t)).code,n=this.safeInteger(e,"createdAt");let c=this.safeStringLower(e,"type");const d=this.fromEn(this.safeFloat(e,"feeEv"),t.valueScale,t.precision);let h=void 0;void 0!==d&&(c="withdrawal",h={cost:d,currency:o});const l=this.parseTransactionStatus(this.safeString(e,"status")),u=this.fromEn(this.safeFloat(e,"amountEv"),t.valueScale,t.precision);return{info:e,id:i,txid:a,timestamp:n,datetime:this.iso8601(n),address:s,addressTo:s,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,type:c,amount:u,currency:o,status:l,updated:void 0,fee:h}}async fetchPositions(e,t,i,s={}){await this.loadMarkets();const a=this.safeString(s,"code"),r={};if(void 0===a){if(void 0===this.safeString(s,"currency"))throw new d(this.id+" fetchPositions() requires a currency parameter or a code parameter")}else{const e=this.currency(a);s=this.omit(s,"code"),r.currency=e.id}const o=await this.privateGetAccountsAccountPositions(this.extend(r,s)),n=this.safeValue(o,"data",{});return this.safeValue(n,"positions",[])}sign(e,t="public",i="GET",s={},a,r){const o=this.omit(s,this.extractParams(e)),n="/"+this.implodeParams(e,s);let c=n,d="";if("GET"!==i&&"DELETE"!==i&&"PUT"!==i||Object.keys(o).length&&(d=this.urlencodeWithArrayRepeat(o),c+="?"+d),"private"===t){this.checkRequiredCredentials();const e=this.seconds(),t=this.safeInteger(this.options,"x-phemex-request-expiry",60),o=this.sum(e,t).toString();a={"x-phemex-access-token":this.apiKey,"x-phemex-request-expiry":o};let c="";"POST"===i&&(c=this.json(s),r=c,a["Content-Type"]="application/json");const h=n+d+o+c;a["x-phemex-request-signature"]=this.hmac(this.encode(h),this.encode(this.secret))}return c=this.urls.api[t]+c,{url:c,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n)return;const h=this.safeValue(n,"error",n),l=this.safeString(h,"code"),u=this.safeString(h,"msg");if(void 0!==l&&"0"!==l){const e=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,l,e),this.throwBroadlyMatchedException(this.exceptions.broad,u,e),new a(e)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ExchangeNotAvailable:r,RequestTimeout:o,AuthenticationError:n,PermissionDenied:c,DDoSProtection:d,InsufficientFunds:h,OrderNotFound:l,InvalidOrder:u,AccountSuspended:p,CancelPending:f,InvalidNonce:m,OnMaintenance:v,BadSymbol:y}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"poloniex",name:"Poloniex",countries:["US"],rateLimit:1e3,certified:!1,pro:!0,has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createMarketOrder:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrder:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!0,fetchWithdrawals:!0,cancelAllOrders:!0,withdraw:!0},timeframes:{"5m":300,"15m":900,"30m":1800,"2h":7200,"4h":14400,"1d":86400},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766817-e9456312-5ee6-11e7-9b3c-b628ca5626a5.jpg",api:{public:"https://poloniex.com/public",private:"https://poloniex.com/tradingApi"},www:"https://www.poloniex.com",doc:"https://docs.poloniex.com",fees:"https://poloniex.com/fees",referral:"https://poloniex.com/signup?c=UBFZJRPJ"},api:{public:{get:["return24hVolume","returnChartData","returnCurrencies","returnLoanOrders","returnOrderBook","returnTicker","returnTradeHistory"]},private:{post:["buy","cancelLoanOffer","cancelOrder","cancelAllOrders","closeMarginPosition","createLoanOffer","generateNewAddress","getMarginPosition","marginBuy","marginSell","moveOrder","returnActiveLoans","returnAvailableAccountBalances","returnBalances","returnCompleteBalances","returnDepositAddresses","returnDepositsWithdrawals","returnFeeInfo","returnLendingHistory","returnMarginAccountSummary","returnOpenLoanOffers","returnOpenOrders","returnOrderTrades","returnOrderStatus","returnTradableBalances","returnTradeHistory","sell","toggleAutoRenew","transferBalance","withdraw"]}},fees:{trading:{maker:9e-4,taker:9e-4},funding:{}},limits:{amount:{min:1e-6,max:1e9},price:{min:1e-8,max:1e9},cost:{min:0,max:1e9}},precision:{amount:8,price:8},commonCurrencies:{AIR:"AirCoin",APH:"AphroditeCoin",BCC:"BTCtalkcoin",BDG:"Badgercoin",BTM:"Bitmark",CON:"Coino",GOLD:"GoldEagles",GPUC:"GPU",HOT:"Hotcoin",ITC:"Information Coin",KEY:"KEYCoin",PLX:"ParallaxCoin",REPV2:"REP",STR:"XLM",SOC:"SOCC",XAP:"API Coin",USDTTRON:"USDT",USDTETH:"USDT"},options:{limits:{cost:{min:{BTC:1e-4,ETH:1e-4,XMR:1e-4,USDT:1}}}},exceptions:{exact:{"You may only place orders that reduce your position.":u,"Invalid order number, or you are not the person who placed the order.":l,"Permission denied":c,"Connection timed out. Please try again.":o,"Internal error. Please try again.":r,"Currently in maintenance mode.":v,"Order not found, or you are not the person who placed it.":l,"Invalid API key/secret pair.":n,"Please do not make more than 8 API calls per second.":d,"Rate must be greater than zero.":u,"Invalid currency pair.":y,"Invalid currencyPair parameter.":y},broad:{"Total must be at least":u,"This account is frozen.":p,"Not enough":h,"Nonce must be greater":m,"You have already called cancelOrder or moveOrder on this order.":f,"Amount must be at least":u,"is either completed or does not exist":u,"Error pulling ":a}},orders:{}})}calculateFee(e,t,i,s,a,r="taker",o={}){const n=this.markets[e];let c="quote";const d=n[r];let h=parseFloat(this.costToPrecision(e,s*d));return"sell"===i?h*=a:c="base",{type:r,currency:n[c],rate:d,cost:parseFloat(this.feeToPrecision(e,h))}}parseOHLCV(e,t){return[this.safeTimestamp(e,"date"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"quoteVolume")]}async fetchOHLCV(e,t="5m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={currencyPair:r.id,period:this.timeframes[t]};if(void 0===i)o.end=this.seconds(),o.start=void 0===s?o.end-this.parseTimeframe("1w"):o.end-s*this.parseTimeframe(t);else if(o.start=parseInt(i/1e3),void 0!==s){const e=this.sum(o.start,s*this.parseTimeframe(t));o.end=e}const n=await this.publicGetReturnChartData(this.extend(o,a));return this.parseOHLCVs(n,r,t,i,s)}async loadMarkets(e=!1,t={}){const i=await super.loadMarkets(e,t);return(void 0===this.safeValue(this.options,"currenciesByNumericId")||e)&&(this.options.currenciesByNumericId=this.indexBy(this.currencies,"numericId")),i}async fetchMarkets(e={}){const t=await this.publicGetReturnTicker(e),i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){const a=i[e],r=t[a],[o,n]=a.split("_"),c=this.safeCurrencyCode(n),d=this.safeCurrencyCode(o),h=c+"/"+d,l=this.extend(this.limits,{cost:{min:this.safeValue(this.options.limits.cost.min,d)}}),u="1"!==this.safeString(r,"isFrozen"),p=this.safeInteger(r,"id");s.push({id:a,numericId:p,symbol:h,baseId:n,quoteId:o,base:c,quote:d,active:u,limits:l,info:r})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostReturnCompleteBalances(this.extend({account:"all"},e)),i={info:t},s=Object.keys(t);for(let e=0;e<s.length;e++){const a=s[e],r=this.safeValue(t,a,{}),o=this.safeCurrencyCode(a),n=this.account();n.free=this.safeFloat(r,"available"),n.used=this.safeFloat(r,"onOrders"),i[o]=n}return this.parseBalance(i)}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privatePostReturnFeeInfo(e);return{info:t,maker:this.safeFloat(t,"makerFee"),taker:this.safeFloat(t,"takerFee"),withdraw:{},deposit:{}}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currencyPair:this.marketId(e)};void 0!==t&&(s.depth=t);const a=await this.publicGetReturnOrderBook(this.extend(s,i)),r=this.parseOrderBook(a);return r.nonce=this.safeInteger(a,"seq"),r}async fetchOrderBooks(e,t,i={}){await this.loadMarkets();const s={currencyPair:"all"};void 0!==t&&(s.depth=t);const a=await this.publicGetReturnOrderBook(this.extend(s,i)),r=Object.keys(a),o={};for(let e=0;e<r.length;e++){const t=r[e];let i=void 0;if(t in this.markets_by_id)i=this.markets_by_id[t].symbol;else{const[e,s]=t.split("_");i=this.safeCurrencyCode(s)+"/"+this.safeCurrencyCode(e)}const s=this.parseOrderBook(a[t]);s.nonce=this.safeInteger(a[t],"seq"),o[i]=s}return o}parseTicker(e,t){const i=this.milliseconds();let s=void 0;t&&(s=t.symbol);let a=void 0,r=void 0,o=void 0;const n=this.safeFloat(e,"last"),c=this.safeFloat(e,"percentChange");return-1!==c&&(a=n/this.sum(1,c),r=n-a,o=this.sum(n,a)/2),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high24hr"),low:this.safeFloat(e,"low24hr"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:a,close:n,last:n,previousClose:void 0,change:r,percentage:100*c,average:o,baseVolume:this.safeFloat(e,"quoteVolume"),quoteVolume:this.safeFloat(e,"baseVolume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetReturnTicker(t),s=Object.keys(i),a={};for(let e=0;e<s.length;e++){const t=s[e];let r=void 0,o=void 0;if(t in this.markets_by_id)o=this.markets_by_id[t],r=o.symbol;else{const[e,i]=t.split("_");r=this.safeCurrencyCode(i)+"/"+this.safeCurrencyCode(e),o={symbol:r}}const n=i[t];a[r]=this.parseTicker(n,o)}return this.filterByArray(a,"symbol",e)}async fetchCurrencies(e={}){const t=await this.publicGetReturnCurrencies(e),i=Object.keys(t),s={};for(let e=0;e<i.length;e++){const a=i[e],r=t[a],o=8,n=this.safeCurrencyCode(a),c=0===r.delisted&&!r.disabled,d=this.safeInteger(r,"id"),h=this.safeFloat(r,"txFee");s[n]={id:a,numericId:d,code:n,info:r,name:r.name,active:c,fee:h,precision:o,limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:void 0,max:void 0},withdraw:{min:h,max:Math.pow(10,o)}}}}return s}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=(await this.publicGetReturnTicker(t))[i.id];return this.parseTicker(s,i)}parseTrade(e,t){const i=this.safeString2(e,"globalTradeID","tradeID"),s=this.safeString(e,"orderNumber"),a=this.parse8601(this.safeString(e,"date"));let r=void 0;if(!t&&"currencyPair"in e){const i=this.safeString(e,"currencyPair");if(i in this.markets_by_id)t=this.markets_by_id[i];else{const[e,t]=i.split("_");r=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(e)}}void 0===r&&void 0!==t&&(r=t.symbol);const o=this.safeString(e,"type");let n=void 0;const c=this.safeFloat(e,"rate"),d=this.safeFloat(e,"total"),h=this.safeFloat(e,"amount"),l=this.safeString(e,"feeDisplay");if(void 0!==l){const e=l.split(" "),t=this.safeFloat(e,0);if(void 0!==t){const i=this.safeString(e,1),s=this.safeCurrencyCode(i);let a=this.safeString(e,2);if(void 0!==a){a=a.replace("(","");const e=a.split("%");a=this.safeString(e,0),a=parseFloat(a)/100}n={cost:t,currency:s,rate:a}}}let u=void 0;return void 0!==this.safeFloat(e,"takerAdjustment")&&(u="taker"),{id:i,info:e,timestamp:a,datetime:this.iso8601(a),symbol:r,order:s,type:"limit",side:o,takerOrMaker:u,price:c,amount:h,cost:d,fee:n}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={currencyPair:a.id};void 0!==t&&(r.start=parseInt(t/1e3),r.end=this.seconds());const o=await this.publicGetReturnTradeHistory(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let a=void 0;void 0!==e&&(a=this.market(e));const r={currencyPair:a?a.id:"all"};void 0!==t&&(r.start=parseInt(t/1e3),r.end=this.sum(this.seconds(),1)),void 0!==i&&(r.limit=parseInt(i));const o=await this.privatePostReturnTradeHistory(this.extend(r,s));let n=[];if(void 0!==a)n=this.parseTrades(o,a);else if(o){const e=Object.keys(o);for(let t=0;t<e.length;t++){const i=e[t];let s=void 0;if(i in this.markets_by_id){s=this.markets_by_id[i];const e=this.parseTrades(o[i],s);for(let t=0;t<e.length;t++)n.push(e[t])}else{const[e,t]=i.split("_"),s=this.safeCurrencyCode(t),a=this.safeCurrencyCode(e),r=s+"/"+a,c=o[i];for(let e=0;e<c.length;e++){const t={symbol:r,base:s,quote:a};n.push(this.parseTrade(c[e],t))}}}}return this.filterBySinceLimit(n,t,i)}parseOrderStatus(e){return this.safeString({Open:"open","Partially filled":"open"},e,e)}parseOrder(e,t){let i=this.safeInteger(e,"timestamp");void 0===i&&(i=this.parse8601(this.safeString(e,"date")));let s=void 0;const a=this.safeString(e,"currencyPair");if(void 0!==a)if(a in this.markets_by_id)t=this.markets_by_id[a];else{const[e,t]=a.split("_");s=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(e)}void 0===s&&void 0!==t&&(s=t.symbol);let r=void 0,o=this.safeValue(e,"resultingTrades");Array.isArray(o)||(o=this.safeValue(o,this.safeString(t,"id",a))),void 0!==o&&(r=this.parseTrades(o,t));const n=this.safeFloat2(e,"price","rate");let c=this.safeFloat(e,"amount"),d=this.safeFloat(e,"startingAmount"),h=void 0,l=0;void 0!==d?void 0!==c&&(h=d-c,void 0!==n&&(l=h*n)):d=c;let u=this.parseOrderStatus(this.safeString(e,"status")),p=void 0,f=void 0;if(void 0===h&&void 0!==r){h=0,l=0;const e=r.length;if(e>0){f=r[0].timestamp;for(let t=0;t<e;t++){const e=r[t],i=e.amount,s=e.price;h=this.sum(h,i),l=this.sum(l,s*i),f=Math.max(f,e.timestamp)}}void 0!==d&&(c=Math.max(d-h,0),h>=d&&(u="closed"))}void 0!==h&&void 0!==l&&h>0&&(p=l/h);let m=this.safeString(e,"type");const v=this.safeString(e,"side",m);m===v&&(m=void 0);const y=this.safeString(e,"orderNumber");let g=void 0;const b=this.safeFloat(e,"fee");if(void 0!==b){let e=void 0;void 0!==t&&(e="buy"===v?t.base:t.quote),g={cost:b,currency:e}}return{info:e,id:y,clientOrderId:this.safeString(e,"clientOrderId"),timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:f,status:u,symbol:s,type:m,timeInForce:void 0,side:v,price:n,stopPrice:void 0,cost:l,average:p,amount:d,filled:h,remaining:c,trades:r,fee:g}}parseOpenOrders(e,t,i){for(let s=0;s<e.length;s++){const a=e[s],r=this.extend(a,{status:"open",type:"limit",side:a.type,price:a.rate});i.push(this.parseOrder(r,t))}return i}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;void 0!==e&&(a=this.market(e));const r={currencyPair:a?a.id:"all"},o=await this.privatePostReturnOpenOrders(this.extend(r,s)),n={status:"open"};if(void 0===a){const e=Object.keys(o);let s=[];for(let t=0;t<e.length;t++){const i=e[t],a=o[i],r=this.markets_by_id[i];s=this.arrayConcat(s,this.parseOrders(a,r,void 0,void 0,n))}return this.filterBySinceLimit(s,t,i)}return this.parseOrders(o,a,t,i,n)}async createOrder(e,t,i,s,r,o={}){if("market"===t)throw new a(this.id+" createOrder() does not accept market orders");await this.loadMarkets();const n="privatePost"+this.capitalize(i),c=this.market(e);s=this.amountToPrecision(e,s);const d={currencyPair:c.id,rate:this.priceToPrecision(e,r),amount:s},h=this.safeString(o,"clientOrderId");void 0!==h&&(d.clientOrderId=h,o=this.omit(o,"clientOrderId"));const l=this.milliseconds(),u=await this[n](this.extend(d,o));return this.parseOrder(this.extend({timestamp:l,status:"open",type:t,side:i,price:r,amount:s},u),c)}async editOrder(e,t,i,s,a,r,o={}){await this.loadMarkets(),r=parseFloat(r);const n={orderNumber:e,rate:this.priceToPrecision(t,r)};void 0!==a&&(n.amount=this.amountToPrecision(t,a));const c=await this.privatePostMoveOrder(this.extend(n,o));return this.parseOrder(c)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={},a=this.safeValue(i,"clientOrderId");return void 0===a?s.orderNumber=e:s.clientOrderId=a,i=this.omit(i,"clientOrderId"),await this.privatePostCancelOrder(this.extend(s,i))}async cancelAllOrders(e,t={}){const i={};let s=void 0;void 0!==e&&(s=this.market(e),i.currencyPair=s.id);return await this.privatePostCancelAllOrders(this.extend(i,t))}async fetchOpenOrder(e,t,i={}){await this.loadMarkets();const s={orderNumber:e=e.toString()},a=await this.privatePostReturnOrderStatus(this.extend(s,i)),r=this.safeValue(a.result,e);if(void 0===r)throw new l(this.id+" order id "+e+" not found");return this.parseOrder(r)}async fetchOrderStatus(e,t,i={}){await this.loadMarkets();const s=await this.fetchOpenOrders(t,void 0,void 0,i);return e in this.indexBy(s,"id")?"open":"closed"}async fetchOrderTrades(e,t,i,s,a={}){await this.loadMarkets();const r={orderNumber:e},o=await this.privatePostReturnOrderTrades(this.extend(r,a));return this.parseTrades(o)}async createDepositAddress(e,t={}){await this.loadMarkets();let i=void 0,s=void 0;e in this.currencies?(s=this.currency(e),i=s.id):i=e;const a={currency:i},r=await this.privatePostGenerateNewAddress(this.extend(a,t));let o=void 0,n=void 0;if(1===r.success&&(o=this.safeString(r,"response")),this.checkAddress(o),void 0!==s){const e=this.safeString(s.info,"depositAddress");void 0!==e&&(n=o,o=e)}return{currency:e,address:o,tag:n,info:r}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=await this.privatePostReturnDepositAddresses(t);let s=void 0,a=void 0;e in this.currencies?(a=this.currency(e),s=a.id):s=e;let r=this.safeString(i,s),o=void 0;if(this.checkAddress(r),void 0!==a){const e=this.safeString(a.info,"depositAddress");void 0!==e&&(o=r,r=e)}return{currency:e,address:r,tag:o,info:i}}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r={currency:this.currency(e).id,amount:t,address:i};void 0!==s&&(r.paymentId=s);const o=await this.privatePostWithdraw(this.extend(r,a));return{info:o,id:this.safeString(o,"withdrawalNumber")}}async fetchTransactionsHelper(e,t,i,s={}){await this.loadMarkets();const a=this.seconds(),r={start:void 0!==t?parseInt(t/1e3):a-31104e4,end:a};void 0!==i&&(r.limit=i);return await this.privatePostReturnDepositsWithdrawals(this.extend(r,s))}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const a=await this.fetchTransactionsHelper(e,t,i,s);let r=void 0;void 0!==e&&(r=this.currency(e));const o=this.safeValue(a,"withdrawals",[]),n=this.safeValue(a,"deposits",[]),c=this.parseTransactions(o,r,t,i),d=this.parseTransactions(n,r,t,i),h=this.arrayConcat(d,c);return this.filterByCurrencySinceLimit(this.sortBy(h,"timestamp"),e,t,i)}async fetchWithdrawals(e,t,i,s={}){const a=await this.fetchTransactionsHelper(e,t,i,s);let r=void 0;void 0!==e&&(r=this.currency(e));const o=this.safeValue(a,"withdrawals",[]),n=this.parseTransactions(o,r,t,i);return this.filterByCurrencySinceLimit(n,e,t,i)}async fetchDeposits(e,t,i,s={}){const a=await this.fetchTransactionsHelper(e,t,i,s);let r=void 0;void 0!==e&&(r=this.currency(e));const o=this.safeValue(a,"deposits",[]),n=this.parseTransactions(o,r,t,i);return this.filterByCurrencySinceLimit(n,e,t,i)}parseTransactionStatus(e){return this.safeString({COMPLETE:"ok"},e,e)}parseTransaction(e,t){const i=this.safeTimestamp(e,"timestamp"),s=this.safeString(e,"currency"),a=this.safeCurrencyCode(s);let r=this.safeString(e,"status","pending"),o=this.safeString(e,"txid");if(void 0!==r){const e=r.split(": "),t=e.length;r=e[0],t>1&&void 0===o&&(o=e[1]),r=this.parseTransactionStatus(r)}const n="withdrawalNumber"in e?"withdrawal":"deposit",c=this.safeString(e,"type",n),d=this.safeString2(e,"withdrawalNumber","depositNumber");let h=this.safeFloat(e,"amount");const l=this.safeString(e,"address"),u=this.safeString(e,"paymentID"),p=this.safeFloat(e,"fee",0);return"withdrawal"===c&&(h-=p),{info:e,id:d,currency:a,amount:h,address:l,tag:u,status:r,type:c,updated:void 0,txid:o,timestamp:i,datetime:this.iso8601(i),fee:{currency:a,cost:p}}}async fetchPosition(e,t={}){await this.loadMarkets();const i={currencyPair:this.market(e).id};return await this.privatePostGetMarginPosition(this.extend(i,t))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t];const n=this.extend({command:e},s);return"public"===t?o+="?"+this.urlencode(n):(this.checkRequiredCredentials(),n.nonce=this.nonce(),r=this.urlencode(n),a={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(r),this.encode(this.secret),"sha512")}),{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0!==n&&"error"in n){const e=n.error,t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new a(t)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ExchangeNotAvailable:r,BadResponse:o,BadRequest:n,InvalidOrder:c,InsufficientFunds:d,AuthenticationError:h,ArgumentsRequired:l,InvalidAddress:u,RateLimitExceeded:p,DDoSProtection:f,BadSymbol:m}=i(0),{TRUNCATE:v,TICK_SIZE:y}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"probit",name:"ProBit",countries:["SC","KR"],rateLimit:250,has:{CORS:!0,fetchTime:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchTickers:!0,fetchTicker:!0,fetchOHLCV:!0,fetchOrderBook:!0,fetchTrades:!0,fetchBalance:!0,createOrder:!0,createMarketOrder:!0,cancelOrder:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchDepositAddress:!0,withdraw:!0,signIn:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","10m":"10m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","6h":"6h","12h":"12h","1d":"1D","1w":"1W","1M":"1M"},version:"v1",urls:{logo:"https://user-images.githubusercontent.com/51840849/79268032-c4379480-7ea2-11ea-80b3-dd96bb29fd0d.jpg",api:{accounts:"https://accounts.probit.com",public:"https://api.probit.com/api/exchange",private:"https://api.probit.com/api/exchange"},www:"https://www.probit.com",doc:["https://docs-en.probit.com","https://docs-ko.probit.com"],fees:"https://support.probit.com/hc/en-us/articles/360020968611-Trading-Fees",referral:"https://www.probit.com/r/34608773"},api:{public:{get:["market","currency","currency_with_platform","time","ticker","order_book","trade","candle"]},private:{post:["new_order","cancel_order","withdrawal"],get:["balance","order","open_order","order_history","trade_history","deposit_address"]},accounts:{post:["token"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{UNAUTHORIZED:h,INVALID_ARGUMENT:n,TRADING_UNAVAILABLE:r,NOT_ENOUGH_BALANCE:d,NOT_ALLOWED_COMBINATION:n,INVALID_ORDER:c,RATE_LIMIT_EXCEEDED:p,MARKET_UNAVAILABLE:r,INVALID_MARKET:m,INVALID_CURRENCY:n,TOO_MANY_OPEN_ORDERS:f,DUPLICATE_ADDRESS:u}},requiredCredentials:{apiKey:!0,secret:!0},precisionMode:y,options:{createMarketBuyOrderRequiresPrice:!0,timeInForce:{limit:"gtc",market:"ioc"}},commonCurrencies:{BTCBEAR:"BEAR",BTCBULL:"BULL",CBC:"CryptoBharatCoin",UNI:"UNICORN Token"}})}async fetchMarkets(e={}){const t=await this.publicGetMarket(e),i=this.safeValue(t,"data",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"id"),r=this.safeString(t,"base_currency_id"),o=this.safeString(t,"quote_currency_id"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o),d=n+"/"+c,h=!this.safeValue(t,"closed",!1),l=this.safeInteger(t,"quantity_precision"),u=this.safeInteger(t,"cost_precision"),p={amount:1/Math.pow(10,l),price:this.safeFloat(t,"price_increment"),cost:1/Math.pow(10,u)},f=this.safeFloat(t,"taker_fee_rate"),m=this.safeFloat(t,"maker_fee_rate");s.push({id:a,info:t,symbol:d,base:n,quote:c,baseId:r,quoteId:o,active:h,precision:p,taker:f/100,maker:m/100,limits:{amount:{min:this.safeFloat(t,"min_quantity"),max:this.safeFloat(t,"max_quantity")},price:{min:this.safeFloat(t,"min_price"),max:this.safeFloat(t,"max_price")},cost:{min:this.safeFloat(t,"min_cost"),max:this.safeFloat(t,"max_cost")}}})}return s}async fetchCurrencies(e={}){const t=await this.publicGetCurrencyWithPlatform(e),i=this.safeValue(t,"data"),s={};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"id"),r=this.safeCurrencyCode(a),o=this.safeValue(t,"display_name"),n=this.safeString(o,"en-us"),c=this.safeValue(t,"platform",[]),d=this.sortBy(c,"priority"),h=this.safeValue(d,0,{}),l=this.safeInteger(h,"precision"),u=this.safeValue(h,"deposit_suspended"),p=this.safeValue(h,"withdrawal_suspended"),f=!(u&&p),m=this.safeValue(h,"withdrawal_fee",{}),v=this.sortBy(m,"priority"),y=this.safeValue(v,0,{}),g=this.safeFloat(y,"amount");s[r]={id:a,code:r,info:t,name:n,active:f,fee:g,precision:l,limits:{amount:{min:Math.pow(10,-l),max:Math.pow(10,l)},price:{min:Math.pow(10,-l),max:Math.pow(10,l)},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(h,"min_deposit_amount"),max:void 0},withdraw:{min:this.safeFloat(h,"min_withdrawal_amount"),max:void 0}}}}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalance(e),i=this.safeValue(t,"data"),s={info:i};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"currency_id"),r=this.safeCurrencyCode(a),o=this.account();o.total=this.safeFloat(t,"total"),o.free=this.safeFloat(t,"available"),s[r]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market_id:this.market(e).id},a=await this.publicGetOrderBook(this.extend(s,i)),r=this.safeValue(a,"data",[]),o=this.groupBy(r,"side");return this.parseOrderBook(o,void 0,"buy","sell","price","quantity")}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e);i.market_ids=t.join(",")}const s=await this.publicGetTicker(this.extend(i,t)),a=this.safeValue(s,"data",[]);return this.parseTickers(a,e)}parseTickers(e,t){const i=[];for(let t=0;t<e.length;t++)i.push(this.parseTicker(e[t]));return this.filterByArray(i,"symbol",t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market_ids:i.id},a=await this.publicGetTicker(this.extend(s,t)),r=this.safeValue(a,"data",[]),n=this.safeValue(r,0);if(void 0===n)throw new o(this.id+" fetchTicker() returned an empty response");return this.parseTicker(n,i)}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"time")),s=this.safeString(e,"market_id"),a=this.safeSymbol(s,t,"-"),r=this.safeFloat(e,"last"),o=this.safeFloat(e,"change");let n=void 0,c=void 0;void 0!==o&&void 0!==r&&(c=r-o,n=o/c*100);const d=this.safeFloat(e,"base_volume"),h=this.safeFloat(e,"quote_volume"),l=this.vwap(d,h);return{symbol:a,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:l,open:c,close:r,last:r,previousClose:void 0,change:o,percentage:n,average:void 0,baseVolume:d,quoteVolume:h,info:e}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={limit:100,start_time:this.iso8601(0),end_time:this.iso8601(this.milliseconds())};void 0!==e&&(a=this.market(e),r.market_id=a.id),void 0!==t&&(r.start_time=this.iso8601(t)),void 0!==i&&(r.limit=i);const o=await this.privateGetTradeHistory(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,a,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market_id:a.id,limit:100,start_time:"1970-01-01T00:00:00.000Z",end_time:this.iso8601(this.milliseconds())};void 0!==t&&(r.start_time=this.iso8601(t)),void 0!==i&&(r.limit=i);const o=await this.publicGetTrade(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,a,t,i)}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"time")),s=this.safeString(e,"id");let a=void 0;if(void 0!==s){const e=s.split(":");a=this.safeString(e,0)}a=this.safeString(e,"market_id",a);const r=this.safeSymbol(a,t,"-"),o=this.safeString(e,"side"),n=this.safeFloat(e,"price"),c=this.safeFloat(e,"quantity");let d=void 0;void 0!==n&&void 0!==c&&(d=n*c);const h=this.safeString(e,"order_id"),l=this.safeFloat(e,"fee_amount");let u=void 0;if(void 0!==l){const t=this.safeString(e,"fee_currency_id");u={cost:l,currency:this.safeCurrencyCode(t)}}return{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,order:h,type:void 0,side:o,takerOrMaker:void 0,price:n,amount:c,cost:d,fee:u}}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.parse8601(this.safeString(t,"data"))}normalizeOHLCVTimestamp(e,t,i=!1){const s=this.parseTimeframe(t);if("1M"===t){const t=this.iso8601(e).split("-"),s=this.safeString(t,0);let a=this.safeInteger(t,1);return i&&(a=this.sum(a,1)),a=a<10?"0"+a.toString():a.toString(),s+"-"+a+"-01T00:00:00.000Z"}if("1w"===t){const t=259200,a=(e=parseInt(e/1e3))-t,r=this.integerDivide(a,s);let o=this.sum(t,r*s);return i&&(o=this.sum(o,s)),this.iso8601(1e3*o)}return e=parseInt(e/1e3),e=s*parseInt(e/s),i&&(e=this.sum(e,s)),this.iso8601(1e3*e)}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o=this.timeframes[t];s=void 0===s?100:s;let n=this.sum(s,1);n=Math.min(1e3,n);const c={market_ids:r.id,interval:o,sort:"asc",limit:n},d=this.milliseconds(),h=this.parseTimeframe(t);let u=i,p=d;if(void 0===i){if(void 0===s)throw new l(this.id+" fetchOHLCV requires either a since argument or a limit argument");u=d-s*h*1e3}else p=void 0===s?d:this.sum(i,this.sum(s,1)*h*1e3);const f=this.normalizeOHLCVTimestamp(u,t),m=this.normalizeOHLCVTimestamp(p,t,!0);c.start_time=f,c.end_time=m;const v=await this.publicGetCandle(this.extend(c,a)),y=this.safeValue(v,"data",[]);return this.parseOHLCVs(y,r,t,i,s)}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"start_time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"base_volume")]}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets(),t=this.parse8601(t);const a={};let r=void 0;void 0!==e&&(r=this.market(e),a.market_id=r.id);const o=await this.privateGetOpenOrder(this.extend(a,s)),n=this.safeValue(o,"data");return this.parseOrders(n,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const a={start_time:this.iso8601(0),end_time:this.iso8601(this.milliseconds()),limit:100};let r=void 0;void 0!==e&&(r=this.market(e),a.market_id=r.id),t&&(a.start_time=this.iso8601(t)),i&&(a.limit=i);const o=await this.privateGetOrderHistory(this.extend(a,s)),n=this.safeValue(o,"data");return this.parseOrders(n,r,t,i)}async fetchOrder(e,t,i={}){if(void 0===t)throw new l(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a={market_id:s.id},r=this.safeString2(i,"clientOrderId","client_order_id");void 0!==r?a.client_order_id=r:a.order_id=e;const o=this.omit(i,["clientOrderId","client_order_id"]),n=await this.privateGetOrder(this.extend(a,o)),c=this.safeValue(n,"data",[]),d=this.safeValue(c,0);return this.parseOrder(d,s)}parseOrderStatus(e){return this.safeString({open:"open",cancelled:"canceled",filled:"closed"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"status")),s=this.safeString(e,"id"),a=this.safeString(e,"type"),r=this.safeString(e,"side"),o=this.safeString(e,"market_id"),n=this.safeSymbol(o,t,"-"),c=this.parse8601(this.safeString(e,"time"));let d=this.safeFloat(e,"limit_price");const h=this.safeFloat(e,"filled_quantity");let l=this.safeFloat(e,"open_quantity");const u=this.safeFloat(e,"cancelled_quantity");void 0!==u&&(l=this.sum(l,u));const p=this.safeFloat(e,"quantity",this.sum(h,l));let f=this.safeFloat2(e,"filled_cost","cost");"market"===a&&(d=void 0);let m=void 0;void 0!==h&&(void 0===f&&void 0!==d&&(f=d*h),void 0!==f&&h>0&&(m=f/h));let v=this.safeString(e,"client_order_id");""===v&&(v=void 0);const y=this.safeStringUpper(e,"time_in_force");return{id:s,info:e,clientOrderId:v,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:n,type:a,timeInForce:y,side:r,status:i,price:d,stopPrice:void 0,amount:p,filled:h,remaining:l,average:m,cost:f,fee:void 0,trades:void 0}}costToPrecision(e,t){return this.decimalToPrecision(t,v,this.markets[e].precision.cost,this.precisionMode)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n=this.safeValue(this.options,"timeInForce"),d=this.safeValue(n,t),h=this.safeString2(r,"timeInForce","time_in_force",d),l={market_id:o.id,type:t,side:i,time_in_force:h},u=this.safeString2(r,"clientOrderId","client_order_id");void 0!==u&&(l.client_order_id=u);let p=void 0;if("limit"===t)l.limit_price=this.priceToPrecision(e,a),l.quantity=this.amountToPrecision(e,s);else if("market"===t)if("buy"===i){let t=this.safeFloat(r,"cost");if(this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){if(void 0!==a)void 0===t&&(t=s*a);else if(void 0===t)throw new c(this.id+" createOrder() requires the price argument for market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'cost' extra parameter (the exchange-specific behaviour)")}else t=void 0===t?s:t;p=this.costToPrecision(e,t),l.cost=p}else l.quantity=this.amountToPrecision(e,s);const f=this.omit(r,["timeInForce","time_in_force","clientOrderId","client_order_id"]),m=await this.privatePostNewOrder(this.extend(l,f)),v=this.safeValue(m,"data"),y=this.parseOrder(v,o);return"market"===t&&"buy"===i&&(y.amount=void 0,y.cost=parseFloat(p),y.remaining=void 0),y}async cancelOrder(e,t,i={}){if(void 0===t)throw new l(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s={market_id:this.market(t).id,order_id:e},a=await this.privatePostCancelOrder(this.extend(s,i)),r=this.safeValue(a,"data");return this.parseOrder(r)}parseDepositAddress(e,t){const i=this.safeString(e,"address"),s=this.safeString(e,"destination_tag"),a=this.safeString(e,"currency_id"),r=this.safeCurrencyCode(a);return this.checkAddress(i),{currency:r,address:i,tag:s,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency_id:i.id},a=await this.privateGetDepositAddress(this.extend(s,t)),r=this.safeValue(a,"data",[]),o=this.safeValue(r,0);if(void 0===o)throw new u(this.id+" fetchDepositAddress returned an empty response");return this.parseDepositAddress(o,i)}async fetchDepositAddresses(e,t={}){await this.loadMarkets();const i={};if(e){const t=[];for(let i=0;i<e.length;i++){const s=this.currency(e[i]);t.push(s.id)}i.currency_id=e.join(",")}const s=await this.privateGetDepositAddress(this.extend(i,t)),a=this.safeValue(s,"data",[]);return this.parseDepositAddresses(a)}parseDepositAddresses(e){const t={};for(let i=0;i<e.length;i++){const s=this.parseDepositAddress(e[i]);t[s.currency]=s}return t}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e);void 0===s&&(s="");const o={currency_id:r.id,address:i,destination_tag:s,amount:this.currencyToPrecision(e,t)},n=await this.privatePostWithdrawal(this.extend(o,a)),c=this.safeValue(n,"data");return this.parseTransaction(c,r)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeFloat(e,"amount"),a=this.safeString(e,"address"),r=this.safeString(e,"destination_tag"),o=this.safeString(e,"hash"),n=this.parse8601(this.safeString(e,"time")),c=this.safeString(e,"type"),d=this.safeString(e,"currency_id"),h=this.safeCurrencyCode(d),l=this.parseTransactionStatus(this.safeString(e,"status")),u=this.safeFloat(e,"fee");let p=void 0;return void 0!==u&&0!==u&&(p={currency:h,cost:u}),{id:i,currency:h,amount:s,addressFrom:void 0,address:a,addressTo:a,tagFrom:void 0,tag:r,tagTo:r,status:l,type:c,txid:o,timestamp:n,datetime:this.iso8601(n),fee:p,info:e}}parseTransactionStatus(e){return this.safeString({requested:"pending",pending:"pending",confirming:"pending",confirmed:"pending",applying:"pending",done:"ok",cancelled:"canceled",cancelling:"canceled"},e,e)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t]+"/";const n=this.omit(s,this.extractParams(e));if("accounts"===t){this.checkRequiredCredentials(),o+=this.implodeParams(e,s);const t=this.apiKey+":"+this.secret,i=this.stringToBase64(t);a={Authorization:"Basic "+this.decode(i),"Content-Type":"application/json"},Object.keys(n).length&&(r=this.json(n))}else if(o+=this.version+"/","public"===t)o+=this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n));else if("private"===t){const t=this.milliseconds();this.checkRequiredCredentials();const c=this.safeInteger(this.options,"expires");if(void 0===c||c<t)throw new h(this.id+" access token expired, call signIn() method");a={Authorization:"Bearer "+this.safeString(this.options,"accessToken")},o+=this.implodeParams(e,s),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(r=this.json(n),a["Content-Type"]="application/json")}return{url:o,method:i,body:r,headers:a}}async signIn(e={}){this.checkRequiredCredentials();const t=await this.accountsPostToken(this.extend({grant_type:"client_credentials"},e)),i=this.safeInteger(t,"expires_in"),s=this.safeString(t,"access_token");return this.options.accessToken=s,this.options.expires=this.sum(this.milliseconds(),1e3*i),t}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0!==n&&"errorCode"in n){const e=this.safeString(n,"errorCode"),t=this.safeString(n,"message");if(void 0!==e){const i=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.exact,e,i),new a(i)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,InvalidOrder:r,InsufficientFunds:o,AuthenticationError:n}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"qtrade",name:"qTrade",countries:["US"],rateLimit:1e3,version:"v1",urls:{logo:"https://user-images.githubusercontent.com/51840849/80491487-74a99c00-896b-11ea-821e-d307e832f13e.jpg",api:"https://api.qtrade.io",www:"https://qtrade.io",doc:"https://qtrade-exchange.github.io/qtrade-docs",referral:"https://qtrade.io/?ref=BKOQWVFGRH2C"},has:{CORS:!1,fetchTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchBalance:!0,fetchOrderBook:!0,fetchOrder:!0,fetchOrders:!0,fetchMyTrades:!0,fetchClosedOrders:!0,fetchOpenOrders:!0,fetchOHLCV:!0,createOrder:!0,cancelOrder:!0,createMarketOrder:!1,withdraw:!0,fetchDepositAddress:!0,fetchTransactions:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchDeposit:!0,fetchWithdrawal:!0},timeframes:{"5m":"fivemin","15m":"fifteenmin","30m":"thirtymin","1h":"onehour","2h":"twohour","4h":"fourhour","1d":"oneday"},api:{public:{get:["ticker/{market_string}","tickers","currency/{code}","currencies","common","market/{market_string}","markets","market/{market_string}/trades","orderbook/{market_string}","market/{market_string}/ohlcv/{interval}"]},private:{get:["me","balances","balances_all","market/{market_string}","orders","order/{order_id}","trades","withdraw/{withdraw_id}","withdraws","deposit/{deposit_id}","deposits","transfers"],post:["cancel_order","withdraw","deposit_address/{currency}","sell_limit","buy_limit"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0025,maker:0},funding:{withdraw:{}}},exceptions:{exact:{invalid_auth:n,insuff_funds:o}}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"markets",[]),a=[];for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"market_string"),r=this.safeInteger(t,"id"),o=this.safeString(t,"market_currency"),n=this.safeString(t,"base_currency"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=c+"/"+d,l={amount:this.safeInteger(t,"market_precision"),price:this.safeInteger(t,"base_precision")},u=this.safeValue(t,"can_view",!1),p=this.safeValue(t,"can_trade",!1)&&u;a.push({symbol:h,id:i,numericId:r,baseId:o,quoteId:n,base:c,quote:d,active:p,precision:l,taker:this.safeFloat(t,"taker_fee"),maker:this.safeFloat(t,"maker_fee"),limits:{amount:{min:this.safeFloat(t,"minimum_buy_value"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:t})}return a}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"currencies",[]),a={};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"code"),r=this.safeCurrencyCode(i),o=this.safeString(t,"long_name"),n=this.safeString(t,"type"),c=this.safeValue(t,"can_withdraw",!0),d=this.safeValue(t,"deposit_disabled",!1),h=this.safeValue(t,"config",{}),l=this.safeString(t,"status"),u=c&&"ok"===l&&!d;a[r]={id:i,code:r,info:t,type:n,name:o,fee:this.safeFloat(h,"withdraw_fee"),precision:this.safeInteger(t,"precision"),active:u,limits:{amount:{min:this.safeFloat(t,"minimum_order"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return a}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"market_volume")]}async fetchOHLCV(e,t="5m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={market_string:r.id,interval:this.timeframes[t]},n=await this.publicGetMarketMarketStringOhlcvInterval(this.extend(o,a)),c=this.safeValue(n,"data",{}),d=this.safeValue(c,"slices",[]);return this.parseOHLCVs(d,r,t,i,s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market_string:this.marketId(e)},a=await this.publicGetOrderbookMarketString(this.extend(s,i)),r=this.safeValue(a,"data",{}),o={},n={buy:"bids",sell:"asks"},c=Object.keys(n);for(let e=0;e<c.length;e++){const t=c[e],i=n[t],s=this.safeValue(r,t,{}),a=Object.keys(s),d=[];for(let e=0;e<a.length;e++){const t=a[e],i=this.safeFloat(a,e),r=this.safeFloat(s,t);d.push([i,r])}o[i]=d}const d=this.safeIntegerProduct(r,"last_change",.001);return this.parseOrderBook(o,d)}parseTicker(e,t){const i=this.safeString(e,"id_hr"),s=this.safeSymbol(i,t,"_"),a=this.safeIntegerProduct(e,"last_change",.001),r=this.safeFloat(e,"day_open"),o=this.safeFloat(e,"last"),n=this.safeFloat(e,"day_change");let c=void 0,d=void 0,h=this.safeFloat(e,"day_avg_price");void 0!==n&&(c=100*n,void 0!==r&&(d=n*r)),void 0===h&&void 0!==o&&void 0!==r&&(h=this.sum(o,r)/2);const l=this.safeFloat(e,"day_volume_market"),u=this.safeFloat(e,"day_volume_base"),p=this.vwap(l,u);return{symbol:s,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(e,"day_high"),low:this.safeFloat(e,"day_low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:p,open:r,close:o,last:o,previousClose:void 0,change:d,percentage:c,average:h,baseVolume:l,quoteVolume:u,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s=this.safeValue(i,"data",{}),a=this.safeValue(s,"markets",[]),r={};for(let e=0;e<a.length;e++){const t=this.parseTicker(a[e]);r[t.symbol]=t}return this.filterByArray(r,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market_string:i.id},a=await this.publicGetTickerMarketString(this.extend(s,t)),r=this.safeValue(a,"data",{});return this.parseTicker(r,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market_string:a.id},o=await this.publicGetMarketMarketStringTrades(this.extend(r,s)),n=this.safeValue(o,"data",{}),c=this.safeValue(n,"trades",[]);return this.parseTrades(c,a,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={desc:!0};let r=void 0;const o=this.safeValue(s,"market_id");void 0!==o?a.market_id=o:void 0!==e&&(r=this.market(e),a.market_string=r.id);const n=await this.privateGetTrades(this.extend(a,s)),c=this.safeValue(n,"data",{}),d=this.safeValue(c,"trades",[]);return this.parseTrades(d,r,t,i)}parseTrade(e,t){const i=this.safeString(e,"id");let s=this.safeIntegerProduct(e,"created_at_ts",.001);void 0===s&&(s=this.parse8601(this.safeString(e,"created_at")));const a=this.safeString(e,"side"),r=this.safeString(e,"market_string"),o=this.safeSymbol(r,t,"_");let n=this.safeFloat2(e,"base_volume","base_amount");const c=this.safeFloat(e,"price"),d=this.safeFloat2(e,"market_amount","amount");void 0===n&&void 0!==d&&void 0!==c&&void 0!==c&&(n=c*d);let h=void 0;const l=this.safeFloat(e,"base_fee");if(void 0!==l){h={currency:void 0===t?void 0:t.quote,cost:l}}const u=this.safeValue(e,"taker",!0)?"taker":"maker",p=this.safeString(e,"order_id");return{id:i,info:e,timestamp:s,datetime:this.iso8601(s),symbol:o,order:p,type:void 0,side:a,takerOrMaker:u,price:c,amount:d,cost:n,fee:h}}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalancesAll(e),i=this.safeValue(t,"data",{});let s=this.safeValue(i,"balances",[]);const a={info:t};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"currency"),r=this.safeCurrencyCode(i),o=r in a?a[r]:this.account();o.free=this.safeFloat(t,"balance"),o.used=0,a[r]=o}s=this.safeValue(i,"order_balances",[]);for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"currency"),r=this.safeCurrencyCode(i),o=r in a?a[r]:this.account();o.used=this.safeFloat(t,"balance"),a[r]=o}return this.parseBalance(a)}async createOrder(e,t,i,s,a,o={}){if("limit"!==t)throw new r(this.id+" createOrder() allows limit orders only");await this.loadMarkets();const n=this.market(e),c={amount:this.amountToPrecision(e,s),market_id:n.numericId,price:this.priceToPrecision(e,a)},d="sell"===i?"privatePostSellLimit":"privatePostBuyLimit",h=await this[d](this.extend(c,o)),l=this.safeValue(h,"data",{}),u=this.safeValue(l,"order",{});return this.parseOrder(u,n)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"created_at")),a=this.safeString(e,"order_type");let r=void 0,o=void 0;if(void 0!==a){const e=a.split("_");o=this.safeString(e,0),r=this.safeString(e,1)}const n=this.safeFloat(e,"price"),c=this.safeFloat(e,"market_amount");let d=this.safeFloat(e,"market_amount_remaining"),h=void 0;const l=this.safeValue(e,"open",!1),u=this.safeString(e,"close_reason");let p=void 0;p=l?"open":"canceled"===u?"canceled":"closed";const f=this.safeString(e,"market_string"),m=this.safeSymbol(f,t,"_"),v=this.safeValue(e,"trades",[]),y=this.parseTrades(v,t,void 0,void 0,{order:i,side:o,type:r});let g=void 0,b=void 0,w=void 0;if(y.length>0){b=0,w=0,h=0,d=c;for(let e=0;e<y.length;e++){const t=y[e];b=this.sum(t.fee.cost,b),g=this.safeInteger(t,"timestamp"),w=this.sum(t.cost,w),h=this.sum(t.amount,h),d=Math.max(0,d-t.amount)}}let k=void 0;if(void 0!==b){k={currency:void 0===t?void 0:t.quote,cost:b}}void 0!==c&&void 0!==d&&(h=Math.max(0,c-d));let x=void 0;return void 0!==h&&(void 0!==n&&void 0===w&&(w=h*n),void 0!==w&&h>0&&(x=w/h)),{info:e,id:i,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:g,symbol:m,type:r,timeInForce:void 0,side:o,price:n,stopPrice:void 0,average:x,amount:c,remaining:d,filled:h,status:p,fee:k,cost:w,trades:y}}async cancelOrder(e,t,i={}){const s={id:parseInt(e)};return await this.privatePostCancelOrder(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},a=await this.privateGetOrderOrderId(this.extend(s,i)),r=this.safeValue(a,"data",{}),o=this.safeValue(r,"order",{});return this.parseOrder(o)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;const o=this.safeValue(s,"market_id");void 0!==o?a.market_id=o:void 0!==e&&(r=this.market(e),a.market_string=r.id);const n=await this.privateGetOrders(this.extend(a,s)),c=this.safeValue(n,"data",{}),d=this.safeValue(c,"orders",[]);return this.parseOrders(d,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({open:!0},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({open:!1},s))}parseDepositAddress(e,t){const i=void 0===t?void 0:t.code;let s=this.safeString(e,"address"),a=void 0;if(void 0!==s){const e=s.split(":");s=this.safeString(e,0),a=this.safeString(e,1)}return this.checkAddress(s),{currency:i,address:s,tag:a,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},a=await this.privatePostDepositAddressCurrency(this.extend(s,t)),r=this.safeValue(a,"data",{});return this.parseDepositAddress(r,i)}async fetchDeposit(e,t,i={}){await this.loadMarkets();const s={deposit_id:e},a=await this.privateGetDepositDepositId(this.extend(s,i)),r=this.safeValue(a,"data",{}),o=this.safeValue(r,"deposit",{});return this.parseTransaction(o)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();let a=void 0;void 0!==e&&(a=this.currency(e));const r=await this.privateGetDeposits(s),o=this.safeValue(r,"data",{}),n=this.safeValue(o,"deposits",[]);return this.parseTransactions(n,a,t,i)}async fetchWithdrawal(e,t,i={}){await this.loadMarkets();const s={withdraw_id:e},a=await this.privateGetWithdrawWithdrawId(this.extend(s,i)),r=this.safeValue(a,"data",{}),o=this.safeValue(r,"withdraw",{});return this.parseTransaction(o)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();let a=void 0;void 0!==e&&(a=this.currency(e));const r=await this.privateGetWithdraws(s),o=this.safeValue(r,"data",{}),n=this.safeValue(o,"withdraws",[]);return this.parseTransactions(n,a,t,i)}parseTransaction(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"id"),a=this.safeValue(e,"network_data",{}),r=this.safeValue(a,"unsigned_tx",{}),o=this.safeString(r,"from"),n=this.safeString(a,"txid");let c=this.safeString(e,"address"),d=void 0;if(void 0!==c){const e=c.split(":");e.length>1&&(c=this.safeString(e,0),d=this.safeString(e,1))}const h=c,l=d,u=this.safeValue(e,"cancel_requested"),p=void 0===u?"deposit":"withdrawal",f=this.safeFloat(e,"amount"),m=this.safeString(e,"currency"),v=this.safeCurrencyCode(m);let y=this.parseTransactionStatus(this.safeString(e,"status"));const g=this.safeString(e,"code");u?y="canceled":void 0===y&&(y=this.parseTransactionStatus(g));return{info:e,id:s,txid:n,timestamp:i,datetime:this.iso8601(i),addressFrom:o,addressTo:h,address:c,tagFrom:void 0,tagTo:l,tag:d,type:p,amount:f,currency:v,status:y,updated:void 0,fee:void 0}}parseTransactionStatus(e){return this.safeString({initiated:"pending",needs_create:"pending",credited:"ok",confirmed:"ok"},e,e)}async withdraw(e,t,i,s,a={}){await this.loadMarkets();const r={address:i,amount:t,currency:this.currency(e).id};void 0!==s&&(r.address+=":"+s);const o=await this.privatePostWithdraw(this.extend(r,a)),n=this.safeValue(o,"data",{}),c=this.parseTransaction(n);return this.extend(c,{currency:e,address:i,addressTo:i,tag:s,tagTo:s,amount:t})}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o="/"+this.version+"/";"private"===t&&(o+="user/"),o+=this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("POST"===i?r=this.json(n):Object.keys(n).length&&(o+="?"+this.urlencode(n)),"private"===t){const e=this.milliseconds().toString(),t=[i,o,e,"POST"===i?r:"",this.secret].join("\n"),s=this.hash(this.encode(t),"sha256","base64");let n=this.apiKey;"string"!=typeof n&&(n=n.toString());a={Authorization:"HMAC-SHA256 "+n+":"+s,"HMAC-Timestamp":e},"POST"===i&&(a["Content-Type"]="application/json")}return o=this.urls.api+o,{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n)return;const h=this.safeValue(n,"errors",[]);if(h.length<1)return;const l=this.id+" "+o;for(let e=0;e<h.length;e++){const t=h[e],i=this.safeString(t,"code");this.throwExactlyMatchedException(this.exceptions.exact,i,l)}throw new a(l)}}},function(e,t,i){"use strict";const s=i(1),{ROUND:a}=i(2),{ExchangeError:r,ArgumentsRequired:o,AuthenticationError:n,InsufficientFunds:c,InvalidOrder:d,OrderNotFound:h}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"rightbtc",name:"RightBTC",countries:["AE"],has:{cancelOrder:!0,createOrder:!0,privateAPI:!1,fetchBalance:!0,fetchClosedOrders:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:"emulated",fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},timeframes:{"1m":"min1","5m":"min5","15m":"min15","30m":"min30","1h":"hr1","1d":"day1","1w":"week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182092-1f372700-c2ec-11ea-8f9e-01b4d3ff8941.jpg",api:"https://www.rightbtc.com/api",www:"https://www.rightbtc.com",doc:["https://docs.rightbtc.com/api/"]},api:{public:{get:["trading_pairs","ticker/{trading_pair}","tickers","depth/{trading_pair}","depth/{trading_pair}/{count}","trades/{trading_pair}","trades/{trading_pair}/{count}","candlestick/latest/{trading_pair}","candlestick/{timeSymbol}/{trading_pair}","candlestick/{timeSymbol}/{trading_pair}/{count}"]},trader:{get:["balance/{symbol}","balances","deposits/{asset}/{page}","withdrawals/{asset}/{page}","orderpage/{trading_pair}/{cursor}","orders/{trading_pair}/{ids}","history/{trading_pair}/{ids}","historys/{trading_pair}/{page}","trading_pairs"],post:["order"],delete:["order/{trading_pair}/{ids}"]}},fees:{trading:{maker:.001,taker:.002},funding:{withdraw:{ETP:.01,BTC:5e-4,ETH:.005,ETC:.01,STORJ:3,LTC:.01,ZEC:.001,BCC:.001,XRB:0,NXS:.1}}},commonCurrencies:{XRB:"NANO"},exceptions:{ERR_USERTOKEN_NOT_FOUND:n,ERR_ASSET_NOT_EXISTS:r,ERR_ASSET_NOT_AVAILABLE:r,ERR_BALANCE_NOT_ENOUGH:c,ERR_CREATE_ORDER:d,ERR_CANDLESTICK_DATA:r}})}async fetchMarkets(e={}){const t=await this.publicGetTradingPairs(e),i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){const a=i[e],r=t[a],o=this.safeString(r,"bid_asset_symbol"),n=this.safeString(r,"ask_asset_symbol"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=c+"/"+d,l={amount:this.safeInteger(r,"bid_asset_decimals"),price:this.safeInteger(r,"ask_asset_decimals")};s.push({id:a,symbol:h,base:c,quote:d,baseId:o,quoteId:n,active:!0,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:Math.pow(10,l.price)},price:{min:Math.pow(10,-l.price),max:Math.pow(10,l.price)},cost:{min:void 0,max:void 0}},info:r})}return s}divideSafeFloat(e,t,i){const s=this.safeFloat(e,t);return void 0!==s?s/i:s}parseTicker(e,t){const i=t.symbol,s=this.safeInteger(e,"date"),a=this.divideSafeFloat(e,"last",1e8),r=this.divideSafeFloat(e,"high",1e8),o=this.divideSafeFloat(e,"low",1e8),n=this.divideSafeFloat(e,"buy",1e8),c=this.divideSafeFloat(e,"sell",1e8),d=this.divideSafeFloat(e,"vol24h",1e8);return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:r,low:o,bid:n,bidVolume:void 0,ask:c,askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:d,quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={trading_pair:i.id},a=await this.publicGetTickerTradingPair(this.extend(s,t)),o=this.safeValue(a,"result");if(void 0===o)throw new r(this.id+" fetchTicker returned an empty response for symbol "+e);return this.parseTicker(o,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=(await this.publicGetTickers(t)).result,s={};for(let e=0;e<i.length;e++){const t=i[e],a=t.market;if(!(a in this.marketsById))continue;const r=this.marketsById[a];s[r.symbol]=this.parseTicker(t,r)}return this.filterByArray(s,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={trading_pair:this.marketId(e)};let a="publicGetDepthTradingPair";void 0!==t&&(a+="Count",s.count=t);const r=await this[a](this.extend(s,i)),o={},n=["bid","ask"];for(let e=0;e<n.length;e++){const t=n[e];o[t]=[];for(let e=0;e<r.result[t].length;e++){const[i,s,a]=r.result[t][e];o[t].push([i/1e8,s/1e8,a/1e8])}}return this.parseOrderBook(o,void 0,"bid","ask")}parseTrade(e,t){let i=this.safeInteger(e,"date");void 0===i&&(i=this.parse8601(this.safeString(e,"created_at")));let s=this.safeString(e,"tid");s=this.safeString(e,"trade_id",s);const a=this.safeString(e,"order_id"),r=this.divideSafeFloat(e,"price",1e8);let o=this.safeFloat(e,"amount");o=this.safeFloat(e,"quantity",o),void 0!==o&&(o/=1e8);const n=this.safeString(e,"trading_pair"),c=this.safeSymbol(n,t);let d=this.costToPrecision(c,r*o);d=parseFloat(d);let h=this.safeStringLower(e,"side");return"b"===h?h="buy":"s"===h&&(h="sell"),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:c,order:a,type:"limit",side:h,takerOrMaker:void 0,price:r,amount:o,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={trading_pair:a.id},o=await this.publicGetTradesTradingPair(this.extend(r,s));return this.parseTrades(o.result,a,t,i)}parseOHLCV(e,t){return[this.safeInteger(e,0),parseFloat(e[2])/1e8,parseFloat(e[3])/1e8,parseFloat(e[4])/1e8,parseFloat(e[5])/1e8,parseFloat(e[1])/1e8]}async fetchOHLCV(e,t="5m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={trading_pair:r.id,timeSymbol:this.timeframes[t]},n=await this.publicGetCandlestickTimeSymbolTradingPair(this.extend(o,a)),c=this.safeValue(n,"result",[]);return this.parseOHLCVs(c,r,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.traderGetBalances(e),i={info:t},s=this.safeValue(t,"result",[]);for(let e=0;e<s.length;e++){const t=s[e],a=this.safeString(t,"asset"),r=this.safeCurrencyCode(a),o=this.account();o.free=this.divideSafeFloat(t,"balance",1e8),o.used=this.divideSafeFloat(t,"frozen",1e8),i[r]=o}return this.parseBalance(i)}async createOrder(e,t,i,s,r,o={}){await this.loadMarkets();const n={trading_pair:this.market(e).id,quantity:parseInt(this.decimalToPrecision(1e8*s,a,0,this.precisionMode)),limit:parseInt(this.decimalToPrecision(1e8*r,a,0,this.precisionMode)),type:t.toUpperCase(),side:i.toUpperCase()},c=await this.traderPostOrder(this.extend(n,o));return this.parseOrder(c)}async cancelOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s={trading_pair:this.market(t).id,ids:e};return await this.traderDeleteOrderTradingPairIds(this.extend(s,i))}parseOrderStatus(e){return this.safeString({NEW:"open",TRADE:"closed",CANCEL:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parseOrderStatus(this.safeString(e,"status")),a=this.safeString(e,"trading_pair"),r=this.safeSymbol(a,t);let o=this.safeInteger(e,"created");void 0===o&&(o=this.parse8601(this.safeString(e,"created_at"))),"time"in e?o=e.time:"transactTime"in e&&(o=e.transactTime);let n=this.safeFloat2(e,"limit","price");void 0!==n&&(n/=1e8);const c=this.divideSafeFloat(e,"quantity",1e8);let d=this.divideSafeFloat(e,"filled_quantity",1e8),h=this.divideSafeFloat(e,"rest",1e8);const l=this.divideSafeFloat(e,"cost",1e8);void 0!==c&&(void 0===h&&void 0!==d&&(h=Math.max(0,c-d)),void 0===d&&void 0!==h&&(d=Math.max(0,c-h)));const u=this.safeStringLower(e,"side"),p=this.divideSafeFloat(e,"min_fee",1e8);let f=void 0;if(void 0!==p){let i=void 0;void 0!==t&&(i=t.quote),f={rate:this.safeFloat(e,"fee"),cost:p,currency:i}}return{info:e,id:i,clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:void 0,symbol:r,type:"limit",timeInForce:void 0,side:u,price:n,stopPrice:void 0,amount:c,cost:l,filled:d,remaining:h,status:s,fee:f,trades:void 0,average:void 0}}async fetchOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a={trading_pair:s.id,ids:e},r=await this.traderGetOrdersTradingPairIds(this.extend(a,i)),n=this.parseOrders(r.result,s),c=this.indexBy(n,"id");if(!(e in c))throw new h(this.id+" fetchOrder could not find order "+e.toString()+" in open orders.");return c[e]}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchOpenOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e),r={trading_pair:a.id,cursor:0},n=await this.traderGetOrderpageTradingPairCursor(this.extend(r,s));return this.parseOrders(n.result.orders,a,t,i)}async fetchOrders(e,t,i,s={}){let a=this.safeString(s,"ids");if(void 0===e||void 0===a)throw new o(this.id+" fetchOrders requires a 'symbol' argument and an extra 'ids' parameter. The 'ids' should be an array or a string of one or more order ids separated with slashes.");Array.isArray(a)&&(a=a.join("/")),await this.loadMarkets();const r={trading_pair:this.market(e).id,ids:a},n=await this.traderGetHistoryTradingPairIds(this.extend(r,s));return this.parseOrders(n.result,void 0,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const a={trading_pair:this.market(e).id,page:0},r=await this.traderGetHistorysTradingPairPage(this.extend(a,s));return this.parseTrades(r.result,void 0,t,i)}sign(e,t="public",i="GET",s={},a,r){const o=this.omit(s,this.extractParams(e));let n=this.urls.api+"/"+t+"/"+this.implodeParams(e,s);return"public"===t?Object.keys(o).length&&(n+="?"+this.urlencode(o)):(this.checkRequiredCredentials(),a={apikey:this.apiKey,signature:this.secret},"GET"===i?Object.keys(o).length&&(n+="?"+this.urlencode(o)):(r=this.json(o),a["Content-Type"]="application/json")),{url:n,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,o,n,c,d){if(void 0===n)return;const h=this.safeValue(n,"status");if(void 0!==h){if("1"!==this.safeString(h,"success")){const e=this.safeString(h,"message"),t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions,e,t),new r(t)}}}}},function(e,t,i){"use strict";const s=i(1),{AuthenticationError:a,ExchangeError:r,BadSymbol:o,BadRequest:n,InvalidOrder:c,ArgumentsRequired:d,OrderNotFound:h,InsufficientFunds:l,DDoSProtection:u}=i(0),{TICK_SIZE:p}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"ripio",name:"Ripio",countries:["AR","BR"],rateLimit:50,version:"v1",pro:!0,has:{CORS:!1,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/94507548-a83d6a80-0218-11eb-9998-28b9cec54165.jpg",api:{public:"https://api.exchange.ripio.com/api",private:"https://api.exchange.ripio.com/api"},www:"https://exchange.ripio.com",doc:["https://exchange.ripio.com/en/api/"],fees:"https://exchange.ripio.com/en/fee"},api:{public:{get:["rate/all/","rate/{pair}/","orderbook/{pair}/","tradehistory/{pair}/","pair/","currency/","orderbook/{pair}/depth/"]},private:{get:["balances/exchange_balances/","order/{pair}/{order_id}/","order/{pair}/","trade/{pair}/"],post:["order/{pair}/","order/{pair}/{order_id}/cancel/"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:0,maker:0}},precisionMode:p,requiredCredentials:{apiKey:!0,secret:!1},exceptions:{exact:{},broad:{"Authentication credentials were not provided":a,"Disabled pair":o,"Invalid order type":c,"Your balance is not enough":l,"Order couldn't be created":r,"not found":h,"Invalid pair":o,"amount must be a number":n,"Total must be at least":c,"Account not found":n,"Wrong password provided":a,"User tokens limit":u,"Something unexpected ocurred":r,account_balance:n}}})}async fetchMarkets(e={}){const t=await this.publicGetPair(e),i=[],s=this.safeValue(t,"results",[]);for(let e=0;e<s.length;e++){const t=s[e],a=this.safeString(t,"base"),r=this.safeString(t,"quote"),o=this.safeString(t,"symbol"),n=this.safeCurrencyCode(a),c=this.safeCurrencyCode(r),d=n+"/"+c,h={amount:this.safeFloat(t,"min_amount"),price:this.safeFloat(t,"price_tick")},l={amount:{min:this.safeFloat(t,"min_amount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(t,"min_value"),max:void 0}},u=this.safeValue(t,"enabled",!0),p=this.safeValue(t,"fees",[]),f=this.safeValue(p,0,{}),m=this.safeFloat(f,"maker_fee",0),v=this.safeFloat(f,"taker_fee",0);i.push({id:o,symbol:d,base:n,quote:c,baseId:a,quoteId:r,precision:h,maker:m,taker:v,limits:l,info:t,active:u})}return i}async fetchCurrencies(e={}){const t=await this.publicGetCurrency(e),i=this.safeValue(t,"results",[]),s={};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"currency"),r=this.safeCurrencyCode(a),o=this.safeString(t,"name"),n=this.safeValue(t,"enabled",!0),c=this.safeInteger(t,"decimal_places");s[r]={id:a,code:r,name:o,info:t,active:n,fee:void 0,precision:c,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return s}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"pair"),a=this.safeSymbol(s,t),r=this.safeFloat(e,"last_price"),o=this.safeFloat(e,"avg");return{symbol:a,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:this.safeFloat(e,"bid_volume"),ask:this.safeFloat(e,"ask"),askVolume:this.safeFloat(e,"ask_volume"),vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:o,baseVolume:void 0,quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},a=await this.publicGetRatePair(this.extend(s,t));return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetRateAll(t),s={};for(let e=0;e<i.length;e++){const t=this.parseTicker(i[e]);s[t.symbol]=t}return this.filterByArray(s,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)},a=await this.publicGetOrderbookPair(this.extend(s,i)),r=this.parseOrderBook(a,void 0,"buy","sell","price","amount");return r.nonce=this.safeInteger(a,"updated_id"),r}parseTrade(e,t){const i=this.safeString(e,"id");let s=this.safeInteger(e,"timestamp");s=this.safeTimestamp(e,"created_at",s);let a=this.safeString(e,"side");const r=this.safeString(e,"taker_side")===a?"taker":"maker";void 0!==a&&(a=a.toLowerCase());const o=this.safeFloat2(e,"price","match_price"),n=this.safeFloat2(e,"amount","exchanged");let c=void 0;void 0!==n&&void 0!==o&&(c=n*o);const d=this.safeString(e,"pair");t=this.safeMarket(d,t);const h=this.safeFloat(e,r+"_fee"),l=this.safeString(e,r);let u=void 0;return void 0!==h&&(u={cost:h,currency:"buy"===a?t.base:t.quote}),{id:i,order:l,timestamp:s,datetime:this.iso8601(s),symbol:t.symbol,type:void 0,side:a,price:o,amount:n,cost:c,takerOrMaker:r,fee:u,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={pair:a.id},o=await this.publicGetTradehistoryPair(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalancesExchangeBalances(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"symbol"),r=this.safeCurrencyCode(a),o=this.account();o.free=this.safeFloat(s,"available"),o.used=this.safeFloat(s,"locked"),i[r]=o}return this.parseBalance(i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n=t.toUpperCase(),c=i.toUpperCase(),d={pair:o.id,order_type:n,side:c,amount:this.amountToPrecision(e,s)};"LIMIT"===n&&(d.limit_price=this.priceToPrecision(e,a));const h=await this.privatePostOrderPair(this.extend(d,r));return this.parseOrder(h,o)}async cancelOrder(e,t,i={}){if(void 0===t)throw new d(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),a={pair:s.id,order_id:e},r=await this.privatePostOrderPairOrderIdCancel(this.extend(a,i));return this.parseOrder(r,s)}async fetchOrder(e,t,i={}){if(void 0===t)throw new d(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),a={pair:s.id,order_id:e},r=await this.privateGetOrderPairOrderId(this.extend(a,i));return this.parseOrder(r,s)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchOrders() requires a symbol argument");await this.loadMarkets();const a=this.market(e),r={pair:a.id};void 0!==i&&(r.offset=i);const o=await this.privateGetOrderPair(this.extend(r,s)),n=this.safeValue(o,"results",{}),c=this.safeValue(n,"data",[]);return this.parseOrders(c,a,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"OPEN,PART"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"CLOS,CANC,COMP"},s))}parseOrderStatus(e){return this.safeString({OPEN:"open",PART:"open",CLOS:"canceled",CANC:"canceled",COMP:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"order_id"),s=this.safeFloat(e,"amount");let a=this.safeFloat(e,"notional");const r=this.safeStringLower(e,"order_type"),o="market"===r?"fill_price":"limit_price",n=this.safeFloat(e,o),c=this.safeStringLower(e,"side"),d=this.parseOrderStatus(this.safeString(e,"status")),h=this.safeTimestamp(e,"created_at");let l=this.safeValue(e,"fill_price"),u=this.safeFloat(e,"filled"),p=void 0;const f=this.safeValue(e,"fills");let m=void 0,v=void 0;if(void 0!==f){if(f.length>0){u=0,a=0,m=this.parseTrades(f,t,void 0,void 0,{order:i,side:c});for(let e=0;e<m.length;e++){const t=m[e];u=this.sum(t.amount,u),a=this.sum(t.cost,a),v=t.timestamp}void 0===l&&u>0&&(l=a/u)}}void 0!==u&&(void 0===a&&void 0!==n&&(a=n*u),void 0!==s&&(p=Math.max(0,s-u)));const y=this.safeString(e,"pair"),g=this.safeSymbol(y,t,"_"),b=this.safeFloat(e,"stop_price");return{id:i,clientOrderId:void 0,info:e,timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:v,symbol:g,type:r,timeInForce:void 0,side:c,price:n,stopPrice:b,amount:s,cost:a,average:l,filled:u,remaining:p,status:d,fee:void 0,trades:m}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const a=this.market(e),r={pair:a.id};void 0!==i&&(r.limit=i);const o=await this.privateGetTradePair(this.extend(r,s)),n=this.safeValue(o,"results",{}),c=this.safeValue(n,"data",[]);return this.parseTrades(c,a,t,i)}sign(e,t="public",i="GET",s={},a,r){const o="/"+this.version+"/"+this.implodeParams(e,s);let n=this.urls.api[t]+o;const c=this.omit(s,this.extractParams(e));return"public"===t?Object.keys(c).length&&(n+="?"+this.urlencode(c)):"private"===t&&(this.checkRequiredCredentials(),"POST"===i?r=this.json(c):Object.keys(c).length&&(n+="?"+this.urlencode(c)),a={"Content-Type":"application/json",Authorization:"Bearer "+this.apiKey}),{url:n,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,o,n,c,d){if(void 0===n)return;const h=this.safeString(n,"detail");if(void 0!==h){const e=this.id+" "+o;this.throwBroadlyMatchedException(this.exceptions.broad,h,e)}const l=this.safeValue(n,"errors");if(void 0!==l){const e=this.id+" "+o,t=Object.keys(l);for(let i=0;i<t.length;i++){const s=t[i],a=this.safeValue(l,s,[]),r=this.safeString(a,0);this.throwBroadlyMatchedException(this.exceptions.broad,r,e)}throw new r(e)}}}},function(e,t,i){"use strict";const s=i(1),{ArgumentsRequired:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"southxchange",name:"SouthXchange",countries:["AR"],rateLimit:1e3,has:{cancelOrder:!0,CORS:!0,createDepositAddress:!0,createOrder:!0,fetchBalance:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27838912-4f94ec8a-60f6-11e7-9e5d-bbf9bd50a559.jpg",api:"https://www.southxchange.com/api",www:"https://www.southxchange.com",doc:"https://www.southxchange.com/Home/Api"},api:{public:{get:["markets","price/{symbol}","prices","book/{symbol}","trades/{symbol}"]},private:{post:["cancelMarketOrders","cancelOrder","getOrder","generatenewaddress","listOrders","listBalances","listTransactions","placeOrder","withdraw"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.003}},commonCurrencies:{BHD:"Bithold",GHOST:"GHOSTPRISM",MTC:"Marinecoin",SMT:"SmartNode"}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=s[0],r=s[1],o=this.safeCurrencyCode(a),n=this.safeCurrencyCode(r),c=o+"/"+n,d=a+"/"+r;i.push({id:d,symbol:c,base:o,quote:n,baseId:a,quoteId:r,active:void 0,info:s,precision:this.precision,limits:this.limits})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostListBalances(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"Currency"),r=this.safeCurrencyCode(a),o=this.safeFloat(s,"Deposited"),n=this.safeFloat(s,"Unconfirmed"),c=this.account();c.free=this.safeFloat(s,"Available"),c.total=this.sum(o,n),i[r]=c}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)},a=await this.publicGetBookSymbol(this.extend(s,i));return this.parseOrderBook(a,void 0,"BuyOrders","SellOrders","Price","Amount")}parseTicker(e,t){const i=this.milliseconds();let s=void 0;t&&(s=t.symbol);const a=this.safeFloat(e,"Last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:this.safeFloat(e,"Bid"),bidVolume:void 0,ask:this.safeFloat(e,"Ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"Variation24Hr"),average:void 0,baseVolume:this.safeFloat(e,"Volume24Hr"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetPrices(t),s=this.indexBy(i,"Market"),a=Object.keys(s),r={};for(let e=0;e<a.length;e++){const t=a[e],i=this.safeMarket(t),o=i.symbol,n=s[t];r[o]=this.parseTicker(n,i)}return this.filterByArray(r,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},a=await this.publicGetPriceSymbol(this.extend(s,t));return this.parseTicker(a,i)}parseTrade(e,t){const i=this.safeTimestamp(e,"At"),s=this.safeFloat(e,"Price"),a=this.safeFloat(e,"Amount");let r=void 0;void 0!==s&&void 0!==a&&(r=s*a);const o=this.safeString(e,"Type");let n=void 0;return void 0!==t&&(n=t.symbol),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,id:void 0,order:void 0,type:void 0,side:o,price:s,takerOrMaker:void 0,amount:a,cost:r,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id},o=await this.publicGetTradesSymbol(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseOrder(e,t){const i=this.safeString(e,"ListingCurrency"),s=this.safeString(e,"ReferenceCurrency"),a=this.safeCurrencyCode(i)+"/"+this.safeCurrencyCode(s),r=this.safeFloat(e,"LimitPrice"),o=this.safeFloat(e,"OriginalAmount"),n=this.safeFloat(e,"Amount");let c=void 0,d=void 0;void 0!==o&&(d=r*o,void 0!==n&&(c=o-n));const h=this.safeStringLower(e,"Type");return{info:e,id:this.safeString(e,"Code"),clientOrderId:void 0,timestamp:void 0,datetime:this.iso8601(void 0),lastTradeTimestamp:void 0,symbol:a,type:"limit",timeInForce:void 0,side:h,price:r,stopPrice:void 0,amount:o,cost:d,filled:c,remaining:n,status:"open",fee:void 0,average:void 0,trades:void 0}}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;void 0!==e&&(a=this.market(e));const r=await this.privatePostListOrders(s);return this.parseOrders(r,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n={listingCurrency:o.base,referenceCurrency:o.quote,type:i,amount:s};"limit"===t&&(n.limitPrice=a);const c=await this.privatePostPlaceOrder(this.extend(n,r));return{info:c,id:JSON.parse(c)}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderCode:e};return await this.privatePostCancelOrder(this.extend(s,i))}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privatePostGeneratenewaddress(this.extend(i,t));let a=s;'"'===a[0]&&(a=JSON.parse(a),'"'===a[0]&&(a=JSON.parse(a)));const r=a.split("|"),o=r.length;a=r[0],this.checkAddress(a);let n=void 0;return o>1&&(n=r[1]),{currency:e,address:a,tag:n,info:s}}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r={currency:this.currency(e).id,address:i,amount:t};void 0!==s&&(r.address=i+"|"+s);return{info:await this.privatePostWithdraw(this.extend(r,a)),id:void 0}}parseLedgerEntryType(e){return this.safeString({trade:"trade",tradefee:"fee",withdraw:"transaction",deposit:"transaction"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"MovementId");let s=void 0;let a=this.safeString2(e,"TradeId","OrderCode");a=this.safeString(e,"Hash",a);const r=this.safeString(e,"Address"),o=this.safeString(e,"Type"),n=this.parseLedgerEntryType(o),c=this.safeCurrencyCode(this.safeString(e,"CurrencyCode"),t);let d=this.safeFloat(e,"Amount");const h=this.safeFloat(e,"TotalBalance");let l=void 0;void 0!==d&&(void 0!==h&&(l=h-d),"withdrawal"===o?s="out":"deposit"===o?s="in":"trade"!==o&&"tradefee"!==o||(s=d<0?"out":"in",d=Math.abs(d)));const u=this.parse8601(this.safeString(e,"Date"));return{info:e,id:i,direction:s,account:void 0,referenceId:a,referenceAccount:r,type:n,currency:c,amount:d,before:l,after:h,status:this.safeString(e,"Status"),timestamp:u,datetime:this.iso8601(u),fee:void 0}}async fetchLedger(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchLedger() requires a code argument");await this.loadMarkets();const r=this.currency(e);i=void 0===i?50:i;const o={Currency:r.id,PageSize:i,SortField:"Date"};void 0===this.safeInteger(s,"PageIndex")&&(o.Descending=!0);const n=await this.privatePostListTransactions(this.extend(o,s)),c=this.safeValue(n,"Result",[]);return this.parseLedger(c,r,t,i)}parseTransactionStatus(e){return this.safeString({pending:"pending",processed:"pending",confirmed:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"MovementId"),s=this.safeFloat(e,"Amount"),a=this.safeString(e,"Address"),r=a,o=this.safeString(e,"Hash"),n=this.safeString(e,"Type"),c=this.parse8601(this.safeString(e,"Date")),d=this.parseTransactionStatus(this.safeString(e,"Status")),h=this.safeString(e,"CurrencyCode");return{info:e,id:i,currency:this.safeCurrencyCode(h,t),amount:s,address:a,addressTo:r,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,status:d,type:n,updated:void 0,txid:o,timestamp:c,datetime:this.iso8601(c),fee:void 0}}async fetchTransactions(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchTransactions() requires a code argument");await this.loadMarkets();const r=this.currency(e);i=void 0===i?50:i;const o={Currency:r.id,TransactionType:"depositswithdrawals",PageSize:i,SortField:"Date"};void 0===this.safeInteger(s,"PageIndex")&&(o.Descending=!0);const n=await this.privatePostListTransactions(this.extend(o,s)),c=this.safeValue(n,"Result",[]);return this.parseTransactions(c,r,t,i)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({TransactionType:"deposits"},s))}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({TransactionType:"withdrawals"},s))}sign(e,t="public",i="GET",s={},a,r){const o=this.urls.api+"/"+this.implodeParams(e,s);let n=this.omit(s,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();const e=this.nonce();n=this.extend({key:this.apiKey,nonce:e},n),r=this.json(n),a={"Content-Type":"application/json",Hash:this.hmac(this.encode(r),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:r,headers:a}}}},function(e,t,i){"use strict";const s=i(1),{ArgumentsRequired:a,AuthenticationError:r,ExchangeError:o,InsufficientFunds:n,OrderNotFound:c,PermissionDenied:d,BadRequest:h,DDoSProtection:l}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"stex",name:"STEX",countries:["EE"],rateLimit:500,certified:!1,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!1,createDepositAddress:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},version:"v3",urls:{logo:"https://user-images.githubusercontent.com/1294454/69680782-03fd0b80-10bd-11ea-909e-7f603500e9cc.jpg",api:"https://api3.stex.com",www:"https://www.stex.com",doc:["https://help.stex.com/en/collections/1593608-api-v3-documentation"],fees:"https://app.stex.com/en/pairs-specification",referral:"https://app.stex.com?ref=36416021"},requiredCredentials:{apiKey:!1,secret:!1,token:!0},timeframes:{"1m":"1","5m":"5","30m":"30","1h":"60","4h":"240","12h":"720","1d":"1D"},api:{public:{get:["currencies","currencies/{currencyId}","markets","pairs-groups","currency_pairs/list/{code}","currency_pairs/group/{currencyPairGroupId}","currency_pairs/{currencyPairId}","ticker","ticker/{currencyPairId}","trades/{currencyPairId}","orderbook/{currencyPairId}","chart/{currencyPairId}/{candlesType}","deposit-statuses","deposit-statuses/{statusId}","withdrawal-statuses","withdrawal-statuses/{statusId}","ping","mobile-versions"]},trading:{get:["fees/{currencyPairId}","orders","orders/{currencyPairId}","order/{orderId}"],post:["orders/{currencyPairId}"],delete:["orders","orders/{currencyPairId}","order/{orderId}"]},reports:{get:["orders","orders/{orderId}","trades/{currencyPairId}","background/{listMode}","background/{id}","background/download/{id}"],post:["background/create"],delete:["background/{id}"]},profile:{get:["info","wallets","wallets/{walletId}","wallets/address/{walletId}","deposits","deposits/{id}","withdrawals","withdrawals/{id}","notifications","favorite/currency_pairs","token-scopes"],post:["wallets/burn/{walletId}","wallets/{currencyId}","wallets/address/{walletId}","withdraw","referral/program","referral/insert/{code}","referral/bonus_transfer/{currencyId}"],put:["profile/favorite/currency_pairs/set"],delete:["profile/withdraw/{withdrawalId}"]},verification:{get:["verification/countries","verification/stex"],post:["verification/stex"]},settings:{get:["notifications/{event}","notifications"],put:["notifications","notifications/set"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002}},commonCurrencies:{BC:"Bitcoin Confidential",BITS:"Bitcoinus",BITSW:"BITS",BHD:"Bithold"},options:{parseOrderToPrecision:!1},exceptions:{exact:{"Wrong parameters":h,"Unauthenticated.":r,"Server Error":o,"This feature is only enabled for users verifies by Cryptonomica":d,"Too Many Attempts.":l},broad:{"Not enough":n}}})}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={},s=this.safeValue(t,"data",[]);for(let e=0;e<s.length;e++){const t=s[e],a=this.safeString(t,"id"),r=this.safeInteger(t,"id"),o=this.safeCurrencyCode(this.safeString(t,"code")),n=this.safeInteger(t,"precision"),c=this.safeFloat(t,"withdrawal_fee_const"),d=this.safeValue(t,"active",!0);i[o]={id:a,numericId:r,code:o,info:t,type:void 0,name:this.safeString(t,"name"),active:d,fee:c,precision:n,limits:{amount:{min:Math.pow(10,-n),max:void 0},price:{min:Math.pow(10,-n),max:void 0},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(t,"minimum_deposit_amount"),max:void 0},withdraw:{min:this.safeFloat(t,"minimum_withdrawal_amount"),max:void 0}}}}return i}async fetchMarkets(e={}){const t=await this.publicGetCurrencyPairsListCode(this.extend({code:"ALL"},e)),i=[],s=this.safeValue(t,"data",[]);for(let e=0;e<s.length;e++){const t=s[e],a=this.safeString(t,"id"),r=this.safeInteger(t,"id"),o=this.safeString(t,"currency_id"),n=this.safeString(t,"market_currency_id"),c=this.safeInteger(t,"currency_id"),d=this.safeInteger(t,"market_currency_id"),h=this.safeCurrencyCode(this.safeString(t,"currency_code")),l=this.safeCurrencyCode(this.safeString(t,"market_code")),u=h+"/"+l,p={amount:this.safeInteger(t,"currency_precision"),price:this.safeInteger(t,"market_precision")},f=this.safeValue(t,"active"),m=this.safeFloat(t,"min_buy_price"),v=this.safeFloat(t,"min_sell_price"),y=Math.max(m,v),g=this.safeFloat(t,"buy_fee_percent")/100,b=this.safeFloat(t,"sell_fee_percent")/100,w=Math.max(g,b);i.push({id:a,numericId:r,symbol:u,base:h,quote:l,baseId:o,quoteId:n,baseNumericId:c,quoteNumericId:d,info:t,active:f,maker:w,taker:w,precision:p,limits:{amount:{min:this.safeFloat(t,"min_order_amount"),max:void 0},price:{min:y,max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={currencyPairId:i.id},a=await this.publicGetTickerCurrencyPairId(this.extend(s,t)),r=this.safeValue(a,"data",{});return this.parseTicker(r,i)}async fetchTime(e={}){const t=await this.publicGetPing(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"server_datetime",{});return this.parse8601(this.safeString(s,"date"))}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currencyPairId:this.market(e).id};void 0!==t&&(s.limit_bids=t,s.limit_asks=t);const a=await this.publicGetOrderbookCurrencyPairId(this.extend(s,i)),r=this.safeValue(a,"data",{});return this.parseOrderBook(r,void 0,"bid","ask","price","amount")}parseTicker(e,t){const i=this.safeInteger(e,"timestamp"),s=this.safeString2(e,"id","symbol"),a=this.safeSymbol(s,t,"_"),r=this.safeFloat(e,"last"),o=this.safeFloat(e,"open");let n=void 0,c=void 0;return void 0!==r&&void 0!==o&&o>0&&(n=r-o,c=100/o*r-100),{symbol:a,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:o,close:r,last:r,previousClose:void 0,change:n,percentage:c,average:void 0,baseVolume:this.safeFloat(e,"volumeQuote"),quoteVolume:this.safeFloat(e,"volume"),info:e}}parseTickers(e,t){const i=[];for(let t=0;t<e.length;t++)i.push(this.parseTicker(e[t]));return this.filterByArray(i,"symbol",t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s=this.safeValue(i,"data",[]);return this.parseTickers(s,e)}parseOHLCV(e,t){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1d",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={currencyPairId:r.id,candlesType:this.timeframes[t]};void 0===s?s=100:o.limit=s;const n=s*this.parseTimeframe(t);void 0===i?(o.timeEnd=this.seconds(),o.timeStart=o.timeEnd-n):(o.timeStart=parseInt(i/1e3),o.timeEnd=this.sum(o.timeStart,n));const c=await this.publicGetChartCurrencyPairIdCandlesType(this.extend(o,a)),d=this.safeValue(c,"data",[]);return this.parseOHLCVs(d,r,t,i,s)}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeTimestamp(e,"timestamp"),a=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount");let o=void 0;void 0!==a&&void 0!==r&&(o=a*r);let n=void 0;void 0===n&&void 0!==t&&(n=t.symbol);const c=this.safeStringLower2(e,"type","trade_type");return{info:e,timestamp:s,datetime:this.iso8601(s),symbol:n,id:i,order:void 0,type:void 0,takerOrMaker:void 0,side:c,price:a,amount:r,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={currencyPairId:a.id};void 0!==i&&(r.limit=i),void 0!==t&&(r.sort="ASC",r.from=parseInt(t/1e3));const o=await this.publicGetTradesCurrencyPairId(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.profileGetWallets(e),i={info:t},s=this.safeValue(t,"data",[]);for(let e=0;e<s.length;e++){const t=s[e],a=this.safeCurrencyCode(this.safeString(t,"currency_id")),r=this.account();r.free=this.safeFloat(t,"balance"),r.used=this.safeFloat(t,"frozen_balance"),i[a]=r}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({PROCESSING:"open",PENDING:"open",PARTIAL:"open",FINISHED:"closed",CANCELLED:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parseOrderStatus(this.safeString(e,"status")),a=this.safeString2(e,"currency_pair_id","currency_pair_name"),r=this.safeSymbol(a,t,"_"),o=this.safeTimestamp(e,"timestamp"),n=this.safeFloat(e,"price"),c=this.safeFloat(e,"initial_amount"),d=this.safeFloat(e,"processed_amount");let h=void 0,l=void 0;void 0!==d&&(void 0!==c&&(h=c-d,this.options.parseOrderToPrecision&&(h=parseFloat(this.amountToPrecision(r,h))),h=Math.max(h,0)),void 0!==n&&void 0===l&&(l=n*d));let u=this.safeString(e,"original_type");"BUY"!==u&&"SELL"!==u||(u=void 0);const p=this.safeStringLower(e,"type"),f=this.safeValue(e,"trades");let m=void 0;void 0!==f&&(m=this.parseTrades(f,t,void 0,void 0,{symbol:r,order:i}));const v=this.safeFloat(e,"trigger_price"),y={info:e,id:i,clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:void 0,symbol:r,type:u,timeInForce:void 0,side:p,price:n,stopPrice:v,amount:c,cost:l,average:void 0,filled:d,remaining:h,status:s,trades:m},g=this.safeValue(e,"fees");if(void 0===g)y.fee=void 0;else{if(g.length>0){y.fees=[];for(let e=0;e<g.length;e++){const t=this.safeFloat(g[e],"amount");if(void 0!==t){const i=this.safeString(g[e],"currency_id"),s=this.safeCurrencyCode(i);y.fees.push({cost:t,currency:s})}}}else y.fee=void 0}return y}async createOrder(e,t,i,s,a,r={}){if("market"===t)throw new o(this.id+" createOrder allows limit orders only");await this.loadMarkets();const n=this.market(e);"limit"===t&&(t=i);const c={currencyPairId:n.id,type:t.toUpperCase(),amount:parseFloat(this.amountToPrecision(e,s)),price:parseFloat(this.priceToPrecision(e,a))},d=await this.tradingPostOrdersCurrencyPairId(this.extend(c,r)),h=this.safeValue(d,"data",{});return this.parseOrder(h,n)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},a=await this.tradingGetOrderOrderId(this.extend(s,i)),r=this.safeValue(a,"data",{});let o=void 0;return void 0!==t&&(o=this.market(t)),this.parseOrder(r,o)}async fetchClosedOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},a=await this.reportsGetOrdersOrderId(this.extend(s,i)),r=this.safeValue(a,"data",{});let o=void 0;return void 0!==t&&(o=this.market(t)),this.parseOrder(r,o)}async fetchOrderTrades(e,t,i,s,a={}){return(await this.fetchClosedOrder(e,t,a)).trades}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0,r="tradingGetOrders";const o={};void 0!==e&&(r="tradingGetOrdersCurrencyPairId",a=this.market(e),o.currencyPairId=a.id),void 0!==i&&(o.limit=i);const n=await this[r](this.extend(o,s)),c=this.safeValue(n,"data",[]);return this.parseOrders(c,a,t,i)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},a=await this.tradingDeleteOrderOrderId(this.extend(s,i)),r=this.safeValue(a,"data",{}),o=this.safeValue(r,"put_into_processing_queue",[]),n=this.safeValue(r,"not_put_into_processing_queue",[]),d=o.length,h=n.length;if(d<1){if(h<1)throw new c(this.id+" cancelOrder received an empty response: "+this.json(a));return this.parseOrder(n[0])}if(h<1)return this.parseOrder(o[0]);throw new c(this.id+" cancelOrder received an empty response: "+this.json(a))}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s="tradingDeleteOrders";if(void 0!==e){const t=this.market(e);i.currencyPairId=t.id,s="tradingDeleteOrdersCurrencyPairId"}return await this[s](this.extend(i,t))}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const r=this.market(e),o={currencyPairId:r.id};void 0!==t&&(o.timeStart=this.iso8601(t)),void 0!==i&&(o.limit=i);const n=await this.reportsGetTradesCurrencyPairId(this.extend(o,s)),c=this.safeValue(n,"data",[]);return this.parseTrades(c,r,t,i)}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currencyId:this.currency(e).id},s=await this.profilePostWalletsCurrencyId(this.extend(i,t)),a=this.safeValue(s,"data",{}),r=this.safeValue(a,"deposit_address",{}),o=this.safeString(r,"address"),n=this.safeString(r,"additional_address_parameter");return this.checkAddress(o),{currency:e,address:o,tag:n,info:s}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=await this.fetchBalance(),s=this.safeValue(i.info,"data",[]),a=this.indexBy(s,"currency_id"),r=this.currency(e),n=this.safeValue(a,r.id);if(void 0===n)throw new o(this.id+" fetchDepositAddress() could not find the wallet id for currency code "+e+", try to call createDepositAddress() first");const c=this.safeInteger(n,"id");if(void 0===c)throw new o(this.id+" fetchDepositAddress() could not find the wallet id for currency code "+e+", try to call createDepositAddress() first");const d={walletId:c},h=await this.profileGetWalletsWalletId(this.extend(d,t)),l=this.safeValue(h,"data",[]),u=this.safeValue(l,"deposit_address",{}),p=this.safeString(u,"address"),f=this.safeString(u,"additional_address_parameter");return this.checkAddress(p),{currency:e,address:p,tag:f,info:h}}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+t+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));return"public"===t?Object.keys(n).length&&(o+="?"+this.urlencode(n)):(this.checkRequiredCredentials(),a={Authorization:"Bearer "+this.token},"GET"===i||"DELETE"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):(r=this.json(n),Object.keys(n).length&&(a["Content-Type"]="application/json"))),{url:o,method:i,body:r,headers:a}}parseTransactionStatus(e){return this.safeString({processing:"pending","checking by system":"pending",hodl:"pending","amount too low":"failed","not confirmed":"pending","cancelled by User":"canceled",approved:"pending",finished:"ok","withdrawal error":"failed","deposit error":"failed","cancelled by admin":"canceled",awaiting:"pending"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeValue(e,"withdrawal_address",{}),a=this.safeString(s,"address"),r=this.safeString(s,"additional_address_parameter"),o=this.safeString(e,"currency_id");let n=void 0;o in this.currencies_by_id?t=this.currencies_by_id[o]:n=this.commonCurrencyCode(this.safeString(e,"currency_code")),void 0===n&&void 0!==t&&(n=t.code);const c="deposit_status_id"in e?"deposit":"withdrawal",d=this.safeFloat(e,"amount"),h=this.parseTransactionStatus(this.safeStringLower(e,"status")),l=this.safeTimestamp2(e,"timestamp","created_ts"),u=this.safeTimestamp(e,"updated_ts"),p=this.safeString(e,"txid");let f=void 0;const m=this.safeFloat(e,"fee");if(void 0!==m){const t=this.safeString(e,"fee_currency_id","deposit_fee_currency_id");f={cost:m,currency:this.safeCurrencyCode(t)}}return{info:e,id:i,txid:p,timestamp:l,datetime:this.iso8601(l),addressFrom:void 0,address:a,addressTo:a,tagFrom:void 0,tag:r,tagTo:r,type:c,amount:d,currency:n,status:h,updated:u,fee:f}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.currency(e),r.currencyId=a.id),void 0!==i&&(r.limit=i),void 0!==t&&(r.timeStart=t);const o=await this.profileGetDeposits(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseTransactions(n,e,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.currency(e),r.currencyId=a.id),void 0!==i&&(r.limit=i),void 0!==t&&(r.timeStart=t);const o=await this.profileGetWithdrawals(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseTransactions(n,e,t,i)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e),o={currency_id:r.id,amount:parseFloat(this.currencyToPrecision(e,t)),address:i};void 0!==s&&(o.additional_address_parameter=s);const n=await this.profilePostWithdraw(this.extend(o,a)),c=this.safeValue(n,"data",{});return this.parseTransaction(c,r)}async fetchFundingFees(e,t={}){const i=await this.publicGetCurrencies(t),s=this.safeValue(i,"data",[]),a={},r={};for(let e=0;e<s.length;e++){const t=this.safeString(s[e],"id"),i=this.safeCurrencyCode(t);a[i]=this.safeFloat(s[e],"withdrawal_fee_const"),r[i]=this.safeFloat(s[e],"deposit_fee_const")}return{withdraw:a,deposit:r,info:i}}handleErrors(e,t,i,s,a,r,n,c,d){if(void 0===n)return;if(!this.safeValue(n,"success",!1)){const e=this.safeString(n,"message"),t=this.id+" "+r;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new o(t)}}}},function(e,t,i){"use strict";const s=i(36);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"surbitcoin",name:"SurBitcoin",countries:["VE"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991511-f0a50194-6481-11e7-99b5-8f02932424cc.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://surbitcoin.com",doc:"https://blinktrade.com/docs"},options:{brokerId:"1"}})}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,BadRequest:o,OrderNotFound:n,InvalidAddress:c}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"therock",name:"TheRockTrading",countries:["MT"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:"emulated",fetchWithdrawals:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766869-75057fa2-5ee9-11e7-9a6f-13e641fa4707.jpg",api:"https://api.therocktrading.com",www:"https://therocktrading.com",doc:["https://api.therocktrading.com/doc/v1/index.html","https://api.therocktrading.com/doc/"]},api:{public:{get:["funds","funds/{id}/orderbook","funds/{id}/ticker","funds/{id}/trades","funds/tickers"]},private:{get:["balances","balances/{id}","discounts","discounts/{id}","funds","funds/{id}","funds/{id}/trades","funds/{fund_id}/orders","funds/{fund_id}/orders/{id}","funds/{fund_id}/position_balances","funds/{fund_id}/positions","funds/{fund_id}/positions/{id}","transactions","transactions/{id}","withdraw_limits/{id}","withdraw_limits"],post:["atms/withdraw","funds/{fund_id}/orders"],delete:["funds/{fund_id}/orders/{id}","funds/{fund_id}/orders/remove_all"]}},fees:{trading:{maker:.002,taker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:5e-4,BCH:5e-4,PPC:.02,ETH:.001,ZEC:.001,LTC:.002,EUR:2.5},deposit:{BTC:0,BCH:0,PPC:0,ETH:0,ZEC:0,LTC:0,EUR:0}}},exceptions:{exact:{"Request already running":o,"cannot specify multiple address types":o,"Currency is not included in the list":o,"Record not found":n},broad:{"before must be greater than after param":o,"must be shorter than 60 days":o,"must be a multiple of (period param) in minutes":o,"Address allocation limit reached for currency":c,"is not a valid value for param currency":o," is invalid":c}}})}async fetchMarkets(e={}){const t=await this.publicGetFunds(e),i=this.safeValue(t,"funds"),s=[];if(void 0===i)throw new a(this.id+" fetchMarkets got an unexpected response");for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"id"),r=this.safeString(t,"trade_currency"),o=this.safeString(t,"base_currency"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o),d=n+"/"+c,h=this.safeFloat(t,"buy_fee"),l=this.safeFloat(t,"sell_fee");let u=Math.max(h,l);u/=100;const p=u;s.push({id:a,symbol:d,base:n,quote:c,baseId:r,quoteId:o,info:t,active:!0,maker:p,taker:u,precision:{amount:this.safeInteger(t,"trade_currency_decimals"),price:this.safeInteger(t,"base_currency_decimals")},limits:{amount:{min:this.safeFloat(t,"minimum_quantity_offer"),max:void 0},price:{min:this.safeFloat(t,"minimum_price_offer"),max:void 0},cost:{min:void 0,max:void 0}}})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalances(e),i=this.safeValue(t,"balances",[]),s={info:t};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"currency"),r=this.safeCurrencyCode(a),o=this.account();o.free=this.safeFloat(t,"trading_balance"),o.total=this.safeFloat(t,"balance"),s[r]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e)},a=await this.publicGetFundsIdOrderbook(this.extend(s,i)),r=this.parse8601(this.safeString(a,"date"));return this.parseOrderBook(a,r,"bids","asks","price","amount")}parseTicker(e,t){const i=this.parse8601(e.date);let s=void 0;void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:a,last:a,previousClose:this.safeFloat(e,"close"),change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume_traded"),quoteVolume:this.safeFloat(e,"volume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetFundsTickers(t),s=this.indexBy(i.tickers,"fund_id"),a=Object.keys(s),r={};for(let e=0;e<a.length;e++){const t=a[e],i=this.safeMarket(t),o=i.symbol,n=s[t];r[o]=this.parseTicker(n,i)}return this.filterByArray(r,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=await this.publicGetFundsIdTicker(this.extend({id:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){const i=this.safeString(e,"fund_id"),s=this.safeSymbol(i,t),a=this.parse8601(this.safeString(e,"date")),r=this.safeString(e,"id"),o=this.safeString(e,"order_id"),n=this.safeString(e,"side"),c=this.safeFloat(e,"price"),d=this.safeFloat(e,"amount");let h=void 0;void 0!==c&&void 0!==d&&(h=c*d);let l=void 0,u=void 0;const p=this.safeValue(e,"transactions",[]),f=this.groupBy(p,"type"),m=this.safeValue(f,"paid_commission",[]);for(let e=0;e<m.length;e++)void 0===u&&(u=0),u=this.sum(u,this.safeFloat(m[e],"price"));return void 0!==u&&(l={cost:u,currency:t.quote}),{info:e,id:r,order:o,timestamp:a,datetime:this.iso8601(a),symbol:s,type:void 0,side:n,takerOrMaker:void 0,price:c,amount:d,cost:h,fee:l}}parseLedgerEntryDirection(e){return this.safeString({affiliate_earnings:"in",atm_payment:"in",bought_currency_from_fund:"out",bought_shares:"out",paid_commission:"out",paypal_payment:"in",pos_payment:"in",released_currency_to_fund:"out",rollover_commission:"out",sold_currency_to_fund:"in",sold_shares:"in",transfer_received:"in",transfer_sent:"out",withdraw:"out"},e,e)}parseLedgerEntryType(e){return this.safeString({affiliate_earnings:"referral",atm_payment:"transaction",bought_currency_from_fund:"trade",bought_shares:"trade",paid_commission:"fee",paypal_payment:"transaction",pos_payment:"transaction",released_currency_to_fund:"trade",rollover_commission:"fee",sold_currency_to_fund:"trade",sold_shares:"trade",transfer_received:"transfer",transfer_sent:"transfer",withdraw:"transaction"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"id");let s=void 0,a=this.safeString(e,"type");const r=this.parseLedgerEntryDirection(a);a=this.parseLedgerEntryType(a),"trade"!==a&&"fee"!==a||(s=this.safeString(e,"trade_id"));const o=this.safeString(e,"currency"),n=this.safeCurrencyCode(o),c=this.safeFloat(e,"price"),d=this.parse8601(this.safeString(e,"date"));return{info:e,id:i,direction:r,account:void 0,referenceId:s,referenceAccount:void 0,type:a,currency:n,amount:c,before:void 0,after:void 0,status:"ok",timestamp:d,datetime:this.iso8601(d),fee:void 0}}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.currency=r.id),void 0!==t&&(a.after=this.iso8601(t));const o=await this.privateGetTransactions(this.extend(a,s)),n=this.safeValue(o,"transactions",[]);return this.parseLedger(n,r,t,i)}parseTransactionType(e){return this.safeString({withdraw:"withdrawal",atm_payment:"deposit"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.parseTransactionType(this.safeString(e,"type")),a=this.safeValue(e,"transfer_detail",{}),r=this.safeString(a,"method");let o=void 0,n=void 0;void 0!==r&&"wire_transfer"!==r&&(o=this.safeString(a,"id"),n=this.safeString(a,"recipient"));const c=this.safeString(e,"currency"),d=this.safeCurrencyCode(c),h=this.safeFloat(e,"price"),l=this.parse8601(this.safeString(e,"date"));return{info:e,id:i,currency:d,amount:h,addressFrom:void 0,addressTo:n,address:n,tagFrom:void 0,tagTo:void 0,tag:void 0,status:"ok",type:s,updated:void 0,txid:o,timestamp:l,datetime:this.iso8601(l),fee:void 0}}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({type:"withdraw"},s))}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({type:"atm_payment"},s))}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.currency=r.id),void 0!==t&&(a.after=this.iso8601(t)),s=this.extend(a,s);const o=await this.privateGetTransactions(s),n=this.safeValue(o,"transactions",[]),c=this.filterByArray(n,"type",["withdraw","atm_payment"],!1);return this.parseTransactions(c,r,t,i)}parseOrderStatus(e){return this.safeString({active:"open",executed:"closed",deleted:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"fund_id"),a=this.safeSymbol(s,t),r=this.parseOrderStatus(this.safeString(e,"status")),o=this.parse8601(this.safeString(e,"date")),n=this.safeString(e,"type"),c=this.safeString(e,"side"),d=this.safeFloat(e,"amount"),h=this.safeFloat(e,"amount_unfilled");let l=void 0;void 0!==d&&void 0!==h&&(l=d-h);const u=this.safeFloat(e,"price");let p=this.safeValue(e,"trades"),f=void 0,m=void 0,v=void 0;if(void 0!==p){const e=p.length;if(e>0){p=this.parseTrades(p,t,void 0,void 0,{orderId:i}),f=0,l=0;for(let t=0;t<e;t++){const e=p[t];f=this.sum(f,e.cost),l=this.sum(l,e.amount)}l>0&&(m=f/l),v=p[e-1].timestamp}else f=0}const y=this.safeFloat(e,"conditional_price");return{id:i,clientOrderId:void 0,info:e,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:v,status:r,symbol:a,type:n,timeInForce:void 0,side:c,price:u,stopPrice:y,cost:f,amount:d,filled:l,average:m,remaining:h,fee:void 0,trades:p}}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"active"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"executed"},s))}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e),o={fund_id:a.id};void 0!==t&&(o.after=this.iso8601(t));const n=await this.privateGetFundsFundIdOrders(this.extend(o,s)),c=this.safeValue(n,"orders",[]);return this.parseOrders(c,a,t,i)}async fetchOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s={id:e,fund_id:this.market(t).id},a=await this.privatePostFundsFundIdOrdersId(this.extend(s,i));return this.parseOrder(a)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets(),"market"===t&&(a=0);const o={fund_id:this.marketId(e),side:i,amount:s,price:a},n=await this.privatePostFundsFundIdOrders(this.extend(o,r));return this.parseOrder(n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e,fund_id:this.marketId(t)},a=await this.privateDeleteFundsFundIdOrdersId(this.extend(s,i));return this.parseOrder(a)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const a=this.market(e),o={id:a.id};void 0!==i&&(o.per_page=i),void 0!==t&&(o.after=this.iso8601(t));const n=await this.privateGetFundsIdTrades(this.extend(o,s));return this.parseTrades(n.trades,a,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={id:a.id};void 0!==i&&(r.per_page=i),void 0!==t&&(r.after=this.iso8601(t));const o=await this.publicGetFundsIdTrades(this.extend(r,s));return this.parseTrades(o.trades,a,t,i)}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if(a=void 0===a?{}:a,"private"===t){if(this.checkRequiredCredentials(),Object.keys(n).length)if("POST"===i)r=this.json(n),a["Content-Type"]="application/json";else{const e=this.rawencode(n);e.length&&(o+="?"+e)}const e=this.nonce().toString(),t=e+o;a["X-TRT-KEY"]=this.apiKey,a["X-TRT-NONCE"]=e,a["X-TRT-SIGN"]=this.hmac(this.encode(t),this.encode(this.secret),"sha512")}else"public"===t&&Object.keys(n).length&&(o+="?"+this.rawencode(n));return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n)return;const h=this.safeValue(n,"errors",[]),l=h.length;if(l>0){const e=this.id+" "+o;for(let t=0;t<l;t++){const i=h[t],s=this.safeString(i,"message");this.throwExactlyMatchedException(this.exceptions.exact,s,e),this.throwBroadlyMatchedException(this.exceptions.broad,s,e)}throw new a(e)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,InsufficientFunds:r,OrderNotFound:o,ArgumentsRequired:n}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"tidebit",name:"TideBit",countries:["HK"],rateLimit:1e3,version:"v2",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","12h":"720","1d":"1440","3d":"4320","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87460811-1e690280-c616-11ea-8652-69f187305add.jpg",api:"https://www.tidebit.com",www:"https://www.tidebit.com",doc:["https://www.tidebit.com/documents/api/guide","https://www.tidebit.com/swagger/#/default"],referral:"http://bit.ly/2IX0LrM"},api:{public:{get:["markets","tickers","tickers/{market}","timestamp","trades","trades/{market}","order_book","order","k_with_pending_trades","k","depth"],post:[]},private:{get:["addresses/{address}","deposits/history","deposits/get_deposit","deposits/deposit_address","historys/orders","historys/vouchers","historys/accounts","historys/snapshots","linkage/get_status","members/me","order","orders","partners/orders/{id}/trades","referral_commissions/get_undeposited","referral_commissions/get_graph_data","trades/my","withdraws/bind_account_list","withdraws/get_withdraw_account","withdraws/fetch_bind_info"],post:["deposits/deposit_cash","favorite_markets/update","order/delete","orders","orders/multi","orders/clear","referral_commissions/deposit","withdraws/apply","withdraws/bind_bank","withdraws/bind_address"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.003,taker:.003},funding:{tierBased:!1,percentage:!0,withdraw:{}}},exceptions:{2002:r,2003:o}})}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetDepositAddress(this.extend(i,t));if("success"in s&&s.success){const t=this.safeString(s,"address"),i=this.safeString(s,"addressTag");return{currency:e,address:this.checkAddress(t),tag:i,info:s}}}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"id"),r=this.safeString(s,"name"),[o,n]=r.split("/"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n);i.push({id:a,symbol:r,base:c,quote:d,baseId:o,quoteId:n,info:s,active:void 0,precision:this.precision,limits:this.limits})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetMembersMe(e),i=this.safeValue(t,"accounts"),s={info:i};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"currency"),r=this.safeCurrencyCode(a),o=this.account();o.free=this.safeFloat(t,"balance"),o.used=this.safeFloat(t,"locked"),s[r]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),a={market:s.id};void 0!==t&&(a.limit=t),a.market=s.id;const r=await this.publicGetDepth(this.extend(a,i)),o=this.safeTimestamp(r,"timestamp");return this.parseOrderBook(r,o)}parseTicker(e,t){const i=this.safeTimestamp(e,"at");e=this.safeValue(e,"ticker",{});let s=void 0;void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),ask:this.safeFloat(e,"sell"),bidVolume:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,change:void 0,percentage:void 0,previousClose:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s=Object.keys(i),a={};for(let e=0;e<s.length;e++){const t=s[e],r=this.safeMarket(t),o=r.symbol,n=i[t];a[o]=this.parseTicker(n,r)}return this.filterByArray(a,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},a=await this.publicGetTickersMarket(this.extend(s,t));return this.parseTicker(a,i)}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"id"),a=this.safeFloat(e,"price"),r=this.safeFloat(e,"volume"),o=this.safeFloat(e,"funds");let n=void 0;return void 0!==t&&(n=t.symbol),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:a,amount:r,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market:a.id},o=await this.publicGetTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e);void 0===s&&(s=30);const o={market:r.id,period:this.timeframes[t],limit:s};o.timestamp=void 0!==i?parseInt(i/1e3):18e5;const n=await this.publicGetK(this.extend(o,a));return"null"===n?[]:this.parseOHLCVs(n,r,t,i,s)}parseOrderStatus(e){return this.safeString({done:"closed",wait:"open",cancel:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"market"),s=this.safeSymbol(i,t),a=this.parse8601(this.safeString(e,"created_at")),r=this.parseOrderStatus(this.safeString(e,"state")),o=this.safeString(e,"id"),n=this.safeString(e,"ord_type"),c=this.safeString(e,"side"),d=this.safeFloat(e,"price"),h=this.safeFloat(e,"volume"),l=this.safeFloat(e,"executed_volume"),u=this.safeFloat(e,"remaining_volume");let p=void 0;void 0!==d&&void 0!==l&&(p=d*l);const f=this.safeFloat(e,"avg_price");return{id:o,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,status:r,symbol:s,type:n,timeInForce:void 0,side:c,price:d,stopPrice:void 0,amount:h,filled:l,remaining:u,cost:p,trades:void 0,fee:void 0,info:e,average:f}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o={market:this.marketId(e),side:i,volume:s.toString(),ord_type:t};"limit"===t&&(o.price=a.toString());const n=await this.privatePostOrders(this.extend(o,r));return this.parseOrder(n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},a=await this.privatePostOrderDelete(this.extend(s,i)),r=this.parseOrder(a),n=this.safeString(r,"status");if("closed"===n||"canceled"===n)throw new o(this.id+" "+this.json(r));return r}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e),o=this.safeString(a,"id");if(void 0===o)throw new n(this.id+" withdraw() requires an extra `id` param (withdraw account id according to withdraws/bind_account_list endpoint");const c={id:o,currency_type:"coin",currency:r.id,body:t};void 0!==s&&(c.memo=s);return{info:await this.privatePostWithdrawsApply(this.extend(c,a)),id:void 0}}nonce(){return this.milliseconds()}encodeParams(e){return this.urlencode(this.keysort(e))}sign(e,t="public",i="GET",s={},a,r){const o="/api/"+this.version+"/"+this.implodeParams(e,s)+".json",n=this.omit(s,this.extractParams(e));let c=this.urls.api+o;if("public"===t)Object.keys(n).length&&(c+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.keysort(this.extend({access_key:this.apiKey,tonce:e},s)),n=this.urlencode(t),d=i+"|"+o+"|"+n,h=n+"&signature="+this.hmac(this.encode(d),this.encode(this.secret));"GET"===i?c+="?"+h:(r=h,a={"Content-Type":"application/x-www-form-urlencoded"})}return{url:c,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(400===e||void 0===n){const e=this.id+" "+o;if(void 0===n)throw new a(e);const t=this.safeValue(n,"error",{}),i=this.safeString(t,"code");this.throwExactlyMatchedException(this.exceptions,i,e)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,ExchangeNotAvailable:o,InsufficientFunds:n,OrderNotFound:c,DDoSProtection:d,InvalidOrder:h,AuthenticationError:l}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"tidex",name:"Tidex",countries:["UK"],rateLimit:2e3,version:"3",userAgent:this.userAgents.chrome,has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/30781780-03149dc4-a12e-11e7-82bb-313b269d24d4.jpg",api:{web:"https://gate.tidex.com/api",public:"https://api.tidex.com/api/3",private:"https://api.tidex.com/tapi"},www:"https://tidex.com",doc:"https://tidex.com/exchange/public-api",referral:"https://tidex.com/exchange/?ref=57f5638d9cd7",fees:["https://tidex.com/exchange/assets-spec","https://tidex.com/exchange/pairs-spec"]},api:{web:{get:["currency","pairs","tickers","orders","ordershistory","trade-data","trade-data/{id}"]},public:{get:["info","ticker/{pair}","depth/{pair}","trades/{pair}"]},private:{post:["getInfoExt","getInfo","Trade","ActiveOrders","OrderInfo","CancelOrder","TradeHistory","CoinDepositAddress","WithdrawCoin","CreateCoupon","RedeemCoupon"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},commonCurrencies:{DSH:"DASH",EMGO:"MGO",MGO:"WMGO"},exceptions:{exact:{803:h,804:h,805:h,806:h,807:h,831:n,832:n,833:c},broad:{"Invalid pair name":a,"invalid api key":l,"invalid sign":l,"api key dont have trade permission":l,"invalid parameter":h,"invalid order":h,"Requests too often":d,"not available":o,"data unavailable":o,"external service unavailable":o}},options:{fetchTickersMaxLength:2048},orders:{}})}async fetchCurrencies(e={}){const t=await this.webGetCurrency(e),i={};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"symbol"),r=s.amountPoint,o=this.safeCurrencyCode(a);let n=!0===s.visible;const c=!0===s.withdrawEnable,d=!0===s.depositEnable;c&&d||(n=!1);const h=this.safeString(s,"name");i[o]={id:a,code:o,name:h,active:n,precision:r,funding:{withdraw:{active:c,fee:s.withdrawFee},deposit:{active:d,fee:0}},limits:{amount:{min:void 0,max:Math.pow(10,r)},price:{min:Math.pow(10,-r),max:Math.pow(10,r)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(s,"withdrawMinAmount"),max:void 0},deposit:{min:this.safeFloat(s,"depositMinAmount"),max:void 0}},info:s}}return i}calculateFee(e,t,i,s,a,r="taker",o={}){const n=this.markets[e];let c="quote";const d=n[r];let h=parseFloat(this.costToPrecision(e,s*d));return"sell"===i?h*=a:c="base",{type:r,currency:n[c],rate:d,cost:h}}async fetchMarkets(e={}){const t=(await this.publicGetInfo(e)).pairs,i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){const a=i[e],r=t[a],[o,n]=a.split("_"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=c+"/"+d,l={amount:this.safeInteger(r,"decimal_places"),price:this.safeInteger(r,"decimal_places")},u={amount:{min:this.safeFloat(r,"min_amount"),max:this.safeFloat(r,"max_amount")},price:{min:this.safeFloat(r,"min_price"),max:this.safeFloat(r,"max_price")},cost:{min:this.safeFloat(r,"min_total")}},p=0===this.safeInteger(r,"hidden");s.push({id:a,symbol:h,base:c,quote:d,baseId:o,quoteId:n,active:p,taker:r.fee/100,precision:l,limits:u,info:r})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetInfoExt(e),i=this.safeValue(t,"return"),s={info:i},a=this.safeValue(i,"funds",{}),r=Object.keys(a);for(let e=0;e<r.length;e++){const t=r[e],i=this.safeCurrencyCode(t),o=this.safeValue(a,t,{}),n=this.account();n.free=this.safeFloat(o,"value"),n.used=this.safeFloat(o,"inOrders"),s[i]=n}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={pair:s.id};void 0!==t&&(r.limit=t);const o=await this.publicGetDepthPair(this.extend(r,i));if(!(s.id in o))throw new a(this.id+" "+s.symbol+" order book is empty or not available");const n=o[s.id];return this.parseOrderBook(n)}async fetchOrderBooks(e,t,i={}){await this.loadMarkets();let s=void 0;if(void 0===e){if(s=this.ids.join("-"),s.length>2048){const e=this.ids.length;throw new a(this.id+" has "+e.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks")}}else s=this.marketIds(e),s=s.join("-");const r={pair:s};void 0!==t&&(r.limit=t);const o=await this.publicGetDepthPair(this.extend(r,i)),n={};s=Object.keys(o);for(let e=0;e<s.length;e++){const t=s[e];n[this.safeSymbol(t)]=this.parseOrderBook(o[t])}return n}parseTicker(e,t){let i=this.safeTimestamp(e,"updated"),s=void 0;void 0!==t&&(s=t.symbol,t.active||(i=void 0));const a=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:this.safeFloat(e,"vol_cur"),quoteVolume:this.safeFloat(e,"vol"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=this.ids;if(void 0===e){const e=i.length;if(i=i.join("-"),i.length>this.options.fetchTickersMaxLength){const t=this.safeInteger(this.options,"fetchTickersMaxLength",2048);throw new r(this.id+" has "+e.toString()+" markets exceeding max URL length for this endpoint ("+t.toString()+" characters), please, specify a list of symbols of interest in the first argument to fetchTickers")}}else i=this.marketIds(e),i=i.join("-");const s={pair:i},a=await this.publicGetTickerPair(this.extend(s,t)),o={},n=Object.keys(a);for(let e=0;e<n.length;e++){const t=n[e],i=this.safeMarket(t);o[i.symbol]=this.parseTicker(a[t],i)}return this.filterByArray(o,"symbol",e)}async fetchTicker(e,t={}){return(await this.fetchTickers([e],t))[e]}parseTrade(e,t){const i=this.safeTimestamp(e,"timestamp");let s=this.safeString(e,"type");"ask"===s?s="sell":"bid"===s&&(s="buy");const a=this.safeFloat2(e,"rate","price"),r=this.safeString2(e,"trade_id","tid"),o=this.safeString(e,"order_id"),n=this.safeString(e,"pair"),c=this.safeSymbol(n,t),d=this.safeFloat(e,"amount");let h=void 0,l=void 0;const u=this.safeFloat(e,"commission");if(void 0!==u){const t=this.safeString(e,"commissionCurrency");l={cost:u,currency:this.safeCurrencyCode(t)}}const p=this.safeValue(e,"is_your_order");void 0!==p&&(h="taker",p&&(h="maker"),void 0===l&&(l=this.calculateFee(c,"limit",s,d,a,h)));let f=void 0;return void 0!==d&&void 0!==a&&(f=d*a),{id:r,order:o,timestamp:i,datetime:this.iso8601(i),symbol:c,type:"limit",side:s,takerOrMaker:h,price:a,amount:d,cost:f,fee:l,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={pair:a.id};void 0!==i&&(r.limit=i);const o=await this.publicGetTradesPair(this.extend(r,s));if(Array.isArray(o)){if(0===o.length)return[]}return this.parseTrades(o[a.id],a,t,i)}async createOrder(e,t,i,s,r,o={}){if("market"===t)throw new a(this.id+" allows limit orders only");await this.loadMarkets();const n={pair:this.market(e).id,type:i,amount:this.amountToPrecision(e,s),rate:this.priceToPrecision(e,r)};r=parseFloat(r),s=parseFloat(s);const c=await this.privatePostTrade(this.extend(n,o));let d=void 0,h="open",l=0,u=s;"return"in c&&(d=this.safeString(c.return,"order_id"),"0"===d&&(d=this.safeString(c.return,"init_order_id"),h="closed"),l=this.safeFloat(c.return,"received",0),u=this.safeFloat(c.return,"remains",s));const p=this.milliseconds();return{id:d,timestamp:p,datetime:this.iso8601(p),lastTradeTimestamp:void 0,status:h,symbol:e,type:t,side:i,price:r,cost:r*l,amount:s,remaining:u,filled:l,fee:void 0,info:c,clientOrderId:void 0,average:void 0,trades:void 0}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)};return await this.privatePostCancelOrder(this.extend(s,i))}parseOrderStatus(e){return this.safeString({0:"open",1:"closed",2:"canceled",3:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parseOrderStatus(this.safeString(e,"status")),a=this.safeTimestamp(e,"timestamp_created"),r=this.safeString(e,"pair"),o=this.safeSymbol(r,t);let n=void 0,c=void 0;const d=this.safeFloat(e,"rate");let h=void 0,l=void 0;"start_amount"in e?(c=this.safeFloat(e,"start_amount"),n=this.safeFloat(e,"amount")):n=this.safeFloat(e,"amount"),void 0!==c&&void 0!==n&&(h=c-n,l=d*h);return{info:e,id:i,clientOrderId:void 0,symbol:o,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,type:"limit",timeInForce:void 0,side:this.safeString(e,"type"),price:d,stopPrice:void 0,cost:l,amount:c,remaining:n,filled:h,status:s,fee:void 0,average:void 0,trades:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)},a=await this.privatePostOrderInfo(this.extend(s,i));e=e.toString();const r=this.safeValue(a,"return",{}),o=this.safeValue(r,e);return this.parseOrder(this.extend({id:e},o))}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.market(e),a.pair=r.id);const o=await this.privatePostActiveOrders(this.extend(a,s)),n=this.safeValue(o,"return",[]);return this.parseOrders(n,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.market(e),r.pair=a.id),void 0!==i&&(r.count=parseInt(i)),void 0!==t&&(r.since=parseInt(t/1e3));const o=await this.privatePostTradeHistory(this.extend(r,s)),n=this.safeValue(o,"return",[]);return this.parseTrades(n,a,t,i)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const o={coinName:this.currency(e).id,amount:parseFloat(t),address:i};if(void 0!==s)throw new a(this.id+" withdraw() does not support the tag argument yet due to a lack of docs on withdrawing with tag/memo on behalf of the exchange.");const n=await this.privatePostWithdrawCoin(this.extend(o,r));return{info:n,id:n.return.tId}}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t];const n=this.omit(s,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();const t=this.nonce();r=this.urlencode(this.extend({nonce:t,method:e},n));const i=this.hmac(this.encode(r),this.encode(this.secret),"sha512");a={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:i}}else"public"===t?(o+="/"+this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n))):(o+="/"+this.implodeParams(e,s),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(r=this.json(n),a={"Content-Type":"application/json"}));return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0!==n&&"success"in n){let e=this.safeValue(n,"success",!1);if("string"==typeof e&&(e="true"===e||"1"===e),!e){const e=this.safeString(n,"code"),t=this.safeString(n,"error"),i=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,e,i),this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i),new a(i)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,PermissionDenied:r,ExchangeNotAvailable:o,InsufficientFunds:n,OrderNotFound:c,InvalidOrder:d,RateLimitExceeded:h,NotSupported:l,BadRequest:u,AuthenticationError:p}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"timex",name:"TimeX",countries:["AU"],version:"v1",rateLimit:1500,has:{cancelOrder:!0,cancelOrders:!0,CORS:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0},timeframes:{"1m":"I1","5m":"I5","15m":"I15","30m":"I30","1h":"H1","2h":"H2","4h":"H4","6h":"H6","12h":"H12","1d":"D1","1w":"W1"},urls:{logo:"https://user-images.githubusercontent.com/1294454/70423869-6839ab00-1a7f-11ea-8f94-13ae72c31115.jpg",api:"https://plasma-relay-backend.timex.io",www:"https://timex.io",doc:"https://docs.timex.io",referral:"https://timex.io/?refcode=1x27vNkTbP1uwkCck"},api:{custody:{get:["credentials","credentials/h/{hash}","credentials/k/{key}","credentials/me/address","deposit-addresses","deposit-addresses/h/{hash}"]},history:{get:["orders","orders/details","orders/export/csv","trades","trades/export/csv"]},currencies:{get:["a/{address}","i/{id}","s/{symbol}"],post:["perform","prepare","remove/perform","s/{symbol}/remove/prepare","s/{symbol}/update/perform","s/{symbol}/update/prepare"]},markets:{get:["i/{id}","s/{symbol}"],post:["perform","prepare","remove/perform","s/{symbol}/remove/prepare","s/{symbol}/update/perform","s/{symbol}/update/prepare"]},public:{get:["candles","currencies","markets","orderbook","orderbook/raw","orderbook/v2","tickers","trades"]},statistics:{get:["address"]},trading:{get:["balances","fees","orders"],post:["orders","orders/json"],put:["orders","orders/json"],delete:["orders","orders/json"]},tradingview:{get:["config","history","symbol_info","time"]}},exceptions:{exact:{0:a,1:l,4e3:u,4001:u,4002:n,4003:p,4004:p,4005:u,4006:u,4007:u,4300:r,4100:p,4400:c,5001:d,5002:a,400:u,401:p,403:r,404:c,429:h,500:a,503:o},broad:{Insufficient:n}},options:{fetchTickers:{period:"1d"},fetchTrades:{sort:"timestamp,asc"},fetchMyTrades:{sort:"timestamp,asc"},fetchOpenOrders:{sort:"createdAt,asc"},fetchClosedOrders:{sort:"createdAt,asc"},defaultSort:"timestamp,asc",defaultSortOrders:"createdAt,asc"}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[];for(let e=0;e<t.length;e++)i.push(this.parseMarket(t[e]));return i}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i=[];for(let e=0;e<t.length;e++){const s=t[e];i.push(this.parseCurrency(s))}return this.indexBy(i,"code")}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.safeString(this.options.fetchTickers,"period","1d"),s={period:this.timeframes[i]},a=await this.publicGetTickers(this.extend(s,t));return this.parseTickers(a,e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=this.safeString(this.options.fetchTickers,"period","1d"),a={market:i.id,period:this.timeframes[s]},r=await this.publicGetTickers(this.extend(a,t)),o=this.safeValue(r,0);return this.parseTicker(o,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id};void 0!==t&&(s.limit=t);const a=await this.publicGetOrderbookV2(this.extend(s,i)),r=this.parse8601(this.safeString(a,"timestamp"));return this.parseOrderBook(a,r,"bid","ask","price","baseTokenAmount")}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r=this.safeValue(this.options,"fetchTrades",{}),o=this.safeValue(r,"sort","timestamp,asc"),n=this.safeString(s,"sort",o),c=this.omit(s,"sort"),d={market:a.id,sort:n};void 0!==t&&(d.from=this.iso8601(t)),void 0!==i&&(d.size=i);const h=await this.publicGetTrades(this.extend(d,c));return this.parseTrades(h,a,t,i)}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={market:r.id,period:this.timeframes[t]},n=this.parseTimeframe(t);if(void 0!==i)o.from=this.iso8601(i),void 0!==s&&(o.till=this.iso8601(this.sum(i,this.sum(s,1)*n*1e3)));else if(void 0!==s){const e=this.milliseconds();o.till=this.iso8601(e),o.from=this.iso8601(e-s*n*1e3-1)}else o.till=this.iso8601(this.milliseconds());const c=await this.publicGetCandles(this.extend(o,a));return this.parseOHLCVs(c,r,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.tradingGetBalances(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"currency"),r=this.safeCurrencyCode(a),o=this.account();o.total=this.safeFloat(s,"totalBalance"),o.used=this.safeFloat(s,"lockedBalance"),i[r]=o}return this.parseBalance(i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n={symbol:o.id,quantity:this.amountToPrecision(e,s),side:i.toUpperCase()};let c=r;if("limit"===t){n.price=this.priceToPrecision(e,a);const i=this.safeInteger(this.options,"expireIn"),s=this.safeValue(r,"expireTime"),o=this.safeValue(r,"expireIn",i);if(void 0!==s)n.expireTime=s;else{if(void 0===o)throw new d(this.id+" createOrder method requires a expireTime or expireIn param for a "+t+" order, you can also set the expireIn exchange-wide option");n.expireIn=o}c=this.omit(r,["expireTime","expireIn"])}else n.price=0;const h=await this.tradingPostOrders(this.extend(n,c)),l=this.safeValue(h,"orders",[]),u=this.safeValue(l,0,{});return this.parseOrder(u,o)}async editOrder(e,t,i,s,a,r,o={}){await this.loadMarkets();const n=this.market(t),c={id:e};void 0!==a&&(c.quantity=this.amountToPrecision(t,a)),void 0!==r&&(c.price=this.priceToPrecision(t,r));const d=await this.tradingPutOrders(this.extend(c,o));if("unchangedOrders"in d){const e=this.safeValue(d,"unchangedOrders",[]);return{id:this.safeString(e,0),info:d}}const h=this.safeValue(d,"changedOrders",[]),l=this.safeValue(h,0,{}),u=this.safeValue(l,"newOrder",{});return this.parseOrder(u,n)}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.cancelOrders([e],t,i)}async cancelOrders(e,t,i={}){await this.loadMarkets();const s={id:e};return await this.tradingDeleteOrders(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderHash:e},a=await this.historyGetOrdersDetails(s),r=this.safeValue(a,"order",{}),o=this.safeValue(a,"trades",[]);return this.parseOrder(this.extend(r,{trades:o}))}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const a=this.safeValue(this.options,"fetchOpenOrders",{}),r=this.safeValue(a,"sort","createdAt,asc"),o=this.safeString(s,"sort",r),n=this.omit(s,"sort"),c={sort:o};let d=void 0;void 0!==e&&(d=this.market(e),c.symbol=d.id),void 0!==i&&(c.size=i);const h=await this.tradingGetOrders(this.extend(c,n)),l=this.safeValue(h,"orders",[]);return this.parseOrders(l,d,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const a=this.safeValue(this.options,"fetchClosedOrders",{}),r=this.safeValue(a,"sort","createdAt,asc"),o=this.safeString(s,"sort",r),n=this.omit(s,"sort"),c={sort:o,side:"BUY"};let d=void 0;void 0!==e&&(d=this.market(e),c.symbol=d.id),void 0!==t&&(c.from=this.iso8601(t)),void 0!==i&&(c.size=i);const h=await this.historyGetOrders(this.extend(c,n)),l=this.safeValue(h,"orders",[]);return this.parseOrders(l,d,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a=this.safeValue(this.options,"fetchMyTrades",{}),r=this.safeValue(a,"sort","timestamp,asc"),o=this.safeString(s,"sort",r),n=this.omit(s,"sort"),c={sort:o};let d=void 0;void 0!==e&&(d=this.market(e),c.symbol=d.id),void 0!==t&&(c.from=this.iso8601(t)),void 0!==i&&(c.size=i);const h=await this.historyGetTrades(this.extend(c,n)),l=this.safeValue(h,"trades",[]);return this.parseTrades(l,d,t,i)}async fetchTradingFee(e,t={}){await this.loadMarkets();const i={markets:this.market(e).id},s=await this.tradingGetFees(this.extend(i,t)),a=this.safeValue(s,0,{});return{info:s,maker:this.safeFloat(a,"fee"),taker:void 0}}parseMarket(e){const t=!this.safeValue(e,"locked"),i=this.safeString(e,"symbol"),s=this.safeString(e,"baseCurrency"),a=this.safeString(e,"quoteCurrency"),r=this.safeCurrencyCode(s),o=this.safeCurrencyCode(a),n=r+"/"+o,c={amount:this.precisionFromString(this.safeString(e,"quantityIncrement")),price:this.precisionFromString(this.safeString(e,"tickSize"))},d=this.safeFloat(e,"quantityIncrement"),h=this.safeFloat(e,"baseMinSize"),l=Math.max(d,h),u=this.safeFloat(e,"tickSize"),p=this.safeFloat(e,"quoteMinSize");return{id:i,symbol:n,base:r,quote:o,baseId:s,quoteId:a,type:"spot",active:t,precision:c,limits:{amount:{min:l,max:void 0},price:{min:u,max:void 0},cost:{min:Math.max(p,l*u),max:void 0}},taker:this.safeFloat(e,"takerFee"),maker:this.safeFloat(e,"makerFee"),info:e}}parseCurrency(e){const t=this.safeString(e,"symbol"),i=this.safeCurrencyCode(t),s=this.safeString(e,"name"),a=this.safeInteger(e,"decimals"),r=this.safeValue(e,"active"),o=this.safeString(e,"withdrawalFee"),n=this.safeInteger(e,"tradeDecimals");let c=void 0;if(void 0!==o&&void 0!==n){const e=o.length-n;if(e>0){const t=o.slice(0,e),i=o.slice(-e);c=parseFloat(t+"."+i)}else{let t=".";for(let i=0;i<-e;i++)t+="0";c=parseFloat(t+o)}}return{id:i,code:i,info:e,type:void 0,name:s,active:r,fee:c,precision:a,limits:{withdraw:{min:c,max:void 0},amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}}}parseTickers(e,t){const i=[];for(let t=0;t<e.length;t++)i.push(this.parseTicker(e[t]));return this.filterByArray(i,"symbol",t)}parseTicker(e,t){const i=this.safeString(e,"market"),s=this.safeSymbol(i,t,"/"),a=this.parse8601(this.safeString(e,"timestamp")),r=this.safeFloat(e,"last"),o=this.safeFloat(e,"open");let n=void 0,c=void 0;void 0!==r&&void 0!==o&&(n=r-o,c=this.sum(r,o)/2);let d=void 0;return void 0!==n&&o&&(d=n/o*100),{symbol:s,info:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:o,close:r,last:r,previousClose:void 0,change:n,percentage:d,average:c,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"volumeQuote")}}parseTrade(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t),a=this.parse8601(this.safeString(e,"timestamp")),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"quantity"),n=this.safeString(e,"id"),c=this.safeStringLower2(e,"direction","side"),d=this.safeStringLower(e,"makerOrTaker");let h=void 0;void 0!==d&&(h=this.safeString(e,d+"OrderId"));let l=void 0;const u=this.safeFloat(e,"fee");if(void 0!==u){l={cost:u,currency:void 0===t?void 0:t.quote}}let p=void 0;return void 0!==r&&void 0!==o&&(p=this.costToPrecision(s,o*r)),{info:e,id:n,timestamp:a,datetime:this.iso8601(a),symbol:s,order:h,type:void 0,side:c,price:r,amount:o,cost:p,takerOrMaker:d,fee:l}}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"timestamp")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeStringLower(e,"type"),a=this.safeStringLower(e,"side"),r=this.safeString(e,"symbol"),o=this.safeSymbol(r,t),n=this.parse8601(this.safeString(e,"createdAt")),c=this.safeFloat(e,"price"),d=this.safeFloat(e,"quantity"),h=this.safeFloat(e,"filledQuantity"),l=this.safeFloat(e,"cancelledQuantity");let u=void 0,p=void 0;void 0!==d&&void 0!==h&&(u=Math.max(d-h,0),p=h>=d?"closed":void 0!==l&&l>0?"canceled":"open");const f=parseFloat(this.costToPrecision(o,c*h));let m=void 0,v=void 0;const y=this.safeValue(e,"trades");if(void 0!==y&&(v=this.parseTrades(y,t,void 0,void 0,{order:i})),void 0!==v){const e=v.length;e>0&&(m=v[e-1].timestamp)}return{info:e,id:i,clientOrderId:this.safeString(e,"clientOrderId"),timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:m,symbol:o,type:s,timeInForce:void 0,side:a,price:c,stopPrice:void 0,amount:d,cost:f,average:void 0,filled:h,remaining:u,status:p,fee:void 0,trades:v}}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/"+t+"/"+e;if(Object.keys(s).length&&(o+="?"+this.urlencodeWithArrayRepeat(s)),"public"!==t){this.checkRequiredCredentials();const e=this.stringToBase64(this.apiKey+":"+this.secret);a={authorization:"Basic "+this.decode(e)}}return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0!==n&&e>=400){const e=this.id+" "+o;let t=this.safeValue(n,"error");void 0===t&&(t=n);const i=this.safeString2(t,"code","status"),s=this.safeString2(t,"message","debugMessage");throw this.throwBroadlyMatchedException(this.exceptions.broad,s,e),this.throwExactlyMatchedException(this.exceptions.exact,i,e),this.throwExactlyMatchedException(this.exceptions.exact,s,e),new a(e)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,BadRequest:r,AuthenticationError:o,InvalidOrder:n,InsufficientFunds:c,OrderNotFound:d,PermissionDenied:h,AddressPending:l}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"upbit",name:"Upbit",countries:["KR"],version:"v1",rateLimit:1e3,certified:!0,pro:!0,has:{cancelOrder:!0,CORS:!0,createDepositAddress:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"minutes","3m":"minutes","5m":"minutes","15m":"minutes","30m":"minutes","1h":"minutes","4h":"minutes","1d":"days","1w":"weeks","1M":"months"},hostname:"api.upbit.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/49245610-eeaabe00-f423-11e8-9cba-4b0aed794799.jpg",api:{public:"https://{hostname}",private:"https://{hostname}"},www:"https://upbit.com",doc:"https://docs.upbit.com/docs/%EC%9A%94%EC%B2%AD-%EC%88%98-%EC%A0%9C%ED%95%9C",fees:"https://upbit.com/service_center/guide"},api:{public:{get:["market/all","candles/{timeframe}","candles/{timeframe}/{unit}","candles/minutes/{unit}","candles/minutes/1","candles/minutes/3","candles/minutes/5","candles/minutes/15","candles/minutes/30","candles/minutes/60","candles/minutes/240","candles/days","candles/weeks","candles/months","trades/ticks","ticker","orderbook"]},private:{get:["accounts","orders/chance","order","orders","withdraws","withdraw","withdraws/chance","deposits","deposit","deposits/coin_addresses","deposits/coin_address"],post:["orders","withdraws/coin","withdraws/krw","deposits/generate_coin_address"],delete:["order"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0025,taker:.0025},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{exact:{"This key has expired.":o,"Missing request parameter error. Check the required parameters!":r,"side is missing, side does not have a valid value":n},broad:{thirdparty_agreement_required:h,out_of_scope:h,order_not_found:d,insufficient_funds:c,invalid_access_key:o,jwt_verification:o,create_ask_error:a,create_bid_error:a,volume_too_large:n,invalid_funds:n}},options:{createMarketBuyOrderRequiresPrice:!0,fetchTickersMaxLength:4096,fetchOrderBooksMaxLength:4096,tradingFeesByQuoteCurrency:{KRW:5e-4}},commonCurrencies:{TON:"Tokamak Network"}})}async fetchCurrency(e,t={}){await this.loadMarkets();const i=this.currency(e);return await this.fetchCurrencyById(i.id,t)}async fetchCurrencyById(e,t={}){const i={currency:e},s=await this.privateGetWithdrawsChance(this.extend(i,t)),a=this.safeValue(s,"member_level",{}),r=this.safeValue(s,"currency",{}),o=this.safeValue(s,"withdraw_limit",{}),n=this.safeValue(o,"can_withdraw"),c=this.safeString(r,"wallet_state"),d=this.safeValue(a,"wallet_locked"),h=this.safeValue(a,"locked");let l=!0;(void 0!==n&&n||"working"!==c||void 0!==d&&d||void 0!==h&&h)&&(l=!1);const u=this.safeFloat(o,"onetime"),p=this.safeFloat(o,"daily",u),f=this.safeFloat(o,"remaining_daily",p);let m=void 0;m=f>0?f:p;const v=this.safeString(r,"code"),y=this.safeCurrencyCode(v);return{info:s,id:v,code:y,name:y,active:l,fee:this.safeFloat(r,"withdraw_fee"),precision:void 0,limits:{withdraw:{min:this.safeFloat(o,"minimum"),max:m}}}}async fetchMarket(e,t={}){await this.loadMarkets();const i=this.market(e);return await this.fetchMarketById(i.id,t)}async fetchMarketById(e,t={}){const i={market:e},s=await this.privateGetOrdersChance(this.extend(i,t)),a=this.safeValue(s,"market"),r=this.safeValue(a,"bid"),o=this.safeValue(a,"ask"),n=this.safeString(a,"id"),c=this.safeString(o,"currency"),d=this.safeString(r,"currency"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),u=h+"/"+l,p={amount:8,price:8},f="active"===this.safeString(a,"state"),m=this.safeFloat(s,"bid_fee"),v=this.safeFloat(s,"ask_fee"),y=Math.max(m,v);return{info:s,id:n,symbol:u,base:h,quote:l,baseId:c,quoteId:d,active:f,precision:p,maker:y,taker:y,limits:{amount:{min:this.safeFloat(o,"min_total"),max:void 0},price:{min:Math.pow(10,-p.price),max:void 0},cost:{min:this.safeFloat(r,"min_total"),max:this.safeFloat(a,"max_total")}}}}async fetchMarkets(e={}){const t=await this.publicGetMarketAll(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"market"),[r,o]=a.split("-"),n=this.safeCurrencyCode(o),c=this.safeCurrencyCode(r),d=n+"/"+c,h={amount:8,price:8},l=!0,u=this.safeFloat(this.options.tradingFeesByQuoteCurrency,c,this.fees.trading.maker),p=this.safeFloat(this.options.tradingFeesByQuoteCurrency,c,this.fees.trading.taker);i.push({id:a,symbol:d,base:n,quote:c,baseId:o,quoteId:r,active:l,info:s,precision:h,maker:u,taker:p,limits:{amount:{min:Math.pow(10,-h.amount),max:void 0},price:{min:Math.pow(10,-h.price),max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccounts(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"currency"),r=this.safeCurrencyCode(a),o=this.account();o.free=this.safeFloat(s,"balance"),o.used=this.safeFloat(s,"locked"),i[r]=o}return this.parseBalance(i)}async fetchOrderBooks(e,t,i={}){await this.loadMarkets();let s=void 0;if(void 0===e){if(s=this.ids.join(","),s.length>this.options.fetchOrderBooksMaxLength){const e=this.ids.length;throw new a(this.id+" has "+e.toString()+" symbols ("+s.length.toString()+" characters) exceeding max URL length ("+this.options.fetchOrderBooksMaxLength.toString()+" characters), you are required to specify a list of symbols in the first argument to fetchOrderBooks")}}else s=this.marketIds(e),s=s.join(",");const r={markets:s},o=await this.publicGetOrderbook(this.extend(r,i)),n={};for(let e=0;e<o.length;e++){const t=o[e],i=this.safeString(t,"market"),s=this.safeSymbol(i,void 0,"-"),a=this.safeInteger(t,"timestamp");n[s]={bids:this.sortBy(this.parseBidsAsks(t.orderbook_units,"bid_price","bid_size"),0,!0),asks:this.sortBy(this.parseBidsAsks(t.orderbook_units,"ask_price","ask_size"),0),timestamp:a,datetime:this.iso8601(a),nonce:void 0}}return n}async fetchOrderBook(e,t,i={}){const s=await this.fetchOrderBooks([e],t,i);return this.safeValue(s,e)}parseTicker(e,t){const i=this.safeInteger(e,"trade_timestamp"),s=this.safeString2(e,"market","code"),a=this.safeSymbol(s,t,"-"),r=this.safeFloat(e,"prev_closing_price"),o=this.safeFloat(e,"trade_price"),n=this.safeFloat(e,"signed_change_price"),c=this.safeFloat(e,"signed_change_rate");return{symbol:a,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high_price"),low:this.safeFloat(e,"low_price"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"opening_price"),close:o,last:o,previousClose:r,change:n,percentage:c,average:void 0,baseVolume:this.safeFloat(e,"acc_trade_volume_24h"),quoteVolume:this.safeFloat(e,"acc_trade_price_24h"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=void 0;if(void 0===e){if(i=this.ids.join(","),i.length>this.options.fetchTickersMaxLength){const e=this.ids.length;throw new a(this.id+" has "+e.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchTickers")}}else i=this.marketIds(e),i=i.join(",");const s={markets:i},r=await this.publicGetTicker(this.extend(s,t)),o={};for(let e=0;e<r.length;e++){const t=this.parseTicker(r[e]);o[t.symbol]=t}return this.filterByArray(o,"symbol",e)}async fetchTicker(e,t={}){const i=await this.fetchTickers([e],t);return this.safeValue(i,e)}parseTrade(e,t){const i=this.safeString2(e,"sequential_id","uuid");let s=this.safeInteger(e,"timestamp");void 0===s&&(s=this.parse8601(this.safeString(e,"created_at")));let a=void 0;const r=this.safeStringLower2(e,"ask_bid","side");"ask"===r?a="sell":"bid"===r&&(a="buy");let o=this.safeFloat(e,"funds");const n=this.safeFloat2(e,"trade_price","price"),c=this.safeFloat2(e,"trade_volume","volume");void 0===o&&void 0!==c&&void 0!==n&&(o=n*c);const d=this.safeString2(e,"market","code");let h=void 0,l=void 0,u=void 0;if(void 0!==(t=this.safeMarket(d,t)))u=t.symbol,l=t.quote;else{const[e,t]=d.split("-"),i=this.safeCurrencyCode(e),s=this.safeCurrencyCode(t);u=i+"/"+s,l=s}const p=this.safeString(e,r+"_fee");return void 0!==p&&(h={currency:l,cost:p}),{id:i,info:e,order:void 0,timestamp:s,datetime:this.iso8601(s),symbol:u,type:void 0,side:a,takerOrMaker:void 0,price:n,amount:c,cost:o,fee:h}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e);void 0===i&&(i=200);const r={market:a.id,count:i},o=await this.publicGetTradesTicks(this.extend(r,s));return this.parseTrades(o,a,t,i)}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"candle_date_time_utc")),this.safeFloat(e,"opening_price"),this.safeFloat(e,"high_price"),this.safeFloat(e,"low_price"),this.safeFloat(e,"trade_price"),this.safeFloat(e,"candle_acc_trade_volume")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o=this.parseTimeframe(t),n=this.timeframes[t];void 0===s&&(s=200);const c={market:r.id,timeframe:n,count:s};let d="publicGetCandlesTimeframe";if("minutes"===n){const e=Math.round(o/60);c.unit=e,d+="Unit"}void 0!==i&&(c.to=this.iso8601(this.sum(i,o*s*1e3)));const h=await this[d](this.extend(c,a));return this.parseOHLCVs(h,r,t,i,s)}async createOrder(e,t,i,s,a,r={}){if("market"===t&&"buy"===i&&this.options.createMarketBuyOrderRequiresPrice){if(void 0===a)throw new n(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");s*=a}let o=void 0;if("buy"===i)o="bid";else{if("sell"!==i)throw new n(this.id+" createOrder allows buy or sell side only!");o="ask"}await this.loadMarkets();const c={market:this.market(e).id,side:o};"limit"===t?(c.volume=this.amountToPrecision(e,s),c.price=this.priceToPrecision(e,a),c.ord_type=t):"market"===t&&("buy"===i?(c.ord_type="price",c.price=this.priceToPrecision(e,s)):"sell"===i&&(c.ord_type=t,c.volume=this.amountToPrecision(e,s)));const d=await this.privatePostOrders(this.extend(c,r));return this.parseOrder(d)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={uuid:e},a=await this.privateDeleteOrder(this.extend(s,i));return this.parseOrder(a)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.currency=r.id),void 0!==i&&(a.limit=i);const o=await this.privateGetDeposits(this.extend(a,s));return this.parseTransactions(o,r,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.currency=r.id),void 0!==i&&(a.limit=i);const o=await this.privateGetWithdraws(this.extend(a,s));return this.parseTransactions(o,r,t,i)}parseTransactionStatus(e){return this.safeString({ACCEPTED:"ok",submitting:"pending",submitted:"pending",almost_accepted:"pending",rejected:"failed",accepted:"pending",processing:"pending",done:"ok",canceled:"canceled"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"uuid"),s=this.safeFloat(e,"amount"),a=this.safeString(e,"txid"),r=this.parse8601(this.safeString(e,"done_at")),o=this.parse8601(this.safeString(e,"created_at",r));let n=this.safeString(e,"type");"withdraw"===n&&(n="withdrawal");const c=this.safeString(e,"currency"),d=this.safeCurrencyCode(c),h=this.parseTransactionStatus(this.safeString(e,"state")),l=this.safeFloat(e,"fee");return{info:e,id:i,currency:d,amount:s,address:void 0,tag:void 0,status:h,type:n,updated:r,txid:a,timestamp:o,datetime:this.iso8601(o),fee:{currency:d,cost:l}}}parseOrderStatus(e){return this.safeString({wait:"open",done:"closed",cancel:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"uuid");let s=this.safeString(e,"side");s="bid"===s?"buy":"sell";let a=this.safeString(e,"ord_type");const r=this.parse8601(this.safeString(e,"created_at")),o=this.parseOrderStatus(this.safeString(e,"state"));let n=void 0,c=this.safeFloat(e,"price");const d=this.safeFloat(e,"volume"),h=this.safeFloat(e,"remaining_volume"),l=this.safeFloat(e,"executed_volume");let u=void 0;"price"===a&&(a="market",u=c,c=void 0);let p=void 0,f=void 0,m=this.safeFloat(e,"paid_fee");const v=this.safeString(e,"market");t=this.safeMarket(v,t);let y=this.safeValue(e,"trades",[]);y=this.parseTrades(y,t,void 0,void 0,{order:i,type:a});const g=y.length;if(g>0){n=y[g-1].timestamp;let e=!1;void 0===m&&(e=!0,m=0),u=0;for(let t=0;t<g;t++){const i=y[t];if(u=this.sum(u,i.cost),e){const e=this.safeValue(y[t],"fee",{}),i=this.safeFloat(e,"cost");void 0!==i&&(m=this.sum(m,i))}}p=u/l}void 0!==m&&(f={currency:t.quote,cost:m});return{info:e,id:i,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:n,symbol:t.symbol,type:a,timeInForce:void 0,side:s,price:c,stopPrice:void 0,cost:u,average:p,amount:d,filled:l,remaining:h,status:o,fee:f,trades:y}}async fetchOrdersByState(e,t,i,s,a={}){await this.loadMarkets();const r={state:e};let o=void 0;void 0!==t&&(o=this.market(t),r.market=o.id);const n=await this.privateGetOrders(this.extend(r,a));return this.parseOrders(n,o,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByState("wait",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByState("done",e,t,i,s)}async fetchCanceledOrders(e,t,i,s={}){return await this.fetchOrdersByState("cancel",e,t,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={uuid:e},a=await this.privateGetOrder(this.extend(s,i));return this.parseOrder(a)}parseDepositAddresses(e){const t={};for(let i=0;i<e.length;i++){const s=this.parseDepositAddress(e[i]);t[s.currency]=s}return t}async fetchDepositAddresses(e,t={}){await this.loadMarkets();const i=await this.privateGetDepositsCoinAddresses(t);return this.parseDepositAddresses(i)}parseDepositAddress(e,t){const i=this.safeString(e,"deposit_address"),s=this.safeString(e,"secondary_address"),a=this.safeString(e,"currency"),r=this.safeCurrencyCode(a);return this.checkAddress(i),{currency:r,address:i,tag:s,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s=await this.privateGetDepositsCoinAddress(this.extend({currency:i.id},t));return this.parseDepositAddress(s)}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privatePostDepositsGenerateCoinAddress(this.extend(i,t));if(void 0!==this.safeString(s,"message"))throw new l(this.id+" is generating "+e+" deposit address, call fetchDepositAddress or createDepositAddress one more time later to retrieve the generated address");return this.parseDepositAddress(s)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const r=this.currency(e),o={amount:t};let n="privatePostWithdraws";"KRW"!==e?(n+="Coin",o.currency=r.id,o.address=i,void 0!==s&&(o.secondary_address=s)):n+="Krw";const c=await this[n](this.extend(o,a));return this.parseTransaction(c)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o=this.implodeParams(this.urls.api[t],{hostname:this.hostname});o+="/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("POST"!==i&&Object.keys(n).length&&(o+="?"+this.urlencode(n)),"private"===t){this.checkRequiredCredentials();const e=this.nonce(),t={access_key:this.apiKey,nonce:e};if(Object.keys(n).length){const e=this.urlencode(n),i=this.hash(this.encode(e),"sha512");t.query_hash=i,t.query_hash_alg="SHA512"}a={Authorization:"Bearer "+this.jwt(t,this.encode(this.secret))},"GET"!==i&&"DELETE"!==i&&(r=this.json(s),a["Content-Type"]="application/json")}return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n)return;const h=this.safeValue(n,"error");if(void 0!==h){const e=this.safeString(h,"message"),t=this.safeString(h,"name"),i=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,e,i),this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,e,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i),new a(i)}}}},function(e,t,i){"use strict";const s=i(1);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"vaultoro",name:"Vaultoro",countries:["CH"],rateLimit:1e3,version:"1",has:{CORS:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchBalance:!0,createOrder:!0,cancelOrder:!0,fetchTrades:!0,fetchTicker:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766880-f205e870-5ee9-11e7-8fe2-0d5b15880752.jpg",api:"https://api.vaultoro.com",www:"https://www.vaultoro.com",doc:"https://api.vaultoro.com"},commonCurrencies:{GLD:"Gold"},api:{public:{get:["bidandask","buyorders","latest","latesttrades","markets","orderbook","sellorders","transactions/day","transactions/hour","transactions/month"]},private:{get:["balance","mytrades","orders"],post:["buy/{symbol}/{type}","cancel/{id}","sell/{symbol}/{type}","withdraw"]}}})}async fetchMarkets(e={}){const t=[],i=await this.publicGetMarkets(e),s=this.safeValue(i,"data"),a=this.safeString(s,"MarketCurrency"),r=this.safeString(s,"BaseCurrency"),o=this.safeCurrencyCode(a),n=this.safeCurrencyCode(r),c=o+"/"+n,d=this.safeString(s,"MarketName");return t.push({id:d,symbol:c,base:o,quote:n,baseId:a,quoteId:r,info:s,active:void 0,precision:this.precision,limits:this.limits}),t}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalance(e),i=this.safeValue(t,"data"),s={info:i};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"currency_code"),r=this.safeCurrencyCode(a),o=this.account();o.free=this.safeFloat(t,"cash"),o.used=this.safeFloat(t,"reserved"),s[r]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=await this.publicGetOrderbook(i),a={bids:s.data[0].b,asks:s.data[1].s};return this.parseOrderBook(a,void 0,"bids","asks","Gold_Price","Gold_Amount")}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"Time"));let s=void 0;void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"Gold_Price"),r=this.safeFloat(e,"Gold_Amount");let o=void 0;return void 0!==a&&void 0!==r&&(o=r*a),{id:void 0,info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,order:void 0,type:void 0,side:void 0,takerOrMaker:void 0,price:a,amount:r,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r=await this.publicGetTransactionsDay(s);return this.parseTrades(r,a,t,i)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const o=this.market(e),n="privatePost"+this.capitalize(i)+"SymbolType",c={symbol:o.quoteId.toLowerCase(),type:t,gld:s,price:a||1},d=await this[n](this.extend(c,r));return{info:d,id:d.data.Order_ID}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e};return await this.privatePostCancelId(this.extend(s,i))}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/";if("public"===t)o+=e;else{this.checkRequiredCredentials();const t=this.nonce();o+=this.version+"/"+this.implodeParams(e,s);const i=this.extend({nonce:t,apikey:this.apiKey},this.omit(s,this.extractParams(e)));o+="?"+this.urlencode(i),a={"Content-Type":"application/json","X-Signature":this.hmac(this.encode(o),this.encode(this.secret))}}return{url:o,method:i,body:r,headers:a}}}},function(e,t,i){"use strict";const s=i(36);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"vbtc",name:"VBTC",countries:["VN"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991481-1f53d1d8-6481-11e7-884e-21d17e7939db.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://vbtc.exchange",doc:"https://blinktrade.com/docs"},options:{brokerId:"3"}})}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,OrderNotFound:r,InvalidOrder:o,BadRequest:n,AuthenticationError:c,RateLimitExceeded:d,RequestTimeout:h,BadSymbol:l,AddressPending:u,PermissionDenied:p,InsufficientFunds:f}=i(0),{ROUND:m}=i(2);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"vcc",name:"VCC Exchange",countries:["VN"],rateLimit:1e3,version:"v3",has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!1,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchTicker:"emulated",fetchTickers:!0,fetchTrades:!0,fetchTradingFees:!1,fetchTransactions:!0,fetchWithdrawals:!0},timeframes:{"1m":"60000","5m":"300000","15m":"900000","30m":"1800000","1h":"3600000","2h":"7200000","4h":"14400000","6h":"21600000","12h":"43200000","1d":"86400000","1w":"604800000"},urls:{logo:"https://user-images.githubusercontent.com/1294454/100545356-8427f500-326c-11eb-9539-7d338242d61b.jpg",api:{public:"https://api.vcc.exchange",private:"https://api.vcc.exchange"},www:"https://vcc.exchange",doc:["https://vcc.exchange/api"],fees:"https://support.vcc.exchange/hc/en-us/articles/360016401754",referral:"https://vcc.exchange?ref=l4xhrH"},api:{public:{get:["summary","exchange_info","assets","ticker","trades/{market_pair}","orderbook/{market_pair}","chart/bars","tick_sizes"]},private:{get:["user","balance","orders/{order_id}","orders/open","orders","orders/trades","deposit-address","transactions"],post:["orders"],put:["orders/{order_id}/cancel","orders/cancel-by-type","orders/cancel-all"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{},broad:{"limit may not be greater than":n,"Insufficient balance":f,Unauthenticated:c,"signature is invalid":c,Timeout:h,"Too many requests":d,"quantity field is required":o,"price field is required":o,error_security_level:p,"pair is invalid":l,"type is invalid":o,"Data not found":r}}})}async fetchMarkets(e={}){const t=await this.publicGetExchangeInfo(e),i=this.safeValue(t,"data"),s=this.safeValue(i,"symbols"),a=[];for(let e=0;e<s.length;e++){const t=this.safeValue(s,e),i=this.safeString(t,"symbol"),r=i.replace("/","_"),o=this.safeString(t,"coin"),n=this.safeString(t,"currency"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=this.safeValue(t,"active"),l=this.safeValue(t,"precision",{}),u=this.safeValue(t,"limits",{}),p=this.safeValue(u,"amount",{}),f=this.safeValue(u,"price",{}),m=this.safeValue(u,"cost",{}),v={info:t,id:r,symbol:i,base:c,quote:d,baseId:o,quoteId:n,active:h,precision:{price:this.safeInteger(l,"price"),amount:this.safeInteger(l,"amount"),cost:this.safeInteger(l,"cost")},limits:{amount:{min:this.safeFloat(p,"min"),max:void 0},price:{min:this.safeFloat(f,"min"),max:void 0},cost:{min:this.safeFloat(m,"min"),max:void 0}}};a.push(v)}return a}async fetchCurrencies(e={}){const t=await this.publicGetAssets(e),i={},s=this.safeValue(t,"data"),a=Object.keys(s);for(let e=0;e<a.length;e++){const t=this.safeStringLower(a,e),r=this.safeValue(s,a[e]),o=this.safeCurrencyCode(t),n=this.safeValue(r,"can_deposit"),c=this.safeValue(r,"can_withdraw"),d=n&&c;i[o]={id:t,code:o,name:this.safeString(r,"name"),active:d,fee:this.safeFloat(r,"withdrawal_fee"),precision:this.safeInteger(r,"decimal"),limits:{withdraw:{min:this.safeFloat(r,"min_withdraw"),max:this.safeFloat(r,"max_withdraw")}}}}return i}async fetchTradingFee(e,t={}){await this.loadMarkets();const i=this.market(e),s=this.extend({symbol:i.id},this.omit(t,"symbol")),a=await this.privateGetTradingFeeSymbol(s);return{info:a,maker:this.safeFloat(a,"provideLiquidityRate"),taker:this.safeFloat(a,"takeLiquidityRate")}}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalance(e),i=this.safeValue(t,"data"),s={info:t},a=Object.keys(i);for(let e=0;e<a.length;e++){const t=a[e],r=this.safeCurrencyCode(t),o=this.safeValue(i,t),n=this.account();n.free=this.safeFloat(o,"available_balance"),n.total=this.safeFloat(o,"balance"),s[r]=n}return this.parseBalance(s)}parseOHLCV(e,t){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={coin:r.baseId,currency:r.quoteId,resolution:this.timeframes[t]};s=void 0===s?100:s,s=Math.min(100,s);const n=this.parseTimeframe(t);if(void 0===i){const e=this.seconds();o.to=e,o.from=e-s*n}else{const e=parseInt(i/1e3);o.from=e,o.to=this.sum(e,s*n)}const c=await this.publicGetChartBars(this.extend(o,a));return this.parseOHLCVs(c,r,t,i,s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market_pair:this.market(e).id,level:2};if(void 0!==t){if(0!==t&&5!==t&&10!==t&&20!==t&&50!==t&&100!==t&&500!==t)throw new n(this.id+" fetchOrderBook limit must be 0, 5, 10, 20, 50, 100, 500 if specified");s.depth=t}const a=await this.publicGetOrderbookMarketPair(this.extend(s,i)),r=this.safeValue(a,"data"),o=this.safeValue(r,"timestamp");return this.parseOrderBook(r,o,"bids","asks",0,1)}parseTicker(e,t){const i=this.milliseconds(),s=this.safeFloat(e,"base_volume"),a=this.safeFloat(e,"quote_volume"),r=this.safeFloat(e,"open_price"),o=this.safeFloat(e,"last_price");let n=void 0,c=void 0,d=void 0;void 0!==o&&void 0!==r&&(n=o-r,d=this.sum(o,r)/2,r>0&&(c=n/r*100));const h=this.vwap(s,a);return{symbol:void 0===t?void 0:t.symbol,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"max_price"),low:this.safeFloat(e,"min_price"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:h,open:r,close:o,last:o,previousClose:void 0,change:n,percentage:c,average:d,baseVolume:s,quoteVolume:a,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=await this.publicGetTicker(t),a=this.safeValue(s,"data"),r=this.safeValue(a,i.id);return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s={},a=this.safeValue(i,"data"),r=Object.keys(a);for(let e=0;e<r.length;e++){const t=r[e],i=this.safeMarket(t,void 0,"_");s[i.symbol]=this.parseTicker(a[t],i)}return this.filterByArray(s,"symbol",e)}parseTrade(e,t){const i=this.safeInteger2(e,"trade_timestamp","created_at"),s=this.safeStringUpper(e,"coin"),a=this.safeStringUpper(e,"currency");let r=void 0;void 0!==s&&void 0!==a&&(r=s+"_"+a);const o=(t=this.safeMarket(r,t,"_")).symbol,n=this.safeFloat(e,"price"),c=this.safeFloat2(e,"base_volume","quantity");let d=this.safeFloat2(e,"quote_volume","amount");void 0===d&&void 0!==n&&void 0!==c&&(d=n*c);const h=this.safeString2(e,"type","trade_type"),l=this.safeString2(e,"trade_id","id"),u=this.safeFloat(e,"fee");let p=void 0;return void 0!==u&&(p={cost:u,currency:t.quote}),{info:e,id:l,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:o,type:void 0,side:h,takerOrMaker:void 0,price:n,amount:c,cost:d,fee:p}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market_pair:a.id};void 0!==i&&(r.count=Math.min(1e3,i));const o=await this.publicGetTradesMarketPair(this.extend(r,s)),n=this.safeValue(o,"data");return this.parseTrades(n,a,t,i)}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.currency(e),a.currency=r.id),void 0!==i&&(a.limit=Math.min(1e3,i)),void 0!==t&&(a.start=t);const o=await this.privateGetTransactions(this.extend(a,s));let n=this.safeValue(o,"data",{});return n=this.safeValue(n,"data",[]),this.parseTransactions(n,r,t,i)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({type:"deposit"},s))}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({type:"withdraw"},s))}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeInteger(e,"created_at"),a=this.safeInteger(e,"updated_at"),r=this.safeString(e,"currency"),o=this.safeCurrencyCode(r,t),n=this.parseTransactionStatus(this.safeString(e,"status"));let c=this.safeFloat(e,"amount");void 0!==c&&(c=Math.abs(c));const d=this.safeString(e,"blockchain_address"),h=this.safeString(e,"transaction_id"),l=this.safeString(e,"destination_tag");let u=void 0;const p=this.safeFloat(e,"fee");void 0!==p&&(u={cost:p,currency:o});const f=c>0?"deposit":"withdrawal";return{info:e,id:i,txid:h,timestamp:s,datetime:this.iso8601(s),address:d,addressTo:d,addressFrom:void 0,tag:l,tagTo:l,tagFrom:void 0,type:f,amount:c,currency:o,status:n,updated:a,fee:u}}parseTransactionStatus(e){return this.safeString({pending:"pending",error:"failed",success:"ok",cancel:"canceled"},e,e)}parseTransactionType(e){return this.safeString({deposit:"deposit",withdraw:"withdrawal"},e,e)}costToPrecision(e,t){return this.decimalToPrecision(t,m,this.markets[e].precision.cost,this.precisionMode,this.paddingMode)}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();const n=this.market(e),c={coin:n.baseId,currency:n.quoteId,trade_type:i,type:t};if("ceiling_market"===t){const i=this.safeValue(r,"ceiling");if(void 0!==i)c.ceiling=this.costToPrecision(e,i);else{if(void 0===a)throw new o(this.id+" createOrder() requires a price argument or a ceiling parameter for "+t+" orders");c.ceiling=this.costToPrecision(e,s*a)}}else c.quantity=this.amountToPrecision(e,s);"limit"===t&&(c.price=this.priceToPrecision(e,a));void 0!==this.safeValue2(r,"stop_price","stopPrice")&&(c.is_stop=1,c.stop_condition="buy"===i?"le":"ge",c.stop_price=this.priceToPrecision(e,a)),r=this.omit(r,["stop_price","stopPrice"]);const d=await this.privatePostOrders(this.extend(c,r)),h=this.safeValue(d,"data");return this.parseOrder(h,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},a=await this.privatePutOrdersOrderIdCancel(this.extend(s,i));return this.parseOrder(a)}async cancelAllOrders(e,t={}){const i=this.safeString(t,"type"),s=void 0===i?"privatePutOrdersCancelAll":"privatePutOrdersCancelByType",a={};void 0!==i&&(a.type=i),await this.loadMarkets();const r=await this[s](this.extend(a,t));let o=this.safeValue(r,"data",{});return o=this.safeValue(r,"data",[]),this.parseOrders(o)}parseOrderStatus(e){return this.safeString({pending:"open",stopping:"open",executing:"open",executed:"closed",canceled:"canceled"},e,e)}parseOrder(e,t){const i=this.safeValue(e,"created_at"),s=this.safeValue(e,"updated_at"),a=this.safeStringUpper(e,"coin")+"_"+this.safeStringUpper(e,"currency"),r=(t=this.safeMarket(a,t,"_")).symbol,o=this.safeFloat(e,"quantity");let n=this.safeFloat(e,"executed_quantity");const c=this.parseOrderStatus(this.safeString(e,"status"));let d=this.safeFloat(e,"ceiling");const h=this.safeString(e,"id");let l=void 0,u=this.safeFloat(e,"price");u||(u=this.safeFloat(e,"executed_price"),l=u);let p=this.safeFloat(e,"remaining");void 0===n&&void 0!==o&&void 0!==p&&(n=Math.max(0,o-p)),void 0!==n&&(void 0!==o&&void 0===p&&(p=Math.max(0,o-n)),void 0!==u&&void 0===d&&(d=n*u),void 0===l&&void 0!==d&&n>0&&(l=d/n));const f=this.safeString(e,"type"),m=this.safeString(e,"trade_type"),v={currency:t.quote,cost:this.safeFloat(e,"fee"),rate:this.safeFloat(e,"fee_rate")};let y=void 0;s!==i&&(y=s);const g=this.safeFloat(e,"stopPrice");return{id:h,clientOrderId:h,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:y,status:c,symbol:r,type:f,timeInForce:void 0,side:m,price:u,stopPrice:g,average:l,amount:o,cost:d,filled:n,remaining:p,fee:v,trades:void 0,info:e}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},a=await this.privateGetOrdersOrderId(this.extend(s,i)),r=this.safeValue(a,"data");return this.parseOrder(r)}async fetchOrdersWithMethod(e,t,i,s,a={}){await this.loadMarkets();const r={};let o=void 0;void 0!==t&&(o=this.market(t),r.coin=o.baseId,r.currency=o.quoteId),void 0!==i&&(r.start_date=i),void 0!==s&&(r.limit=Math.min(1e3,s));const n=await this[e](this.extend(r,a));let c=this.safeValue(n,"data",{});return c=this.safeValue(c,"data",[]),this.parseOrders(c,o,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("privateGetOrdersOpen",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("privateGetOrders",e,t,i,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={};let r=void 0;void 0!==e&&(r=this.market(e),a.coin=r.baseId,a.currency=r.quoteId),void 0!==t&&(a.start_date=t),void 0!==i&&(a.limit=Math.min(1e3,i));const o=await this.privateGetOrdersTrades(this.extend(a,s));let n=this.safeValue(o,"data",{});return n=this.safeValue(n,"data",[]),this.parseTrades(n,r,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetDepositAddress(this.extend(i,t)),a=this.safeValue(s,"data");if("REQUESTED"===this.safeString(a,"status"))throw new u(this.id+" is generating "+e+" deposit address, call fetchDepositAddress one more time later to retrieve the generated address");const r=this.safeString(a,"blockchain_address");this.checkAddress(r);const o=this.safeString(a,"blockchain_tag"),n=this.safeString(a,"currency");return{currency:this.safeCurrencyCode(n),address:r,tag:o,info:a}}sign(e,t="public",i="GET",s={},a,r){let o=this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if(Object.keys(n).length&&(o+="?"+this.urlencode(n)),"private"===t){this.checkRequiredCredentials();const e=this.milliseconds().toString();"GET"!==i&&(r=this.json(n));const t=i+" "+o,s=this.hmac(this.encode(t),this.encode(this.secret),"sha256");a={Authorization:"Bearer "+this.apiKey,"Content-Type":"application/json",timestamp:e,signature:s}}return o=this.urls.api[t]+"/"+o,{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n)return;const h=this.safeString(n,"message");if(void 0!==h){const e=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,h,e),this.throwBroadlyMatchedException(this.exceptions.broad,o,e),new a(e)}}}},function(e,t,i){"use strict";const s=i(1),{ArgumentsRequired:a,AuthenticationError:r,InsufficientFunds:o,InvalidOrder:n,AccountSuspended:c,ExchangeError:d,DuplicateOrderId:h,OrderNotFound:l,BadSymbol:u,ExchangeNotAvailable:p,BadRequest:f}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"wavesexchange",name:"Waves.Exchange",countries:["CH"],rateLimit:500,certified:!0,pro:!1,has:{cancelOrder:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","3h":"3h","4h":"4h","6h":"6h","12h":"12h","1d":"1d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/84547058-5fb27d80-ad0b-11ea-8711-78ac8b3c7f31.jpg",api:{matcher:"http://matcher.waves.exchange",node:"https://nodes.waves.exchange",public:"https://api.wavesplatform.com/v0",private:"https://api.waves.exchange/v1",forward:"https://waves.exchange/api/v1/forward/matcher",market:"https://marketdata.wavesplatform.com/api/v1"},doc:"https://docs.waves.exchange",www:"https://waves.exchange"},api:{matcher:{get:["matcher","matcher/settings","matcher/settings/rates","matcher/balance/reserved/{publicKey}","matcher/debug/allSnashotOffsets","matcher/debug/currentOffset","matcher/debug/lastOffset","matcher/debug/oldestSnapshotOffset","matcher/orderbook","matcher/orderbook/{amountAsset}/{priceAsset}","matcher/orderbook/{baseId}/{quoteId}/publicKey/{publicKey}","matcher/orderbook/{baseId}/{quoteId}/{orderId}","matcher/orderbook/{baseId}/{quoteId}/info","matcher/orderbook/{baseId}/{quoteId}/status","matcher/orderbook/{baseId}/{quoteId}/tradeableBalance/{address}","matcher/orderbook/{publicKey}","matcher/orderbook/{publicKey}/{orderId}","matcher/orders/{address}","matcher/orders/{address}/{orderId}","matcher/transactions/{orderId}"],post:["matcher/orderbook","matcher/orderbook/market","matcher/orderbook/cancel","matcher/orderbook/{baseId}/{quoteId}/cancel","matcher/debug/saveSnapshots","matcher/orders/{address}/cancel","matcher/orders/cancel/{orderId}"],delete:["matcher/orderbook/{baseId}/{quoteId}","matcher/settings/rates/{assetId}"],put:["matcher/settings/rates/{assetId}"]},node:{get:["addresses","addresses/balance/{address}","addresses/balance/{address}/{confirmations}","addresses/balance/details/{address}","addresses/data/{address}","addresses/data/{address}/{key}","addresses/effectiveBalance/{address}","addresses/effectiveBalance/{address}/{confirmations}","addresses/publicKey/{publicKey}","addresses/scriptInfo/{address}","addresses/scriptInfo/{address}/meta","addresses/seed/{address}","addresses/seq/{from}/{to}","addresses/validate/{address}","alias/by-address/{address}","alias/by-alias/{alias}","assets/{assetId}/distribution/{height}/{limit}","assets/balance/{address}","assets/balance/{address}/{assetId}","assets/details/{assetId}","assets/nft/{address}/limit/{limit}","blockchain/rewards","blockchain/rewards/height","blocks/address/{address}/{from}/{to}/","blocks/at/{height}","blocks/delay/{signature}/{blockNum}","blocks/first","blocks/headers/last","blocks/headers/seq/{from}/{to}","blocks/height","blocks/height/{signature}","blocks/last","blocks/seq/{from}/{to}","blocks/signature/{signature}","consensus/algo","consensus/basetarget","consensus/basetarget/{blockId}","consensus/{generatingbalance}/address","consensus/generationsignature","consensus/generationsignature/{blockId}","debug/balances/history/{address}","debug/blocks/{howMany}","debug/configInfo","debug/historyInfo","debug/info","debug/minerInfo","debug/portfolios/{address}","debug/state","debug/stateChanges/address/{address}","debug/stateChanges/info/{id}","debug/stateWaves/{height}","leasing/active/{address}","node/state","node/version","peers/all","peers/blacklisted","peers/connected","peers/suspended","transactions/address/{address}/limit/{limit}","transactions/info/{id}","transactions/status","transactions/unconfirmed","transactions/unconfirmed/info/{id}","transactions/unconfirmed/size","utils/seed","utils/seed/{length}","utils/time","wallet/seed"],post:["addresses","addresses/data/{address}","addresses/sign/{address}","addresses/signText/{address}","addresses/verify/{address}","addresses/verifyText/{address}","debug/blacklist","debug/print","debug/rollback","debug/validate","node/stop","peers/clearblacklist","peers/connect","transactions/broadcast","transactions/calculateFee","tranasctions/sign","transactions/sign/{signerAddress}","tranasctions/status","utils/hash/fast","utils/hash/secure","utils/script/compileCode","utils/script/compileWithImports","utils/script/decompile","utils/script/estimate","utils/sign/{privateKey}","utils/transactionsSerialize"],delete:["addresses/{address}","debug/rollback-to/{signature}"]},public:{get:["pairs","candles/{baseId}/{quoteId}","transactions/exchange"]},private:{get:["deposit/addresses/{code}","deposit/currencies","withdraw/currencies","withdraw/addresses/{currency}/{address}"],post:["oauth2/token"]},forward:{get:["matcher/orders/{address}","matcher/orders/{address}/{orderId}"],post:["matcher/orders/{wavesAddress}/cancel"]},market:{get:["tickers"]}},options:{allowedCandles:1440,accessToken:void 0,matcherPublicKey:void 0,quotes:void 0,createOrderDefaultExpiry:24192e5,wavesAddress:void 0,withdrawFeeUSDN:7420,withdrawFeeWAVES:1e5,wavesPrecision:8},requiresEddsa:!0,exceptions:{3147270:o,112:o,4:d,13:p,14:p,3145733:c,3148040:h,3148801:r,9440512:r,9440771:u,9441026:n,9441282:n,9441286:n,9441295:n,9441540:n,9441542:n,106954752:r,106954769:r,106957828:r,106960131:r,106981137:r,9437193:l,1048577:f,1051904:r}})}async getQuotes(){let e=this.safeValue(this.options,"quotes");if(e)return e;{const t=await this.matcherGetMatcherSettings();e={};const i=this.safeValue(t,"priceAssets");for(let t=0;t<i.length;t++)e[i[t]]=!0;return this.options.quotes=e,e}}async fetchMarkets(e={}){const t=await this.marketGetTickers(),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"amountAssetID"),r=this.safeString(s,"priceAssetID"),o=a+"/"+r,n=this.safeString(s,"symbol"),[c,d]=n.split("/"),h=this.safeCurrencyCode(c)+"/"+this.safeCurrencyCode(d),l={amount:this.safeInteger(s,"amountAssetDecimals"),price:this.safeInteger(s,"priceAssetDecimals")};i.push({symbol:h,id:o,base:c,quote:d,baseId:a,quoteId:r,info:s,precision:l})}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),a=this.extend({amountAsset:s.baseId,priceAsset:s.quoteId},i),r=await this.matcherGetMatcherOrderbookAmountAssetPriceAsset(a),o=this.safeInteger(r,"timestamp");return{bids:this.parseOrderBookSide(this.safeValue(r,"bids"),s,t),asks:this.parseOrderBookSide(this.safeValue(r,"asks"),s,t),timestamp:o,datetime:this.iso8601(o),nonce:void 0}}parseOrderBookSide(e,t,i){const s=t.precision,a=this.safeInteger(this.options,"wavesPrecision",8),r=Math.pow(10,s.amount),o=s.amount-s.price,n=Math.pow(10,a-o),c=[];for(let t=0;t<e.length;t++){const s=e[t],a=this.safeInteger(s,"price",0)/n,o=this.safeInteger(s,"amount",0)/r;if(void 0!==i&&t>i)break;c.push([a,o])}return c}checkRequiredKeys(){if(void 0===this.apiKey)throw new r(this.id+" requires apiKey credential");if(void 0===this.secret)throw new r(this.id+" requires secret credential");let e=void 0,t=void 0;try{e=this.base58ToBinary(this.apiKey)}catch(e){throw new r(this.id+" apiKey must be a base58 encoded public key")}try{t=this.base58ToBinary(this.secret)}catch(e){throw new r(this.id+" secret must be a base58 encoded private key")}const i=this.binaryToBase16(e),s=this.binaryToBase16(t);if(64!==i.length)throw new r(this.id+" apiKey must be a base58 encoded public key");if(64!==s.length)throw new r(this.id+" secret must be a base58 encoded private key")}sign(e,t="public",i="GET",s={},a,r){const o=this.omit(s,this.extractParams(e)),n="matcher/orders/{wavesAddress}/cancel"===e;e=this.implodeParams(e,s);let c=this.urls.api[t]+"/"+e,d=this.urlencode(o);if("private"===t||"forward"===t){a={Accept:"application/json"};const e=this.safeString(this.options,"accessToken");e&&(a.Authorization="Bearer "+e),a["content-type"]="POST"===i?"application/json":"application/x-www-form-urlencoded",n&&(r=this.json([o.orderId]),d=""),d.length>0&&(c+="?"+d)}else"matcher"===t?"POST"===i?(a={"content-type":"application/json"},r=this.json(o)):a=o:"POST"===i?(a={"content-type":"application/json"},r=this.json(o)):(a={"content-type":"application/x-www-form-urlencoded"},d.length>0&&(c+="?"+d));return{url:c,method:i,body:r,headers:a}}async getAccessToken(){if(!this.safeString(this.options,"accessToken")){const e="ffffff01",t=604800;let i=this.sum(this.seconds(),t);i=i.toString();const s="waves.exchange",a="W:"+s+":"+i,r=e+this.binaryToBase16(this.stringToBinary(this.encode(a))),o=this.binaryToBase16(this.base58ToBinary(this.secret)),n=this.eddsa(r,o,"ed25519"),c={grant_type:"password",scope:"general",username:this.apiKey,password:i+":"+n,client_id:s},d=await this.privatePostOauth2Token(c);return this.options.accessToken=this.safeString(d,"access_token"),this.options.accessToken}}parseTicker(e,t){const i=this.safeString(e,"amountAsset"),s=this.safeString(e,"priceAsset");let a=void 0;if(void 0!==i&&void 0!==s){const e=i+"/"+s;if(e in this.markets_by_id)t=this.markets_by_id[e];else{a=this.safeCurrencyCode(i)+"/"+this.safeCurrencyCode(s)}}void 0===a&&void 0!==t&&(a=t.symbol);const r=this.safeValue(e,"data",{}),o=this.safeFloat(r,"lastPrice"),n=this.safeFloat(r,"low"),c=this.safeFloat(r,"high"),d=this.safeFloat(r,"weightedAveragePrice"),h=this.safeFloat(r,"volume"),l=this.safeFloat(r,"quoteVolume"),u=this.safeValue(r,"firstPrice");let p=void 0,f=void 0,m=void 0;return void 0!==o&&void 0!==u&&(p=o-u,f=this.sum(o,u)/2,u>0&&(m=p/u*100)),{symbol:a,timestamp:void 0,datetime:this.iso8601(void 0),high:c,low:n,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:d,open:u,close:o,last:o,previousClose:void 0,change:p,percentage:m,average:f,baseVolume:h,quoteVolume:l,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pairs:i.id},a=await this.publicGetPairs(this.extend(s,t)),r=this.safeValue(a,"data",[]),o=this.safeValue(r,0,{});return this.parseTicker(o,i)}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={baseId:r.baseId,quoteId:r.quoteId,interval:this.timeframes[t]};if(void 0!==i)o.timeStart=i.toString();else{const e=this.safeInteger(this.options,"allowedCandles",1440),i=1e3*this.parseTimeframe(t),s=Math.floor(this.milliseconds()/i)*i-(e-1)*i;o.timeStart=s.toString()}const n=await this.publicGetCandlesBaseIdQuoteId(this.extend(o,a)),c=this.safeValue(n,"data",[]),d=this.parseOHLCVs(c,r,t,i,s);let h=void 0;const l=d.length;for(let e=0;e<d.length;e++){const t=l-e-1,i=d[t];void 0===i[1]&&(i[1]=h,i[2]=h,i[3]=h,i[4]=h,d[t]=i),h=i[4]}return d}parseOHLCV(e,t){const i=this.safeValue(e,"data",{});return[this.parse8601(this.safeString(i,"time")),this.safeFloat(i,"open"),this.safeFloat(i,"high"),this.safeFloat(i,"low"),this.safeFloat(i,"close"),this.safeFloat(i,"volume",0)]}async fetchDepositAddress(e,t={}){await this.getAccessToken();const i=await this.privateGetDepositCurrencies(),s={},a=this.safeValue(i,"items",[]);for(let e=0;e<a.length;e++){const t=a[e];s[this.safeString(t,"id")]=!0}if(!(e in s)){const t=Object.keys(s);throw new d(this.id+" fetch "+e+" deposit address not supported. Currency code must be one of "+t.toString())}const r=this.extend({code:e},t),o=await this.privateGetDepositAddressesCode(r),n=this.safeValue(o,"deposit_addresses");return{address:this.safeString(n,0),code:e,tag:void 0,info:o}}async getMatcherPublicKey(){const e=this.safeString(this.options,"matcherPublicKey");if(e)return e;{const e=await this.matcherGetMatcher();return this.options.matcherPublicKey=e.slice(1,e.length-1),this.options.matcherPublicKey}}getAssetBytes(e){return"WAVES"===e?this.numberToBE(0,1):this.binaryConcat(this.numberToBE(1,1),this.base58ToBinary(e))}getAssetId(e){return"WAVES"===e?"":e}priceToPrecision(e,t){const i=this.markets[e],s=this.safeInteger(this.options,"wavesPrecision",8),a=i.precision.amount-i.precision.price;return parseInt(parseFloat(this.toWei(t,s-a)))}amountToPrecision(e,t){return parseInt(parseFloat(this.toWei(t,this.markets[e].precision.amount)))}currencyToPrecision(e,t){return parseInt(parseFloat(this.toWei(t,this.currencies[e].precision)))}currencyFromPrecision(e,t){return this.fromWei(t,this.currencies[e].precision)}priceFromPrecision(e,t){const i=this.markets[e],s=this.safeInteger(this.options,"wavesPrecision",8),a=i.precision.amount-i.precision.price;return this.fromWei(t,s-a)}getDefaultExpiry(){const e=this.safeInteger(this.options,"createOrderDefaultExpiry");return e||(this.options.createOrderDefaultExpiry=24192e5,this.options.createOrderDefaultExpiry)}async createOrder(e,t,i,s,a,r={}){this.checkRequiredDependencies(),this.checkRequiredKeys(),await this.loadMarkets();const n=this.market(e),c=await this.getMatcherPublicKey(),d=this.getAssetId(n.baseId),h=this.getAssetId(n.quoteId);s=this.amountToPrecision(e,s),a=this.priceToPrecision(e,a);const l="buy"===i?0:1,u=this.milliseconds(),p=this.sum(u,this.getDefaultExpiry()),f=await this.matcherGetMatcherSettings(),m=this.safeValue(f,"orderFee"),v=this.safeValue(m,"dynamic"),y=this.safeInteger(v,"baseFee"),g=this.currencyFromPrecision("WAVES",y),b=this.safeValue(v,"rates"),w=Object.keys(b);let k=void 0,x=void 0;if("feeAssetId"in r)k=r.feeAssetId;else if("feeAssetId"in this.options)k=this.options.feeAssetId;else{const e=await this.fetchBalance();if(e.WAVES.free>g)k="WAVES",x=y;else for(let t=0;t<w.length;t++){const i=w[t],s=this.safeCurrencyCode(i),a=this.safeValue(this.safeValue(e,s,{}),"free"),r=b[i]*g;if(void 0!==a&&a>r){k=i;break}}}if(void 0===k)throw o(this.id+" not enough funds to cover the fee, specify feeAssetId in params or options, or buy some WAVES");if(void 0===x){const e=this.safeInteger(this.options,"wavesPrecision",8),t=this.safeFloat(b,k),i=this.safeCurrencyCode(k),s=this.currency(i),a=Math.pow(10,e-s.precision);x=Math.ceil(t*y/a)}const T=[this.numberToBE(3,1),this.base58ToBinary(this.apiKey),this.base58ToBinary(c),this.getAssetBytes(n.baseId),this.getAssetBytes(n.quoteId),this.numberToBE(l,1),this.numberToBE(a,8),this.numberToBE(s,8),this.numberToBE(u,8),this.numberToBE(p,8),this.numberToBE(x,8),this.getAssetBytes(k)],O=this.binaryConcatArray(T),_=this.eddsa(this.binaryToBase16(O),this.binaryToBase16(this.base58ToBinary(this.secret)),"ed25519"),S={amountAsset:d,priceAsset:h},C={senderPublicKey:this.apiKey,matcherPublicKey:c,assetPair:S,orderType:i,price:a,amount:s,timestamp:u,expiration:p,matcherFee:x,signature:_,version:3};"WAVES"!==k&&(C.matcherFeeAssetId=k);const I=await this.matcherPostMatcherOrderbook(C),M=this.safeValue(I,"message");return this.parseOrder(M,n)}async cancelOrder(e,t,i={}){this.checkRequiredDependencies(),this.checkRequiredKeys(),await this.getAccessToken();const s=await this.getWavesAddress(),a=await this.forwardPostMatcherOrdersWavesAddressCancel({wavesAddress:s,orderId:e}),r=this.safeValue(a,"message"),o=this.safeValue(r,0),n=this.safeValue(o,0);return{info:a,id:this.safeString(n,"orderId"),clientOrderId:void 0,timestamp:void 0,datetime:void 0,lastTradeTimestamp:void 0,symbol:t,type:void 0,side:void 0,price:void 0,amount:void 0,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:void 0,fee:void 0,trades:void 0}}async fetchOrders(e,t,i,s={}){if(this.checkRequiredDependencies(),this.checkRequiredKeys(),void 0===e)throw new a(this.id+" fetchOrders requires symbol argument");await this.loadMarkets();const r=this.market(e),o=this.milliseconds(),n=[this.base58ToBinary(this.apiKey),this.numberToBE(o,8)],c=this.binaryConcatArray(n),d=this.binaryToBase16(this.base58ToBinary(this.secret)),h=this.eddsa(this.binaryToBase16(c),d,"ed25519"),l={Accept:"application/json",Timestamp:o.toString(),Signature:h,publicKey:this.apiKey,baseId:r.baseId,quoteId:r.quoteId},u=await this.matcherGetMatcherOrderbookBaseIdQuoteIdPublicKeyPublicKey(this.extend(l,s));return this.parseOrders(u,r,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets(),await this.getAccessToken();let a=void 0;void 0!==e&&(a=this.market(e));const r={address:await this.getWavesAddress(),activeOnly:!0},o=await this.forwardGetMatcherOrdersAddress(r);return this.parseOrders(o,a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets(),await this.getAccessToken();let a=void 0;void 0!==e&&(a=this.market(e));const r={address:await this.getWavesAddress(),closedOnly:!0},o=await this.forwardGetMatcherOrdersAddress(r);return this.parseOrders(o,a,t,i)}parseOrderStatus(e){return this.safeString({Cancelled:"canceled",Accepted:"open",Filled:"closed",PartiallyFilled:"open"},e,e)}getSymbolFromAssetPair(e){const t=this.safeString(e,"amountAsset","WAVES"),i=this.safeString(e,"priceAsset","WAVES");return this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}parseOrder(e,t){const i=this.safeInteger(e,"timestamp"),s=this.safeString2(e,"type","orderType");let a="limit";"type"in e&&(a=this.safeString(e,"orderType",a));const r=this.safeString(e,"id");let o=this.safeString(e,"filled"),n=this.safeString(e,"price"),c=this.safeString(e,"amount");const d=this.safeValue(e,"assetPair");let h=void 0;void 0!==d?h=this.getSymbolFromAssetPair(d):void 0!==t&&(h=t.symbol);const l=this.safeCurrencyCode(this.safeString(d,"amountAsset","WAVES"));n=this.priceFromPrecision(h,n),c=this.currencyFromPrecision(l,c);let u=void 0;void 0!==n&&void 0!==c&&(u=n*c),o=this.currencyFromPrecision(l,o);let p=void 0;void 0!==o&&void 0!==c&&(p=c-o);const f=this.priceFromPrecision(h,this.safeString(e,"avgWeighedPrice")),m=this.parseOrderStatus(this.safeString(e,"status"));let v=void 0;if("type"in e){const t=this.safeCurrencyCode(this.safeString(e,"feeAsset"));v={currency:t,fee:this.currencyFromPrecision(t,this.safeInteger(e,"filledFee"))}}else{const t=this.safeCurrencyCode(this.safeString(e,"matcherFeeAssetId","WAVES"));v={currency:t,fee:this.currencyFromPrecision(t,this.safeInteger(e,"matcherFee"))}}return{info:e,id:r,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:h,type:a,timeInForce:void 0,side:s,price:n,stopPrice:void 0,amount:c,cost:u,average:f,filled:o,remaining:p,status:m,fee:v,trades:void 0}}async getWavesAddress(){const e=this.safeString(this.options,"wavesAddress");if(void 0===e){const e={publicKey:this.apiKey},t=await this.nodeGetAddressesPublicKeyPublicKey(e);return this.options.wavesAddress=this.safeString(t,"address"),this.options.wavesAddress}return e}async fetchBalance(e={}){this.checkRequiredDependencies(),this.checkRequiredKeys(),await this.loadMarkets();const t=await this.getWavesAddress(),i={address:t},s=await this.nodeGetAssetsBalanceAddress(i),a=this.safeValue(s,"balances"),r={};for(let e=0;e<a.length;e++){const t=a[e],i=this.safeValue(t,"issueTransaction"),s=this.safeInteger(i,"decimals"),o=this.safeString(t,"assetId"),n=this.safeFloat(t,"balance");let c=void 0;o in this.currencies_by_id&&(c=this.safeCurrencyCode(o),r[c]=this.account(),r[c].total=this.fromWei(n,s))}const o=this.milliseconds(),n=[this.base58ToBinary(this.apiKey),this.numberToBE(o,8)],c=this.binaryConcatArray(n),d=this.binaryToBase16(this.base58ToBinary(this.secret)),h=this.eddsa(this.binaryToBase16(c),d,"ed25519"),l={publicKey:this.apiKey,signature:h,timestamp:o.toString()},u=await this.matcherGetMatcherBalanceReservedPublicKey(l),p=Object.keys(u);for(let e=0;e<p.length;e++){const t=p[e],i=this.safeCurrencyCode(t);i in r||(r[i]=this.account());const s=this.safeFloat(u,t);r[i].used=this.currencyFromPrecision(i,s)}const f={address:t},m=await this.nodeGetAddressesBalanceAddress(f);r.WAVES=this.safeValue(r,"WAVES",{}),r.WAVES.total=this.currencyFromPrecision("WAVES",this.safeFloat(m,"balance"));const v=Object.keys(r);for(let e=0;e<v.length;e++){const t=v[e];void 0===this.safeValue(r[t],"used")&&(r[t].used=0)}return this.parseBalance(r)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={sender:await this.getWavesAddress(),amountAsset:a.baseId,priceAsset:a.quoteId},o=await this.publicGetTransactionsExchange(r),n=this.safeValue(o,"data");return this.parseTrades(n,a,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={amountAsset:a.baseId,priceAsset:a.quoteId};void 0!==i&&(r.limit=i),void 0!==t&&(r.timeStart=t);const o=await this.publicGetTransactionsExchange(r),n=this.safeValue(o,"data");return this.parseTrades(n,a,t,i)}parseTrade(e,t){const i=this.safeValue(e,"data"),s=this.safeString(i,"timestamp"),a=this.parse8601(s),r=this.safeString(i,"id"),o=this.safeFloat(i,"price"),n=this.safeFloat(i,"amount"),c=this.safeValue(i,"order1"),d=this.safeValue(i,"order2");let h=void 0;h=this.safeString(c,"senderPublicKey")===this.apiKey?c:d;let l=void 0;const u=this.safeValue(h,"assetPair");void 0!==u?l=this.getSymbolFromAssetPair(u):void 0!==t&&(l=t.symbol);const p=this.safeString(h,"orderType");let f=void 0;void 0!==o&&void 0!==n&&(f=o*n);return{info:e,timestamp:a,datetime:s,symbol:l,id:r,order:this.safeString(h,"id"),type:void 0,side:p,takerOrMaker:void 0,price:o,amount:n,cost:f,fee:{cost:this.safeFloat(i,"fee"),currency:this.safeCurrencyCode(this.safeString(h,"matcherFeeAssetId","WAVES"))}}}handleErrors(e,t,i,s,a,r,o,n,c){const h=this.safeString(o,"error"),l=this.safeValue(o,"success",!0),u=this.safeValue(this.exceptions,h);if(void 0!==u){const e=this.safeString(o,"message");throw new u(this.id+" "+e)}if("Validation Error"===this.safeString(o,"message"))throw new f(this.id+" "+r);if(!l)throw new d(this.id+" "+r)}async withdraw(e,t,i,s,a={}){if("WAVES"!==e){const t=await this.privateGetWithdrawCurrencies(),i={},s=this.safeValue(t,"items",[]);for(let e=0;e<s.length;e++){const t=s[e];i[this.safeString(t,"id")]=!0}if(!(e in i)){const t=Object.keys(i);throw new d(this.id+" fetch "+e+" withdrawals are not supported. Currency code must be one of "+t.toString())}}await this.loadMarkets();const r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],o={};for(let e=0;e<r.length;e++){o[r[e]]=!0}let n=!0;const c=this.remove0xPrefix(i).toLowerCase();for(let e=0;e<c.length;e++){if(!(c[e]in o)){n=!1;break}}await this.getAccessToken();let h=void 0;if("WAVES"!==e||n){const s={address:i,currency:e},a=await this.privateGetWithdrawAddressesCurrencyAddress(s),r=this.safeValue(a,"currency"),o=this.safeValue(r,"allowed_amount"),n=this.safeFloat(o,"min");if(t<=n)throw new f(this.id+" "+e+" withdraw failed, amount "+t.toString()+" must be greater than the minimum allowed amount of "+n.toString());const c=this.safeValue(a,"proxy_addresses",[]);h=this.safeString(c,0)}else h=i;const l=this.safeInteger(this.options,"withdrawFeeWAVES",1e5),u=this.currencyToPrecision(e,t),p=this.currency(e),m=this.milliseconds(),v=[this.numberToBE(4,1),this.numberToBE(2,1),this.base58ToBinary(this.apiKey),this.getAssetBytes(p.id),this.getAssetBytes("WAVES"),this.numberToBE(m,8),this.numberToBE(u,8),this.numberToBE(l,8),this.base58ToBinary(h),this.numberToBE(0,2)],y=this.binaryConcatArray(v),g=this.binaryToBase16(this.base58ToBinary(this.secret)),b=this.eddsa(this.binaryToBase16(y),g,"ed25519"),w={senderPublicKey:this.apiKey,amount:u,fee:l,type:4,version:2,attachment:"",feeAssetId:this.getAssetId("WAVES"),proofs:[b],assetId:this.getAssetId(p.id),recipient:h,timestamp:m,signature:b};return await this.nodePostTransactionsBroadcast(w)}}},function(e,t,i){"use strict";const s=i(1),{ExchangeNotAvailable:a,ExchangeError:r,DDoSProtection:o,BadSymbol:n}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"whitebit",name:"WhiteBit",version:"v2",countries:["EE"],rateLimit:500,has:{cancelOrder:!1,CORS:!1,createDepositAddress:!1,createLimitOrder:!1,createMarketOrder:!1,createOrder:!1,deposit:!1,editOrder:!1,fetchBalance:!1,fetchBidsAsks:!1,fetchCurrencies:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOrderBook:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFees:!0,privateAPI:!1,publicAPI:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/66732963-8eb7dd00-ee66-11e9-849b-10d9282bb9e0.jpg",api:{web:"https://whitebit.com/",publicV2:"https://whitebit.com/api/v2/public",publicV1:"https://whitebit.com/api/v1/public"},www:"https://www.whitebit.com",doc:"https://documenter.getpostman.com/view/7473075/Szzj8dgv?version=latest",fees:"https://whitebit.com/fee-schedule",referral:"https://whitebit.com/referral/d9bdf40e-28f2-4b52-b2f9-cd1415d82963"},api:{web:{get:["v1/healthcheck"]},publicV1:{get:["markets","tickers","ticker","symbols","depth/result","history","kline"]},publicV2:{get:["markets","ticker","assets","fee","depth/{market}","trades/{market}"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},options:{fetchTradesMethod:"fetchTradesV1"},exceptions:{exact:{503:a},broad:{"Market is not available":n}}})}async fetchMarkets(e={}){const t=await this.publicV2GetMarkets(e),i=this.safeValue(t,"result"),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"name"),r=this.safeString(t,"stock"),o=this.safeString(t,"money"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o),d={id:a,symbol:n+"/"+c,base:n,quote:c,baseId:r,quoteId:o,info:t,active:this.safeValue(t,"tradesEnabled"),precision:{amount:this.safeInteger(t,"stockPrec"),price:this.safeInteger(t,"moneyPrec")},limits:{amount:{min:this.safeFloat(t,"minAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(t,"minTotal"),max:void 0}}};s.push(d)}return s}async fetchCurrencies(e={}){const t=await this.publicV2GetAssets(e),i=this.safeValue(t,"result"),s=Object.keys(i),a={};for(let e=0;e<s.length;e++){const t=s[e],r=i[t],o=this.safeValue(r,"canDeposit",!0),n=this.safeValue(r,"canWithdraw",!0),c=o&&n,d=this.safeCurrencyCode(t);a[d]={id:t,code:d,info:r,name:void 0,active:c,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(r,"minWithdrawal"),max:this.safeFloat(r,"maxWithdrawal")}}}}return a}async fetchTradingFees(e={}){const t=await this.publicV2GetFee(e),i=this.safeValue(t,"result");return{maker:this.safeFloat(i,"makerFee"),taker:this.safeFloat(i,"takerFee")}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},a=await this.publicV1GetTicker(this.extend(s,t)),r=this.safeValue(a,"result",{});return this.parseTicker(r,i)}parseTicker(e,t){const i=this.safeTimestamp(e,"at",this.milliseconds());e=this.safeValue(e,"ticker",e);let s=void 0;void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"last"),r=this.safeFloat(e,"change");let o=void 0;return void 0!==r&&(o=this.numberToString(.01*r)),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:a,last:a,previousClose:void 0,change:o,percentage:r,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"deal"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicV1GetTickers(t),s=this.safeValue(i,"result"),a=Object.keys(s),r={};for(let e=0;e<a.length;e++){const t=a[e],i=this.safeMarket(t),o=this.parseTicker(s[t],i);r[o.symbol]=o}return this.filterByArray(r,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id};void 0!==t&&(s.limit=t);const a=await this.publicV2GetDepthMarket(this.extend(s,i)),r=this.safeValue(a,"result",{}),o=this.parse8601(this.safeString(r,"lastUpdateTimestamp"));return this.parseOrderBook(r,o)}async fetchTradesV1(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market:a.id,lastId:1};void 0!==i&&(r.limit=i);const o=await this.publicV1GetHistory(this.extend(r,s)),n=this.safeValue(o,"result",[]);return this.parseTrades(n,a,t,i)}async fetchTradesV2(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={market:a.id};void 0!==i&&(r.limit=i);const o=await this.publicV2GetTradesMarket(this.extend(r,s)),n=this.safeValue(o,"result",[]);return this.parseTrades(n,a,t,i)}async fetchTrades(e,t,i,s={}){const a=this.safeString(this.options,"fetchTradesMethod","fetchTradesV2");return await this[a](e,t,i,s)}parseTrade(e,t){let i=this.safeValue(e,"time");i="string"==typeof i?this.parse8601(i):parseInt(1e3*i);const s=this.safeFloat(e,"price"),a=this.safeFloat2(e,"amount","volume"),r=this.safeString2(e,"id","tradeId");let o=this.safeString(e,"type");if(void 0===o){o=this.safeValue(e,"isBuyerMaker")?"buy":"sell"}let n=void 0;void 0!==t&&(n=t.symbol);let c=void 0;return void 0!==a&&void 0!==s&&(c=a*s),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,id:r,order:void 0,type:void 0,takerOrMaker:void 0,side:o,price:s,amount:a,cost:c,fee:void 0}}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={market:r.id,interval:this.timeframes[t]};if(void 0!==i){const e=1440;void 0===s&&(s=e),s=Math.min(s,e);const a=parseInt(i/1e3),r=this.parseTimeframe(t),n=this.sum(a,r*s);o.start=a,o.end=n}void 0!==s&&(o.limit=s);const n=await this.publicV1GetKline(this.extend(o,a)),c=this.safeValue(n,"result",[]);return this.parseOHLCVs(c,r,t,i,s)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,5)]}async fetchStatus(e={}){const t=await this.webGetV1Healthcheck(e);let i="ok";return 503===this.safeInteger(t,"status")&&(i="maintenance"),this.status=this.extend(this.status,{status:i,updated:this.milliseconds()}),this.status}sign(e,t="publicV1",i="GET",s={},a,r){const o=this.omit(s,this.extractParams(e));let n=this.urls.api[t]+"/"+this.implodeParams(e,s);return Object.keys(o).length&&(n+="?"+this.urlencode(o)),{url:n,method:i,body:r,headers:a}}handleErrors(e,t,i,s,a,n,c,d,h){if(418===e||429===e)throw new o(this.id+" "+e.toString()+" "+t+" "+n);if(404===e)throw new r(this.id+" "+e.toString()+" endpoint not found");if(void 0!==c){if(!this.safeValue(c,"success")){const e=this.id+" "+n,t=this.safeString(c,"status");throw"string"==typeof t&&this.throwExactlyMatchedException(this.exceptions.exact,t,e),this.throwBroadlyMatchedException(this.exceptions.broad,n,e),new r(e)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,NotSupported:r,AuthenticationError:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"xbtce",name:"xBTCe",countries:["RU"],rateLimit:2e3,version:"v1",has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOHLCV:!1,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{referral:"https://xbtce.com/?agent=XX97BTCXXXG687021000B",logo:"https://user-images.githubusercontent.com/1294454/28059414-e235970c-662c-11e7-8c3a-08e31f78684b.jpg",api:"https://cryptottlivewebapi.xbtce.net:8443/api",www:"https://www.xbtce.com",doc:["https://www.xbtce.com/tradeapi","https://support.xbtce.info/Knowledgebase/Article/View/52/25/xbtce-exchange-api"]},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["currency","currency/{filter}","level2","level2/{filter}","quotehistory/{symbol}/{periodicity}/bars/ask","quotehistory/{symbol}/{periodicity}/bars/bid","quotehistory/{symbol}/level2","quotehistory/{symbol}/ticks","symbol","symbol/{filter}","tick","tick/{filter}","ticker","ticker/{filter}","tradesession"]},private:{get:["tradeserverinfo","tradesession","currency","currency/{filter}","level2","level2/{filter}","symbol","symbol/{filter}","tick","tick/{filter}","account","asset","asset/{id}","position","position/{id}","trade","trade/{id}","quotehistory/{symbol}/{periodicity}/bars/ask","quotehistory/{symbol}/{periodicity}/bars/ask/info","quotehistory/{symbol}/{periodicity}/bars/bid","quotehistory/{symbol}/{periodicity}/bars/bid/info","quotehistory/{symbol}/level2","quotehistory/{symbol}/level2/info","quotehistory/{symbol}/periodicities","quotehistory/{symbol}/ticks","quotehistory/{symbol}/ticks/info","quotehistory/cache/{symbol}/{periodicity}/bars/ask","quotehistory/cache/{symbol}/{periodicity}/bars/bid","quotehistory/cache/{symbol}/level2","quotehistory/cache/{symbol}/ticks","quotehistory/symbols","quotehistory/version"],post:["trade","tradehistory"],put:["trade"],delete:["trade"]}},commonCurrencies:{DSH:"DASH"}})}async fetchMarkets(e={}){const t=await this.privateGetSymbol(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"Symbol"),r=this.safeString(s,"MarginCurrency"),o=this.safeString(s,"ProfitCurrency"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(o);let d=n+"/"+c;d=s.IsTradeAllowed?d:a,i.push({id:a,symbol:d,base:n,quote:c,baseId:r,quoteId:o,info:s,active:void 0,precision:this.precision,limits:this.limits})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAsset(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"Currency"),r=this.safeCurrencyCode(a),o={free:this.safeFloat(s,"FreeAmount"),used:this.safeFloat(s,"LockedAmount"),total:this.safeFloat(s,"Amount")};i[r]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={filter:this.market(e).id},a=(await this.privateGetLevel2Filter(this.extend(s,i)))[0],r=this.safeInteger(a,"Timestamp");return this.parseOrderBook(a,r,"Bids","Asks","Price","Volume")}parseTicker(e,t){let i=0,s=void 0;"LastBuyTimestamp"in e&&i<e.LastBuyTimestamp&&(i=e.LastBuyTimestamp,s=e.LastBuyPrice),"LastSellTimestamp"in e&&i<e.LastSellTimestamp&&(i=e.LastSellTimestamp,s=e.LastSellPrice),i||(i=this.milliseconds());let a=void 0;return t&&(a=t.symbol),{symbol:a,timestamp:i,datetime:this.iso8601(i),high:e.DailyBestBuyPrice,low:e.DailyBestSellPrice,bid:e.BestBid,bidVolume:void 0,ask:e.BestAsk,askVolume:void 0,vwap:void 0,open:void 0,close:s,last:s,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:e.DailyTradedTotalVolume,quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s=this.indexBy(i,"Symbol"),a=Object.keys(s),r={};for(let e=0;e<a.length;e++){const t=a[e];let i=void 0,o=void 0;if(t in this.markets_by_id)i=this.markets_by_id[t],o=i.symbol;else{const e=t.slice(0,3),i=t.slice(3,6);o=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(i)}const n=s[t];r[o]=this.parseTicker(n,i)}return this.filterByArray(r,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={filter:i.id},r=await this.publicGetTickerFilter(this.extend(s,t));if(r.length<1)throw new a(this.id+" fetchTicker returned empty response, xBTCe public API error");const o=this.indexBy(r,"Symbol")[i.id];return this.parseTicker(o,i)}async fetchTrades(e,t,i,s={}){return await this.loadMarkets(),await this.privateGetTrade(s)}parseOHLCV(e,t){return[this.safeInteger(e,"Timestamp"),this.safeFloat(e,"Open"),this.safeFloat(e,"High"),this.safeFloat(e,"Low"),this.safeFloat(e,"Close"),this.safeFloat(e,"Volume")]}async fetchOHLCV(e,t="1m",i,s,a={}){throw new r(this.id+" fetchOHLCV is disabled by the exchange")}async createOrder(e,t,i,s,r,o={}){if(await this.loadMarkets(),"market"===t)throw new a(this.id+" allows limit orders only");const n={pair:this.marketId(e),type:i,amount:s,rate:r},c=await this.privatePostTrade(this.extend(n,o));return{info:c,id:c.Id.toString()}}async cancelOrder(e,t,i={}){const s={Type:"Cancel",Id:e};return await this.privateDeleteTrade(this.extend(s,i))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){if(!this.apiKey)throw new o(this.id+" requires apiKey for all requests, their public API is always busy");if(!this.uid)throw new o(this.id+" requires uid property for authentication and trading, their public API is always busy");let n=this.urls.api+"/"+this.version;"public"===t&&(n+="/"+t),n+="/"+this.implodeParams(e,s);const c=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(c).length&&(n+="?"+this.urlencode(c));else{this.checkRequiredCredentials(),a={"Accept-Encoding":"gzip, deflate"};const e=this.nonce().toString();"POST"===i&&(Object.keys(c).length?(a["Content-Type"]="application/json",r=this.json(c)):n+="?"+this.urlencode(c));let t=e+this.uid+this.apiKey+i+n;r&&(t+=r);const s=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64"),o=this.uid+":"+this.apiKey+":"+e+":"+s;a.Authorization="HMAC "+o}return{url:n,method:i,body:r,headers:a}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,BadRequest:o,InsufficientFunds:n,InvalidAddress:c,BadSymbol:d,InvalidOrder:h}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"xena",name:"Xena Exchange",countries:["VC","UK"],rateLimit:100,certified:!0,has:{CORS:!1,cancelAllOrders:!0,cancelOrder:!0,createDepositAddress:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87489843-bb469280-c64c-11ea-91aa-69c6326506af.jpg",api:{public:"https://trading.xena.exchange/api",private:"https://api.xena.exchange"},www:"https://xena.exchange",doc:"https://support.xena.exchange/support/solutions/44000808700",fees:"https://trading.xena.exchange/en/platform-specification/fee-schedule"},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","12h":"12h","1d":"1d","1w":"1w"},api:{public:{get:["common/currencies","common/instruments","common/features","common/commissions","common/news","market-data/candles/{marketId}/{timeframe}","market-data/market-watch","market-data/dom/{symbol}","market-data/candles/{symbol}/{timeframe}","market-data/trades/{symbol}","market-data/server-time","market-data/v2/candles/{symbol}/{timeframe}","market-data/v2/trades/{symbol}","market-data/v2/dom/{symbol}/","market-data/v2/server-time"]},private:{get:["trading/accounts/{accountId}/order","trading/accounts/{accountId}/active-orders","trading/accounts/{accountId}/last-order-statuses","trading/accounts/{accountId}/positions","trading/accounts/{accountId}/positions-history","trading/accounts/{accountId}/margin-requirements","trading/accounts","trading/accounts/{accountId}/balance","trading/accounts/{accountId}/trade-history","transfers/accounts","transfers/accounts/{accountId}","transfers/accounts/{accountId}/deposit-address/{currency}","transfers/accounts/{accountId}/deposits","transfers/accounts/{accountId}/trusted-addresses","transfers/accounts/{accountId}/withdrawals","transfers/accounts/{accountId}/balance-history"],post:["trading/order/new","trading/order/heartbeat","trading/order/cancel","trading/order/mass-cancel","trading/order/replace","trading/position/maintenance","transfers/accounts/{accountId}/withdrawals","transfers/accounts/{accountId}/deposit-address/{currency}"]}},fees:{trading:{maker:5e-4,taker:.001,tierBased:!0,percentage:!0},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{exact:{"Validation failed":o,"Unknown derivative symbol":d,"Unknown account":o,"Wrong TransactTime":o,"ClOrdId is empty":o},broad:{"Invalid aggregation ratio or depth":o,address:c,"Money not enough":n,"parse error":o,"Not enough":n}},options:{defaultType:"margin",accountId:void 0}})}async fetchTime(e={}){const t=await this.publicGetMarketDataV2ServerTime(e),i=this.safeInteger(t,"transactTime");return parseInt(i/1e6)}async fetchMarkets(e={}){const t=await this.publicGetCommonInstruments(e),i=[];for(let e=0;e<t.length;e++){const s=t[e];let a=this.safeStringLower(s,"type");const r=this.safeString(s,"symbol"),o=this.safeString(s,"id"),n=this.safeString(s,"marginType"),c=this.safeString(s,"baseCurrency"),d=this.safeString(s,"quoteCurrency"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d);let u=r;"margin"===a&&("XenaFuture"===n?a="future":"XenaListedPerpetual"===n&&(a="swap",u=h+"/"+l));const p="future"===a,f="swap"===a,m={price:this.safeInteger2(s,"tickSize","pricePrecision"),amount:0},v=this.safeFloat(s,"maxOrderQty"),y={amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(s,"minOrderQuantity"),max:v}},g=this.safeValue(s,"enabled",!1),b=this.safeValue(s,"inverse",!1);i.push({id:r,symbol:u,base:h,quote:l,baseId:c,quoteId:d,numericId:o,active:g,type:a,spot:!1,future:p,swap:f,inverse:b,precision:m,limits:y,info:s})}return i}async fetchCurrencies(e={}){const t=await this.publicGetCommonCurrencies(e),i=Object.keys(t),s={};for(let e=0;e<i.length;e++){const a=i[e],r=t[a],o=this.safeCurrencyCode(a),n=this.safeString(r,"title"),c=this.safeInteger(r,"precision"),d=!0===this.safeValue(r,"enabled"),h=this.safeValue(r,"withdraw",{});s[o]={id:a,code:o,info:r,name:n,active:d,fee:this.safeFloat(h,"commission"),precision:c,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(h,"minAmount"),max:void 0}}}}return s}parseTicker(e,t){const i=this.milliseconds(),s=this.safeString(e,"symbol"),a=this.safeSymbol(s,t),r=this.safeFloat(e,"lastPx"),o=this.safeFloat(e,"firstPx");let n=void 0,c=void 0,d=void 0;void 0!==r&&void 0!==o&&(c=r-o,d=this.sum(r,o)/2,o>0&&(n=c/o*100));const h=this.safeFloat(e,"buyVolume"),l=this.safeFloat(e,"sellVolume"),u=this.sum(h,l);return{symbol:a,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"highPx"),low:this.safeFloat(e,"lowPx"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:o,close:r,last:r,previousClose:void 0,change:c,percentage:n,average:d,baseVolume:u,quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=await this.fetchTickers(void 0,t);if(e in i)return i[e];throw new d(this.id+" fetchTicker could not find a ticker with symbol "+e)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketDataMarketWatch(t),s={};for(let e=0;e<i.length;e++){const t=this.parseTicker(i[e]);s[t.symbol]=t}return this.filterByArray(s,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.depth=t);const a=await this.publicGetMarketDataV2DomSymbol(this.extend(s,i)),r=this.safeValue(a,"mdEntry",[]),o=this.groupBy(r,"mdEntryType"),n=this.safeInteger(a,"lastUpdateTime"),c=parseInt(n/1e6);return this.parseOrderBook(o,c,"0","1","mdEntryPx","mdEntrySize")}async fetchAccounts(e={}){const t=await this.privateGetTradingAccounts(e),i=this.safeValue(t,"accounts"),s=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"id"),r=this.safeString(t,"currency"),o=this.safeCurrencyCode(r),n=this.safeStringLower(t,"kind");s.push({id:a,type:n,currency:o,info:t})}return s}async findAccountByType(e){await this.loadMarkets(),await this.loadAccounts();const t=this.groupBy(this.accounts,"type"),i=this.safeValue(t,e);if(void 0===i)throw new a(this.id+" findAccountByType() could not find an accountId with type '"+e+"', specify the 'accountId' parameter instead");if(i.length>1)throw new a(this.id+" findAccountByType() found more than one accountId with type '"+e+"', specify the 'accountId' parameter instead");return i[0]}async getAccountId(e){await this.loadMarkets(),await this.loadAccounts();const t=this.safeString(this.options,"accountId"),i=this.safeString(e,"accountId",t);if(void 0!==i)return i;const s=this.safeString(this.options,"defaultType","margin"),a=this.safeString(e,"type",s);if(e=this.omit(e,"type"),void 0===a)throw new r(this.id+" requires an 'accountId' parameter or a 'type' parameter ('spot' or 'margin')");return(await this.findAccountByType(a)).id}async fetchBalance(e={}){await this.loadMarkets(),await this.loadAccounts();const t={accountId:await this.getAccountId(e)},i=await this.privateGetTradingAccountsAccountIdBalance(this.extend(t,e)),s={info:i},a=this.safeValue(i,"balances",[]);for(let e=0;e<a.length;e++){const t=a[e],i=this.safeString(t,"currency"),r=this.safeCurrencyCode(i),o=this.account();o.free=this.safeFloat(t,"available"),o.used=this.safeFloat(t,"onHold"),s[r]=o}return this.parseBalance(s)}parseTrade(e,t){const i=this.safeString(e,"tradeId");let s=this.safeInteger(e,"transactTime");void 0!==s&&(s=parseInt(s/1e6));let a=this.safeStringLower2(e,"side","aggressorSide");"1"===a?a="buy":"2"===a&&(a="sell");const r=this.safeString(e,"orderId"),o=this.safeString(e,"symbol"),n=this.safeSymbol(o,t),c=this.safeFloat2(e,"lastPx","mdEntryPx"),d=this.safeFloat2(e,"lastQty","mdEntrySize");let h=void 0;void 0!==c&&void 0!==d&&(h=c*d);let l=void 0;const u=this.safeFloat(e,"commission");if(void 0!==u){const t=this.safeString(e,"commCurrency"),i=this.safeCurrencyCode(t);l={cost:u,rate:this.safeFloat(e,"commRate"),currency:i}}return{id:i,info:e,timestamp:s,datetime:this.iso8601(s),symbol:n,type:void 0,order:r,side:a,takerOrMaker:void 0,price:c,amount:d,cost:h,fee:l}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets(),await this.loadAccounts();const a={accountId:await this.getAccountId(s)};let r=void 0;void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==t&&(a.from=1e6*t),void 0!==i&&(a.limit=i);const o=await this.privateGetTradingAccountsAccountIdTradeHistory(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOHLCV(e,t){const i=this.safeInteger(e,"transactTime"),s=parseInt(i/1e6),a=this.safeFloat(e,"buyVolume"),r=this.safeFloat(e,"sellVolume"),o=this.sum(a,r);return[s,this.safeFloat(e,"firstPx"),this.safeFloat(e,"highPx"),this.safeFloat(e,"lowPx"),this.safeFloat(e,"lastPx"),o]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const r=this.market(e),o={symbol:r.id,timeframe:this.timeframes[t]},n=1e3*this.parseTimeframe(t);if(void 0!==i)o.from=1e6*i,void 0!==s&&(o.to=1e6*this.sum(i,s*n));else{const e=this.milliseconds();void 0!==s&&(o.from=1e6*(e-s*n))}const c=await this.publicGetMarketDataV2CandlesSymbolTimeframe(this.extend(o,a)),d=this.safeValue(c,"mdEntry",[]);return this.parseOHLCVs(d,r,t,i,s)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={symbol:a.id};void 0!==t&&(r.from=this.iso8601(t)),void 0!==i&&(r.limit=i);const o=await this.publicGetMarketDataV2TradesSymbol(this.extend(r,s)),n=this.safeValue(o,"mdEntry",[]);return this.parseTrades(n,a,t,i)}parseOrderStatus(e){return this.safeString({A:"open",0:"open",1:"open",2:"closed",6:"canceled",4:"canceled",E:"open",8:"rejected"},e,e)}parseOrder(e,t){const i=this.safeString(e,"orderId"),s=this.safeString(e,"clOrdId"),a=this.safeInteger(e,"transactTime"),r=parseInt(a/1e6),o=this.parseOrderStatus(this.safeString(e,"ordStatus")),n=this.safeString(e,"symbol"),c=this.safeSymbol(n,t),d=this.safeFloat(e,"price"),h=this.safeFloat(e,"orderQty"),l=this.safeFloat(e,"cumQty"),u=this.safeFloat(e,"leavesQty");let p=void 0,f=this.safeStringLower(e,"side");"1"===f?f="buy":"1"===f&&(f="sell");let m=this.safeStringLower(e,"ordType");return"1"===m?m="market":"2"===m?m="limit":"3"===m?m="stop":"4"===m&&(m="stop-limit"),void 0===p&&void 0!==d&&void 0!==l&&(p=d*l),{id:i,clientOrderId:s,info:e,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:c,type:m,timeInForce:void 0,side:f,price:d,stopPrice:void 0,amount:h,cost:p,average:void 0,filled:l,remaining:u,status:o,fee:void 0,trades:void 0}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets(),await this.loadAccounts();const o=await this.getAccountId(r),n=this.safeString({market:"1",limit:"2",stop:"3","stop-limit":"4"},t);if(void 0===n)throw new h(this.id+" createOrder does not support order type "+t+", supported order types are market, limit, stop, stop-limit");const c=this.safeString({buy:"1",sell:"2"},i);if(void 0===c)throw new h(this.id+" createOrder does not support order side "+i+", supported order sides are buy, sell");const d=this.market(e),l={account:parseInt(o),symbol:d.id,ordType:n,side:c,orderQty:this.amountToPrecision(e,s),transactTime:1e6*this.milliseconds()};if("limit"===t||"stop-limit"===t){if(void 0===a)throw new h(this.id+" createOrder requires a price argument for order type "+t);l.price=this.priceToPrecision(e,a)}if("stop"===t||"stop-limit"===t){const i=this.safeFloat(r,"stopPx");if(void 0===i)throw new h(this.id+" createOrder requires a stopPx param for order type "+t);l.stopPx=this.priceToPrecision(e,i),r=this.omit(r,"stopPx")}const u=this.safeString2(r,"clientOrderId","clOrdId",this.uuid());void 0!==u&&(l.clOrdId=u,r=this.omit(r,["clientOrderId","clOrdId"]));const p=await this.privatePostTradingOrderNew(this.extend(l,r));return this.parseOrder(p,d)}async editOrder(e,t,i,s,a,o,n={}){if(void 0===t)throw new r(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets(),await this.loadAccounts();const c=await this.getAccountId(n),d=this.market(t),h={account:parseInt(c),clOrdId:this.uuid(),symbol:d.id,transactTime:1e6*this.milliseconds()},l=this.safeString2(n,"clientOrderId","origClOrdId");void 0!==l?(h.origClOrdId=l,n=this.omit(n,["clientOrderId","origClOrdId"])):h.orderId=e,void 0!==a&&(h.orderQty=this.amountToPrecision(t,a)),void 0!==o&&(h.price=this.priceToPrecision(t,o));const u=this.safeFloat(n,"stopPx");void 0!==u&&(h.stopPx=this.priceToPrecision(t,u),n=this.omit(n,"stopPx"));const p=this.safeFloat(n,"capPrice");void 0!==p&&(h.capPrice=this.priceToPrecision(t,p),n=this.omit(n,"capPrice"));const f=await this.privatePostTradingOrderReplace(this.extend(h,n));return this.parseOrder(f,d)}async cancelOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets(),await this.loadAccounts();const s=await this.getAccountId(i),a=this.safeString2(i,"clientOrderId","origClOrdId");i=this.omit(i,["clientOrderId","origClOrdId"]);const o=this.market(t),n={account:parseInt(s),symbol:o.id,clOrdId:this.uuid(),transactTime:1e6*this.milliseconds()};void 0!==a?n.origClOrdId=a:n.orderId=e;const c=await this.privatePostTradingOrderCancel(this.extend(n,i));return this.parseOrder(c,o)}async cancelAllOrders(e,t={}){await this.loadMarkets(),await this.loadAccounts();const i=await this.getAccountId(t),s={account:parseInt(i),clOrdId:this.uuid()};if(void 0!==e){const t=this.market(e);s.symbol=t.id,s.massCancelRequestType="1"}else s.massCancelRequestType="7";return await this.privatePostTradingOrderMassCancel(this.extend(s,t))}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets(),await this.loadAccounts();const a={accountId:await this.getAccountId(s)};let r=void 0;void 0!==e&&(r=this.market(e),a.symbol=r.id);const o=await this.privateGetTradingAccountsAccountIdActiveOrders(this.extend(a,s));return this.parseOrders(o,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets(),await this.loadAccounts();const a={accountId:await this.getAccountId(s)};let r=void 0;void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==t&&(a.from=1e6*this.iso8601(t)),void 0!==i&&(a.limit=i);const o=await this.privateGetTradingAccountsAccountIdLastOrderStatuses(this.extend(a,s));return this.parseOrders(o,r,t,i)}async createDepositAddress(e,t={}){await this.loadMarkets(),await this.loadAccounts();const i={accountId:await this.getAccountId(t),currency:this.currency(e).id},s=await this.privatePostTransfersAccountsAccountIdDepositAddressCurrency(this.extend(i,t)),a=this.safeValue(s,"address");return this.checkAddress(a),{currency:e,address:a,tag:void 0,info:s}}async fetchDepositAddress(e,t={}){await this.loadMarkets(),await this.loadAccounts();const i={accountId:await this.getAccountId(t),currency:this.currency(e).id},s=await this.privateGetTransfersAccountsAccountIdDepositAddressCurrency(this.extend(i,t)),a=this.safeValue(s,"address");return this.checkAddress(a),{currency:e,address:a,tag:void 0,info:s}}async fetchTransactionsByType(e,t,i,s,a={}){if(void 0===t)throw new r(this.id+" fetchTransactions() requires a currency `code` argument");await this.loadMarkets(),await this.loadAccounts();const o=await this.getAccountId(a),n=this.currency(t),c={currency:n.id,accountId:o};void 0!==i&&(c.since=parseInt(i/1e3));const d="privateGetTransfersAccountsAccountId"+this.capitalize(e),h=await this[d](this.extend(c,a)),l=this.safeValue(h,e,[]);return this.parseTransactions(l,n,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsByType("withdrawals",e,t,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsByType("deposits",e,t,i,s)}parseTransaction(e,t){const i=this.safeString(e,"withdrawalRequestId"),s=void 0===i?"deposit":"withdrawal";let a=this.safeInteger(e,"lastUpdated");void 0!==a&&(a=parseInt(a/1e6));const r=this.safeString(e,"txId"),o=this.safeString(e,"currency"),n=this.safeCurrencyCode(o,t),c=this.safeString(e,"address"),d=c,h=this.safeFloat(e,"amount"),l=this.parseTransactionStatus(this.safeString(e,"status"));return{info:e,id:i,txid:r,timestamp:void 0,datetime:this.iso8601(void 0),addressFrom:void 0,addressTo:d,address:c,tagFrom:void 0,tagTo:void 0,tag:void 0,type:s,amount:h,currency:n,status:l,updated:a,fee:void 0}}parseTransactionStatus(e){return this.safeString({1:"pending",2:"ok",3:"failed",4:"failed",5:"pending",100:"pending",101:"pending",102:"pending",103:"pending"},e,e)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets(),await this.loadAccounts();const r=await this.getAccountId(a),o=this.currency(e);let n=this.uuid();n=n.split("-"),n=n.join("");const c={currency:o.id,accountId:r,amount:this.currencyToPrecision(e,t),address:i,id:n},d=await this.privatePostTransfersAccountsAccountIdWithdrawals(this.extend(c,a));return this.parseTransaction(d,o)}parseLedgerEntryType(e){return this.safeString({deposit:"transaction",withdrawal:"transaction","internal deposit":"transfer","internal withdrawal":"transfer",rebate:"rebate",reward:"reward"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"id");let s=void 0;const a=this.safeString(e,"accountId"),r=this.parseLedgerEntryType(this.safeString(e,"kind")),o=this.safeCurrencyCode(this.safeString(e,"currency"),t);let n=this.safeFloat(e,"amount");n<0?(s="out",n=Math.abs(n)):s="in";let c=this.safeInteger(e,"ts");void 0!==c&&(c=parseInt(c/1e6));const d={cost:this.safeFloat(e,"commission"),currency:o};return{info:e,id:i,direction:s,account:a,referenceId:void 0,referenceAccount:void 0,type:r,currency:o,amount:n,before:void 0,after:this.safeFloat(e,"balance"),status:"ok",timestamp:c,datetime:this.iso8601(c),fee:d}}async fetchLedger(e,t,i,s={}){await this.loadMarkets(),await this.loadAccounts();const a={accountId:await this.getAccountId(s)};let r=void 0;void 0!==e&&(r=this.currency(e),a.symbol=r.id),void 0!==t&&(a.from=1e6*t),void 0!==i&&(a.limit=i);const o=await this.privateGetTransfersAccountsAccountIdBalanceHistory(this.extend(a,s));return this.parseLedger(o,r,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t]+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else if("private"===t){this.checkRequiredCredentials();let e=this.nonce();e=e.toString(),e+="000000";const t="AUTH"+e,s=this.secret.slice(14,78),c=this.ecdsa(t,s,"p256","sha256"),d=c.r+c.s;a={"X-AUTH-API-KEY":this.apiKey,"X-AUTH-API-PAYLOAD":t,"X-AUTH-API-SIGNATURE":d,"X-AUTH-API-NONCE":e},"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):"POST"===i&&(r=this.json(n),a["Content-Type"]="application/json")}return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0!==n&&e>=400){const e=this.id+" "+this.json(n),t=this.safeString(n,"error"),i=this.exceptions.exact;if(t in i)throw new i[t](e);const s=this.exceptions.broad,r=this.findBroadlyMatchedKey(s,o);if(void 0!==r)throw new s[r](e);throw new a(e)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,ArgumentsRequired:r,ExchangeNotAvailable:o,InvalidNonce:n,InsufficientFunds:c,OrderNotFound:d,DDoSProtection:h,InvalidOrder:l,AuthenticationError:u,RateLimitExceeded:p}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"yobit",name:"YoBit",countries:["RU"],rateLimit:3e3,version:"3",has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchDeposits:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!1,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766910-cdcbfdae-5eea-11e7-9859-03fea873272d.jpg",api:{public:"https://yobit.net/api",private:"https://yobit.net/tapi"},www:"https://www.yobit.net",doc:"https://www.yobit.net/en/api/",fees:"https://www.yobit.net/en/fees/"},api:{public:{get:["depth/{pair}","info","ticker/{pair}","trades/{pair}"]},private:{post:["ActiveOrders","CancelOrder","GetDepositAddress","getInfo","OrderInfo","Trade","TradeHistory","WithdrawCoinsToAddress"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{}}},commonCurrencies:{AIR:"AirCoin",ANI:"ANICoin",ANT:"AntsCoin",ATMCHA:"ATM",ASN:"Ascension",AST:"Astral",ATM:"Autumncoin",BCC:"BCH",BCS:"BitcoinStake",BITS:"Bitstar",BLN:"Bulleon",BOT:"BOTcoin",BON:"BONES",BPC:"BitcoinPremium",BTS:"Bitshares2",CAT:"BitClave",CBC:"CryptoBossCoin",CMT:"CometCoin",COV:"Coven Coin",COVX:"COV",CPC:"Capricoin",CREDIT:"Creditbit",CS:"CryptoSpots",DCT:"Discount",DFT:"DraftCoin",DGD:"DarkGoldCoin",DIRT:"DIRTY",DROP:"FaucetCoin",DSH:"DASH",EKO:"EkoCoin",ENTER:"ENTRC",EPC:"ExperienceCoin",ESC:"EdwardSnowden",EUROPE:"EUROP",EXT:"LifeExtension",FUNK:"FUNKCoin",GCC:"GlobalCryptocurrency",GEN:"Genstake",GENE:"Genesiscoin",GOLD:"GoldMint",GOT:"Giotto Coin",HTML5:"HTML",HYPERX:"HYPER",ICN:"iCoin",INSANE:"INSN",JNT:"JointCoin",JPC:"JupiterCoin",KNC:"KingN Coin",LBTCX:"LiteBitcoin",LIZI:"LiZi",LOC:"LocoCoin",LOCX:"LOC",LUNYR:"LUN",LUN:"LunarCoin",MDT:"Midnight",NAV:"NavajoCoin",NBT:"NiceBytes",OMG:"OMGame",PAC:"$PAC",PLAY:"PlayCoin",PIVX:"Darknet",PRS:"PRE",PUTIN:"PutinCoin",STK:"StakeCoin",SUB:"Subscriptio",PAY:"EPAY",PLC:"Platin Coin",RCN:"RCoin",REP:"Republicoin",RUR:"RUB",TTC:"TittieCoin",UNI:"Universe",UST:"Uservice",VOL:"VolumeCoin",XIN:"XINCoin",XRA:"Ratecoin"},options:{fetchOrdersRequiresSymbol:!0,fetchTickersMaxLength:512},exceptions:{exact:{803:l,804:l,805:l,806:l,807:l,831:c,832:c,833:d},broad:{"Invalid pair name":a,"invalid api key":u,"invalid sign":u,"api key dont have trade permission":u,"invalid parameter":l,"invalid order":l,"The given order has already been cancelled":l,"Requests too often":h,"not available":o,"data unavailable":o,"external service unavailable":o,"Total transaction amount":l,"The given order has already been closed and cannot be cancelled":l,"Insufficient funds":c,"invalid key":u,"invalid nonce":n,"Total order amount is less than minimal amount":l,"Rate Limited":p}},orders:{}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetInfo(e),i=this.safeValue(t,"return",{}),s={info:t},a=this.safeValue(i,"funds",{}),r=this.safeValue(i,"funds_incl_orders",{}),o=Object.keys(this.extend(a,r));for(let e=0;e<o.length;e++){const t=o[e],i=this.safeCurrencyCode(t),n=this.account();n.free=this.safeFloat(a,t),n.total=this.safeFloat(r,t),s[i]=n}return this.parseBalance(s)}async fetchMarkets(e={}){const t=await this.publicGetInfo(e),i=this.safeValue(t,"pairs"),s=Object.keys(i),a=[];for(let e=0;e<s.length;e++){const t=s[e],r=i[t],[o,n]=t.split("_");let c=o.toUpperCase(),d=n.toUpperCase();c=this.safeCurrencyCode(c),d=this.safeCurrencyCode(d);const h=c+"/"+d,l={amount:this.safeInteger(r,"decimal_places"),price:this.safeInteger(r,"decimal_places")},u={amount:{min:this.safeFloat(r,"min_amount"),max:this.safeFloat(r,"max_amount")},price:{min:this.safeFloat(r,"min_price"),max:this.safeFloat(r,"max_price")},cost:{min:this.safeFloat(r,"min_total")}},p=0===this.safeInteger(r,"hidden");a.push({id:t,symbol:h,base:c,quote:d,baseId:o,quoteId:n,active:p,taker:r.fee/100,precision:l,limits:u,info:r})}return a}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={pair:s.id};void 0!==t&&(r.limit=t);const o=await this.publicGetDepthPair(this.extend(r,i));if(!(s.id in o))throw new a(this.id+" "+s.symbol+" order book is empty or not available");const n=o[s.id];return this.parseOrderBook(n)}async fetchOrderBooks(e,t,i={}){await this.loadMarkets();let s=void 0;if(void 0===e){if(s=this.ids.join("-"),s.length>2048){const e=this.ids.length;throw new a(this.id+" has "+e.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks")}}else s=this.marketIds(e),s=s.join("-");const r={pair:s};void 0!==t&&(r.limit=t);const o=await this.publicGetDepthPair(this.extend(r,i)),n={};s=Object.keys(o);for(let e=0;e<s.length;e++){const t=s[e];n[this.safeSymbol(t)]=this.parseOrderBook(o[t])}return n}parseTicker(e,t){const i=this.safeTimestamp(e,"updated");let s=void 0;void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:this.safeFloat(e,"vol_cur"),quoteVolume:this.safeFloat(e,"vol"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=this.ids;if(void 0===e){const e=i.length;i=i.join("-");const t=this.safeInteger(this.options,"fetchTickersMaxLength",2048);if(i.length>this.options.fetchTickersMaxLength)throw new r(this.id+" has "+e.toString()+" markets exceeding max URL length for this endpoint ("+t.toString()+" characters), please, specify a list of symbols of interest in the first argument to fetchTickers")}else i=this.marketIds(e),i=i.join("-");const s={pair:i},a=await this.publicGetTickerPair(this.extend(s,t)),o={},n=Object.keys(a);for(let e=0;e<n.length;e++){const t=n[e],i=a[t],s=this.safeMarket(t);o[s.symbol]=this.parseTicker(i,s)}return this.filterByArray(o,"symbol",e)}async fetchTicker(e,t={}){return(await this.fetchTickers([e],t))[e]}parseTrade(e,t){const i=this.safeTimestamp(e,"timestamp");let s=this.safeString(e,"type");"ask"===s?s="sell":"bid"===s&&(s="buy");const a=this.safeFloat2(e,"rate","price"),r=this.safeString2(e,"trade_id","tid"),o=this.safeString(e,"order_id"),n=this.safeString(e,"pair"),c=this.safeSymbol(n,t),d=this.safeFloat(e,"amount");let h=void 0;const l=this.safeFloat(e,"commission");if(void 0!==l){const t=this.safeString(e,"commissionCurrency");h={cost:l,currency:this.safeCurrencyCode(t)}}void 0!==this.safeValue(e,"is_your_order")&&void 0===h&&(h=this.calculateFee(c,"limit",s,d,a,"taker"));let u=void 0;return void 0!==d&&void 0!==a&&(u=d*a),{id:r,order:o,timestamp:i,datetime:this.iso8601(i),symbol:c,type:"limit",side:s,takerOrMaker:void 0,price:a,amount:d,cost:u,fee:h,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={pair:a.id};void 0!==i&&(r.limit=i);const o=await this.publicGetTradesPair(this.extend(r,s));if(Array.isArray(o)){if(0===o.length)return[]}return this.parseTrades(o[a.id],a,t,i)}async createOrder(e,t,i,s,r,o={}){if("market"===t)throw new a(this.id+" allows limit orders only");await this.loadMarkets();const n={pair:this.market(e).id,type:i,amount:this.amountToPrecision(e,s),rate:this.priceToPrecision(e,r)};r=parseFloat(r),s=parseFloat(s);const c=await this.privatePostTrade(this.extend(n,o));let d=void 0,h="open",l=0,u=s;"return"in c&&(d=this.safeString(c.return,"order_id"),"0"===d&&(d=this.safeString(c.return,"init_order_id"),h="closed"),l=this.safeFloat(c.return,"received",0),u=this.safeFloat(c.return,"remains",s));const p=this.milliseconds();return{id:d,timestamp:p,datetime:this.iso8601(p),lastTradeTimestamp:void 0,status:h,symbol:e,type:t,side:i,price:r,cost:r*l,amount:s,remaining:u,filled:l,fee:void 0,info:c,clientOrderId:void 0,average:void 0,trades:void 0}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)};return await this.privatePostCancelOrder(this.extend(s,i))}parseOrderStatus(e){return this.safeString({0:"open",1:"closed",2:"canceled",3:"open"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parseOrderStatus(this.safeString(e,"status")),a=this.safeTimestamp(e,"timestamp_created"),r=this.safeString(e,"pair"),o=this.safeSymbol(r,t),n=this.safeFloat(e,"amount"),c=this.safeFloat(e,"start_amount"),d=this.safeFloat(e,"rate");let h=void 0,l=void 0;void 0!==c&&void 0!==n&&(h=Math.max(0,c-n),l=d*h);const u=this.safeString(e,"type");return{info:e,id:i,clientOrderId:void 0,symbol:o,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,type:"limit",timeInForce:void 0,side:u,price:d,stopPrice:void 0,cost:l,amount:c,remaining:n,filled:h,status:s,fee:void 0,average:void 0,trades:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)},a=await this.privatePostOrderInfo(this.extend(s,i));e=e.toString();const r=this.safeValue(a,"return",{});return this.parseOrder(this.extend({id:e},r[e]))}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const a={};if(void 0!==e){const t=this.market(e);a.pair=t.id}const o=await this.privatePostActiveOrders(this.extend(a,s)),n=this.safeValue(o,"return",[]);return this.parseOrders(n,void 0,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchMyTrades requires a `symbol` argument");await this.loadMarkets();const a=this.market(e),o={pair:a.id};void 0!==i&&(o.count=parseInt(i)),void 0!==t&&(o.since=parseInt(t/1e3));const n=await this.privatePostTradeHistory(this.extend(o,s)),c=this.safeValue(n,"return",{}),d=Object.keys(c),h=[];for(let e=0;e<d.length;e++){const t=d[e],i=this.parseTrade(this.extend(c[t],{trade_id:t}),a);h.push(i)}return this.filterBySymbolSinceLimit(h,e,t,i)}async createDepositAddress(e,t={}){const i=await this.fetchDepositAddress(e,this.extend({need_new:1},t)),s=this.safeString(i,"address");return this.checkAddress(s),{currency:e,address:s,tag:void 0,info:i.info}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={coinName:this.currency(e).id,need_new:0},s=await this.privatePostGetDepositAddress(this.extend(i,t)),a=this.safeString(s.return,"address");return this.checkAddress(a),{currency:e,address:a,tag:void 0,info:s}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const o={coinName:this.currency(e).id,amount:t,address:i};if(void 0!==s)throw new a(this.id+" withdraw() does not support the tag argument yet due to a lack of docs on withdrawing with tag/memo on behalf of the exchange.");return{info:await this.privatePostWithdrawCoinsToAddress(this.extend(o,r)),id:void 0}}calculateFee(e,t,i,s,a,r="taker",o={}){const n=this.markets[e];let c="quote";const d=n[r];let h=parseFloat(this.costToPrecision(e,s*d));return"sell"===i?h*=a:c="base",{type:r,currency:n[c],rate:d,cost:h}}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t];const n=this.omit(s,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();const t=this.nonce();r=this.urlencode(this.extend({nonce:t,method:e},n));const i=this.hmac(this.encode(r),this.encode(this.secret),"sha512");a={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:i}}else"public"===t?(o+="/"+this.version+"/"+this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n))):(o+="/"+this.implodeParams(e,s),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(r=this.json(n),a={"Content-Type":"application/json"}));return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0!==n&&"success"in n){let e=this.safeValue(n,"success",!1);if("string"==typeof e&&(e="true"===e||"1"===e),!e){const e=this.safeString(n,"code"),t=this.safeString(n,"error"),i=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,e,i),this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i),new a(i)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:a,BadRequest:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"zaif",name:"Zaif",countries:["JP"],rateLimit:2e3,version:"1",has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchOpenOrders:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766927-39ca2ada-5eeb-11e7-972f-1b4199518ca6.jpg",api:"https://api.zaif.jp",www:"https://zaif.jp",doc:["https://techbureau-api-document.readthedocs.io/ja/latest/index.html","https://corp.zaif.jp/api-docs","https://corp.zaif.jp/api-docs/api_links","https://www.npmjs.com/package/zaif.jp","https://github.com/you21979/node-zaif"],fees:"https://zaif.jp/fee?lang=en"},fees:{trading:{percentage:!0,taker:.001,maker:0}},api:{public:{get:["depth/{pair}","currencies/{pair}","currencies/all","currency_pairs/{pair}","currency_pairs/all","last_price/{pair}","ticker/{pair}","trades/{pair}"]},private:{post:["active_orders","cancel_order","deposit_history","get_id_info","get_info","get_info2","get_personal_info","trade","trade_history","withdraw","withdraw_history"]},ecapi:{post:["createInvoice","getInvoice","getInvoiceIdsByOrderNumber","cancelInvoice"]},tlapi:{post:["get_positions","position_history","active_positions","create_position","change_position","cancel_position"]},fapi:{get:["groups/{group_id}","last_price/{group_id}/{pair}","ticker/{group_id}/{pair}","trades/{group_id}/{pair}","depth/{group_id}/{pair}"]}},options:{fees:{"BTC/JPY":{maker:0,taker:0},"BCH/JPY":{maker:0,taker:.003},"BCH/BTC":{maker:0,taker:.003},"PEPECASH/JPY":{maker:0,taker:1e-4},"PEPECASH/BT":{maker:0,taker:1e-4}}},exceptions:{exact:{"unsupported currency_pair":r},broad:{}}})}async fetchMarkets(e={}){const t=await this.publicGetCurrencyPairsAll(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],a=this.safeString(s,"currency_pair"),r=this.safeString(s,"name"),[o,n]=r.split("/"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(n),h=c+"/"+d,l={amount:-Math.log10(s.item_unit_step),price:s.aux_unit_point},u=this.safeValue(this.options.fees,h,this.fees.trading),p=u.taker,f=u.maker;i.push({id:a,symbol:h,base:c,quote:d,baseId:o,quoteId:n,active:!0,precision:l,taker:p,maker:f,limits:{amount:{min:this.safeFloat(s,"item_unit_min"),max:void 0},price:{min:this.safeFloat(s,"aux_unit_min"),max:void 0},cost:{min:void 0,max:void 0}},info:s})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetInfo(e),i=this.safeValue(t,"return",{}),s={info:t},a=this.safeValue(i,"funds",{}),r=Object.keys(a);for(let e=0;e<r.length;e++){const t=r[e],o=this.safeCurrencyCode(t),n=this.safeValue(a,t),c={free:n,used:0,total:n};"deposit"in i&&t in i.deposit&&(c.total=this.safeFloat(i.deposit,t),c.used=c.total-c.free),s[o]=c}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)},a=await this.publicGetDepthPair(this.extend(s,i));return this.parseOrderBook(a)}async fetchTicker(e,t={}){await this.loadMarkets();const i={pair:this.marketId(e)},s=await this.publicGetTickerPair(this.extend(i,t)),a=this.milliseconds(),r=this.safeFloat(s,"vwap"),o=this.safeFloat(s,"volume");let n=void 0;void 0!==o&&void 0!==r&&(n=o*r);const c=this.safeFloat(s,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:r,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:o,quoteVolume:n,info:s}}parseTrade(e,t){let i=this.safeString(e,"trade_type");i="bid"===i?"buy":"sell";const s=this.safeTimestamp(e,"date"),a=this.safeString2(e,"id","tid"),r=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=void 0;void 0!==r&&void 0!==o&&(n=o*r);const c=this.safeString(e,"currency_pair"),d=this.safeSymbol(c,t,"_");return{id:a,info:e,timestamp:s,datetime:this.iso8601(s),symbol:d,type:void 0,side:i,order:void 0,takerOrMaker:void 0,price:r,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const a=this.market(e),r={pair:a.id};let o=await this.publicGetTradesPair(this.extend(r,s));if(1===o.length){const e=o[0];Object.keys(e).length||(o=[])}return this.parseTrades(o,a,t,i)}async createOrder(e,t,i,s,r,o={}){if(await this.loadMarkets(),"limit"!==t)throw new a(this.id+" allows limit orders only");const n={currency_pair:this.marketId(e),action:"buy"===i?"bid":"ask",amount:s,price:r},c=await this.privatePostTrade(this.extend(n,o));return{info:c,id:c.return.order_id.toString()}}async cancelOrder(e,t,i={}){const s={order_id:e};return await this.privatePostCancelOrder(this.extend(s,i))}parseOrder(e,t){let i=this.safeString(e,"action");i="bid"===i?"buy":"sell";const s=this.safeTimestamp(e,"timestamp"),a=this.safeString(e,"currency_pair"),r=this.safeSymbol(a,t,"_"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let c=void 0;void 0!==o&&void 0!==n&&(c=o*n);return{id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,status:"open",symbol:r,type:"limit",timeInForce:void 0,side:i,price:o,stopPrice:void 0,cost:c,amount:n,filled:void 0,remaining:void 0,trades:void 0,fee:void 0,info:e,average:void 0}}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.market(e),r.currency_pair=a.id);const o=await this.privatePostActiveOrders(this.extend(r,s));return this.parseOrders(o.return,a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;const r={};void 0!==e&&(a=this.market(e),r.currency_pair=a.id);const o=await this.privatePostTradeHistory(this.extend(r,s));return this.parseOrders(o.return,a,t,i)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const o=this.currency(e);if("JPY"===e)throw new a(this.id+" withdraw() does not allow "+e+" withdrawals");const n={currency:o.id,amount:t,address:i};void 0!==s&&(n.message=s);const c=await this.privatePostWithdraw(this.extend(n,r));return{info:c,id:c.return.txid,fee:c.return.fee}}nonce(){return parseFloat(this.milliseconds()/1e3).toFixed(8)}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api+"/";if("public"===t)o+="api/"+this.version+"/"+this.implodeParams(e,s);else if("fapi"===t)o+="fapi/"+this.version+"/"+this.implodeParams(e,s);else{this.checkRequiredCredentials(),o+="ecapi"===t?"ecapi":"tlapi"===t?"tlapi":"tapi";const i=this.nonce();r=this.urlencode(this.extend({method:e,nonce:i},s)),a={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(r),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:r,headers:a}}handleErrors(e,t,i,s,r,o,n,c,d){if(void 0===n)return;const h=this.id+" "+o,l=this.safeString(n,"error");if(void 0!==l)throw this.throwExactlyMatchedException(this.exceptions.exact,l,h),this.throwBroadlyMatchedException(this.exceptions.broad,l,h),new a(h);if(!this.safeValue(n,"success",!0))throw new a(h)}}},function(e,t,i){const s=i(4),a=i(8),r=i(9),o=async(e,t,i,o,n,c,d,h=!1)=>{try{let l=await s(n,c,d,h),u=a(l),p={high:u.high,low:u.low,conversionPeriod:e,basePeriod:t,spanPeriod:i,displacement:o};return await r.IchimokuCloud.calculate(p)}catch(e){throw e}};e.exports=o},function(e,t,i){const s=i(4),a=i(8),r=i(9);e.exports=async(e,t,i,o,n,c,d,h=!1)=>{try{let l=await s(n,c,d,h),u={values:a(l)[o],fastPeriod:e,slowPeriod:t,signalPeriod:i,SimpleMAOscillator:!1,SimpleMASignal:!1};return await r.MACD.calculate(u)}catch(e){throw e}}},function(e,t,i){const s=i(4),a=i(8),r=i(9);e.exports=async(e,t,i,o,n=!1)=>{try{let c=await s(t,i,o,n),d=a(c),h={high:d.high,low:d.low,close:d.close,volume:d.volume,period:e};return await r.MFI.calculate(h)}catch(e){throw e}}},function(e,t,i){const s=i(4),a=i(8),r=i(9);e.exports=async(e,t,i,o=!1)=>{try{let n=await s(e,t,i,o),c=a(n),d={close:c.close,volume:c.volume};return await r.OBV.calculate(d)}catch(e){throw e}}},function(e,t,i){const s=i(4),a=i(8),r=i(9),o=async(e,t,i,o,n,c,d,h,l=!1)=>{try{let u=await s(c,d,h,l),p={values:a(u)[n],kPeriod:e,dPeriod:t,stochasticPeriod:o,rsiPeriod:i};return await r.StochasticRSI.calculate(p)}catch(e){throw e}};e.exports=o},function(e,t,i){const s=i(4),a=i(8),r=i(9);e.exports=async(e,t,i,o,n,c=!1)=>{try{let d=await s(i,o,n,c),h={values:a(d)[t],period:e};return await r.WMA.calculate(h)}catch(e){throw e}}},function(e,t,i){function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}e.exports=a(a(a(a({},i(331)),i(332)),i(333)),i(334))},function(e,t,i){const s=i(71),a=i(94);e.exports={bbCheck:async(e,t,i,r,o,n=!1)=>{let c=await(async(e,t,i,a,r,o)=>{try{return await s(parseInt(e),parseInt(t),"close",i,a,r,o)}catch(e){throw e}})(e,t,i,r,o,n),d=c[c.length-1];return tick=await a(i,r,n),price=tick.close,down=price<d.lower,up=price>d.upper,{breakOut:down||up,band:down?"lower":up?"upper":"none",direction:down?"down":up?"up":"none",price:price}}}},function(e,t,i){const s=i(91),a=i(4),{crossover:r,crossunder:o}=i(95);e.exports={priceCrossEMA:async(e,t,i,n,c=!1)=>{let d=await s(parseInt(e),"close",t,i,n,c),h=await a(t,i,n,c),l=[h[1][3],h[0][3]],u=r(l,d),p=o(l,d);return{cross:u||p,direction:u?"up":p?"down":"none"}}}},function(e,t,i){const s=i(93),a=i(4),{crossover:r,crossunder:o}=i(95),n=async(e,t,i,a,r,o)=>{try{return{fast:await s(parseInt(e),"close",i,a,r,o),slow:await s(parseInt(t),"close",i,a,r,o)}}catch(e){throw e}};let c,d;const h=async(e,t,i,s,a,o=!1)=>{if(null==c||null==d){let r=await n(e,t,i,s,a,o);c=r.fast,d=r.slow}return r(c,d)},l=async(e,t,i,s,a,r=!1)=>{if(null==c||null==d){let o=await n(e,t,i,s,a,r);c=o.fast,d=o.slow}return o(c,d)};e.exports={maCross:async(e,t,i,s,a,r=!1)=>({goldenCross:await h(e,t,i,s,a,r),deathCross:await l(e,t,i,s,a,r)}),goldenCross:h,deathCross:l,priceCrossSMA:async(e,t,i,n,c=!1)=>{let d=await s(parseInt(e),"close",t,i,n,c),h=await a(t,i,n,c),l=[h[1][3],h[0][3]],u=r(l,d),p=o(l,d);return{cross:u||p,direction:u?"up":p?"down":"none"}}}},function(e,t,i){const s=i(92);e.exports={rsiCheck:async(e,t,i,a,r,o,n=!1)=>{let c=await(async(e,t,i,a,r)=>{try{return await s(parseInt(e),"close",t,i,a,r)}catch(e){throw e}})(e,a,r,o,n),d=c[c.length-1];return{overBought:d>=t,overSold:d<=i,rsiVal:d}}}}]));